(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();/**
* @vue/shared v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Sd(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Ge={},Ws=[],$n=()=>{},t1=()=>!1,Pl=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Cd=t=>t.startsWith("onUpdate:"),xt=Object.assign,Rd=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},n1=Object.prototype.hasOwnProperty,He=(t,e)=>n1.call(t,e),be=Array.isArray,Gs=t=>Ui(t)==="[object Map]",fo=t=>Ui(t)==="[object Set]",Xf=t=>Ui(t)==="[object Date]",Pe=t=>typeof t=="function",lt=t=>typeof t=="string",Tn=t=>typeof t=="symbol",Je=t=>t!==null&&typeof t=="object",g0=t=>(Je(t)||Pe(t))&&Pe(t.then)&&Pe(t.catch),m0=Object.prototype.toString,Ui=t=>m0.call(t),r1=t=>Ui(t).slice(8,-1),y0=t=>Ui(t)==="[object Object]",Pd=t=>lt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,ti=Sd(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ol=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},s1=/-(\w)/g,mn=Ol(t=>t.replace(s1,(e,n)=>n?n.toUpperCase():"")),o1=/\B([A-Z])/g,Wr=Ol(t=>t.replace(o1,"-$1").toLowerCase()),Nl=Ol(t=>t.charAt(0).toUpperCase()+t.slice(1)),Ku=Ol(t=>t?`on${Nl(t)}`:""),Nr=(t,e)=>!Object.is(t,e),Pa=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},v0=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},Qa=t=>{const e=parseFloat(t);return isNaN(e)?t:e},i1=t=>{const e=lt(t)?Number(t):NaN;return isNaN(e)?t:e};let Zf;const Dl=()=>Zf||(Zf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function po(t){if(be(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=lt(r)?c1(r):po(r);if(s)for(const o in s)e[o]=s[o]}return e}else if(lt(t)||Je(t))return t}const a1=/;(?![^(]*\))/g,l1=/:([^]+)/,u1=/\/\*[^]*?\*\//g;function c1(t){const e={};return t.replace(u1,"").split(a1).forEach(n=>{if(n){const r=n.split(l1);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function re(t){let e="";if(lt(t))e=t;else if(be(t))for(let n=0;n<t.length;n++){const r=re(t[n]);r&&(e+=r+" ")}else if(Je(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const d1="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",h1=Sd(d1);function _0(t){return!!t||t===""}function f1(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=vs(t[r],e[r]);return n}function vs(t,e){if(t===e)return!0;let n=Xf(t),r=Xf(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Tn(t),r=Tn(e),n||r)return t===e;if(n=be(t),r=be(e),n||r)return n&&r?f1(t,e):!1;if(n=Je(t),r=Je(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,o=Object.keys(e).length;if(s!==o)return!1;for(const i in t){const a=t.hasOwnProperty(i),u=e.hasOwnProperty(i);if(a&&!u||!a&&u||!vs(t[i],e[i]))return!1}}return String(t)===String(e)}function Od(t,e){return t.findIndex(n=>vs(n,e))}const b0=t=>!!(t&&t.__v_isRef===!0),F=t=>lt(t)?t:t==null?"":be(t)||Je(t)&&(t.toString===m0||!Pe(t.toString))?b0(t)?F(t.value):JSON.stringify(t,w0,2):String(t),w0=(t,e)=>b0(e)?w0(t,e.value):Gs(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],o)=>(n[Wu(r,o)+" =>"]=s,n),{})}:fo(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Wu(n))}:Tn(e)?Wu(e):Je(e)&&!be(e)&&!y0(e)?String(e):e,Wu=(t,e="")=>{var n;return Tn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Lt;class x0{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Lt,!e&&Lt&&(this.index=(Lt.scopes||(Lt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Lt;try{return Lt=this,e()}finally{Lt=n}}}on(){++this._on===1&&(this.prevScope=Lt,Lt=this)}off(){this._on>0&&--this._on===0&&(Lt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function E0(t){return new x0(t)}function T0(){return Lt}function p1(t,e=!1){Lt&&Lt.cleanups.push(t)}let Ye;const Gu=new WeakSet;class I0{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Lt&&Lt.active&&Lt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Gu.has(this)&&(Gu.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||A0(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ep(this),S0(this);const e=Ye,n=wn;Ye=this,wn=!0;try{return this.fn()}finally{C0(this),Ye=e,wn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Vd(e);this.deps=this.depsTail=void 0,ep(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Gu.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Oc(this)&&this.run()}get dirty(){return Oc(this)}}let k0=0,ni,ri;function A0(t,e=!1){if(t.flags|=8,e){t.next=ri,ri=t;return}t.next=ni,ni=t}function Nd(){k0++}function Dd(){if(--k0>0)return;if(ri){let e=ri;for(ri=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;ni;){let e=ni;for(ni=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function S0(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function C0(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),Vd(r),g1(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function Oc(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(R0(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function R0(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===mi)||(t.globalVersion=mi,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Oc(t))))return;t.flags|=2;const e=t.dep,n=Ye,r=wn;Ye=t,wn=!0;try{S0(t);const s=t.fn(t._value);(e.version===0||Nr(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{Ye=n,wn=r,C0(t),t.flags&=-3}}function Vd(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let o=n.computed.deps;o;o=o.nextDep)Vd(o,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function g1(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let wn=!0;const P0=[];function lr(){P0.push(wn),wn=!1}function ur(){const t=P0.pop();wn=t===void 0?!0:t}function ep(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Ye;Ye=void 0;try{e()}finally{Ye=n}}}let mi=0;class m1{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Md{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!Ye||!wn||Ye===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Ye)n=this.activeLink=new m1(Ye,this),Ye.deps?(n.prevDep=Ye.depsTail,Ye.depsTail.nextDep=n,Ye.depsTail=n):Ye.deps=Ye.depsTail=n,O0(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Ye.depsTail,n.nextDep=void 0,Ye.depsTail.nextDep=n,Ye.depsTail=n,Ye.deps===n&&(Ye.deps=r)}return n}trigger(e){this.version++,mi++,this.notify(e)}notify(e){Nd();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Dd()}}}function O0(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)O0(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Ja=new WeakMap,fs=Symbol(""),Nc=Symbol(""),yi=Symbol("");function Ut(t,e,n){if(wn&&Ye){let r=Ja.get(t);r||Ja.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new Md),s.map=r,s.key=n),s.track()}}function Yn(t,e,n,r,s,o){const i=Ja.get(t);if(!i){mi++;return}const a=u=>{u&&u.trigger()};if(Nd(),e==="clear")i.forEach(a);else{const u=be(t),c=u&&Pd(n);if(u&&n==="length"){const h=Number(r);i.forEach((f,g)=>{(g==="length"||g===yi||!Tn(g)&&g>=h)&&a(f)})}else switch((n!==void 0||i.has(void 0))&&a(i.get(n)),c&&a(i.get(yi)),e){case"add":u?c&&a(i.get("length")):(a(i.get(fs)),Gs(t)&&a(i.get(Nc)));break;case"delete":u||(a(i.get(fs)),Gs(t)&&a(i.get(Nc)));break;case"set":Gs(t)&&a(i.get(fs));break}}Dd()}function y1(t,e){const n=Ja.get(t);return n&&n.get(e)}function Fs(t){const e=je(t);return e===t?e:(Ut(e,"iterate",yi),fn(t)?e:e.map(Ct))}function Vl(t){return Ut(t=je(t),"iterate",yi),t}const v1={__proto__:null,[Symbol.iterator](){return Qu(this,Symbol.iterator,Ct)},concat(...t){return Fs(this).concat(...t.map(e=>be(e)?Fs(e):e))},entries(){return Qu(this,"entries",t=>(t[1]=Ct(t[1]),t))},every(t,e){return Kn(this,"every",t,e,void 0,arguments)},filter(t,e){return Kn(this,"filter",t,e,n=>n.map(Ct),arguments)},find(t,e){return Kn(this,"find",t,e,Ct,arguments)},findIndex(t,e){return Kn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Kn(this,"findLast",t,e,Ct,arguments)},findLastIndex(t,e){return Kn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Kn(this,"forEach",t,e,void 0,arguments)},includes(...t){return Ju(this,"includes",t)},indexOf(...t){return Ju(this,"indexOf",t)},join(t){return Fs(this).join(t)},lastIndexOf(...t){return Ju(this,"lastIndexOf",t)},map(t,e){return Kn(this,"map",t,e,void 0,arguments)},pop(){return zo(this,"pop")},push(...t){return zo(this,"push",t)},reduce(t,...e){return tp(this,"reduce",t,e)},reduceRight(t,...e){return tp(this,"reduceRight",t,e)},shift(){return zo(this,"shift")},some(t,e){return Kn(this,"some",t,e,void 0,arguments)},splice(...t){return zo(this,"splice",t)},toReversed(){return Fs(this).toReversed()},toSorted(t){return Fs(this).toSorted(t)},toSpliced(...t){return Fs(this).toSpliced(...t)},unshift(...t){return zo(this,"unshift",t)},values(){return Qu(this,"values",Ct)}};function Qu(t,e,n){const r=Vl(t),s=r[e]();return r!==t&&!fn(t)&&(s._next=s.next,s.next=()=>{const o=s._next();return o.value&&(o.value=n(o.value)),o}),s}const _1=Array.prototype;function Kn(t,e,n,r,s,o){const i=Vl(t),a=i!==t&&!fn(t),u=i[e];if(u!==_1[e]){const f=u.apply(t,o);return a?Ct(f):f}let c=n;i!==t&&(a?c=function(f,g){return n.call(this,Ct(f),g,t)}:n.length>2&&(c=function(f,g){return n.call(this,f,g,t)}));const h=u.call(i,c,r);return a&&s?s(h):h}function tp(t,e,n,r){const s=Vl(t);let o=n;return s!==t&&(fn(t)?n.length>3&&(o=function(i,a,u){return n.call(this,i,a,u,t)}):o=function(i,a,u){return n.call(this,i,Ct(a),u,t)}),s[e](o,...r)}function Ju(t,e,n){const r=je(t);Ut(r,"iterate",yi);const s=r[e](...n);return(s===-1||s===!1)&&Fd(n[0])?(n[0]=je(n[0]),r[e](...n)):s}function zo(t,e,n=[]){lr(),Nd();const r=je(t)[e].apply(t,n);return Dd(),ur(),r}const b1=Sd("__proto__,__v_isRef,__isVue"),N0=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Tn));function w1(t){Tn(t)||(t=String(t));const e=je(this);return Ut(e,"has",t),e.hasOwnProperty(t)}class D0{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,o=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return o;if(n==="__v_raw")return r===(s?o?P1:L0:o?$0:M0).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const i=be(e);if(!s){let u;if(i&&(u=v1[n]))return u;if(n==="hasOwnProperty")return w1}const a=Reflect.get(e,n,Xe(e)?e:r);return(Tn(n)?N0.has(n):b1(n))||(s||Ut(e,"get",n),o)?a:Xe(a)?i&&Pd(n)?a:a.value:Je(a)?s?U0(a):go(a):a}}class V0 extends D0{constructor(e=!1){super(!1,e)}set(e,n,r,s){let o=e[n];if(!this._isShallow){const u=Fr(o);if(!fn(r)&&!Fr(r)&&(o=je(o),r=je(r)),!be(e)&&Xe(o)&&!Xe(r))return u?!1:(o.value=r,!0)}const i=be(e)&&Pd(n)?Number(n)<e.length:He(e,n),a=Reflect.set(e,n,r,Xe(e)?e:s);return e===je(s)&&(i?Nr(r,o)&&Yn(e,"set",n,r):Yn(e,"add",n,r)),a}deleteProperty(e,n){const r=He(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&Yn(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!Tn(n)||!N0.has(n))&&Ut(e,"has",n),r}ownKeys(e){return Ut(e,"iterate",be(e)?"length":fs),Reflect.ownKeys(e)}}class x1 extends D0{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const E1=new V0,T1=new x1,I1=new V0(!0);const Dc=t=>t,_a=t=>Reflect.getPrototypeOf(t);function k1(t,e,n){return function(...r){const s=this.__v_raw,o=je(s),i=Gs(o),a=t==="entries"||t===Symbol.iterator&&i,u=t==="keys"&&i,c=s[t](...r),h=n?Dc:e?Ya:Ct;return!e&&Ut(o,"iterate",u?Nc:fs),{next(){const{value:f,done:g}=c.next();return g?{value:f,done:g}:{value:a?[h(f[0]),h(f[1])]:h(f),done:g}},[Symbol.iterator](){return this}}}}function ba(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function A1(t,e){const n={get(s){const o=this.__v_raw,i=je(o),a=je(s);t||(Nr(s,a)&&Ut(i,"get",s),Ut(i,"get",a));const{has:u}=_a(i),c=e?Dc:t?Ya:Ct;if(u.call(i,s))return c(o.get(s));if(u.call(i,a))return c(o.get(a));o!==i&&o.get(s)},get size(){const s=this.__v_raw;return!t&&Ut(je(s),"iterate",fs),Reflect.get(s,"size",s)},has(s){const o=this.__v_raw,i=je(o),a=je(s);return t||(Nr(s,a)&&Ut(i,"has",s),Ut(i,"has",a)),s===a?o.has(s):o.has(s)||o.has(a)},forEach(s,o){const i=this,a=i.__v_raw,u=je(a),c=e?Dc:t?Ya:Ct;return!t&&Ut(u,"iterate",fs),a.forEach((h,f)=>s.call(o,c(h),c(f),i))}};return xt(n,t?{add:ba("add"),set:ba("set"),delete:ba("delete"),clear:ba("clear")}:{add(s){!e&&!fn(s)&&!Fr(s)&&(s=je(s));const o=je(this);return _a(o).has.call(o,s)||(o.add(s),Yn(o,"add",s,s)),this},set(s,o){!e&&!fn(o)&&!Fr(o)&&(o=je(o));const i=je(this),{has:a,get:u}=_a(i);let c=a.call(i,s);c||(s=je(s),c=a.call(i,s));const h=u.call(i,s);return i.set(s,o),c?Nr(o,h)&&Yn(i,"set",s,o):Yn(i,"add",s,o),this},delete(s){const o=je(this),{has:i,get:a}=_a(o);let u=i.call(o,s);u||(s=je(s),u=i.call(o,s)),a&&a.call(o,s);const c=o.delete(s);return u&&Yn(o,"delete",s,void 0),c},clear(){const s=je(this),o=s.size!==0,i=s.clear();return o&&Yn(s,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=k1(s,t,e)}),n}function $d(t,e){const n=A1(t,e);return(r,s,o)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(He(n,s)&&s in r?n:r,s,o)}const S1={get:$d(!1,!1)},C1={get:$d(!1,!0)},R1={get:$d(!0,!1)};const M0=new WeakMap,$0=new WeakMap,L0=new WeakMap,P1=new WeakMap;function O1(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function N1(t){return t.__v_skip||!Object.isExtensible(t)?0:O1(r1(t))}function go(t){return Fr(t)?t:Ld(t,!1,E1,S1,M0)}function F0(t){return Ld(t,!1,I1,C1,$0)}function U0(t){return Ld(t,!0,T1,R1,L0)}function Ld(t,e,n,r,s){if(!Je(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const o=N1(t);if(o===0)return t;const i=s.get(t);if(i)return i;const a=new Proxy(t,o===2?r:n);return s.set(t,a),a}function Dr(t){return Fr(t)?Dr(t.__v_raw):!!(t&&t.__v_isReactive)}function Fr(t){return!!(t&&t.__v_isReadonly)}function fn(t){return!!(t&&t.__v_isShallow)}function Fd(t){return t?!!t.__v_raw:!1}function je(t){const e=t&&t.__v_raw;return e?je(e):t}function Ud(t){return!He(t,"__v_skip")&&Object.isExtensible(t)&&v0(t,"__v_skip",!0),t}const Ct=t=>Je(t)?go(t):t,Ya=t=>Je(t)?U0(t):t;function Xe(t){return t?t.__v_isRef===!0:!1}function H(t){return j0(t,!1)}function D1(t){return j0(t,!0)}function j0(t,e){return Xe(t)?t:new V1(t,e)}class V1{constructor(e,n){this.dep=new Md,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:je(e),this._value=n?e:Ct(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||fn(e)||Fr(e);e=r?e:je(e),Nr(e,n)&&(this._rawValue=e,this._value=r?e:Ct(e),this.dep.trigger())}}function _e(t){return Xe(t)?t.value:t}const M1={get:(t,e,n)=>e==="__v_raw"?t:_e(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return Xe(s)&&!Xe(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function B0(t){return Dr(t)?t:new Proxy(t,M1)}function $1(t){const e=be(t)?new Array(t.length):{};for(const n in t)e[n]=F1(t,n);return e}class L1{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return y1(je(this._object),this._key)}}function F1(t,e,n){const r=t[e];return Xe(r)?r:new L1(t,e,n)}class U1{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Md(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=mi-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Ye!==this)return A0(this,!0),!0}get value(){const e=this.dep.track();return R0(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function j1(t,e,n=!1){let r,s;return Pe(t)?r=t:(r=t.get,s=t.set),new U1(r,s,n)}const wa={},Xa=new WeakMap;let is;function B1(t,e=!1,n=is){if(n){let r=Xa.get(n);r||Xa.set(n,r=[]),r.push(t)}}function z1(t,e,n=Ge){const{immediate:r,deep:s,once:o,scheduler:i,augmentJob:a,call:u}=n,c=j=>s?j:fn(j)||s===!1||s===0?Xn(j,1):Xn(j);let h,f,g,m,_=!1,T=!1;if(Xe(t)?(f=()=>t.value,_=fn(t)):Dr(t)?(f=()=>c(t),_=!0):be(t)?(T=!0,_=t.some(j=>Dr(j)||fn(j)),f=()=>t.map(j=>{if(Xe(j))return j.value;if(Dr(j))return c(j);if(Pe(j))return u?u(j,2):j()})):Pe(t)?e?f=u?()=>u(t,2):t:f=()=>{if(g){lr();try{g()}finally{ur()}}const j=is;is=h;try{return u?u(t,3,[m]):t(m)}finally{is=j}}:f=$n,e&&s){const j=f,U=s===!0?1/0:s;f=()=>Xn(j(),U)}const x=T0(),C=()=>{h.stop(),x&&x.active&&Rd(x.effects,h)};if(o&&e){const j=e;e=(...U)=>{j(...U),C()}}let P=T?new Array(t.length).fill(wa):wa;const V=j=>{if(!(!(h.flags&1)||!h.dirty&&!j))if(e){const U=h.run();if(s||_||(T?U.some((q,k)=>Nr(q,P[k])):Nr(U,P))){g&&g();const q=is;is=h;try{const k=[U,P===wa?void 0:T&&P[0]===wa?[]:P,m];P=U,u?u(e,3,k):e(...k)}finally{is=q}}}else h.run()};return a&&a(V),h=new I0(f),h.scheduler=i?()=>i(V,!1):V,m=j=>B1(j,!1,h),g=h.onStop=()=>{const j=Xa.get(h);if(j){if(u)u(j,4);else for(const U of j)U();Xa.delete(h)}},e?r?V(!0):P=h.run():i?i(V.bind(null,!0),!0):h.run(),C.pause=h.pause.bind(h),C.resume=h.resume.bind(h),C.stop=C,C}function Xn(t,e=1/0,n){if(e<=0||!Je(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Xe(t))Xn(t.value,e,n);else if(be(t))for(let r=0;r<t.length;r++)Xn(t[r],e,n);else if(fo(t)||Gs(t))t.forEach(r=>{Xn(r,e,n)});else if(y0(t)){for(const r in t)Xn(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Xn(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ji(t,e,n,r){try{return r?t(...r):t()}catch(s){Ml(s,e,n)}}function In(t,e,n,r){if(Pe(t)){const s=ji(t,e,n,r);return s&&g0(s)&&s.catch(o=>{Ml(o,e,n)}),s}if(be(t)){const s=[];for(let o=0;o<t.length;o++)s.push(In(t[o],e,n,r));return s}}function Ml(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:i}=e&&e.appContext.config||Ge;if(e){let a=e.parent;const u=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const h=a.ec;if(h){for(let f=0;f<h.length;f++)if(h[f](t,u,c)===!1)return}a=a.parent}if(o){lr(),ji(o,null,10,[t,u,c]),ur();return}}q1(t,n,s,r,i)}function q1(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const Qt=[];let Nn=-1;const Qs=[];let Ir=null,js=0;const z0=Promise.resolve();let Za=null;function xn(t){const e=Za||z0;return t?e.then(this?t.bind(this):t):e}function H1(t){let e=Nn+1,n=Qt.length;for(;e<n;){const r=e+n>>>1,s=Qt[r],o=vi(s);o<t||o===t&&s.flags&2?e=r+1:n=r}return e}function jd(t){if(!(t.flags&1)){const e=vi(t),n=Qt[Qt.length-1];!n||!(t.flags&2)&&e>=vi(n)?Qt.push(t):Qt.splice(H1(e),0,t),t.flags|=1,q0()}}function q0(){Za||(Za=z0.then(K0))}function K1(t){be(t)?Qs.push(...t):Ir&&t.id===-1?Ir.splice(js+1,0,t):t.flags&1||(Qs.push(t),t.flags|=1),q0()}function np(t,e,n=Nn+1){for(;n<Qt.length;n++){const r=Qt[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Qt.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function H0(t){if(Qs.length){const e=[...new Set(Qs)].sort((n,r)=>vi(n)-vi(r));if(Qs.length=0,Ir){Ir.push(...e);return}for(Ir=e,js=0;js<Ir.length;js++){const n=Ir[js];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Ir=null,js=0}}const vi=t=>t.id==null?t.flags&2?-1:1/0:t.id;function K0(t){try{for(Nn=0;Nn<Qt.length;Nn++){const e=Qt[Nn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),ji(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Nn<Qt.length;Nn++){const e=Qt[Nn];e&&(e.flags&=-2)}Nn=-1,Qt.length=0,H0(),Za=null,(Qt.length||Qs.length)&&K0()}}let mt=null,W0=null;function el(t){const e=mt;return mt=t,W0=t&&t.type.__scopeId||null,e}function me(t,e=mt,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&fp(-1);const o=el(e);let i;try{i=t(...s)}finally{el(o),r._d&&fp(1)}return i};return r._n=!0,r._c=!0,r._d=!0,r}function Ae(t,e){if(mt===null)return t;const n=jl(mt),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[o,i,a,u=Ge]=e[s];o&&(Pe(o)&&(o={mounted:o,updated:o}),o.deep&&Xn(i),r.push({dir:o,instance:n,value:i,oldValue:void 0,arg:a,modifiers:u}))}return t}function ns(t,e,n,r){const s=t.dirs,o=e&&e.dirs;for(let i=0;i<s.length;i++){const a=s[i];o&&(a.oldValue=o[i].value);let u=a.dir[r];u&&(lr(),In(u,n,8,[t.el,a,t,e]),ur())}}const W1=Symbol("_vte"),G0=t=>t.__isTeleport,kr=Symbol("_leaveCb"),xa=Symbol("_enterCb");function G1(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ft(()=>{t.isMounted=!0}),ny(()=>{t.isUnmounting=!0}),t}const hn=[Function,Array],Q0={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:hn,onEnter:hn,onAfterEnter:hn,onEnterCancelled:hn,onBeforeLeave:hn,onLeave:hn,onAfterLeave:hn,onLeaveCancelled:hn,onBeforeAppear:hn,onAppear:hn,onAfterAppear:hn,onAppearCancelled:hn},J0=t=>{const e=t.subTree;return e.component?J0(e.component):e},Q1={name:"BaseTransition",props:Q0,setup(t,{slots:e}){const n=Iy(),r=G1();return()=>{const s=e.default&&Z0(e.default(),!0);if(!s||!s.length)return;const o=Y0(s),i=je(t),{mode:a}=i;if(r.isLeaving)return Yu(o);const u=rp(o);if(!u)return Yu(o);let c=Vc(u,i,r,n,f=>c=f);u.type!==Bt&&_i(u,c);let h=n.subTree&&rp(n.subTree);if(h&&h.type!==Bt&&!ls(u,h)&&J0(n).type!==Bt){let f=Vc(h,i,r,n);if(_i(h,f),a==="out-in"&&u.type!==Bt)return r.isLeaving=!0,f.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,h=void 0},Yu(o);a==="in-out"&&u.type!==Bt?f.delayLeave=(g,m,_)=>{const T=X0(r,h);T[String(h.key)]=h,g[kr]=()=>{m(),g[kr]=void 0,delete c.delayedLeave,h=void 0},c.delayedLeave=()=>{_(),delete c.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return o}}};function Y0(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==Bt){e=n;break}}return e}const J1=Q1;function X0(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Vc(t,e,n,r,s){const{appear:o,mode:i,persisted:a=!1,onBeforeEnter:u,onEnter:c,onAfterEnter:h,onEnterCancelled:f,onBeforeLeave:g,onLeave:m,onAfterLeave:_,onLeaveCancelled:T,onBeforeAppear:x,onAppear:C,onAfterAppear:P,onAppearCancelled:V}=e,j=String(t.key),U=X0(n,t),q=(b,S)=>{b&&In(b,r,9,S)},k=(b,S)=>{const E=S[1];q(b,S),be(b)?b.every(A=>A.length<=1)&&E():b.length<=1&&E()},v={mode:i,persisted:a,beforeEnter(b){let S=u;if(!n.isMounted)if(o)S=x||u;else return;b[kr]&&b[kr](!0);const E=U[j];E&&ls(t,E)&&E.el[kr]&&E.el[kr](),q(S,[b])},enter(b){let S=c,E=h,A=f;if(!n.isMounted)if(o)S=C||c,E=P||h,A=V||f;else return;let w=!1;const M=b[xa]=ce=>{w||(w=!0,ce?q(A,[b]):q(E,[b]),v.delayedLeave&&v.delayedLeave(),b[xa]=void 0)};S?k(S,[b,M]):M()},leave(b,S){const E=String(t.key);if(b[xa]&&b[xa](!0),n.isUnmounting)return S();q(g,[b]);let A=!1;const w=b[kr]=M=>{A||(A=!0,S(),M?q(T,[b]):q(_,[b]),b[kr]=void 0,U[E]===t&&delete U[E])};U[E]=t,m?k(m,[b,w]):w()},clone(b){const S=Vc(b,e,n,r,s);return s&&s(S),S}};return v}function Yu(t){if($l(t))return t=cr(t),t.children=null,t}function rp(t){if(!$l(t))return G0(t.type)&&t.children?Y0(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Pe(n.default))return n.default()}}function _i(t,e){t.shapeFlag&6&&t.component?(t.transition=e,_i(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Z0(t,e=!1,n){let r=[],s=0;for(let o=0;o<t.length;o++){let i=t[o];const a=n==null?i.key:String(n)+String(i.key!=null?i.key:o);i.type===ge?(i.patchFlag&128&&s++,r=r.concat(Z0(i.children,e,a))):(e||i.type!==Bt)&&r.push(a!=null?cr(i,{key:a}):i)}if(s>1)for(let o=0;o<r.length;o++)r[o].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function mo(t,e){return Pe(t)?xt({name:t.name},e,{setup:t}):t}function Y1(){const t=Iy();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function ey(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function tl(t,e,n,r,s=!1){if(be(t)){t.forEach((_,T)=>tl(_,e&&(be(e)?e[T]:e),n,r,s));return}if(Js(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&tl(t,e,n,r.component.subTree);return}const o=r.shapeFlag&4?jl(r.component):r.el,i=s?null:o,{i:a,r:u}=t,c=e&&e.r,h=a.refs===Ge?a.refs={}:a.refs,f=a.setupState,g=je(f),m=f===Ge?()=>!1:_=>He(g,_);if(c!=null&&c!==u&&(lt(c)?(h[c]=null,m(c)&&(f[c]=null)):Xe(c)&&(c.value=null)),Pe(u))ji(u,a,12,[i,h]);else{const _=lt(u),T=Xe(u);if(_||T){const x=()=>{if(t.f){const C=_?m(u)?f[u]:h[u]:u.value;s?be(C)&&Rd(C,o):be(C)?C.includes(o)||C.push(o):_?(h[u]=[o],m(u)&&(f[u]=h[u])):(u.value=[o],t.k&&(h[t.k]=u.value))}else _?(h[u]=i,m(u)&&(f[u]=i)):T&&(u.value=i,t.k&&(h[t.k]=i))};i?(x.id=-1,nn(x,n)):x()}}}Dl().requestIdleCallback;Dl().cancelIdleCallback;const Js=t=>!!t.type.__asyncLoader,$l=t=>t.type.__isKeepAlive;function X1(t,e){ty(t,"a",e)}function Z1(t,e){ty(t,"da",e)}function ty(t,e,n=bt){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Ll(e,r,n),n){let s=n.parent;for(;s&&s.parent;)$l(s.parent.vnode)&&ex(r,e,n,s),s=s.parent}}function ex(t,e,n,r){const s=Ll(e,t,r,!0);yo(()=>{Rd(r[e],s)},n)}function Ll(t,e,n=bt,r=!1){if(n){const s=n[t]||(n[t]=[]),o=e.__weh||(e.__weh=(...i)=>{lr();const a=qi(n),u=In(e,n,t,i);return a(),ur(),u});return r?s.unshift(o):s.push(o),o}}const gr=t=>(e,n=bt)=>{(!xi||t==="sp")&&Ll(t,(...r)=>e(...r),n)},tx=gr("bm"),ft=gr("m"),nx=gr("bu"),rx=gr("u"),ny=gr("bum"),yo=gr("um"),sx=gr("sp"),ox=gr("rtg"),ix=gr("rtc");function ax(t,e=bt){Ll("ec",t,e)}const ry="components";function Bi(t,e){return oy(ry,t,!0,e)||t}const sy=Symbol.for("v-ndc");function lx(t){return lt(t)?oy(ry,t,!1)||t:t||sy}function oy(t,e,n=!0,r=!1){const s=mt||bt;if(s){const o=s.type;{const a=Qx(o,!1);if(a&&(a===e||a===mn(e)||a===Nl(mn(e))))return o}const i=sp(s[t]||o[t],e)||sp(s.appContext[t],e);return!i&&r?o:i}}function sp(t,e){return t&&(t[e]||t[mn(e)]||t[Nl(mn(e))])}function Ne(t,e,n,r){let s;const o=n,i=be(t);if(i||lt(t)){const a=i&&Dr(t);let u=!1,c=!1;a&&(u=!fn(t),c=Fr(t),t=Vl(t)),s=new Array(t.length);for(let h=0,f=t.length;h<f;h++)s[h]=e(u?c?Ya(Ct(t[h])):Ct(t[h]):t[h],h,void 0,o)}else if(typeof t=="number"){s=new Array(t);for(let a=0;a<t;a++)s[a]=e(a+1,a,void 0,o)}else if(Je(t))if(t[Symbol.iterator])s=Array.from(t,(a,u)=>e(a,u,void 0,o));else{const a=Object.keys(t);s=new Array(a.length);for(let u=0,c=a.length;u<c;u++){const h=a[u];s[u]=e(t[h],h,u,o)}}else s=[];return s}function Bd(t,e,n={},r,s){if(mt.ce||mt.parent&&Js(mt.parent)&&mt.parent.ce)return R(),Qe(ge,null,[ue("slot",n,r)],64);let o=t[e];o&&o._c&&(o._d=!1),R();const i=o&&iy(o(n)),a=n.key||i&&i.key,u=Qe(ge,{key:(a&&!Tn(a)?a:`_${e}`)+""},i||[],i&&t._===1?64:-2);return!s&&u.scopeId&&(u.slotScopeIds=[u.scopeId+"-s"]),o&&o._c&&(o._d=!0),u}function iy(t){return t.some(e=>wi(e)?!(e.type===Bt||e.type===ge&&!iy(e.children)):!0)?t:null}const Mc=t=>t?ky(t)?jl(t):Mc(t.parent):null,si=xt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Mc(t.parent),$root:t=>Mc(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>ly(t),$forceUpdate:t=>t.f||(t.f=()=>{jd(t.update)}),$nextTick:t=>t.n||(t.n=xn.bind(t.proxy)),$watch:t=>Rx.bind(t)}),Xu=(t,e)=>t!==Ge&&!t.__isScriptSetup&&He(t,e),ux={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:o,accessCache:i,type:a,appContext:u}=t;let c;if(e[0]!=="$"){const m=i[e];if(m!==void 0)switch(m){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return o[e]}else{if(Xu(r,e))return i[e]=1,r[e];if(s!==Ge&&He(s,e))return i[e]=2,s[e];if((c=t.propsOptions[0])&&He(c,e))return i[e]=3,o[e];if(n!==Ge&&He(n,e))return i[e]=4,n[e];$c&&(i[e]=0)}}const h=si[e];let f,g;if(h)return e==="$attrs"&&Ut(t.attrs,"get",""),h(t);if((f=a.__cssModules)&&(f=f[e]))return f;if(n!==Ge&&He(n,e))return i[e]=4,n[e];if(g=u.config.globalProperties,He(g,e))return g[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:o}=t;return Xu(s,e)?(s[e]=n,!0):r!==Ge&&He(r,e)?(r[e]=n,!0):He(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(o[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:o}},i){let a;return!!n[i]||t!==Ge&&He(t,i)||Xu(e,i)||(a=o[0])&&He(a,i)||He(r,i)||He(si,i)||He(s.config.globalProperties,i)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:He(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function op(t){return be(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let $c=!0;function cx(t){const e=ly(t),n=t.proxy,r=t.ctx;$c=!1,e.beforeCreate&&ip(e.beforeCreate,t,"bc");const{data:s,computed:o,methods:i,watch:a,provide:u,inject:c,created:h,beforeMount:f,mounted:g,beforeUpdate:m,updated:_,activated:T,deactivated:x,beforeDestroy:C,beforeUnmount:P,destroyed:V,unmounted:j,render:U,renderTracked:q,renderTriggered:k,errorCaptured:v,serverPrefetch:b,expose:S,inheritAttrs:E,components:A,directives:w,filters:M}=e;if(c&&dx(c,r,null),i)for(const se in i){const Ce=i[se];Pe(Ce)&&(r[se]=Ce.bind(n))}if(s){const se=s.call(n,n);Je(se)&&(t.data=go(se))}if($c=!0,o)for(const se in o){const Ce=o[se],rt=Pe(Ce)?Ce.bind(n,n):Pe(Ce.get)?Ce.get.bind(n,n):$n,Et=!Pe(Ce)&&Pe(Ce.set)?Ce.set.bind(n):$n,un=ye({get:rt,set:Et});Object.defineProperty(r,se,{enumerable:!0,configurable:!0,get:()=>un.value,set:st=>un.value=st})}if(a)for(const se in a)ay(a[se],r,n,se);if(u){const se=Pe(u)?u.call(n):u;Reflect.ownKeys(se).forEach(Ce=>{sr(Ce,se[Ce])})}h&&ip(h,t,"c");function Se(se,Ce){be(Ce)?Ce.forEach(rt=>se(rt.bind(n))):Ce&&se(Ce.bind(n))}if(Se(tx,f),Se(ft,g),Se(nx,m),Se(rx,_),Se(X1,T),Se(Z1,x),Se(ax,v),Se(ix,q),Se(ox,k),Se(ny,P),Se(yo,j),Se(sx,b),be(S))if(S.length){const se=t.exposed||(t.exposed={});S.forEach(Ce=>{Object.defineProperty(se,Ce,{get:()=>n[Ce],set:rt=>n[Ce]=rt})})}else t.exposed||(t.exposed={});U&&t.render===$n&&(t.render=U),E!=null&&(t.inheritAttrs=E),A&&(t.components=A),w&&(t.directives=w),b&&ey(t)}function dx(t,e,n=$n){be(t)&&(t=Lc(t));for(const r in t){const s=t[r];let o;Je(s)?"default"in s?o=wt(s.from||r,s.default,!0):o=wt(s.from||r):o=wt(s),Xe(o)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:i=>o.value=i}):e[r]=o}}function ip(t,e,n){In(be(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function ay(t,e,n,r){let s=r.includes(".")?by(n,r):()=>n[r];if(lt(t)){const o=e[t];Pe(o)&&qt(s,o)}else if(Pe(t))qt(s,t.bind(n));else if(Je(t))if(be(t))t.forEach(o=>ay(o,e,n,r));else{const o=Pe(t.handler)?t.handler.bind(n):e[t.handler];Pe(o)&&qt(s,o,t)}}function ly(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:o,config:{optionMergeStrategies:i}}=t.appContext,a=o.get(e);let u;return a?u=a:!s.length&&!n&&!r?u=e:(u={},s.length&&s.forEach(c=>nl(u,c,i,!0)),nl(u,e,i)),Je(e)&&o.set(e,u),u}function nl(t,e,n,r=!1){const{mixins:s,extends:o}=e;o&&nl(t,o,n,!0),s&&s.forEach(i=>nl(t,i,n,!0));for(const i in e)if(!(r&&i==="expose")){const a=hx[i]||n&&n[i];t[i]=a?a(t[i],e[i]):e[i]}return t}const hx={data:ap,props:lp,emits:lp,methods:Go,computed:Go,beforeCreate:Gt,created:Gt,beforeMount:Gt,mounted:Gt,beforeUpdate:Gt,updated:Gt,beforeDestroy:Gt,beforeUnmount:Gt,destroyed:Gt,unmounted:Gt,activated:Gt,deactivated:Gt,errorCaptured:Gt,serverPrefetch:Gt,components:Go,directives:Go,watch:px,provide:ap,inject:fx};function ap(t,e){return e?t?function(){return xt(Pe(t)?t.call(this,this):t,Pe(e)?e.call(this,this):e)}:e:t}function fx(t,e){return Go(Lc(t),Lc(e))}function Lc(t){if(be(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Gt(t,e){return t?[...new Set([].concat(t,e))]:e}function Go(t,e){return t?xt(Object.create(null),t,e):e}function lp(t,e){return t?be(t)&&be(e)?[...new Set([...t,...e])]:xt(Object.create(null),op(t),op(e??{})):e}function px(t,e){if(!t)return e;if(!e)return t;const n=xt(Object.create(null),t);for(const r in e)n[r]=Gt(t[r],e[r]);return n}function uy(){return{app:null,config:{isNativeTag:t1,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let gx=0;function mx(t,e){return function(r,s=null){Pe(r)||(r=xt({},r)),s!=null&&!Je(s)&&(s=null);const o=uy(),i=new WeakSet,a=[];let u=!1;const c=o.app={_uid:gx++,_component:r,_props:s,_container:null,_context:o,_instance:null,version:Yx,get config(){return o.config},set config(h){},use(h,...f){return i.has(h)||(h&&Pe(h.install)?(i.add(h),h.install(c,...f)):Pe(h)&&(i.add(h),h(c,...f))),c},mixin(h){return o.mixins.includes(h)||o.mixins.push(h),c},component(h,f){return f?(o.components[h]=f,c):o.components[h]},directive(h,f){return f?(o.directives[h]=f,c):o.directives[h]},mount(h,f,g){if(!u){const m=c._ceVNode||ue(r,s);return m.appContext=o,g===!0?g="svg":g===!1&&(g=void 0),t(m,h,g),u=!0,c._container=h,h.__vue_app__=c,jl(m.component)}},onUnmount(h){a.push(h)},unmount(){u&&(In(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(h,f){return o.provides[h]=f,c},runWithContext(h){const f=ps;ps=c;try{return h()}finally{ps=f}}};return c}}let ps=null;function sr(t,e){if(bt){let n=bt.provides;const r=bt.parent&&bt.parent.provides;r===n&&(n=bt.provides=Object.create(r)),n[t]=e}}function wt(t,e,n=!1){const r=bt||mt;if(r||ps){let s=ps?ps._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&Pe(e)?e.call(r&&r.proxy):e}}function yx(){return!!(bt||mt||ps)}const cy={},dy=()=>Object.create(cy),hy=t=>Object.getPrototypeOf(t)===cy;function vx(t,e,n,r=!1){const s={},o=dy();t.propsDefaults=Object.create(null),fy(t,e,s,o);for(const i in t.propsOptions[0])i in s||(s[i]=void 0);n?t.props=r?s:F0(s):t.type.props?t.props=s:t.props=o,t.attrs=o}function _x(t,e,n,r){const{props:s,attrs:o,vnode:{patchFlag:i}}=t,a=je(s),[u]=t.propsOptions;let c=!1;if((r||i>0)&&!(i&16)){if(i&8){const h=t.vnode.dynamicProps;for(let f=0;f<h.length;f++){let g=h[f];if(Fl(t.emitsOptions,g))continue;const m=e[g];if(u)if(He(o,g))m!==o[g]&&(o[g]=m,c=!0);else{const _=mn(g);s[_]=Fc(u,a,_,m,t,!1)}else m!==o[g]&&(o[g]=m,c=!0)}}}else{fy(t,e,s,o)&&(c=!0);let h;for(const f in a)(!e||!He(e,f)&&((h=Wr(f))===f||!He(e,h)))&&(u?n&&(n[f]!==void 0||n[h]!==void 0)&&(s[f]=Fc(u,a,f,void 0,t,!0)):delete s[f]);if(o!==a)for(const f in o)(!e||!He(e,f))&&(delete o[f],c=!0)}c&&Yn(t.attrs,"set","")}function fy(t,e,n,r){const[s,o]=t.propsOptions;let i=!1,a;if(e)for(let u in e){if(ti(u))continue;const c=e[u];let h;s&&He(s,h=mn(u))?!o||!o.includes(h)?n[h]=c:(a||(a={}))[h]=c:Fl(t.emitsOptions,u)||(!(u in r)||c!==r[u])&&(r[u]=c,i=!0)}if(o){const u=je(n),c=a||Ge;for(let h=0;h<o.length;h++){const f=o[h];n[f]=Fc(s,u,f,c[f],t,!He(c,f))}}return i}function Fc(t,e,n,r,s,o){const i=t[n];if(i!=null){const a=He(i,"default");if(a&&r===void 0){const u=i.default;if(i.type!==Function&&!i.skipFactory&&Pe(u)){const{propsDefaults:c}=s;if(n in c)r=c[n];else{const h=qi(s);r=c[n]=u.call(null,e),h()}}else r=u;s.ce&&s.ce._setProp(n,r)}i[0]&&(o&&!a?r=!1:i[1]&&(r===""||r===Wr(n))&&(r=!0))}return r}const bx=new WeakMap;function py(t,e,n=!1){const r=n?bx:e.propsCache,s=r.get(t);if(s)return s;const o=t.props,i={},a=[];let u=!1;if(!Pe(t)){const h=f=>{u=!0;const[g,m]=py(f,e,!0);xt(i,g),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!o&&!u)return Je(t)&&r.set(t,Ws),Ws;if(be(o))for(let h=0;h<o.length;h++){const f=mn(o[h]);up(f)&&(i[f]=Ge)}else if(o)for(const h in o){const f=mn(h);if(up(f)){const g=o[h],m=i[f]=be(g)||Pe(g)?{type:g}:xt({},g),_=m.type;let T=!1,x=!0;if(be(_))for(let C=0;C<_.length;++C){const P=_[C],V=Pe(P)&&P.name;if(V==="Boolean"){T=!0;break}else V==="String"&&(x=!1)}else T=Pe(_)&&_.name==="Boolean";m[0]=T,m[1]=x,(T||He(m,"default"))&&a.push(f)}}const c=[i,a];return Je(t)&&r.set(t,c),c}function up(t){return t[0]!=="$"&&!ti(t)}const zd=t=>t[0]==="_"||t==="$stable",qd=t=>be(t)?t.map(Vn):[Vn(t)],wx=(t,e,n)=>{if(e._n)return e;const r=me((...s)=>qd(e(...s)),n);return r._c=!1,r},gy=(t,e,n)=>{const r=t._ctx;for(const s in t){if(zd(s))continue;const o=t[s];if(Pe(o))e[s]=wx(s,o,r);else if(o!=null){const i=qd(o);e[s]=()=>i}}},my=(t,e)=>{const n=qd(e);t.slots.default=()=>n},yy=(t,e,n)=>{for(const r in e)(n||!zd(r))&&(t[r]=e[r])},xx=(t,e,n)=>{const r=t.slots=dy();if(t.vnode.shapeFlag&32){const s=e._;s?(yy(r,e,n),n&&v0(r,"_",s,!0)):gy(e,r)}else e&&my(t,e)},Ex=(t,e,n)=>{const{vnode:r,slots:s}=t;let o=!0,i=Ge;if(r.shapeFlag&32){const a=e._;a?n&&a===1?o=!1:yy(s,e,n):(o=!e.$stable,gy(e,s)),i=e}else e&&(my(t,e),i={default:1});if(o)for(const a in s)!zd(a)&&i[a]==null&&delete s[a]},nn=$x;function Tx(t){return Ix(t)}function Ix(t,e){const n=Dl();n.__VUE__=!0;const{insert:r,remove:s,patchProp:o,createElement:i,createText:a,createComment:u,setText:c,setElementText:h,parentNode:f,nextSibling:g,setScopeId:m=$n,insertStaticContent:_}=t,T=(N,D,$,W=null,Y=null,G=null,ie=void 0,te=null,ee=!!D.dynamicChildren)=>{if(N===D)return;N&&!ls(N,D)&&(W=K(N),st(N,Y,G,!0),N=null),D.patchFlag===-2&&(ee=!1,D.dynamicChildren=null);const{type:Z,ref:we,shapeFlag:oe}=D;switch(Z){case Ul:x(N,D,$,W);break;case Bt:C(N,D,$,W);break;case Oa:N==null&&P(D,$,W,ie);break;case ge:A(N,D,$,W,Y,G,ie,te,ee);break;default:oe&1?U(N,D,$,W,Y,G,ie,te,ee):oe&6?w(N,D,$,W,Y,G,ie,te,ee):(oe&64||oe&128)&&Z.process(N,D,$,W,Y,G,ie,te,ee,pe)}we!=null&&Y&&tl(we,N&&N.ref,G,D||N,!D)},x=(N,D,$,W)=>{if(N==null)r(D.el=a(D.children),$,W);else{const Y=D.el=N.el;D.children!==N.children&&c(Y,D.children)}},C=(N,D,$,W)=>{N==null?r(D.el=u(D.children||""),$,W):D.el=N.el},P=(N,D,$,W)=>{[N.el,N.anchor]=_(N.children,D,$,W,N.el,N.anchor)},V=({el:N,anchor:D},$,W)=>{let Y;for(;N&&N!==D;)Y=g(N),r(N,$,W),N=Y;r(D,$,W)},j=({el:N,anchor:D})=>{let $;for(;N&&N!==D;)$=g(N),s(N),N=$;s(D)},U=(N,D,$,W,Y,G,ie,te,ee)=>{D.type==="svg"?ie="svg":D.type==="math"&&(ie="mathml"),N==null?q(D,$,W,Y,G,ie,te,ee):b(N,D,Y,G,ie,te,ee)},q=(N,D,$,W,Y,G,ie,te)=>{let ee,Z;const{props:we,shapeFlag:oe,transition:ve,dirs:ke}=N;if(ee=N.el=i(N.type,G,we&&we.is,we),oe&8?h(ee,N.children):oe&16&&v(N.children,ee,null,W,Y,Zu(N,G),ie,te),ke&&ns(N,null,W,"created"),k(ee,N,N.scopeId,ie,W),we){for(const De in we)De!=="value"&&!ti(De)&&o(ee,De,null,we[De],G,W);"value"in we&&o(ee,"value",null,we.value,G),(Z=we.onVnodeBeforeMount)&&Pn(Z,W,N)}ke&&ns(N,null,W,"beforeMount");const Ee=kx(Y,ve);Ee&&ve.beforeEnter(ee),r(ee,D,$),((Z=we&&we.onVnodeMounted)||Ee||ke)&&nn(()=>{Z&&Pn(Z,W,N),Ee&&ve.enter(ee),ke&&ns(N,null,W,"mounted")},Y)},k=(N,D,$,W,Y)=>{if($&&m(N,$),W)for(let G=0;G<W.length;G++)m(N,W[G]);if(Y){let G=Y.subTree;if(D===G||xy(G.type)&&(G.ssContent===D||G.ssFallback===D)){const ie=Y.vnode;k(N,ie,ie.scopeId,ie.slotScopeIds,Y.parent)}}},v=(N,D,$,W,Y,G,ie,te,ee=0)=>{for(let Z=ee;Z<N.length;Z++){const we=N[Z]=te?Ar(N[Z]):Vn(N[Z]);T(null,we,D,$,W,Y,G,ie,te)}},b=(N,D,$,W,Y,G,ie)=>{const te=D.el=N.el;let{patchFlag:ee,dynamicChildren:Z,dirs:we}=D;ee|=N.patchFlag&16;const oe=N.props||Ge,ve=D.props||Ge;let ke;if($&&rs($,!1),(ke=ve.onVnodeBeforeUpdate)&&Pn(ke,$,D,N),we&&ns(D,N,$,"beforeUpdate"),$&&rs($,!0),(oe.innerHTML&&ve.innerHTML==null||oe.textContent&&ve.textContent==null)&&h(te,""),Z?S(N.dynamicChildren,Z,te,$,W,Zu(D,Y),G):ie||Ce(N,D,te,null,$,W,Zu(D,Y),G,!1),ee>0){if(ee&16)E(te,oe,ve,$,Y);else if(ee&2&&oe.class!==ve.class&&o(te,"class",null,ve.class,Y),ee&4&&o(te,"style",oe.style,ve.style,Y),ee&8){const Ee=D.dynamicProps;for(let De=0;De<Ee.length;De++){const Fe=Ee[De],Nt=oe[Fe],Tt=ve[Fe];(Tt!==Nt||Fe==="value")&&o(te,Fe,Nt,Tt,Y,$)}}ee&1&&N.children!==D.children&&h(te,D.children)}else!ie&&Z==null&&E(te,oe,ve,$,Y);((ke=ve.onVnodeUpdated)||we)&&nn(()=>{ke&&Pn(ke,$,D,N),we&&ns(D,N,$,"updated")},W)},S=(N,D,$,W,Y,G,ie)=>{for(let te=0;te<D.length;te++){const ee=N[te],Z=D[te],we=ee.el&&(ee.type===ge||!ls(ee,Z)||ee.shapeFlag&198)?f(ee.el):$;T(ee,Z,we,null,W,Y,G,ie,!0)}},E=(N,D,$,W,Y)=>{if(D!==$){if(D!==Ge)for(const G in D)!ti(G)&&!(G in $)&&o(N,G,D[G],null,Y,W);for(const G in $){if(ti(G))continue;const ie=$[G],te=D[G];ie!==te&&G!=="value"&&o(N,G,te,ie,Y,W)}"value"in $&&o(N,"value",D.value,$.value,Y)}},A=(N,D,$,W,Y,G,ie,te,ee)=>{const Z=D.el=N?N.el:a(""),we=D.anchor=N?N.anchor:a("");let{patchFlag:oe,dynamicChildren:ve,slotScopeIds:ke}=D;ke&&(te=te?te.concat(ke):ke),N==null?(r(Z,$,W),r(we,$,W),v(D.children||[],$,we,Y,G,ie,te,ee)):oe>0&&oe&64&&ve&&N.dynamicChildren?(S(N.dynamicChildren,ve,$,Y,G,ie,te),(D.key!=null||Y&&D===Y.subTree)&&vy(N,D,!0)):Ce(N,D,$,we,Y,G,ie,te,ee)},w=(N,D,$,W,Y,G,ie,te,ee)=>{D.slotScopeIds=te,N==null?D.shapeFlag&512?Y.ctx.activate(D,$,W,ie,ee):M(D,$,W,Y,G,ie,ee):ce(N,D,ee)},M=(N,D,$,W,Y,G,ie)=>{const te=N.component=qx(N,W,Y);if($l(N)&&(te.ctx.renderer=pe),Hx(te,!1,ie),te.asyncDep){if(Y&&Y.registerDep(te,Se,ie),!N.el){const ee=te.subTree=ue(Bt);C(null,ee,D,$)}}else Se(te,N,D,$,Y,G,ie)},ce=(N,D,$)=>{const W=D.component=N.component;if(Vx(N,D,$))if(W.asyncDep&&!W.asyncResolved){se(W,D,$);return}else W.next=D,W.update();else D.el=N.el,W.vnode=D},Se=(N,D,$,W,Y,G,ie)=>{const te=()=>{if(N.isMounted){let{next:oe,bu:ve,u:ke,parent:Ee,vnode:De}=N;{const Dt=_y(N);if(Dt){oe&&(oe.el=De.el,se(N,oe,ie)),Dt.asyncDep.then(()=>{N.isUnmounted||te()});return}}let Fe=oe,Nt;rs(N,!1),oe?(oe.el=De.el,se(N,oe,ie)):oe=De,ve&&Pa(ve),(Nt=oe.props&&oe.props.onVnodeBeforeUpdate)&&Pn(Nt,Ee,oe,De),rs(N,!0);const Tt=dp(N),cn=N.subTree;N.subTree=Tt,T(cn,Tt,f(cn.el),K(cn),N,Y,G),oe.el=Tt.el,Fe===null&&Mx(N,Tt.el),ke&&nn(ke,Y),(Nt=oe.props&&oe.props.onVnodeUpdated)&&nn(()=>Pn(Nt,Ee,oe,De),Y)}else{let oe;const{el:ve,props:ke}=D,{bm:Ee,m:De,parent:Fe,root:Nt,type:Tt}=N,cn=Js(D);rs(N,!1),Ee&&Pa(Ee),!cn&&(oe=ke&&ke.onVnodeBeforeMount)&&Pn(oe,Fe,D),rs(N,!0);{Nt.ce&&Nt.ce._injectChildStyle(Tt);const Dt=N.subTree=dp(N);T(null,Dt,$,W,N,Y,G),D.el=Dt.el}if(De&&nn(De,Y),!cn&&(oe=ke&&ke.onVnodeMounted)){const Dt=D;nn(()=>Pn(oe,Fe,Dt),Y)}(D.shapeFlag&256||Fe&&Js(Fe.vnode)&&Fe.vnode.shapeFlag&256)&&N.a&&nn(N.a,Y),N.isMounted=!0,D=$=W=null}};N.scope.on();const ee=N.effect=new I0(te);N.scope.off();const Z=N.update=ee.run.bind(ee),we=N.job=ee.runIfDirty.bind(ee);we.i=N,we.id=N.uid,ee.scheduler=()=>jd(we),rs(N,!0),Z()},se=(N,D,$)=>{D.component=N;const W=N.vnode.props;N.vnode=D,N.next=null,_x(N,D.props,W,$),Ex(N,D.children,$),lr(),np(N),ur()},Ce=(N,D,$,W,Y,G,ie,te,ee=!1)=>{const Z=N&&N.children,we=N?N.shapeFlag:0,oe=D.children,{patchFlag:ve,shapeFlag:ke}=D;if(ve>0){if(ve&128){Et(Z,oe,$,W,Y,G,ie,te,ee);return}else if(ve&256){rt(Z,oe,$,W,Y,G,ie,te,ee);return}}ke&8?(we&16&&Jt(Z,Y,G),oe!==Z&&h($,oe)):we&16?ke&16?Et(Z,oe,$,W,Y,G,ie,te,ee):Jt(Z,Y,G,!0):(we&8&&h($,""),ke&16&&v(oe,$,W,Y,G,ie,te,ee))},rt=(N,D,$,W,Y,G,ie,te,ee)=>{N=N||Ws,D=D||Ws;const Z=N.length,we=D.length,oe=Math.min(Z,we);let ve;for(ve=0;ve<oe;ve++){const ke=D[ve]=ee?Ar(D[ve]):Vn(D[ve]);T(N[ve],ke,$,null,Y,G,ie,te,ee)}Z>we?Jt(N,Y,G,!0,!1,oe):v(D,$,W,Y,G,ie,te,ee,oe)},Et=(N,D,$,W,Y,G,ie,te,ee)=>{let Z=0;const we=D.length;let oe=N.length-1,ve=we-1;for(;Z<=oe&&Z<=ve;){const ke=N[Z],Ee=D[Z]=ee?Ar(D[Z]):Vn(D[Z]);if(ls(ke,Ee))T(ke,Ee,$,null,Y,G,ie,te,ee);else break;Z++}for(;Z<=oe&&Z<=ve;){const ke=N[oe],Ee=D[ve]=ee?Ar(D[ve]):Vn(D[ve]);if(ls(ke,Ee))T(ke,Ee,$,null,Y,G,ie,te,ee);else break;oe--,ve--}if(Z>oe){if(Z<=ve){const ke=ve+1,Ee=ke<we?D[ke].el:W;for(;Z<=ve;)T(null,D[Z]=ee?Ar(D[Z]):Vn(D[Z]),$,Ee,Y,G,ie,te,ee),Z++}}else if(Z>ve)for(;Z<=oe;)st(N[Z],Y,G,!0),Z++;else{const ke=Z,Ee=Z,De=new Map;for(Z=Ee;Z<=ve;Z++){const It=D[Z]=ee?Ar(D[Z]):Vn(D[Z]);It.key!=null&&De.set(It.key,Z)}let Fe,Nt=0;const Tt=ve-Ee+1;let cn=!1,Dt=0;const yr=new Array(Tt);for(Z=0;Z<Tt;Z++)yr[Z]=0;for(Z=ke;Z<=oe;Z++){const It=N[Z];if(Nt>=Tt){st(It,Y,G,!0);continue}let dn;if(It.key!=null)dn=De.get(It.key);else for(Fe=Ee;Fe<=ve;Fe++)if(yr[Fe-Ee]===0&&ls(It,D[Fe])){dn=Fe;break}dn===void 0?st(It,Y,G,!0):(yr[dn-Ee]=Z+1,dn>=Dt?Dt=dn:cn=!0,T(It,D[dn],$,null,Y,G,ie,te,ee),Nt++)}const Ro=cn?Ax(yr):Ws;for(Fe=Ro.length-1,Z=Tt-1;Z>=0;Z--){const It=Ee+Z,dn=D[It],ra=It+1<we?D[It+1].el:W;yr[Z]===0?T(null,dn,$,ra,Y,G,ie,te,ee):cn&&(Fe<0||Z!==Ro[Fe]?un(dn,$,ra,2):Fe--)}}},un=(N,D,$,W,Y=null)=>{const{el:G,type:ie,transition:te,children:ee,shapeFlag:Z}=N;if(Z&6){un(N.component.subTree,D,$,W);return}if(Z&128){N.suspense.move(D,$,W);return}if(Z&64){ie.move(N,D,$,pe);return}if(ie===ge){r(G,D,$);for(let oe=0;oe<ee.length;oe++)un(ee[oe],D,$,W);r(N.anchor,D,$);return}if(ie===Oa){V(N,D,$);return}if(W!==2&&Z&1&&te)if(W===0)te.beforeEnter(G),r(G,D,$),nn(()=>te.enter(G),Y);else{const{leave:oe,delayLeave:ve,afterLeave:ke}=te,Ee=()=>{N.ctx.isUnmounted?s(G):r(G,D,$)},De=()=>{oe(G,()=>{Ee(),ke&&ke()})};ve?ve(G,Ee,De):De()}else r(G,D,$)},st=(N,D,$,W=!1,Y=!1)=>{const{type:G,props:ie,ref:te,children:ee,dynamicChildren:Z,shapeFlag:we,patchFlag:oe,dirs:ve,cacheIndex:ke}=N;if(oe===-2&&(Y=!1),te!=null&&(lr(),tl(te,null,$,N,!0),ur()),ke!=null&&(D.renderCache[ke]=void 0),we&256){D.ctx.deactivate(N);return}const Ee=we&1&&ve,De=!Js(N);let Fe;if(De&&(Fe=ie&&ie.onVnodeBeforeUnmount)&&Pn(Fe,D,N),we&6)Rn(N.component,$,W);else{if(we&128){N.suspense.unmount($,W);return}Ee&&ns(N,null,D,"beforeUnmount"),we&64?N.type.remove(N,D,$,pe,W):Z&&!Z.hasOnce&&(G!==ge||oe>0&&oe&64)?Jt(Z,D,$,!1,!0):(G===ge&&oe&384||!Y&&we&16)&&Jt(ee,D,$),W&&ot(N)}(De&&(Fe=ie&&ie.onVnodeUnmounted)||Ee)&&nn(()=>{Fe&&Pn(Fe,D,N),Ee&&ns(N,null,D,"unmounted")},$)},ot=N=>{const{type:D,el:$,anchor:W,transition:Y}=N;if(D===ge){mr($,W);return}if(D===Oa){j(N);return}const G=()=>{s($),Y&&!Y.persisted&&Y.afterLeave&&Y.afterLeave()};if(N.shapeFlag&1&&Y&&!Y.persisted){const{leave:ie,delayLeave:te}=Y,ee=()=>ie($,G);te?te(N.el,G,ee):ee()}else G()},mr=(N,D)=>{let $;for(;N!==D;)$=g(N),s(N),N=$;s(D)},Rn=(N,D,$)=>{const{bum:W,scope:Y,job:G,subTree:ie,um:te,m:ee,a:Z,parent:we,slots:{__:oe}}=N;cp(ee),cp(Z),W&&Pa(W),we&&be(oe)&&oe.forEach(ve=>{we.renderCache[ve]=void 0}),Y.stop(),G&&(G.flags|=8,st(ie,N,D,$)),te&&nn(te,D),nn(()=>{N.isUnmounted=!0},D),D&&D.pendingBranch&&!D.isUnmounted&&N.asyncDep&&!N.asyncResolved&&N.suspenseId===D.pendingId&&(D.deps--,D.deps===0&&D.resolve())},Jt=(N,D,$,W=!1,Y=!1,G=0)=>{for(let ie=G;ie<N.length;ie++)st(N[ie],D,$,W,Y)},K=N=>{if(N.shapeFlag&6)return K(N.component.subTree);if(N.shapeFlag&128)return N.suspense.next();const D=g(N.anchor||N.el),$=D&&D[W1];return $?g($):D};let de=!1;const ae=(N,D,$)=>{N==null?D._vnode&&st(D._vnode,null,null,!0):T(D._vnode||null,N,D,null,null,null,$),D._vnode=N,de||(de=!0,np(),H0(),de=!1)},pe={p:T,um:st,m:un,r:ot,mt:M,mc:v,pc:Ce,pbc:S,n:K,o:t};return{render:ae,hydrate:void 0,createApp:mx(ae)}}function Zu({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function rs({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function kx(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function vy(t,e,n=!1){const r=t.children,s=e.children;if(be(r)&&be(s))for(let o=0;o<r.length;o++){const i=r[o];let a=s[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[o]=Ar(s[o]),a.el=i.el),!n&&a.patchFlag!==-2&&vy(i,a)),a.type===Ul&&(a.el=i.el),a.type===Bt&&!a.el&&(a.el=i.el)}}function Ax(t){const e=t.slice(),n=[0];let r,s,o,i,a;const u=t.length;for(r=0;r<u;r++){const c=t[r];if(c!==0){if(s=n[n.length-1],t[s]<c){e[r]=s,n.push(r);continue}for(o=0,i=n.length-1;o<i;)a=o+i>>1,t[n[a]]<c?o=a+1:i=a;c<t[n[o]]&&(o>0&&(e[r]=n[o-1]),n[o]=r)}}for(o=n.length,i=n[o-1];o-- >0;)n[o]=i,i=e[i];return n}function _y(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:_y(e)}function cp(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Sx=Symbol.for("v-scx"),Cx=()=>wt(Sx);function zi(t,e){return Hd(t,null,e)}function qt(t,e,n){return Hd(t,e,n)}function Hd(t,e,n=Ge){const{immediate:r,deep:s,flush:o,once:i}=n,a=xt({},n),u=e&&r||!e&&o!=="post";let c;if(xi){if(o==="sync"){const m=Cx();c=m.__watcherHandles||(m.__watcherHandles=[])}else if(!u){const m=()=>{};return m.stop=$n,m.resume=$n,m.pause=$n,m}}const h=bt;a.call=(m,_,T)=>In(m,h,_,T);let f=!1;o==="post"?a.scheduler=m=>{nn(m,h&&h.suspense)}:o!=="sync"&&(f=!0,a.scheduler=(m,_)=>{_?m():jd(m)}),a.augmentJob=m=>{e&&(m.flags|=4),f&&(m.flags|=2,h&&(m.id=h.uid,m.i=h))};const g=z1(t,e,a);return xi&&(c?c.push(g):u&&g()),g}function Rx(t,e,n){const r=this.proxy,s=lt(t)?t.includes(".")?by(r,t):()=>r[t]:t.bind(r,r);let o;Pe(e)?o=e:(o=e.handler,n=e);const i=qi(this),a=Hd(s,o.bind(r),n);return i(),a}function by(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const Px=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${mn(e)}Modifiers`]||t[`${Wr(e)}Modifiers`];function Ox(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Ge;let s=n;const o=e.startsWith("update:"),i=o&&Px(r,e.slice(7));i&&(i.trim&&(s=n.map(h=>lt(h)?h.trim():h)),i.number&&(s=n.map(Qa)));let a,u=r[a=Ku(e)]||r[a=Ku(mn(e))];!u&&o&&(u=r[a=Ku(Wr(e))]),u&&In(u,t,6,s);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,In(c,t,6,s)}}function wy(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const o=t.emits;let i={},a=!1;if(!Pe(t)){const u=c=>{const h=wy(c,e,!0);h&&(a=!0,xt(i,h))};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}return!o&&!a?(Je(t)&&r.set(t,null),null):(be(o)?o.forEach(u=>i[u]=null):xt(i,o),Je(t)&&r.set(t,i),i)}function Fl(t,e){return!t||!Pl(e)?!1:(e=e.slice(2).replace(/Once$/,""),He(t,e[0].toLowerCase()+e.slice(1))||He(t,Wr(e))||He(t,e))}function dp(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[o],slots:i,attrs:a,emit:u,render:c,renderCache:h,props:f,data:g,setupState:m,ctx:_,inheritAttrs:T}=t,x=el(t);let C,P;try{if(n.shapeFlag&4){const j=s||r,U=j;C=Vn(c.call(U,j,h,f,m,g,_)),P=a}else{const j=e;C=Vn(j.length>1?j(f,{attrs:a,slots:i,emit:u}):j(f,null)),P=e.props?a:Nx(a)}}catch(j){oi.length=0,Ml(j,t,1),C=ue(Bt)}let V=C;if(P&&T!==!1){const j=Object.keys(P),{shapeFlag:U}=V;j.length&&U&7&&(o&&j.some(Cd)&&(P=Dx(P,o)),V=cr(V,P,!1,!0))}return n.dirs&&(V=cr(V,null,!1,!0),V.dirs=V.dirs?V.dirs.concat(n.dirs):n.dirs),n.transition&&_i(V,n.transition),C=V,el(x),C}const Nx=t=>{let e;for(const n in t)(n==="class"||n==="style"||Pl(n))&&((e||(e={}))[n]=t[n]);return e},Dx=(t,e)=>{const n={};for(const r in t)(!Cd(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function Vx(t,e,n){const{props:r,children:s,component:o}=t,{props:i,children:a,patchFlag:u}=e,c=o.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return r?hp(r,i,c):!!i;if(u&8){const h=e.dynamicProps;for(let f=0;f<h.length;f++){const g=h[f];if(i[g]!==r[g]&&!Fl(c,g))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===i?!1:r?i?hp(r,i,c):!0:!!i;return!1}function hp(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const o=r[s];if(e[o]!==t[o]&&!Fl(n,o))return!0}return!1}function Mx({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const xy=t=>t.__isSuspense;function $x(t,e){e&&e.pendingBranch?be(t)?e.effects.push(...t):e.effects.push(t):K1(t)}const ge=Symbol.for("v-fgt"),Ul=Symbol.for("v-txt"),Bt=Symbol.for("v-cmt"),Oa=Symbol.for("v-stc"),oi=[];let an=null;function R(t=!1){oi.push(an=t?null:[])}function Lx(){oi.pop(),an=oi[oi.length-1]||null}let bi=1;function fp(t,e=!1){bi+=t,t<0&&an&&e&&(an.hasOnce=!0)}function Ey(t){return t.dynamicChildren=bi>0?an||Ws:null,Lx(),bi>0&&an&&an.push(t),t}function O(t,e,n,r,s,o){return Ey(d(t,e,n,r,s,o,!0))}function Qe(t,e,n,r,s){return Ey(ue(t,e,n,r,s,!0))}function wi(t){return t?t.__v_isVNode===!0:!1}function ls(t,e){return t.type===e.type&&t.key===e.key}const Ty=({key:t})=>t??null,Na=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?lt(t)||Xe(t)||Pe(t)?{i:mt,r:t,k:e,f:!!n}:t:null);function d(t,e=null,n=null,r=0,s=null,o=t===ge?0:1,i=!1,a=!1){const u={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Ty(e),ref:e&&Na(e),scopeId:W0,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:mt};return a?(Kd(u,n),o&128&&t.normalize(u)):n&&(u.shapeFlag|=lt(n)?8:16),bi>0&&!i&&an&&(u.patchFlag>0||o&6)&&u.patchFlag!==32&&an.push(u),u}const ue=Fx;function Fx(t,e=null,n=null,r=0,s=null,o=!1){if((!t||t===sy)&&(t=Bt),wi(t)){const a=cr(t,e,!0);return n&&Kd(a,n),bi>0&&!o&&an&&(a.shapeFlag&6?an[an.indexOf(t)]=a:an.push(a)),a.patchFlag=-2,a}if(Jx(t)&&(t=t.__vccOpts),e){e=Ux(e);let{class:a,style:u}=e;a&&!lt(a)&&(e.class=re(a)),Je(u)&&(Fd(u)&&!be(u)&&(u=xt({},u)),e.style=po(u))}const i=lt(t)?1:xy(t)?128:G0(t)?64:Je(t)?4:Pe(t)?2:0;return d(t,e,n,r,s,i,o,!0)}function Ux(t){return t?Fd(t)||hy(t)?xt({},t):t:null}function cr(t,e,n=!1,r=!1){const{props:s,ref:o,patchFlag:i,children:a,transition:u}=t,c=e?jx(s||{},e):s,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&Ty(c),ref:e&&e.ref?n&&o?be(o)?o.concat(Na(e)):[o,Na(e)]:Na(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==ge?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:u,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&cr(t.ssContent),ssFallback:t.ssFallback&&cr(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return u&&r&&_i(h,u.clone(h)),h}function Q(t=" ",e=0){return ue(Ul,null,t,e)}function rl(t,e){const n=ue(Oa,null,t);return n.staticCount=e,n}function le(t="",e=!1){return e?(R(),Qe(Bt,null,t)):ue(Bt,null,t)}function Vn(t){return t==null||typeof t=="boolean"?ue(Bt):be(t)?ue(ge,null,t.slice()):wi(t)?Ar(t):ue(Ul,null,String(t))}function Ar(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:cr(t)}function Kd(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(be(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),Kd(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!hy(e)?e._ctx=mt:s===3&&mt&&(mt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Pe(e)?(e={default:e,_ctx:mt},n=32):(e=String(e),r&64?(n=16,e=[Q(e)]):n=8);t.children=e,t.shapeFlag|=n}function jx(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=re([e.class,r.class]));else if(s==="style")e.style=po([e.style,r.style]);else if(Pl(s)){const o=e[s],i=r[s];i&&o!==i&&!(be(o)&&o.includes(i))&&(e[s]=o?[].concat(o,i):i)}else s!==""&&(e[s]=r[s])}return e}function Pn(t,e,n,r=null){In(t,e,7,[n,r])}const Bx=uy();let zx=0;function qx(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||Bx,o={uid:zx++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new x0(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:py(r,s),emitsOptions:wy(r,s),emit:null,emitted:null,propsDefaults:Ge,inheritAttrs:r.inheritAttrs,ctx:Ge,data:Ge,props:Ge,attrs:Ge,slots:Ge,refs:Ge,setupState:Ge,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=Ox.bind(null,o),t.ce&&t.ce(o),o}let bt=null;const Iy=()=>bt||mt;let sl,Uc;{const t=Dl(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),o=>{s.length>1?s.forEach(i=>i(o)):s[0](o)}};sl=e("__VUE_INSTANCE_SETTERS__",n=>bt=n),Uc=e("__VUE_SSR_SETTERS__",n=>xi=n)}const qi=t=>{const e=bt;return sl(t),t.scope.on(),()=>{t.scope.off(),sl(e)}},pp=()=>{bt&&bt.scope.off(),sl(null)};function ky(t){return t.vnode.shapeFlag&4}let xi=!1;function Hx(t,e=!1,n=!1){e&&Uc(e);const{props:r,children:s}=t.vnode,o=ky(t);vx(t,r,o,e),xx(t,s,n||e);const i=o?Kx(t,e):void 0;return e&&Uc(!1),i}function Kx(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,ux);const{setup:r}=n;if(r){lr();const s=t.setupContext=r.length>1?Gx(t):null,o=qi(t),i=ji(r,t,0,[t.props,s]),a=g0(i);if(ur(),o(),(a||t.sp)&&!Js(t)&&ey(t),a){if(i.then(pp,pp),e)return i.then(u=>{gp(t,u)}).catch(u=>{Ml(u,t,0)});t.asyncDep=i}else gp(t,i)}else Ay(t)}function gp(t,e,n){Pe(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Je(e)&&(t.setupState=B0(e)),Ay(t)}function Ay(t,e,n){const r=t.type;t.render||(t.render=r.render||$n);{const s=qi(t);lr();try{cx(t)}finally{ur(),s()}}}const Wx={get(t,e){return Ut(t,"get",""),t[e]}};function Gx(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,Wx),slots:t.slots,emit:t.emit,expose:e}}function jl(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(B0(Ud(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in si)return si[n](t)},has(e,n){return n in e||n in si}})):t.proxy}function Qx(t,e=!0){return Pe(t)?t.displayName||t.name:t.name||e&&t.__name}function Jx(t){return Pe(t)&&"__vccOpts"in t}const ye=(t,e)=>j1(t,e,xi);function Bl(t,e,n){const r=arguments.length;return r===2?Je(e)&&!be(e)?wi(e)?ue(t,null,[e]):ue(t,e):ue(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&wi(n)&&(n=[n]),ue(t,e,n))}const Yx="3.5.16";/**
* @vue/runtime-dom v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let jc;const mp=typeof window<"u"&&window.trustedTypes;if(mp)try{jc=mp.createPolicy("vue",{createHTML:t=>t})}catch{}const Sy=jc?t=>jc.createHTML(t):t=>t,Xx="http://www.w3.org/2000/svg",Zx="http://www.w3.org/1998/Math/MathML",Qn=typeof document<"u"?document:null,yp=Qn&&Qn.createElement("template"),eE={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?Qn.createElementNS(Xx,t):e==="mathml"?Qn.createElementNS(Zx,t):n?Qn.createElement(t,{is:n}):Qn.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>Qn.createTextNode(t),createComment:t=>Qn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Qn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,o){const i=n?n.previousSibling:e.lastChild;if(s&&(s===o||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===o||!(s=s.nextSibling)););else{yp.innerHTML=Sy(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=yp.content;if(r==="svg"||r==="mathml"){const u=a.firstChild;for(;u.firstChild;)a.appendChild(u.firstChild);a.removeChild(u)}e.insertBefore(a,n)}return[i?i.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},wr="transition",qo="animation",Ei=Symbol("_vtc"),Cy={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},tE=xt({},Q0,Cy),nE=t=>(t.displayName="Transition",t.props=tE,t),vo=nE((t,{slots:e})=>Bl(J1,rE(t),e)),ss=(t,e=[])=>{be(t)?t.forEach(n=>n(...e)):t&&t(...e)},vp=t=>t?be(t)?t.some(e=>e.length>1):t.length>1:!1;function rE(t){const e={};for(const A in t)A in Cy||(e[A]=t[A]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:o=`${n}-enter-from`,enterActiveClass:i=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:u=o,appearActiveClass:c=i,appearToClass:h=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:g=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=t,_=sE(s),T=_&&_[0],x=_&&_[1],{onBeforeEnter:C,onEnter:P,onEnterCancelled:V,onLeave:j,onLeaveCancelled:U,onBeforeAppear:q=C,onAppear:k=P,onAppearCancelled:v=V}=e,b=(A,w,M,ce)=>{A._enterCancelled=ce,os(A,w?h:a),os(A,w?c:i),M&&M()},S=(A,w)=>{A._isLeaving=!1,os(A,f),os(A,m),os(A,g),w&&w()},E=A=>(w,M)=>{const ce=A?k:P,Se=()=>b(w,A,M);ss(ce,[w,Se]),_p(()=>{os(w,A?u:o),Wn(w,A?h:a),vp(ce)||bp(w,r,T,Se)})};return xt(e,{onBeforeEnter(A){ss(C,[A]),Wn(A,o),Wn(A,i)},onBeforeAppear(A){ss(q,[A]),Wn(A,u),Wn(A,c)},onEnter:E(!1),onAppear:E(!0),onLeave(A,w){A._isLeaving=!0;const M=()=>S(A,w);Wn(A,f),A._enterCancelled?(Wn(A,g),Ep()):(Ep(),Wn(A,g)),_p(()=>{A._isLeaving&&(os(A,f),Wn(A,m),vp(j)||bp(A,r,x,M))}),ss(j,[A,M])},onEnterCancelled(A){b(A,!1,void 0,!0),ss(V,[A])},onAppearCancelled(A){b(A,!0,void 0,!0),ss(v,[A])},onLeaveCancelled(A){S(A),ss(U,[A])}})}function sE(t){if(t==null)return null;if(Je(t))return[ec(t.enter),ec(t.leave)];{const e=ec(t);return[e,e]}}function ec(t){return i1(t)}function Wn(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Ei]||(t[Ei]=new Set)).add(e)}function os(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[Ei];n&&(n.delete(e),n.size||(t[Ei]=void 0))}function _p(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let oE=0;function bp(t,e,n,r){const s=t._endId=++oE,o=()=>{s===t._endId&&r()};if(n!=null)return setTimeout(o,n);const{type:i,timeout:a,propCount:u}=iE(t,e);if(!i)return r();const c=i+"end";let h=0;const f=()=>{t.removeEventListener(c,g),o()},g=m=>{m.target===t&&++h>=u&&f()};setTimeout(()=>{h<u&&f()},a+1),t.addEventListener(c,g)}function iE(t,e){const n=window.getComputedStyle(t),r=_=>(n[_]||"").split(", "),s=r(`${wr}Delay`),o=r(`${wr}Duration`),i=wp(s,o),a=r(`${qo}Delay`),u=r(`${qo}Duration`),c=wp(a,u);let h=null,f=0,g=0;e===wr?i>0&&(h=wr,f=i,g=o.length):e===qo?c>0&&(h=qo,f=c,g=u.length):(f=Math.max(i,c),h=f>0?i>c?wr:qo:null,g=h?h===wr?o.length:u.length:0);const m=h===wr&&/\b(transform|all)(,|$)/.test(r(`${wr}Property`).toString());return{type:h,timeout:f,propCount:g,hasTransform:m}}function wp(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>xp(n)+xp(t[r])))}function xp(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Ep(){return document.body.offsetHeight}function aE(t,e,n){const r=t[Ei];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const ol=Symbol("_vod"),Ry=Symbol("_vsh"),lE={beforeMount(t,{value:e},{transition:n}){t[ol]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Ho(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Ho(t,!0),r.enter(t)):r.leave(t,()=>{Ho(t,!1)}):Ho(t,e))},beforeUnmount(t,{value:e}){Ho(t,e)}};function Ho(t,e){t.style.display=e?t[ol]:"none",t[Ry]=!e}const uE=Symbol(""),cE=/(^|;)\s*display\s*:/;function dE(t,e,n){const r=t.style,s=lt(n);let o=!1;if(n&&!s){if(e)if(lt(e))for(const i of e.split(";")){const a=i.slice(0,i.indexOf(":")).trim();n[a]==null&&Da(r,a,"")}else for(const i in e)n[i]==null&&Da(r,i,"");for(const i in n)i==="display"&&(o=!0),Da(r,i,n[i])}else if(s){if(e!==n){const i=r[uE];i&&(n+=";"+i),r.cssText=n,o=cE.test(n)}}else e&&t.removeAttribute("style");ol in t&&(t[ol]=o?r.display:"",t[Ry]&&(r.display="none"))}const Tp=/\s*!important$/;function Da(t,e,n){if(be(n))n.forEach(r=>Da(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=hE(t,e);Tp.test(n)?t.setProperty(Wr(r),n.replace(Tp,""),"important"):t[r]=n}}const Ip=["Webkit","Moz","ms"],tc={};function hE(t,e){const n=tc[e];if(n)return n;let r=mn(e);if(r!=="filter"&&r in t)return tc[e]=r;r=Nl(r);for(let s=0;s<Ip.length;s++){const o=Ip[s]+r;if(o in t)return tc[e]=o}return e}const kp="http://www.w3.org/1999/xlink";function Ap(t,e,n,r,s,o=h1(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(kp,e.slice(6,e.length)):t.setAttributeNS(kp,e,n):n==null||o&&!_0(n)?t.removeAttribute(e):t.setAttribute(e,o?"":Tn(n)?String(n):n)}function Sp(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Sy(n):n);return}const o=t.tagName;if(e==="value"&&o!=="PROGRESS"&&!o.includes("-")){const a=o==="OPTION"?t.getAttribute("value")||"":t.value,u=n==null?t.type==="checkbox"?"on":"":String(n);(a!==u||!("_value"in t))&&(t.value=u),n==null&&t.removeAttribute(e),t._value=n;return}let i=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=_0(n):n==null&&a==="string"?(n="",i=!0):a==="number"&&(n=0,i=!0)}try{t[e]=n}catch{}i&&t.removeAttribute(s||e)}function Zn(t,e,n,r){t.addEventListener(e,n,r)}function fE(t,e,n,r){t.removeEventListener(e,n,r)}const Cp=Symbol("_vei");function pE(t,e,n,r,s=null){const o=t[Cp]||(t[Cp]={}),i=o[e];if(r&&i)i.value=r;else{const[a,u]=gE(e);if(r){const c=o[e]=vE(r,s);Zn(t,a,c,u)}else i&&(fE(t,a,i,u),o[e]=void 0)}}const Rp=/(?:Once|Passive|Capture)$/;function gE(t){let e;if(Rp.test(t)){e={};let r;for(;r=t.match(Rp);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Wr(t.slice(2)),e]}let nc=0;const mE=Promise.resolve(),yE=()=>nc||(mE.then(()=>nc=0),nc=Date.now());function vE(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;In(_E(r,n.value),e,5,[r])};return n.value=t,n.attached=yE(),n}function _E(t,e){if(be(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const Pp=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,bE=(t,e,n,r,s,o)=>{const i=s==="svg";e==="class"?aE(t,r,i):e==="style"?dE(t,n,r):Pl(e)?Cd(e)||pE(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):wE(t,e,r,i))?(Sp(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Ap(t,e,r,i,o,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!lt(r))?Sp(t,mn(e),r,o,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Ap(t,e,r,i))};function wE(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&Pp(e)&&Pe(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Pp(e)&&lt(n)?!1:e in t}const Ur=t=>{const e=t.props["onUpdate:modelValue"]||!1;return be(e)?n=>Pa(e,n):e};function xE(t){t.target.composing=!0}function Op(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const pn=Symbol("_assign"),tt={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[pn]=Ur(s);const o=r||s.props&&s.props.type==="number";Zn(t,e?"change":"input",i=>{if(i.target.composing)return;let a=t.value;n&&(a=a.trim()),o&&(a=Qa(a)),t[pn](a)}),n&&Zn(t,"change",()=>{t.value=t.value.trim()}),e||(Zn(t,"compositionstart",xE),Zn(t,"compositionend",Op),Zn(t,"change",Op))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:o}},i){if(t[pn]=Ur(i),t.composing)return;const a=(o||t.type==="number")&&!/^0\d/.test(t.value)?Qa(t.value):t.value,u=e??"";a!==u&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===u)||(t.value=u))}},il={deep:!0,created(t,e,n){t[pn]=Ur(n),Zn(t,"change",()=>{const r=t._modelValue,s=no(t),o=t.checked,i=t[pn];if(be(r)){const a=Od(r,s),u=a!==-1;if(o&&!u)i(r.concat(s));else if(!o&&u){const c=[...r];c.splice(a,1),i(c)}}else if(fo(r)){const a=new Set(r);o?a.add(s):a.delete(s),i(a)}else i(Py(t,o))})},mounted:Np,beforeUpdate(t,e,n){t[pn]=Ur(n),Np(t,e,n)}};function Np(t,{value:e,oldValue:n},r){t._modelValue=e;let s;if(be(e))s=Od(e,r.props.value)>-1;else if(fo(e))s=e.has(r.props.value);else{if(e===n)return;s=vs(e,Py(t,!0))}t.checked!==s&&(t.checked=s)}const er={created(t,{value:e},n){t.checked=vs(e,n.props.value),t[pn]=Ur(n),Zn(t,"change",()=>{t[pn](no(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[pn]=Ur(r),e!==n&&(t.checked=vs(e,r.props.value))}},Vr={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const s=fo(e);Zn(t,"change",()=>{const o=Array.prototype.filter.call(t.options,i=>i.selected).map(i=>n?Qa(no(i)):no(i));t[pn](t.multiple?s?new Set(o):o:o[0]),t._assigning=!0,xn(()=>{t._assigning=!1})}),t[pn]=Ur(r)},mounted(t,{value:e}){Dp(t,e)},beforeUpdate(t,e,n){t[pn]=Ur(n)},updated(t,{value:e}){t._assigning||Dp(t,e)}};function Dp(t,e){const n=t.multiple,r=be(e);if(!(n&&!r&&!fo(e))){for(let s=0,o=t.options.length;s<o;s++){const i=t.options[s],a=no(i);if(n)if(r){const u=typeof a;u==="string"||u==="number"?i.selected=e.some(c=>String(c)===String(a)):i.selected=Od(e,a)>-1}else i.selected=e.has(a);else if(vs(no(i),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function no(t){return"_value"in t?t._value:t.value}function Py(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const EE=["ctrl","shift","alt","meta"],TE={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>EE.some(n=>t[`${n}Key`]&&!e.includes(n))},Mn=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(s,...o)=>{for(let i=0;i<e.length;i++){const a=TE[e[i]];if(a&&a(s,e))return}return t(s,...o)})},IE={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},rc=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=s=>{if(!("key"in s))return;const o=Wr(s.key);if(e.some(i=>i===o||IE[i]===o))return t(s)})},kE=xt({patchProp:bE},eE);let Vp;function AE(){return Vp||(Vp=Tx(kE))}const SE=(...t)=>{const e=AE().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=RE(r);if(!s)return;const o=e._component;!Pe(o)&&!o.render&&!o.template&&(o.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const i=n(s,!1,CE(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),i},e};function CE(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function RE(t){return lt(t)?document.querySelector(t):t}/*!
 * pinia v3.0.2
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Oy;const zl=t=>Oy=t,Ny=Symbol();function Bc(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var ii;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(ii||(ii={}));function PE(){const t=E0(!0),e=t.run(()=>H({}));let n=[],r=[];const s=Ud({install(o){zl(s),s._a=o,o.provide(Ny,s),o.config.globalProperties.$pinia=s,r.forEach(i=>n.push(i)),r=[]},use(o){return this._a?n.push(o):r.push(o),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return s}const Dy=()=>{};function Mp(t,e,n,r=Dy){t.push(e);const s=()=>{const o=t.indexOf(e);o>-1&&(t.splice(o,1),r())};return!n&&T0()&&p1(s),s}function Us(t,...e){t.slice().forEach(n=>{n(...e)})}const OE=t=>t(),$p=Symbol(),sc=Symbol();function zc(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],s=t[n];Bc(s)&&Bc(r)&&t.hasOwnProperty(n)&&!Xe(r)&&!Dr(r)?t[n]=zc(s,r):t[n]=r}return t}const NE=Symbol();function DE(t){return!Bc(t)||!Object.prototype.hasOwnProperty.call(t,NE)}const{assign:Tr}=Object;function VE(t){return!!(Xe(t)&&t.effect)}function ME(t,e,n,r){const{state:s,actions:o,getters:i}=e,a=n.state.value[t];let u;function c(){a||(n.state.value[t]=s?s():{});const h=$1(n.state.value[t]);return Tr(h,o,Object.keys(i||{}).reduce((f,g)=>(f[g]=Ud(ye(()=>{zl(n);const m=n._s.get(t);return i[g].call(m,m)})),f),{}))}return u=Vy(t,c,e,n,r,!0),u}function Vy(t,e,n={},r,s,o){let i;const a=Tr({actions:{}},n),u={deep:!0};let c,h,f=[],g=[],m;const _=r.state.value[t];!o&&!_&&(r.state.value[t]={}),H({});let T;function x(v){let b;c=h=!1,typeof v=="function"?(v(r.state.value[t]),b={type:ii.patchFunction,storeId:t,events:m}):(zc(r.state.value[t],v),b={type:ii.patchObject,payload:v,storeId:t,events:m});const S=T=Symbol();xn().then(()=>{T===S&&(c=!0)}),h=!0,Us(f,b,r.state.value[t])}const C=o?function(){const{state:b}=n,S=b?b():{};this.$patch(E=>{Tr(E,S)})}:Dy;function P(){i.stop(),f=[],g=[],r._s.delete(t)}const V=(v,b="")=>{if($p in v)return v[sc]=b,v;const S=function(){zl(r);const E=Array.from(arguments),A=[],w=[];function M(se){A.push(se)}function ce(se){w.push(se)}Us(g,{args:E,name:S[sc],store:U,after:M,onError:ce});let Se;try{Se=v.apply(this&&this.$id===t?this:U,E)}catch(se){throw Us(w,se),se}return Se instanceof Promise?Se.then(se=>(Us(A,se),se)).catch(se=>(Us(w,se),Promise.reject(se))):(Us(A,Se),Se)};return S[$p]=!0,S[sc]=b,S},j={_p:r,$id:t,$onAction:Mp.bind(null,g),$patch:x,$reset:C,$subscribe(v,b={}){const S=Mp(f,v,b.detached,()=>E()),E=i.run(()=>qt(()=>r.state.value[t],A=>{(b.flush==="sync"?h:c)&&v({storeId:t,type:ii.direct,events:m},A)},Tr({},u,b)));return S},$dispose:P},U=go(j);r._s.set(t,U);const k=(r._a&&r._a.runWithContext||OE)(()=>r._e.run(()=>(i=E0()).run(()=>e({action:V}))));for(const v in k){const b=k[v];if(Xe(b)&&!VE(b)||Dr(b))o||(_&&DE(b)&&(Xe(b)?b.value=_[v]:zc(b,_[v])),r.state.value[t][v]=b);else if(typeof b=="function"){const S=V(b,v);k[v]=S,a.actions[v]=b}}return Tr(U,k),Tr(je(U),k),Object.defineProperty(U,"$state",{get:()=>r.state.value[t],set:v=>{x(b=>{Tr(b,v)})}}),r._p.forEach(v=>{Tr(U,i.run(()=>v({store:U,app:r._a,pinia:r,options:a})))}),_&&o&&n.hydrate&&n.hydrate(U.$state,_),c=!0,h=!0,U}/*! #__NO_SIDE_EFFECTS__ */function ql(t,e,n){let r;const s=typeof e=="function";r=s?n:e;function o(i,a){const u=yx();return i=i||(u?wt(Ny,null):null),i&&zl(i),i=Oy,i._s.has(t)||(s?Vy(t,e,r,i):ME(t,r,i)),i._s.get(t)}return o.$id=t,o}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Bs=typeof document<"u";function My(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function $E(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&My(t.default)}const qe=Object.assign;function oc(t,e){const n={};for(const r in e){const s=e[r];n[r]=kn(s)?s.map(t):t(s)}return n}const ai=()=>{},kn=Array.isArray,$y=/#/g,LE=/&/g,FE=/\//g,UE=/=/g,jE=/\?/g,Ly=/\+/g,BE=/%5B/g,zE=/%5D/g,Fy=/%5E/g,qE=/%60/g,Uy=/%7B/g,HE=/%7C/g,jy=/%7D/g,KE=/%20/g;function Wd(t){return encodeURI(""+t).replace(HE,"|").replace(BE,"[").replace(zE,"]")}function WE(t){return Wd(t).replace(Uy,"{").replace(jy,"}").replace(Fy,"^")}function qc(t){return Wd(t).replace(Ly,"%2B").replace(KE,"+").replace($y,"%23").replace(LE,"%26").replace(qE,"`").replace(Uy,"{").replace(jy,"}").replace(Fy,"^")}function GE(t){return qc(t).replace(UE,"%3D")}function QE(t){return Wd(t).replace($y,"%23").replace(jE,"%3F")}function JE(t){return t==null?"":QE(t).replace(FE,"%2F")}function Ti(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const YE=/\/$/,XE=t=>t.replace(YE,"");function ic(t,e,n="/"){let r,s={},o="",i="";const a=e.indexOf("#");let u=e.indexOf("?");return a<u&&a>=0&&(u=-1),u>-1&&(r=e.slice(0,u),o=e.slice(u+1,a>-1?a:e.length),s=t(o)),a>-1&&(r=r||e.slice(0,a),i=e.slice(a,e.length)),r=nT(r??e,n),{fullPath:r+(o&&"?")+o+i,path:r,query:s,hash:Ti(i)}}function ZE(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Lp(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function eT(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&ro(e.matched[r],n.matched[s])&&By(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function ro(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function By(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!tT(t[n],e[n]))return!1;return!0}function tT(t,e){return kn(t)?Fp(t,e):kn(e)?Fp(e,t):t===e}function Fp(t,e){return kn(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function nT(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let o=n.length-1,i,a;for(i=0;i<r.length;i++)if(a=r[i],a!==".")if(a==="..")o>1&&o--;else break;return n.slice(0,o).join("/")+"/"+r.slice(i).join("/")}const xr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Ii;(function(t){t.pop="pop",t.push="push"})(Ii||(Ii={}));var li;(function(t){t.back="back",t.forward="forward",t.unknown=""})(li||(li={}));function rT(t){if(!t)if(Bs){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),XE(t)}const sT=/^[^#]+#/;function oT(t,e){return t.replace(sT,"#")+e}function iT(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const Hl=()=>({left:window.scrollX,top:window.scrollY});function aT(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=iT(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Up(t,e){return(history.state?history.state.position-e:-1)+t}const Hc=new Map;function lT(t,e){Hc.set(t,e)}function uT(t){const e=Hc.get(t);return Hc.delete(t),e}let cT=()=>location.protocol+"//"+location.host;function zy(t,e){const{pathname:n,search:r,hash:s}=e,o=t.indexOf("#");if(o>-1){let a=s.includes(t.slice(o))?t.slice(o).length:1,u=s.slice(a);return u[0]!=="/"&&(u="/"+u),Lp(u,"")}return Lp(n,t)+r+s}function dT(t,e,n,r){let s=[],o=[],i=null;const a=({state:g})=>{const m=zy(t,location),_=n.value,T=e.value;let x=0;if(g){if(n.value=m,e.value=g,i&&i===_){i=null;return}x=T?g.position-T.position:0}else r(m);s.forEach(C=>{C(n.value,_,{delta:x,type:Ii.pop,direction:x?x>0?li.forward:li.back:li.unknown})})};function u(){i=n.value}function c(g){s.push(g);const m=()=>{const _=s.indexOf(g);_>-1&&s.splice(_,1)};return o.push(m),m}function h(){const{history:g}=window;g.state&&g.replaceState(qe({},g.state,{scroll:Hl()}),"")}function f(){for(const g of o)g();o=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:u,listen:c,destroy:f}}function jp(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?Hl():null}}function hT(t){const{history:e,location:n}=window,r={value:zy(t,n)},s={value:e.state};s.value||o(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function o(u,c,h){const f=t.indexOf("#"),g=f>-1?(n.host&&document.querySelector("base")?t:t.slice(f))+u:cT()+t+u;try{e[h?"replaceState":"pushState"](c,"",g),s.value=c}catch(m){console.error(m),n[h?"replace":"assign"](g)}}function i(u,c){const h=qe({},e.state,jp(s.value.back,u,s.value.forward,!0),c,{position:s.value.position});o(u,h,!0),r.value=u}function a(u,c){const h=qe({},s.value,e.state,{forward:u,scroll:Hl()});o(h.current,h,!0);const f=qe({},jp(r.value,u,null),{position:h.position+1},c);o(u,f,!1),r.value=u}return{location:r,state:s,push:a,replace:i}}function fT(t){t=rT(t);const e=hT(t),n=dT(t,e.state,e.location,e.replace);function r(o,i=!0){i||n.pauseListeners(),history.go(o)}const s=qe({location:"",base:t,go:r,createHref:oT.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function pT(t){return typeof t=="string"||t&&typeof t=="object"}function qy(t){return typeof t=="string"||typeof t=="symbol"}const Hy=Symbol("");var Bp;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Bp||(Bp={}));function so(t,e){return qe(new Error,{type:t,[Hy]:!0},e)}function Gn(t,e){return t instanceof Error&&Hy in t&&(e==null||!!(t.type&e))}const zp="[^/]+?",gT={sensitive:!1,strict:!1,start:!0,end:!0},mT=/[.+*?^${}()[\]/\\]/g;function yT(t,e){const n=qe({},gT,e),r=[];let s=n.start?"^":"";const o=[];for(const c of t){const h=c.length?[]:[90];n.strict&&!c.length&&(s+="/");for(let f=0;f<c.length;f++){const g=c[f];let m=40+(n.sensitive?.25:0);if(g.type===0)f||(s+="/"),s+=g.value.replace(mT,"\\$&"),m+=40;else if(g.type===1){const{value:_,repeatable:T,optional:x,regexp:C}=g;o.push({name:_,repeatable:T,optional:x});const P=C||zp;if(P!==zp){m+=10;try{new RegExp(`(${P})`)}catch(j){throw new Error(`Invalid custom RegExp for param "${_}" (${P}): `+j.message)}}let V=T?`((?:${P})(?:/(?:${P}))*)`:`(${P})`;f||(V=x&&c.length<2?`(?:/${V})`:"/"+V),x&&(V+="?"),s+=V,m+=20,x&&(m+=-8),T&&(m+=-20),P===".*"&&(m+=-50)}h.push(m)}r.push(h)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const i=new RegExp(s,n.sensitive?"":"i");function a(c){const h=c.match(i),f={};if(!h)return null;for(let g=1;g<h.length;g++){const m=h[g]||"",_=o[g-1];f[_.name]=m&&_.repeatable?m.split("/"):m}return f}function u(c){let h="",f=!1;for(const g of t){(!f||!h.endsWith("/"))&&(h+="/"),f=!1;for(const m of g)if(m.type===0)h+=m.value;else if(m.type===1){const{value:_,repeatable:T,optional:x}=m,C=_ in c?c[_]:"";if(kn(C)&&!T)throw new Error(`Provided param "${_}" is an array but it is not repeatable (* or + modifiers)`);const P=kn(C)?C.join("/"):C;if(!P)if(x)g.length<2&&(h.endsWith("/")?h=h.slice(0,-1):f=!0);else throw new Error(`Missing required param "${_}"`);h+=P}}return h||"/"}return{re:i,score:r,keys:o,parse:a,stringify:u}}function vT(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function Ky(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const o=vT(r[n],s[n]);if(o)return o;n++}if(Math.abs(s.length-r.length)===1){if(qp(r))return 1;if(qp(s))return-1}return s.length-r.length}function qp(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const _T={type:0,value:""},bT=/[a-zA-Z0-9_]/;function wT(t){if(!t)return[[]];if(t==="/")return[[_T]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${n})/"${c}": ${m}`)}let n=0,r=n;const s=[];let o;function i(){o&&s.push(o),o=[]}let a=0,u,c="",h="";function f(){c&&(n===0?o.push({type:0,value:c}):n===1||n===2||n===3?(o.length>1&&(u==="*"||u==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:c,regexp:h,repeatable:u==="*"||u==="+",optional:u==="*"||u==="?"})):e("Invalid state to consume buffer"),c="")}function g(){c+=u}for(;a<t.length;){if(u=t[a++],u==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:u==="/"?(c&&f(),i()):u===":"?(f(),n=1):g();break;case 4:g(),n=r;break;case 1:u==="("?n=2:bT.test(u)?g():(f(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&a--);break;case 2:u===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+u:n=3:h+=u;break;case 3:f(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&a--,h="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),f(),i(),s}function xT(t,e,n){const r=yT(wT(t.path),n),s=qe(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function ET(t,e){const n=[],r=new Map;e=Gp({strict:!1,end:!0,sensitive:!1},e);function s(f){return r.get(f)}function o(f,g,m){const _=!m,T=Kp(f);T.aliasOf=m&&m.record;const x=Gp(e,f),C=[T];if("alias"in f){const j=typeof f.alias=="string"?[f.alias]:f.alias;for(const U of j)C.push(Kp(qe({},T,{components:m?m.record.components:T.components,path:U,aliasOf:m?m.record:T})))}let P,V;for(const j of C){const{path:U}=j;if(g&&U[0]!=="/"){const q=g.record.path,k=q[q.length-1]==="/"?"":"/";j.path=g.record.path+(U&&k+U)}if(P=xT(j,g,x),m?m.alias.push(P):(V=V||P,V!==P&&V.alias.push(P),_&&f.name&&!Wp(P)&&i(f.name)),Wy(P)&&u(P),T.children){const q=T.children;for(let k=0;k<q.length;k++)o(q[k],P,m&&m.children[k])}m=m||P}return V?()=>{i(V)}:ai}function i(f){if(qy(f)){const g=r.get(f);g&&(r.delete(f),n.splice(n.indexOf(g),1),g.children.forEach(i),g.alias.forEach(i))}else{const g=n.indexOf(f);g>-1&&(n.splice(g,1),f.record.name&&r.delete(f.record.name),f.children.forEach(i),f.alias.forEach(i))}}function a(){return n}function u(f){const g=kT(f,n);n.splice(g,0,f),f.record.name&&!Wp(f)&&r.set(f.record.name,f)}function c(f,g){let m,_={},T,x;if("name"in f&&f.name){if(m=r.get(f.name),!m)throw so(1,{location:f});x=m.record.name,_=qe(Hp(g.params,m.keys.filter(V=>!V.optional).concat(m.parent?m.parent.keys.filter(V=>V.optional):[]).map(V=>V.name)),f.params&&Hp(f.params,m.keys.map(V=>V.name))),T=m.stringify(_)}else if(f.path!=null)T=f.path,m=n.find(V=>V.re.test(T)),m&&(_=m.parse(T),x=m.record.name);else{if(m=g.name?r.get(g.name):n.find(V=>V.re.test(g.path)),!m)throw so(1,{location:f,currentLocation:g});x=m.record.name,_=qe({},g.params,f.params),T=m.stringify(_)}const C=[];let P=m;for(;P;)C.unshift(P.record),P=P.parent;return{name:x,path:T,params:_,matched:C,meta:IT(C)}}t.forEach(f=>o(f));function h(){n.length=0,r.clear()}return{addRoute:o,resolve:c,removeRoute:i,clearRoutes:h,getRoutes:a,getRecordMatcher:s}}function Hp(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function Kp(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:TT(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function TT(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function Wp(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function IT(t){return t.reduce((e,n)=>qe(e,n.meta),{})}function Gp(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function kT(t,e){let n=0,r=e.length;for(;n!==r;){const o=n+r>>1;Ky(t,e[o])<0?r=o:n=o+1}const s=AT(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function AT(t){let e=t;for(;e=e.parent;)if(Wy(e)&&Ky(t,e)===0)return e}function Wy({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function ST(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const o=r[s].replace(Ly," "),i=o.indexOf("="),a=Ti(i<0?o:o.slice(0,i)),u=i<0?null:Ti(o.slice(i+1));if(a in e){let c=e[a];kn(c)||(c=e[a]=[c]),c.push(u)}else e[a]=u}return e}function Qp(t){let e="";for(let n in t){const r=t[n];if(n=GE(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(kn(r)?r.map(o=>o&&qc(o)):[r&&qc(r)]).forEach(o=>{o!==void 0&&(e+=(e.length?"&":"")+n,o!=null&&(e+="="+o))})}return e}function CT(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=kn(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const RT=Symbol(""),Jp=Symbol(""),Kl=Symbol(""),Gd=Symbol(""),Kc=Symbol("");function Ko(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Sr(t,e,n,r,s,o=i=>i()){const i=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,u)=>{const c=g=>{g===!1?u(so(4,{from:n,to:e})):g instanceof Error?u(g):pT(g)?u(so(2,{from:e,to:g})):(i&&r.enterCallbacks[s]===i&&typeof g=="function"&&i.push(g),a())},h=o(()=>t.call(r&&r.instances[s],e,n,c));let f=Promise.resolve(h);t.length<3&&(f=f.then(c)),f.catch(g=>u(g))})}function ac(t,e,n,r,s=o=>o()){const o=[];for(const i of t)for(const a in i.components){let u=i.components[a];if(!(e!=="beforeRouteEnter"&&!i.instances[a]))if(My(u)){const h=(u.__vccOpts||u)[e];h&&o.push(Sr(h,n,r,i,a,s))}else{let c=u();o.push(()=>c.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${i.path}"`);const f=$E(h)?h.default:h;i.mods[a]=h,i.components[a]=f;const m=(f.__vccOpts||f)[e];return m&&Sr(m,n,r,i,a,s)()}))}}return o}function Yp(t){const e=wt(Kl),n=wt(Gd),r=ye(()=>{const u=_e(t.to);return e.resolve(u)}),s=ye(()=>{const{matched:u}=r.value,{length:c}=u,h=u[c-1],f=n.matched;if(!h||!f.length)return-1;const g=f.findIndex(ro.bind(null,h));if(g>-1)return g;const m=Xp(u[c-2]);return c>1&&Xp(h)===m&&f[f.length-1].path!==m?f.findIndex(ro.bind(null,u[c-2])):g}),o=ye(()=>s.value>-1&&VT(n.params,r.value.params)),i=ye(()=>s.value>-1&&s.value===n.matched.length-1&&By(n.params,r.value.params));function a(u={}){if(DT(u)){const c=e[_e(t.replace)?"replace":"push"](_e(t.to)).catch(ai);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:r,href:ye(()=>r.value.href),isActive:o,isExactActive:i,navigate:a}}function PT(t){return t.length===1?t[0]:t}const OT=mo({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Yp,setup(t,{slots:e}){const n=go(Yp(t)),{options:r}=wt(Kl),s=ye(()=>({[Zp(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Zp(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const o=e.default&&PT(e.default(n));return t.custom?o:Bl("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},o)}}}),NT=OT;function DT(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function VT(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!kn(s)||s.length!==r.length||r.some((o,i)=>o!==s[i]))return!1}return!0}function Xp(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Zp=(t,e,n)=>t??e??n,MT=mo({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=wt(Kc),s=ye(()=>t.route||r.value),o=wt(Jp,0),i=ye(()=>{let c=_e(o);const{matched:h}=s.value;let f;for(;(f=h[c])&&!f.components;)c++;return c}),a=ye(()=>s.value.matched[i.value]);sr(Jp,ye(()=>i.value+1)),sr(RT,a),sr(Kc,s);const u=H();return qt(()=>[u.value,a.value,t.name],([c,h,f],[g,m,_])=>{h&&(h.instances[f]=c,m&&m!==h&&c&&c===g&&(h.leaveGuards.size||(h.leaveGuards=m.leaveGuards),h.updateGuards.size||(h.updateGuards=m.updateGuards))),c&&h&&(!m||!ro(h,m)||!g)&&(h.enterCallbacks[f]||[]).forEach(T=>T(c))},{flush:"post"}),()=>{const c=s.value,h=t.name,f=a.value,g=f&&f.components[h];if(!g)return eg(n.default,{Component:g,route:c});const m=f.props[h],_=m?m===!0?c.params:typeof m=="function"?m(c):m:null,x=Bl(g,qe({},_,e,{onVnodeUnmounted:C=>{C.component.isUnmounted&&(f.instances[h]=null)},ref:u}));return eg(n.default,{Component:x,route:c})||x}}});function eg(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const Gy=MT;function $T(t){const e=ET(t.routes,t),n=t.parseQuery||ST,r=t.stringifyQuery||Qp,s=t.history,o=Ko(),i=Ko(),a=Ko(),u=D1(xr);let c=xr;Bs&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=oc.bind(null,K=>""+K),f=oc.bind(null,JE),g=oc.bind(null,Ti);function m(K,de){let ae,pe;return qy(K)?(ae=e.getRecordMatcher(K),pe=de):pe=K,e.addRoute(pe,ae)}function _(K){const de=e.getRecordMatcher(K);de&&e.removeRoute(de)}function T(){return e.getRoutes().map(K=>K.record)}function x(K){return!!e.getRecordMatcher(K)}function C(K,de){if(de=qe({},de||u.value),typeof K=="string"){const $=ic(n,K,de.path),W=e.resolve({path:$.path},de),Y=s.createHref($.fullPath);return qe($,W,{params:g(W.params),hash:Ti($.hash),redirectedFrom:void 0,href:Y})}let ae;if(K.path!=null)ae=qe({},K,{path:ic(n,K.path,de.path).path});else{const $=qe({},K.params);for(const W in $)$[W]==null&&delete $[W];ae=qe({},K,{params:f($)}),de.params=f(de.params)}const pe=e.resolve(ae,de),Be=K.hash||"";pe.params=h(g(pe.params));const N=ZE(r,qe({},K,{hash:WE(Be),path:pe.path})),D=s.createHref(N);return qe({fullPath:N,hash:Be,query:r===Qp?CT(K.query):K.query||{}},pe,{redirectedFrom:void 0,href:D})}function P(K){return typeof K=="string"?ic(n,K,u.value.path):qe({},K)}function V(K,de){if(c!==K)return so(8,{from:de,to:K})}function j(K){return k(K)}function U(K){return j(qe(P(K),{replace:!0}))}function q(K){const de=K.matched[K.matched.length-1];if(de&&de.redirect){const{redirect:ae}=de;let pe=typeof ae=="function"?ae(K):ae;return typeof pe=="string"&&(pe=pe.includes("?")||pe.includes("#")?pe=P(pe):{path:pe},pe.params={}),qe({query:K.query,hash:K.hash,params:pe.path!=null?{}:K.params},pe)}}function k(K,de){const ae=c=C(K),pe=u.value,Be=K.state,N=K.force,D=K.replace===!0,$=q(ae);if($)return k(qe(P($),{state:typeof $=="object"?qe({},Be,$.state):Be,force:N,replace:D}),de||ae);const W=ae;W.redirectedFrom=de;let Y;return!N&&eT(r,pe,ae)&&(Y=so(16,{to:W,from:pe}),un(pe,pe,!0,!1)),(Y?Promise.resolve(Y):S(W,pe)).catch(G=>Gn(G)?Gn(G,2)?G:Et(G):Ce(G,W,pe)).then(G=>{if(G){if(Gn(G,2))return k(qe({replace:D},P(G.to),{state:typeof G.to=="object"?qe({},Be,G.to.state):Be,force:N}),de||W)}else G=A(W,pe,!0,D,Be);return E(W,pe,G),G})}function v(K,de){const ae=V(K,de);return ae?Promise.reject(ae):Promise.resolve()}function b(K){const de=mr.values().next().value;return de&&typeof de.runWithContext=="function"?de.runWithContext(K):K()}function S(K,de){let ae;const[pe,Be,N]=LT(K,de);ae=ac(pe.reverse(),"beforeRouteLeave",K,de);for(const $ of pe)$.leaveGuards.forEach(W=>{ae.push(Sr(W,K,de))});const D=v.bind(null,K,de);return ae.push(D),Jt(ae).then(()=>{ae=[];for(const $ of o.list())ae.push(Sr($,K,de));return ae.push(D),Jt(ae)}).then(()=>{ae=ac(Be,"beforeRouteUpdate",K,de);for(const $ of Be)$.updateGuards.forEach(W=>{ae.push(Sr(W,K,de))});return ae.push(D),Jt(ae)}).then(()=>{ae=[];for(const $ of N)if($.beforeEnter)if(kn($.beforeEnter))for(const W of $.beforeEnter)ae.push(Sr(W,K,de));else ae.push(Sr($.beforeEnter,K,de));return ae.push(D),Jt(ae)}).then(()=>(K.matched.forEach($=>$.enterCallbacks={}),ae=ac(N,"beforeRouteEnter",K,de,b),ae.push(D),Jt(ae))).then(()=>{ae=[];for(const $ of i.list())ae.push(Sr($,K,de));return ae.push(D),Jt(ae)}).catch($=>Gn($,8)?$:Promise.reject($))}function E(K,de,ae){a.list().forEach(pe=>b(()=>pe(K,de,ae)))}function A(K,de,ae,pe,Be){const N=V(K,de);if(N)return N;const D=de===xr,$=Bs?history.state:{};ae&&(pe||D?s.replace(K.fullPath,qe({scroll:D&&$&&$.scroll},Be)):s.push(K.fullPath,Be)),u.value=K,un(K,de,ae,D),Et()}let w;function M(){w||(w=s.listen((K,de,ae)=>{if(!Rn.listening)return;const pe=C(K),Be=q(pe);if(Be){k(qe(Be,{replace:!0,force:!0}),pe).catch(ai);return}c=pe;const N=u.value;Bs&&lT(Up(N.fullPath,ae.delta),Hl()),S(pe,N).catch(D=>Gn(D,12)?D:Gn(D,2)?(k(qe(P(D.to),{force:!0}),pe).then($=>{Gn($,20)&&!ae.delta&&ae.type===Ii.pop&&s.go(-1,!1)}).catch(ai),Promise.reject()):(ae.delta&&s.go(-ae.delta,!1),Ce(D,pe,N))).then(D=>{D=D||A(pe,N,!1),D&&(ae.delta&&!Gn(D,8)?s.go(-ae.delta,!1):ae.type===Ii.pop&&Gn(D,20)&&s.go(-1,!1)),E(pe,N,D)}).catch(ai)}))}let ce=Ko(),Se=Ko(),se;function Ce(K,de,ae){Et(K);const pe=Se.list();return pe.length?pe.forEach(Be=>Be(K,de,ae)):console.error(K),Promise.reject(K)}function rt(){return se&&u.value!==xr?Promise.resolve():new Promise((K,de)=>{ce.add([K,de])})}function Et(K){return se||(se=!K,M(),ce.list().forEach(([de,ae])=>K?ae(K):de()),ce.reset()),K}function un(K,de,ae,pe){const{scrollBehavior:Be}=t;if(!Bs||!Be)return Promise.resolve();const N=!ae&&uT(Up(K.fullPath,0))||(pe||!ae)&&history.state&&history.state.scroll||null;return xn().then(()=>Be(K,de,N)).then(D=>D&&aT(D)).catch(D=>Ce(D,K,de))}const st=K=>s.go(K);let ot;const mr=new Set,Rn={currentRoute:u,listening:!0,addRoute:m,removeRoute:_,clearRoutes:e.clearRoutes,hasRoute:x,getRoutes:T,resolve:C,options:t,push:j,replace:U,go:st,back:()=>st(-1),forward:()=>st(1),beforeEach:o.add,beforeResolve:i.add,afterEach:a.add,onError:Se.add,isReady:rt,install(K){const de=this;K.component("RouterLink",NT),K.component("RouterView",Gy),K.config.globalProperties.$router=de,Object.defineProperty(K.config.globalProperties,"$route",{enumerable:!0,get:()=>_e(u)}),Bs&&!ot&&u.value===xr&&(ot=!0,j(s.location).catch(Be=>{}));const ae={};for(const Be in xr)Object.defineProperty(ae,Be,{get:()=>u.value[Be],enumerable:!0});K.provide(Kl,de),K.provide(Gd,F0(ae)),K.provide(Kc,u);const pe=K.unmount;mr.add(K),K.unmount=function(){mr.delete(K),mr.size<1&&(c=xr,w&&w(),w=null,u.value=xr,ot=!1,se=!1),pe()}}};function Jt(K){return K.reduce((de,ae)=>de.then(()=>b(ae)),Promise.resolve())}return Rn}function LT(t,e){const n=[],r=[],s=[],o=Math.max(e.matched.length,t.matched.length);for(let i=0;i<o;i++){const a=e.matched[i];a&&(t.matched.find(c=>ro(c,a))?r.push(a):n.push(a));const u=t.matched[i];u&&(e.matched.find(c=>ro(c,u))||s.push(u))}return[n,r,s]}function Qd(){return wt(Kl)}function Qy(t){return wt(Gd)}const ui=ql("toast",{state:()=>({toast:{show:!1,title:"",message:"",type:"info",timeoutId:null}}),actions:{showToast(t,e,n="info",r=3e3){this.toast.timeoutId&&clearTimeout(this.toast.timeoutId),this.toast.show=!0,this.toast.title=t,this.toast.message=e,this.toast.type=n,this.toast.timeoutId=setTimeout(()=>{this.hideToast()},r)},hideToast(){this.toast.show=!1,this.toast.title="",this.toast.message="",this.toast.type="info",this.toast.timeoutId&&(clearTimeout(this.toast.timeoutId),this.toast.timeoutId=null)}}}),Ot=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},FT={class:"flex items-center"},UT={class:"mr-2"},jT={key:0,class:"fas fa-check-circle"},BT={key:1,class:"fas fa-times-circle"},zT={key:2,class:"fas fa-info-circle"},qT={class:"font-semibold"},HT={class:"text-sm"},KT={__name:"ToastNotification",setup(t){const e=ui(),n=ye(()=>e.toast);return(r,s)=>n.value.show?(R(),O("div",{key:0,class:re(["fixed bottom-4 right-4 p-4 rounded-lg shadow-lg text-white max-w-xs z-[1000]",n.value.type==="success"?"bg-green-500":n.value.type==="error"?"bg-red-500":"bg-blue-500"]),role:"alert"},[d("div",FT,[d("div",UT,[n.value.type==="success"?(R(),O("i",jT)):n.value.type==="error"?(R(),O("i",BT)):(R(),O("i",zT))]),d("div",null,[d("p",qT,F(n.value.title),1),d("p",HT,F(n.value.message),1)]),d("button",{onClick:s[0]||(s[0]=o=>_e(e).hideToast()),class:"ml-auto text-white opacity-75 hover:opacity-100"}," × ")])],2)):le("",!0)}},WT=Ot(KT,[["__scopeId","data-v-12732203"]]),GT={__name:"App",setup(t){return(e,n)=>(R(),O(ge,null,[ue(_e(Gy),null,{default:me(({Component:r,route:s})=>[ue(vo,{"enter-active-class":s.meta.enterActiveClass,"leave-active-class":s.meta.leaveActiveClass},{default:me(()=>[(R(),Qe(lx(r)))]),_:2},1032,["enter-active-class","leave-active-class"])]),_:1}),ue(WT)],64))}},_o=ql("cart",()=>{const t=H(JSON.parse(localStorage.getItem("cart_items")||"[]"));function e(i){if(!i||!i.id){console.warn("Tentativa de adicionar item inválido:",i);return}const a=t.value.find(u=>u.id===i.id&&u.size===i.size&&s(u.extras,i.extras));a?a.quantity+=i.quantity:t.value.push({...i,subtotal:i.price+i.extras.reduce((u,c)=>u+c.price,0)})}function n(i){console.log("Removendo item:",i);const a=t.value.findIndex(u=>u.id===i.id&&u.size===i.size&&s(u.extras,i.extras));a!==-1?(t.value.splice(a,1),console.log("Item removido com sucesso!")):console.warn("Item para remover não encontrado.")}function r(){t.value=[]}function s(i,a){if(i.length!==a.length)return!1;const u=[...i].sort((h,f)=>h.name.localeCompare(f.name)),c=[...a].sort((h,f)=>h.name.localeCompare(f.name));return u.every((h,f)=>h.name===c[f].name&&h.price===c[f].price)}const o=ye(()=>t.value.reduce((i,a)=>i+(a.price+a.extras.reduce((u,c)=>u+c.price,0))*a.quantity,0));return qt(t,i=>{localStorage.setItem("cart_items",JSON.stringify(i))},{deep:!0}),{items:t,addItem:e,removeItem:n,clearCart:r,total:o}}),QT={class:"md:translate-20 transition-all -translate-y-2 fixed bottom-0 left-2 right-2 rounded-full bg-gray-200/30 border-t border-gray-200/50 dark:bg-gray-900/30 dark:border-gray-700 shadow-md z-50 backdrop-blur-md"},JT={class:"flex justify-around p-3 text-gray-700 dark:text-gray-300 relative"},YT={__name:"MenuMobile",setup(t){const e=Qy(),n=H(!1),r=i=>e.path===i,s=_o(),o=ye(()=>s.items.length);return qt(o,(i,a)=>{i>a&&(n.value=!0,setTimeout(()=>{n.value=!1},500))}),(i,a)=>{const u=Bi("RouterLink");return R(),O("div",QT,[d("nav",JT,[ue(u,{to:"/",class:re(["flex flex-col items-center",{"text-indigo-500 dark:text-emerald-400":r("/")}])},{default:me(()=>a[0]||(a[0]=[d("i",{class:"fas fa-home text-sm"},null,-1),d("span",{class:"text-xs mt-1"},"Início",-1)])),_:1,__:[0]},8,["class"]),ue(u,{to:"/carrinho",class:re(["flex flex-col items-center relative",{"text-indigo-500 dark:text-emerald-400":r("/carrinho")}])},{default:me(()=>[a[1]||(a[1]=d("i",{class:"fas fa-shopping-cart text-sm"},null,-1)),a[2]||(a[2]=d("span",{class:"text-xs mt-1"},"Carrinho",-1)),o.value>0?(R(),O("span",{key:0,class:re(["absolute -top-2 -right-2 bg-red-500 text-white text-[10px] rounded-full px-1.5 py-0.5 font-semibold",n.value?"animate-bounce":""])},F(o.value),3)):le("",!0)]),_:1,__:[1,2]},8,["class"]),ue(u,{to:"/favoritos",class:re(["flex flex-col items-center",{"text-indigo-500 dark:text-emerald-400":r("/favoritos")}])},{default:me(()=>a[3]||(a[3]=[d("i",{class:"fas fa-heart text-sm"},null,-1),d("span",{class:"text-xs mt-1"},"Favoritos",-1)])),_:1,__:[3]},8,["class"]),ue(u,{to:"/perfil",class:re(["flex flex-col items-center",{"text-indigo-500 dark:text-emerald-400":r("/perfil")}])},{default:me(()=>a[4]||(a[4]=[d("i",{class:"fas fa-user text-sm"},null,-1),d("span",{class:"text-xs mt-1"},"Perfil",-1)])),_:1,__:[4]},8,["class"])])])}}},Jy="/assets/logo-BsbHNySU.png",XT={key:0,class:"absolute top-0 border-gray-100 border-2 -right-0 bg-red-600 text-white rounded-full text-xs w-5 h-5 flex items-center justify-center"},tg={__name:"IconCart",props:{cartCount:{type:Number,default:0}},setup(t){return(e,n)=>{const r=Bi("router-link");return R(),Qe(r,{to:"/carrinho",class:"relative text-md p-2"},{default:me(()=>[n[0]||(n[0]=d("i",{class:"fa-solid fa-cart-shopping text-gray-600 dark:text-gray-300 hover:cursor-pointer"},null,-1)),t.cartCount?(R(),O("span",XT,F(t.cartCount),1)):le("",!0)]),_:1,__:[0]})}}},ZT={class:"relative inline-block w-11 h-5 ml-4"},eI=["checked"],tI={for:"theme-switch",class:"absolute top-0 left-0 w-5 h-5 bg-white dark:bg-gray-200 rounded-full border border-gray-300 dark:border-gray-600 shadow-sm transition-transform duration-300 peer-checked:translate-x-6 peer-checked:border-blue-600 dark:peer-checked:border-blue-600 cursor-pointer flex items-center justify-center"},nI={key:0,class:"fa-solid fa-moon text-yellow-500 text-xs"},rI={key:1,class:"fa-solid fa-sun text-orange-400 text-xs"},Yy={__name:"ThemeToggle",setup(t){const e=H(!1),n=s=>{e.value=s,s?(document.documentElement.classList.add("dark"),document.documentElement.classList.remove("light"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),document.documentElement.classList.add("light"),localStorage.setItem("theme","light"))},r=s=>{const o=!e.value,i=document.createElement("div");i.classList.add("theme-ripple-effect");let a,u;if(s&&s.clientX&&s.clientY)a=s.clientX,u=s.clientY;else{const h=document.getElementById("theme-switch");if(h){const f=h.getBoundingClientRect();a=f.left+f.width/2,u=f.top+f.height/2}else a=window.innerWidth/2,u=window.innerHeight/2}const c=o?"#fff":"#1a202c";i.style.position="fixed",i.style.top="0",i.style.left="0",i.style.width="100vw",i.style.height="100vh",i.style.zIndex="9999",i.style.pointerEvents="none",i.style.backgroundImage=`radial-gradient(circle at ${a}px ${u}px, transparent 25%, ${c} 25.5%)`,i.style.backgroundSize="100% 100%",i.style.backgroundRepeat="no-repeat",i.style.transition="background-size 1s ease-out",document.body.appendChild(i),i.offsetWidth,requestAnimationFrame(()=>{i.style.backgroundSize="400% 400%"}),n(o),i.addEventListener("transitionend",h=>{h.propertyName==="background-size"&&i.remove()},{once:!0})};return ft(()=>{const s=localStorage.getItem("theme");n(s?s==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches)}),(s,o)=>(R(),O("div",ZT,[d("input",{checked:e.value,onChange:r,id:"theme-switch",type:"checkbox",class:"peer appearance-none w-11 h-5 rounded-full cursor-pointer transition-colors duration-300 bg-gray-300 dark:bg-gray-700 checked:bg-blue-600 dark:checked:bg-blue-600"},null,40,eI),d("label",tI,[e.value?(R(),O("i",nI)):(R(),O("i",rI))]),o[0]||(o[0]=d("span",{class:"sr-only"},"Toggle Theme",-1))]))}};function Xy(t,e){return function(){return t.apply(e,arguments)}}const{toString:sI}=Object.prototype,{getPrototypeOf:Jd}=Object,{iterator:Wl,toStringTag:Zy}=Symbol,Gl=(t=>e=>{const n=sI.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Cn=t=>(t=t.toLowerCase(),e=>Gl(e)===t),Ql=t=>e=>typeof e===t,{isArray:bo}=Array,ki=Ql("undefined");function oI(t){return t!==null&&!ki(t)&&t.constructor!==null&&!ki(t.constructor)&&Xt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const ev=Cn("ArrayBuffer");function iI(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&ev(t.buffer),e}const aI=Ql("string"),Xt=Ql("function"),tv=Ql("number"),Jl=t=>t!==null&&typeof t=="object",lI=t=>t===!0||t===!1,Va=t=>{if(Gl(t)!=="object")return!1;const e=Jd(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Zy in t)&&!(Wl in t)},uI=Cn("Date"),cI=Cn("File"),dI=Cn("Blob"),hI=Cn("FileList"),fI=t=>Jl(t)&&Xt(t.pipe),pI=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Xt(t.append)&&((e=Gl(t))==="formdata"||e==="object"&&Xt(t.toString)&&t.toString()==="[object FormData]"))},gI=Cn("URLSearchParams"),[mI,yI,vI,_I]=["ReadableStream","Request","Response","Headers"].map(Cn),bI=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Hi(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),bo(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{const o=n?Object.getOwnPropertyNames(t):Object.keys(t),i=o.length;let a;for(r=0;r<i;r++)a=o[r],e.call(null,t[a],a,t)}}function nv(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const us=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,rv=t=>!ki(t)&&t!==us;function Wc(){const{caseless:t}=rv(this)&&this||{},e={},n=(r,s)=>{const o=t&&nv(e,s)||s;Va(e[o])&&Va(r)?e[o]=Wc(e[o],r):Va(r)?e[o]=Wc({},r):bo(r)?e[o]=r.slice():e[o]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&Hi(arguments[r],n);return e}const wI=(t,e,n,{allOwnKeys:r}={})=>(Hi(e,(s,o)=>{n&&Xt(s)?t[o]=Xy(s,n):t[o]=s},{allOwnKeys:r}),t),xI=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),EI=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},TI=(t,e,n,r)=>{let s,o,i;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),o=s.length;o-- >0;)i=s[o],(!r||r(i,t,e))&&!a[i]&&(e[i]=t[i],a[i]=!0);t=n!==!1&&Jd(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},II=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},kI=t=>{if(!t)return null;if(bo(t))return t;let e=t.length;if(!tv(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},AI=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Jd(Uint8Array)),SI=(t,e)=>{const r=(t&&t[Wl]).call(t);let s;for(;(s=r.next())&&!s.done;){const o=s.value;e.call(t,o[0],o[1])}},CI=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},RI=Cn("HTMLFormElement"),PI=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),ng=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),OI=Cn("RegExp"),sv=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Hi(n,(s,o)=>{let i;(i=e(s,o,t))!==!1&&(r[o]=i||s)}),Object.defineProperties(t,r)},NI=t=>{sv(t,(e,n)=>{if(Xt(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Xt(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},DI=(t,e)=>{const n={},r=s=>{s.forEach(o=>{n[o]=!0})};return bo(t)?r(t):r(String(t).split(e)),n},VI=()=>{},MI=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function $I(t){return!!(t&&Xt(t.append)&&t[Zy]==="FormData"&&t[Wl])}const LI=t=>{const e=new Array(10),n=(r,s)=>{if(Jl(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const o=bo(r)?[]:{};return Hi(r,(i,a)=>{const u=n(i,s+1);!ki(u)&&(o[a]=u)}),e[s]=void 0,o}}return r};return n(t,0)},FI=Cn("AsyncFunction"),UI=t=>t&&(Jl(t)||Xt(t))&&Xt(t.then)&&Xt(t.catch),ov=((t,e)=>t?setImmediate:e?((n,r)=>(us.addEventListener("message",({source:s,data:o})=>{s===us&&o===n&&r.length&&r.shift()()},!1),s=>{r.push(s),us.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Xt(us.postMessage)),jI=typeof queueMicrotask<"u"?queueMicrotask.bind(us):typeof process<"u"&&process.nextTick||ov,BI=t=>t!=null&&Xt(t[Wl]),B={isArray:bo,isArrayBuffer:ev,isBuffer:oI,isFormData:pI,isArrayBufferView:iI,isString:aI,isNumber:tv,isBoolean:lI,isObject:Jl,isPlainObject:Va,isReadableStream:mI,isRequest:yI,isResponse:vI,isHeaders:_I,isUndefined:ki,isDate:uI,isFile:cI,isBlob:dI,isRegExp:OI,isFunction:Xt,isStream:fI,isURLSearchParams:gI,isTypedArray:AI,isFileList:hI,forEach:Hi,merge:Wc,extend:wI,trim:bI,stripBOM:xI,inherits:EI,toFlatObject:TI,kindOf:Gl,kindOfTest:Cn,endsWith:II,toArray:kI,forEachEntry:SI,matchAll:CI,isHTMLForm:RI,hasOwnProperty:ng,hasOwnProp:ng,reduceDescriptors:sv,freezeMethods:NI,toObjectSet:DI,toCamelCase:PI,noop:VI,toFiniteNumber:MI,findKey:nv,global:us,isContextDefined:rv,isSpecCompliantForm:$I,toJSONObject:LI,isAsyncFn:FI,isThenable:UI,setImmediate:ov,asap:jI,isIterable:BI};function Ve(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}B.inherits(Ve,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:B.toJSONObject(this.config),code:this.code,status:this.status}}});const iv=Ve.prototype,av={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{av[t]={value:t}});Object.defineProperties(Ve,av);Object.defineProperty(iv,"isAxiosError",{value:!0});Ve.from=(t,e,n,r,s,o)=>{const i=Object.create(iv);return B.toFlatObject(t,i,function(u){return u!==Error.prototype},a=>a!=="isAxiosError"),Ve.call(i,t.message,e,n,r,s),i.cause=t,i.name=t.name,o&&Object.assign(i,o),i};const zI=null;function Gc(t){return B.isPlainObject(t)||B.isArray(t)}function lv(t){return B.endsWith(t,"[]")?t.slice(0,-2):t}function rg(t,e,n){return t?t.concat(e).map(function(s,o){return s=lv(s),!n&&o?"["+s+"]":s}).join(n?".":""):e}function qI(t){return B.isArray(t)&&!t.some(Gc)}const HI=B.toFlatObject(B,{},null,function(e){return/^is[A-Z]/.test(e)});function Yl(t,e,n){if(!B.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=B.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(T,x){return!B.isUndefined(x[T])});const r=n.metaTokens,s=n.visitor||h,o=n.dots,i=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&B.isSpecCompliantForm(e);if(!B.isFunction(s))throw new TypeError("visitor must be a function");function c(_){if(_===null)return"";if(B.isDate(_))return _.toISOString();if(!u&&B.isBlob(_))throw new Ve("Blob is not supported. Use a Buffer instead.");return B.isArrayBuffer(_)||B.isTypedArray(_)?u&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function h(_,T,x){let C=_;if(_&&!x&&typeof _=="object"){if(B.endsWith(T,"{}"))T=r?T:T.slice(0,-2),_=JSON.stringify(_);else if(B.isArray(_)&&qI(_)||(B.isFileList(_)||B.endsWith(T,"[]"))&&(C=B.toArray(_)))return T=lv(T),C.forEach(function(V,j){!(B.isUndefined(V)||V===null)&&e.append(i===!0?rg([T],j,o):i===null?T:T+"[]",c(V))}),!1}return Gc(_)?!0:(e.append(rg(x,T,o),c(_)),!1)}const f=[],g=Object.assign(HI,{defaultVisitor:h,convertValue:c,isVisitable:Gc});function m(_,T){if(!B.isUndefined(_)){if(f.indexOf(_)!==-1)throw Error("Circular reference detected in "+T.join("."));f.push(_),B.forEach(_,function(C,P){(!(B.isUndefined(C)||C===null)&&s.call(e,C,B.isString(P)?P.trim():P,T,g))===!0&&m(C,T?T.concat(P):[P])}),f.pop()}}if(!B.isObject(t))throw new TypeError("data must be an object");return m(t),e}function sg(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Yd(t,e){this._pairs=[],t&&Yl(t,this,e)}const uv=Yd.prototype;uv.append=function(e,n){this._pairs.push([e,n])};uv.toString=function(e){const n=e?function(r){return e.call(this,r,sg)}:sg;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function KI(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function cv(t,e,n){if(!e)return t;const r=n&&n.encode||KI;B.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let o;if(s?o=s(e,n):o=B.isURLSearchParams(e)?e.toString():new Yd(e,n).toString(r),o){const i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class og{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){B.forEach(this.handlers,function(r){r!==null&&e(r)})}}const dv={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},WI=typeof URLSearchParams<"u"?URLSearchParams:Yd,GI=typeof FormData<"u"?FormData:null,QI=typeof Blob<"u"?Blob:null,JI={isBrowser:!0,classes:{URLSearchParams:WI,FormData:GI,Blob:QI},protocols:["http","https","file","blob","url","data"]},Xd=typeof window<"u"&&typeof document<"u",Qc=typeof navigator=="object"&&navigator||void 0,YI=Xd&&(!Qc||["ReactNative","NativeScript","NS"].indexOf(Qc.product)<0),XI=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",ZI=Xd&&window.location.href||"http://localhost",ek=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Xd,hasStandardBrowserEnv:YI,hasStandardBrowserWebWorkerEnv:XI,navigator:Qc,origin:ZI},Symbol.toStringTag,{value:"Module"})),zt={...ek,...JI};function tk(t,e){return Yl(t,new zt.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,o){return zt.isNode&&B.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}function nk(t){return B.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function rk(t){const e={},n=Object.keys(t);let r;const s=n.length;let o;for(r=0;r<s;r++)o=n[r],e[o]=t[o];return e}function hv(t){function e(n,r,s,o){let i=n[o++];if(i==="__proto__")return!0;const a=Number.isFinite(+i),u=o>=n.length;return i=!i&&B.isArray(s)?s.length:i,u?(B.hasOwnProp(s,i)?s[i]=[s[i],r]:s[i]=r,!a):((!s[i]||!B.isObject(s[i]))&&(s[i]=[]),e(n,r,s[i],o)&&B.isArray(s[i])&&(s[i]=rk(s[i])),!a)}if(B.isFormData(t)&&B.isFunction(t.entries)){const n={};return B.forEachEntry(t,(r,s)=>{e(nk(r),s,n,0)}),n}return null}function sk(t,e,n){if(B.isString(t))try{return(e||JSON.parse)(t),B.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Ki={transitional:dv,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,o=B.isObject(e);if(o&&B.isHTMLForm(e)&&(e=new FormData(e)),B.isFormData(e))return s?JSON.stringify(hv(e)):e;if(B.isArrayBuffer(e)||B.isBuffer(e)||B.isStream(e)||B.isFile(e)||B.isBlob(e)||B.isReadableStream(e))return e;if(B.isArrayBufferView(e))return e.buffer;if(B.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return tk(e,this.formSerializer).toString();if((a=B.isFileList(e))||r.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Yl(a?{"files[]":e}:e,u&&new u,this.formSerializer)}}return o||s?(n.setContentType("application/json",!1),sk(e)):e}],transformResponse:[function(e){const n=this.transitional||Ki.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(B.isResponse(e)||B.isReadableStream(e))return e;if(e&&B.isString(e)&&(r&&!this.responseType||s)){const i=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(i)throw a.name==="SyntaxError"?Ve.from(a,Ve.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:zt.classes.FormData,Blob:zt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};B.forEach(["delete","get","head","post","put","patch"],t=>{Ki.headers[t]={}});const ok=B.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ik=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(i){s=i.indexOf(":"),n=i.substring(0,s).trim().toLowerCase(),r=i.substring(s+1).trim(),!(!n||e[n]&&ok[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},ig=Symbol("internals");function Wo(t){return t&&String(t).trim().toLowerCase()}function Ma(t){return t===!1||t==null?t:B.isArray(t)?t.map(Ma):String(t)}function ak(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const lk=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function lc(t,e,n,r,s){if(B.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!B.isString(e)){if(B.isString(r))return e.indexOf(r)!==-1;if(B.isRegExp(r))return r.test(e)}}function uk(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function ck(t,e){const n=B.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,o,i){return this[r].call(this,e,s,o,i)},configurable:!0})})}let Zt=class{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function o(a,u,c){const h=Wo(u);if(!h)throw new Error("header name must be a non-empty string");const f=B.findKey(s,h);(!f||s[f]===void 0||c===!0||c===void 0&&s[f]!==!1)&&(s[f||u]=Ma(a))}const i=(a,u)=>B.forEach(a,(c,h)=>o(c,h,u));if(B.isPlainObject(e)||e instanceof this.constructor)i(e,n);else if(B.isString(e)&&(e=e.trim())&&!lk(e))i(ik(e),n);else if(B.isObject(e)&&B.isIterable(e)){let a={},u,c;for(const h of e){if(!B.isArray(h))throw TypeError("Object iterator must return a key-value pair");a[c=h[0]]=(u=a[c])?B.isArray(u)?[...u,h[1]]:[u,h[1]]:h[1]}i(a,n)}else e!=null&&o(n,e,r);return this}get(e,n){if(e=Wo(e),e){const r=B.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return ak(s);if(B.isFunction(n))return n.call(this,s,r);if(B.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Wo(e),e){const r=B.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||lc(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function o(i){if(i=Wo(i),i){const a=B.findKey(r,i);a&&(!n||lc(r,r[a],a,n))&&(delete r[a],s=!0)}}return B.isArray(e)?e.forEach(o):o(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const o=n[r];(!e||lc(this,this[o],o,e,!0))&&(delete this[o],s=!0)}return s}normalize(e){const n=this,r={};return B.forEach(this,(s,o)=>{const i=B.findKey(r,o);if(i){n[i]=Ma(s),delete n[o];return}const a=e?uk(o):String(o).trim();a!==o&&delete n[o],n[a]=Ma(s),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return B.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&B.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[ig]=this[ig]={accessors:{}}).accessors,s=this.prototype;function o(i){const a=Wo(i);r[a]||(ck(s,i),r[a]=!0)}return B.isArray(e)?e.forEach(o):o(e),this}};Zt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);B.reduceDescriptors(Zt.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});B.freezeMethods(Zt);function uc(t,e){const n=this||Ki,r=e||n,s=Zt.from(r.headers);let o=r.data;return B.forEach(t,function(a){o=a.call(n,o,s.normalize(),e?e.status:void 0)}),s.normalize(),o}function fv(t){return!!(t&&t.__CANCEL__)}function wo(t,e,n){Ve.call(this,t??"canceled",Ve.ERR_CANCELED,e,n),this.name="CanceledError"}B.inherits(wo,Ve,{__CANCEL__:!0});function pv(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Ve("Request failed with status code "+n.status,[Ve.ERR_BAD_REQUEST,Ve.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function dk(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function hk(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,o=0,i;return e=e!==void 0?e:1e3,function(u){const c=Date.now(),h=r[o];i||(i=c),n[s]=u,r[s]=c;let f=o,g=0;for(;f!==s;)g+=n[f++],f=f%t;if(s=(s+1)%t,s===o&&(o=(o+1)%t),c-i<e)return;const m=h&&c-h;return m?Math.round(g*1e3/m):void 0}}function fk(t,e){let n=0,r=1e3/e,s,o;const i=(c,h=Date.now())=>{n=h,s=null,o&&(clearTimeout(o),o=null),t.apply(null,c)};return[(...c)=>{const h=Date.now(),f=h-n;f>=r?i(c,h):(s=c,o||(o=setTimeout(()=>{o=null,i(s)},r-f)))},()=>s&&i(s)]}const al=(t,e,n=3)=>{let r=0;const s=hk(50,250);return fk(o=>{const i=o.loaded,a=o.lengthComputable?o.total:void 0,u=i-r,c=s(u),h=i<=a;r=i;const f={loaded:i,total:a,progress:a?i/a:void 0,bytes:u,rate:c||void 0,estimated:c&&a&&h?(a-i)/c:void 0,event:o,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(f)},n)},ag=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},lg=t=>(...e)=>B.asap(()=>t(...e)),pk=zt.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,zt.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(zt.origin),zt.navigator&&/(msie|trident)/i.test(zt.navigator.userAgent)):()=>!0,gk=zt.hasStandardBrowserEnv?{write(t,e,n,r,s,o){const i=[t+"="+encodeURIComponent(e)];B.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),B.isString(r)&&i.push("path="+r),B.isString(s)&&i.push("domain="+s),o===!0&&i.push("secure"),document.cookie=i.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function mk(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function yk(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function gv(t,e,n){let r=!mk(e);return t&&(r||n==!1)?yk(t,e):e}const ug=t=>t instanceof Zt?{...t}:t;function _s(t,e){e=e||{};const n={};function r(c,h,f,g){return B.isPlainObject(c)&&B.isPlainObject(h)?B.merge.call({caseless:g},c,h):B.isPlainObject(h)?B.merge({},h):B.isArray(h)?h.slice():h}function s(c,h,f,g){if(B.isUndefined(h)){if(!B.isUndefined(c))return r(void 0,c,f,g)}else return r(c,h,f,g)}function o(c,h){if(!B.isUndefined(h))return r(void 0,h)}function i(c,h){if(B.isUndefined(h)){if(!B.isUndefined(c))return r(void 0,c)}else return r(void 0,h)}function a(c,h,f){if(f in e)return r(c,h);if(f in t)return r(void 0,c)}const u={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:a,headers:(c,h,f)=>s(ug(c),ug(h),f,!0)};return B.forEach(Object.keys(Object.assign({},t,e)),function(h){const f=u[h]||s,g=f(t[h],e[h],h);B.isUndefined(g)&&f!==a||(n[h]=g)}),n}const mv=t=>{const e=_s({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:o,headers:i,auth:a}=e;e.headers=i=Zt.from(i),e.url=cv(gv(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&i.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let u;if(B.isFormData(n)){if(zt.hasStandardBrowserEnv||zt.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((u=i.getContentType())!==!1){const[c,...h]=u?u.split(";").map(f=>f.trim()).filter(Boolean):[];i.setContentType([c||"multipart/form-data",...h].join("; "))}}if(zt.hasStandardBrowserEnv&&(r&&B.isFunction(r)&&(r=r(e)),r||r!==!1&&pk(e.url))){const c=s&&o&&gk.read(o);c&&i.set(s,c)}return e},vk=typeof XMLHttpRequest<"u",_k=vk&&function(t){return new Promise(function(n,r){const s=mv(t);let o=s.data;const i=Zt.from(s.headers).normalize();let{responseType:a,onUploadProgress:u,onDownloadProgress:c}=s,h,f,g,m,_;function T(){m&&m(),_&&_(),s.cancelToken&&s.cancelToken.unsubscribe(h),s.signal&&s.signal.removeEventListener("abort",h)}let x=new XMLHttpRequest;x.open(s.method.toUpperCase(),s.url,!0),x.timeout=s.timeout;function C(){if(!x)return;const V=Zt.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),U={data:!a||a==="text"||a==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:V,config:t,request:x};pv(function(k){n(k),T()},function(k){r(k),T()},U),x=null}"onloadend"in x?x.onloadend=C:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(C)},x.onabort=function(){x&&(r(new Ve("Request aborted",Ve.ECONNABORTED,t,x)),x=null)},x.onerror=function(){r(new Ve("Network Error",Ve.ERR_NETWORK,t,x)),x=null},x.ontimeout=function(){let j=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const U=s.transitional||dv;s.timeoutErrorMessage&&(j=s.timeoutErrorMessage),r(new Ve(j,U.clarifyTimeoutError?Ve.ETIMEDOUT:Ve.ECONNABORTED,t,x)),x=null},o===void 0&&i.setContentType(null),"setRequestHeader"in x&&B.forEach(i.toJSON(),function(j,U){x.setRequestHeader(U,j)}),B.isUndefined(s.withCredentials)||(x.withCredentials=!!s.withCredentials),a&&a!=="json"&&(x.responseType=s.responseType),c&&([g,_]=al(c,!0),x.addEventListener("progress",g)),u&&x.upload&&([f,m]=al(u),x.upload.addEventListener("progress",f),x.upload.addEventListener("loadend",m)),(s.cancelToken||s.signal)&&(h=V=>{x&&(r(!V||V.type?new wo(null,t,x):V),x.abort(),x=null)},s.cancelToken&&s.cancelToken.subscribe(h),s.signal&&(s.signal.aborted?h():s.signal.addEventListener("abort",h)));const P=dk(s.url);if(P&&zt.protocols.indexOf(P)===-1){r(new Ve("Unsupported protocol "+P+":",Ve.ERR_BAD_REQUEST,t));return}x.send(o||null)})},bk=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,s;const o=function(c){if(!s){s=!0,a();const h=c instanceof Error?c:this.reason;r.abort(h instanceof Ve?h:new wo(h instanceof Error?h.message:h))}};let i=e&&setTimeout(()=>{i=null,o(new Ve(`timeout ${e} of ms exceeded`,Ve.ETIMEDOUT))},e);const a=()=>{t&&(i&&clearTimeout(i),i=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(o):c.removeEventListener("abort",o)}),t=null)};t.forEach(c=>c.addEventListener("abort",o));const{signal:u}=r;return u.unsubscribe=()=>B.asap(a),u}},wk=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,s;for(;r<n;)s=r+e,yield t.slice(r,s),r=s},xk=async function*(t,e){for await(const n of Ek(t))yield*wk(n,e)},Ek=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},cg=(t,e,n,r)=>{const s=xk(t,e);let o=0,i,a=u=>{i||(i=!0,r&&r(u))};return new ReadableStream({async pull(u){try{const{done:c,value:h}=await s.next();if(c){a(),u.close();return}let f=h.byteLength;if(n){let g=o+=f;n(g)}u.enqueue(new Uint8Array(h))}catch(c){throw a(c),c}},cancel(u){return a(u),s.return()}},{highWaterMark:2})},Xl=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",yv=Xl&&typeof ReadableStream=="function",Tk=Xl&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),vv=(t,...e)=>{try{return!!t(...e)}catch{return!1}},Ik=yv&&vv(()=>{let t=!1;const e=new Request(zt.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),dg=64*1024,Jc=yv&&vv(()=>B.isReadableStream(new Response("").body)),ll={stream:Jc&&(t=>t.body)};Xl&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!ll[e]&&(ll[e]=B.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new Ve(`Response type '${e}' is not supported`,Ve.ERR_NOT_SUPPORT,r)})})})(new Response);const kk=async t=>{if(t==null)return 0;if(B.isBlob(t))return t.size;if(B.isSpecCompliantForm(t))return(await new Request(zt.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(B.isArrayBufferView(t)||B.isArrayBuffer(t))return t.byteLength;if(B.isURLSearchParams(t)&&(t=t+""),B.isString(t))return(await Tk(t)).byteLength},Ak=async(t,e)=>{const n=B.toFiniteNumber(t.getContentLength());return n??kk(e)},Sk=Xl&&(async t=>{let{url:e,method:n,data:r,signal:s,cancelToken:o,timeout:i,onDownloadProgress:a,onUploadProgress:u,responseType:c,headers:h,withCredentials:f="same-origin",fetchOptions:g}=mv(t);c=c?(c+"").toLowerCase():"text";let m=bk([s,o&&o.toAbortSignal()],i),_;const T=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let x;try{if(u&&Ik&&n!=="get"&&n!=="head"&&(x=await Ak(h,r))!==0){let U=new Request(e,{method:"POST",body:r,duplex:"half"}),q;if(B.isFormData(r)&&(q=U.headers.get("content-type"))&&h.setContentType(q),U.body){const[k,v]=ag(x,al(lg(u)));r=cg(U.body,dg,k,v)}}B.isString(f)||(f=f?"include":"omit");const C="credentials"in Request.prototype;_=new Request(e,{...g,signal:m,method:n.toUpperCase(),headers:h.normalize().toJSON(),body:r,duplex:"half",credentials:C?f:void 0});let P=await fetch(_);const V=Jc&&(c==="stream"||c==="response");if(Jc&&(a||V&&T)){const U={};["status","statusText","headers"].forEach(b=>{U[b]=P[b]});const q=B.toFiniteNumber(P.headers.get("content-length")),[k,v]=a&&ag(q,al(lg(a),!0))||[];P=new Response(cg(P.body,dg,k,()=>{v&&v(),T&&T()}),U)}c=c||"text";let j=await ll[B.findKey(ll,c)||"text"](P,t);return!V&&T&&T(),await new Promise((U,q)=>{pv(U,q,{data:j,headers:Zt.from(P.headers),status:P.status,statusText:P.statusText,config:t,request:_})})}catch(C){throw T&&T(),C&&C.name==="TypeError"&&/Load failed|fetch/i.test(C.message)?Object.assign(new Ve("Network Error",Ve.ERR_NETWORK,t,_),{cause:C.cause||C}):Ve.from(C,C&&C.code,t,_)}}),Yc={http:zI,xhr:_k,fetch:Sk};B.forEach(Yc,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const hg=t=>`- ${t}`,Ck=t=>B.isFunction(t)||t===null||t===!1,_v={getAdapter:t=>{t=B.isArray(t)?t:[t];const{length:e}=t;let n,r;const s={};for(let o=0;o<e;o++){n=t[o];let i;if(r=n,!Ck(n)&&(r=Yc[(i=String(n)).toLowerCase()],r===void 0))throw new Ve(`Unknown adapter '${i}'`);if(r)break;s[i||"#"+o]=r}if(!r){const o=Object.entries(s).map(([a,u])=>`adapter ${a} `+(u===!1?"is not supported by the environment":"is not available in the build"));let i=e?o.length>1?`since :
`+o.map(hg).join(`
`):" "+hg(o[0]):"as no adapter specified";throw new Ve("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return r},adapters:Yc};function cc(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new wo(null,t)}function fg(t){return cc(t),t.headers=Zt.from(t.headers),t.data=uc.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),_v.getAdapter(t.adapter||Ki.adapter)(t).then(function(r){return cc(t),r.data=uc.call(t,t.transformResponse,r),r.headers=Zt.from(r.headers),r},function(r){return fv(r)||(cc(t),r&&r.response&&(r.response.data=uc.call(t,t.transformResponse,r.response),r.response.headers=Zt.from(r.response.headers))),Promise.reject(r)})}const bv="1.9.0",Zl={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Zl[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const pg={};Zl.transitional=function(e,n,r){function s(o,i){return"[Axios v"+bv+"] Transitional option '"+o+"'"+i+(r?". "+r:"")}return(o,i,a)=>{if(e===!1)throw new Ve(s(i," has been removed"+(n?" in "+n:"")),Ve.ERR_DEPRECATED);return n&&!pg[i]&&(pg[i]=!0,console.warn(s(i," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(o,i,a):!0}};Zl.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function Rk(t,e,n){if(typeof t!="object")throw new Ve("options must be an object",Ve.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const o=r[s],i=e[o];if(i){const a=t[o],u=a===void 0||i(a,o,t);if(u!==!0)throw new Ve("option "+o+" must be "+u,Ve.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Ve("Unknown option "+o,Ve.ERR_BAD_OPTION)}}const $a={assertOptions:Rk,validators:Zl},On=$a.validators;let gs=class{constructor(e){this.defaults=e||{},this.interceptors={request:new og,response:new og}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const o=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=_s(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:o}=n;r!==void 0&&$a.assertOptions(r,{silentJSONParsing:On.transitional(On.boolean),forcedJSONParsing:On.transitional(On.boolean),clarifyTimeoutError:On.transitional(On.boolean)},!1),s!=null&&(B.isFunction(s)?n.paramsSerializer={serialize:s}:$a.assertOptions(s,{encode:On.function,serialize:On.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),$a.assertOptions(n,{baseUrl:On.spelling("baseURL"),withXsrfToken:On.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=o&&B.merge(o.common,o[n.method]);o&&B.forEach(["delete","get","head","post","put","patch","common"],_=>{delete o[_]}),n.headers=Zt.concat(i,o);const a=[];let u=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(n)===!1||(u=u&&T.synchronous,a.unshift(T.fulfilled,T.rejected))});const c=[];this.interceptors.response.forEach(function(T){c.push(T.fulfilled,T.rejected)});let h,f=0,g;if(!u){const _=[fg.bind(this),void 0];for(_.unshift.apply(_,a),_.push.apply(_,c),g=_.length,h=Promise.resolve(n);f<g;)h=h.then(_[f++],_[f++]);return h}g=a.length;let m=n;for(f=0;f<g;){const _=a[f++],T=a[f++];try{m=_(m)}catch(x){T.call(this,x);break}}try{h=fg.call(this,m)}catch(_){return Promise.reject(_)}for(f=0,g=c.length;f<g;)h=h.then(c[f++],c[f++]);return h}getUri(e){e=_s(this.defaults,e);const n=gv(e.baseURL,e.url,e.allowAbsoluteUrls);return cv(n,e.params,e.paramsSerializer)}};B.forEach(["delete","get","head","options"],function(e){gs.prototype[e]=function(n,r){return this.request(_s(r||{},{method:e,url:n,data:(r||{}).data}))}});B.forEach(["post","put","patch"],function(e){function n(r){return function(o,i,a){return this.request(_s(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:i}))}}gs.prototype[e]=n(),gs.prototype[e+"Form"]=n(!0)});let Pk=class wv{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(s=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](s);r._listeners=null}),this.promise.then=s=>{let o;const i=new Promise(a=>{r.subscribe(a),o=a}).then(s);return i.cancel=function(){r.unsubscribe(o)},i},e(function(o,i,a){r.reason||(r.reason=new wo(o,i,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new wv(function(s){e=s}),cancel:e}}};function Ok(t){return function(n){return t.apply(null,n)}}function Nk(t){return B.isObject(t)&&t.isAxiosError===!0}const Xc={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Xc).forEach(([t,e])=>{Xc[e]=t});function xv(t){const e=new gs(t),n=Xy(gs.prototype.request,e);return B.extend(n,gs.prototype,e,{allOwnKeys:!0}),B.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return xv(_s(t,s))},n}const dt=xv(Ki);dt.Axios=gs;dt.CanceledError=wo;dt.CancelToken=Pk;dt.isCancel=fv;dt.VERSION=bv;dt.toFormData=Yl;dt.AxiosError=Ve;dt.Cancel=dt.CanceledError;dt.all=function(e){return Promise.all(e)};dt.spread=Ok;dt.isAxiosError=Nk;dt.mergeConfig=_s;dt.AxiosHeaders=Zt;dt.formToJSON=t=>hv(B.isHTMLForm(t)?new FormData(t):t);dt.getAdapter=_v.getAdapter;dt.HttpStatusCode=Xc;dt.default=dt;const{Axios:Y9,AxiosError:X9,CanceledError:Z9,isCancel:eU,CancelToken:tU,VERSION:nU,all:rU,Cancel:sU,isAxiosError:oU,spread:iU,toFormData:aU,AxiosHeaders:lU,HttpStatusCode:uU,formToJSON:cU,getAdapter:dU,mergeConfig:hU}=dt,Dk=()=>{};var gg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Vk=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],i=t[n++],a=t[n++],u=((s&7)<<18|(o&63)<<12|(i&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const o=t[n++],i=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|i&63)}}return e.join("")},Tv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const o=t[s],i=s+1<t.length,a=i?t[s+1]:0,u=s+2<t.length,c=u?t[s+2]:0,h=o>>2,f=(o&3)<<4|a>>4;let g=(a&15)<<2|c>>6,m=c&63;u||(m=64,i||(g=64)),r.push(n[h],n[f],n[g],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ev(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Vk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||a==null||c==null||f==null)throw new Mk;const g=o<<2|a>>4;if(r.push(g),c!==64){const m=a<<4&240|c>>2;if(r.push(m),f!==64){const _=c<<6&192|f;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Mk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $k=function(t){const e=Ev(t);return Tv.encodeByteArray(e,!0)},ul=function(t){return $k(t).replace(/\./g,"")},Iv=function(t){try{return Tv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk=()=>Lk().__FIREBASE_DEFAULTS__,Uk=()=>{if(typeof process>"u"||typeof gg>"u")return;const t=gg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},jk=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Iv(t[1]);return e&&JSON.parse(e)},eu=()=>{try{return Dk()||Fk()||Uk()||jk()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},kv=t=>{var e,n;return(n=(e=eu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Bk=t=>{const e=kv(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Av=()=>{var t;return(t=eu())===null||t===void 0?void 0:t.config},Sv=t=>{var e;return(e=eu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(t){return t.endsWith(".cloudworkstations.dev")}async function Cv(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qk(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ul(JSON.stringify(n)),ul(JSON.stringify(i)),""].join(".")}const ci={};function Hk(){const t={prod:[],emulator:[]};for(const e of Object.keys(ci))ci[e]?t.emulator.push(e):t.prod.push(e);return t}function Kk(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let mg=!1;function Rv(t,e){if(typeof window>"u"||typeof document>"u"||!Wi(window.location.host)||ci[t]===e||ci[t]||mg)return;ci[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",o=Hk().prod.length>0;function i(){const g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,m){g.setAttribute("width","24"),g.setAttribute("id",m),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function c(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{mg=!0,i()},g}function h(g,m){g.setAttribute("id",m),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function f(){const g=Kk(r),m=n("text"),_=document.getElementById(m)||document.createElement("span"),T=n("learnmore"),x=document.getElementById(T)||document.createElement("a"),C=n("preprendIcon"),P=document.getElementById(C)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const V=g.element;a(V),h(x,T);const j=c();u(P,C),V.append(P,_,x,j),document.body.appendChild(V)}o?(_.innerText="Preview backend disconnected.",P.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(P.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Wk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kt())}function Gk(){var t;const e=(t=eu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Qk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Jk(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Yk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Xk(){const t=Kt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Zk(){return!Gk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Pv(){try{return typeof indexedDB=="object"}catch{return!1}}function Ov(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}function eA(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA="FirebaseError";class zn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=tA,Object.setPrototypeOf(this,zn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ss.prototype.create)}}class Ss{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],i=o?nA(o,r):"Error",a=`${this.serviceName}: ${i} (${s}).`;return new zn(s,a,r)}}function nA(t,e){return t.replace(rA,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const rA=/\{\$([^}]+)}/g;function sA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function bs(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const o=t[s],i=e[s];if(yg(o)&&yg(i)){if(!bs(o,i))return!1}else if(o!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function yg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gi(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Qo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function Jo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function oA(t,e){const n=new iA(t,e);return n.subscribe.bind(n)}class iA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");aA(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=dc),s.error===void 0&&(s.error=dc),s.complete===void 0&&(s.complete=dc);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function aA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function dc(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht(t){return t&&t._delegate?t._delegate:t}class An{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new zk;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cA(e))try{this.getOrInitializeService({instanceIdentifier:as})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=as){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=as){return this.instances.has(e)}getOptions(e=as){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(o);r===a&&i.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(s,o);const i=this.instances.get(s);return i&&e(i,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:uA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=as){return this.component?this.component.multipleInstances?e:as:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function uA(t){return t===as?void 0:t}function cA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new lA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})($e||($e={}));const hA={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},fA=$e.INFO,pA={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},gA=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=pA[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Zd{constructor(e){this.name=e,this._logLevel=fA,this._logHandler=gA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}}const mA=(t,e)=>e.some(n=>t instanceof n);let vg,_g;function yA(){return vg||(vg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vA(){return _g||(_g=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Nv=new WeakMap,Zc=new WeakMap,Dv=new WeakMap,hc=new WeakMap,eh=new WeakMap;function _A(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",i)},o=()=>{n(or(t.result)),s()},i=()=>{r(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",i)});return e.then(n=>{n instanceof IDBCursor&&Nv.set(n,t)}).catch(()=>{}),eh.set(e,t),e}function bA(t){if(Zc.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",i),t.removeEventListener("abort",i)},o=()=>{n(),s()},i=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",i),t.addEventListener("abort",i)});Zc.set(t,e)}let ed={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Zc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Dv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return or(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function wA(t){ed=t(ed)}function xA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(fc(this),e,...n);return Dv.set(r,e.sort?e.sort():[e]),or(r)}:vA().includes(t)?function(...e){return t.apply(fc(this),e),or(Nv.get(this))}:function(...e){return or(t.apply(fc(this),e))}}function EA(t){return typeof t=="function"?xA(t):(t instanceof IDBTransaction&&bA(t),mA(t,yA())?new Proxy(t,ed):t)}function or(t){if(t instanceof IDBRequest)return _A(t);if(hc.has(t))return hc.get(t);const e=EA(t);return e!==t&&(hc.set(t,e),eh.set(e,t)),e}const fc=t=>eh.get(t);function tu(t,e,{blocked:n,upgrade:r,blocking:s,terminated:o}={}){const i=indexedDB.open(t,e),a=or(i);return r&&i.addEventListener("upgradeneeded",u=>{r(or(i.result),u.oldVersion,u.newVersion,or(i.transaction),u)}),n&&i.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),s&&u.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}function pc(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),or(n).then(()=>{})}const TA=["get","getKey","getAll","getAllKeys","count"],IA=["put","add","delete","clear"],gc=new Map;function bg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(gc.get(e))return gc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=IA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||TA.includes(n)))return;const o=async function(i,...a){const u=this.transaction(i,s?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&u.done]))[0]};return gc.set(e,o),o}wA(t=>({...t,get:(e,n,r)=>bg(e,n)||t.get(e,n,r),has:(e,n)=>!!bg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(AA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function AA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const td="@firebase/app",wg="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dr=new Zd("@firebase/app"),SA="@firebase/app-compat",CA="@firebase/analytics-compat",RA="@firebase/analytics",PA="@firebase/app-check-compat",OA="@firebase/app-check",NA="@firebase/auth",DA="@firebase/auth-compat",VA="@firebase/database",MA="@firebase/data-connect",$A="@firebase/database-compat",LA="@firebase/functions",FA="@firebase/functions-compat",UA="@firebase/installations",jA="@firebase/installations-compat",BA="@firebase/messaging",zA="@firebase/messaging-compat",qA="@firebase/performance",HA="@firebase/performance-compat",KA="@firebase/remote-config",WA="@firebase/remote-config-compat",GA="@firebase/storage",QA="@firebase/storage-compat",JA="@firebase/firestore",YA="@firebase/ai",XA="@firebase/firestore-compat",ZA="firebase",eS="11.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nd="[DEFAULT]",tS={[td]:"fire-core",[SA]:"fire-core-compat",[RA]:"fire-analytics",[CA]:"fire-analytics-compat",[OA]:"fire-app-check",[PA]:"fire-app-check-compat",[NA]:"fire-auth",[DA]:"fire-auth-compat",[VA]:"fire-rtdb",[MA]:"fire-data-connect",[$A]:"fire-rtdb-compat",[LA]:"fire-fn",[FA]:"fire-fn-compat",[UA]:"fire-iid",[jA]:"fire-iid-compat",[BA]:"fire-fcm",[zA]:"fire-fcm-compat",[qA]:"fire-perf",[HA]:"fire-perf-compat",[KA]:"fire-rc",[WA]:"fire-rc-compat",[GA]:"fire-gcs",[QA]:"fire-gcs-compat",[JA]:"fire-fst",[XA]:"fire-fst-compat",[YA]:"fire-vertex","fire-js":"fire-js",[ZA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cl=new Map,nS=new Map,rd=new Map;function xg(t,e){try{t.container.addComponent(e)}catch(n){dr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function jn(t){const e=t.name;if(rd.has(e))return dr.debug(`There were multiple attempts to register component ${e}.`),!1;rd.set(e,t);for(const n of cl.values())xg(n,t);for(const n of nS.values())xg(n,t);return!0}function xo(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function sn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mr=new Ss("app","Firebase",rS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new An("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Mr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo=eS;function nu(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:nd,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw Mr.create("bad-app-name",{appName:String(s)});if(n||(n=Av()),!n)throw Mr.create("no-options");const o=cl.get(s);if(o){if(bs(n,o.options)&&bs(r,o.config))return o;throw Mr.create("duplicate-app",{appName:s})}const i=new dA(s);for(const u of rd.values())i.addComponent(u);const a=new sS(n,r,i);return cl.set(s,a),a}function th(t=nd){const e=cl.get(t);if(!e&&t===nd&&Av())return nu();if(!e)throw Mr.create("no-app",{appName:t});return e}function gn(t,e,n){var r;let s=(r=tS[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),i=e.match(/\s|\//);if(o||i){const a=[`Unable to register library "${s}" with version "${e}":`];o&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),dr.warn(a.join(" "));return}jn(new An(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS="firebase-heartbeat-database",iS=1,Ai="firebase-heartbeat-store";let mc=null;function Vv(){return mc||(mc=tu(oS,iS,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ai)}catch(n){console.warn(n)}}}}).catch(t=>{throw Mr.create("idb-open",{originalErrorMessage:t.message})})),mc}async function aS(t){try{const n=(await Vv()).transaction(Ai),r=await n.objectStore(Ai).get(Mv(t));return await n.done,r}catch(e){if(e instanceof zn)dr.warn(e.message);else{const n=Mr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});dr.warn(n.message)}}}async function Eg(t,e){try{const r=(await Vv()).transaction(Ai,"readwrite");await r.objectStore(Ai).put(e,Mv(t)),await r.done}catch(n){if(n instanceof zn)dr.warn(n.message);else{const r=Mr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});dr.warn(r.message)}}}function Mv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS=1024,uS=30;class cS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new hS(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Tg();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(i=>i.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>uS){const i=fS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){dr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Tg(),{heartbeatsToSend:r,unsentEntries:s}=dS(this._heartbeatsCache.heartbeats),o=ul(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return dr.warn(n),""}}}function Tg(){return new Date().toISOString().substring(0,10)}function dS(t,e=lS){const n=[];let r=t.slice();for(const s of t){const o=n.find(i=>i.agent===s.agent);if(o){if(o.dates.push(s.date),Ig(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Ig(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class hS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Pv()?Ov().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await aS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Eg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Eg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Ig(t){return ul(JSON.stringify({version:2,heartbeats:t})).length}function fS(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(t){jn(new An("platform-logger",e=>new kA(e),"PRIVATE")),jn(new An("heartbeat",e=>new cS(e),"PRIVATE")),gn(td,wg,t),gn(td,wg,"esm2017"),gn("fire-js","")}pS("");var gS="firebase",mS="11.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gn(gS,mS,"app");const $v="@firebase/installations",nh="0.6.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv=1e4,Fv=`w:${nh}`,Uv="FIS_v2",yS="https://firebaseinstallations.googleapis.com/v1",vS=60*60*1e3,_S="installations",bS="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ws=new Ss(_S,bS,wS);function jv(t){return t instanceof zn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bv({projectId:t}){return`${yS}/projects/${t}/installations`}function zv(t){return{token:t.token,requestStatus:2,expiresIn:ES(t.expiresIn),creationTime:Date.now()}}async function qv(t,e){const r=(await e.json()).error;return ws.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Hv({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function xS(t,{refreshToken:e}){const n=Hv(t);return n.append("Authorization",TS(e)),n}async function Kv(t){const e=await t();return e.status>=500&&e.status<600?t():e}function ES(t){return Number(t.replace("s","000"))}function TS(t){return`${Uv} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IS({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=Bv(t),s=Hv(t),o=e.getImmediate({optional:!0});if(o){const c=await o.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const i={fid:n,authVersion:Uv,appId:t.appId,sdkVersion:Fv},a={method:"POST",headers:s,body:JSON.stringify(i)},u=await Kv(()=>fetch(r,a));if(u.ok){const c=await u.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:zv(c.authToken)}}else throw await qv("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wv(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS=/^[cdef][\w-]{21}$/,sd="";function SS(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=CS(t);return AS.test(n)?n:sd}catch{return sd}}function CS(t){return kS(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv=new Map;function Qv(t,e){const n=ru(t);Jv(n,e),RS(n,e)}function Jv(t,e){const n=Gv.get(t);if(n)for(const r of n)r(e)}function RS(t,e){const n=PS();n&&n.postMessage({key:t,fid:e}),OS()}let cs=null;function PS(){return!cs&&"BroadcastChannel"in self&&(cs=new BroadcastChannel("[Firebase] FID Change"),cs.onmessage=t=>{Jv(t.data.key,t.data.fid)}),cs}function OS(){Gv.size===0&&cs&&(cs.close(),cs=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS="firebase-installations-database",DS=1,xs="firebase-installations-store";let yc=null;function rh(){return yc||(yc=tu(NS,DS,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(xs)}}})),yc}async function dl(t,e){const n=ru(t),s=(await rh()).transaction(xs,"readwrite"),o=s.objectStore(xs),i=await o.get(n);return await o.put(e,n),await s.done,(!i||i.fid!==e.fid)&&Qv(t,e.fid),e}async function Yv(t){const e=ru(t),r=(await rh()).transaction(xs,"readwrite");await r.objectStore(xs).delete(e),await r.done}async function su(t,e){const n=ru(t),s=(await rh()).transaction(xs,"readwrite"),o=s.objectStore(xs),i=await o.get(n),a=e(i);return a===void 0?await o.delete(n):await o.put(a,n),await s.done,a&&(!i||i.fid!==a.fid)&&Qv(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sh(t){let e;const n=await su(t.appConfig,r=>{const s=VS(r),o=MS(t,s);return e=o.registrationPromise,o.installationEntry});return n.fid===sd?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function VS(t){const e=t||{fid:SS(),registrationStatus:0};return Xv(e)}function MS(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(ws.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=$S(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:LS(t)}:{installationEntry:e}}async function $S(t,e){try{const n=await IS(t,e);return dl(t.appConfig,n)}catch(n){throw jv(n)&&n.customData.serverCode===409?await Yv(t.appConfig):await dl(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function LS(t){let e=await kg(t.appConfig);for(;e.registrationStatus===1;)await Wv(100),e=await kg(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await sh(t);return r||n}return e}function kg(t){return su(t,e=>{if(!e)throw ws.create("installation-not-found");return Xv(e)})}function Xv(t){return FS(t)?{fid:t.fid,registrationStatus:0}:t}function FS(t){return t.registrationStatus===1&&t.registrationTime+Lv<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function US({appConfig:t,heartbeatServiceProvider:e},n){const r=jS(t,n),s=xS(t,n),o=e.getImmediate({optional:!0});if(o){const c=await o.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const i={installation:{sdkVersion:Fv,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(i)},u=await Kv(()=>fetch(r,a));if(u.ok){const c=await u.json();return zv(c)}else throw await qv("Generate Auth Token",u)}function jS(t,{fid:e}){return`${Bv(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oh(t,e=!1){let n;const r=await su(t.appConfig,o=>{if(!Zv(o))throw ws.create("not-registered");const i=o.authToken;if(!e&&qS(i))return o;if(i.requestStatus===1)return n=BS(t,e),o;{if(!navigator.onLine)throw ws.create("app-offline");const a=KS(o);return n=zS(t,a),a}});return n?await n:r.authToken}async function BS(t,e){let n=await Ag(t.appConfig);for(;n.authToken.requestStatus===1;)await Wv(100),n=await Ag(t.appConfig);const r=n.authToken;return r.requestStatus===0?oh(t,e):r}function Ag(t){return su(t,e=>{if(!Zv(e))throw ws.create("not-registered");const n=e.authToken;return WS(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function zS(t,e){try{const n=await US(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await dl(t.appConfig,r),n}catch(n){if(jv(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await Yv(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await dl(t.appConfig,r)}throw n}}function Zv(t){return t!==void 0&&t.registrationStatus===2}function qS(t){return t.requestStatus===2&&!HS(t)}function HS(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+vS}function KS(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function WS(t){return t.requestStatus===1&&t.requestTime+Lv<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GS(t){const e=t,{installationEntry:n,registrationPromise:r}=await sh(e);return r?r.catch(console.error):oh(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QS(t,e=!1){const n=t;return await JS(n),(await oh(n,e)).token}async function JS(t){const{registrationPromise:e}=await sh(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(t){if(!t||!t.options)throw vc("App Configuration");if(!t.name)throw vc("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw vc(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function vc(t){return ws.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_="installations",XS="installations-internal",ZS=t=>{const e=t.getProvider("app").getImmediate(),n=YS(e),r=xo(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},eC=t=>{const e=t.getProvider("app").getImmediate(),n=xo(e,e_).getImmediate();return{getId:()=>GS(n),getToken:s=>QS(n,s)}};function tC(){jn(new An(e_,ZS,"PUBLIC")),jn(new An(XS,eC,"PRIVATE"))}tC();gn($v,nh);gn($v,nh,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC="/firebase-messaging-sw.js",rC="/firebase-cloud-messaging-push-scope",t_="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",sC="https://fcmregistrations.googleapis.com/v1",n_="google.c.a.c_id",oC="google.c.a.c_l",iC="google.c.a.ts",aC="google.c.a.e",Sg=1e4;var Cg;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(Cg||(Cg={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Si;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(Si||(Si={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function lC(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),s=new Uint8Array(r.length);for(let o=0;o<r.length;++o)s[o]=r.charCodeAt(o);return s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c="fcm_token_details_db",uC=5,Rg="fcm_token_object_Store";async function cC(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(o=>o.name).includes(_c))return null;let e=null;return(await tu(_c,uC,{upgrade:async(r,s,o,i)=>{var a;if(s<2||!r.objectStoreNames.contains(Rg))return;const u=i.objectStore(Rg),c=await u.index("fcmSenderId").get(t);if(await u.clear(),!!c){if(s===2){const h=c;if(!h.auth||!h.p256dh||!h.endpoint)return;e={token:h.fcmToken,createTime:(a=h.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:h.auth,p256dh:h.p256dh,endpoint:h.endpoint,swScope:h.swScope,vapidKey:typeof h.vapidKey=="string"?h.vapidKey:Jn(h.vapidKey)}}}else if(s===3){const h=c;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:Jn(h.auth),p256dh:Jn(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:Jn(h.vapidKey)}}}else if(s===4){const h=c;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:Jn(h.auth),p256dh:Jn(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:Jn(h.vapidKey)}}}}}})).close(),await pc(_c),await pc("fcm_vapid_details_db"),await pc("undefined"),dC(e)?e:null}function dC(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC="firebase-messaging-database",fC=1,Ci="firebase-messaging-store";let bc=null;function r_(){return bc||(bc=tu(hC,fC,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ci)}}})),bc}async function pC(t){const e=s_(t),r=await(await r_()).transaction(Ci).objectStore(Ci).get(e);if(r)return r;{const s=await cC(t.appConfig.senderId);if(s)return await ih(t,s),s}}async function ih(t,e){const n=s_(t),s=(await r_()).transaction(Ci,"readwrite");return await s.objectStore(Ci).put(e,n),await s.done,e}function s_({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Ht=new Ss("messaging","Messaging",gC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mC(t,e){const n=await lh(t),r=o_(e),s={method:"POST",headers:n,body:JSON.stringify(r)};let o;try{o=await(await fetch(ah(t.appConfig),s)).json()}catch(i){throw Ht.create("token-subscribe-failed",{errorInfo:i==null?void 0:i.toString()})}if(o.error){const i=o.error.message;throw Ht.create("token-subscribe-failed",{errorInfo:i})}if(!o.token)throw Ht.create("token-subscribe-no-token");return o.token}async function yC(t,e){const n=await lh(t),r=o_(e.subscriptionOptions),s={method:"PATCH",headers:n,body:JSON.stringify(r)};let o;try{o=await(await fetch(`${ah(t.appConfig)}/${e.token}`,s)).json()}catch(i){throw Ht.create("token-update-failed",{errorInfo:i==null?void 0:i.toString()})}if(o.error){const i=o.error.message;throw Ht.create("token-update-failed",{errorInfo:i})}if(!o.token)throw Ht.create("token-update-no-token");return o.token}async function vC(t,e){const r={method:"DELETE",headers:await lh(t)};try{const o=await(await fetch(`${ah(t.appConfig)}/${e}`,r)).json();if(o.error){const i=o.error.message;throw Ht.create("token-unsubscribe-failed",{errorInfo:i})}}catch(s){throw Ht.create("token-unsubscribe-failed",{errorInfo:s==null?void 0:s.toString()})}}function ah({projectId:t}){return`${sC}/projects/${t}/registrations`}async function lh({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function o_({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const s={web:{endpoint:n,auth:e,p256dh:t}};return r!==t_&&(s.web.applicationPubKey=r),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C=7*24*60*60*1e3;async function bC(t){const e=await xC(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Jn(e.getKey("auth")),p256dh:Jn(e.getKey("p256dh"))},r=await pC(t.firebaseDependencies);if(r){if(EC(r.subscriptionOptions,n))return Date.now()>=r.createTime+_C?wC(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await vC(t.firebaseDependencies,r.token)}catch(s){console.warn(s)}return Pg(t.firebaseDependencies,n)}else return Pg(t.firebaseDependencies,n)}async function wC(t,e){try{const n=await yC(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await ih(t.firebaseDependencies,r),n}catch(n){throw n}}async function Pg(t,e){const r={token:await mC(t,e),createTime:Date.now(),subscriptionOptions:e};return await ih(t,r),r.token}async function xC(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:lC(e)})}function EC(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,s=e.auth===t.auth,o=e.p256dh===t.p256dh;return n&&r&&s&&o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return TC(e,t),IC(e,t),kC(e,t),e}function TC(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const s=e.notification.image;s&&(t.notification.image=s);const o=e.notification.icon;o&&(t.notification.icon=o)}function IC(t,e){e.data&&(t.data=e.data)}function kC(t,e){var n,r,s,o,i;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const a=(s=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&s!==void 0?s:(o=e.notification)===null||o===void 0?void 0:o.click_action;a&&(t.fcmOptions.link=a);const u=(i=e.fcmOptions)===null||i===void 0?void 0:i.analytics_label;u&&(t.fcmOptions.analyticsLabel=u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AC(t){return typeof t=="object"&&!!t&&n_ in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SC(t){if(!t||!t.options)throw wc("App Configuration Object");if(!t.name)throw wc("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw wc(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function wc(t){return Ht.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const s=SC(e);this.firebaseDependencies={app:e,appConfig:s,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RC(t){try{t.swRegistration=await navigator.serviceWorker.register(nC,{scope:rC}),t.swRegistration.update().catch(()=>{}),await PC(t.swRegistration)}catch(e){throw Ht.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}async function PC(t){return new Promise((e,n)=>{const r=setTimeout(()=>n(new Error(`Service worker not registered after ${Sg} ms`)),Sg),s=t.installing||t.waiting;t.active?(clearTimeout(r),e()):s?s.onstatechange=o=>{var i;((i=o.target)===null||i===void 0?void 0:i.state)==="activated"&&(s.onstatechange=null,clearTimeout(r),e())}:(clearTimeout(r),n(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OC(t,e){if(!e&&!t.swRegistration&&await RC(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Ht.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NC(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=t_)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i_(t,e){if(!navigator)throw Ht.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw Ht.create("permission-blocked");return await NC(t,e==null?void 0:e.vapidKey),await OC(t,e==null?void 0:e.serviceWorkerRegistration),bC(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DC(t,e,n){const r=VC(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[n_],message_name:n[oC],message_time:n[iC],message_device_time:Math.floor(Date.now()/1e3)})}function VC(t){switch(t){case Si.NOTIFICATION_CLICKED:return"notification_open";case Si.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MC(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Si.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(Og(n)):t.onMessageHandler.next(Og(n)));const r=n.data;AC(r)&&r[aC]==="1"&&await DC(t,n.messageType,r)}const Ng="@firebase/messaging",Dg="0.12.21";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C=t=>{const e=new CC(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>MC(e,n)),e},LC=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>i_(e,r)}};function FC(){jn(new An("messaging",$C,"PUBLIC")),jn(new An("messaging-internal",LC,"PRIVATE")),gn(Ng,Dg),gn(Ng,Dg,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a_(){try{await Ov()}catch{return!1}return typeof window<"u"&&Pv()&&eA()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UC(t,e){if(!navigator)throw Ht.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(t=th()){return a_().then(e=>{if(!e)throw Ht.create("unsupported-browser")},e=>{throw Ht.create("indexed-db-unsupported")}),xo(ht(t),"messaging").getImmediate()}async function BC(t,e){return t=ht(t),i_(t,e)}function zC(t,e){return t=ht(t),UC(t,e)}FC();function uh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function l_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const qC=l_,u_=new Ss("auth","Firebase",l_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl=new Zd("@firebase/auth");function HC(t,...e){hl.logLevel<=$e.WARN&&hl.warn(`Auth (${Eo}): ${t}`,...e)}function La(t,...e){hl.logLevel<=$e.ERROR&&hl.error(`Auth (${Eo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(t,...e){throw dh(t,...e)}function En(t,...e){return dh(t,...e)}function ch(t,e,n){const r=Object.assign(Object.assign({},qC()),{[e]:n});return new Ss("auth","Firebase",r).create(e,{appName:t.name})}function ir(t){return ch(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function KC(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&yn(t,"argument-error"),ch(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function dh(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return u_.create(t,...e)}function Te(t,e,...n){if(!t)throw dh(e,...n)}function nr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw La(e),new Error(e)}function hr(t,e){t||nr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function od(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function WC(){return Vg()==="http:"||Vg()==="https:"}function Vg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(WC()||Jk()||"connection"in navigator)?navigator.onLine:!0}function QC(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e,n){this.shortDelay=e,this.longDelay=n,hr(n>e,"Short delay should be less than long delay!"),this.isMobile=Wk()||Yk()}get(){return GC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hh(t,e){hr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;nr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;nr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;nr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],XC=new Qi(3e4,6e4);function Gr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Qr(t,e,n,r,s={}){return d_(t,s,async()=>{let o={},i={};r&&(e==="GET"?i=r:o={body:JSON.stringify(r)});const a=Gi(Object.assign({key:t.config.apiKey},i)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},o);return Qk()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&Wi(t.emulatorConfig.host)&&(c.credentials="include"),c_.fetch()(await h_(t,t.config.apiHost,n,a),c)})}async function d_(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},JC),e);try{const s=new e2(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const i=await o.json();if("needConfirmation"in i)throw Ea(t,"account-exists-with-different-credential",i);if(o.ok&&!("errorMessage"in i))return i;{const a=o.ok?i.errorMessage:i.error.message,[u,c]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ea(t,"credential-already-in-use",i);if(u==="EMAIL_EXISTS")throw Ea(t,"email-already-in-use",i);if(u==="USER_DISABLED")throw Ea(t,"user-disabled",i);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw ch(t,h,c);yn(t,h)}}catch(s){if(s instanceof zn)throw s;yn(t,"network-request-failed",{message:String(s)})}}async function Ji(t,e,n,r,s={}){const o=await Qr(t,e,n,r,s);return"mfaPendingCredential"in o&&yn(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function h_(t,e,n,r){const s=`${e}${n}?${r}`,o=t,i=o.config.emulator?hh(t.config,s):`${t.config.apiScheme}://${s}`;return YC.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(i).toString():i}function ZC(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class e2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(En(this.auth,"network-request-failed")),XC.get())})}}function Ea(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=En(t,e,r);return s.customData._tokenResponse=n,s}function Mg(t){return t!==void 0&&t.enterprise!==void 0}class t2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return ZC(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function n2(t,e){return Qr(t,"GET","/v2/recaptchaConfig",Gr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r2(t,e){return Qr(t,"POST","/v1/accounts:delete",e)}async function fl(t,e){return Qr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function s2(t,e=!1){const n=ht(t),r=await n.getIdToken(e),s=fh(r);Te(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,i=o==null?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:di(xc(s.auth_time)),issuedAtTime:di(xc(s.iat)),expirationTime:di(xc(s.exp)),signInProvider:i||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function xc(t){return Number(t)*1e3}function fh(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return La("JWT malformed, contained fewer than 3 sections"),null;try{const s=Iv(n);return s?JSON.parse(s):(La("Failed to decode base64 JWT payload"),null)}catch(s){return La("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function $g(t){const e=fh(t);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ri(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof zn&&o2(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function o2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=di(this.lastLoginAt),this.creationTime=di(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pl(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Ri(t,fl(n,{idToken:r}));Te(s==null?void 0:s.users.length,n,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const i=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?f_(o.providerUserInfo):[],a=l2(t.providerData,i),u=t.isAnonymous,c=!(t.email&&o.passwordHash)&&!(a!=null&&a.length),h=u?c:!1,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new id(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function a2(t){const e=ht(t);await pl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function l2(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function f_(t){return t.map(e=>{var{providerId:n}=e,r=uh(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u2(t,e){const n=await d_(t,{},async()=>{const r=Gi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,i=await h_(t,s,"/v1/token",`key=${o}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",c_.fetch()(i,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function c2(t,e){return Qr(t,"POST","/v2/accounts:revokeToken",Gr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$g(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const n=$g(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:o}=await u2(e,n);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:o}=n,i=new Ys;return r&&(Te(typeof r=="string","internal-error",{appName:e}),i.refreshToken=r),s&&(Te(typeof s=="string","internal-error",{appName:e}),i.accessToken=s),o&&(Te(typeof o=="number","internal-error",{appName:e}),i.expirationTime=o),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ys,this.toJSON())}_performRefresh(){return nr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(t,e){Te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class _n{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,o=uh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new i2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new id(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Ri(this,this.stsTokenManager.getToken(this.auth,e));return Te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return s2(this,e)}reload(){return a2(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new _n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await pl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(sn(this.auth.app))return Promise.reject(ir(this.auth));const e=await this.getIdToken();return await Ri(this,r2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,o,i,a,u,c,h;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,m=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,_=(i=n.photoURL)!==null&&i!==void 0?i:void 0,T=(a=n.tenantId)!==null&&a!==void 0?a:void 0,x=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,C=(c=n.createdAt)!==null&&c!==void 0?c:void 0,P=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:V,emailVerified:j,isAnonymous:U,providerData:q,stsTokenManager:k}=n;Te(V&&k,e,"internal-error");const v=Ys.fromJSON(this.name,k);Te(typeof V=="string",e,"internal-error"),Er(f,e.name),Er(g,e.name),Te(typeof j=="boolean",e,"internal-error"),Te(typeof U=="boolean",e,"internal-error"),Er(m,e.name),Er(_,e.name),Er(T,e.name),Er(x,e.name),Er(C,e.name),Er(P,e.name);const b=new _n({uid:V,auth:e,email:g,emailVerified:j,displayName:f,isAnonymous:U,photoURL:_,phoneNumber:m,tenantId:T,stsTokenManager:v,createdAt:C,lastLoginAt:P});return q&&Array.isArray(q)&&(b.providerData=q.map(S=>Object.assign({},S))),x&&(b._redirectEventId=x),b}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ys;s.updateFromServerResponse(n);const o=new _n({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await pl(o),o}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Te(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?f_(s.providerUserInfo):[],i=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),a=new Ys;a.updateFromIdToken(r);const u=new _n({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:i}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new id(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lg=new Map;function rr(t){hr(t instanceof Function,"Expected a class definition");let e=Lg.get(t);return e?(hr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Lg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}p_.type="NONE";const Fg=p_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fa(t,e,n){return`firebase:${t}:${e}:${n}`}class Xs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=Fa(this.userKey,s.apiKey,o),this.fullPersistenceKey=Fa("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await fl(this.auth,{idToken:e}).catch(()=>{});return n?_n._fromGetAccountInfoResponse(this.auth,n,e):null}return _n._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Xs(rr(Fg),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let o=s[0]||rr(Fg);const i=Fa(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(i);if(h){let f;if(typeof h=="string"){const g=await fl(e,{idToken:h}).catch(()=>{});if(!g)break;f=await _n._fromGetAccountInfoResponse(e,g,h)}else f=_n._fromJSON(e,h);c!==o&&(a=f),o=c;break}}catch{}const u=s.filter(c=>c._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new Xs(o,e,r):(o=u[0],a&&await o._set(i,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==o)try{await c._remove(i)}catch{}})),new Xs(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ug(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(v_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(g_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(b_(e))return"Blackberry";if(w_(e))return"Webos";if(m_(e))return"Safari";if((e.includes("chrome/")||y_(e))&&!e.includes("edge/"))return"Chrome";if(__(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function g_(t=Kt()){return/firefox\//i.test(t)}function m_(t=Kt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function y_(t=Kt()){return/crios\//i.test(t)}function v_(t=Kt()){return/iemobile/i.test(t)}function __(t=Kt()){return/android/i.test(t)}function b_(t=Kt()){return/blackberry/i.test(t)}function w_(t=Kt()){return/webos/i.test(t)}function ph(t=Kt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function d2(t=Kt()){var e;return ph(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function h2(){return Xk()&&document.documentMode===10}function x_(t=Kt()){return ph(t)||__(t)||w_(t)||b_(t)||/windows phone/i.test(t)||v_(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(t,e=[]){let n;switch(t){case"Browser":n=Ug(Kt());break;case"Worker":n=`${Ug(Kt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Eo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((i,a)=>{try{const u=e(o);i(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p2(t,e={}){return Qr(t,"GET","/v2/passwordPolicy",Gr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2=6;class m2{constructor(e){var n,r,s,o;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=i.minPasswordLength)!==null&&n!==void 0?n:g2,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,o,i,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(i=u.containsNumericCharacter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jg(this),this.idTokenSubscription=new jg(this),this.beforeStateQueue=new f2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=u_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=rr(n)),this._initializationPromise=this.queue(async()=>{var r,s,o;if(!this._deleted&&(this.persistenceManager=await Xs.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await fl(this,{idToken:e}),r=await _n._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(sn(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!i||i===a)&&(u!=null&&u.user)&&(s=u.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await pl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=QC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(sn(this.app))return Promise.reject(ir(this));const n=e?ht(e):null;return n&&Te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return sn(this.app)?Promise.reject(ir(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return sn(this.app)?Promise.reject(ir(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(rr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await p2(this),n=new m2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ss("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await c2(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&rr(e)||this._popupRedirectResolver;Te(n,this,"argument-error"),this.redirectPersistenceManager=await Xs.create(this,[rr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(a,this,"internal-error"),a.then(()=>{i||o(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{i=!0,u()}}else{const u=e.addObserver(n);return()=>{i=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=E_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(sn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&HC(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Jr(t){return ht(t)}class jg{constructor(e){this.auth=e,this.observer=null,this.addObserver=oA(n=>this.observer=n)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ou={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function v2(t){ou=t}function T_(t){return ou.loadJS(t)}function _2(){return ou.recaptchaEnterpriseScript}function b2(){return ou.gapiScript}function w2(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class x2{constructor(){this.enterprise=new E2}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class E2{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const T2="recaptcha-enterprise",I_="NO_RECAPTCHA";class I2{constructor(e){this.type=T2,this.auth=Jr(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(i,a)=>{n2(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new t2(u);return o.tenantId==null?o._agentRecaptchaConfig=c:o._tenantRecaptchaConfigs[o.tenantId]=c,i(c.siteKey)}}).catch(u=>{a(u)})})}function s(o,i,a){const u=window.grecaptcha;Mg(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(c=>{i(c)}).catch(()=>{i(I_)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new x2().execute("siteKey",{action:"verify"}):new Promise((o,i)=>{r(this.auth).then(a=>{if(!n&&Mg(window.grecaptcha))s(a,o,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let u=_2();u.length!==0&&(u+=a),T_(u).then(()=>{s(a,o,i)}).catch(c=>{i(c)})}}).catch(a=>{i(a)})})}}async function Bg(t,e,n,r=!1,s=!1){const o=new I2(t);let i;if(s)i=I_;else try{i=await o.verify(n)}catch{i=await o.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const u=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:c,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function zg(t,e,n,r,s){var o;if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Bg(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await Bg(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k2(t,e){const n=xo(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(bs(o,e??{}))return s;yn(s,"already-initialized")}return n.initialize({options:e})}function A2(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(rr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function S2(t,e,n){const r=Jr(t);Te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=k_(e),{host:i,port:a}=C2(e),u=a===null?"":`:${a}`,c={url:`${o}//${i}${u}/`},h=Object.freeze({host:i,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Te(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Te(bs(c,r.config.emulator)&&bs(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Wi(i)?(Cv(`${o}//${i}${u}`),Rv("Auth",!0)):R2()}function k_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function C2(t){const e=k_(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:qg(r.substr(o.length+1))}}else{const[o,i]=r.split(":");return{host:o,port:qg(i)}}}function qg(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function R2(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return nr("not implemented")}_getIdTokenResponse(e){return nr("not implemented")}_linkToIdToken(e,n){return nr("not implemented")}_getReauthenticationResolver(e){return nr("not implemented")}}async function P2(t,e){return Qr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O2(t,e){return Ji(t,"POST","/v1/accounts:signInWithPassword",Gr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N2(t,e){return Ji(t,"POST","/v1/accounts:signInWithEmailLink",Gr(t,e))}async function D2(t,e){return Ji(t,"POST","/v1/accounts:signInWithEmailLink",Gr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi extends gh{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Pi(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Pi(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zg(e,n,"signInWithPassword",O2);case"emailLink":return N2(e,{email:this._email,oobCode:this._password});default:yn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zg(e,r,"signUpPassword",P2);case"emailLink":return D2(e,{idToken:n,email:this._email,oobCode:this._password});default:yn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zs(t,e){return Ji(t,"POST","/v1/accounts:signInWithIdp",Gr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2="http://localhost";class Es extends gh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Es(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):yn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,o=uh(n,["providerId","signInMethod"]);if(!r||!s)return null;const i=new Es(r,s);return i.idToken=o.idToken||void 0,i.accessToken=o.accessToken||void 0,i.secret=o.secret,i.nonce=o.nonce,i.pendingToken=o.pendingToken||null,i}_getIdTokenResponse(e){const n=this.buildRequest();return Zs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Zs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Zs(e,n)}buildRequest(){const e={requestUri:V2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Gi(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M2(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function $2(t){const e=Qo(Jo(t)).link,n=e?Qo(Jo(e)).deep_link_id:null,r=Qo(Jo(t)).deep_link_id;return(r?Qo(Jo(r)).link:null)||r||n||e||t}class mh{constructor(e){var n,r,s,o,i,a;const u=Qo(Jo(e)),c=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,f=M2((s=u.mode)!==null&&s!==void 0?s:null);Te(c&&h&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=h,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(i=u.lang)!==null&&i!==void 0?i:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=$2(e);try{return new mh(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(){this.providerId=To.PROVIDER_ID}static credential(e,n){return Pi._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=mh.parseLink(n);return Te(r,"argument-error"),Pi._fromEmailAndCode(e,r.code,r.tenantId)}}To.PROVIDER_ID="password";To.EMAIL_PASSWORD_SIGN_IN_METHOD="password";To.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi extends yh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr extends Yi{constructor(){super("facebook.com")}static credential(e){return Es._fromParams({providerId:Cr.PROVIDER_ID,signInMethod:Cr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cr.credentialFromTaggedObject(e)}static credentialFromError(e){return Cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Cr.credential(e.oauthAccessToken)}catch{return null}}}Cr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Cr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends Yi{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Es._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return tr.credentialFromTaggedObject(e)}static credentialFromError(e){return tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return tr.credential(n,r)}catch{return null}}}tr.GOOGLE_SIGN_IN_METHOD="google.com";tr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends Yi{constructor(){super("github.com")}static credential(e){return Es._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rr.credentialFromTaggedObject(e)}static credentialFromError(e){return Rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rr.credential(e.oauthAccessToken)}catch{return null}}}Rr.GITHUB_SIGN_IN_METHOD="github.com";Rr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr extends Yi{constructor(){super("twitter.com")}static credential(e,n){return Es._fromParams({providerId:Pr.PROVIDER_ID,signInMethod:Pr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Pr.credentialFromTaggedObject(e)}static credentialFromError(e){return Pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Pr.credential(n,r)}catch{return null}}}Pr.TWITTER_SIGN_IN_METHOD="twitter.com";Pr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const o=await _n._fromIdTokenResponse(e,r,s),i=Hg(r);return new Ts({user:o,providerId:i,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Hg(r);return new Ts({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Hg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl extends zn{constructor(e,n,r,s){var o;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,gl.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new gl(e,n,r,s)}}function A_(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?gl._fromErrorAndOperation(t,o,e,r):o})}async function L2(t,e,n=!1){const r=await Ri(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ts._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F2(t,e,n=!1){const{auth:r}=t;if(sn(r.app))return Promise.reject(ir(r));const s="reauthenticate";try{const o=await Ri(t,A_(r,s,e,t),n);Te(o.idToken,r,"internal-error");const i=fh(o.idToken);Te(i,r,"internal-error");const{sub:a}=i;return Te(t.uid===a,r,"user-mismatch"),Ts._forOperation(t,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&yn(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S_(t,e,n=!1){if(sn(t.app))return Promise.reject(ir(t));const r="signIn",s=await A_(t,r,e),o=await Ts._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(o.user),o}async function U2(t,e){return S_(Jr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j2(t,e){return Ji(t,"POST","/v1/accounts:signInWithCustomToken",Gr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ec(t,e){if(sn(t.app))return Promise.reject(ir(t));const n=Jr(t),r=await j2(n,{token:e,returnSecureToken:!0}),s=await Ts._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B2(t){const e=Jr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function z2(t,e,n){return sn(t.app)?Promise.reject(ir(t)):U2(ht(t),To.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&B2(t),r})}function q2(t,e,n,r){return ht(t).onIdTokenChanged(e,n,r)}function H2(t,e,n){return ht(t).beforeAuthStateChanged(e,n)}function K2(t){return ht(t).signOut()}const ml="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ml,"1"),this.storage.removeItem(ml),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2=1e3,G2=10;class R_ extends C_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=x_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((i,a,u)=>{this.notifyListeners(i,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const i=this.storage.getItem(r);!n&&this.localCache[r]===i||this.notifyListeners(r,i)},o=this.storage.getItem(r);h2()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,G2):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},W2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}R_.type="LOCAL";const Q2=R_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_ extends C_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}P_.type="SESSION";const O_=P_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J2(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new iu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:o}=n.data,i=this.handlersMap[s];if(!(i!=null&&i.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(i).map(async c=>c(n.origin,o)),u=await J2(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}iu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vh(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,i;return new Promise((a,u)=>{const c=vh("",20);s.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);i={messageChannel:s,onMessage(f){const g=f;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(g.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(i),s.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(){return window}function X2(t){Ln().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N_(){return typeof Ln().WorkerGlobalScope<"u"&&typeof Ln().importScripts=="function"}async function Z2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function eR(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function tR(){return N_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_="firebaseLocalStorageDb",nR=1,yl="firebaseLocalStorage",V_="fbase_key";class Xi{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function au(t,e){return t.transaction([yl],e?"readwrite":"readonly").objectStore(yl)}function rR(){const t=indexedDB.deleteDatabase(D_);return new Xi(t).toPromise()}function ad(){const t=indexedDB.open(D_,nR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(yl,{keyPath:V_})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(yl)?e(r):(r.close(),await rR(),e(await ad()))})})}async function Kg(t,e,n){const r=au(t,!0).put({[V_]:e,value:n});return new Xi(r).toPromise()}async function sR(t,e){const n=au(t,!1).get(e),r=await new Xi(n).toPromise();return r===void 0?null:r.value}function Wg(t,e){const n=au(t,!0).delete(e);return new Xi(n).toPromise()}const oR=800,iR=3;class M_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ad(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>iR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return N_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=iu._getInstance(tR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Z2(),!this.activeServiceWorker)return;this.sender=new Y2(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||eR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ad();return await Kg(e,ml,"1"),await Wg(e,ml),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Kg(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>sR(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Wg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=au(s,!1).getAll();return new Xi(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),oR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}M_.type="LOCAL";const aR=M_;new Qi(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $_(t,e){return e?rr(e):(Te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h extends gh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Zs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Zs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function lR(t){return S_(t.auth,new _h(t),t.bypassAuthState)}function uR(t){const{auth:e,user:n}=t;return Te(n,e,"internal-error"),F2(n,new _h(t),t.bypassAuthState)}async function cR(t){const{auth:e,user:n}=t;return Te(n,e,"internal-error"),L2(n,new _h(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e,n,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:o,error:i,type:a}=e;if(i){this.reject(i);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lR;case"linkViaPopup":case"linkViaRedirect":return cR;case"reauthViaPopup":case"reauthViaRedirect":return uR;default:yn(this.auth,"internal-error")}}resolve(e){hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR=new Qi(2e3,1e4);async function hR(t,e,n){if(sn(t.app))return Promise.reject(En(t,"operation-not-supported-in-this-environment"));const r=Jr(t);KC(t,e,yh);const s=$_(r,n);return new ds(r,"signInViaPopup",e,s).executeNotNull()}class ds extends L_{constructor(e,n,r,s,o){super(e,n,s,o),this.provider=r,this.authWindow=null,this.pollId=null,ds.currentPopupAction&&ds.currentPopupAction.cancel(),ds.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){hr(this.filter.length===1,"Popup operations only handle one event");const e=vh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(En(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(En(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ds.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(En(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,dR.get())};e()}}ds.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR="pendingRedirect",Ua=new Map;class pR extends L_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ua.get(this.auth._key());if(!e){try{const r=await gR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ua.set(this.auth._key(),e)}return this.bypassAuthState||Ua.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function gR(t,e){const n=vR(e),r=yR(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function mR(t,e){Ua.set(t._key(),e)}function yR(t){return rr(t._redirectPersistence)}function vR(t){return Fa(fR,t.config.apiKey,t.name)}async function _R(t,e,n=!1){if(sn(t.app))return Promise.reject(ir(t));const r=Jr(t),s=$_(r,e),i=await new pR(r,s,n).execute();return i&&!n&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,e)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR=10*60*1e3;class wR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!xR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!F_(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(En(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=bR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gg(e))}saveEventToCache(e){this.cachedEventUids.add(Gg(e)),this.lastProcessedEventTime=Date.now()}}function Gg(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function F_({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function xR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return F_(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ER(t,e={}){return Qr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,IR=/^https?/;async function kR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await ER(t);for(const n of e)try{if(AR(n))return}catch{}yn(t,"unauthorized-domain")}function AR(t){const e=od(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&i.hostname===r}if(!IR.test(n))return!1;if(TR.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=new Qi(3e4,6e4);function Qg(){const t=Ln().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function CR(t){return new Promise((e,n)=>{var r,s,o;function i(){Qg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Qg(),n(En(t,"network-request-failed"))},timeout:SR.get()})}if(!((s=(r=Ln().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=Ln().gapi)===null||o===void 0)&&o.load)i();else{const a=w2("iframefcb");return Ln()[a]=()=>{gapi.load?i():n(En(t,"network-request-failed"))},T_(`${b2()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw ja=null,e})}let ja=null;function RR(t){return ja=ja||CR(t),ja}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR=new Qi(5e3,15e3),OR="__/auth/iframe",NR="emulator/auth/iframe",DR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},VR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function MR(t){const e=t.config;Te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?hh(e,NR):`https://${t.config.authDomain}/${OR}`,r={apiKey:e.apiKey,appName:t.name,v:Eo},s=VR.get(t.config.apiHost);s&&(r.eid=s);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Gi(r).slice(1)}`}async function $R(t){const e=await RR(t),n=Ln().gapi;return Te(n,t,"internal-error"),e.open({where:document.body,url:MR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:DR,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const i=En(t,"network-request-failed"),a=Ln().setTimeout(()=>{o(i)},PR.get());function u(){Ln().clearTimeout(a),s(r)}r.ping(u).then(u,()=>{o(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},FR=500,UR=600,jR="_blank",BR="http://localhost";class Jg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zR(t,e,n,r=FR,s=UR){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),i=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},LR),{width:r.toString(),height:s.toString(),top:o,left:i}),c=Kt().toLowerCase();n&&(a=y_(c)?jR:n),g_(c)&&(e=e||BR,u.scrollbars="yes");const h=Object.entries(u).reduce((g,[m,_])=>`${g}${m}=${_},`,"");if(d2(c)&&a!=="_self")return qR(e||"",a),new Jg(null);const f=window.open(e||"",a,h);Te(f,t,"popup-blocked");try{f.focus()}catch{}return new Jg(f)}function qR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR="__/auth/handler",KR="emulator/auth/handler",WR=encodeURIComponent("fac");async function Yg(t,e,n,r,s,o){Te(t.config.authDomain,t,"auth-domain-config-required"),Te(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Eo,eventId:s};if(e instanceof yh){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",sA(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))i[h]=f}if(e instanceof Yi){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(i.scopes=h.join(","))}t.tenantId&&(i.tid=t.tenantId);const a=i;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const u=await t._getAppCheckToken(),c=u?`#${WR}=${encodeURIComponent(u)}`:"";return`${GR(t)}?${Gi(a).slice(1)}${c}`}function GR({config:t}){return t.emulator?hh(t,KR):`https://${t.authDomain}/${HR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tc="webStorageSupport";class QR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=O_,this._completeRedirectFn=_R,this._overrideRedirectResult=mR}async _openPopup(e,n,r,s){var o;hr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await Yg(e,n,r,od(),s);return zR(e,i,vh())}async _openRedirect(e,n,r,s){await this._originValidation(e);const o=await Yg(e,n,r,od(),s);return X2(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(hr(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await $R(e),r=new wR(e);return n.register("authEvent",s=>(Te(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Tc,{type:Tc},s=>{var o;const i=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[Tc];i!==void 0&&n(!!i),yn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=kR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return x_()||m_()||ph()}}const JR=QR;var Xg="@firebase/auth",Zg="1.10.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ZR(t){jn(new An("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:i,authDomain:a}=r.options;Te(i&&!i.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:i,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:E_(t)},c=new y2(r,s,o,u);return A2(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),jn(new An("auth-internal",e=>{const n=Jr(e.getProvider("auth").getImmediate());return(r=>new YR(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),gn(Xg,Zg,XR(t)),gn(Xg,Zg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eP=5*60,tP=Sv("authIdTokenMaxAge")||eP;let em=null;const nP=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>tP)return;const s=n==null?void 0:n.token;em!==s&&(em=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function bh(t=th()){const e=xo(t,"auth");if(e.isInitialized())return e.getImmediate();const n=k2(t,{popupRedirectResolver:JR,persistence:[aR,Q2,O_]}),r=Sv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const i=nP(o.toString());H2(n,i,()=>i(n.currentUser)),q2(n,a=>i(a))}}const s=kv("auth");return s&&S2(n,`http://${s}`),n}function rP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}v2({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const o=En("internal-error");o.customData=s,n(o)},r.type="text/javascript",r.charset="UTF-8",rP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ZR("Browser");var tm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $r,U_;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,v){function b(){}b.prototype=v.prototype,k.D=v.prototype,k.prototype=new b,k.prototype.constructor=k,k.C=function(S,E,A){for(var w=Array(arguments.length-2),M=2;M<arguments.length;M++)w[M-2]=arguments[M];return v.prototype[E].apply(S,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(k,v,b){b||(b=0);var S=Array(16);if(typeof v=="string")for(var E=0;16>E;++E)S[E]=v.charCodeAt(b++)|v.charCodeAt(b++)<<8|v.charCodeAt(b++)<<16|v.charCodeAt(b++)<<24;else for(E=0;16>E;++E)S[E]=v[b++]|v[b++]<<8|v[b++]<<16|v[b++]<<24;v=k.g[0],b=k.g[1],E=k.g[2];var A=k.g[3],w=v+(A^b&(E^A))+S[0]+3614090360&4294967295;v=b+(w<<7&4294967295|w>>>25),w=A+(E^v&(b^E))+S[1]+3905402710&4294967295,A=v+(w<<12&4294967295|w>>>20),w=E+(b^A&(v^b))+S[2]+606105819&4294967295,E=A+(w<<17&4294967295|w>>>15),w=b+(v^E&(A^v))+S[3]+3250441966&4294967295,b=E+(w<<22&4294967295|w>>>10),w=v+(A^b&(E^A))+S[4]+4118548399&4294967295,v=b+(w<<7&4294967295|w>>>25),w=A+(E^v&(b^E))+S[5]+1200080426&4294967295,A=v+(w<<12&4294967295|w>>>20),w=E+(b^A&(v^b))+S[6]+2821735955&4294967295,E=A+(w<<17&4294967295|w>>>15),w=b+(v^E&(A^v))+S[7]+4249261313&4294967295,b=E+(w<<22&4294967295|w>>>10),w=v+(A^b&(E^A))+S[8]+1770035416&4294967295,v=b+(w<<7&4294967295|w>>>25),w=A+(E^v&(b^E))+S[9]+2336552879&4294967295,A=v+(w<<12&4294967295|w>>>20),w=E+(b^A&(v^b))+S[10]+4294925233&4294967295,E=A+(w<<17&4294967295|w>>>15),w=b+(v^E&(A^v))+S[11]+2304563134&4294967295,b=E+(w<<22&4294967295|w>>>10),w=v+(A^b&(E^A))+S[12]+1804603682&4294967295,v=b+(w<<7&4294967295|w>>>25),w=A+(E^v&(b^E))+S[13]+4254626195&4294967295,A=v+(w<<12&4294967295|w>>>20),w=E+(b^A&(v^b))+S[14]+2792965006&4294967295,E=A+(w<<17&4294967295|w>>>15),w=b+(v^E&(A^v))+S[15]+1236535329&4294967295,b=E+(w<<22&4294967295|w>>>10),w=v+(E^A&(b^E))+S[1]+4129170786&4294967295,v=b+(w<<5&4294967295|w>>>27),w=A+(b^E&(v^b))+S[6]+3225465664&4294967295,A=v+(w<<9&4294967295|w>>>23),w=E+(v^b&(A^v))+S[11]+643717713&4294967295,E=A+(w<<14&4294967295|w>>>18),w=b+(A^v&(E^A))+S[0]+3921069994&4294967295,b=E+(w<<20&4294967295|w>>>12),w=v+(E^A&(b^E))+S[5]+3593408605&4294967295,v=b+(w<<5&4294967295|w>>>27),w=A+(b^E&(v^b))+S[10]+38016083&4294967295,A=v+(w<<9&4294967295|w>>>23),w=E+(v^b&(A^v))+S[15]+3634488961&4294967295,E=A+(w<<14&4294967295|w>>>18),w=b+(A^v&(E^A))+S[4]+3889429448&4294967295,b=E+(w<<20&4294967295|w>>>12),w=v+(E^A&(b^E))+S[9]+568446438&4294967295,v=b+(w<<5&4294967295|w>>>27),w=A+(b^E&(v^b))+S[14]+3275163606&4294967295,A=v+(w<<9&4294967295|w>>>23),w=E+(v^b&(A^v))+S[3]+4107603335&4294967295,E=A+(w<<14&4294967295|w>>>18),w=b+(A^v&(E^A))+S[8]+1163531501&4294967295,b=E+(w<<20&4294967295|w>>>12),w=v+(E^A&(b^E))+S[13]+2850285829&4294967295,v=b+(w<<5&4294967295|w>>>27),w=A+(b^E&(v^b))+S[2]+4243563512&4294967295,A=v+(w<<9&4294967295|w>>>23),w=E+(v^b&(A^v))+S[7]+1735328473&4294967295,E=A+(w<<14&4294967295|w>>>18),w=b+(A^v&(E^A))+S[12]+2368359562&4294967295,b=E+(w<<20&4294967295|w>>>12),w=v+(b^E^A)+S[5]+4294588738&4294967295,v=b+(w<<4&4294967295|w>>>28),w=A+(v^b^E)+S[8]+2272392833&4294967295,A=v+(w<<11&4294967295|w>>>21),w=E+(A^v^b)+S[11]+1839030562&4294967295,E=A+(w<<16&4294967295|w>>>16),w=b+(E^A^v)+S[14]+4259657740&4294967295,b=E+(w<<23&4294967295|w>>>9),w=v+(b^E^A)+S[1]+2763975236&4294967295,v=b+(w<<4&4294967295|w>>>28),w=A+(v^b^E)+S[4]+1272893353&4294967295,A=v+(w<<11&4294967295|w>>>21),w=E+(A^v^b)+S[7]+4139469664&4294967295,E=A+(w<<16&4294967295|w>>>16),w=b+(E^A^v)+S[10]+3200236656&4294967295,b=E+(w<<23&4294967295|w>>>9),w=v+(b^E^A)+S[13]+681279174&4294967295,v=b+(w<<4&4294967295|w>>>28),w=A+(v^b^E)+S[0]+3936430074&4294967295,A=v+(w<<11&4294967295|w>>>21),w=E+(A^v^b)+S[3]+3572445317&4294967295,E=A+(w<<16&4294967295|w>>>16),w=b+(E^A^v)+S[6]+76029189&4294967295,b=E+(w<<23&4294967295|w>>>9),w=v+(b^E^A)+S[9]+3654602809&4294967295,v=b+(w<<4&4294967295|w>>>28),w=A+(v^b^E)+S[12]+3873151461&4294967295,A=v+(w<<11&4294967295|w>>>21),w=E+(A^v^b)+S[15]+530742520&4294967295,E=A+(w<<16&4294967295|w>>>16),w=b+(E^A^v)+S[2]+3299628645&4294967295,b=E+(w<<23&4294967295|w>>>9),w=v+(E^(b|~A))+S[0]+4096336452&4294967295,v=b+(w<<6&4294967295|w>>>26),w=A+(b^(v|~E))+S[7]+1126891415&4294967295,A=v+(w<<10&4294967295|w>>>22),w=E+(v^(A|~b))+S[14]+2878612391&4294967295,E=A+(w<<15&4294967295|w>>>17),w=b+(A^(E|~v))+S[5]+4237533241&4294967295,b=E+(w<<21&4294967295|w>>>11),w=v+(E^(b|~A))+S[12]+1700485571&4294967295,v=b+(w<<6&4294967295|w>>>26),w=A+(b^(v|~E))+S[3]+2399980690&4294967295,A=v+(w<<10&4294967295|w>>>22),w=E+(v^(A|~b))+S[10]+4293915773&4294967295,E=A+(w<<15&4294967295|w>>>17),w=b+(A^(E|~v))+S[1]+2240044497&4294967295,b=E+(w<<21&4294967295|w>>>11),w=v+(E^(b|~A))+S[8]+1873313359&4294967295,v=b+(w<<6&4294967295|w>>>26),w=A+(b^(v|~E))+S[15]+4264355552&4294967295,A=v+(w<<10&4294967295|w>>>22),w=E+(v^(A|~b))+S[6]+2734768916&4294967295,E=A+(w<<15&4294967295|w>>>17),w=b+(A^(E|~v))+S[13]+1309151649&4294967295,b=E+(w<<21&4294967295|w>>>11),w=v+(E^(b|~A))+S[4]+4149444226&4294967295,v=b+(w<<6&4294967295|w>>>26),w=A+(b^(v|~E))+S[11]+3174756917&4294967295,A=v+(w<<10&4294967295|w>>>22),w=E+(v^(A|~b))+S[2]+718787259&4294967295,E=A+(w<<15&4294967295|w>>>17),w=b+(A^(E|~v))+S[9]+3951481745&4294967295,k.g[0]=k.g[0]+v&4294967295,k.g[1]=k.g[1]+(E+(w<<21&4294967295|w>>>11))&4294967295,k.g[2]=k.g[2]+E&4294967295,k.g[3]=k.g[3]+A&4294967295}r.prototype.u=function(k,v){v===void 0&&(v=k.length);for(var b=v-this.blockSize,S=this.B,E=this.h,A=0;A<v;){if(E==0)for(;A<=b;)s(this,k,A),A+=this.blockSize;if(typeof k=="string"){for(;A<v;)if(S[E++]=k.charCodeAt(A++),E==this.blockSize){s(this,S),E=0;break}}else for(;A<v;)if(S[E++]=k[A++],E==this.blockSize){s(this,S),E=0;break}}this.h=E,this.o+=v},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var v=1;v<k.length-8;++v)k[v]=0;var b=8*this.o;for(v=k.length-8;v<k.length;++v)k[v]=b&255,b/=256;for(this.u(k),k=Array(16),v=b=0;4>v;++v)for(var S=0;32>S;S+=8)k[b++]=this.g[v]>>>S&255;return k};function o(k,v){var b=a;return Object.prototype.hasOwnProperty.call(b,k)?b[k]:b[k]=v(k)}function i(k,v){this.h=v;for(var b=[],S=!0,E=k.length-1;0<=E;E--){var A=k[E]|0;S&&A==v||(b[E]=A,S=!1)}this.g=b}var a={};function u(k){return-128<=k&&128>k?o(k,function(v){return new i([v|0],0>v?-1:0)}):new i([k|0],0>k?-1:0)}function c(k){if(isNaN(k)||!isFinite(k))return f;if(0>k)return x(c(-k));for(var v=[],b=1,S=0;k>=b;S++)v[S]=k/b|0,b*=4294967296;return new i(v,0)}function h(k,v){if(k.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(k.charAt(0)=="-")return x(h(k.substring(1),v));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=c(Math.pow(v,8)),S=f,E=0;E<k.length;E+=8){var A=Math.min(8,k.length-E),w=parseInt(k.substring(E,E+A),v);8>A?(A=c(Math.pow(v,A)),S=S.j(A).add(c(w))):(S=S.j(b),S=S.add(c(w)))}return S}var f=u(0),g=u(1),m=u(16777216);t=i.prototype,t.m=function(){if(T(this))return-x(this).m();for(var k=0,v=1,b=0;b<this.g.length;b++){var S=this.i(b);k+=(0<=S?S:4294967296+S)*v,v*=4294967296}return k},t.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(_(this))return"0";if(T(this))return"-"+x(this).toString(k);for(var v=c(Math.pow(k,6)),b=this,S="";;){var E=j(b,v).g;b=C(b,E.j(v));var A=((0<b.g.length?b.g[0]:b.h)>>>0).toString(k);if(b=E,_(b))return A+S;for(;6>A.length;)A="0"+A;S=A+S}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function _(k){if(k.h!=0)return!1;for(var v=0;v<k.g.length;v++)if(k.g[v]!=0)return!1;return!0}function T(k){return k.h==-1}t.l=function(k){return k=C(this,k),T(k)?-1:_(k)?0:1};function x(k){for(var v=k.g.length,b=[],S=0;S<v;S++)b[S]=~k.g[S];return new i(b,~k.h).add(g)}t.abs=function(){return T(this)?x(this):this},t.add=function(k){for(var v=Math.max(this.g.length,k.g.length),b=[],S=0,E=0;E<=v;E++){var A=S+(this.i(E)&65535)+(k.i(E)&65535),w=(A>>>16)+(this.i(E)>>>16)+(k.i(E)>>>16);S=w>>>16,A&=65535,w&=65535,b[E]=w<<16|A}return new i(b,b[b.length-1]&-2147483648?-1:0)};function C(k,v){return k.add(x(v))}t.j=function(k){if(_(this)||_(k))return f;if(T(this))return T(k)?x(this).j(x(k)):x(x(this).j(k));if(T(k))return x(this.j(x(k)));if(0>this.l(m)&&0>k.l(m))return c(this.m()*k.m());for(var v=this.g.length+k.g.length,b=[],S=0;S<2*v;S++)b[S]=0;for(S=0;S<this.g.length;S++)for(var E=0;E<k.g.length;E++){var A=this.i(S)>>>16,w=this.i(S)&65535,M=k.i(E)>>>16,ce=k.i(E)&65535;b[2*S+2*E]+=w*ce,P(b,2*S+2*E),b[2*S+2*E+1]+=A*ce,P(b,2*S+2*E+1),b[2*S+2*E+1]+=w*M,P(b,2*S+2*E+1),b[2*S+2*E+2]+=A*M,P(b,2*S+2*E+2)}for(S=0;S<v;S++)b[S]=b[2*S+1]<<16|b[2*S];for(S=v;S<2*v;S++)b[S]=0;return new i(b,0)};function P(k,v){for(;(k[v]&65535)!=k[v];)k[v+1]+=k[v]>>>16,k[v]&=65535,v++}function V(k,v){this.g=k,this.h=v}function j(k,v){if(_(v))throw Error("division by zero");if(_(k))return new V(f,f);if(T(k))return v=j(x(k),v),new V(x(v.g),x(v.h));if(T(v))return v=j(k,x(v)),new V(x(v.g),v.h);if(30<k.g.length){if(T(k)||T(v))throw Error("slowDivide_ only works with positive integers.");for(var b=g,S=v;0>=S.l(k);)b=U(b),S=U(S);var E=q(b,1),A=q(S,1);for(S=q(S,2),b=q(b,2);!_(S);){var w=A.add(S);0>=w.l(k)&&(E=E.add(b),A=w),S=q(S,1),b=q(b,1)}return v=C(k,E.j(v)),new V(E,v)}for(E=f;0<=k.l(v);){for(b=Math.max(1,Math.floor(k.m()/v.m())),S=Math.ceil(Math.log(b)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),A=c(b),w=A.j(v);T(w)||0<w.l(k);)b-=S,A=c(b),w=A.j(v);_(A)&&(A=g),E=E.add(A),k=C(k,w)}return new V(E,k)}t.A=function(k){return j(this,k).h},t.and=function(k){for(var v=Math.max(this.g.length,k.g.length),b=[],S=0;S<v;S++)b[S]=this.i(S)&k.i(S);return new i(b,this.h&k.h)},t.or=function(k){for(var v=Math.max(this.g.length,k.g.length),b=[],S=0;S<v;S++)b[S]=this.i(S)|k.i(S);return new i(b,this.h|k.h)},t.xor=function(k){for(var v=Math.max(this.g.length,k.g.length),b=[],S=0;S<v;S++)b[S]=this.i(S)^k.i(S);return new i(b,this.h^k.h)};function U(k){for(var v=k.g.length+1,b=[],S=0;S<v;S++)b[S]=k.i(S)<<1|k.i(S-1)>>>31;return new i(b,k.h)}function q(k,v){var b=v>>5;v%=32;for(var S=k.g.length-b,E=[],A=0;A<S;A++)E[A]=0<v?k.i(A+b)>>>v|k.i(A+b+1)<<32-v:k.i(A+b);return new i(E,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,U_=r,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=c,i.fromString=h,$r=i}).apply(typeof tm<"u"?tm:typeof self<"u"?self:typeof window<"u"?window:{});var Ta=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var j_,Yo,B_,Ba,ld,z_,q_,H_;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,p,y){return l==Array.prototype||l==Object.prototype||(l[p]=y.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ta=="object"&&Ta];for(var p=0;p<l.length;++p){var y=l[p];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=n(this);function s(l,p){if(p)e:{var y=r;l=l.split(".");for(var I=0;I<l.length-1;I++){var L=l[I];if(!(L in y))break e;y=y[L]}l=l[l.length-1],I=y[l],p=p(I),p!=I&&p!=null&&e(y,l,{configurable:!0,writable:!0,value:p})}}function o(l,p){l instanceof String&&(l+="");var y=0,I=!1,L={next:function(){if(!I&&y<l.length){var z=y++;return{value:p(z,l[z]),done:!1}}return I=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}s("Array.prototype.values",function(l){return l||function(){return o(this,function(p,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},a=this||self;function u(l){var p=typeof l;return p=p!="object"?p:l?Array.isArray(l)?"array":p:"null",p=="array"||p=="object"&&typeof l.length=="number"}function c(l){var p=typeof l;return p=="object"&&l!=null||p=="function"}function h(l,p,y){return l.call.apply(l.bind,arguments)}function f(l,p,y){if(!l)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,I),l.apply(p,L)}}return function(){return l.apply(p,arguments)}}function g(l,p,y){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,g.apply(null,arguments)}function m(l,p){var y=Array.prototype.slice.call(arguments,1);return function(){var I=y.slice();return I.push.apply(I,arguments),l.apply(this,I)}}function _(l,p){function y(){}y.prototype=p.prototype,l.aa=p.prototype,l.prototype=new y,l.prototype.constructor=l,l.Qb=function(I,L,z){for(var ne=Array(arguments.length-2),We=2;We<arguments.length;We++)ne[We-2]=arguments[We];return p.prototype[L].apply(I,ne)}}function T(l){const p=l.length;if(0<p){const y=Array(p);for(let I=0;I<p;I++)y[I]=l[I];return y}return[]}function x(l,p){for(let y=1;y<arguments.length;y++){const I=arguments[y];if(u(I)){const L=l.length||0,z=I.length||0;l.length=L+z;for(let ne=0;ne<z;ne++)l[L+ne]=I[ne]}else l.push(I)}}class C{constructor(p,y){this.i=p,this.j=y,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function P(l){return/^[\s\xa0]*$/.test(l)}function V(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function j(l){return j[" "](l),l}j[" "]=function(){};var U=V().indexOf("Gecko")!=-1&&!(V().toLowerCase().indexOf("webkit")!=-1&&V().indexOf("Edge")==-1)&&!(V().indexOf("Trident")!=-1||V().indexOf("MSIE")!=-1)&&V().indexOf("Edge")==-1;function q(l,p,y){for(const I in l)p.call(y,l[I],I,l)}function k(l,p){for(const y in l)p.call(void 0,l[y],y,l)}function v(l){const p={};for(const y in l)p[y]=l[y];return p}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(l,p){let y,I;for(let L=1;L<arguments.length;L++){I=arguments[L];for(y in I)l[y]=I[y];for(let z=0;z<b.length;z++)y=b[z],Object.prototype.hasOwnProperty.call(I,y)&&(l[y]=I[y])}}function E(l){var p=1;l=l.split(":");const y=[];for(;0<p&&l.length;)y.push(l.shift()),p--;return l.length&&y.push(l.join(":")),y}function A(l){a.setTimeout(()=>{throw l},0)}function w(){var l=rt;let p=null;return l.g&&(p=l.g,l.g=l.g.next,l.g||(l.h=null),p.next=null),p}class M{constructor(){this.h=this.g=null}add(p,y){const I=ce.get();I.set(p,y),this.h?this.h.next=I:this.g=I,this.h=I}}var ce=new C(()=>new Se,l=>l.reset());class Se{constructor(){this.next=this.g=this.h=null}set(p,y){this.h=p,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let se,Ce=!1,rt=new M,Et=()=>{const l=a.Promise.resolve(void 0);se=()=>{l.then(un)}};var un=()=>{for(var l;l=w();){try{l.h.call(l.g)}catch(y){A(y)}var p=ce;p.j(l),100>p.h&&(p.h++,l.next=p.g,p.g=l)}Ce=!1};function st(){this.s=this.s,this.C=this.C}st.prototype.s=!1,st.prototype.ma=function(){this.s||(this.s=!0,this.N())},st.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ot(l,p){this.type=l,this.g=this.target=p,this.defaultPrevented=!1}ot.prototype.h=function(){this.defaultPrevented=!0};var mr=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,p=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const y=()=>{};a.addEventListener("test",y,p),a.removeEventListener("test",y,p)}catch{}return l}();function Rn(l,p){if(ot.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var y=this.type=l.type,I=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=p,p=l.relatedTarget){if(U){e:{try{j(p.nodeName);var L=!0;break e}catch{}L=!1}L||(p=null)}}else y=="mouseover"?p=l.fromElement:y=="mouseout"&&(p=l.toElement);this.relatedTarget=p,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Jt[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Rn.aa.h.call(this)}}_(Rn,ot);var Jt={2:"touch",3:"pen",4:"mouse"};Rn.prototype.h=function(){Rn.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var K="closure_listenable_"+(1e6*Math.random()|0),de=0;function ae(l,p,y,I,L){this.listener=l,this.proxy=null,this.src=p,this.type=y,this.capture=!!I,this.ha=L,this.key=++de,this.da=this.fa=!1}function pe(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Be(l){this.src=l,this.g={},this.h=0}Be.prototype.add=function(l,p,y,I,L){var z=l.toString();l=this.g[z],l||(l=this.g[z]=[],this.h++);var ne=D(l,p,I,L);return-1<ne?(p=l[ne],y||(p.fa=!1)):(p=new ae(p,this.src,z,!!I,L),p.fa=y,l.push(p)),p};function N(l,p){var y=p.type;if(y in l.g){var I=l.g[y],L=Array.prototype.indexOf.call(I,p,void 0),z;(z=0<=L)&&Array.prototype.splice.call(I,L,1),z&&(pe(p),l.g[y].length==0&&(delete l.g[y],l.h--))}}function D(l,p,y,I){for(var L=0;L<l.length;++L){var z=l[L];if(!z.da&&z.listener==p&&z.capture==!!y&&z.ha==I)return L}return-1}var $="closure_lm_"+(1e6*Math.random()|0),W={};function Y(l,p,y,I,L){if(Array.isArray(p)){for(var z=0;z<p.length;z++)Y(l,p[z],y,I,L);return null}return y=ke(y),l&&l[K]?l.K(p,y,c(I)?!!I.capture:!1,L):G(l,p,y,!1,I,L)}function G(l,p,y,I,L,z){if(!p)throw Error("Invalid event type");var ne=c(L)?!!L.capture:!!L,We=oe(l);if(We||(l[$]=We=new Be(l)),y=We.add(p,y,I,ne,z),y.proxy)return y;if(I=ie(),y.proxy=I,I.src=l,I.listener=y,l.addEventListener)mr||(L=ne),L===void 0&&(L=!1),l.addEventListener(p.toString(),I,L);else if(l.attachEvent)l.attachEvent(Z(p.toString()),I);else if(l.addListener&&l.removeListener)l.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return y}function ie(){function l(y){return p.call(l.src,l.listener,y)}const p=we;return l}function te(l,p,y,I,L){if(Array.isArray(p))for(var z=0;z<p.length;z++)te(l,p[z],y,I,L);else I=c(I)?!!I.capture:!!I,y=ke(y),l&&l[K]?(l=l.i,p=String(p).toString(),p in l.g&&(z=l.g[p],y=D(z,y,I,L),-1<y&&(pe(z[y]),Array.prototype.splice.call(z,y,1),z.length==0&&(delete l.g[p],l.h--)))):l&&(l=oe(l))&&(p=l.g[p.toString()],l=-1,p&&(l=D(p,y,I,L)),(y=-1<l?p[l]:null)&&ee(y))}function ee(l){if(typeof l!="number"&&l&&!l.da){var p=l.src;if(p&&p[K])N(p.i,l);else{var y=l.type,I=l.proxy;p.removeEventListener?p.removeEventListener(y,I,l.capture):p.detachEvent?p.detachEvent(Z(y),I):p.addListener&&p.removeListener&&p.removeListener(I),(y=oe(p))?(N(y,l),y.h==0&&(y.src=null,p[$]=null)):pe(l)}}}function Z(l){return l in W?W[l]:W[l]="on"+l}function we(l,p){if(l.da)l=!0;else{p=new Rn(p,this);var y=l.listener,I=l.ha||l.src;l.fa&&ee(l),l=y.call(I,p)}return l}function oe(l){return l=l[$],l instanceof Be?l:null}var ve="__closure_events_fn_"+(1e9*Math.random()>>>0);function ke(l){return typeof l=="function"?l:(l[ve]||(l[ve]=function(p){return l.handleEvent(p)}),l[ve])}function Ee(){st.call(this),this.i=new Be(this),this.M=this,this.F=null}_(Ee,st),Ee.prototype[K]=!0,Ee.prototype.removeEventListener=function(l,p,y,I){te(this,l,p,y,I)};function De(l,p){var y,I=l.F;if(I)for(y=[];I;I=I.F)y.push(I);if(l=l.M,I=p.type||p,typeof p=="string")p=new ot(p,l);else if(p instanceof ot)p.target=p.target||l;else{var L=p;p=new ot(I,l),S(p,L)}if(L=!0,y)for(var z=y.length-1;0<=z;z--){var ne=p.g=y[z];L=Fe(ne,I,!0,p)&&L}if(ne=p.g=l,L=Fe(ne,I,!0,p)&&L,L=Fe(ne,I,!1,p)&&L,y)for(z=0;z<y.length;z++)ne=p.g=y[z],L=Fe(ne,I,!1,p)&&L}Ee.prototype.N=function(){if(Ee.aa.N.call(this),this.i){var l=this.i,p;for(p in l.g){for(var y=l.g[p],I=0;I<y.length;I++)pe(y[I]);delete l.g[p],l.h--}}this.F=null},Ee.prototype.K=function(l,p,y,I){return this.i.add(String(l),p,!1,y,I)},Ee.prototype.L=function(l,p,y,I){return this.i.add(String(l),p,!0,y,I)};function Fe(l,p,y,I){if(p=l.i.g[String(p)],!p)return!0;p=p.concat();for(var L=!0,z=0;z<p.length;++z){var ne=p[z];if(ne&&!ne.da&&ne.capture==y){var We=ne.listener,kt=ne.ha||ne.src;ne.fa&&N(l.i,ne),L=We.call(kt,I)!==!1&&L}}return L&&!I.defaultPrevented}function Nt(l,p,y){if(typeof l=="function")y&&(l=g(l,y));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(l,p||0)}function Tt(l){l.g=Nt(()=>{l.g=null,l.i&&(l.i=!1,Tt(l))},l.l);const p=l.h;l.h=null,l.m.apply(null,p)}class cn extends st{constructor(p,y){super(),this.m=p,this.l=y,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Tt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dt(l){st.call(this),this.h=l,this.g={}}_(Dt,st);var yr=[];function Ro(l){q(l.g,function(p,y){this.g.hasOwnProperty(y)&&ee(p)},l),l.g={}}Dt.prototype.N=function(){Dt.aa.N.call(this),Ro(this)},Dt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var It=a.JSON.stringify,dn=a.JSON.parse,ra=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function Pu(){}Pu.prototype.h=null;function af(l){return l.h||(l.h=l.i())}function lf(){}var Po={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ou(){ot.call(this,"d")}_(Ou,ot);function Nu(){ot.call(this,"c")}_(Nu,ot);var Xr={},uf=null;function sa(){return uf=uf||new Ee}Xr.La="serverreachability";function cf(l){ot.call(this,Xr.La,l)}_(cf,ot);function Oo(l){const p=sa();De(p,new cf(p))}Xr.STAT_EVENT="statevent";function df(l,p){ot.call(this,Xr.STAT_EVENT,l),this.stat=p}_(df,ot);function Wt(l){const p=sa();De(p,new df(p,l))}Xr.Ma="timingevent";function hf(l,p){ot.call(this,Xr.Ma,l),this.size=p}_(hf,ot);function No(l,p){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},p)}function Do(){this.g=!0}Do.prototype.xa=function(){this.g=!1};function Ow(l,p,y,I,L,z){l.info(function(){if(l.g)if(z)for(var ne="",We=z.split("&"),kt=0;kt<We.length;kt++){var ze=We[kt].split("=");if(1<ze.length){var Vt=ze[0];ze=ze[1];var Mt=Vt.split("_");ne=2<=Mt.length&&Mt[1]=="type"?ne+(Vt+"="+ze+"&"):ne+(Vt+"=redacted&")}}else ne=null;else ne=z;return"XMLHTTP REQ ("+I+") [attempt "+L+"]: "+p+`
`+y+`
`+ne})}function Nw(l,p,y,I,L,z,ne){l.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+L+"]: "+p+`
`+y+`
`+z+" "+ne})}function Vs(l,p,y,I){l.info(function(){return"XMLHTTP TEXT ("+p+"): "+Vw(l,y)+(I?" "+I:"")})}function Dw(l,p){l.info(function(){return"TIMEOUT: "+p})}Do.prototype.info=function(){};function Vw(l,p){if(!l.g)return p;if(!p)return null;try{var y=JSON.parse(p);if(y){for(l=0;l<y.length;l++)if(Array.isArray(y[l])){var I=y[l];if(!(2>I.length)){var L=I[1];if(Array.isArray(L)&&!(1>L.length)){var z=L[0];if(z!="noop"&&z!="stop"&&z!="close")for(var ne=1;ne<L.length;ne++)L[ne]=""}}}}return It(y)}catch{return p}}var oa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ff={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Du;function ia(){}_(ia,Pu),ia.prototype.g=function(){return new XMLHttpRequest},ia.prototype.i=function(){return{}},Du=new ia;function vr(l,p,y,I){this.j=l,this.i=p,this.l=y,this.R=I||1,this.U=new Dt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pf}function pf(){this.i=null,this.g="",this.h=!1}var gf={},Vu={};function Mu(l,p,y){l.L=1,l.v=ca(qn(p)),l.m=y,l.P=!0,mf(l,null)}function mf(l,p){l.F=Date.now(),aa(l),l.A=qn(l.v);var y=l.A,I=l.R;Array.isArray(I)||(I=[String(I)]),Rf(y.i,"t",I),l.C=0,y=l.j.J,l.h=new pf,l.g=Gf(l.j,y?p:null,!l.m),0<l.O&&(l.M=new cn(g(l.Y,l,l.g),l.O)),p=l.U,y=l.g,I=l.ca;var L="readystatechange";Array.isArray(L)||(L&&(yr[0]=L.toString()),L=yr);for(var z=0;z<L.length;z++){var ne=Y(y,L[z],I||p.handleEvent,!1,p.h||p);if(!ne)break;p.g[ne.key]=ne}p=l.H?v(l.H):{},l.m?(l.u||(l.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,p)):(l.u="GET",l.g.ea(l.A,l.u,null,p)),Oo(),Ow(l.i,l.u,l.A,l.l,l.R,l.m)}vr.prototype.ca=function(l){l=l.target;const p=this.M;p&&Hn(l)==3?p.j():this.Y(l)},vr.prototype.Y=function(l){try{if(l==this.g)e:{const Mt=Hn(this.g);var p=this.g.Ba();const Ls=this.g.Z();if(!(3>Mt)&&(Mt!=3||this.g&&(this.h.h||this.g.oa()||$f(this.g)))){this.J||Mt!=4||p==7||(p==8||0>=Ls?Oo(3):Oo(2)),$u(this);var y=this.g.Z();this.X=y;t:if(yf(this)){var I=$f(this.g);l="";var L=I.length,z=Hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zr(this),Vo(this);var ne="";break t}this.h.i=new a.TextDecoder}for(p=0;p<L;p++)this.h.h=!0,l+=this.h.i.decode(I[p],{stream:!(z&&p==L-1)});I.length=0,this.h.g+=l,this.C=0,ne=this.h.g}else ne=this.g.oa();if(this.o=y==200,Nw(this.i,this.u,this.A,this.l,this.R,Mt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var We,kt=this.g;if((We=kt.g?kt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(We)){var ze=We;break t}}ze=null}if(y=ze)Vs(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Lu(this,y);else{this.o=!1,this.s=3,Wt(12),Zr(this),Vo(this);break e}}if(this.P){y=!0;let vn;for(;!this.J&&this.C<ne.length;)if(vn=Mw(this,ne),vn==Vu){Mt==4&&(this.s=4,Wt(14),y=!1),Vs(this.i,this.l,null,"[Incomplete Response]");break}else if(vn==gf){this.s=4,Wt(15),Vs(this.i,this.l,ne,"[Invalid Chunk]"),y=!1;break}else Vs(this.i,this.l,vn,null),Lu(this,vn);if(yf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Mt!=4||ne.length!=0||this.h.h||(this.s=1,Wt(16),y=!1),this.o=this.o&&y,!y)Vs(this.i,this.l,ne,"[Invalid Chunked Response]"),Zr(this),Vo(this);else if(0<ne.length&&!this.W){this.W=!0;var Vt=this.j;Vt.g==this&&Vt.ba&&!Vt.M&&(Vt.j.info("Great, no buffering proxy detected. Bytes received: "+ne.length),qu(Vt),Vt.M=!0,Wt(11))}}else Vs(this.i,this.l,ne,null),Lu(this,ne);Mt==4&&Zr(this),this.o&&!this.J&&(Mt==4?qf(this.j,this):(this.o=!1,aa(this)))}else Zw(this.g),y==400&&0<ne.indexOf("Unknown SID")?(this.s=3,Wt(12)):(this.s=0,Wt(13)),Zr(this),Vo(this)}}}catch{}finally{}};function yf(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Mw(l,p){var y=l.C,I=p.indexOf(`
`,y);return I==-1?Vu:(y=Number(p.substring(y,I)),isNaN(y)?gf:(I+=1,I+y>p.length?Vu:(p=p.slice(I,I+y),l.C=I+y,p)))}vr.prototype.cancel=function(){this.J=!0,Zr(this)};function aa(l){l.S=Date.now()+l.I,vf(l,l.I)}function vf(l,p){if(l.B!=null)throw Error("WatchDog timer not null");l.B=No(g(l.ba,l),p)}function $u(l){l.B&&(a.clearTimeout(l.B),l.B=null)}vr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(Dw(this.i,this.A),this.L!=2&&(Oo(),Wt(17)),Zr(this),this.s=2,Vo(this)):vf(this,this.S-l)};function Vo(l){l.j.G==0||l.J||qf(l.j,l)}function Zr(l){$u(l);var p=l.M;p&&typeof p.ma=="function"&&p.ma(),l.M=null,Ro(l.U),l.g&&(p=l.g,l.g=null,p.abort(),p.ma())}function Lu(l,p){try{var y=l.j;if(y.G!=0&&(y.g==l||Fu(y.h,l))){if(!l.K&&Fu(y.h,l)&&y.G==3){try{var I=y.Da.g.parse(p)}catch{I=null}if(Array.isArray(I)&&I.length==3){var L=I;if(L[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<l.F)ma(y),pa(y);else break e;zu(y),Wt(18)}}else y.za=L[1],0<y.za-y.T&&37500>L[2]&&y.F&&y.v==0&&!y.C&&(y.C=No(g(y.Za,y),6e3));if(1>=wf(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else ts(y,11)}else if((l.K||y.g==l)&&ma(y),!P(p))for(L=y.Da.g.parse(p),p=0;p<L.length;p++){let ze=L[p];if(y.T=ze[0],ze=ze[1],y.G==2)if(ze[0]=="c"){y.K=ze[1],y.ia=ze[2];const Vt=ze[3];Vt!=null&&(y.la=Vt,y.j.info("VER="+y.la));const Mt=ze[4];Mt!=null&&(y.Aa=Mt,y.j.info("SVER="+y.Aa));const Ls=ze[5];Ls!=null&&typeof Ls=="number"&&0<Ls&&(I=1.5*Ls,y.L=I,y.j.info("backChannelRequestTimeoutMs_="+I)),I=y;const vn=l.g;if(vn){const va=vn.g?vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(va){var z=I.h;z.g||va.indexOf("spdy")==-1&&va.indexOf("quic")==-1&&va.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(Uu(z,z.h),z.h=null))}if(I.D){const Hu=vn.g?vn.g.getResponseHeader("X-HTTP-Session-Id"):null;Hu&&(I.ya=Hu,et(I.I,I.D,Hu))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-l.F,y.j.info("Handshake RTT: "+y.R+"ms")),I=y;var ne=l;if(I.qa=Wf(I,I.J?I.ia:null,I.W),ne.K){xf(I.h,ne);var We=ne,kt=I.L;kt&&(We.I=kt),We.B&&($u(We),aa(We)),I.g=ne}else Bf(I);0<y.i.length&&ga(y)}else ze[0]!="stop"&&ze[0]!="close"||ts(y,7);else y.G==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?ts(y,7):Bu(y):ze[0]!="noop"&&y.l&&y.l.ta(ze),y.v=0)}}Oo(4)}catch{}}var $w=class{constructor(l,p){this.g=l,this.map=p}};function _f(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function bf(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function wf(l){return l.h?1:l.g?l.g.size:0}function Fu(l,p){return l.h?l.h==p:l.g?l.g.has(p):!1}function Uu(l,p){l.g?l.g.add(p):l.h=p}function xf(l,p){l.h&&l.h==p?l.h=null:l.g&&l.g.has(p)&&l.g.delete(p)}_f.prototype.cancel=function(){if(this.i=Ef(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Ef(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let p=l.i;for(const y of l.g.values())p=p.concat(y.D);return p}return T(l.i)}function Lw(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var p=[],y=l.length,I=0;I<y;I++)p.push(l[I]);return p}p=[],y=0;for(I in l)p[y++]=l[I];return p}function Fw(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var p=[];l=l.length;for(var y=0;y<l;y++)p.push(y);return p}p=[],y=0;for(const I in l)p[y++]=I;return p}}}function Tf(l,p){if(l.forEach&&typeof l.forEach=="function")l.forEach(p,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,p,void 0);else for(var y=Fw(l),I=Lw(l),L=I.length,z=0;z<L;z++)p.call(void 0,I[z],y&&y[z],l)}var If=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Uw(l,p){if(l){l=l.split("&");for(var y=0;y<l.length;y++){var I=l[y].indexOf("="),L=null;if(0<=I){var z=l[y].substring(0,I);L=l[y].substring(I+1)}else z=l[y];p(z,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function es(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof es){this.h=l.h,la(this,l.j),this.o=l.o,this.g=l.g,ua(this,l.s),this.l=l.l;var p=l.i,y=new Lo;y.i=p.i,p.g&&(y.g=new Map(p.g),y.h=p.h),kf(this,y),this.m=l.m}else l&&(p=String(l).match(If))?(this.h=!1,la(this,p[1]||"",!0),this.o=Mo(p[2]||""),this.g=Mo(p[3]||"",!0),ua(this,p[4]),this.l=Mo(p[5]||"",!0),kf(this,p[6]||"",!0),this.m=Mo(p[7]||"")):(this.h=!1,this.i=new Lo(null,this.h))}es.prototype.toString=function(){var l=[],p=this.j;p&&l.push($o(p,Af,!0),":");var y=this.g;return(y||p=="file")&&(l.push("//"),(p=this.o)&&l.push($o(p,Af,!0),"@"),l.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&l.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&l.push("/"),l.push($o(y,y.charAt(0)=="/"?zw:Bw,!0))),(y=this.i.toString())&&l.push("?",y),(y=this.m)&&l.push("#",$o(y,Hw)),l.join("")};function qn(l){return new es(l)}function la(l,p,y){l.j=y?Mo(p,!0):p,l.j&&(l.j=l.j.replace(/:$/,""))}function ua(l,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);l.s=p}else l.s=null}function kf(l,p,y){p instanceof Lo?(l.i=p,Kw(l.i,l.h)):(y||(p=$o(p,qw)),l.i=new Lo(p,l.h))}function et(l,p,y){l.i.set(p,y)}function ca(l){return et(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Mo(l,p){return l?p?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function $o(l,p,y){return typeof l=="string"?(l=encodeURI(l).replace(p,jw),y&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function jw(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Af=/[#\/\?@]/g,Bw=/[#\?:]/g,zw=/[#\?]/g,qw=/[#\?@]/g,Hw=/#/g;function Lo(l,p){this.h=this.g=null,this.i=l||null,this.j=!!p}function _r(l){l.g||(l.g=new Map,l.h=0,l.i&&Uw(l.i,function(p,y){l.add(decodeURIComponent(p.replace(/\+/g," ")),y)}))}t=Lo.prototype,t.add=function(l,p){_r(this),this.i=null,l=Ms(this,l);var y=this.g.get(l);return y||this.g.set(l,y=[]),y.push(p),this.h+=1,this};function Sf(l,p){_r(l),p=Ms(l,p),l.g.has(p)&&(l.i=null,l.h-=l.g.get(p).length,l.g.delete(p))}function Cf(l,p){return _r(l),p=Ms(l,p),l.g.has(p)}t.forEach=function(l,p){_r(this),this.g.forEach(function(y,I){y.forEach(function(L){l.call(p,L,I,this)},this)},this)},t.na=function(){_r(this);const l=Array.from(this.g.values()),p=Array.from(this.g.keys()),y=[];for(let I=0;I<p.length;I++){const L=l[I];for(let z=0;z<L.length;z++)y.push(p[I])}return y},t.V=function(l){_r(this);let p=[];if(typeof l=="string")Cf(this,l)&&(p=p.concat(this.g.get(Ms(this,l))));else{l=Array.from(this.g.values());for(let y=0;y<l.length;y++)p=p.concat(l[y])}return p},t.set=function(l,p){return _r(this),this.i=null,l=Ms(this,l),Cf(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[p]),this.h+=1,this},t.get=function(l,p){return l?(l=this.V(l),0<l.length?String(l[0]):p):p};function Rf(l,p,y){Sf(l,p),0<y.length&&(l.i=null,l.g.set(Ms(l,p),T(y)),l.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],p=Array.from(this.g.keys());for(var y=0;y<p.length;y++){var I=p[y];const z=encodeURIComponent(String(I)),ne=this.V(I);for(I=0;I<ne.length;I++){var L=z;ne[I]!==""&&(L+="="+encodeURIComponent(String(ne[I]))),l.push(L)}}return this.i=l.join("&")};function Ms(l,p){return p=String(p),l.j&&(p=p.toLowerCase()),p}function Kw(l,p){p&&!l.j&&(_r(l),l.i=null,l.g.forEach(function(y,I){var L=I.toLowerCase();I!=L&&(Sf(this,I),Rf(this,L,y))},l)),l.j=p}function Ww(l,p){const y=new Do;if(a.Image){const I=new Image;I.onload=m(br,y,"TestLoadImage: loaded",!0,p,I),I.onerror=m(br,y,"TestLoadImage: error",!1,p,I),I.onabort=m(br,y,"TestLoadImage: abort",!1,p,I),I.ontimeout=m(br,y,"TestLoadImage: timeout",!1,p,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=l}else p(!1)}function Gw(l,p){const y=new Do,I=new AbortController,L=setTimeout(()=>{I.abort(),br(y,"TestPingServer: timeout",!1,p)},1e4);fetch(l,{signal:I.signal}).then(z=>{clearTimeout(L),z.ok?br(y,"TestPingServer: ok",!0,p):br(y,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(L),br(y,"TestPingServer: error",!1,p)})}function br(l,p,y,I,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),I(y)}catch{}}function Qw(){this.g=new ra}function Jw(l,p,y){const I=y||"";try{Tf(l,function(L,z){let ne=L;c(L)&&(ne=It(L)),p.push(I+z+"="+encodeURIComponent(ne))})}catch(L){throw p.push(I+"type="+encodeURIComponent("_badmap")),L}}function da(l){this.l=l.Ub||null,this.j=l.eb||!1}_(da,Pu),da.prototype.g=function(){return new ha(this.l,this.j)},da.prototype.i=function(l){return function(){return l}}({});function ha(l,p){Ee.call(this),this.D=l,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(ha,Ee),t=ha.prototype,t.open=function(l,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=p,this.readyState=1,Uo(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(p.body=l),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Fo(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Uo(this)),this.g&&(this.readyState=3,Uo(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pf(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Pf(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var p=l.value?l.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!l.done}))&&(this.response=this.responseText+=p)}l.done?Fo(this):Uo(this),this.readyState==3&&Pf(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Fo(this))},t.Qa=function(l){this.g&&(this.response=l,Fo(this))},t.ga=function(){this.g&&Fo(this)};function Fo(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Uo(l)}t.setRequestHeader=function(l,p){this.u.append(l,p)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],p=this.h.entries();for(var y=p.next();!y.done;)y=y.value,l.push(y[0]+": "+y[1]),y=p.next();return l.join(`\r
`)};function Uo(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(ha.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Of(l){let p="";return q(l,function(y,I){p+=I,p+=":",p+=y,p+=`\r
`}),p}function ju(l,p,y){e:{for(I in y){var I=!1;break e}I=!0}I||(y=Of(y),typeof l=="string"?y!=null&&encodeURIComponent(String(y)):et(l,p,y))}function at(l){Ee.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(at,Ee);var Yw=/^https?$/i,Xw=["POST","PUT"];t=at.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,p,y,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);p=p?p.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Du.g(),this.v=this.o?af(this.o):af(Du),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(p,String(l),!0),this.B=!1}catch(z){Nf(this,z);return}if(l=y||"",y=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var L in I)y.set(L,I[L]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const z of I.keys())y.set(z,I.get(z));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(y.keys()).find(z=>z.toLowerCase()=="content-type"),L=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Xw,p,void 0))||I||L||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,ne]of y)this.g.setRequestHeader(z,ne);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Mf(this),this.u=!0,this.g.send(l),this.u=!1}catch(z){Nf(this,z)}};function Nf(l,p){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=p,l.m=5,Df(l),fa(l)}function Df(l){l.A||(l.A=!0,De(l,"complete"),De(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,De(this,"complete"),De(this,"abort"),fa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fa(this,!0)),at.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Vf(this):this.bb())},t.bb=function(){Vf(this)};function Vf(l){if(l.h&&typeof i<"u"&&(!l.v[1]||Hn(l)!=4||l.Z()!=2)){if(l.u&&Hn(l)==4)Nt(l.Ea,0,l);else if(De(l,"readystatechange"),Hn(l)==4){l.h=!1;try{const ne=l.Z();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var y;if(!(y=p)){var I;if(I=ne===0){var L=String(l.D).match(If)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),I=!Yw.test(L?L.toLowerCase():"")}y=I}if(y)De(l,"complete"),De(l,"success");else{l.m=6;try{var z=2<Hn(l)?l.g.statusText:""}catch{z=""}l.l=z+" ["+l.Z()+"]",Df(l)}}finally{fa(l)}}}}function fa(l,p){if(l.g){Mf(l);const y=l.g,I=l.v[0]?()=>{}:null;l.g=null,l.v=null,p||De(l,"ready");try{y.onreadystatechange=I}catch{}}}function Mf(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Hn(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Hn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var p=this.g.responseText;return l&&p.indexOf(l)==0&&(p=p.substring(l.length)),dn(p)}};function $f(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Zw(l){const p={};l=(l.g&&2<=Hn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<l.length;I++){if(P(l[I]))continue;var y=E(l[I]);const L=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const z=p[L]||[];p[L]=z,z.push(y)}k(p,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function jo(l,p,y){return y&&y.internalChannelParams&&y.internalChannelParams[l]||p}function Lf(l){this.Aa=0,this.i=[],this.j=new Do,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=jo("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=jo("baseRetryDelayMs",5e3,l),this.cb=jo("retryDelaySeedMs",1e4,l),this.Wa=jo("forwardChannelMaxRetries",2,l),this.wa=jo("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new _f(l&&l.concurrentRequestLimit),this.Da=new Qw,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Lf.prototype,t.la=8,t.G=1,t.connect=function(l,p,y,I){Wt(0),this.W=l,this.H=p||{},y&&I!==void 0&&(this.H.OSID=y,this.H.OAID=I),this.F=this.X,this.I=Wf(this,null,this.W),ga(this)};function Bu(l){if(Ff(l),l.G==3){var p=l.U++,y=qn(l.I);if(et(y,"SID",l.K),et(y,"RID",p),et(y,"TYPE","terminate"),Bo(l,y),p=new vr(l,l.j,p),p.L=2,p.v=ca(qn(y)),y=!1,a.navigator&&a.navigator.sendBeacon)try{y=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!y&&a.Image&&(new Image().src=p.v,y=!0),y||(p.g=Gf(p.j,null),p.g.ea(p.v)),p.F=Date.now(),aa(p)}Kf(l)}function pa(l){l.g&&(qu(l),l.g.cancel(),l.g=null)}function Ff(l){pa(l),l.u&&(a.clearTimeout(l.u),l.u=null),ma(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function ga(l){if(!bf(l.h)&&!l.s){l.s=!0;var p=l.Ga;se||Et(),Ce||(se(),Ce=!0),rt.add(p,l),l.B=0}}function e1(l,p){return wf(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=p.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=No(g(l.Ga,l,p),Hf(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const L=new vr(this,this.j,l);let z=this.o;if(this.S&&(z?(z=v(z),S(z,this.S)):z=this.S),this.m!==null||this.O||(L.H=z,z=null),this.P)e:{for(var p=0,y=0;y<this.i.length;y++){t:{var I=this.i[y];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(p+=I,4096<p){p=y;break e}if(p===4096||y===this.i.length-1){p=y+1;break e}}p=1e3}else p=1e3;p=jf(this,L,p),y=qn(this.I),et(y,"RID",l),et(y,"CVER",22),this.D&&et(y,"X-HTTP-Session-Id",this.D),Bo(this,y),z&&(this.O?p="headers="+encodeURIComponent(String(Of(z)))+"&"+p:this.m&&ju(y,this.m,z)),Uu(this.h,L),this.Ua&&et(y,"TYPE","init"),this.P?(et(y,"$req",p),et(y,"SID","null"),L.T=!0,Mu(L,y,null)):Mu(L,y,p),this.G=2}}else this.G==3&&(l?Uf(this,l):this.i.length==0||bf(this.h)||Uf(this))};function Uf(l,p){var y;p?y=p.l:y=l.U++;const I=qn(l.I);et(I,"SID",l.K),et(I,"RID",y),et(I,"AID",l.T),Bo(l,I),l.m&&l.o&&ju(I,l.m,l.o),y=new vr(l,l.j,y,l.B+1),l.m===null&&(y.H=l.o),p&&(l.i=p.D.concat(l.i)),p=jf(l,y,1e3),y.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Uu(l.h,y),Mu(y,I,p)}function Bo(l,p){l.H&&q(l.H,function(y,I){et(p,I,y)}),l.l&&Tf({},function(y,I){et(p,I,y)})}function jf(l,p,y){y=Math.min(l.i.length,y);var I=l.l?g(l.l.Na,l.l,l):null;e:{var L=l.i;let z=-1;for(;;){const ne=["count="+y];z==-1?0<y?(z=L[0].g,ne.push("ofs="+z)):z=0:ne.push("ofs="+z);let We=!0;for(let kt=0;kt<y;kt++){let ze=L[kt].g;const Vt=L[kt].map;if(ze-=z,0>ze)z=Math.max(0,L[kt].g-100),We=!1;else try{Jw(Vt,ne,"req"+ze+"_")}catch{I&&I(Vt)}}if(We){I=ne.join("&");break e}}}return l=l.i.splice(0,y),p.D=l,I}function Bf(l){if(!l.g&&!l.u){l.Y=1;var p=l.Fa;se||Et(),Ce||(se(),Ce=!0),rt.add(p,l),l.v=0}}function zu(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=No(g(l.Fa,l),Hf(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,zf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=No(g(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Wt(10),pa(this),zf(this))};function qu(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function zf(l){l.g=new vr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var p=qn(l.qa);et(p,"RID","rpc"),et(p,"SID",l.K),et(p,"AID",l.T),et(p,"CI",l.F?"0":"1"),!l.F&&l.ja&&et(p,"TO",l.ja),et(p,"TYPE","xmlhttp"),Bo(l,p),l.m&&l.o&&ju(p,l.m,l.o),l.L&&(l.g.I=l.L);var y=l.g;l=l.ia,y.L=1,y.v=ca(qn(p)),y.m=null,y.P=!0,mf(y,l)}t.Za=function(){this.C!=null&&(this.C=null,pa(this),zu(this),Wt(19))};function ma(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function qf(l,p){var y=null;if(l.g==p){ma(l),qu(l),l.g=null;var I=2}else if(Fu(l.h,p))y=p.D,xf(l.h,p),I=1;else return;if(l.G!=0){if(p.o)if(I==1){y=p.m?p.m.length:0,p=Date.now()-p.F;var L=l.B;I=sa(),De(I,new hf(I,y)),ga(l)}else Bf(l);else if(L=p.s,L==3||L==0&&0<p.X||!(I==1&&e1(l,p)||I==2&&zu(l)))switch(y&&0<y.length&&(p=l.h,p.i=p.i.concat(y)),L){case 1:ts(l,5);break;case 4:ts(l,10);break;case 3:ts(l,6);break;default:ts(l,2)}}}function Hf(l,p){let y=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(y*=2),y*p}function ts(l,p){if(l.j.info("Error code "+p),p==2){var y=g(l.fb,l),I=l.Xa;const L=!I;I=new es(I||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||la(I,"https"),ca(I),L?Ww(I.toString(),y):Gw(I.toString(),y)}else Wt(2);l.G=0,l.l&&l.l.sa(p),Kf(l),Ff(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Wt(2)):(this.j.info("Failed to ping google.com"),Wt(1))};function Kf(l){if(l.G=0,l.ka=[],l.l){const p=Ef(l.h);(p.length!=0||l.i.length!=0)&&(x(l.ka,p),x(l.ka,l.i),l.h.i.length=0,T(l.i),l.i.length=0),l.l.ra()}}function Wf(l,p,y){var I=y instanceof es?qn(y):new es(y);if(I.g!="")p&&(I.g=p+"."+I.g),ua(I,I.s);else{var L=a.location;I=L.protocol,p=p?p+"."+L.hostname:L.hostname,L=+L.port;var z=new es(null);I&&la(z,I),p&&(z.g=p),L&&ua(z,L),y&&(z.l=y),I=z}return y=l.D,p=l.ya,y&&p&&et(I,y,p),et(I,"VER",l.la),Bo(l,I),I}function Gf(l,p,y){if(p&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=l.Ca&&!l.pa?new at(new da({eb:y})):new at(l.pa),p.Ha(l.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qf(){}t=Qf.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ya(){}ya.prototype.g=function(l,p){return new tn(l,p)};function tn(l,p){Ee.call(this),this.g=new Lf(p),this.l=l,this.h=p&&p.messageUrlParams||null,l=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(l?l["X-WebChannel-Content-Type"]=p.messageContentType:l={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(l?l["X-WebChannel-Client-Profile"]=p.va:l={"X-WebChannel-Client-Profile":p.va}),this.g.S=l,(l=p&&p.Sb)&&!P(l)&&(this.g.m=l),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!P(p)&&(this.g.D=p,l=this.h,l!==null&&p in l&&(l=this.h,p in l&&delete l[p])),this.j=new $s(this)}_(tn,Ee),tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},tn.prototype.close=function(){Bu(this.g)},tn.prototype.o=function(l){var p=this.g;if(typeof l=="string"){var y={};y.__data__=l,l=y}else this.u&&(y={},y.__data__=It(l),l=y);p.i.push(new $w(p.Ya++,l)),p.G==3&&ga(p)},tn.prototype.N=function(){this.g.l=null,delete this.j,Bu(this.g),delete this.g,tn.aa.N.call(this)};function Jf(l){Ou.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var p=l.__sm__;if(p){e:{for(const y in p){l=y;break e}l=void 0}(this.i=l)&&(l=this.i,p=p!==null&&l in p?p[l]:void 0),this.data=p}else this.data=l}_(Jf,Ou);function Yf(){Nu.call(this),this.status=1}_(Yf,Nu);function $s(l){this.g=l}_($s,Qf),$s.prototype.ua=function(){De(this.g,"a")},$s.prototype.ta=function(l){De(this.g,new Jf(l))},$s.prototype.sa=function(l){De(this.g,new Yf)},$s.prototype.ra=function(){De(this.g,"b")},ya.prototype.createWebChannel=ya.prototype.g,tn.prototype.send=tn.prototype.o,tn.prototype.open=tn.prototype.m,tn.prototype.close=tn.prototype.close,H_=function(){return new ya},q_=function(){return sa()},z_=Xr,ld={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},oa.NO_ERROR=0,oa.TIMEOUT=8,oa.HTTP_ERROR=6,Ba=oa,ff.COMPLETE="complete",B_=ff,lf.EventType=Po,Po.OPEN="a",Po.CLOSE="b",Po.ERROR="c",Po.MESSAGE="d",Ee.prototype.listen=Ee.prototype.K,Yo=lf,at.prototype.listenOnce=at.prototype.L,at.prototype.getLastError=at.prototype.Ka,at.prototype.getLastErrorCode=at.prototype.Ba,at.prototype.getStatus=at.prototype.Z,at.prototype.getResponseJson=at.prototype.Oa,at.prototype.getResponseText=at.prototype.oa,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Ha,j_=at}).apply(typeof Ta<"u"?Ta:typeof self<"u"?self:typeof window<"u"?window:{});const nm="@firebase/firestore",rm="4.7.16";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ft.UNAUTHENTICATED=new Ft(null),Ft.GOOGLE_CREDENTIALS=new Ft("google-credentials-uid"),Ft.FIRST_PARTY=new Ft("first-party-uid"),Ft.MOCK_USER=new Ft("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Io="11.8.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is=new Zd("@firebase/firestore");function zs(){return Is.logLevel}function he(t,...e){if(Is.logLevel<=$e.DEBUG){const n=e.map(wh);Is.debug(`Firestore (${Io}): ${t}`,...n)}}function fr(t,...e){if(Is.logLevel<=$e.ERROR){const n=e.map(wh);Is.error(`Firestore (${Io}): ${t}`,...n)}}function oo(t,...e){if(Is.logLevel<=$e.WARN){const n=e.map(wh);Is.warn(`Firestore (${Io}): ${t}`,...n)}}function wh(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,K_(t,r,n)}function K_(t,e,n){let r=`FIRESTORE (${Io}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw fr(r),new Error(r)}function Ke(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||K_(e,s,r)}function Oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends zn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class sP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ft.UNAUTHENTICATED))}shutdown(){}}class oP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class iP{constructor(e){this.t=e,this.currentUser=Ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ke(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let o=new ms;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ms,e.enqueueRetryable(()=>s(this.currentUser))};const i=()=>{const u=o;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},a=u=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ms)}},0),i()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ke(typeof r.accessToken=="string",31837,{l:r}),new W_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string",2055,{h:e}),new Ft(e)}}class aP{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Ft.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class lP{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new aP(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class sm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uP{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,sn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ke(this.o===void 0,3512);const r=o=>{o.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const i=o.token!==this.m;return this.m=o.token,he("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const s=o=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new sm(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ke(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new sm(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G_(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=cP(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<n&&(r+=e.charAt(s[o]%62))}return r}}function Me(t,e){return t<e?-1:t>e?1:0}function ud(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return Me(r,s);{const o=G_(),i=dP(o.encode(om(t,n)),o.encode(om(e,n)));return i!==0?i:Me(r,s)}}n+=r>65535?2:1}return Me(t.length,e.length)}function om(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function dP(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Me(t[n],e[n]);return Me(t.length,e.length)}function io(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im=-62135596800,am=1e6;class yt{static now(){return yt.fromMillis(Date.now())}static fromDate(e){return yt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*am);return new yt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new fe(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new fe(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<im)throw new fe(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/am}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-im;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new yt(0,0))}static max(){return new Re(new yt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm="__name__";class Dn{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ie(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ie(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Dn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Dn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const o=Dn.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return Me(e.length,n.length)}static compareSegments(e,n){const r=Dn.isNumericId(e),s=Dn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Dn.extractNumericId(e).compare(Dn.extractNumericId(n)):ud(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return $r.fromString(e.substring(4,e.length-2))}}class nt extends Dn{construct(e,n,r){return new nt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new fe(X.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new nt(n)}static emptyPath(){return new nt([])}}const hP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rt extends Dn{construct(e,n,r){return new Rt(e,n,r)}static isValidIdentifier(e){return hP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===lm}static keyField(){return new Rt([lm])}static fromServerFormat(e){const n=[];let r="",s=0;const o=()=>{if(r.length===0)throw new fe(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let i=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new fe(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new fe(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else a==="`"?(i=!i,s++):a!=="."||i?(r+=a,s++):(o(),s++)}if(o(),i)throw new fe(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Rt(n)}static emptyPath(){return new Rt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.path=e}static fromPath(e){return new xe(nt.fromString(e))}static fromName(e){return new xe(nt.fromString(e).popFirst(5))}static empty(){return new xe(nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return nt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xe(new nt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi=-1;function fP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Re.fromTimestamp(r===1e9?new yt(n+1,0):new yt(n,r));return new jr(s,xe.empty(),e)}function pP(t){return new jr(t.readTime,t.key,Oi)}class jr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new jr(Re.min(),xe.empty(),Oi)}static max(){return new jr(Re.max(),xe.empty(),Oi)}}function gP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=xe.comparator(t.documentKey,e.documentKey),n!==0?n:Me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ko(t){if(t.code!==X.FAILED_PRECONDITION||t.message!==mP)throw t;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new J((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof J?n:J.resolve(n)}catch(n){return J.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):J.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):J.reject(n)}static resolve(e){return new J((n,r)=>{n(e)})}static reject(e){return new J((n,r)=>{r(e)})}static waitFor(e){return new J((n,r)=>{let s=0,o=0,i=!1;e.forEach(a=>{++s,a.next(()=>{++o,i&&o===s&&n()},u=>r(u))}),i=!0,o===s&&n()})}static or(e){let n=J.resolve(!1);for(const r of e)n=n.next(s=>s?J.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,o)=>{r.push(n.call(this,s,o))}),this.waitFor(r)}static mapArray(e,n){return new J((r,s)=>{const o=e.length,i=new Array(o);let a=0;for(let u=0;u<o;u++){const c=u;n(e[c]).next(h=>{i[c]=h,++a,a===o&&r(i)},h=>s(h))}})}static doWhile(e,n){return new J((r,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):r()};o()})}}function vP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ao(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}lu.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xh=-1;function uu(t){return t==null}function vl(t){return t===0&&1/t==-1/0}function _P(t){return typeof t=="number"&&Number.isInteger(t)&&!vl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_="";function bP(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=um(e)),e=wP(t.get(n),e);return um(e)}function wP(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case J_:n+="";break;default:n+=o}}return n}function um(t){return t+J_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Yr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Y_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e,n){this.comparator=e,this.root=n||St.EMPTY}insert(e,n){return new it(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,St.BLACK,null,null))}remove(e){return new it(this.comparator,this.root.remove(e,this.comparator).copy(null,null,St.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ia(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ia(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ia(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ia(this.root,e,this.comparator,!0)}}class Ia{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class St{constructor(e,n,r,s,o){this.key=e,this.value=n,this.color=r??St.RED,this.left=s??St.EMPTY,this.right=o??St.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,o){return new St(e??this.key,n??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,r),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return St.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return St.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,St.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,St.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}St.EMPTY=null,St.RED=!0,St.BLACK=!1;St.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,n,r,s,o){return this}insert(e,n,r){return new St(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.comparator=e,this.data=new it(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new dm(this.data.getIterator())}getIteratorFrom(e){return new dm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof vt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new vt(this.comparator);return n.data=e,n}}class dm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.fields=e,e.sort(Rt.comparator)}static empty(){return new bn([])}unionWith(e){let n=new vt(Rt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new bn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return io(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new X_("Invalid base64 string: "+o):o}}(e);return new Pt(n)}static fromUint8Array(e){const n=function(s){let o="";for(let i=0;i<s.length;++i)o+=String.fromCharCode(s[i]);return o}(e);return new Pt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pt.EMPTY_BYTE_STRING=new Pt("");const xP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Br(t){if(Ke(!!t,39018),typeof t=="string"){let e=0;const n=xP.exec(t);if(Ke(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ut(t.seconds),nanos:ut(t.nanos)}}function ut(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function zr(t){return typeof t=="string"?Pt.fromBase64String(t):Pt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_="server_timestamp",eb="__type__",tb="__previous_value__",nb="__local_write_time__";function Eh(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[eb])===null||n===void 0?void 0:n.stringValue)===Z_}function cu(t){const e=t.mapValue.fields[tb];return Eh(e)?cu(e):e}function Ni(t){const e=Br(t.mapValue.fields[nb].timestampValue);return new yt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e,n,r,s,o,i,a,u,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c,this.isUsingEmulator=h}}const _l="(default)";class Di{constructor(e,n){this.projectId=e,this.database=n||_l}static empty(){return new Di("","")}get isDefaultDatabase(){return this.database===_l}isEqual(e){return e instanceof Di&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb="__type__",TP="__max__",ka={mapValue:{}},sb="__vector__",bl="value";function qr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Eh(t)?4:kP(t)?9007199254740991:IP(t)?10:11:Ie(28295,{value:t})}function Bn(t,e){if(t===e)return!0;const n=qr(t);if(n!==qr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ni(t).isEqual(Ni(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const i=Br(s.timestampValue),a=Br(o.timestampValue);return i.seconds===a.seconds&&i.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return zr(s.bytesValue).isEqual(zr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return ut(s.geoPointValue.latitude)===ut(o.geoPointValue.latitude)&&ut(s.geoPointValue.longitude)===ut(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return ut(s.integerValue)===ut(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const i=ut(s.doubleValue),a=ut(o.doubleValue);return i===a?vl(i)===vl(a):isNaN(i)&&isNaN(a)}return!1}(t,e);case 9:return io(t.arrayValue.values||[],e.arrayValue.values||[],Bn);case 10:case 11:return function(s,o){const i=s.mapValue.fields||{},a=o.mapValue.fields||{};if(cm(i)!==cm(a))return!1;for(const u in i)if(i.hasOwnProperty(u)&&(a[u]===void 0||!Bn(i[u],a[u])))return!1;return!0}(t,e);default:return Ie(52216,{left:t})}}function Vi(t,e){return(t.values||[]).find(n=>Bn(n,e))!==void 0}function ao(t,e){if(t===e)return 0;const n=qr(t),r=qr(e);if(n!==r)return Me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Me(t.booleanValue,e.booleanValue);case 2:return function(o,i){const a=ut(o.integerValue||o.doubleValue),u=ut(i.integerValue||i.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return hm(t.timestampValue,e.timestampValue);case 4:return hm(Ni(t),Ni(e));case 5:return ud(t.stringValue,e.stringValue);case 6:return function(o,i){const a=zr(o),u=zr(i);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,i){const a=o.split("/"),u=i.split("/");for(let c=0;c<a.length&&c<u.length;c++){const h=Me(a[c],u[c]);if(h!==0)return h}return Me(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,i){const a=Me(ut(o.latitude),ut(i.latitude));return a!==0?a:Me(ut(o.longitude),ut(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return fm(t.arrayValue,e.arrayValue);case 10:return function(o,i){var a,u,c,h;const f=o.fields||{},g=i.fields||{},m=(a=f[bl])===null||a===void 0?void 0:a.arrayValue,_=(u=g[bl])===null||u===void 0?void 0:u.arrayValue,T=Me(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((h=_==null?void 0:_.values)===null||h===void 0?void 0:h.length)||0);return T!==0?T:fm(m,_)}(t.mapValue,e.mapValue);case 11:return function(o,i){if(o===ka.mapValue&&i===ka.mapValue)return 0;if(o===ka.mapValue)return 1;if(i===ka.mapValue)return-1;const a=o.fields||{},u=Object.keys(a),c=i.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let f=0;f<u.length&&f<h.length;++f){const g=ud(u[f],h[f]);if(g!==0)return g;const m=ao(a[u[f]],c[h[f]]);if(m!==0)return m}return Me(u.length,h.length)}(t.mapValue,e.mapValue);default:throw Ie(23264,{Pe:n})}}function hm(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Me(t,e);const n=Br(t),r=Br(e),s=Me(n.seconds,r.seconds);return s!==0?s:Me(n.nanos,r.nanos)}function fm(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const o=ao(n[s],r[s]);if(o)return o}return Me(n.length,r.length)}function lo(t){return cd(t)}function cd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Br(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return zr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return xe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const o of n.values||[])s?s=!1:r+=",",r+=cd(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const i of r)o?o=!1:s+=",",s+=`${i}:${cd(n.fields[i])}`;return s+"}"}(t.mapValue):Ie(61005,{value:t})}function za(t){switch(qr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=cu(t);return e?16+za(e):16;case 5:return 2*t.stringValue.length;case 6:return zr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,o)=>s+za(o),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Yr(r.fields,(o,i)=>{s+=o.length+za(i)}),s}(t.mapValue);default:throw Ie(13486,{value:t})}}function pm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function dd(t){return!!t&&"integerValue"in t}function Th(t){return!!t&&"arrayValue"in t}function gm(t){return!!t&&"nullValue"in t}function mm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function qa(t){return!!t&&"mapValue"in t}function IP(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[rb])===null||n===void 0?void 0:n.stringValue)===sb}function hi(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Yr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=hi(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=hi(t.arrayValue.values[n]);return e}return Object.assign({},t)}function kP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===TP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.value=e}static empty(){return new on({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!qa(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=hi(n)}setAll(e){let n=Rt.emptyPath(),r={},s=[];e.forEach((i,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=a.popLast()}i?r[a.lastSegment()]=hi(i):s.push(a.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,s)}delete(e){const n=this.field(e.popLast());qa(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Bn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];qa(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Yr(n,(s,o)=>e[s]=o);for(const s of r)delete e[s]}clone(){return new on(hi(this.value))}}function ob(t){const e=[];return Yr(t.fields,(n,r)=>{const s=new Rt([n]);if(qa(r)){const o=ob(r.mapValue).fields;if(o.length===0)e.push(s);else for(const i of o)e.push(s.child(i))}else e.push(s)}),new bn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,n,r,s,o,i,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=o,this.data=i,this.documentState=a}static newInvalidDocument(e){return new jt(e,0,Re.min(),Re.min(),Re.min(),on.empty(),0)}static newFoundDocument(e,n,r,s){return new jt(e,1,n,Re.min(),r,s,0)}static newNoDocument(e,n){return new jt(e,2,n,Re.min(),Re.min(),on.empty(),0)}static newUnknownDocument(e,n){return new jt(e,3,n,Re.min(),Re.min(),on.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=on.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=on.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e,n){this.position=e,this.inclusive=n}}function ym(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const o=e[s],i=t.position[s];if(o.field.isKeyField()?r=xe.comparator(xe.fromName(i.referenceValue),n.key):r=ao(i,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function vm(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Bn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e,n="asc"){this.field=e,this.dir=n}}function AP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{}class gt extends ib{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new CP(e,n,r):n==="array-contains"?new OP(e,r):n==="in"?new NP(e,r):n==="not-in"?new DP(e,r):n==="array-contains-any"?new VP(e,r):new gt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new RP(e,r):new PP(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ao(n,this.value)):n!==null&&qr(this.value)===qr(n)&&this.matchesComparison(ao(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Sn extends ib{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new Sn(e,n)}matches(e){return ab(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function ab(t){return t.op==="and"}function lb(t){return SP(t)&&ab(t)}function SP(t){for(const e of t.filters)if(e instanceof Sn)return!1;return!0}function hd(t){if(t instanceof gt)return t.field.canonicalString()+t.op.toString()+lo(t.value);if(lb(t))return t.filters.map(e=>hd(e)).join(",");{const e=t.filters.map(n=>hd(n)).join(",");return`${t.op}(${e})`}}function ub(t,e){return t instanceof gt?function(r,s){return s instanceof gt&&r.op===s.op&&r.field.isEqual(s.field)&&Bn(r.value,s.value)}(t,e):t instanceof Sn?function(r,s){return s instanceof Sn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,i,a)=>o&&ub(i,s.filters[a]),!0):!1}(t,e):void Ie(19439)}function cb(t){return t instanceof gt?function(n){return`${n.field.canonicalString()} ${n.op} ${lo(n.value)}`}(t):t instanceof Sn?function(n){return n.op.toString()+" {"+n.getFilters().map(cb).join(" ,")+"}"}(t):"Filter"}class CP extends gt{constructor(e,n,r){super(e,n,r),this.key=xe.fromName(r.referenceValue)}matches(e){const n=xe.comparator(e.key,this.key);return this.matchesComparison(n)}}class RP extends gt{constructor(e,n){super(e,"in",n),this.keys=db("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class PP extends gt{constructor(e,n){super(e,"not-in",n),this.keys=db("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function db(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>xe.fromName(r.referenceValue))}class OP extends gt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Th(n)&&Vi(n.arrayValue,this.value)}}class NP extends gt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Vi(this.value.arrayValue,n)}}class DP extends gt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Vi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Vi(this.value.arrayValue,n)}}class VP extends gt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Th(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Vi(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e,n=null,r=[],s=[],o=null,i=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=i,this.endAt=a,this.Ie=null}}function _m(t,e=null,n=[],r=[],s=null,o=null,i=null){return new MP(t,e,n,r,s,o,i)}function Ih(t){const e=Oe(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>hd(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),uu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>lo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>lo(r)).join(",")),e.Ie=n}return e.Ie}function kh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!AP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ub(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!vm(t.startAt,e.startAt)&&vm(t.endAt,e.endAt)}function fd(t){return xe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,n=null,r=[],s=[],o=null,i="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=i,this.startAt=a,this.endAt=u,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function $P(t,e,n,r,s,o,i,a){return new So(t,e,n,r,s,o,i,a)}function Ah(t){return new So(t)}function bm(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function hb(t){return t.collectionGroup!==null}function fi(t){const e=Oe(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ee.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let a=new vt(Rt.comparator);return i.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ee.push(new Mi(o,r))}),n.has(Rt.keyField().canonicalString())||e.Ee.push(new Mi(Rt.keyField(),r))}return e.Ee}function Fn(t){const e=Oe(t);return e.de||(e.de=LP(e,fi(t))),e.de}function LP(t,e){if(t.limitType==="F")return _m(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Mi(s.field,o)});const n=t.endAt?new wl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new wl(t.startAt.position,t.startAt.inclusive):null;return _m(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function pd(t,e){const n=t.filters.concat([e]);return new So(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function gd(t,e,n){return new So(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function du(t,e){return kh(Fn(t),Fn(e))&&t.limitType===e.limitType}function fb(t){return`${Ih(Fn(t))}|lt:${t.limitType}`}function qs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>cb(s)).join(", ")}]`),uu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>lo(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>lo(s)).join(",")),`Target(${r})`}(Fn(t))}; limitType=${t.limitType})`}function hu(t,e){return e.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):xe.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,s){for(const o of fi(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(i,a,u){const c=ym(i,a,u);return i.inclusive?c<=0:c<0}(r.startAt,fi(r),s)||r.endAt&&!function(i,a,u){const c=ym(i,a,u);return i.inclusive?c>=0:c>0}(r.endAt,fi(r),s))}(t,e)}function FP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function pb(t){return(e,n)=>{let r=!1;for(const s of fi(t)){const o=UP(s,e,n);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function UP(t,e,n){const r=t.field.isKeyField()?xe.comparator(e.key,n.key):function(o,i,a){const u=i.data.field(o),c=a.data.field(o);return u!==null&&c!==null?ao(u,c):Ie(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ie(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Yr(this.inner,(n,r)=>{for(const[s,o]of r)e(s,o)})}isEmpty(){return Y_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP=new it(xe.comparator);function pr(){return jP}const gb=new it(xe.comparator);function Xo(...t){let e=gb;for(const n of t)e=e.insert(n.key,n);return e}function mb(t){let e=gb;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function hs(){return pi()}function yb(){return pi()}function pi(){return new Cs(t=>t.toString(),(t,e)=>t.isEqual(e))}const BP=new it(xe.comparator),zP=new vt(xe.comparator);function Le(...t){let e=zP;for(const n of t)e=e.add(n);return e}const qP=new vt(Me);function HP(){return qP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vl(e)?"-0":e}}function vb(t){return{integerValue:""+t}}function KP(t,e){return _P(e)?vb(e):Sh(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(){this._=void 0}}function WP(t,e,n){return t instanceof xl?function(s,o){const i={fields:{[eb]:{stringValue:Z_},[nb]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Eh(o)&&(o=cu(o)),o&&(i.fields[tb]=o),{mapValue:i}}(n,e):t instanceof $i?bb(t,e):t instanceof Li?wb(t,e):function(s,o){const i=_b(s,o),a=wm(i)+wm(s.Re);return dd(i)&&dd(s.Re)?vb(a):Sh(s.serializer,a)}(t,e)}function GP(t,e,n){return t instanceof $i?bb(t,e):t instanceof Li?wb(t,e):n}function _b(t,e){return t instanceof El?function(r){return dd(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class xl extends fu{}class $i extends fu{constructor(e){super(),this.elements=e}}function bb(t,e){const n=xb(e);for(const r of t.elements)n.some(s=>Bn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Li extends fu{constructor(e){super(),this.elements=e}}function wb(t,e){let n=xb(e);for(const r of t.elements)n=n.filter(s=>!Bn(s,r));return{arrayValue:{values:n}}}class El extends fu{constructor(e,n){super(),this.serializer=e,this.Re=n}}function wm(t){return ut(t.integerValue||t.doubleValue)}function xb(t){return Th(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function QP(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof $i&&s instanceof $i||r instanceof Li&&s instanceof Li?io(r.elements,s.elements,Bn):r instanceof El&&s instanceof El?Bn(r.Re,s.Re):r instanceof xl&&s instanceof xl}(t.transform,e.transform)}class JP{constructor(e,n){this.version=e,this.transformResults=n}}class ar{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ar}static exists(e){return new ar(void 0,e)}static updateTime(e){return new ar(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ha(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class pu{}function Eb(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ib(t.key,ar.none()):new gu(t.key,t.data,ar.none());{const n=t.data,r=on.empty();let s=new vt(Rt.comparator);for(let o of e.fields)if(!s.has(o)){let i=n.field(o);i===null&&o.length>1&&(o=o.popLast(),i=n.field(o)),i===null?r.delete(o):r.set(o,i),s=s.add(o)}return new Rs(t.key,r,new bn(s.toArray()),ar.none())}}function YP(t,e,n){t instanceof gu?function(s,o,i){const a=s.value.clone(),u=Em(s.fieldTransforms,o,i.transformResults);a.setAll(u),o.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Rs?function(s,o,i){if(!Ha(s.precondition,o))return void o.convertToUnknownDocument(i.version);const a=Em(s.fieldTransforms,o,i.transformResults),u=o.data;u.setAll(Tb(s)),u.setAll(a),o.convertToFoundDocument(i.version,u).setHasCommittedMutations()}(t,e,n):function(s,o,i){o.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function gi(t,e,n,r){return t instanceof gu?function(o,i,a,u){if(!Ha(o.precondition,i))return a;const c=o.value.clone(),h=Tm(o.fieldTransforms,u,i);return c.setAll(h),i.convertToFoundDocument(i.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Rs?function(o,i,a,u){if(!Ha(o.precondition,i))return a;const c=Tm(o.fieldTransforms,u,i),h=i.data;return h.setAll(Tb(o)),h.setAll(c),i.convertToFoundDocument(i.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(o,i,a){return Ha(o.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):a}(t,e,n)}function XP(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),o=_b(r.transform,s||null);o!=null&&(n===null&&(n=on.empty()),n.set(r.field,o))}return n||null}function xm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&io(r,s,(o,i)=>QP(o,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class gu extends pu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Rs extends pu{constructor(e,n,r,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Tb(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Em(t,e,n){const r=new Map;Ke(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let s=0;s<n.length;s++){const o=t[s],i=o.transform,a=e.data.field(o.field);r.set(o.field,GP(i,a,n[s]))}return r}function Tm(t,e,n){const r=new Map;for(const s of t){const o=s.transform,i=n.data.field(s.field);r.set(s.field,WP(o,i,e))}return r}class Ib extends pu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ZP extends pu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&YP(o,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=gi(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=gi(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=yb();return this.mutations.forEach(s=>{const o=e.get(s.key),i=o.overlayedDocument;let a=this.applyToLocalView(i,o.mutatedFields);a=n.has(s.key)?null:a;const u=Eb(i,a);u!==null&&r.set(s.key,u),i.isValidDocument()||i.convertToNoDocument(Re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Le())}isEqual(e){return this.batchId===e.batchId&&io(this.mutations,e.mutations,(n,r)=>xm(n,r))&&io(this.baseMutations,e.baseMutations,(n,r)=>xm(n,r))}}class Ch{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ke(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let s=function(){return BP}();const o=e.mutations;for(let i=0;i<o.length;i++)s=s.insert(o[i].key,r[i].version);return new Ch(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt,Ue;function r4(t){switch(t){case X.OK:return Ie(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return Ie(15467,{code:t})}}function kb(t){if(t===void 0)return fr("GRPC error has no .code"),X.UNKNOWN;switch(t){case pt.OK:return X.OK;case pt.CANCELLED:return X.CANCELLED;case pt.UNKNOWN:return X.UNKNOWN;case pt.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case pt.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case pt.INTERNAL:return X.INTERNAL;case pt.UNAVAILABLE:return X.UNAVAILABLE;case pt.UNAUTHENTICATED:return X.UNAUTHENTICATED;case pt.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case pt.NOT_FOUND:return X.NOT_FOUND;case pt.ALREADY_EXISTS:return X.ALREADY_EXISTS;case pt.PERMISSION_DENIED:return X.PERMISSION_DENIED;case pt.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case pt.ABORTED:return X.ABORTED;case pt.OUT_OF_RANGE:return X.OUT_OF_RANGE;case pt.UNIMPLEMENTED:return X.UNIMPLEMENTED;case pt.DATA_LOSS:return X.DATA_LOSS;default:return Ie(39323,{code:t})}}(Ue=pt||(pt={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4=new $r([4294967295,4294967295],0);function Im(t){const e=G_().encode(t),n=new U_;return n.update(e),new Uint8Array(n.digest())}function km(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new $r([n,r],0),new $r([s,o],0)]}class Rh{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Zo(`Invalid padding: ${n}`);if(r<0)throw new Zo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Zo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Zo(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=$r.fromNumber(this.pe)}we(e,n,r){let s=e.add(n.multiply($r.fromNumber(r)));return s.compare(s4)===1&&(s=new $r([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}Se(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=Im(e),[r,s]=km(n);for(let o=0;o<this.hashCount;o++){const i=this.we(r,s,o);if(!this.Se(i))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),i=new Rh(o,s,n);return r.forEach(a=>i.insert(a)),i}insert(e){if(this.pe===0)return;const n=Im(e),[r,s]=km(n);for(let o=0;o<this.hashCount;o++){const i=this.we(r,s,o);this.be(i)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Zo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,n,r,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Zi.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new mu(Re.min(),s,new it(Me),pr(),Le())}}class Zi{constructor(e,n,r,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Zi(r,n,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,n,r,s){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=s}}class Ab{constructor(e,n){this.targetId=e,this.Ce=n}}class Sb{constructor(e,n,r=Pt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Am{constructor(){this.Fe=0,this.Me=Sm(),this.xe=Pt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Le(),n=Le(),r=Le();return this.Me.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Ie(38017,{changeType:o})}}),new Zi(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=Sm()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Ke(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class o4{constructor(e){this.ze=e,this.je=new Map,this.He=pr(),this.Je=Aa(),this.Ye=Aa(),this.Ze=new it(Me)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:Ie(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,s)=>{this.it(s)&&n(s)})}ot(e){const n=e.targetId,r=e.Ce.count,s=this._t(n);if(s){const o=s.target;if(fd(o))if(r===0){const i=new xe(o.path);this.tt(n,i,jt.newNoDocument(i,Re.min()))}else Ke(r===1,20013,{expectedCount:r});else{const i=this.ut(n);if(i!==r){const a=this.ct(e),u=a?this.lt(a,e,i):1;if(u!==0){this.st(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,c)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=n;let i,a;try{i=zr(r).toUint8Array()}catch(u){if(u instanceof X_)return oo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Rh(i,s,o)}catch(u){return oo(u instanceof Zo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.pe===0?null:a}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let s=0;return r.forEach(o=>{const i=this.ze.Pt(),a=`projects/${i.projectId}/databases/${i.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.tt(n,o,null),s++)}),s}It(e){const n=new Map;this.je.forEach((o,i)=>{const a=this._t(i);if(a){if(o.current&&fd(a.target)){const u=new xe(a.target.path);this.Et(u).has(i)||this.dt(i,u)||this.tt(i,u,jt.newNoDocument(u,e))}o.Le&&(n.set(i,o.qe()),o.Qe())}});let r=Le();this.Ye.forEach((o,i)=>{let a=!0;i.forEachWhile(u=>{const c=this._t(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.He.forEach((o,i)=>i.setReadTime(e));const s=new mu(e,n,this.Ze,this.He,r);return this.He=pr(),this.Je=Aa(),this.Ye=Aa(),this.Ze=new it(Me),s}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const s=this.rt(e);this.dt(e,n)?s.$e(n,1):s.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new Am,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new vt(Me),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new vt(Me),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||he("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Am),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Aa(){return new it(xe.comparator)}function Sm(){return new it(xe.comparator)}const i4={asc:"ASCENDING",desc:"DESCENDING"},a4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},l4={and:"AND",or:"OR"};class u4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function md(t,e){return t.useProto3Json||uu(e)?e:{value:e}}function Tl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Cb(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function c4(t,e){return Tl(t,e.toTimestamp())}function Un(t){return Ke(!!t,49232),Re.fromTimestamp(function(n){const r=Br(n);return new yt(r.seconds,r.nanos)}(t))}function Ph(t,e){return yd(t,e).canonicalString()}function yd(t,e){const n=function(s){return new nt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Rb(t){const e=nt.fromString(t);return Ke(Vb(e),10190,{key:e.toString()}),e}function vd(t,e){return Ph(t.databaseId,e.path)}function Ic(t,e){const n=Rb(e);if(n.get(1)!==t.databaseId.projectId)throw new fe(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new fe(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new xe(Ob(n))}function Pb(t,e){return Ph(t.databaseId,e)}function d4(t){const e=Rb(t);return e.length===4?nt.emptyPath():Ob(e)}function _d(t){return new nt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ob(t){return Ke(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Cm(t,e,n){return{name:vd(t,e),fields:n.value.mapValue.fields}}function h4(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ie(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(c,h){return c.useProto3Json?(Ke(h===void 0||typeof h=="string",58123),Pt.fromBase64String(h||"")):(Ke(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Pt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,a=i&&function(c){const h=c.code===void 0?X.UNKNOWN:kb(c.code);return new fe(h,c.message||"")}(i);n=new Sb(r,s,o,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ic(t,r.document.name),o=Un(r.document.updateTime),i=r.document.createTime?Un(r.document.createTime):Re.min(),a=new on({mapValue:{fields:r.document.fields}}),u=jt.newFoundDocument(s,o,i,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Ka(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ic(t,r.document),o=r.readTime?Un(r.readTime):Re.min(),i=jt.newNoDocument(s,o),a=r.removedTargetIds||[];n=new Ka([],a,i.key,i)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ic(t,r.document),o=r.removedTargetIds||[];n=new Ka([],o,s,null)}else{if(!("filter"in e))return Ie(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,i=new n4(s,o),a=r.targetId;n=new Ab(a,i)}}return n}function f4(t,e){let n;if(e instanceof gu)n={update:Cm(t,e.key,e.value)};else if(e instanceof Ib)n={delete:vd(t,e.key)};else if(e instanceof Rs)n={update:Cm(t,e.key,e.data),updateMask:x4(e.fieldMask)};else{if(!(e instanceof ZP))return Ie(16599,{ft:e.type});n={verify:vd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,i){const a=i.transform;if(a instanceof xl)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof $i)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Li)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof El)return{fieldPath:i.field.canonicalString(),increment:a.Re};throw Ie(20930,{transform:i.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:c4(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ie(27497)}(t,e.precondition)),n}function p4(t,e){return t&&t.length>0?(Ke(e!==void 0,14353),t.map(n=>function(s,o){let i=s.updateTime?Un(s.updateTime):Un(o);return i.isEqual(Re.min())&&(i=Un(o)),new JP(i,s.transformResults||[])}(n,e))):[]}function g4(t,e){return{documents:[Pb(t,e.path)]}}function m4(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Pb(t,s);const o=function(c){if(c.length!==0)return Db(Sn.create(c,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const i=function(c){if(c.length!==0)return c.map(h=>function(g){return{field:Hs(g.field),direction:_4(g.dir)}}(h))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const a=md(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{gt:n,parent:s}}function y4(t){let e=d4(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ke(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(f){const g=Nb(f);return g instanceof Sn&&lb(g)?g.getFilters():[g]}(n.where));let i=[];n.orderBy&&(i=function(f){return f.map(g=>function(_){return new Mi(Ks(_.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,uu(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(f){const g=!!f.before,m=f.values||[];return new wl(m,g)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const g=!f.before,m=f.values||[];return new wl(m,g)}(n.endAt)),$P(e,s,i,o,a,"F",u,c)}function v4(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Nb(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ks(n.unaryFilter.field);return gt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ks(n.unaryFilter.field);return gt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ks(n.unaryFilter.field);return gt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Ks(n.unaryFilter.field);return gt.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}}(t):t.fieldFilter!==void 0?function(n){return gt.create(Ks(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Sn.create(n.compositeFilter.filters.map(r=>Nb(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}}(n.compositeFilter.op))}(t):Ie(30097,{filter:t})}function _4(t){return i4[t]}function b4(t){return a4[t]}function w4(t){return l4[t]}function Hs(t){return{fieldPath:t.canonicalString()}}function Ks(t){return Rt.fromServerFormat(t.fieldPath)}function Db(t){return t instanceof gt?function(n){if(n.op==="=="){if(mm(n.value))return{unaryFilter:{field:Hs(n.field),op:"IS_NAN"}};if(gm(n.value))return{unaryFilter:{field:Hs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(mm(n.value))return{unaryFilter:{field:Hs(n.field),op:"IS_NOT_NAN"}};if(gm(n.value))return{unaryFilter:{field:Hs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hs(n.field),op:b4(n.op),value:n.value}}}(t):t instanceof Sn?function(n){const r=n.getFilters().map(s=>Db(s));return r.length===1?r[0]:{compositeFilter:{op:w4(n.op),filters:r}}}(t):Ie(54877,{filter:t})}function x4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Vb(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,n,r,s,o=Re.min(),i=Re.min(),a=Pt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Or(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Or(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(e){this.wt=e}}function T4(t){const e=y4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?gd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(){this.Cn=new k4}addToCollectionParentIndex(e,n){return this.Cn.add(n),J.resolve()}getCollectionParents(e,n){return J.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return J.resolve()}deleteFieldIndex(e,n){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,n){return J.resolve()}getDocumentsMatchingTarget(e,n){return J.resolve(null)}getIndexType(e,n){return J.resolve(0)}getFieldIndexes(e,n){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,n){return J.resolve(jr.min())}getMinOffsetFromCollectionGroup(e,n){return J.resolve(jr.min())}updateCollectionGroup(e,n,r){return J.resolve()}updateIndexEntries(e,n){return J.resolve()}}class k4{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new vt(nt.comparator),o=!s.has(r);return this.index[n]=s.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new vt(nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Mb=41943040;class Yt{static withCacheSize(e){return new Yt(e,Yt.DEFAULT_COLLECTION_PERCENTILE,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yt.DEFAULT_COLLECTION_PERCENTILE=10,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yt.DEFAULT=new Yt(Mb,Yt.DEFAULT_COLLECTION_PERCENTILE,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yt.DISABLED=new Yt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new uo(0)}static lr(){return new uo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm="LruGarbageCollector",A4=1048576;function Om([t,e],[n,r]){const s=Me(t,n);return s===0?Me(e,r):s}class S4{constructor(e){this.Er=e,this.buffer=new vt(Om),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Om(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class C4{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){he(Pm,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ao(n)?he(Pm,"Ignoring IndexedDB error during garbage collection: ",n):await ko(n)}await this.mr(3e5)})}}class R4{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return J.resolve(lu.le);const r=new S4(n);return this.gr.forEachTarget(e,s=>r.Rr(s.sequenceNumber)).next(()=>this.gr.yr(e,s=>r.Rr(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(Rm)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Rm):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,s,o,i,a,u,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,i=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(o=f,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(c=Date.now(),zs()<=$e.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-h}ms
	Determined least recently used ${s} in `+(a-i)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${f} documents in `+(c-u)+`ms
Total Duration: ${c-h}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:f})))}}function P4(t,e){return new R4(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(){this.changes=new Cs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,jt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?J.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&gi(r.mutation,s,bn.empty(),yt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Le()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Le()){const s=hs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(o=>{let i=Xo();return o.forEach((a,u)=>{i=i.insert(a,u.overlayedDocument)}),i}))}getOverlayedDocuments(e,n){const r=hs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Le()))}populateOverlays(e,n,r){const s=[];return r.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((i,a)=>{n.set(i,a)})})}computeViews(e,n,r,s){let o=pr();const i=pi(),a=function(){return pi()}();return n.forEach((u,c)=>{const h=r.get(c.key);s.has(c.key)&&(h===void 0||h.mutation instanceof Rs)?o=o.insert(c.key,c):h!==void 0?(i.set(c.key,h.mutation.getFieldMask()),gi(h.mutation,c,h.mutation.getFieldMask(),yt.now())):i.set(c.key,bn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((c,h)=>i.set(c,h)),n.forEach((c,h)=>{var f;return a.set(c,new N4(h,(f=i.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=pi();let s=new it((i,a)=>i-a),o=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(i=>{for(const a of i)a.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let h=r.get(u)||bn.empty();h=a.applyToLocalView(c,h),r.set(u,h);const f=(s.get(a.batchId)||Le()).add(u);s=s.insert(a.batchId,f)})}).next(()=>{const i=[],a=s.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,h=u.value,f=yb();h.forEach(g=>{if(!o.has(g)){const m=Eb(n.get(g),r.get(g));m!==null&&f.set(g,m),o=o.add(g)}}),i.push(this.documentOverlayCache.saveOverlays(e,c,f))}return J.waitFor(i)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(i){return xe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):hb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(o=>{const i=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-o.size):J.resolve(hs());let a=Oi,u=o;return i.next(c=>J.forEach(c,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(h)?J.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,u,c,Le())).next(h=>({batchId:a,changes:mb(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new xe(n)).next(r=>{let s=Xo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const o=n.collectionGroup;let i=Xo();return this.indexManager.getCollectionParents(e,o).next(a=>J.forEach(a,u=>{const c=function(f,g){return new So(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(h=>{h.forEach((f,g)=>{i=i.insert(f,g)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(i=>(o=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,s))).next(i=>{o.forEach((u,c)=>{const h=c.getKey();i.get(h)===null&&(i=i.insert(h,jt.newInvalidDocument(h)))});let a=Xo();return i.forEach((u,c)=>{const h=o.get(u);h!==void 0&&gi(h.mutation,c,bn.empty(),yt.now()),hu(n,c)&&(a=a.insert(u,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return J.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Un(s.createTime)}}(n)),J.resolve()}getNamedQuery(e,n){return J.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(s){return{name:s.name,query:T4(s.bundledQuery),readTime:Un(s.readTime)}}(n)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(){this.overlays=new it(xe.comparator),this.Qr=new Map}getOverlay(e,n){return J.resolve(this.overlays.get(n))}getOverlays(e,n){const r=hs();return J.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,o)=>{this.bt(e,n,o)}),J.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Qr.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Qr.delete(r)),J.resolve()}getOverlaysForCollection(e,n,r){const s=hs(),o=n.length+1,i=new xe(n.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===o&&u.largestBatchId>r&&s.set(u.getKey(),u)}return J.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let o=new it((c,h)=>c-h);const i=this.overlays.getIterator();for(;i.hasNext();){const c=i.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=o.get(c.largestBatchId);h===null&&(h=hs(),o=o.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=hs(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=s)););return J.resolve(a)}bt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const i=this.Qr.get(s.largestBatchId).delete(r.key);this.Qr.set(s.largestBatchId,i)}this.overlays=this.overlays.insert(r.key,new t4(n,r));let o=this.Qr.get(n);o===void 0&&(o=Le(),this.Qr.set(n,o)),this.Qr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(){this.sessionToken=Pt.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(){this.$r=new vt(_t.Ur),this.Kr=new vt(_t.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const r=new _t(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new _t(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){const n=new xe(new nt([])),r=new _t(n,e),s=new _t(n,e+1),o=[];return this.Kr.forEachInRange([r,s],i=>{this.zr(i),o.push(i.key)}),o}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new xe(new nt([])),r=new _t(n,e),s=new _t(n,e+1);let o=Le();return this.Kr.forEachInRange([r,s],i=>{o=o.add(i.key)}),o}containsKey(e){const n=new _t(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class _t{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return xe.comparator(e.key,n.key)||Me(e.Zr,n.Zr)}static Wr(e,n){return Me(e.Zr,n.Zr)||xe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new vt(_t.Ur)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const o=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new e4(o,n,r,s);this.mutationQueue.push(i);for(const a of s)this.Xr=this.Xr.add(new _t(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return J.resolve(i)}lookupMutationBatch(e,n){return J.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ti(r),o=s<0?0:s;return J.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?xh:this.nr-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new _t(n,0),s=new _t(n,Number.POSITIVE_INFINITY),o=[];return this.Xr.forEachInRange([r,s],i=>{const a=this.ei(i.Zr);o.push(a)}),J.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new vt(Me);return n.forEach(s=>{const o=new _t(s,0),i=new _t(s,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([o,i],a=>{r=r.add(a.Zr)})}),J.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let o=r;xe.isDocumentKey(o)||(o=o.child(""));const i=new _t(new xe(o),0);let a=new vt(Me);return this.Xr.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(u.Zr)),!0)},i),J.resolve(this.ni(a))}ni(e){const n=[];return e.forEach(r=>{const s=this.ei(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ke(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return J.forEach(n.mutations,s=>{const o=new _t(s.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){const r=new _t(n,0),s=this.Xr.firstAfterOrEqual(r);return J.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(e){this.ii=e,this.docs=function(){return new it(xe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),o=s?s.size:0,i=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:i}),this.size+=i-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return J.resolve(r?r.document.mutableCopy():jt.newInvalidDocument(n))}getEntries(e,n){let r=pr();return n.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():jt.newInvalidDocument(s))}),J.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let o=pr();const i=n.path,a=new xe(i.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!i.isPrefixOf(c.path))break;c.path.length>i.length+1||gP(pP(h),r)<=0||(s.has(h.key)||hu(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return J.resolve(o)}getAllFromCollectionGroup(e,n,r,s){Ie(9500)}si(e,n){return J.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new U4(this)}getSize(e){return J.resolve(this.size)}}class U4 extends O4{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Br.addEntry(e,s)):this.Br.removeEntry(r)}),J.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e){this.persistence=e,this.oi=new Cs(n=>Ih(n),kh),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this._i=0,this.ai=new Oh,this.targetCount=0,this.ui=uo.cr()}forEachTarget(e,n){return this.oi.forEach((r,s)=>n(s)),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),J.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new uo(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,J.resolve()}updateTargetData(e,n){return this.Tr(n),J.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,n,r){let s=0;const o=[];return this.oi.forEach((i,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.oi.delete(i),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),J.waitFor(o).next(()=>s)}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,n){const r=this.oi.get(n)||null;return J.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),J.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(i=>{o.push(s.markPotentiallyOrphaned(e,i))}),J.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),J.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ai.Yr(n);return J.resolve(r)}containsKey(e,n){return J.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e,n){this.ci={},this.overlays={},this.li=new lu(0),this.hi=!1,this.hi=!0,this.Pi=new $4,this.referenceDelegate=e(this),this.Ti=new j4(this),this.indexManager=new I4,this.remoteDocumentCache=function(s){return new F4(s)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new E4(n),this.Ei=new V4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new M4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new L4(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){he("MemoryPersistence","Starting transaction:",e);const s=new B4(this.li.next());return this.referenceDelegate.di(),r(s).next(o=>this.referenceDelegate.Ai(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Ri(e,n){return J.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}}class B4 extends yP{constructor(e){super(),this.currentSequenceNumber=e}}class Nh{constructor(e){this.persistence=e,this.Vi=new Oh,this.mi=null}static fi(e){return new Nh(e)}get gi(){if(this.mi)return this.mi;throw Ie(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),J.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),J.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),J.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(s=>this.gi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.gi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.gi,r=>{const s=xe.fromPath(r);return this.pi(e,s).next(o=>{o||n.removeEntry(s,Re.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return J.or([()=>J.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class Il{constructor(e,n){this.persistence=e,this.yi=new Cs(r=>bP(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=P4(this,n)}static fi(e,n){return new Il(e,n)}di(){}Ai(e){return J.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.Sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}Sr(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return J.forEach(this.yi,(r,s)=>this.Dr(e,r,s).next(o=>o?J.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.si(e,i=>this.Dr(e,i,n).next(a=>{a||(r++,o.removeEntry(i,Re.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),J.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),J.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),J.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),J.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=za(e.data.value)),n}Dr(e,n,r){return J.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.yi.get(n);return J.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.ds=r,this.As=s}static Rs(e,n){let r=Le(),s=Le();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new Dh(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return Zk()?8:vP(Kt())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,s){const o={result:null};return this.ws(e,n).next(i=>{o.result=i}).next(()=>{if(!o.result)return this.Ss(e,n,s,r).next(i=>{o.result=i})}).next(()=>{if(o.result)return;const i=new z4;return this.bs(e,n,i).next(a=>{if(o.result=a,this.fs)return this.Ds(e,n,i,a.size)})}).next(()=>o.result)}Ds(e,n,r,s){return r.documentReadCount<this.gs?(zs()<=$e.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",qs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),J.resolve()):(zs()<=$e.DEBUG&&he("QueryEngine","Query:",qs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ps*s?(zs()<=$e.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",qs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fn(n))):J.resolve())}ws(e,n){if(bm(n))return J.resolve(null);let r=Fn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=gd(n,null,"F"),r=Fn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const i=Le(...o);return this.ys.getDocuments(e,i).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.vs(n,a);return this.Cs(n,c,i,u.readTime)?this.ws(e,gd(n,null,"F")):this.Fs(e,c,n,u)}))})))}Ss(e,n,r,s){return bm(n)||s.isEqual(Re.min())?J.resolve(null):this.ys.getDocuments(e,r).next(o=>{const i=this.vs(n,o);return this.Cs(n,i,r,s)?J.resolve(null):(zs()<=$e.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),qs(n)),this.Fs(e,i,n,fP(s,Oi)).next(a=>a))})}vs(e,n){let r=new vt(pb(e));return n.forEach((s,o)=>{hu(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}bs(e,n,r){return zs()<=$e.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",qs(n)),this.ys.getDocumentsMatchingQuery(e,n,jr.min(),r)}Fs(e,n,r,s){return this.ys.getDocumentsMatchingQuery(e,r,s).next(o=>(n.forEach(i=>{o=o.insert(i.key,i)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vh="LocalStore",H4=3e8;class K4{constructor(e,n,r,s){this.persistence=e,this.Ms=n,this.serializer=s,this.xs=new it(Me),this.Os=new Cs(o=>Ih(o),kh),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new D4(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function W4(t,e,n,r){return new K4(t,e,n,r)}async function Lb(t,e){const n=Oe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const i=[],a=[];let u=Le();for(const c of s){i.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of o){a.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(c=>({ks:c,removedBatchIds:i,addedBatchIds:a}))})})}function G4(t,e){const n=Oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),o=n.Bs.newChangeBuffer({trackRemovals:!0});return function(a,u,c,h){const f=c.batch,g=f.keys();let m=J.resolve();return g.forEach(_=>{m=m.next(()=>h.getEntry(u,_)).next(T=>{const x=c.docVersions.get(_);Ke(x!==null,48541),T.version.compareTo(x)<0&&(f.applyToRemoteDocument(T,c),T.isValidDocument()&&(T.setReadTime(c.commitVersion),h.addEntry(T)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Le();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Fb(t){const e=Oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function Q4(t,e){const n=Oe(t),r=e.snapshotVersion;let s=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const i=n.Bs.newChangeBuffer({trackRemovals:!0});s=n.xs;const a=[];e.targetChanges.forEach((h,f)=>{const g=s.get(f);if(!g)return;a.push(n.Ti.removeMatchingKeys(o,h.removedDocuments,f).next(()=>n.Ti.addMatchingKeys(o,h.addedDocuments,f)));let m=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(Pt.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,r)),s=s.insert(f,m),function(T,x,C){return T.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=H4?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(g,m,h)&&a.push(n.Ti.updateTargetData(o,m))});let u=pr(),c=Le();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(J4(o,i,e.documentUpdates).next(h=>{u=h.qs,c=h.Qs})),!r.isEqual(Re.min())){const h=n.Ti.getLastRemoteSnapshotVersion(o).next(f=>n.Ti.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return J.waitFor(a).next(()=>i.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,c)).next(()=>u)}).then(o=>(n.xs=s,o))}function J4(t,e,n){let r=Le(),s=Le();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let i=pr();return n.forEach((a,u)=>{const c=o.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),u.isNoDocument()&&u.version.isEqual(Re.min())?(e.removeEntry(a,u.readTime),i=i.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),i=i.insert(a,u)):he(Vh,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{qs:i,Qs:s}})}function Y4(t,e){const n=Oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=xh),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function X4(t,e){const n=Oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ti.getTargetData(r,e).next(o=>o?(s=o,J.resolve(s)):n.Ti.allocateTargetId(r).next(i=>(s=new Or(e,i,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.xs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}async function bd(t,e,n){const r=Oe(t),s=r.xs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,i=>r.persistence.referenceDelegate.removeTarget(i,s))}catch(i){if(!Ao(i))throw i;he(Vh,`Failed to update sequence numbers for target ${e}: ${i}`)}r.xs=r.xs.remove(e),r.Os.delete(s.target)}function Nm(t,e,n){const r=Oe(t);let s=Re.min(),o=Le();return r.persistence.runTransaction("Execute query","readwrite",i=>function(u,c,h){const f=Oe(u),g=f.Os.get(h);return g!==void 0?J.resolve(f.xs.get(g)):f.Ti.getTargetData(c,h)}(r,i,Fn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(i,a.targetId).next(u=>{o=u})}).next(()=>r.Ms.getDocumentsMatchingQuery(i,e,n?s:Re.min(),n?o:Le())).next(a=>(Z4(r,FP(e),a),{documents:a,$s:o})))}function Z4(t,e,n){let r=t.Ns.get(e)||Re.min();n.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Ns.set(e,r)}class Dm{constructor(){this.activeTargetIds=HP()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class eO{constructor(){this.xo=new Dm,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Dm,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm="ConnectivityMonitor";class Mm{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){he(Vm,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){he(Vm,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sa=null;function wd(){return Sa===null?Sa=function(){return 268435456+Math.round(2147483648*Math.random())}():Sa++,"0x"+Sa.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc="RestConnection",nO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class rO{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${s}`,this.Go=this.databaseId.database===_l?`project_id=${r}`:`project_id=${r}&database_id=${s}`}zo(e,n,r,s,o){const i=wd(),a=this.jo(e,n.toUriEncodedString());he(kc,`Sending RPC '${e}' ${i}:`,a,r);const u={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(u,s,o);const{host:c}=new URL(a),h=Wi(c);return this.Jo(e,a,u,r,h).then(f=>(he(kc,`Received RPC '${e}' ${i}: `,f),f),f=>{throw oo(kc,`RPC '${e}' ${i} failed with error: `,f,"url: ",a,"request:",r),f})}Yo(e,n,r,s,o,i){return this.zo(e,n,r,s,o)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Io}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}jo(e,n){const r=nO[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $t="WebChannelConnection";class oO extends rO{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,o){const i=wd();return new Promise((a,u)=>{const c=new j_;c.setWithCredentials(!0),c.listenOnce(B_.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Ba.NO_ERROR:const f=c.getResponseJson();he($t,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),a(f);break;case Ba.TIMEOUT:he($t,`RPC '${e}' ${i} timed out`),u(new fe(X.DEADLINE_EXCEEDED,"Request time out"));break;case Ba.HTTP_ERROR:const g=c.getStatus();if(he($t,`RPC '${e}' ${i} failed with status:`,g,"response text:",c.getResponseText()),g>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const _=m==null?void 0:m.error;if(_&&_.status&&_.message){const T=function(C){const P=C.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(P)>=0?P:X.UNKNOWN}(_.status);u(new fe(T,_.message))}else u(new fe(X.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new fe(X.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{l_:e,streamId:i,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{he($t,`RPC '${e}' ${i} completed.`)}});const h=JSON.stringify(s);he($t,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",h,r,15)})}T_(e,n,r){const s=wd(),o=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=H_(),a=q_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Ho(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=o.join("");he($t,`Creating RPC '${e}' stream ${s}: ${h}`,u);const f=i.createWebChannel(h,u);let g=!1,m=!1;const _=new sO({Zo:x=>{m?he($t,`Not sending because RPC '${e}' stream ${s} is closed:`,x):(g||(he($t,`Opening RPC '${e}' stream ${s} transport.`),f.open(),g=!0),he($t,`RPC '${e}' stream ${s} sending:`,x),f.send(x))},Xo:()=>f.close()}),T=(x,C,P)=>{x.listen(C,V=>{try{P(V)}catch(j){setTimeout(()=>{throw j},0)}})};return T(f,Yo.EventType.OPEN,()=>{m||(he($t,`RPC '${e}' stream ${s} transport opened.`),_.__())}),T(f,Yo.EventType.CLOSE,()=>{m||(m=!0,he($t,`RPC '${e}' stream ${s} transport closed`),_.u_())}),T(f,Yo.EventType.ERROR,x=>{m||(m=!0,oo($t,`RPC '${e}' stream ${s} transport errored. Name:`,x.name,"Message:",x.message),_.u_(new fe(X.UNAVAILABLE,"The operation could not be completed")))}),T(f,Yo.EventType.MESSAGE,x=>{var C;if(!m){const P=x.data[0];Ke(!!P,16349);const V=P,j=(V==null?void 0:V.error)||((C=V[0])===null||C===void 0?void 0:C.error);if(j){he($t,`RPC '${e}' stream ${s} received error:`,j);const U=j.status;let q=function(b){const S=pt[b];if(S!==void 0)return kb(S)}(U),k=j.message;q===void 0&&(q=X.INTERNAL,k="Unknown error status: "+U+" with message "+j.message),m=!0,_.u_(new fe(q,k)),f.close()}else he($t,`RPC '${e}' stream ${s} received:`,P),_.c_(P)}}),T(a,z_.STAT_EVENT,x=>{x.stat===ld.PROXY?he($t,`RPC '${e}' stream ${s} detected buffering proxy`):x.stat===ld.NOPROXY&&he($t,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{_.a_()},0),_}}function Ac(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yu(t){return new u4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e,n,r=1e3,s=1.5,o=6e4){this.xi=e,this.timerId=n,this.I_=r,this.E_=s,this.d_=o,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(e){this.cancel();const n=Math.floor(this.A_+this.g_()),r=Math.max(0,Date.now()-this.V_),s=Math.max(0,n-r);s>0&&he("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.A_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.R_=this.xi.enqueueAfterDelay(this.timerId,s,()=>(this.V_=Date.now(),e())),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){this.R_!==null&&(this.R_.skipDelay(),this.R_=null)}cancel(){this.R_!==null&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m="PersistentStream";class jb{constructor(e,n,r,s,o,i,a,u){this.xi=e,this.y_=r,this.w_=s,this.connection=o,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.S_=0,this.b_=null,this.D_=null,this.stream=null,this.v_=0,this.C_=new Ub(e,n)}F_(){return this.state===1||this.state===5||this.M_()}M_(){return this.state===2||this.state===3}start(){this.v_=0,this.state!==4?this.auth():this.x_()}async stop(){this.F_()&&await this.close(0)}O_(){this.state=0,this.C_.reset()}N_(){this.M_()&&this.b_===null&&(this.b_=this.xi.enqueueAfterDelay(this.y_,6e4,()=>this.B_()))}L_(e){this.k_(),this.stream.send(e)}async B_(){if(this.M_())return this.close(0)}k_(){this.b_&&(this.b_.cancel(),this.b_=null)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}async close(e,n){this.k_(),this.q_(),this.C_.cancel(),this.S_++,e!==4?this.C_.reset():n&&n.code===X.RESOURCE_EXHAUSTED?(fr(n.toString()),fr("Using maximum backoff delay to prevent overloading the backend."),this.C_.m_()):n&&n.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Q_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}Q_(){}auth(){this.state=1;const e=this.U_(this.S_),n=this.S_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.S_===n&&this.K_(r,s)},r=>{e(()=>{const s=new fe(X.UNKNOWN,"Fetching auth token failed: "+r.message);return this.W_(s)})})}K_(e,n){const r=this.U_(this.S_);this.stream=this.G_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.D_=this.xi.enqueueAfterDelay(this.w_,1e4,()=>(this.M_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(s=>{r(()=>this.W_(s))}),this.stream.onMessage(s=>{r(()=>++this.v_==1?this.z_(s):this.onNext(s))})}x_(){this.state=5,this.C_.f_(async()=>{this.state=0,this.start()})}W_(e){return he($m,`close with error: ${e}`),this.stream=null,this.close(4,e)}U_(e){return n=>{this.xi.enqueueAndForget(()=>this.S_===e?n():(he($m,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class iO extends jb{constructor(e,n,r,s,o,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,i),this.serializer=o}G_(e,n){return this.connection.T_("Listen",e,n)}z_(e){return this.onNext(e)}onNext(e){this.C_.reset();const n=h4(this.serializer,e),r=function(o){if(!("targetChange"in o))return Re.min();const i=o.targetChange;return i.targetIds&&i.targetIds.length?Re.min():i.readTime?Un(i.readTime):Re.min()}(e);return this.listener.j_(n,r)}H_(e){const n={};n.database=_d(this.serializer),n.addTarget=function(o,i){let a;const u=i.target;if(a=fd(u)?{documents:g4(o,u)}:{query:m4(o,u).gt},a.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){a.resumeToken=Cb(o,i.resumeToken);const c=md(o,i.expectedCount);c!==null&&(a.expectedCount=c)}else if(i.snapshotVersion.compareTo(Re.min())>0){a.readTime=Tl(o,i.snapshotVersion.toTimestamp());const c=md(o,i.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=v4(this.serializer,e);r&&(n.labels=r),this.L_(n)}J_(e){const n={};n.database=_d(this.serializer),n.removeTarget=e,this.L_(n)}}class aO extends jb{constructor(e,n,r,s,o,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,i),this.serializer=o}get Y_(){return this.v_>0}start(){this.lastStreamToken=void 0,super.start()}Q_(){this.Y_&&this.Z_([])}G_(e,n){return this.connection.T_("Write",e,n)}z_(e){return Ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.X_()}onNext(e){Ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.C_.reset();const n=p4(e.writeResults,e.commitTime),r=Un(e.commitTime);return this.listener.ea(r,n)}ta(){const e={};e.database=_d(this.serializer),this.L_(e)}Z_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>f4(this.serializer,r))};this.L_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{}class uO extends lO{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.na=!1}ra(){if(this.na)throw new fe(X.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,s){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,i])=>this.connection.zo(e,yd(n,r),s,o,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new fe(X.UNKNOWN,o.toString())})}Yo(e,n,r,s,o){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Yo(e,yd(n,r),s,i,a,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new fe(X.UNKNOWN,i.toString())})}terminate(){this.na=!0,this.connection.terminate()}}class cO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){this.ia===0&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve())))}ca(e){this.state==="Online"?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.aa("Offline")))}set(e){this.la(),this.ia=0,e==="Online"&&(this.oa=!1),this.aa(e)}aa(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ua(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.oa?(fr(n),this.oa=!1):he("OnlineStateTracker",n)}la(){this.sa!==null&&(this.sa.cancel(),this.sa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks="RemoteStore";class dO{constructor(e,n,r,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=o,this.Ea.No(i=>{r.enqueueAndForget(async()=>{Ps(this)&&(he(ks,"Restarting streams for network reachability change."),await async function(u){const c=Oe(u);c.Ta.add(4),await ea(c),c.da.set("Unknown"),c.Ta.delete(4),await vu(c)}(this))})}),this.da=new cO(r,s)}}async function vu(t){if(Ps(t))for(const e of t.Ia)await e(!0)}async function ea(t){for(const e of t.Ia)await e(!1)}function Bb(t,e){const n=Oe(t);n.Pa.has(e.targetId)||(n.Pa.set(e.targetId,e),Fh(n)?Lh(n):Co(n).M_()&&$h(n,e))}function Mh(t,e){const n=Oe(t),r=Co(n);n.Pa.delete(e),r.M_()&&zb(n,e),n.Pa.size===0&&(r.M_()?r.N_():Ps(n)&&n.da.set("Unknown"))}function $h(t,e){if(t.Aa.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Co(t).H_(e)}function zb(t,e){t.Aa.Ke(e),Co(t).J_(e)}function Lh(t){t.Aa=new o4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Pa.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),Co(t).start(),t.da._a()}function Fh(t){return Ps(t)&&!Co(t).F_()&&t.Pa.size>0}function Ps(t){return Oe(t).Ta.size===0}function qb(t){t.Aa=void 0}async function hO(t){t.da.set("Online")}async function fO(t){t.Pa.forEach((e,n)=>{$h(t,e)})}async function pO(t,e){qb(t),Fh(t)?(t.da.ca(e),Lh(t)):t.da.set("Unknown")}async function gO(t,e,n){if(t.da.set("Online"),e instanceof Sb&&e.state===2&&e.cause)try{await async function(s,o){const i=o.cause;for(const a of o.targetIds)s.Pa.has(a)&&(await s.remoteSyncer.rejectListen(a,i),s.Pa.delete(a),s.Aa.removeTarget(a))}(t,e)}catch(r){he(ks,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await kl(t,r)}else if(e instanceof Ka?t.Aa.Xe(e):e instanceof Ab?t.Aa.ot(e):t.Aa.nt(e),!n.isEqual(Re.min()))try{const r=await Fb(t.localStore);n.compareTo(r)>=0&&await function(o,i){const a=o.Aa.It(i);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=o.Pa.get(c);h&&o.Pa.set(c,h.withResumeToken(u.resumeToken,i))}}),a.targetMismatches.forEach((u,c)=>{const h=o.Pa.get(u);if(!h)return;o.Pa.set(u,h.withResumeToken(Pt.EMPTY_BYTE_STRING,h.snapshotVersion)),zb(o,u);const f=new Or(h.target,u,c,h.sequenceNumber);$h(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){he(ks,"Failed to raise snapshot:",r),await kl(t,r)}}async function kl(t,e,n){if(!Ao(e))throw e;t.Ta.add(1),await ea(t),t.da.set("Offline"),n||(n=()=>Fb(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{he(ks,"Retrying IndexedDB access"),await n(),t.Ta.delete(1),await vu(t)})}function Hb(t,e){return e().catch(n=>kl(t,n,e))}async function _u(t){const e=Oe(t),n=Hr(e);let r=e.ha.length>0?e.ha[e.ha.length-1].batchId:xh;for(;mO(e);)try{const s=await Y4(e.localStore,r);if(s===null){e.ha.length===0&&n.N_();break}r=s.batchId,yO(e,s)}catch(s){await kl(e,s)}Kb(e)&&Wb(e)}function mO(t){return Ps(t)&&t.ha.length<10}function yO(t,e){t.ha.push(e);const n=Hr(t);n.M_()&&n.Y_&&n.Z_(e.mutations)}function Kb(t){return Ps(t)&&!Hr(t).F_()&&t.ha.length>0}function Wb(t){Hr(t).start()}async function vO(t){Hr(t).ta()}async function _O(t){const e=Hr(t);for(const n of t.ha)e.Z_(n.mutations)}async function bO(t,e,n){const r=t.ha.shift(),s=Ch.from(r,e,n);await Hb(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await _u(t)}async function wO(t,e){e&&Hr(t).Y_&&await async function(r,s){if(function(i){return r4(i)&&i!==X.ABORTED}(s.code)){const o=r.ha.shift();Hr(r).O_(),await Hb(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),await _u(r)}}(t,e),Kb(t)&&Wb(t)}async function Lm(t,e){const n=Oe(t);n.asyncQueue.verifyOperationInProgress(),he(ks,"RemoteStore received new credentials");const r=Ps(n);n.Ta.add(3),await ea(n),r&&n.da.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ta.delete(3),await vu(n)}async function xO(t,e){const n=Oe(t);e?(n.Ta.delete(2),await vu(n)):e||(n.Ta.add(2),await ea(n),n.da.set("Unknown"))}function Co(t){return t.Ra||(t.Ra=function(n,r,s){const o=Oe(n);return o.ra(),new iO(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{e_:hO.bind(null,t),n_:fO.bind(null,t),i_:pO.bind(null,t),j_:gO.bind(null,t)}),t.Ia.push(async e=>{e?(t.Ra.O_(),Fh(t)?Lh(t):t.da.set("Unknown")):(await t.Ra.stop(),qb(t))})),t.Ra}function Hr(t){return t.Va||(t.Va=function(n,r,s){const o=Oe(n);return o.ra(),new aO(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:vO.bind(null,t),i_:wO.bind(null,t),X_:_O.bind(null,t),ea:bO.bind(null,t)}),t.Ia.push(async e=>{e?(t.Va.O_(),await _u(t)):(await t.Va.stop(),t.ha.length>0&&(he(ks,`Stopping write stream with ${t.ha.length} pending writes`),t.ha=[]))})),t.Va}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,n,r,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new ms,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,o){const i=Date.now()+r,a=new Uh(e,n,i,s,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jh(t,e){if(fr("AsyncQueue",`${e}: ${t}`),Ao(t))return new fe(X.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{static emptySet(e){return new eo(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||xe.comparator(n.key,r.key):(n,r)=>xe.comparator(n.key,r.key),this.keyedMap=Xo(),this.sortedSet=new it(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof eo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new eo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(){this.ma=new it(xe.comparator)}track(e){const n=e.doc.key,r=this.ma.get(n);r?e.type!==0&&r.type===3?this.ma=this.ma.insert(n,e):e.type===3&&r.type!==1?this.ma=this.ma.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ma=this.ma.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ma=this.ma.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ma=this.ma.remove(n):e.type===1&&r.type===2?this.ma=this.ma.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ma=this.ma.insert(n,{type:2,doc:e.doc}):Ie(63341,{Vt:e,fa:r}):this.ma=this.ma.insert(n,e)}ga(){const e=[];return this.ma.inorderTraversal((n,r)=>{e.push(r)}),e}}class co{constructor(e,n,r,s,o,i,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,o){const i=[];return n.forEach(a=>{i.push({type:0,doc:a})}),new co(e,n,eo.emptySet(n),i,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&du(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(){this.pa=void 0,this.ya=[]}wa(){return this.ya.some(e=>e.Sa())}}class TO{constructor(){this.queries=Um(),this.onlineState="Unknown",this.ba=new Set}terminate(){(function(n,r){const s=Oe(n),o=s.queries;s.queries=Um(),o.forEach((i,a)=>{for(const u of a.ya)u.onError(r)})})(this,new fe(X.ABORTED,"Firestore shutting down"))}}function Um(){return new Cs(t=>fb(t),du)}async function IO(t,e){const n=Oe(t);let r=3;const s=e.query;let o=n.queries.get(s);o?!o.wa()&&e.Sa()&&(r=2):(o=new EO,r=e.Sa()?0:1);try{switch(r){case 0:o.pa=await n.onListen(s,!0);break;case 1:o.pa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(i){const a=jh(i,`Initialization of query '${qs(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,o),o.ya.push(e),e.Da(n.onlineState),o.pa&&e.va(o.pa)&&Bh(n)}async function kO(t,e){const n=Oe(t),r=e.query;let s=3;const o=n.queries.get(r);if(o){const i=o.ya.indexOf(e);i>=0&&(o.ya.splice(i,1),o.ya.length===0?s=e.Sa()?0:1:!o.wa()&&e.Sa()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function AO(t,e){const n=Oe(t);let r=!1;for(const s of e){const o=s.query,i=n.queries.get(o);if(i){for(const a of i.ya)a.va(s)&&(r=!0);i.pa=s}}r&&Bh(n)}function SO(t,e,n){const r=Oe(t),s=r.queries.get(e);if(s)for(const o of s.ya)o.onError(n);r.queries.delete(e)}function Bh(t){t.ba.forEach(e=>{e.next()})}var xd,jm;(jm=xd||(xd={})).Ca="default",jm.Cache="cache";class CO{constructor(e,n,r){this.query=e,this.Fa=n,this.Ma=!1,this.xa=null,this.onlineState="Unknown",this.options=r||{}}va(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new co(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Ma?this.Oa(e)&&(this.Fa.next(e),n=!0):this.Na(e,this.onlineState)&&(this.Ba(e),n=!0),this.xa=e,n}onError(e){this.Fa.error(e)}Da(e){this.onlineState=e;let n=!1;return this.xa&&!this.Ma&&this.Na(this.xa,e)&&(this.Ba(this.xa),n=!0),n}Na(e,n){if(!e.fromCache||!this.Sa())return!0;const r=n!=="Offline";return(!this.options.La||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Oa(e){if(e.docChanges.length>0)return!0;const n=this.xa&&this.xa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Ba(e){e=co.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Ma=!0,this.Fa.next(e)}Sa(){return this.options.source!==xd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e){this.key=e}}class Qb{constructor(e){this.key=e}}class RO{constructor(e,n){this.query=e,this.Ga=n,this.za=null,this.hasCachedResults=!1,this.current=!1,this.ja=Le(),this.mutatedKeys=Le(),this.Ha=pb(e),this.Ja=new eo(this.Ha)}get Ya(){return this.Ga}Za(e,n){const r=n?n.Xa:new Fm,s=n?n.Ja:this.Ja;let o=n?n.mutatedKeys:this.mutatedKeys,i=s,a=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const g=s.get(h),m=hu(this.query,f)?f:null,_=!!g&&this.mutatedKeys.has(g.key),T=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let x=!1;g&&m?g.data.isEqual(m.data)?_!==T&&(r.track({type:3,doc:m}),x=!0):this.eu(g,m)||(r.track({type:2,doc:m}),x=!0,(u&&this.Ha(m,u)>0||c&&this.Ha(m,c)<0)&&(a=!0)):!g&&m?(r.track({type:0,doc:m}),x=!0):g&&!m&&(r.track({type:1,doc:g}),x=!0,(u||c)&&(a=!0)),x&&(m?(i=i.add(m),o=T?o.add(h):o.delete(h)):(i=i.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const h=this.query.limitType==="F"?i.last():i.first();i=i.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ja:i,Xa:r,Cs:a,mutatedKeys:o}}eu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const o=this.Ja;this.Ja=e.Ja,this.mutatedKeys=e.mutatedKeys;const i=e.Xa.ga();i.sort((h,f)=>function(m,_){const T=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{Vt:x})}};return T(m)-T(_)}(h.type,f.type)||this.Ha(h.doc,f.doc)),this.tu(r),s=s!=null&&s;const a=n&&!s?this.nu():[],u=this.ja.size===0&&this.current&&!s?1:0,c=u!==this.za;return this.za=u,i.length!==0||c?{snapshot:new co(this.query,e.Ja,o,i,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),ru:a}:{ru:a}}Da(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ja:this.Ja,Xa:new Fm,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ru:[]}}iu(e){return!this.Ga.has(e)&&!!this.Ja.has(e)&&!this.Ja.get(e).hasLocalMutations}tu(e){e&&(e.addedDocuments.forEach(n=>this.Ga=this.Ga.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ga=this.Ga.delete(n)),this.current=e.current)}nu(){if(!this.current)return[];const e=this.ja;this.ja=Le(),this.Ja.forEach(r=>{this.iu(r.key)&&(this.ja=this.ja.add(r.key))});const n=[];return e.forEach(r=>{this.ja.has(r)||n.push(new Qb(r))}),this.ja.forEach(r=>{e.has(r)||n.push(new Gb(r))}),n}su(e){this.Ga=e.$s,this.ja=Le();const n=this.Za(e.documents);return this.applyChanges(n,!0)}ou(){return co.fromInitialDocuments(this.query,this.Ja,this.mutatedKeys,this.za===0,this.hasCachedResults)}}const zh="SyncEngine";class PO{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class OO{constructor(e){this.key=e,this._u=!1}}class NO{constructor(e,n,r,s,o,i){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=i,this.au={},this.uu=new Cs(a=>fb(a),du),this.cu=new Map,this.lu=new Set,this.hu=new it(xe.comparator),this.Pu=new Map,this.Tu=new Oh,this.Iu={},this.Eu=new Map,this.du=uo.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return this.Au===!0}}async function DO(t,e,n=!0){const r=tw(t);let s;const o=r.uu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.ou()):s=await Jb(r,e,n,!0),s}async function VO(t,e){const n=tw(t);await Jb(n,e,!0,!1)}async function Jb(t,e,n,r){const s=await X4(t.localStore,Fn(e)),o=s.targetId,i=t.sharedClientState.addLocalQueryTarget(o,n);let a;return r&&(a=await MO(t,e,o,i==="current",s.resumeToken)),t.isPrimaryClient&&n&&Bb(t.remoteStore,s),a}async function MO(t,e,n,r,s){t.Ru=(f,g,m)=>async function(T,x,C,P){let V=x.view.Za(C);V.Cs&&(V=await Nm(T.localStore,x.query,!1).then(({documents:k})=>x.view.Za(k,V)));const j=P&&P.targetChanges.get(x.targetId),U=P&&P.targetMismatches.get(x.targetId)!=null,q=x.view.applyChanges(V,T.isPrimaryClient,j,U);return zm(T,x.targetId,q.ru),q.snapshot}(t,f,g,m);const o=await Nm(t.localStore,e,!0),i=new RO(e,o.$s),a=i.Za(o.documents),u=Zi.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=i.applyChanges(a,t.isPrimaryClient,u);zm(t,n,c.ru);const h=new PO(e,n,i);return t.uu.set(e,h),t.cu.has(n)?t.cu.get(n).push(e):t.cu.set(n,[e]),c.snapshot}async function $O(t,e,n){const r=Oe(t),s=r.uu.get(e),o=r.cu.get(s.targetId);if(o.length>1)return r.cu.set(s.targetId,o.filter(i=>!du(i,e))),void r.uu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await bd(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Mh(r.remoteStore,s.targetId),Ed(r,s.targetId)}).catch(ko)):(Ed(r,s.targetId),await bd(r.localStore,s.targetId,!0))}async function LO(t,e){const n=Oe(t),r=n.uu.get(e),s=n.cu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Mh(n.remoteStore,r.targetId))}async function FO(t,e,n){const r=KO(t);try{const s=await function(i,a){const u=Oe(i),c=yt.now(),h=a.reduce((m,_)=>m.add(_.key),Le());let f,g;return u.persistence.runTransaction("Locally write mutations","readwrite",m=>{let _=pr(),T=Le();return u.Bs.getEntries(m,h).next(x=>{_=x,_.forEach((C,P)=>{P.isValidDocument()||(T=T.add(C))})}).next(()=>u.localDocuments.getOverlayedDocuments(m,_)).next(x=>{f=x;const C=[];for(const P of a){const V=XP(P,f.get(P.key).overlayedDocument);V!=null&&C.push(new Rs(P.key,V,ob(V.value.mapValue),ar.exists(!0)))}return u.mutationQueue.addMutationBatch(m,c,C,a)}).next(x=>{g=x;const C=x.applyToLocalDocumentSet(f,T);return u.documentOverlayCache.saveOverlays(m,x.batchId,C)})}).then(()=>({batchId:g.batchId,changes:mb(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(i,a,u){let c=i.Iu[i.currentUser.toKey()];c||(c=new it(Me)),c=c.insert(a,u),i.Iu[i.currentUser.toKey()]=c}(r,s.batchId,n),await ta(r,s.changes),await _u(r.remoteStore)}catch(s){const o=jh(s,"Failed to persist write");n.reject(o)}}async function Yb(t,e){const n=Oe(t);try{const r=await Q4(n.localStore,e);e.targetChanges.forEach((s,o)=>{const i=n.Pu.get(o);i&&(Ke(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?i._u=!0:s.modifiedDocuments.size>0?Ke(i._u,14607):s.removedDocuments.size>0&&(Ke(i._u,42227),i._u=!1))}),await ta(n,r,e)}catch(r){await ko(r)}}function Bm(t,e,n){const r=Oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.uu.forEach((o,i)=>{const a=i.view.Da(e);a.snapshot&&s.push(a.snapshot)}),function(i,a){const u=Oe(i);u.onlineState=a;let c=!1;u.queries.forEach((h,f)=>{for(const g of f.ya)g.Da(a)&&(c=!0)}),c&&Bh(u)}(r.eventManager,e),s.length&&r.au.j_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function UO(t,e,n){const r=Oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Pu.get(e),o=s&&s.key;if(o){let i=new it(xe.comparator);i=i.insert(o,jt.newNoDocument(o,Re.min()));const a=Le().add(o),u=new mu(Re.min(),new Map,new it(Me),i,a);await Yb(r,u),r.hu=r.hu.remove(o),r.Pu.delete(e),qh(r)}else await bd(r.localStore,e,!1).then(()=>Ed(r,e,n)).catch(ko)}async function jO(t,e){const n=Oe(t),r=e.batch.batchId;try{const s=await G4(n.localStore,e);Zb(n,r,null),Xb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ta(n,s)}catch(s){await ko(s)}}async function BO(t,e,n){const r=Oe(t);try{const s=await function(i,a){const u=Oe(i);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,a).next(f=>(Ke(f!==null,37113),h=f.keys(),u.mutationQueue.removeMutationBatch(c,f))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(r.localStore,e);Zb(r,e,n),Xb(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ta(r,s)}catch(s){await ko(s)}}function Xb(t,e){(t.Eu.get(e)||[]).forEach(n=>{n.resolve()}),t.Eu.delete(e)}function Zb(t,e,n){const r=Oe(t);let s=r.Iu[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),r.Iu[r.currentUser.toKey()]=s}}function Ed(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.cu.get(e))t.uu.delete(r),n&&t.au.Vu(r,n);t.cu.delete(e),t.isPrimaryClient&&t.Tu.Hr(e).forEach(r=>{t.Tu.containsKey(r)||ew(t,r)})}function ew(t,e){t.lu.delete(e.path.canonicalString());const n=t.hu.get(e);n!==null&&(Mh(t.remoteStore,n),t.hu=t.hu.remove(e),t.Pu.delete(n),qh(t))}function zm(t,e,n){for(const r of n)r instanceof Gb?(t.Tu.addReference(r.key,e),zO(t,r)):r instanceof Qb?(he(zh,"Document no longer in limbo: "+r.key),t.Tu.removeReference(r.key,e),t.Tu.containsKey(r.key)||ew(t,r.key)):Ie(19791,{mu:r})}function zO(t,e){const n=e.key,r=n.path.canonicalString();t.hu.get(n)||t.lu.has(r)||(he(zh,"New document in limbo: "+n),t.lu.add(r),qh(t))}function qh(t){for(;t.lu.size>0&&t.hu.size<t.maxConcurrentLimboResolutions;){const e=t.lu.values().next().value;t.lu.delete(e);const n=new xe(nt.fromString(e)),r=t.du.next();t.Pu.set(r,new OO(n)),t.hu=t.hu.insert(n,r),Bb(t.remoteStore,new Or(Fn(Ah(n.path)),r,"TargetPurposeLimboResolution",lu.le))}}async function ta(t,e,n){const r=Oe(t),s=[],o=[],i=[];r.uu.isEmpty()||(r.uu.forEach((a,u)=>{i.push(r.Ru(u,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(c){s.push(c);const f=Dh.Rs(u.targetId,c);o.push(f)}}))}),await Promise.all(i),r.au.j_(s),await async function(u,c){const h=Oe(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>J.forEach(c,g=>J.forEach(g.ds,m=>h.persistence.referenceDelegate.addReference(f,g.targetId,m)).next(()=>J.forEach(g.As,m=>h.persistence.referenceDelegate.removeReference(f,g.targetId,m)))))}catch(f){if(!Ao(f))throw f;he(Vh,"Failed to update sequence numbers: "+f)}for(const f of c){const g=f.targetId;if(!f.fromCache){const m=h.xs.get(g),_=m.snapshotVersion,T=m.withLastLimboFreeSnapshotVersion(_);h.xs=h.xs.insert(g,T)}}}(r.localStore,o))}async function qO(t,e){const n=Oe(t);if(!n.currentUser.isEqual(e)){he(zh,"User change. New user:",e.toKey());const r=await Lb(n.localStore,e);n.currentUser=e,function(o,i){o.Eu.forEach(a=>{a.forEach(u=>{u.reject(new fe(X.CANCELLED,i))})}),o.Eu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ta(n,r.ks)}}function HO(t,e){const n=Oe(t),r=n.Pu.get(e);if(r&&r._u)return Le().add(r.key);{let s=Le();const o=n.cu.get(e);if(!o)return s;for(const i of o){const a=n.uu.get(i);s=s.unionWith(a.view.Ya)}return s}}function tw(t){const e=Oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Yb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=HO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=UO.bind(null,e),e.au.j_=AO.bind(null,e.eventManager),e.au.Vu=SO.bind(null,e.eventManager),e}function KO(t){const e=Oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=BO.bind(null,e),e}class Al{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=yu(e.databaseInfo.databaseId),this.sharedClientState=this.pu(e),this.persistence=this.yu(e),await this.persistence.start(),this.localStore=this.wu(e),this.gcScheduler=this.Su(e,this.localStore),this.indexBackfillerScheduler=this.bu(e,this.localStore)}Su(e,n){return null}bu(e,n){return null}wu(e){return W4(this.persistence,new q4,e.initialUser,this.serializer)}yu(e){return new $b(Nh.fi,this.serializer)}pu(e){return new eO}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Al.provider={build:()=>new Al};class WO extends Al{constructor(e){super(),this.cacheSizeBytes=e}Su(e,n){Ke(this.persistence.referenceDelegate instanceof Il,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new C4(r,e.asyncQueue,n)}yu(e){const n=this.cacheSizeBytes!==void 0?Yt.withCacheSize(this.cacheSizeBytes):Yt.DEFAULT;return new $b(r=>Il.fi(r,n),this.serializer)}}class Td{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Bm(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=qO.bind(null,this.syncEngine),await xO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new TO}()}createDatastore(e){const n=yu(e.databaseInfo.databaseId),r=function(o){return new oO(o)}(e.databaseInfo);return function(o,i,a,u){return new uO(o,i,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,o,i,a){return new dO(r,s,o,i,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Bm(this.syncEngine,n,0),function(){return Mm.C()?new Mm:new tO}())}createSyncEngine(e,n){return function(s,o,i,a,u,c,h){const f=new NO(s,o,i,a,u,c);return h&&(f.Au=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const o=Oe(s);he(ks,"RemoteStore shutting down."),o.Ta.add(5),await ea(o),o.Ea.shutdown(),o.da.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Td.provider={build:()=>new Td};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.vu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.vu(this.observer.error,e):fr("Uncaught Error in snapshot listener:",e.toString()))}Cu(){this.muted=!0}vu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr="FirestoreClient";class QO{constructor(e,n,r,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ft.UNAUTHENTICATED,this.clientId=Q_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async i=>{he(Kr,"Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(he(Kr,"Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ms;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=jh(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Sc(t,e){t.asyncQueue.verifyOperationInProgress(),he(Kr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Lb(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function qm(t,e){t.asyncQueue.verifyOperationInProgress();const n=await JO(t);he(Kr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Lm(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Lm(e.remoteStore,s)),t._onlineComponents=e}async function JO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){he(Kr,"Using user provided OfflineComponentProvider");try{await Sc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===X.FAILED_PRECONDITION||s.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;oo("Error using user provided cache. Falling back to memory cache: "+n),await Sc(t,new Al)}}else he(Kr,"Using default OfflineComponentProvider"),await Sc(t,new WO(void 0));return t._offlineComponents}async function nw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(he(Kr,"Using user provided OnlineComponentProvider"),await qm(t,t._uninitializedComponentsProvider._online)):(he(Kr,"Using default OnlineComponentProvider"),await qm(t,new Td))),t._onlineComponents}function YO(t){return nw(t).then(e=>e.syncEngine)}async function Hm(t){const e=await nw(t),n=e.eventManager;return n.onListen=DO.bind(null,e.syncEngine),n.onUnlisten=$O.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=VO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=LO.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(t,e,n){if(!n)throw new fe(X.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function XO(t,e,n,r){if(e===!0&&r===!0)throw new fe(X.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Wm(t){if(!xe.isDocumentKey(t))throw new fe(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Gm(t){if(xe.isDocumentKey(t))throw new fe(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function bu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ie(12329,{type:typeof t})}function to(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new fe(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=bu(t);throw new fe(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow="firestore.googleapis.com",Qm=!0;class Jm{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new fe(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ow,this.ssl=Qm}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Qm;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Mb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<A4)throw new fe(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}XO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rw((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new fe(X.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new fe(X.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new fe(X.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jm({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jm(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new sP;switch(r.type){case"firstParty":return new lP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new fe(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Km.get(n);r&&(he("ComponentProvider","Removing Datastore"),Km.delete(n),r.terminate())}(this),Promise.resolve()}}function ZO(t,e,n,r={}){var s;t=to(t,wu);const o=Wi(e),i=t._getSettings(),a=Object.assign(Object.assign({},i),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;o&&(Cv(`https://${u}`),Rv("Firestore",!0)),i.host!==ow&&i.host!==u&&oo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},i),{host:u,ssl:o,emulatorOptions:r});if(!bs(c,a)&&(t._setSettings(c),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=Ft.MOCK_USER;else{h=qk(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new fe(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Ft(g)}t._authCredentials=new oP(new W_(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Os(this.firestore,e,this._query)}}class en{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new en(this.firestore,e,this._key)}}class Lr extends Os{constructor(e,n,r){super(e,n,Ah(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new en(this.firestore,null,new xe(e))}withConverter(e){return new Lr(this.firestore,e,this._path)}}function eN(t,e,...n){if(t=ht(t),sw("collection","path",e),t instanceof wu){const r=nt.fromString(e,...n);return Gm(r),new Lr(t,null,r)}{if(!(t instanceof en||t instanceof Lr))throw new fe(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(nt.fromString(e,...n));return Gm(r),new Lr(t.firestore,null,r)}}function tN(t,e,...n){if(t=ht(t),arguments.length===1&&(e=Q_.newId()),sw("doc","path",e),t instanceof wu){const r=nt.fromString(e,...n);return Wm(r),new en(t,null,new xe(r))}{if(!(t instanceof en||t instanceof Lr))throw new fe(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(nt.fromString(e,...n));return Wm(r),new en(t.firestore,t instanceof Lr?t.converter:null,new xe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ym="AsyncQueue";class Xm{constructor(e=Promise.resolve()){this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new Ub(this,"async_queue_retry"),this.ec=()=>{const r=Ac();r&&he(Ym,"Visibility state changed to "+r.visibilityState),this.C_.p_()},this.tc=e;const n=Ac();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nc(),this.rc(e)}enterRestrictedMode(e){if(!this.ju){this.ju=!0,this.Zu=e||!1;const n=Ac();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ec)}}enqueue(e){if(this.nc(),this.ju)return new Promise(()=>{});const n=new ms;return this.rc(()=>this.ju&&this.Zu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.zu.push(e),this.sc()))}async sc(){if(this.zu.length!==0){try{await this.zu[0](),this.zu.shift(),this.C_.reset()}catch(e){if(!Ao(e))throw e;he(Ym,"Operation failed with retryable error: "+e)}this.zu.length>0&&this.C_.f_(()=>this.sc())}}rc(e){const n=this.tc.then(()=>(this.Yu=!0,e().catch(r=>{throw this.Ju=r,this.Yu=!1,fr("INTERNAL UNHANDLED ERROR: ",Zm(r)),r}).then(r=>(this.Yu=!1,r))));return this.tc=n,n}enqueueAfterDelay(e,n,r){this.nc(),this.Xu.indexOf(e)>-1&&(n=0);const s=Uh.createAndSchedule(this,e,n,r,o=>this.oc(o));return this.Hu.push(s),s}nc(){this.Ju&&Ie(47125,{_c:Zm(this.Ju)})}verifyOperationInProgress(){}async ac(){let e;do e=this.tc,await e;while(e!==this.tc)}uc(e){for(const n of this.Hu)if(n.timerId===e)return!0;return!1}cc(e){return this.ac().then(()=>{this.Hu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Hu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ac()})}lc(e){this.Xu.push(e)}oc(e){const n=this.Hu.indexOf(e);this.Hu.splice(n,1)}}function Zm(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const o of r)if(o in s&&typeof s[o]=="function")return!0;return!1}(t,["next","error","complete"])}class Sl extends wu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Xm,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Xm(e),this._firestoreClient=void 0,await e}}}function iw(t,e){const n=typeof t=="object"?t:th(),r=typeof t=="string"?t:_l,s=xo(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=Bk("firestore");o&&ZO(s,...o)}return s}function aw(t){if(t._terminated)throw new fe(X.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||nN(t),t._firestoreClient}function nN(t){var e,n,r;const s=t._freezeSettings(),o=function(a,u,c,h){return new EP(a,u,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,rw(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new QO(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ho(Pt.fromBase64String(e))}catch(n){throw new fe(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ho(Pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new fe(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new fe(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new fe(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN=/^__.*__$/;class lw{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Rs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function uw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{hc:t})}}class Gh{constructor(e,n,r,s,o,i){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Pc(),this.fieldTransforms=o||[],this.fieldMask=i||[]}get path(){return this.settings.path}get hc(){return this.settings.hc}Tc(e){return new Gh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ic(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Tc({path:r,Ec:!1});return s.dc(e),s}Ac(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Tc({path:r,Ec:!1});return s.Pc(),s}Rc(e){return this.Tc({path:void 0,Ec:!0})}Vc(e){return Cl(e,this.settings.methodName,this.settings.mc||!1,this.path,this.settings.fc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Pc(){if(this.path)for(let e=0;e<this.path.length;e++)this.dc(this.path.get(e))}dc(e){if(e.length===0)throw this.Vc("Document fields must not be empty");if(uw(this.hc)&&rN.test(e))throw this.Vc('Document fields cannot begin and end with "__"')}}class sN{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||yu(e)}gc(e,n,r,s=!1){return new Gh({hc:e,methodName:n,fc:r,path:Rt.emptyPath(),Ec:!1,mc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cw(t){const e=t._freezeSettings(),n=yu(t._databaseId);return new sN(t._databaseId,!!e.ignoreUndefinedProperties,n)}class Eu extends Hh{_toFieldTransform(e){if(e.hc!==2)throw e.hc===1?e.Vc(`${this._methodName}() can only appear at the top level of your update data`):e.Vc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Eu}}function oN(t,e,n,r){const s=t.gc(1,e,n);hw("Data must be an object, but it was:",s,r);const o=[],i=on.empty();Yr(r,(u,c)=>{const h=Qh(e,u,n);c=ht(c);const f=s.Ac(h);if(c instanceof Eu)o.push(h);else{const g=na(c,f);g!=null&&(o.push(h),i.set(h,g))}});const a=new bn(o);return new lw(i,a,s.fieldTransforms)}function iN(t,e,n,r,s,o){const i=t.gc(1,e,n),a=[t0(e,r,n)],u=[s];if(o.length%2!=0)throw new fe(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(t0(e,o[g])),u.push(o[g+1]);const c=[],h=on.empty();for(let g=a.length-1;g>=0;--g)if(!cN(c,a[g])){const m=a[g];let _=u[g];_=ht(_);const T=i.Ac(m);if(_ instanceof Eu)c.push(m);else{const x=na(_,T);x!=null&&(c.push(m),h.set(m,x))}}const f=new bn(c);return new lw(h,f,i.fieldTransforms)}function aN(t,e,n,r=!1){return na(n,t.gc(r?4:3,e))}function na(t,e){if(dw(t=ht(t)))return hw("Unsupported field value:",e,t),lN(t,e);if(t instanceof Hh)return function(r,s){if(!uw(s.hc))throw s.Vc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Vc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Ec&&e.hc!==4)throw e.Vc("Nested arrays are not supported");return function(r,s){const o=[];let i=0;for(const a of r){let u=na(a,s.Rc(i));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),i++}return{arrayValue:{values:o}}}(t,e)}return function(r,s){if((r=ht(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return KP(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=yt.fromDate(r);return{timestampValue:Tl(s.serializer,o)}}if(r instanceof yt){const o=new yt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Tl(s.serializer,o)}}if(r instanceof Kh)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ho)return{bytesValue:Cb(s.serializer,r._byteString)};if(r instanceof en){const o=s.databaseId,i=r.firestore._databaseId;if(!i.isEqual(o))throw s.Vc(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Ph(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Wh)return function(i,a){return{mapValue:{fields:{[rb]:{stringValue:sb},[bl]:{arrayValue:{values:i.toArray().map(c=>{if(typeof c!="number")throw a.Vc("VectorValues must only contain numeric values.");return Sh(a.serializer,c)})}}}}}}(r,s);throw s.Vc(`Unsupported field value: ${bu(r)}`)}(t,e)}function lN(t,e){const n={};return Y_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yr(t,(r,s)=>{const o=na(s,e.Ic(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function dw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof yt||t instanceof Kh||t instanceof ho||t instanceof en||t instanceof Hh||t instanceof Wh)}function hw(t,e,n){if(!dw(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=bu(n);throw r==="an object"?e.Vc(t+" a custom object"):e.Vc(t+" "+r)}}function t0(t,e,n){if((e=ht(e))instanceof xu)return e._internalPath;if(typeof e=="string")return Qh(t,e);throw Cl("Field path arguments must be of type string or ",t,!1,void 0,n)}const uN=new RegExp("[~\\*/\\[\\]]");function Qh(t,e,n){if(e.search(uN)>=0)throw Cl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new xu(...e.split("."))._internalPath}catch{throw Cl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Cl(t,e,n,r,s){const o=r&&!r.isEmpty(),i=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||i)&&(u+=" (found",o&&(u+=` in field ${r}`),i&&(u+=` in document ${s}`),u+=")"),new fe(X.INVALID_ARGUMENT,a+t+u)}function cN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e,n,r,s,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new en(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Jh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class dN extends fw{data(){return super.data()}}function Jh(t,e){return typeof e=="string"?Qh(t,e):e instanceof xu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new fe(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Yh{}class pw extends Yh{}function fN(t,e,...n){let r=[];e instanceof Yh&&r.push(e),r=r.concat(n),function(o){const i=o.filter(u=>u instanceof Zh).length,a=o.filter(u=>u instanceof Xh).length;if(i>1||i>0&&a>0)throw new fe(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Xh extends pw{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Xh(e,n,r)}_apply(e){const n=this._parse(e);return gw(e._query,n),new Os(e.firestore,e.converter,pd(e._query,n))}_parse(e){const n=cw(e.firestore);return function(o,i,a,u,c,h,f){let g;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new fe(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){r0(f,h);const _=[];for(const T of f)_.push(n0(u,o,T));g={arrayValue:{values:_}}}else g=n0(u,o,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||r0(f,h),g=aN(a,i,f,h==="in"||h==="not-in");return gt.create(c,h,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Zh extends Yh{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Zh(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Sn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,o){let i=s;const a=o.getFlattenedFilters();for(const u of a)gw(i,u),i=pd(i,u)}(e._query,n),new Os(e.firestore,e.converter,pd(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ef extends pw{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new ef(e,n)}_apply(e){const n=function(s,o,i){if(s.startAt!==null)throw new fe(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new fe(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Mi(o,i)}(e._query,this._field,this._direction);return new Os(e.firestore,e.converter,function(s,o){const i=s.explicitOrderBy.concat([o]);return new So(s.path,s.collectionGroup,i,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function pN(t,e="asc"){const n=e,r=Jh("orderBy",t);return ef._create(r,n)}function n0(t,e,n){if(typeof(n=ht(n))=="string"){if(n==="")throw new fe(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hb(e)&&n.indexOf("/")!==-1)throw new fe(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(nt.fromString(n));if(!xe.isDocumentKey(r))throw new fe(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return pm(t,new xe(r))}if(n instanceof en)return pm(t,n._key);throw new fe(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bu(n)}.`)}function r0(t,e){if(!Array.isArray(t)||t.length===0)throw new fe(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function gw(t,e){const n=function(s,o){for(const i of s)for(const a of i.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new fe(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class gN{convertValue(e,n="none"){switch(qr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(zr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Yr(e,(s,o)=>{r[s]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,s;const o=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[bl].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(i=>ut(i.doubleValue));return new Wh(o)}convertGeoPoint(e){return new Kh(ut(e.latitude),ut(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=cu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ni(e));default:return null}}convertTimestamp(e){const n=Br(e);return new yt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=nt.fromString(e);Ke(Vb(r),9688,{name:e});const s=new Di(r.get(1),r.get(3)),o=new xe(r.popFirst(5));return s.isEqual(n)||fr(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class mw extends fw{constructor(e,n,r,s,o,i){super(e,n,r,s,i),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Wa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Jh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Wa extends mw{data(e={}){return super.data(e)}}class mN{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ei(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Wa(this._firestore,this._userDataWriter,r.key,r,new ei(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new fe(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map(a=>{const u=new Wa(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ei(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:i++}})}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{const u=new Wa(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ei(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,h=-1;return a.type!==0&&(c=i.indexOf(a.doc.key),i=i.delete(a.doc.key)),a.type!==1&&(i=i.add(a.doc),h=i.indexOf(a.doc.key)),{type:yN(a.type),doc:u,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function yN(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:t})}}class yw extends gN{constructor(e){super(),this.firestore=e}convertBytes(e){return new ho(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new en(this.firestore,null,n)}}function vN(t,e,n,...r){t=to(t,en);const s=to(t.firestore,Sl),o=cw(s);let i;return i=typeof(e=ht(e))=="string"||e instanceof xu?iN(o,"updateDoc",t._key,e,n,r):oN(o,"updateDoc",t._key,e),bN(s,[i.toMutation(t._key,ar.exists(!0))])}function _N(t,...e){var n,r,s;t=ht(t);let o={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||e0(e[i])||(o=e[i],i++);const a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(e0(e[i])){const f=e[i];e[i]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[i+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[i+2]=(s=f.complete)===null||s===void 0?void 0:s.bind(f)}let u,c,h;if(t instanceof en)c=to(t.firestore,Sl),h=Ah(t._key.path),u={next:f=>{e[i]&&e[i](wN(c,t,f))},error:e[i+1],complete:e[i+2]};else{const f=to(t,Os);c=to(f.firestore,Sl),h=f._query;const g=new yw(c);u={next:m=>{e[i]&&e[i](new mN(c,g,f,m))},error:e[i+1],complete:e[i+2]},hN(t._query)}return function(g,m,_,T){const x=new GO(T),C=new CO(m,x,_);return g.asyncQueue.enqueueAndForget(async()=>IO(await Hm(g),C)),()=>{x.Cu(),g.asyncQueue.enqueueAndForget(async()=>kO(await Hm(g),C))}}(aw(c),h,a,u)}function bN(t,e){return function(r,s){const o=new ms;return r.asyncQueue.enqueueAndForget(async()=>FO(await YO(r),s,o)),o.promise}(aw(t),e)}function wN(t,e,n){const r=n.docs.get(e._key),s=new yw(t);return new mw(t,s,e._key,r,new ei(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){Io=s})(Eo),jn(new An("firestore",(r,{instanceIdentifier:s,options:o})=>{const i=r.getProvider("app").getImmediate(),a=new Sl(new iP(r.getProvider("auth-internal")),new uP(i,r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new fe(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Di(c.options.projectId,h)}(i,s),i);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),gn(nm,rm,e),gn(nm,rm,"esm2017")})();const xN={apiKey:"AIzaSyCqcgvxcgWwG4LmYkSL66x4GYi1KLxuHts",authDomain:"chat-bot-pizzaria.firebaseapp.com",projectId:"chat-bot-pizzaria",storageBucket:"chat-bot-pizzaria.firebasestorage.app",messagingSenderId:"1090893949199",appId:"1:1090893949199:web:cc9724c44f5ef76ea9f67a",measurementId:"G-TQ6E8YLYHD"},Tu=nu(xN),rn=bh(Tu);iw(Tu);const EN=new tr;console.log("Firebase inicializado com sucesso");let Cc=null;async function Iu(){return await a_()?(Cc||(Cc=jC(Tu),console.log("Firebase Messaging suportado e inicializado.")),Cc):(console.warn("Firebase Messaging NÃO suportado neste navegador."),null)}async function Rl(t){const e=await Iu();if(!e)return console.warn("Não foi possível obter a instância de Messaging. Abortando solicitação de token."),null;try{if(await Notification.requestPermission()==="granted"){console.log("Permissão de notificação concedida.");const r=await BC(e,{vapidKey:"BIs0n17mt2gj5vBTzyM5znHMDOgI6lcOiGanKQW2SiPlFcgmSvLpBu-d0txnoNKLivhbsUD0iwHHSBQk_LNgQ0A"});return r?(console.log("FCM Registration Token:",r),await Ze.post("/fcm/save-token",{userId:t,fcmToken:r}),console.log("Token enviado para o backend com sucesso."),r):(console.warn("Nenhum token de registro de FCM disponível."),null)}else return console.warn("Permissão de notificação negada."),null}catch(n){return console.error("Erro ao obter token de notificação:",n),null}}async function vw(){const t=await Iu();t?zC(t,e=>{var n;if(console.log("Mensagem recebida em primeiro plano:",e),"Notification"in window&&Notification.permission==="granted"){const r=new Notification(e.notification.title,{body:e.notification.body,icon:e.notification.icon||"/favicon.ico",badge:"/favicon.ico",tag:((n=e.data)==null?void 0:n.orderId)||"general",requireInteraction:!0,actions:[{action:"view",title:"Ver Pedido"},{action:"close",title:"Fechar"}]});r.onclick=function(){var s;window.focus(),(s=e.data)!=null&&s.orderId&&console.log("Abrindo pedido:",e.data.orderId),r.close()}}else alert(`Notificação: ${e.notification.title} - ${e.notification.body}`)}):console.warn("Não foi possível configurar notificações em primeiro plano: Messaging não suportado.")}const Ze=dt.create({baseURL:"https://lemming-crucial-smoothly.ngrok-free.app/api",timeout:1e4,headers:{"ngrok-skip-browser-warning":"true"}});Ze.interceptors.request.use(async t=>{const e=t.url.includes("/admin/"),n=t.url.includes("/auth/");if(e&&rn.currentUser)try{const r=await rn.currentUser.getIdToken(!0);t.headers.Authorization=`Bearer ${r}`,console.log("httpClient: ID Token anexado à requisição admin.")}catch(r){console.error("httpClient: Erro ao obter ID Token para requisição admin:",r),delete t.headers.Authorization}else!e&&!n&&delete t.headers.Authorization;return t},t=>Promise.reject(t));Ze.interceptors.response.use(t=>t,async t=>{var n,r;const e=(n=t.response)==null?void 0:n.status;return e===401||e===403?(console.warn("Sessão expirada ou acesso negado. Redirecionando para login admin."),localStorage.removeItem("adminAuthToken"),localStorage.removeItem("adminUser"),rn.currentUser&&await rn.signOut(),ys.currentRoute.value.path!=="/admin/login"&&ys.push("/admin/login")):console.error("Erro na requisição:",((r=t.response)==null?void 0:r.data)||t.message),Promise.reject(t)});const s0="cached_categories",o0="categories_last_updated",TN=60*60*1e3;function IN(t,e,n=H([])){const r=H(!1),s=()=>r.value=!r.value,o=H([]),i=H([]),a=H({}),u=(g,m)=>{const _=new Set;m.forEach(V=>{var j;(j=V.categoryIds)==null||j.forEach(U=>_.add(U))});const T=g.filter(V=>_.has(V.id)),x=new Set(T.map(V=>V.id)),C=[],P={};g.filter(V=>!V.parent_id).forEach(V=>{let j=!1;x.has(V.id)&&(j=!0);const q=g.filter(k=>k.parent_id===V.id).filter(k=>x.has(k.id));q.length>0&&(j=!0),j&&(C.push(V),P[V.id]=q)}),i.value=C,a.value=P},c=async()=>{try{const{data:g}=await Ze.get("/categories");localStorage.setItem(s0,JSON.stringify(g)),localStorage.setItem(o0,Date.now().toString()),o.value=g,u(g,n.value)}catch(g){console.error("Erro ao carregar categorias:",g)}},h=(g,m=!1)=>{setTimeout(()=>r.value=!1,100),g&&m&&[...(a.value[g]||[]).map(T=>T.id)]},f=g=>!e||!e.value?!1:g.some(m=>e.value.includes(m));return ft(()=>{const g=localStorage.getItem(s0),m=localStorage.getItem(o0);if(g&&m&&Date.now()-parseInt(m,10)<TN)try{const T=JSON.parse(g);o.value=T,u(T,n.value)}catch(T){console.warn("Cache de categorias corrompido. Recarregando...",T),c()}else c()}),qt(n,g=>{o.value.length>0&&g&&g.length>0?u(o.value,g):o.value.length>0&&(!g||g.length===0)&&(i.value=[],a.value={})},{deep:!0}),{open:r,toggleMenu:s,parentCategories:i,childCategories:a,selectCategory:h,isSelected:f}}const _w=Symbol("selectedCategoryIds"),bw=Symbol("filterProductsByCategory"),ww=Symbol("allProducts"),kN={class:"bg-red-400 fixed top-0 w-full z-50"},AN={class:"relative px-4 hidden md:block"},SN={class:"container mx-auto flex justify-between items-center"},CN={class:"space-x-6 text-white flex"},RN=["onClick"],PN={key:0,class:"fa-solid fa-chevron-down fa-2xs pt-3 ml-1 group-hover:rotate-180 group-hover:text-yellow-300 transition duration-200 ease-in-out"},ON={key:1,class:"absolute bg-white p-3 w-52 top-12 transform scale-0 group-hover:scale-100 transition duration-150 ease-in-out origin-top shadow-lg rounded-md"},NN=["onClick"],DN={class:"flex space-x-2"},VN={class:"py-2 px-4 bg-gray-50 dark:bg-gray-800 flex justify-between items-center md:hidden w-screen"},MN={key:1},$N={type:"button",name:"mobile-menu",class:"p-2 text-gray-600 dark:text-gray-300 text-sm relative"},LN={class:"flex flex-col w-48 items-start"},FN=["onClick"],UN={key:0,class:"ml-3"},jN=["onClick"],BN={key:3,class:"dark:text-white ml-4 truncate flex justify-center items-center title-font p-2"},zN={key:4,src:Jy,alt:"Pizzaria da Nonna",class:"object-contain h-10 w-full"},qN={class:"flex-none"},HN={__name:"NewHader",props:{title:{type:String,required:!1,default:"Pizzaria da Nonna"},showBackButton:{type:Boolean,default:!1}},setup(t){const e=H(!1),n=()=>{e.value=!e.value,console.log("Menu mobile is:",e.value)},r=_o(),s=ye(()=>r.items.length),o=wt(_w,H(null)),i=wt(bw,()=>{console.warn("filterByCategory function not provided to NewHeader.")}),a=wt(ww,H([])),{parentCategories:u,childCategories:c,isSelected:h}=IN(null,o,a),f=(_,T=!1)=>{let x=null;if(_)if(T){const C=c.value[_]||[];x=[_,...C.map(P=>P.id)]}else x=[_];i(x)},g=(_,T=!1)=>{f(_,T),n()};function m(){window.history.back()}return(_,T)=>(R(),O("header",kN,[d("nav",AN,[d("div",SN,[T[4]||(T[4]=d("div",{class:"text-white text-2xl font-bold"},"Pizzaria da Nonna",-1)),d("ul",CN,[d("li",{onClick:T[0]||(T[0]=x=>f(null)),class:"py-4"},[d("span",{class:re(["cursor-pointer whitespace-nowrap",_e(o)===null||_e(o)&&_e(o).length===0?"text-yellow-300":""])},T[2]||(T[2]=[d("i",{class:"fa fa-list"},null,-1),Q(" Todas")]),2)]),(R(!0),O(ge,null,Ne(_e(u),x=>{var C,P,V;return R(),O("li",{class:"group flex relative py-4",key:x.id},[d("span",{onClick:j=>f(x.id,!0),class:re(["cursor-pointer whitespace-nowrap ",_e(h)([x.id,...((C=_e(c)[x.id])==null?void 0:C.map(j=>j.id))||[]])?"text-yellow-300":"group-hover:text-yellow-300"])},[d("i",{class:re(x.icon)},null,2),Q(" "+F(x.name),1)],10,RN),((P=_e(c)[x.id])==null?void 0:P.length)>0?(R(),O("i",PN)):le("",!0),((V=_e(c)[x.id])==null?void 0:V.length)>0?(R(),O("ul",ON,[(R(!0),O(ge,null,Ne(_e(c)[x.id],j=>{var U;return R(),O("li",{key:j.id,onClick:q=>f(j.id),class:re(["cursor-pointer p-1 whitespace-nowrap rounded-md text-gray-600 hover:text-red-400 hover:bg-gray-300",(U=_e(o))!=null&&U.includes(j.id)?"text-red-400 font-bold bg-gray-200":"text-gray-600 hover:text-red-400 hover:bg-gray-300"])},[d("span",null,[d("i",{class:re(j.icon)},null,2),Q(" "+F(j.name),1)])],10,NN)}),128))])):le("",!0)])}),128)),T[3]||(T[3]=d("li",{class:"py-4"},[d("a",{href:"#contact",class:"hover:text-yellow-300"},"Contato")],-1))]),d("div",DN,[ue(tg,{"cart-count":s.value},null,8,["cart-count"])])])]),d("div",VN,[t.showBackButton?(R(),O("button",{key:0,type:"button",name:"goback",onClick:Mn(m,["prevent"]),class:"flex-none"},T[5]||(T[5]=[d("i",{class:"fa fa-arrow-left text-gray-400 dark:text-gray-200 text-md"},null,-1)]))):(R(),O("div",MN,[d("button",$N,[d("i",{onClick:n,class:re(["h-4 fas text-sm",[e.value?"fa-xmark":"fa-bars"]])},null,2),d("div",{class:re(["absolute group-hover:translate-x-2 transition-all duration-200 ease-in-out z-50 p-2 dark:bg-gray-700 rounded-md -top-2 -left-5 h-screen flex flex-col space-y-2",[e.value?"translate-x-0 bg-white":"-translate-x-full"]])},[d("div",{class:"flex-row-reverse flex h-4 w-full"},[d("i",{onClick:n,class:"fas text-xl fa-xmark"})]),d("ul",LN,[d("li",{onClick:T[1]||(T[1]=x=>g(null)),class:re(["flex space-x-2 items-center w-full p-2 text-sm hover:bg-gray-400/30 hover:rounded-md cursor-pointer whitespace-nowrap",[_e(o)===null||_e(o)&&_e(o).length===0?"text-red-400 bg-gray-400/30 rounded-md":""]])},T[6]||(T[6]=[d("i",{class:"fa fa-list"},null,-1),Q(),d("span",null,"Ver tudo",-1)]),2),(R(!0),O(ge,null,Ne(_e(u),x=>{var C,P;return R(),O("li",{key:x.id,class:re(["flex flex-col w-full mt-1 whitespace-nowrap group",["cursor-pointer whitespace-nowrap ",_e(h)([x.id,...((C=_e(c)[x.id])==null?void 0:C.map(V=>V.id))||[]])?"text-red-400 group-hover:bg-pink-400":"group-hover:text-red-400"]])},[d("span",{class:"flex space-x-1 items-center w-full p-2 text-sm hover:bg-gray-400/30 hover:rounded-md cursor-pointer whitespace-nowrap",onClick:V=>g(x.id,!0)},[d("i",{class:re(["text-xs text-gray-400",x.icon])},null,2),d("span",null,F(x.name),1)],8,FN),((P=_e(c)[x.id])==null?void 0:P.length)>0?(R(),O("ul",UN,[(R(!0),O(ge,null,Ne(_e(c)[x.id],V=>{var j;return R(),O("li",{class:re(["cursor-pointer p-2 whitespace-nowrap rounded-md flex justify-start mb-1 w-full",(j=_e(o))!=null&&j.includes(V.id)?"text-red-400  bg-gray-400/30":"text-gray-600 dark:text-gray-100 hover:text-red-400 hover:bg-gray-400/30 "]),key:V.id,onClick:U=>g(V.id)},[d("span",null,[d("i",{class:re(["text-xs text-gray-400",V.icon])},null,2),Q(" "+F(V.name),1)])],10,jN)}),128))])):le("",!0)],2)}),128))])],2)])])),e.value?(R(),O("div",{key:2,onClick:n,class:"bg-black/50 backdrop-blur-sm w-screen h-screen z-20 top-0 left-0 absolute"})):le("",!0),t.showBackButton?(R(),O("span",BN,F(t.title),1)):(R(),O("img",zN)),d("div",qN,[ue(tg,{"cart-count":s.value},null,8,["cart-count"])])])]))}},KN=Ot(HN,[["__scopeId","data-v-d090641f"]]),WN={class:"py-4 h-auto pb-16 md:pb-0 pt-20 m-auto"},Ns={__name:"AppLayout",props:{isHeaderVisible:{type:Boolean,default:!0},title:{type:String,default:"Pizzaria da Nonna"},topNavVisible:{type:Boolean,default:!1},topNavTitle:{type:String,default:"Pizzaria da Nonna"},showBackButton:{type:Boolean,default:!0},mobileMenuVisible:{type:Boolean,default:!0}},setup(t){const e=t;return(n,r)=>(R(),O("div",null,[ue(KN,{title:t.topNavTitle,showBackButton:t.showBackButton},null,8,["title","showBackButton"]),d("main",WN,[Bd(n.$slots,"default")]),e.mobileMenuVisible?(R(),Qe(YT,{key:0})):le("",!0)]))}},xw=ql("favorite",()=>{const t=H(JSON.parse(localStorage.getItem("favorites")||"[]"));function e(o){const i=t.value.findIndex(a=>a.id===o.id);i!==-1?t.value.splice(i,1):t.value.push(o)}function n(o){return t.value.some(i=>i.id===o)}function r(){t.value=[]}qt(t,o=>{localStorage.setItem("favorites",JSON.stringify(o))},{deep:!0});const s=ye(()=>t.value.length);return{favorites:t,toggleFavorite:e,isFavorite:n,clearFavorites:r,count:s}}),GN={__name:"IconFavorite",props:{product:{type:Object}},setup(t){const e=xw(),n=t,r=()=>{n.product?e.toggleFavorite(n.product):console.warn("Tentativa de adicionar/remover favorito sem um produto.")},s=()=>n.product&&e.isFavorite(n.product.id);return(o,i)=>(R(),O("button",{onClick:r,class:"rounded-full h-6 w-6 border border-gray-400/50"},[d("i",{class:re([s()?"fas fa-heart text-red-500 animate__animated animate__heartBeat":"fas fa-heart text-gray-400","hover:text-red-500 hover:animate-pulse"])},null,2)]))}},QN={class:"flex items-baseline gap-[2px] text-amber-300 text-[11px]"},JN=["onMouseover","onClick"],YN={key:2,class:"dark:text-gray-200 text-gray-500"},XN={key:3,class:"ml-2 text-sm text-gray-500"},ZN={key:4,class:"ml-2 text-sm text-red-500"},Rc="voted_products",eD={__name:"Rating",props:{productId:{type:String,required:!0},rating:{type:Number,required:!0,default:0},showTextRating:{type:Boolean,required:!1,default:!1},ratingText:{type:Number,required:!1,default:0}},setup(t){const e=t,n=H(e.rating),r=H(0),s=H(!1),o=H(!1),i=H(null);ye(()=>Math.floor(n.value)),ye(()=>n.value%1>=.5);const a=()=>{const h=JSON.parse(localStorage.getItem(Rc)||"[]");s.value=h.includes(e.productId)},u=()=>{let h=JSON.parse(localStorage.getItem(Rc)||"[]");h.includes(e.productId)||(h.push(e.productId),localStorage.setItem(Rc,JSON.stringify(h))),s.value=!0},c=async h=>{var f,g;if(!(s.value||o.value)){o.value=!0,i.value=null;try{const m=await Ze.put(`/products/${e.productId}/rate`,{stars:h});n.value=m.data.rating,u(),console.log("Voto registrado com sucesso:",m.data)}catch(m){console.error("Erro ao votar:",m),i.value=((g=(f=m.response)==null?void 0:f.data)==null?void 0:g.error)||"Erro ao registrar voto."}finally{o.value=!1}}};return ft(()=>{a(),e.ratingText===0&&e.rating>0?n.value=e.rating:e.ratingText>0&&(n.value=e.ratingText)}),(h,f)=>(R(),O("div",QN,[!s.value&&!o.value?(R(),O(ge,{key:0},Ne(5,g=>d("i",{key:g,class:re(["fas fa-star cursor-pointer transition-colors duration-200",g<=r.value?"text-amber-500":"text-amber-300"]),onMouseover:m=>r.value=g,onMouseleave:f[0]||(f[0]=m=>r.value=0),onClick:m=>c(g)},null,42,JN)),64)):(R(),O(ge,{key:1},Ne(5,g=>d("i",{key:g,class:re({"fas fa-star":g<=n.value,"fas fa-star-half-alt":g===Math.floor(n.value)+1&&n.value%1>=.5,"far fa-star text-gray-400 dark:text-gray-500":g>n.value})},null,2)),64)),t.showTextRating?(R(),O("span",YN," ("+F(Number(n.value).toFixed(1))+")",1)):le("",!0),o.value?(R(),O("span",XN,"Votando...")):le("",!0),i.value?(R(),O("span",ZN,F(i.value),1)):le("",!0)]))}},Ew=Ot(eD,[["__scopeId","data-v-941aface"]]),tD={class:"rounded-[8px] p-2 shadow flex flex-col justify-between bg-white dark:bg-gray-800 gap-4 border border-gray-200 dark:border-gray-700"},nD={class:"font-semibold dark:text-gray-200 truncate"},rD={class:"flex justify-between items-center"},sD={class:"flex flex-row justify-between items-baseline"},oD={class:"text-sm font-medium text-gray-800 dark:text-white"},Tw={__name:"ProductCard",props:{product:{type:Object,required:!0,default:()=>({name:"Sem nome",price:[0],image:null})}},setup(t){return(e,n)=>{const r=Bi("router-link");return R(),O("div",tD,[ue(r,{to:"/produto/"+t.product.slug},{default:me(()=>[d("div",{class:re(["h-32 rounded-md bg-cover bg-center shadow-md hover:shadow-lg object-contain",{"bg-emerald-500 dark:bg-amber-400":!t.product.img}]),style:po({backgroundImage:t.product.img?`url(${t.product.img})`:"none"})},null,6)]),_:1},8,["to"]),d("span",nD,F(t.product.name||"Produto sem nome"),1),d("div",rD,[ue(Ew,{"product-id":t.product.id,rating:t.product.rating,"show-text-rating":!0,"rating-text":t.product.rating},null,8,["product-id","rating","rating-text"]),ue(GN,{product:t.product},null,8,["product"])]),n[1]||(n[1]=d("div",{class:"hidden"},null,-1)),d("div",sD,[d("span",oD,F(e.$formatPrice(t.product.price[0])),1),ue(r,{to:"/produto/"+t.product.slug,class:"bg-gray-900 px-3 py-1 rounded-md shadow-md dark:shadow-gray-800 shadow-gray-400 cursor-pointer hover:bg-gray-950"},{default:me(()=>n[0]||(n[0]=[d("i",{class:"fa fa-cart-plus text-white"},null,-1)])),_:1,__:[0]},8,["to"])])])}}},iD={},aD={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"};function lD(t,e){return R(),O("div",aD,[(R(),O(ge,null,Ne(6,n=>d("div",{key:n,class:"animate-pulse bg-white dark:bg-gray-800 p-4 rounded-xl shadow-md"},e[0]||(e[0]=[d("div",{class:"w-full h-40 bg-gray-300 dark:bg-gray-700 rounded mb-4"},null,-1),d("div",{class:"h-5 bg-gray-300 dark:bg-gray-700 rounded w-3/4 mb-2"},null,-1),d("div",{class:"h-4 bg-gray-300 dark:bg-gray-700 rounded w-1/2"},null,-1)]))),64))])}const uD=Ot(iD,[["render",lD]]),i0="cached_products",a0="products_last_updated",cD=60*60*1e3;function dD(){const t=H([]),e=H(!0),n=H(null),r=H(""),s=H("name_asc"),o=ye(()=>{let u=[...t.value];if(n.value&&(u=u.filter(c=>{var h;return(h=c.categoryIds)==null?void 0:h.some(f=>n.value.includes(f))})),r.value.trim()!==""){const c=r.value.toLowerCase();u=u.filter(h=>{var f;return(f=h.name)==null?void 0:f.toLowerCase().includes(c)})}switch(s.value){case"name_asc":u.sort((c,h)=>c.name.localeCompare(h.name));break;case"name_desc":u.sort((c,h)=>h.name.localeCompare(c.name));break;case"price_asc":u.sort((c,h)=>(c.price??0)-(h.price??0));break;case"price_desc":u.sort((c,h)=>(h.price??0)-(c.price??0));break}return u}),i=u=>{n.value=u},a=async()=>{try{const{data:u}=await Ze.get("/products");localStorage.setItem(i0,JSON.stringify(u)),localStorage.setItem(a0,Date.now().toString()),t.value=u}catch(u){console.error("Erro ao buscar produtos:",u)}finally{e.value=!1}};return ft(async()=>{const u=localStorage.getItem(i0),c=localStorage.getItem(a0);if(u&&c&&Date.now()-parseInt(c,10)<cD)try{t.value=JSON.parse(u),e.value=!1}catch{await a()}else await a()}),{products:t,filteredProducts:o,loading:e,selectedCategoryIds:n,searchTerm:r,sortOption:s,filterByCategory:i}}var l0;let hD=Symbol("headlessui.useid"),fD=0;const tf=(l0=Y1)!=null?l0:function(){return wt(hD,()=>`${++fD}`)()};function ct(t){var e;if(t==null||t.value==null)return null;let n=(e=t.value.$el)!=null?e:t.value;return n instanceof Node?n:null}function ku(t,e,...n){if(t in e){let s=e[t];return typeof s=="function"?s(...n):s}let r=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(s=>`"${s}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,ku),r}var pD=Object.defineProperty,gD=(t,e,n)=>e in t?pD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,u0=(t,e,n)=>(gD(t,typeof e!="symbol"?e+"":e,n),n);let mD=class{constructor(){u0(this,"current",this.detect()),u0(this,"currentId",0)}set(e){this.current!==e&&(this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}},nf=new mD;function rf(t){if(nf.isServer)return null;if(t instanceof Node)return t.ownerDocument;if(t!=null&&t.hasOwnProperty("value")){let e=ct(t);if(e)return e.ownerDocument}return document}let Id=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var kd=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t))(kd||{}),yD=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(yD||{}),vD=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(vD||{});function Iw(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(Id)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var sf=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(sf||{});function of(t,e=0){var n;return t===((n=rf(t))==null?void 0:n.body)?!1:ku(e,{0(){return t.matches(Id)},1(){let r=t;for(;r!==null;){if(r.matches(Id))return!0;r=r.parentElement}return!1}})}function kw(t){let e=rf(t);xn(()=>{e&&!of(e.activeElement,0)&&bD(t)})}var _D=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(_D||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function bD(t){t==null||t.focus({preventScroll:!0})}let wD=["textarea","input"].join(",");function xD(t){var e,n;return(n=(e=t==null?void 0:t.matches)==null?void 0:e.call(t,wD))!=null?n:!1}function Aw(t,e=n=>n){return t.slice().sort((n,r)=>{let s=e(n),o=e(r);if(s===null||o===null)return 0;let i=s.compareDocumentPosition(o);return i&Node.DOCUMENT_POSITION_FOLLOWING?-1:i&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function ED(t,e){return TD(Iw(),e,{relativeTo:t})}function TD(t,e,{sorted:n=!0,relativeTo:r=null,skipElements:s=[]}={}){var o;let i=(o=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t==null?void 0:t.ownerDocument)!=null?o:document,a=Array.isArray(t)?n?Aw(t):t:Iw(t);s.length>0&&a.length>1&&(a=a.filter(_=>!s.includes(_))),r=r??i.activeElement;let u=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,a.indexOf(r))-1;if(e&4)return Math.max(0,a.indexOf(r))+1;if(e&8)return a.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),h=e&32?{preventScroll:!0}:{},f=0,g=a.length,m;do{if(f>=g||f+g<=0)return 0;let _=c+f;if(e&16)_=(_+g)%g;else{if(_<0)return 3;if(_>=g)return 1}m=a[_],m==null||m.focus(h),f+=u}while(m!==i.activeElement);return e&6&&xD(m)&&m.select(),2}function ID(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function kD(){return/Android/gi.test(window.navigator.userAgent)}function AD(){return ID()||kD()}function Ca(t,e,n){nf.isServer||zi(r=>{document.addEventListener(t,e,n),r(()=>document.removeEventListener(t,e,n))})}function SD(t,e,n){nf.isServer||zi(r=>{window.addEventListener(t,e,n),r(()=>window.removeEventListener(t,e,n))})}function CD(t,e,n=ye(()=>!0)){function r(o,i){if(!n.value||o.defaultPrevented)return;let a=i(o);if(a===null||!a.getRootNode().contains(a))return;let u=function c(h){return typeof h=="function"?c(h()):Array.isArray(h)||h instanceof Set?h:[h]}(t);for(let c of u){if(c===null)continue;let h=c instanceof HTMLElement?c:ct(c);if(h!=null&&h.contains(a)||o.composed&&o.composedPath().includes(h))return}return!of(a,sf.Loose)&&a.tabIndex!==-1&&o.preventDefault(),e(o,a)}let s=H(null);Ca("pointerdown",o=>{var i,a;n.value&&(s.value=((a=(i=o.composedPath)==null?void 0:i.call(o))==null?void 0:a[0])||o.target)},!0),Ca("mousedown",o=>{var i,a;n.value&&(s.value=((a=(i=o.composedPath)==null?void 0:i.call(o))==null?void 0:a[0])||o.target)},!0),Ca("click",o=>{AD()||s.value&&(r(o,()=>s.value),s.value=null)},!0),Ca("touchend",o=>r(o,()=>o.target instanceof HTMLElement?o.target:null),!0),SD("blur",o=>r(o,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function c0(t,e){if(t)return t;let n=e??"button";if(typeof n=="string"&&n.toLowerCase()==="button")return"button"}function RD(t,e){let n=H(c0(t.value.type,t.value.as));return ft(()=>{n.value=c0(t.value.type,t.value.as)}),zi(()=>{var r;n.value||ct(e)&&ct(e)instanceof HTMLButtonElement&&!((r=ct(e))!=null&&r.hasAttribute("type"))&&(n.value="button")}),n}function d0(t){return[t.screenX,t.screenY]}function PD(){let t=H([-1,-1]);return{wasMoved(e){let n=d0(e);return t.value[0]===n[0]&&t.value[1]===n[1]?!1:(t.value=n,!0)},update(e){t.value=d0(e)}}}function OD({container:t,accept:e,walk:n,enabled:r}){zi(()=>{let s=t.value;if(!s||r!==void 0&&!r.value)return;let o=rf(t);if(!o)return;let i=Object.assign(u=>e(u),{acceptNode:e}),a=o.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,i,!1);for(;a.nextNode();)n(a.currentNode)})}var Ad=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(Ad||{}),ND=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(ND||{});function Au({visible:t=!0,features:e=0,ourProps:n,theirProps:r,...s}){var o;let i=Cw(r,n),a=Object.assign(s,{props:i});if(t||e&2&&i.static)return Pc(a);if(e&1){let u=(o=i.unmount)==null||o?0:1;return ku(u,{0(){return null},1(){return Pc({...s,props:{...i,hidden:!0,style:{display:"none"}}})}})}return Pc(a)}function Pc({props:t,attrs:e,slots:n,slot:r,name:s}){var o,i;let{as:a,...u}=DD(t,["unmount","static"]),c=(o=n.default)==null?void 0:o.call(n,r),h={};if(r){let f=!1,g=[];for(let[m,_]of Object.entries(r))typeof _=="boolean"&&(f=!0),_===!0&&g.push(m);f&&(h["data-headlessui-state"]=g.join(" "))}if(a==="template"){if(c=Sw(c??[]),Object.keys(u).length>0||Object.keys(e).length>0){let[f,...g]=c??[];if(!VD(f)||g.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${s} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(u).concat(Object.keys(e)).map(T=>T.trim()).filter((T,x,C)=>C.indexOf(T)===x).sort((T,x)=>T.localeCompare(x)).map(T=>`  - ${T}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(T=>`  - ${T}`).join(`
`)].join(`
`));let m=Cw((i=f.props)!=null?i:{},u,h),_=cr(f,m,!0);for(let T in m)T.startsWith("on")&&(_.props||(_.props={}),_.props[T]=m[T]);return _}return Array.isArray(c)&&c.length===1?c[0]:c}return Bl(a,Object.assign({},u,h),{default:()=>c})}function Sw(t){return t.flatMap(e=>e.type===ge?Sw(e.children):[e])}function Cw(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let s in r)s.startsWith("on")&&typeof r[s]=="function"?(n[s]!=null||(n[s]=[]),n[s].push(r[s])):e[s]=r[s];if(e.disabled||e["aria-disabled"])return Object.assign(e,Object.fromEntries(Object.keys(n).map(r=>[r,void 0])));for(let r in n)Object.assign(e,{[r](s,...o){let i=n[r];for(let a of i){if(s instanceof Event&&s.defaultPrevented)return;a(s,...o)}}});return e}function DD(t,e=[]){let n=Object.assign({},t);for(let r of e)r in n&&delete n[r];return n}function VD(t){return t==null?!1:typeof t.type=="string"||typeof t.type=="object"||typeof t.type=="function"}let Rw=Symbol("Context");var Fi=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(Fi||{});function MD(){return wt(Rw,null)}function $D(t){sr(Rw,t)}var At=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(At||{});function LD(t){throw new Error("Unexpected object: "+t)}var ln=(t=>(t[t.First=0]="First",t[t.Previous=1]="Previous",t[t.Next=2]="Next",t[t.Last=3]="Last",t[t.Specific=4]="Specific",t[t.Nothing=5]="Nothing",t))(ln||{});function FD(t,e){let n=e.resolveItems();if(n.length<=0)return null;let r=e.resolveActiveIndex(),s=r??-1;switch(t.focus){case 0:{for(let o=0;o<n.length;++o)if(!e.resolveDisabled(n[o],o,n))return o;return r}case 1:{s===-1&&(s=n.length);for(let o=s-1;o>=0;--o)if(!e.resolveDisabled(n[o],o,n))return o;return r}case 2:{for(let o=s+1;o<n.length;++o)if(!e.resolveDisabled(n[o],o,n))return o;return r}case 3:{for(let o=n.length-1;o>=0;--o)if(!e.resolveDisabled(n[o],o,n))return o;return r}case 4:{for(let o=0;o<n.length;++o)if(e.resolveId(n[o],o,n)===t.id)return o;return r}case 5:return null;default:LD(t)}}let h0=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function f0(t){var e,n;let r=(e=t.innerText)!=null?e:"",s=t.cloneNode(!0);if(!(s instanceof HTMLElement))return r;let o=!1;for(let a of s.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))a.remove(),o=!0;let i=o?(n=s.innerText)!=null?n:"":r;return h0.test(i)&&(i=i.replace(h0,"")),i}function UD(t){let e=t.getAttribute("aria-label");if(typeof e=="string")return e.trim();let n=t.getAttribute("aria-labelledby");if(n){let r=n.split(" ").map(s=>{let o=document.getElementById(s);if(o){let i=o.getAttribute("aria-label");return typeof i=="string"?i.trim():f0(o).trim()}return null}).filter(Boolean);if(r.length>0)return r.join(", ")}return f0(t).trim()}function jD(t){let e=H(""),n=H("");return()=>{let r=ct(t);if(!r)return"";let s=r.innerText;if(e.value===s)return n.value;let o=UD(r).trim().toLowerCase();return e.value=s,n.value=o,o}}var BD=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(BD||{}),zD=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(zD||{});function qD(t){requestAnimationFrame(()=>requestAnimationFrame(t))}let Pw=Symbol("MenuContext");function Su(t){let e=wt(Pw,null);if(e===null){let n=new Error(`<${t} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Su),n}return e}let HD=mo({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(t,{slots:e,attrs:n}){let r=H(1),s=H(null),o=H(null),i=H([]),a=H(""),u=H(null),c=H(1);function h(g=m=>m){let m=u.value!==null?i.value[u.value]:null,_=Aw(g(i.value.slice()),x=>ct(x.dataRef.domRef)),T=m?_.indexOf(m):null;return T===-1&&(T=null),{items:_,activeItemIndex:T}}let f={menuState:r,buttonRef:s,itemsRef:o,items:i,searchQuery:a,activeItemIndex:u,activationTrigger:c,closeMenu:()=>{r.value=1,u.value=null},openMenu:()=>r.value=0,goToItem(g,m,_){let T=h(),x=FD(g===ln.Specific?{focus:ln.Specific,id:m}:{focus:g},{resolveItems:()=>T.items,resolveActiveIndex:()=>T.activeItemIndex,resolveId:C=>C.id,resolveDisabled:C=>C.dataRef.disabled});a.value="",u.value=x,c.value=_??1,i.value=T.items},search(g){let m=a.value!==""?0:1;a.value+=g.toLowerCase();let _=(u.value!==null?i.value.slice(u.value+m).concat(i.value.slice(0,u.value+m)):i.value).find(x=>x.dataRef.textValue.startsWith(a.value)&&!x.dataRef.disabled),T=_?i.value.indexOf(_):-1;T===-1||T===u.value||(u.value=T,c.value=1)},clearSearch(){a.value=""},registerItem(g,m){let _=h(T=>[...T,{id:g,dataRef:m}]);i.value=_.items,u.value=_.activeItemIndex,c.value=1},unregisterItem(g){let m=h(_=>{let T=_.findIndex(x=>x.id===g);return T!==-1&&_.splice(T,1),_});i.value=m.items,u.value=m.activeItemIndex,c.value=1}};return CD([s,o],(g,m)=>{var _;f.closeMenu(),of(m,sf.Loose)||(g.preventDefault(),(_=ct(s))==null||_.focus())},ye(()=>r.value===0)),sr(Pw,f),$D(ye(()=>ku(r.value,{0:Fi.Open,1:Fi.Closed}))),()=>{let g={open:r.value===0,close:f.closeMenu};return Au({ourProps:{},theirProps:t,slot:g,slots:e,attrs:n,name:"Menu"})}}}),KD=mo({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(t,{attrs:e,slots:n,expose:r}){var s;let o=(s=t.id)!=null?s:`headlessui-menu-button-${tf()}`,i=Su("MenuButton");r({el:i.buttonRef,$el:i.buttonRef});function a(f){switch(f.key){case At.Space:case At.Enter:case At.ArrowDown:f.preventDefault(),f.stopPropagation(),i.openMenu(),xn(()=>{var g;(g=ct(i.itemsRef))==null||g.focus({preventScroll:!0}),i.goToItem(ln.First)});break;case At.ArrowUp:f.preventDefault(),f.stopPropagation(),i.openMenu(),xn(()=>{var g;(g=ct(i.itemsRef))==null||g.focus({preventScroll:!0}),i.goToItem(ln.Last)});break}}function u(f){switch(f.key){case At.Space:f.preventDefault();break}}function c(f){t.disabled||(i.menuState.value===0?(i.closeMenu(),xn(()=>{var g;return(g=ct(i.buttonRef))==null?void 0:g.focus({preventScroll:!0})})):(f.preventDefault(),i.openMenu(),qD(()=>{var g;return(g=ct(i.itemsRef))==null?void 0:g.focus({preventScroll:!0})})))}let h=RD(ye(()=>({as:t.as,type:e.type})),i.buttonRef);return()=>{var f;let g={open:i.menuState.value===0},{...m}=t,_={ref:i.buttonRef,id:o,type:h.value,"aria-haspopup":"menu","aria-controls":(f=ct(i.itemsRef))==null?void 0:f.id,"aria-expanded":i.menuState.value===0,onKeydown:a,onKeyup:u,onClick:c};return Au({ourProps:_,theirProps:m,slot:g,attrs:e,slots:n,name:"MenuButton"})}}}),WD=mo({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(t,{attrs:e,slots:n,expose:r}){var s;let o=(s=t.id)!=null?s:`headlessui-menu-items-${tf()}`,i=Su("MenuItems"),a=H(null);r({el:i.itemsRef,$el:i.itemsRef}),OD({container:ye(()=>ct(i.itemsRef)),enabled:ye(()=>i.menuState.value===0),accept(g){return g.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:g.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(g){g.setAttribute("role","none")}});function u(g){var m;switch(a.value&&clearTimeout(a.value),g.key){case At.Space:if(i.searchQuery.value!=="")return g.preventDefault(),g.stopPropagation(),i.search(g.key);case At.Enter:if(g.preventDefault(),g.stopPropagation(),i.activeItemIndex.value!==null){let _=i.items.value[i.activeItemIndex.value];(m=ct(_.dataRef.domRef))==null||m.click()}i.closeMenu(),kw(ct(i.buttonRef));break;case At.ArrowDown:return g.preventDefault(),g.stopPropagation(),i.goToItem(ln.Next);case At.ArrowUp:return g.preventDefault(),g.stopPropagation(),i.goToItem(ln.Previous);case At.Home:case At.PageUp:return g.preventDefault(),g.stopPropagation(),i.goToItem(ln.First);case At.End:case At.PageDown:return g.preventDefault(),g.stopPropagation(),i.goToItem(ln.Last);case At.Escape:g.preventDefault(),g.stopPropagation(),i.closeMenu(),xn(()=>{var _;return(_=ct(i.buttonRef))==null?void 0:_.focus({preventScroll:!0})});break;case At.Tab:g.preventDefault(),g.stopPropagation(),i.closeMenu(),xn(()=>ED(ct(i.buttonRef),g.shiftKey?kd.Previous:kd.Next));break;default:g.key.length===1&&(i.search(g.key),a.value=setTimeout(()=>i.clearSearch(),350));break}}function c(g){switch(g.key){case At.Space:g.preventDefault();break}}let h=MD(),f=ye(()=>h!==null?(h.value&Fi.Open)===Fi.Open:i.menuState.value===0);return()=>{var g,m;let _={open:i.menuState.value===0},{...T}=t,x={"aria-activedescendant":i.activeItemIndex.value===null||(g=i.items.value[i.activeItemIndex.value])==null?void 0:g.id,"aria-labelledby":(m=ct(i.buttonRef))==null?void 0:m.id,id:o,onKeydown:u,onKeyup:c,role:"menu",tabIndex:0,ref:i.itemsRef};return Au({ourProps:x,theirProps:T,slot:_,attrs:e,slots:n,features:Ad.RenderStrategy|Ad.Static,visible:f.value,name:"MenuItems"})}}}),Ra=mo({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(t,{slots:e,attrs:n,expose:r}){var s;let o=(s=t.id)!=null?s:`headlessui-menu-item-${tf()}`,i=Su("MenuItem"),a=H(null);r({el:a,$el:a});let u=ye(()=>i.activeItemIndex.value!==null?i.items.value[i.activeItemIndex.value].id===o:!1),c=jD(a),h=ye(()=>({disabled:t.disabled,get textValue(){return c()},domRef:a}));ft(()=>i.registerItem(o,h)),yo(()=>i.unregisterItem(o)),zi(()=>{i.menuState.value===0&&u.value&&i.activationTrigger.value!==0&&xn(()=>{var C,P;return(P=(C=ct(a))==null?void 0:C.scrollIntoView)==null?void 0:P.call(C,{block:"nearest"})})});function f(C){if(t.disabled)return C.preventDefault();i.closeMenu(),kw(ct(i.buttonRef))}function g(){if(t.disabled)return i.goToItem(ln.Nothing);i.goToItem(ln.Specific,o)}let m=PD();function _(C){m.update(C)}function T(C){m.wasMoved(C)&&(t.disabled||u.value||i.goToItem(ln.Specific,o,0))}function x(C){m.wasMoved(C)&&(t.disabled||u.value&&i.goToItem(ln.Nothing))}return()=>{let{disabled:C,...P}=t,V={active:u.value,disabled:C,close:i.closeMenu};return Au({ourProps:{id:o,ref:a,role:"menuitem",tabIndex:C===!0?void 0:-1,"aria-disabled":C===!0?!0:void 0,onClick:f,onFocus:g,onPointerenter:_,onMouseenter:_,onPointermove:T,onMousemove:T,onPointerleave:x,onMouseleave:x},theirProps:{...n,...P},slot:V,attrs:n,slots:e,name:"MenuItem"})}}});const GD={class:"mx-auto max-w-7xl px-0 lg:px-8 relative"},QD={class:"flex items-center justify-end space-x-4 bg-white dark:bg-gray-900 pb-2 mt-2 pt-2 sticky top-14 px-2"},JD={class:"w-10 text-right"},YD={class:"px-1 py-1"},XD={for:"az"},ZD=["active"],eV={for:"za"},tV=["active"],nV={class:"px-1 py-1"},rV={for:"minor_price"},sV=["active"],oV={for:"hight_price"},iV=["active"],aV={key:1,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2 mt-5"},lV={key:0,class:"col-span-6 flex items-center justify-center"},uV={__name:"ProdutListPage",setup(t){const{products:e,filteredProducts:n,loading:r,selectedCategoryIds:s,filterByCategory:o,sortOption:i,searchTerm:a}=dD();return sr(_w,s),sr(bw,o),sr(ww,e),(u,c)=>(R(),Qe(Ns,{"show-back-button":!1},{default:me(()=>[d("div",GD,[d("div",QD,[c[10]||(c[10]=d("div",{class:"absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none"},[d("i",{class:"fa fa-search h-4 w-4 text-gray-400","aria-hidden":"true"})],-1)),Ae(d("input",{type:"text","onUpdate:modelValue":c[0]||(c[0]=h=>Xe(a)?a.value=h:null),placeholder:"Buscar produtos...",name:"search",id:"search",class:"block w-full p-2 ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},null,512),[[tt,_e(a)]]),d("div",JD,[ue(_e(HD),{as:"div",class:"relative inline-block text-left group"},{default:me(()=>[d("div",null,[ue(_e(KD),{class:"inline-flex space-x-1 w-full items-center bg-white dark:bg-gray-800 justify-center rounded-md shadow-md p-2 text-sm font-medium dark:text-white group-hover:bg-black/10 focus:outline-none focus-visible:ring-2 focus-visible:ring-white/75"},{default:me(()=>c[5]||(c[5]=[d("i",{class:"fa-solid fa-arrow-up-wide-short"},null,-1)])),_:1,__:[5]})]),ue(vo,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:me(()=>[ue(_e(WD),{class:"absolute right-0 mt-2 w-56 origin-top-right divide-y divide-gray-100 dark:divide-gray-900 rounded-md bg-white dark:bg-gray-800 shadow-lg ring-1 ring-black/5 focus:outline-none"},{default:me(()=>[d("div",YD,[ue(_e(Ra),null,{default:me(({active:h,selected:f})=>[d("label",XD,[d("span",{class:re([h?"bg-violet-500 text-white":"text-gray-900 dark:text-white","group flex w-full items-center rounded-md px-2 py-2 text-sm"])},[Ae(d("input",{type:"radio",name:"nama_az",id:"az",value:"name_asc",class:"hidden","onUpdate:modelValue":c[1]||(c[1]=g=>Xe(i)?i.value=g:null)},null,512),[[er,_e(i)]]),d("i",{active:h,class:"mr-2 h-5 w-5 text-violet-400 fa fa-arrow-down-a-z","aria-hidden":"true"},null,8,ZD),c[6]||(c[6]=Q(" Nome (A-Z) "))],2)])]),_:1}),ue(_e(Ra),null,{default:me(({active:h})=>[d("label",eV,[d("span",{class:re([h?"bg-violet-500 text-white":"text-gray-900 dark:text-white","group flex w-full items-center rounded-md px-2 py-2 text-sm"])},[Ae(d("input",{type:"radio",name:"nama_za",id:"za",value:"name_desc",class:"hidden","onUpdate:modelValue":c[2]||(c[2]=f=>Xe(i)?i.value=f:null)},null,512),[[er,_e(i)]]),d("i",{active:h,class:"mr-2 h-5 w-5 text-violet-400 fa fa-arrow-up-z-a","aria-hidden":"true"},null,8,tV),c[7]||(c[7]=Q(" Nome (Z-A) "))],2)])]),_:1})]),d("div",nV,[ue(_e(Ra),null,{default:me(({active:h})=>[d("label",rV,[Ae(d("input",{type:"radio",name:"minor_price",id:"minor_price",value:"price_asc",class:"hidden","onUpdate:modelValue":c[3]||(c[3]=f=>Xe(i)?i.value=f:null)},null,512),[[er,_e(i)]]),d("span",{class:re([h?"bg-violet-500 text-white":"text-gray-900 dark:text-white","group flex w-full items-center rounded-md px-2 py-2 text-sm"])},[d("i",{active:h,class:"mr-2 h-5 w-5 text-violet-400 fa fa-arrow-down-1-9","aria-hidden":"true"},null,8,sV),c[8]||(c[8]=Q(" Menor preço "))],2)])]),_:1}),ue(_e(Ra),null,{default:me(({active:h})=>[d("label",oV,[Ae(d("input",{type:"radio",name:"hight_price",id:"hight_price",value:"price_desc",class:"hidden","onUpdate:modelValue":c[4]||(c[4]=f=>Xe(i)?i.value=f:null)},null,512),[[er,_e(i)]]),d("span",{class:re([h?"bg-violet-500 text-white":"text-gray-900 dark:text-white","group flex w-full items-center rounded-md px-2 py-2 text-sm"])},[d("i",{active:h,class:"mr-2 h-5 w-5 text-violet-400 fa fa-arrow-up-9-1","aria-hidden":"true"},null,8,iV),c[9]||(c[9]=Q(" Maior preço "))],2)])]),_:1})])]),_:1})]),_:1})]),_:1})])]),_e(r)?(R(),Qe(uD,{key:0})):(R(),O("div",aV,[(R(!0),O(ge,null,Ne(_e(n),h=>(R(),Qe(Tw,{key:h.id,product:h},null,8,["product"]))),128)),_e(n).length==0?(R(),O("div",lV," Não há produtos para esta categoria ")):le("",!0)]))])]),_:1}))}},cV={class:"container mx-auto p-4"},dV={key:0,class:"text-gray-500 dark:text-gray-400"},hV={key:1,class:"grid grid-cols-1 gap-4"},fV={class:"flex-grow"},pV={key:0,class:"text-gray-500 dark:text-gray-400 text-sm"},gV={key:1,class:"text-gray-500 dark:text-gray-400 text-sm"},mV={class:"text-gray-500 dark:text-gray-400 text-xs"},yV={class:"flex items-center mt-2"},vV={class:"flex items-center border rounded-full shadow-lg dark:border-gray-700 border-gray-300"},_V=["onClick"],bV={class:"w-8 text-center text-gray-700 dark:text-gray-300"},wV=["onClick"],xV=["onClick"],EV={key:2,class:"mt-8 border-t pt-4 dark:border-gray-700 border-gray-300"},TV={class:"flex justify-between items-center dark:text-gray-200"},IV={class:"text-xl font-semibold"},kV={__name:"Cart",setup(t){const e=_o(),n=Qd(),r=ye(()=>e.items),s=ye(()=>e.items.length),o=ye(()=>e.total),i=m=>{e.removeItem(m)},a=(m,_)=>{if(_>=1){const T=e.items.findIndex(x=>x.id===m.id&&x.size===m.size&&g(x.extras,m.extras));if(T!==-1){const x=[...e.items];x[T].quantity=_,e.items=x}else console.warn("Item não encontrado no carrinho para atualização:",m)}},u=m=>{m.quantity>1&&a(m,m.quantity-1)},c=m=>{a(m,m.quantity+1)},h=()=>{console.log("Finalizar Pedido!"),n.push("/checkout")},f=m=>{let _=m.id;return m.size&&(_+=`-${m.size}`),m.extras&&m.extras.length>0&&(_+=`-${m.extras.map(T=>T.name).join("-")}`),_},g=(m,_)=>{if(m.length!==_.length)return!1;const T=[...m].sort((C,P)=>C.name.localeCompare(P.name)),x=[..._].sort((C,P)=>C.name.localeCompare(P.name));return T.every((C,P)=>C.name===x[P].name&&C.price===x[P].price)};return(m,_)=>{const T=Bi("router-link");return R(),Qe(Ns,{"is-header-visible":!1,"top-nav-visible":!0,"top-nav-title":"Carrinho"},{default:me(()=>[d("div",cV,[s.value===0?(R(),O("div",dV," Seu carrinho está vazio. Adicione deliciosos itens ao seu pedido! ")):(R(),O("div",hV,[(R(!0),O(ge,null,Ne(r.value,x=>(R(),O("div",{key:f(x),class:"flex items-top border rounded-md p-4 dark:bg-gray-800 dark:border-gray-700 border-gray-300"},[ue(T,{to:"/produto/"+x.slug,class:"w-24 h-24 mr-2"},{default:me(()=>[d("div",{class:re(["w-16 h-16 rounded-md bg-cover bg-center shadow-md",{"bg-emerald-500 dark:bg-amber-400":!x.img}]),style:po({backgroundImage:x.img?`url(${x.img})`:"none"})},null,6)]),_:2},1032,["to"]),d("div",fV,[ue(T,{to:"/produto/"+x.slug,class:"font-semibold dark:text-gray-200 hover:underline"},{default:me(()=>[Q(F(x.name||"Item sem nome"),1)]),_:2},1032,["to"]),x.size?(R(),O("div",pV," Tam: "+F(x.size),1)):le("",!0),x.extras&&x.extras.length>0?(R(),O("div",gV,[d("small",null," Extras: "+F(x.extras.map(C=>C.name).join(", ")),1)])):le("",!0),d("p",mV," Preço Unitário: "+F(m.$formatPrice(x.price+x.extras.reduce((C,P)=>C+P.price,0))),1),d("div",yV,[_[2]||(_[2]=d("label",{for:"quantity",class:"mr-2 text-sm text-gray-700 dark:text-gray-300 sr-only"}," Quantidade: ",-1)),d("div",vV,[d("button",{onClick:C=>u(x),class:"px-2 py-1 text-gray-700 dark:text-gray-300 hover:bg-gray-300 rounded-l-full dark:hover:bg-gray-700 focus:outline-none"},_[0]||(_[0]=[d("i",{class:"fa fa-minus"},null,-1)]),8,_V),d("span",bV,F(x.quantity),1),d("button",{onClick:C=>c(x),class:"px-2 py-1 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-700 focus:outline-none rounded-r-full"},_[1]||(_[1]=[d("i",{class:"fa fa-plus"},null,-1)]),8,wV)])])]),d("button",{onClick:C=>i(x),class:"h-10 w-10 inline-flex items-center justify-center bg-transparent transition-all duration-300 cursor-pointer rounded-full hover:bg-red-500/20 text-red-500 relative group"},_[3]||(_[3]=[d("i",{class:"fa fa-trash"},null,-1),d("span",{class:"text-xs text-red-500 absolute -bottom-4 hidden group-hover:flex transition-all duration-300"},[d("small",null,"Excluir")],-1)]),8,xV)]))),128))])),s.value>0?(R(),O("div",EV,[d("div",TV,[_[4]||(_[4]=d("span",{class:"font-bold"},"Total do Pedido:",-1)),d("span",IV,F(m.$formatPrice(o.value)),1)]),d("button",{class:"bg-emerald-500 container hover:bg-emerald-600 text-white font-semibold py-2 px-4 rounded-md shadow-md mt-4",onClick:h}," Finalizar Pedido ")])):le("",!0)])]),_:1})}}},AV=Ot(kV,[["__scopeId","data-v-d7ffcfb0"]]),SV={},CV={class:"animate-pulse space-y-4 max-w-2xl mx-auto p-4"};function RV(t,e){return R(),O("div",CV,e[0]||(e[0]=[rl('<div class="w-full h-56 bg-gray-300 dark:bg-gray-700 rounded-2xl"></div><div class="h-6 bg-gray-300 dark:bg-gray-700 rounded w-3/4"></div><div class="h-4 bg-gray-300 dark:bg-gray-700 rounded w-full"></div><div class="h-4 bg-gray-300 dark:bg-gray-700 rounded w-5/6"></div><div class="h-10 bg-gray-300 dark:bg-gray-700 rounded w-36"></div><div class="space-y-2"><div class="h-4 bg-gray-300 dark:bg-gray-700 rounded w-1/2"></div><div class="flex gap-2"><div class="h-10 bg-gray-300 dark:bg-gray-700 rounded w-full"></div><div class="h-10 bg-gray-300 dark:bg-gray-700 rounded w-full"></div></div></div><div class="h-10 bg-gray-300 dark:bg-gray-700 rounded w-full"></div>',7)]))}const PV=Ot(SV,[["render",RV]]),OV={class:"p-4 max-w-2xl mx-auto"},NV={key:1},DV={class:"relative"},VV=["src"],MV={class:"flex items-center justify-between mb-4"},$V={class:"text-xl font-semibold"},LV={class:"text-green-600 font-bold text-lg"},FV={class:"text-gray-600 dark:text-gray-300 mb-6 leading-relaxed"},UV={class:"mb-6"},jV={class:"flex items-center gap-4 w-36"},BV={class:"text-xl font-medium w-8 text-center"},zV={key:0,class:"mb-6"},qV={class:"font-medium mb-2"},HV={class:"flex gap-2 flex-wrap"},KV=["onClick"],WV={class:"font-semibold"},GV={class:"text-sm"},QV={key:1,class:"mb-6"},JV={class:"flex flex-wrap gap-2"},YV=["for"],XV=["id","value"],ZV={class:"font-medium"},e3={class:"text-xs text-red-500"},t3={key:0,class:"m-4 fixed flex justify-center items-center space-x-2 top-4 transform bg-green-600 text-white px-4 py-2 rounded shadow-lg z-50 border-l-4 border-l-green-800"},n3="cached_products",r3={__name:"ProductDetail",setup(t){const e=Qy(),n=Qd(),r=_o();ye(()=>r.items.length);const s=H(null),o=H([]),i=H(0),a=H([]),u=H(1),c=H(!0),h=H(!1);function f(){u.value<10&&u.value++}function g(){u.value>1&&u.value--}async function m(T){try{const{data:x}=await Ze.get(`/products/${T}`);s.value=x,o.value=x.extras||[]}catch(x){console.error("Erro ao carregar produto da API:",x),n.push("/")}finally{c.value=!1}}ft(async()=>{const T=localStorage.getItem(n3),x=T?JSON.parse(T):[],C=e.params.slug,P=x.find(V=>V.slug===C);P?(s.value=P,o.value=P.extras||[],c.value=!1,m(C)):await m(C)});function _(){var P,V;if(!s.value)return;const T=((P=s.value.price)==null?void 0:P[i.value])||0,x=a.value.reduce((j,U)=>j+U.price,0),C=(T+x)*u.value;r.addItem({id:s.value.id,name:s.value.name,quantity:u.value,size:(V=s.value.sizes)==null?void 0:V[i.value],price:T,extras:a.value,subtotal:C,img:s.value.img,slug:s.value.slug}),h.value=!0,setTimeout(()=>h.value=!1,3e3)}return(T,x)=>{var C;return R(),O("div",null,[ue(Ns,{"show-back-button":!0,"top-nav-title":(C=s.value)==null?void 0:C.name,"mobile-menu-visible":!1},{default:me(()=>{var P,V,j,U,q,k,v;return[d("div",OV,[c.value?(R(),Qe(PV,{key:0})):(R(),O("div",NV,[d("div",DV,[s.value?(R(),Qe(Ew,{key:0,"product-id":s.value.id,rating:s.value.rating||0,"show-text-rating":!0,"rating-text":s.value.rating||0,class:"mb-6 absolute bottom-0 right-5"},null,8,["product-id","rating","rating-text"])):le("",!0),d("img",{src:(P=s.value)==null?void 0:P.img,alt:"Imagem do produto",class:"w-full lg:h-60 object-cover mb-6 rounded-md shadow-lg"},null,8,VV)]),d("div",MV,[d("h1",$V,F((V=s.value)==null?void 0:V.name),1),d("span",LV,F(T.$formatPrice((U=(j=s.value)==null?void 0:j.price)==null?void 0:U[i.value])),1)]),d("p",FV,F((q=s.value)==null?void 0:q.description),1),d("div",UV,[x[1]||(x[1]=d("h4",{class:"font-medium mb-2"},"Quantidade",-1)),d("div",jV,[d("button",{onClick:g,class:"w-10 h-10 bg-gray-200 dark:bg-gray-800 rounded-md text-xl font-bold hover:bg-gray-300"}," - "),d("span",BV,F(u.value),1),d("button",{onClick:f,class:"w-10 h-10 bg-gray-200 dark:bg-gray-800 rounded-md text-xl font-bold hover:bg-gray-300"}," + ")])]),(v=(k=s.value)==null?void 0:k.sizes)!=null&&v.length?(R(),O("div",zV,[d("h4",qV," Tamanho"+F(s.value.sizes.length>1?"s":""),1),d("div",HV,[(R(!0),O(ge,null,Ne(s.value.sizes,(b,S)=>{var E;return R(),O("div",{key:S,onClick:A=>i.value=S,class:re(["cursor-pointer border rounded-md px-4 py-2 shadow-sm transition",i.value===S?"bg-red-600 text-white border-red-700":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600"])},[d("div",WV,F(b),1),d("div",GV,F(T.$formatPrice((E=s.value.price)==null?void 0:E[S])),1)],10,KV)}),128))])])):le("",!0),o.value.length?(R(),O("div",QV,[x[2]||(x[2]=d("h4",{class:"font-medium mb-2"},"Adicionais",-1)),d("div",JV,[(R(!0),O(ge,null,Ne(o.value,(b,S)=>(R(),O("label",{key:S,for:"extra-"+S,class:re(["cursor-pointer border rounded-md px-4 py-2 flex flex-col items-center transition text-sm bg-white dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700",{"border-blue-600 dark:border-blue-400 text-blue-600 dark:text-blue-400":a.value.includes(b)}])},[Ae(d("input",{class:"hidden",type:"checkbox",id:"extra-"+S,value:b,"onUpdate:modelValue":x[0]||(x[0]=E=>a.value=E)},null,8,XV),[[il,a.value]]),d("span",ZV,F(b.name),1),d("span",e3,F(T.$formatPrice(b.price)),1)],10,YV))),128))])])):le("",!0),d("button",{onClick:_,class:"w-full bg-red-600 text-white font-semibold py-3 rounded-lg hover:bg-red-700 transition-all duration-200"}," Adicionar ao Carrinho "),ue(vo,{name:"fade"},{default:me(()=>[h.value?(R(),O("div",t3,x[3]||(x[3]=[d("i",{class:"fa-regular fa-circle-check text-green-800","aria-hidden":"true"},null,-1),d("span",null,"Produto adicionado ao carrinho!",-1)]))):le("",!0)]),_:1})]))])]}),_:1},8,["top-nav-title"])])}}},s3={class:"container mx-auto p-4"},o3={class:"text-2xl font-semibold mb-4 dark:text-gray-200"},i3={key:0,class:"text-gray-500 dark:text-gray-400"},a3={key:1,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},l3={__name:"Favorites",setup(t){const e=xw(),n=ye(()=>e.favorites),r=ye(()=>n.value.length);return(s,o)=>(R(),Qe(Ns,{"top-nav-visible":!0,"is-header-visible":!1,"top-nav-title":"Favoritos"},{default:me(()=>[d("div",s3,[d("h2",o3," Meus Favoritos ("+F(r.value)+") ",1),r.value===0?(R(),O("div",i3," Sua lista de favoritos está vazia. Adicione produtos clicando no ícone de coração! ")):(R(),O("div",a3,[(R(!0),O(ge,null,Ne(n.value,i=>(R(),Qe(Tw,{key:i.id,product:i},null,8,["product"]))),128))]))])]),_:1}))}},u3=Ot(l3,[["__scopeId","data-v-702433d7"]]),c3={class:"container mx-auto p-4 max-w-md bg-white shadow-lg rounded-lg mt-8"},d3={class:"mb-6"},h3={key:0,class:"w-5 h-5 text-green-700",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},f3={key:1,class:"w-5 h-5 text-red-700",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},p3={key:2,class:"w-5 h-5 text-blue-700 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},g3={class:"mb-6"},m3=["value"],y3={key:0,class:"text-green-600 text-xs mt-1"},v3=["disabled"],_3={key:0},b3={key:1},w3={key:2},x3={__name:"Profile",setup(t){const n=nu({apiKey:"AIzaSyCqcgvxcgWwG4LmYkSL66x4GYi1KLxuHts",authDomain:"chat-bot-pizzaria.firebaseapp.com",projectId:"chat-bot-pizzaria",storageBucket:"chat-bot-pizzaria.firebasestorage.app",messagingSenderId:"1090893949199",appId:"1:1090893949199:web:cc9724c44f5ef76ea9f67a",measurementId:"G-TQ6E8YLYHD"}),r=bh(n),s=H("Carregando status..."),o=H(null),i=H(!1),a=H(!1),u=H(!0),c=H("loading_user_id");r.onAuthStateChanged(m=>{if(m)c.value=m.uid,console.log("User ID from Firebase Auth:",c.value);else{let _=localStorage.getItem("guestUserId");_||(_=`guest_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,localStorage.setItem("guestUserId",_)),c.value=_,console.log("Guest User ID:",c.value)}});const h=ye(()=>s.value.includes("Concedida")?"bg-green-100 text-green-800":s.value.includes("Negada")?"bg-red-100 text-red-800":s.value.includes("Erro")||s.value.includes("não suportadas")?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"),f=async()=>{i.value=!0;try{const m=await Rl(c.value);m?(o.value=m,s.value="Permissão de notificação Concedida!"):s.value="Permissão de notificação Negada ou token não obtido."}catch(m){console.error("Erro geral ao lidar com a solicitação de notificação:",m),s.value=`Erro: ${m.message}`}finally{i.value=!1}},g=()=>{o.value&&navigator.clipboard.writeText(o.value).then(()=>{a.value=!0,setTimeout(()=>{a.value=!1},2e3)}).catch(m=>{console.error("Falha ao copiar o token:",m)})};return ft(async()=>{if(!await Iu()){u.value=!1,s.value="Notificações não suportadas neste navegador.";return}if("serviceWorker"in navigator)try{const T=await navigator.serviceWorker.register("/firebase-messaging-sw.js");console.log("Service Worker registrado com sucesso:",T)}catch(T){console.error("Falha ao registrar o Service Worker:",T),s.value=`Erro ao registrar Service Worker: ${T.message}`,u.value=!1;return}else{s.value="Navegador não suporta Service Workers.",u.value=!1;return}vw();const _=Notification.permission;if(_==="granted"){s.value="Permissão de notificação Concedida.";try{const T=await Rl(c.value);T&&(o.value=T)}catch(T){console.error("Erro ao obter token na montagem:",T),s.value=`Erro ao obter token: ${T.message}`}}else _==="denied"?s.value="Permissão de notificação Negada.":s.value="Aguardando permissão..."}),(m,_)=>(R(),Qe(Ns,{"top-nav-title":"Perfil - Configurações de Notificação"},{default:me(()=>[d("div",c3,[_[5]||(_[5]=d("h2",{class:"text-2xl font-bold text-gray-800 mb-6 text-center"},"Configurações de Notificação",-1)),d("div",d3,[_[3]||(_[3]=d("p",{class:"text-gray-700 mb-2"},"Status das Notificações:",-1)),d("div",{class:re([h.value,"p-3 rounded-md text-sm font-medium flex items-center justify-between"])},[d("span",null,F(s.value),1),s.value.includes("Concedida")?(R(),O("svg",h3,_[0]||(_[0]=[d("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):s.value.includes("Negada")?(R(),O("svg",f3,_[1]||(_[1]=[d("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1)]))):(R(),O("svg",p3,_[2]||(_[2]=[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004 12c0 2.21.894 4.204 2.342 5.658M18 18v-5h-.582m-15.356-2A8.001 8.001 0 0020 12c0-2.21-.894-4.204-2.342-5.658"},null,-1)])))],2)]),d("div",g3,[_[4]||(_[4]=d("p",{class:"text-gray-700 mb-2"},"Seu Token FCM:",-1)),d("input",{type:"text",value:o.value||"Gerando...",readonly:"",class:"w-full p-2 border border-gray-300 rounded-md bg-gray-100 text-gray-600 text-sm font-mono",onClick:g},null,8,m3),a.value?(R(),O("p",y3,"Copiado!")):le("",!0)]),d("button",{onClick:f,disabled:i.value||!u.value,class:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md transition duration-300 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed"},[u.value?i.value?(R(),O("span",b3,"Permissão Solicitada")):(R(),O("span",w3,"Solicitar Permissão de Notificação")):(R(),O("span",_3,"Notificações não suportadas"))],8,v3),_[6]||(_[6]=d("p",{class:"text-gray-500 text-xs mt-4 text-center"}," Ative as notificações para receber atualizações sobre seus pedidos e promoções. ",-1))])]),_:1}))}},E3={},T3={class:"border-b border-b-gray-300 dark:border-b-gray-800 mb-4"};function I3(t,e){return R(),O("div",T3)}const Ga=Ot(E3,[["render",I3]]),k3={class:"container mx-auto p-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 lg:gap-8 gap-4 lg:-mt-20"},A3={class:"lg:col-span-2"},S3={key:0,class:"p-4 border border-gray-300 rounded-md mb-4 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-200"},C3={class:"text-gray-500 dark:text-gray-400"},R3={class:"text-gray-500 dark:text-gray-400"},P3={class:"text-gray-500 dark:text-gray-400"},O3={class:"text-gray-500 dark:text-gray-400"},N3={class:"p-4 border border-gray-300 rounded-md mb-4 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-200"},D3={key:0},V3={class:"mb-4"},M3={class:"mb-4"},$3={class:"mb-4"},L3={class:"mb-4"},F3={class:"mb-4"},U3={class:"flex justify-end gap-2"},j3={class:"mb-6"},B3={class:"flex items-center gap-4 text-gray-700 dark:text-gray-300 text-xs mb-2"},z3=["src","alt"],q3={class:"flex-3"},H3={class:"flex-1"},K3={class:"mb-4"},W3={class:"space-x-4 flex items-center"},G3={class:"flex gap-2 mb-4"},Q3=["value"],J3={class:"text-sm font-medium"},Y3={key:1,class:"mb-4"},X3={class:"ml-4"},Z3={key:0,class:"mt-4"},eM={class:"flex justify-between items-center dark:text-gray-200"},tM={class:"font-bold"},nM={key:0,class:"m-4 fixed flex justify-center items-center space-x-2 top-4 transform bg-green-600 text-white px-4 py-2 rounded shadow-lg z-50 border-l-4 border-l-green-800"},p0="customer_data",rM=5,sM={__name:"Checkout",setup(t){const e=Qd(),n=_o(),r=ye(()=>n.total),s=ye(()=>n.items),o=go({name:"",phone:"",deliveryType:"Entrega",address:"",reference:"",neighborhood:""}),i=ye(()=>Object.values(o).some(x=>x!=="")),a=H(!1),u=H("pix"),c=H("no"),h=H(0),f=H(""),g=[{value:"pix",label:"Pix",icon:"fa-brands fa-pix"},{value:"credit-card",label:"Cartão",icon:"fa fa-credit-card"},{value:"cash",label:"Dinheiro",icon:"fa fa-money-bill-1-wave"}];function m(){const x=Date.now().toString().slice(-5),C=Math.floor(Math.random()*1e5).toString().padStart(5,"0");return`${x}${C}`}ft(()=>{const x=localStorage.getItem(p0);x&&Object.assign(o,JSON.parse(x))});function _(){localStorage.setItem(p0,JSON.stringify(o))}async function T(){if(n.items.length===0){alert("Seu carrinho está vazio. Adicione itens para finalizar o pedido.");return}const x=o.deliveryType==="Retirada"?0:rM,C=r.value,P=C+x,V={orderNumber:m(),customer:{...o},items:n.items,subtotal:C,tax:x,total:P,paymentMethod:u.value,deliveryType:o.deliveryType,needChange:c.value==="yes",changeAmount:u.value==="cash"&&c.value==="yes"?h.value:null,created_at:new Date().toISOString()},j=n.items.map(b=>{let S=`${b.quantity}x ${b.name}${b.size?` (${b.size})`:""} - R$ ${b.subtotal.toFixed(2).replace(".",",")}`;if(b.extras&&b.extras.length>0){const E=b.extras.map(A=>`${A.name} - R$ ${A.price.toFixed(2).replace(".",",")}`).join(" | ");S+=`
_Adicionais:_ ${E}`}return S}).join(`
`);let U=[`*Tipo:* ${V.deliveryType}`];V.deliveryType==="Entrega"?U.push("*Tempo de entrega:* 40 a 50min"):U.push("*Pronto para retirada em:* 20-30min");const q=`NOVO PEDIDO: #${V.orderNumber}

DADOS DO PEDIDO:
${j}

DADOS DA ENTREGA:
${U.join(`
`)}
*Cliente:* ${o.name}
*Telefone:* ${o.phone}
`+(V.deliveryType==="Entrega"?`*Endereço:* ${o.address}
`:"")+(V.deliveryType==="Entrega"&&o.reference?`*Ponto de referência:* ${o.reference}
`:V.deliveryType==="Entrega"?`*Ponto de referência:* nenhum
`:"")+(V.deliveryType==="Entrega"&&o.neighborhood?`*Bairro:* ${o.neighborhood}
`:"")+`
DADOS DO PAGAMENTO:
*Método de pagamento:* ${V.paymentMethod?V.paymentMethod.toUpperCase():"N/A"}
*Subtotal:* R$ ${V.subtotal.toFixed(2).replace(".",",")}
`+(V.deliveryType==="Entrega"?`*Taxa de entrega:* R$ ${V.tax.toFixed(2).replace(".",",")}
`:"")+`*Total:* R$ ${V.total.toFixed(2).replace(".",",")}`,k="5571992477638",v=encodeURIComponent(q);window.open(`https://wa.me/${k}?text=${v}`),await new Promise(b=>setTimeout(b,1e3)),f.value=V.orderNumber,_(),n.clearCart(),a.value=!1,setTimeout(()=>{f.value="",e.push("/")},3e3)}return(x,C)=>(R(),Qe(Ns,{"top-nav-visible":!0,"top-nav-title":"Finalizar pedido","is-header-visible":!1},{default:me(()=>[d("div",k3,[C[36]||(C[36]=d("ol",{"aria-label":"Breadcrumb",class:"lg:col-span-8 md:col-span-2 px-1 flex text-xs space-x-2 items-center text-gray-500 min-w-0 gap-2 whitespace-nowrap"},[d("li",{class:"text-xs/loose"},[d("a",{href:"",class:"flex items-center gap-2 align-middle leading-none transition-all"},[d("i",{class:"fa fa-home"}),Q(" Início ")])]),d("i",{class:"fa fa-chevron-right text-gray-400"}),d("span",{class:"text-green-600"},"Finalizar pedido")],-1)),d("div",A3,[i.value&&!a.value?(R(),O("div",S3,[C[18]||(C[18]=d("h3",{class:"font-semibold mb-2 dark:text-gray-100"},"Dados do Cliente",-1)),d("div",null,[C[14]||(C[14]=d("span",{class:"font-semibold mr-2"},"Nome:",-1)),d("span",C3,F(o.name),1)]),d("div",null,[C[15]||(C[15]=d("span",{class:"font-semibold mr-2"},"Telefone:",-1)),d("span",R3,F(o.phone),1)]),d("div",null,[C[16]||(C[16]=d("span",{class:"font-semibold mr-2"},"Endereço:",-1)),d("span",P3,F(o.address),1)]),d("div",null,[C[17]||(C[17]=d("span",{class:"font-semibold mr-2"},"Ponto de referência:",-1)),d("span",O3,F(o.reference),1)]),d("button",{onClick:C[0]||(C[0]=P=>a.value=!0),class:"mt-4 px-4 py-2 bg-blue-500 hover:bg-blue-700 text-white font-semibold rounded-md shadow focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-green-500"}," Alterar meus dados ")])):le("",!0)]),d("div",N3,[d("form",{onSubmit:Mn(T,["prevent"])},[!i.value||a.value?(R(),O("div",D3,[C[24]||(C[24]=d("h3",{class:"font-semibold mb-4 dark:text-gray-100"},"Dados do Cliente",-1)),d("div",V3,[C[19]||(C[19]=d("label",{for:"name",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"},"Nome:",-1)),Ae(d("input",{type:"text",id:"name","onUpdate:modelValue":C[1]||(C[1]=P=>o.name=P),required:"",class:"input"},null,512),[[tt,o.name]])]),d("div",M3,[C[20]||(C[20]=d("label",{for:"phone",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"},"Telefone:",-1)),Ae(d("input",{type:"tel",id:"phone","onUpdate:modelValue":C[2]||(C[2]=P=>o.phone=P),required:"",class:"input"},null,512),[[tt,o.phone]])]),d("div",$3,[C[21]||(C[21]=d("label",{for:"address",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"},"Endereço:",-1)),Ae(d("input",{type:"text",id:"address","onUpdate:modelValue":C[3]||(C[3]=P=>o.address=P),required:"",class:"input"},null,512),[[tt,o.address]])]),d("div",L3,[C[22]||(C[22]=d("label",{for:"reference",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"},"Ponto de Referência:",-1)),Ae(d("input",{id:"reference","onUpdate:modelValue":C[4]||(C[4]=P=>o.reference=P),class:"input"},null,512),[[tt,o.reference]])]),d("div",F3,[C[23]||(C[23]=d("label",{for:"neighborhood",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"},"Bairro:",-1)),Ae(d("input",{id:"neighborhood","onUpdate:modelValue":C[5]||(C[5]=P=>o.neighborhood=P),class:"input"},null,512),[[tt,o.neighborhood]])]),d("div",U3,[d("button",{type:"button",onClick:C[6]||(C[6]=P=>a.value=!1),class:"bg-gray-500 hover:bg-gray-600 text-white py-2 px-4 rounded-md shadow-md"}," Cancelar "),d("button",{type:"button",onClick:C[7]||(C[7]=()=>{a.value=!1,_()}),class:"bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-md shadow-md"}," Salvar ")])])):le("",!0),C[32]||(C[32]=d("h3",{class:"font-semibold mb-4 dark:text-gray-100 text-gray-700"}," Resumo do pedido ",-1)),d("div",j3,[(R(!0),O(ge,null,Ne(s.value,P=>(R(),O("div",B3,[d("img",{src:P.img,alt:P.name,class:"h-10 w-10 rounded-md object-cover shadow-md"},null,8,z3),d("span",q3,F(P.name),1),d("span",H3,"x"+F(P.quantity),1),d("span",null,F(x.$formatPrice(P.subtotal)),1)]))),256))]),C[33]||(C[33]=d("div",{class:"space-y-2"},[d("label",{for:"coupon",class:"text-xs text-gray-700"},"Código do cupom"),d("div",{class:"relative"},[d("input",{type:"text",name:"coupon",id:"coupon",class:"block w-full rounded-md py-3 ps-4 pe-12 text-gray-800 text-sm focus:ring-transparent border-gray-200 dark:bg-gray-50",placeholder:"Digite o código",autocomplete:"off"}),d("button",{class:"absolute top-1/2 -translate-y-1/2 end-1 py-2 px-5 inline-block font-semibold tracking-wide border align-middle duration-500 text-sm text-center bg-gray-200 hover:bg-gray-300 border-gray-200 hover:border-gray-300 text-gray-900 rounded-md"}," Aplicar cupom ")])],-1)),ue(Ga),d("div",K3,[C[25]||(C[25]=d("span",{class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-4"}," Tipo de Entrega/Retirada: ",-1)),d("div",W3,[d("div",null,[Ae(d("input",{type:"radio",id:"deliveryTypeDelivery",name:"deliveryTypeOptions",value:"Entrega","onUpdate:modelValue":C[8]||(C[8]=P=>o.deliveryType=P),class:"form-radio hidden"},null,512),[[er,o.deliveryType]]),d("label",{for:"deliveryTypeDelivery",class:re(["cursor-pointer px-4 py-2 rounded border text-sm font-medium transition",o.deliveryType==="Entrega"?"bg-indigo-600 text-white":"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 border-gray-300 dark:border-gray-600"])}," 🚚 Entrega ",2)]),d("div",null,[Ae(d("input",{type:"radio",id:"deliveryTypeRetirada",name:"deliveryTypeOptions",value:"Retirada","onUpdate:modelValue":C[9]||(C[9]=P=>o.deliveryType=P),class:"form-radio hidden"},null,512),[[er,o.deliveryType]]),d("label",{for:"deliveryTypeRetirada",class:re(["cursor-pointer px-4 py-2 rounded border text-sm font-medium transition",o.deliveryType==="Retirada"?"bg-indigo-600 text-white":"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 border-gray-300 dark:border-gray-600"])}," 🏠 Retirada ",2)])])]),ue(Ga),C[34]||(C[34]=d("h3",{class:"font-semibold mb-4 dark:text-gray-100 text-gray-700"},"Pagamento",-1)),d("div",G3,[(R(),O(ge,null,Ne(g,P=>d("label",{key:P.value,class:"relative cursor-pointer"},[Ae(d("input",{type:"radio",name:"paymentMethod",value:P.value,"onUpdate:modelValue":C[10]||(C[10]=V=>u.value=V),class:"hidden"},null,8,Q3),[[er,u.value]]),d("div",{class:re(["flex px-4 py-2 space-x-2 items-center justify-center border rounded-md shadow-md transition",u.value===P.value?"bg-green-600 text-white border-green-600":"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 border-gray-300 dark:border-gray-600"])},[d("i",{class:re(P.icon)},null,2),d("div",J3,F(P.label),1)],2)])),64))]),u.value==="cash"?(R(),O("div",Y3,[C[29]||(C[29]=d("label",{class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"},"Precisa de Troco?",-1)),d("label",null,[Ae(d("input",{type:"radio",value:"yes","onUpdate:modelValue":C[11]||(C[11]=P=>c.value=P),class:"mr-2"},null,512),[[er,c.value]]),C[26]||(C[26]=Q(" Sim "))]),d("label",X3,[Ae(d("input",{type:"radio",value:"no","onUpdate:modelValue":C[12]||(C[12]=P=>c.value=P),class:"mr-2"},null,512),[[er,c.value]]),C[27]||(C[27]=Q(" Não "))]),c.value==="yes"?(R(),O("div",Z3,[C[28]||(C[28]=d("label",{for:"changeAmount",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"},"Valor para Troco:",-1)),Ae(d("input",{type:"number",id:"changeAmount","onUpdate:modelValue":C[13]||(C[13]=P=>h.value=P),min:"0",class:"input"},null,512),[[tt,h.value,void 0,{number:!0}]])])):le("",!0)])):le("",!0),ue(Ga),d("div",null,[d("div",eM,[C[30]||(C[30]=d("span",{class:"font-semibold"},"Total do Pedido:",-1)),d("span",tM,F(x.$formatPrice(r.value)),1)]),C[31]||(C[31]=d("button",{type:"submit",class:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg shadow-md mt-4 focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-green-500"}," Finalizar Pedido ",-1))])],32)]),ue(vo,{name:"fade"},{default:me(()=>[f.value?(R(),O("div",nM,[C[35]||(C[35]=d("i",{class:"fa-regular fa-circle-check text-green-800","aria-hidden":"true"},null,-1)),d("span",null,"Pedido realizado com sucesso! Número do Pedido: "+F(f.value),1)])):le("",!0)]),_:1})])]),_:1}))}},oM={class:"container mx-auto p-4"},iM={class:"mb-4"},aM=["value"],lM={key:0,class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},uM={class:"mb-4"},cM={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2"},dM=["value","disabled"],hM={key:0,class:"text-red-500 text-sm mt-1"},fM={key:1,class:"mt-2"},pM={class:"mr-2"},gM=["onUpdate:modelValue"],mM={key:0,value:"metade"},yM={class:"mb-4"},vM={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2"},_M=["value"],bM={class:"mb-4"},wM=["value"],xM={class:"mt-8 border-t pt-4 dark:border-gray-700"},EM={key:0},TM={key:1},IM={key:0},kM={key:1},AM={key:2},SM={key:0},CM={key:3},RM={class:"flex justify-between items-center mt-4 dark:text-gray-200"},PM={class:"text-xl font-bold"},OM=["disabled"],NM={key:4,class:"text-red-500 text-sm mt-1"},DM={__name:"BuildPizza",setup(t){const e=_o(),n=H([{name:"Média",maxSabor:2,price:25},{name:"Grande",maxSabor:4,price:35}]),r=H([{name:"Calabresa",price:10},{name:"Pepperoni",price:12},{name:"Margherita",price:9},{name:"Frango com Catupiry",price:11},{name:"Portuguesa",price:10},{name:"Quatro Queijos",price:13}]),s=H([{name:"Queijo Extra",price:5},{name:"Azeitonas",price:3},{name:"Bacon",price:6},{name:"Cebola Caramelizada",price:4}]),o=H([{name:"Catupiry",price:7},{name:"Cheddar",price:8},{name:"Chocolate",price:9}]),i=H(n.value[0]),a=H([]),u=H([]),c=H(null),h=H([]),f=ye(()=>i.value?i.value.maxSabor:0),g=T=>a.value.some(x=>x.name===T.name),m=ye(()=>{let T=i.value?i.value.price:0;return a.value.forEach((x,C)=>{T+=x.price/(h.value[C]==="metade"?2:1)}),u.value.forEach(x=>{T+=x.price}),c.value&&(T+=c.value.price),T}),_=()=>{if(a.value.length>=2&&a.value.length<=f.value){const T={id:"pizza-customizada-"+Date.now(),name:"Pizza Montada",size:i.value.name,sabores:a.value.map((x,C)=>({name:x.name,metade:h.value[C]})),adicionais:u.value.map(x=>x.name),borda:c.value?c.value.name:"Sem Borda",price:m.value,quantity:1};e.addItem(T),alert("Pizza personalizada adicionada ao carrinho!")}else alert(`Selecione de 2 a ${f.value} sabores para adicionar ao carrinho.`)};return(T,x)=>(R(),Qe(Ns,{"top-nav-title":"Monte Sua Pizza"},{default:me(()=>{var C;return[d("div",oM,[x[15]||(x[15]=d("h2",{class:"text-2xl font-semibold mb-6 dark:text-gray-200"},"Monte Sua Pizza",-1)),d("div",iM,[x[4]||(x[4]=d("label",{for:"pizza-size",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"}," Tamanho da Pizza: ",-1)),Ae(d("select",{id:"pizza-size","onUpdate:modelValue":x[0]||(x[0]=P=>i.value=P),class:"input"},[(R(!0),O(ge,null,Ne(n.value,P=>(R(),O("option",{key:P.name,value:P},F(P.name)+" (Máx. "+F(P.maxSabor)+" sabores) - "+F(T.$formatPrice(P.price)),9,aM))),128))],512),[[Vr,i.value]]),i.value?(R(),O("p",lM," Você pode escolher até "+F(i.value.maxSabor)+" sabores. ",1)):le("",!0)]),d("div",uM,[x[7]||(x[7]=d("h3",{class:"text-xl font-semibold mb-2 dark:text-gray-100"},"Sabores",-1)),d("div",cM,[(R(!0),O(ge,null,Ne(r.value,P=>(R(),O("label",{key:P.name,class:"flex items-center"},[Ae(d("input",{type:"checkbox",value:P,"onUpdate:modelValue":x[1]||(x[1]=V=>a.value=V),disabled:a.value.length>=f.value&&!g(P),class:"mr-2"},null,8,dM),[[il,a.value]]),d("span",null,F(P.name)+" - "+F(T.$formatPrice(P.price)),1)]))),128))]),a.value.length>f.value?(R(),O("p",hM," Você selecionou mais sabores do que o permitido para este tamanho. ")):le("",!0),a.value.length>1&&((C=i.value)==null?void 0:C.maxSabor)>1?(R(),O("div",fM,[x[6]||(x[6]=d("h4",{class:"font-semibold mb-1 dark:text-gray-100"},"Metades:",-1)),(R(!0),O(ge,null,Ne(a.value,(P,V)=>(R(),O("div",{key:"metade-"+V,class:"flex items-center mb-1"},[d("span",pM,F(P.name)+":",1),Ae(d("select",{"onUpdate:modelValue":j=>h.value[V]=j,class:"input-sm"},[x[5]||(x[5]=d("option",{value:"inteira"},"Inteira",-1)),a.value.length===2?(R(),O("option",mM,"Metade")):le("",!0)],8,gM),[[Vr,h.value[V]]])]))),128))])):le("",!0)]),d("div",yM,[x[8]||(x[8]=d("h3",{class:"text-xl font-semibold mb-2 dark:text-gray-100"},"Adicionais",-1)),d("div",vM,[(R(!0),O(ge,null,Ne(s.value,P=>(R(),O("label",{key:P.name,class:"flex items-center"},[Ae(d("input",{type:"checkbox",value:P,"onUpdate:modelValue":x[2]||(x[2]=V=>u.value=V),class:"mr-2"},null,8,_M),[[il,u.value]]),d("span",null,F(P.name)+" - "+F(T.$formatPrice(P.price)),1)]))),128))])]),d("div",bM,[x[10]||(x[10]=d("label",{for:"pizza-borda",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"}," Borda: ",-1)),Ae(d("select",{id:"pizza-borda","onUpdate:modelValue":x[3]||(x[3]=P=>c.value=P),class:"input"},[x[9]||(x[9]=d("option",{value:null},"Sem Borda",-1)),(R(!0),O(ge,null,Ne(o.value,P=>(R(),O("option",{key:P.name,value:P},F(P.name)+" - "+F(T.$formatPrice(P.price)),9,wM))),128))],512),[[Vr,c.value]])]),d("div",xM,[x[14]||(x[14]=d("h3",{class:"text-xl font-semibold mb-2 dark:text-gray-100"},"Resumo:",-1)),i.value?(R(),O("p",EM," Tamanho: "+F(i.value.name)+" - "+F(T.$formatPrice(i.value.price)),1)):le("",!0),a.value.length>0?(R(),O("p",TM,[x[11]||(x[11]=Q(" Sabores: ")),(R(!0),O(ge,null,Ne(a.value,(P,V)=>(R(),O("span",{key:P.name},[Q(F(P.name),1),h.value[V]==="metade"?(R(),O("span",IM," (Metade)")):le("",!0),V<a.value.length-1?(R(),O("span",kM," | ")):le("",!0),Q(" "+F(T.$formatPrice(P.price/(h.value[V]==="metade"?2:1))),1)]))),128))])):le("",!0),u.value.length>0?(R(),O("p",AM,[x[12]||(x[12]=Q(" Adicionais: ")),(R(!0),O(ge,null,Ne(u.value,(P,V)=>(R(),O("span",{key:P.name},[Q(F(P.name)+" "+F(T.$formatPrice(P.price)),1),V<u.value.length-1?(R(),O("span",SM,", ")):le("",!0)]))),128))])):le("",!0),c.value?(R(),O("p",CM," Borda: "+F(c.value.name)+" - "+F(T.$formatPrice(c.value.price)),1)):le("",!0),d("div",RM,[x[13]||(x[13]=d("span",{class:"font-semibold"},"Preço Total:",-1)),d("span",PM,F(T.$formatPrice(m.value)),1)]),d("button",{onClick:_,disabled:a.value.length<2||a.value.length>f.value,class:"w-full bg-red-600 hover:bg-red-700 text-white font-semibold py-3 rounded-lg shadow-md mt-4 focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-green-500"}," Adicionar ao Carrinho ",8,OM),a.value.length<2||a.value.length>f.value?(R(),O("p",NM," Selecione de 2 a "+F(f.value)+" sabores para adicionar ao carrinho. ",1)):le("",!0)])])]}),_:1}))}},VM=Ot(DM,[["__scopeId","data-v-6c04b263"]]),MM={class:"container mx-auto p-4 max-w-md bg-white shadow-lg rounded-lg mt-8"},$M={class:"mb-6"},LM={key:0,class:"w-5 h-5 text-green-700",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},FM={key:1,class:"w-5 h-5 text-red-700",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},UM={key:2,class:"w-5 h-5 text-blue-700 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},jM={class:"mb-6"},BM=["value"],zM={key:0,class:"text-green-600 text-xs mt-1"},qM=["disabled"],HM={key:0},KM={key:1},WM={key:2},GM={__name:"NotificationOptIn",setup(t){const n=nu({apiKey:"AIzaSyCqcgvxcgWwG4LmYkSL66x4GYi1KLxuHts",authDomain:"chat-bot-pizzaria.firebaseapp.com",projectId:"chat-bot-pizzaria",storageBucket:"chat-bot-pizzaria.firebasestorage.app",messagingSenderId:"1090893949199",appId:"1:1090893949199:web:cc9724c44f5ef76ea9f67a",measurementId:"G-TQ6E8YLYHD"}),r=bh(n),s=H("Carregando status..."),o=H(null),i=H(!1),a=H(!1),u=H(!0),c=H("loading_user_id");r.onAuthStateChanged(m=>{if(m)c.value=m.uid,console.log("User ID from Firebase Auth:",c.value);else{let _=localStorage.getItem("guestUserId");_||(_=`guest_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,localStorage.setItem("guestUserId",_)),c.value=_,console.log("Guest User ID:",c.value)}});const h=ye(()=>s.value.includes("Concedida")?"bg-green-100 text-green-800":s.value.includes("Negada")?"bg-red-100 text-red-800":s.value.includes("Erro")||s.value.includes("não suportadas")?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"),f=async()=>{i.value=!0;try{const m=await Rl(c.value);m?(o.value=m,s.value="Permissão de notificação Concedida!"):s.value="Permissão de notificação Negada ou token não obtido."}catch(m){console.error("Erro geral ao lidar com a solicitação de notificação:",m),s.value=`Erro: ${m.message}`}finally{i.value=!1}},g=()=>{o.value&&navigator.clipboard.writeText(o.value).then(()=>{a.value=!0,setTimeout(()=>{a.value=!1},2e3)}).catch(m=>{console.error("Falha ao copiar o token:",m)})};return ft(async()=>{if(!await Iu()){u.value=!1,s.value="Notificações não suportadas neste navegador.";return}if("serviceWorker"in navigator)try{const T=await navigator.serviceWorker.register("/firebase-messaging-sw.js");console.log("Service Worker registrado com sucesso:",T)}catch(T){console.error("Falha ao registrar o Service Worker:",T),s.value=`Erro ao registrar Service Worker: ${T.message}`,u.value=!1;return}else{s.value="Navegador não suporta Service Workers.",u.value=!1;return}vw();const _=Notification.permission;if(_==="granted"){s.value="Permissão de notificação Concedida.";try{const T=await Rl(c.value);T&&(o.value=T)}catch(T){console.error("Erro ao obter token na montagem:",T),s.value=`Erro ao obter token: ${T.message}`}}else _==="denied"?s.value="Permissão de notificação Negada.":s.value="Aguardando permissão..."}),(m,_)=>(R(),O("div",MM,[_[5]||(_[5]=d("h2",{class:"text-2xl font-bold text-gray-800 mb-6 text-center"},"Configurações de Notificação",-1)),d("div",$M,[_[3]||(_[3]=d("p",{class:"text-gray-700 mb-2"},"Status das Notificações:",-1)),d("div",{class:re([h.value,"p-3 rounded-md text-sm font-medium flex items-center justify-between"])},[d("span",null,F(s.value),1),s.value.includes("Concedida")?(R(),O("svg",LM,_[0]||(_[0]=[d("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):s.value.includes("Negada")?(R(),O("svg",FM,_[1]||(_[1]=[d("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1)]))):(R(),O("svg",UM,_[2]||(_[2]=[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004 12c0 2.21.894 4.204 2.342 5.658M18 18v-5h-.582m-15.356-2A8.001 8.001 0 0020 12c0-2.21-.894-4.204-2.342-5.658"},null,-1)])))],2)]),d("div",jM,[_[4]||(_[4]=d("p",{class:"text-gray-700 mb-2"},"Seu Token FCM:",-1)),d("input",{type:"text",value:o.value||"Gerando...",readonly:"",class:"w-full p-2 border border-gray-300 rounded-md bg-gray-100 text-gray-600 text-sm font-mono",onClick:g},null,8,BM),a.value?(R(),O("p",zM,"Copiado!")):le("",!0)]),d("button",{onClick:f,disabled:i.value||!u.value,class:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md transition duration-300 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed"},[u.value?i.value?(R(),O("span",KM,"Permissão Solicitada")):(R(),O("span",WM,"Solicitar Permissão de Notificação")):(R(),O("span",HM,"Notificações não suportadas"))],8,qM),_[6]||(_[6]=d("p",{class:"text-gray-500 text-xs mt-4 text-center"}," Ative as notificações para receber atualizações sobre seus pedidos e promoções. ",-1))]))}},QM=Ot(GM,[["__scopeId","data-v-422d1d2a"]]),Cu=ql("auth",{state:()=>({user:JSON.parse(localStorage.getItem("adminUser"))||null,authToken:localStorage.getItem("adminAuthToken")||null,loading:!1,error:null}),getters:{isAuthenticated:t=>!!t.authToken&&!!t.user,isAdmin:t=>{var e;return((e=t.user)==null?void 0:e.isAdmin)||!1}},actions:{async _updateUserInfoFromFirebase(t){if(!t){this.user=null;return}const e=await t.getIdTokenResult(!0);this.user={uid:t.uid,email:t.email,displayName:t.displayName,isAdmin:e.claims.admin||!1},localStorage.setItem("adminUser",JSON.stringify(this.user)),console.log("Auth Store: User info updated from Firebase ID Token claims:",this.user)},async loginWithEmail(t,e){const n=ui();this.loading=!0,this.error=null;try{const o=await(await z2(rn,t,e)).user.getIdToken(),i=await Ze.post("/auth/login",{idToken:o});this.authToken=i.data.customToken,localStorage.setItem("adminAuthToken",this.authToken),await Ec(rn,this.authToken),await this._updateUserInfoFromFirebase(rn.currentUser),n.showToast("Sucesso!","Login realizado com sucesso.","success"),ys.push("/admin")}catch(r){console.error("Erro ao fazer login com e-mail:",r);let s="Erro ao fazer login. Tente novamente.";r.code==="auth/user-not-found"||r.code==="auth/wrong-password"||r.code==="auth/invalid-credential"||r.code==="auth/invalid-email"?s="Email ou senha inválidos.":r.response&&r.response.data&&r.response.data.error&&(s=r.response.data.error),this.error=s,n.showToast("Erro de Login",s,"error"),this.authToken=null,this.user=null,localStorage.removeItem("adminAuthToken"),localStorage.removeItem("adminUser")}finally{this.loading=!1}},async loginWithGoogle(){const t=ui();this.loading=!0,this.error=null;try{const r=await(await hR(rn,EN)).user.getIdToken(),s=await Ze.post("/auth/google",{idToken:r});this.authToken=s.data.customToken,localStorage.setItem("adminAuthToken",this.authToken),await Ec(rn,this.authToken),await this._updateUserInfoFromFirebase(rn.currentUser),t.showToast("Sucesso!","Login com Google realizado com sucesso.","success"),ys.push("/admin")}catch(e){console.error("Erro ao fazer login com Google:",e);let n="Erro ao fazer login com Google. Tente novamente.";e.response&&e.response.data&&e.response.data.error&&(n=e.response.data.error),this.error=n,t.showToast("Erro de Login",n,"error"),this.authToken=null,this.user=null,localStorage.removeItem("adminAuthToken"),localStorage.removeItem("adminUser")}finally{this.loading=!1}},async logout(){const t=ui();this.loading=!0,this.error=null;try{await K2(rn),this.authToken=null,this.user=null,localStorage.removeItem("adminAuthToken"),localStorage.removeItem("adminUser"),t.showToast("Logout","Você foi desconectado.","info"),ys.push("/admin/login")}catch(e){console.error("Erro ao fazer logout:",e),this.error="Erro ao fazer logout.",t.showToast("Erro de Logout","Não foi possível desconectar.","error")}finally{this.loading=!1}},async initializeAuth(){const t=localStorage.getItem("adminAuthToken");if(t){this.authToken=t;try{await Ec(rn,t),await this._updateUserInfoFromFirebase(rn.currentUser),console.log("Auth Store: Inicializado com token e user do localStorage. isAdmin:",this.user.isAdmin)}catch(e){console.error("Erro ao re-autenticar com custom token:",e),this.authToken=null,this.user=null,localStorage.removeItem("adminAuthToken"),localStorage.removeItem("adminUser")}}else this.authToken=null,this.user=null,localStorage.removeItem("adminAuthToken"),localStorage.removeItem("adminUser"),console.log("Auth Store: Nenhum token/user no localStorage ou inconsistente. Limpando.")}}}),JM={class:"space-y-3 h-full flex flex-col justify-between"},YM={class:"flex-1 space-y-3 p-4"},XM={key:0,class:"absolute left-full ml-3 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-xl opacity-0 group-hover:opacity-100 transition-all duration-200 pointer-events-none whitespace-nowrap z-[9999] transform translate-x-2 group-hover:-translate-x-2"},ZM={key:0,class:"absolute left-full ml-3 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-xl opacity-0 group-hover:opacity-100 transition-all duration-200 pointer-events-none whitespace-nowrap z-[9999] transform translate-x-2 group-hover:-translate-x-2"},e6={key:0,class:"absolute left-full ml-3 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-xl opacity-0 group-hover:opacity-100 transition-all duration-200 pointer-events-none whitespace-nowrap z-[9999] transform translate-x-2 group-hover:-translate-x-2"},t6={key:0,class:"absolute left-full ml-3 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-xl opacity-0 group-hover:opacity-100 transition-all duration-200 pointer-events-none whitespace-nowrap z-[9999] transform translate-x-2 group-hover:-translate-x-2"},n6={key:0,class:"absolute left-full ml-3 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-xl opacity-0 group-hover:opacity-100 transition-all duration-200 pointer-events-none whitespace-nowrap z-[9999] transform translate-x-2 group-hover:-translate-x-2"},r6={key:0,class:"absolute left-full ml-3 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-xl opacity-0 group-hover:opacity-100 transition-all duration-200 pointer-events-none whitespace-nowrap z-[9999] transform translate-x-2 group-hover:-translate-x-2"},s6={key:0,class:"absolute left-full ml-3 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-xl opacity-0 group-hover:opacity-100 transition-all duration-200 pointer-events-none whitespace-nowrap z-[9999] transform translate-x-2 group-hover:-translate-x-2"},o6={key:0,class:"absolute top-1 left-full ml-3 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-xl opacity-0 group-hover:opacity-100 transition-all duration-300 pointer-events-none whitespace-nowrap z-[9999] transform translate-x-2 group-hover:-translate-x-2"},i6={key:0,class:"fixed inset-0 bg-gray-800 p-6 z-50 md:hidden flex flex-col w-64 shadow-lg translate-x-0 transition-transform duration-300 ease-in-out"},a6={class:"space-y-3 flex-grow"},l6={__name:"Sidebar",props:{mobileMenuOpen:{type:Boolean,default:!1},shortMenu:{type:Boolean,default:!1}},emits:["toggle-mobile-menu","toggle-short-menu"],setup(t,{emit:e}){const n=e,r=()=>{n("toggle-mobile-menu")},s=()=>{n("toggle-short-menu")};return(o,i)=>{const a=Bi("RouterLink");return R(),O(ge,null,[d("nav",{class:re([t.shortMenu?"w-20":"w-52","hidden md:block bg-gray-800 dark:bg-gray-800 rounded-lg ml-2 shadow-lg fixed left-0 top-2 bottom-4 h-[calc(100vh-1rem)] transition-all duration-300 z-50"])},[d("div",JM,[i[15]||(i[15]=d("div",{class:"flex items-center justify-center bg-gray-900 text-gray-200 p-2 rounded-t-md"},"PN",-1)),d("div",YM,[ue(a,{to:"/admin","active-class":"active__class",class:"active__class__hover flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-400 hover:bg-gray-900 hover:text-orange-200 dark:hover:bg-gray-700 transition-colors duration-300 relative group"},{default:me(()=>[i[1]||(i[1]=d("div",{class:"w-5 h-5 flex items-center"},[d("i",{class:"fa-duotone fa-chart-line fa-fw"})],-1)),d("span",{class:re(["overflow-hidden transition-all duration-300",t.shortMenu?"opacity-0 w-0":"ml-3 opacity-100"])},"Dashboard",2),t.shortMenu?(R(),O("div",XM,i[0]||(i[0]=[Q(" Dashboard "),d("div",{class:"absolute top-1/2 left-[2px] transform -translate-x-2 -translate-y-1/2 w-0 h-0 border-t-[6px] border-b-[6px] border-r-[6px] border-transparent border-r-gray-900"},null,-1)]))):le("",!0)]),_:1,__:[1]}),ue(a,{to:"/admin/orders","active-class":"active__class",class:"active__class__hover flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-400 hover:bg-gray-900 hover:text-orange-200 dark:hover:bg-gray-700 transition-colors duration-300 relative group"},{default:me(()=>[i[3]||(i[3]=d("div",{class:"flex items-center w-6 h-6"},[d("i",{class:"fa-duotone fa-book fa-fw","aria-hidden":"true"})],-1)),d("span",{class:re(["ml-3 overflow-hidden transition-all duration-300",t.shortMenu?"opacity-0 w-0 hidden":"opacity-100"])},"Pedidos",2),t.shortMenu?(R(),O("div",ZM,i[2]||(i[2]=[Q(" Pedidos "),d("div",{class:"absolute top-1/2 left-[2px] transform -translate-x-2 -translate-y-1/2 w-0 h-0 border-t-[6px] border-b-[6px] border-r-[6px] border-transparent border-r-gray-900"},null,-1)]))):le("",!0)]),_:1,__:[3]}),ue(a,{to:"/admin/products","active-class":"active__class",class:"active__class__hover flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-400 hover:bg-gray-700 dark:hover:bg-gray-700 transition-colors duration-200 relative group"},{default:me(()=>[i[5]||(i[5]=d("div",{class:"w-6 h-6 flex items-center"},[d("i",{class:"fa-duotone fa-box-open fa-fw","aria-hidden":"true"})],-1)),d("span",{class:re(["ml-3 overflow-hidden transition-all duration-300",t.shortMenu?"opacity-0 w-0":"opacity-100"])},"Produtos",2),t.shortMenu?(R(),O("div",e6,i[4]||(i[4]=[Q(" Produtos "),d("div",{class:"absolute top-1/2 left-[2px] transform -translate-x-2 -translate-y-1/2 w-0 h-0 border-t-[6px] border-b-[6px] border-r-[6px] border-transparent border-r-gray-900"},null,-1)]))):le("",!0)]),_:1,__:[5]}),ue(a,{to:"/admin/categories","active-class":"active__class",class:"active__class__hover flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-400 hover:bg-gray-700 dark:hover:bg-gray-700 transition-colors duration-200 relative group"},{default:me(()=>[i[7]||(i[7]=d("div",{class:"w-6 h-6 flex items-center"},[d("i",{class:"fa-duotone fa-tags fa-fw","aria-hidden":"true"})],-1)),d("span",{class:re(["ml-3 overflow-hidden transition-all duration-300",t.shortMenu?"opacity-0 w-0":"opacity-100"])},"Categorias",2),t.shortMenu?(R(),O("div",t6,i[6]||(i[6]=[Q(" Categorias "),d("div",{class:"absolute top-1/2 left-[2px] transform -translate-x-2 -translate-y-1/2 w-0 h-0 border-t-[6px] border-b-[6px] border-r-[6px] border-transparent border-r-gray-900"},null,-1)]))):le("",!0)]),_:1,__:[7]}),ue(a,{to:"/admin/whatsapp-qr","active-class":"active__class",class:"active__class__hover flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-400 hover:bg-gray-700 dark:hover:bg-gray-700 transition-colors duration-200 relative group"},{default:me(()=>[i[9]||(i[9]=d("div",{class:"w-6 h-6 flex items-center"},[d("i",{class:"fab fa-whatsapp fa-fw","aria-hidden":"true"})],-1)),d("span",{class:re(["ml-3 overflow-hidden transition-all duration-300",t.shortMenu?"opacity-0 w-0":"opacity-100"])},"Whatsapp",2),t.shortMenu?(R(),O("div",n6,i[8]||(i[8]=[Q(" Conectar WhatsApp "),d("div",{class:"absolute top-1/2 left-[2px] transform -translate-x-2 -translate-y-1/2 w-0 h-0 border-t-[6px] border-b-[6px] border-r-[6px] border-transparent border-r-gray-900"},null,-1)]))):le("",!0)]),_:1,__:[9]}),ue(a,{to:"/admin/settings","active-class":"active__class",class:"active__class__hover flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-400 hover:bg-gray-700 dark:hover:bg-gray-700 transition-colors duration-200 relative group"},{default:me(()=>[i[11]||(i[11]=d("div",{class:"w-6 h-6 flex items-center"},[d("i",{class:"fa-duotone fa-tools fa-fw","aria-hidden":"true"})],-1)),d("span",{class:re(["ml-3 overflow-hidden transition-all duration-300",t.shortMenu?"opacity-0 w-0":"opacity-100"])},"Configurações",2),t.shortMenu?(R(),O("div",r6,i[10]||(i[10]=[Q(" Configurações "),d("div",{class:"absolute top-1/2 left-[2px] transform -translate-x-2 -translate-y-1/2 w-0 h-0 border-t-[6px] border-b-[6px] border-r-[6px] border-transparent border-r-gray-900"},null,-1)]))):le("",!0)]),_:1,__:[11]}),ue(a,{to:"/admin/manage-users","active-class":"active__class",class:"active__class__hover flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-400 hover:bg-gray-700 dark:hover:bg-gray-700 transition-colors duration-200 relative group"},{default:me(()=>[i[13]||(i[13]=d("div",{class:"w-6 h-6 flex items-center"},[d("i",{class:"fa-duotone fa-users-gear fa-fw","aria-hidden":"true"})],-1)),d("span",{class:re(["ml-3 overflow-hidden transition-all duration-300",t.shortMenu?"opacity-0 w-0":"opacity-100"])},"Usuários",2),t.shortMenu?(R(),O("div",s6,i[12]||(i[12]=[Q(" Gerenciamento de Usuários "),d("div",{class:"absolute top-1/2 left-[2px] transform -translate-x-2 -translate-y-1/2 w-0 h-0 border-t-[6px] border-b-[6px] border-r-[6px] border-transparent border-r-gray-900"},null,-1)]))):le("",!0)]),_:1,__:[13]})]),d("div",{class:"p-3 hidden md:flex text-gray-300 relative cursor-pointer hover:text-white transition-colors group bg-sky-600 hover:bg-sky-700 rounded-b-md h-12 space-x-2 justify-center items-center",onClick:s},[d("i",{class:re([t.shortMenu?"fa-light fa-circle-arrow-right":"fa-light fa-circle-arrow-left","fa-fw"]),"aria-hidden":"true"},null,2),d("span",{class:re(["grow text-ellipsis line-clamp-1 pr-1",t.shortMenu?"hidden":""])},"Recolher menu",2),t.shortMenu?(R(),O("div",o6,[Q(F(t.shortMenu?"Expandir menu":"Contrair menu")+" ",1),i[14]||(i[14]=d("div",{class:"absolute top-1/2 left-[2px] transform -translate-x-2 -translate-y-1/2 w-0 h-0 border-t-[6px] border-b-[6px] border-r-[6px] border-transparent border-r-gray-900"},null,-1))])):le("",!0)])])],2),ue(vo,{name:"slide"},{default:me(()=>[t.mobileMenuOpen?(R(),O("aside",i6,[d("div",{class:"flex justify-end mb-6"},[d("button",{onClick:r,class:"text-gray-500 dark:text-white text-3xl"}," × ")]),d("nav",a6,[ue(a,{onClick:r,to:"/admin","active-class":"bg-gray-700 text-white",class:"flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-300 hover:bg-blue-50 dark:hover:bg-gray-700 transition-colors duration-200"},{default:me(()=>i[16]||(i[16]=[d("i",{class:"fa-duotone fa-chart-line mr-3 text-lg"},null,-1),Q(" Dashboard ")])),_:1,__:[16]}),ue(a,{onClick:r,to:"/admin/orders","active-class":"bg-gray-700 text-white",class:"flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-300 hover:bg-blue-50 dark:hover:bg-gray-700 transition-colors duration-200"},{default:me(()=>i[17]||(i[17]=[d("i",{class:"fa-duotone fa-receipt mr-3 text-lg"},null,-1),Q(" Pedidos ")])),_:1,__:[17]}),ue(a,{onClick:r,to:"/admin/products","active-class":"bg-gray-700 text-white",class:"flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-300 hover:bg-blue-50 dark:hover:bg-gray-700 transition-colors duration-200"},{default:me(()=>i[18]||(i[18]=[d("i",{class:"fa-duotone fa-box-open mr-3 text-lg"},null,-1),Q(" Produtos ")])),_:1,__:[18]}),ue(a,{onClick:r,to:"/admin/categories","active-class":"bg-gray-700 text-white",class:"flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-300 hover:bg-blue-50 dark:hover:bg-gray-700 transition-colors duration-200"},{default:me(()=>i[19]||(i[19]=[d("i",{class:"fa-duotone fa-tags mr-3 text-lg"},null,-1),Q(" Categorias ")])),_:1,__:[19]}),ue(a,{onClick:r,to:"/admin/whatsapp-qr","active-class":"bg-gray-700 text-white",class:"flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-300 hover:bg-blue-50 dark:hover:bg-gray-700 transition-colors duration-200"},{default:me(()=>i[20]||(i[20]=[d("i",{class:"fab fa-whatsapp mr-3 text-lg"},null,-1),Q(" WhatsApp QR ")])),_:1,__:[20]}),ue(a,{onClick:r,to:"/admin/settings","active-class":"bg-gray-700 text-white",class:"flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-300 hover:bg-blue-50 dark:hover:bg-gray-700 transition-colors duration-200"},{default:me(()=>i[21]||(i[21]=[d("i",{class:"fa-duotone fa-tools mr-3 text-lg"},null,-1),Q(" Configurações ")])),_:1,__:[21]}),ue(Ga,{class:"border-b-gray-900/30"}),ue(a,{onClick:r,to:"/admin/manage-users","active-class":"bg-gray-700 text-white",class:"flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-300 hover:bg-blue-50 dark:hover:bg-gray-700 transition-colors duration-200"},{default:me(()=>i[22]||(i[22]=[d("i",{class:"fa-duotone fa-users-gear mr-3 text-lg"},null,-1),Q(" Gerenciar Usuários ")])),_:1,__:[22]})])])):le("",!0)]),_:1})],64)}}},u6=Ot(l6,[["__scopeId","data-v-f218980f"]]),c6={class:"grid min-h-full bg-gray-200 dark:bg-gray-900 relative"},d6={class:"flex space-x-6"},h6={class:"flex items-center space-x-4 py-4 group relative"},f6={key:0,class:"text-gray-700 dark:text-gray-300 sm:block"},p6={class:"text-xs"},g6={__name:"AdminLayout",setup(t){const e=Cu(),n=H(!1),r=H(!1),s=H(!1),o=()=>{const f=localStorage.getItem("adminSidebarShortMenu");f!==null&&(s.value=JSON.parse(f))},i=f=>{localStorage.setItem("adminSidebarShortMenu",JSON.stringify(f))},a=()=>{r.value=!r.value},u=()=>{n.value=!n.value},c=()=>{s.value=!s.value,i(s.value)},h=()=>{n.value=!1};return qt(s,f=>{i(f)}),ft(()=>{e.initializeAuth(),o()}),(f,g)=>{var m;return R(),O("div",null,[d("div",c6,[d("header",{class:re(["fixed top-0 lg:top-0.5 left-0 right-0 lg:right-2 z-50 bg-gray-100/30 backdrop-blur-xs dark:bg-gray-800/50 shadow pr-6 pl-4 md:pl-0 flex items-center justify-between h-14 rounded-2xl transform-all duration-300",s.value?"lg:left-25":"lg:left-56"])},[d("div",{class:"flex items-center"},[d("button",{onClick:u,class:"md:hidden text-gray-700 dark:text-white text-2xl mr-4"},g[2]||(g[2]=[d("i",{class:"fa-duotone fa-solid fa-bars-sort"},null,-1)])),g[3]||(g[3]=d("h1",{class:"text-md font-bold p-4 hidden md:flex transition-all duration-300 dark:text-gray-200"},[d("span",null,"Painel Admin")],-1))]),d("div",d6,[g[7]||(g[7]=rl('<div class="flex items-center space-x-8" data-v-646a505a><button class="text-gray-700 dark:text-white text-2xl cursor-pointer relative group" data-v-646a505a><span class="absolute top-0 -right-2 bg-orange-600 text-white text-xs rounded-full px-1 z-10" data-v-646a505a>3</span><i class="fa-duotone fa-bell" data-v-646a505a></i><div class="rounded-md text-xs z-20 px-2 py-1 bg-white dark:bg-gray-700 absolute -bottom-5 -left-1/2 shadow-md group-hover:flex hidden group-hover:translate-y-2 animate__animated animate__fadeIn" data-v-646a505a> Notificações </div></button><button class="text-gray-700 dark:text-white text-2xl cursor-pointer relative group" data-v-646a505a><span class="absolute top-0 -right-2 bg-yellow-600 text-white text-xs rounded-full px-1 z-10" data-v-646a505a>3</span><i class="fa-duotone fa-envelope" data-v-646a505a></i><div class="rounded-md text-xs z-20 px-2 py-1 bg-white dark:bg-gray-700 absolute -bottom-5 -left-1/2 shadow-md group-hover:flex hidden group-hover:translate-y-2 animate__animated animate__fadeIn" data-v-646a505a> Mensagens </div></button><button class="text-gray-700 dark:text-white text-2xl cursor-pointer relative group" data-v-646a505a><i class="fa-duotone fa-cogs" data-v-646a505a></i><div class="rounded-md text-xs z-20 px-2 py-1 bg-white dark:bg-gray-700 absolute -bottom-5 -left-1/2 shadow-md group-hover:flex hidden group-hover:translate-y-2 animate__animated animate__fadeIn" data-v-646a505a> Configurações </div></button></div>',1)),d("div",h6,[(m=_e(e).user)!=null&&m.email?(R(),O("div",f6,[d("div",{onClick:a,class:"flex items-center cursor-pointer"},[g[4]||(g[4]=d("i",{class:"fa-duotone fa-user-circle mr-2 text-2xl dark:text-white"},null,-1)),d("span",p6,F(_e(e).user.displayName),1)]),d("ul",{class:re(["w-auto flex-col space-y-4 text-sm dark:text-gray-200 bg-gray-100 dark:bg-gray-800 absolute p-2 rounded-md shadow-lg top-8 -z-50 -right-1 opacity-0 -translate-y-full group-hover:flex group-hover:translate-y-5 group-hover:opacity-100 transition-all duration-200 border border-gray-200 dark:border-gray-800",[{"opacity-100 translate-y-5":r.value}]])},[g[6]||(g[6]=rl('<li class="flex items-center space-x-2 p-2 whitespace-nowrap cursor-pointer hover:bg-gray-200/90 dark:hover:bg-gray-400" data-v-646a505a><i class="fa-duotone fa-user" data-v-646a505a></i><span class="text-gray-600" data-v-646a505a>Perfil</span></li><li class="flex items-center space-x-2 p-2 whitespace-nowrap cursor-pointer hover:bg-gray-200/90 dark:hover:bg-gray-400" data-v-646a505a><i class="fa-duotone fa-cog" data-v-646a505a></i><span class="text-gray-600" data-v-646a505a>Configurações</span></li><li class="flex items-center space-x-2 p-2 whitespace-nowrap cursor-pointer hover:bg-gray-200/90 dark:hover:bg-gray-400" data-v-646a505a><i class="fa-duotone fa-lock" data-v-646a505a></i><span class="text-gray-600" data-v-646a505a>Segurança</span></li>',3)),d("li",{onClick:g[0]||(g[0]=_=>_e(e).logout()),class:"flex items-center space-x-2 p-2 whitespace-nowrap cursor-pointer text-red-600 hover:bg-gray-200/90 dark:hover:bg-gray-400"},g[5]||(g[5]=[d("i",{class:"fa-duotone fa-solid fa-right-from-bracket"},null,-1),d("span",null,"Sair",-1)]))],2)])):le("",!0)])])],2),ue(u6,{"mobile-menu-open":n.value,"short-menu":s.value,onToggleMobileMenu:u,onToggleShortMenu:c},null,8,["mobile-menu-open","short-menu"]),d("main",{class:re(["flex-1 mt-14 p-4 transition-all duration-300",s.value?"md:ml-22":"md:ml-52"]),onClick:g[1]||(g[1]=_=>r.value=!1)},[d("div",{class:re(["transition-transform duration-300 ease-in-out",{"translate-x-0":!n.value,"translate-x-52 original-transform":n.value}]),onClick:Mn(h,["stop"])},[Bd(f.$slots,"default",{},void 0,!0)],2)],2)])])}}},Ds=Ot(g6,[["__scopeId","data-v-646a505a"]]),m6={class:"space-y-8 p-4 md:p-8 bg-white dark:bg-gray-900 rounded-lg shadow-xl"},y6={key:0,class:"text-center py-12"},v6={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 text-gray-700 dark:text-white"},_6={class:"dark:bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700/20 hover:scale-110 transition-all duration-300"},b6={class:"space-y-2"},w6={class:"text-lg"},x6={class:"text-green-400 text-lg"},E6={class:"text-yellow-400 text-lg"},T6={class:"text-lg"},I6={class:"dark:bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700/20 hover:scale-110 transition-all duration-300"},k6={class:"space-y-2"},A6={class:"text-lg"},S6={class:"text-lg"},C6={class:"list-disc list-inside ml-4"},R6={key:0,class:"text-sm italic"},P6={class:"dark:bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700/20 hover:scale-110 transition-all duration-300"},O6={class:"space-y-2"},N6={class:"text-lg"},D6={class:"text-lg"},V6={class:"list-disc list-inside ml-4"},M6={key:0,class:"text-sm italic"},$6={class:"dark:bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700/20 hover:scale-110 transition-all duration-300"},L6={class:"space-y-2"},F6={class:"text-lg"},U6={class:"text-lg"},j6={class:"text-lg"},B6={class:"dark:bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700/20 hover:scale-110 transition-all duration-300"},z6={class:"space-y-2"},q6={class:"text-lg"},H6={class:"text-lg"},K6={class:"text-lg"},W6={__name:"AdminDashboard",setup(t){const e=H(!0),n=H({totalOrders:0,completedOrders:0,pendingOrders:0,totalRevenue:0,totalProducts:0,totalCategories:0,topSellingProducts:[],totalClients:0,totalOrders:0,newClientsLast30Days:0,mostActiveClients:[],deliveryOrders:0,pickupOrders:0,averageDeliveryFee:0,pixPayments:0,cardPayments:0,cashPayments:0});async function r(){var s;e.value=!0;try{const o=n.value;return n.value={completedOrders:o.data.completedOrders||980,pendingOrders:o.data.pendingOrders||150,totalRevenue:o.data.totalRevenue||75000.5,totalProducts:o.data.totalProducts||55,totalCategories:o.data.totalCategories||12,topSellingProducts:o.data.topSellingProducts||[{name:"Pizza de Calabresa",sales:120},{name:"Coca-Cola 2L",sales:90},{name:"Pizza de Chocolate",sales:75}],totalClients:o.data.totalClients||800,totalOrders:o.data.totalOrders||1234,newClientsLast30Days:o.data.newClientsLast30Days||45,mostActiveClients:o.data.mostActiveClients||[{name:"Ana Souza",orders:15},{name:"Carlos Lima",orders:12}],deliveryOrders:o.data.deliveryOrders||850,pickupOrders:o.data.pickupOrders||384,averageDeliveryFee:o.data.averageDeliveryFee||7.5,pixPayments:o.data.pixPayments||3e4,cardPayments:o.data.cardPayments||4e4,cashPayments:o.data.cashPayments||5000.5},console.log("Dados do dashboard carregados:",n.value),n.value}catch(o){console.error("Erro ao carregar dados do dashboard:",((s=o.response)==null?void 0:s.data)||o.message)}finally{e.value=!1}}return ft(()=>{r()}),(s,o)=>(R(),Qe(Ds,null,{default:me(()=>[d("div",m6,[o[36]||(o[36]=d("div",{class:"text-gray-700 dark:text-white flex flex-col items-start space-y-0"},[d("span",{class:"text-2xl font-bold"},"Dashboard Administrativo"),d("small",{class:"text-gray-500 dark:text-gray-400 text-xs"},"Visão geral e estatísticas da sua plataforma.")],-1)),e.value?(R(),O("div",y6,o[0]||(o[0]=[d("div",{class:"animate-spin rounded-full h-16 w-16 border-b-2 border-gray-400 mx-auto"},null,-1),d("p",{class:"text-gray-400 mt-4 text-lg"},"Carregando dados do dashboard...",-1)]))):(R(),O("div",v6,[d("div",_6,[o[9]||(o[9]=d("div",{class:"flex items-center justify-between mb-4"},[d("h3",{class:"text-xl font-semibold"},"Visão Geral de Pedidos"),d("i",{class:"fa-duotone fa-receipt text-blue-400 text-3xl"})],-1)),d("div",b6,[d("p",null,[o[1]||(o[1]=d("strong",null,"Total de Pedidos:",-1)),o[2]||(o[2]=Q()),d("span",w6,F(n.value.totalOrders),1)]),d("p",null,[o[3]||(o[3]=d("strong",null,"Pedidos Finalizados:",-1)),o[4]||(o[4]=Q()),d("span",x6,F(n.value.completedOrders),1)]),d("p",null,[o[5]||(o[5]=d("strong",null,"Pedidos Pendentes:",-1)),o[6]||(o[6]=Q()),d("span",E6,F(n.value.pendingOrders),1)]),d("p",null,[o[7]||(o[7]=d("strong",null,"Receita Total:",-1)),o[8]||(o[8]=Q()),d("span",T6,F(s.$formatPrice(n.value.totalRevenue)),1)])])]),d("div",I6,[o[15]||(o[15]=d("div",{class:"flex items-center justify-between mb-4"},[d("h3",{class:"text-xl font-semibold"},"Resumo de Produtos"),d("i",{class:"fa-duotone fa-box-open text-orange-600 text-3xl"})],-1)),d("div",k6,[d("p",null,[o[10]||(o[10]=d("strong",null,"Total de Produtos:",-1)),o[11]||(o[11]=Q()),d("span",A6,F(n.value.totalProducts),1)]),d("p",null,[o[12]||(o[12]=d("strong",null,"Total de Categorias:",-1)),o[13]||(o[13]=Q()),d("span",S6,F(n.value.totalCategories),1)]),o[14]||(o[14]=d("p",null,[d("strong",null,"Produtos Mais Vendidos:")],-1)),d("ul",C6,[(R(!0),O(ge,null,Ne(n.value.topSellingProducts,(i,a)=>(R(),O("li",{key:a,class:"text-sm"},F(i.name)+" ("+F(i.sales)+" vendas) ",1))),128)),n.value.topSellingProducts.length===0?(R(),O("li",R6,"Nenhum produto mais vendido.")):le("",!0)])])]),d("div",P6,[o[21]||(o[21]=d("div",{class:"flex items-center justify-between mb-4"},[d("h3",{class:"text-xl font-semibold"},"Resumo de Clientes"),d("i",{class:"fa-duotone fa-users text-pink-400 text-3xl"})],-1)),d("div",O6,[d("p",null,[o[16]||(o[16]=d("strong",null,"Total de Clientes:",-1)),o[17]||(o[17]=Q()),d("span",N6,F(n.value.totalClients),1)]),d("p",null,[o[18]||(o[18]=d("strong",null,"Novos Clientes (Últimos 30 dias):",-1)),o[19]||(o[19]=Q()),d("span",D6,F(n.value.newClientsLast30Days),1)]),o[20]||(o[20]=d("p",null,[d("strong",null,"Clientes Mais Ativos:")],-1)),d("ul",V6,[(R(!0),O(ge,null,Ne(n.value.mostActiveClients,(i,a)=>(R(),O("li",{key:a,class:"text-sm"},F(i.name)+" ("+F(i.orders)+" pedidos) ",1))),128)),n.value.mostActiveClients.length===0?(R(),O("li",M6,"Nenhum cliente ativo.")):le("",!0)])])]),d("div",$6,[o[28]||(o[28]=d("div",{class:"flex items-center justify-between mb-4"},[d("h3",{class:"text-xl font-semibold"},"Estatísticas de Entrega"),d("i",{class:"fa-duotone fa-truck text-orange-400 text-3xl"})],-1)),d("div",L6,[d("p",null,[o[22]||(o[22]=d("strong",null,"Pedidos para Delivery:",-1)),o[23]||(o[23]=Q()),d("span",F6,F(n.value.deliveryOrders),1)]),d("p",null,[o[24]||(o[24]=d("strong",null,"Pedidos para Retirada:",-1)),o[25]||(o[25]=Q()),d("span",U6,F(n.value.pickupOrders),1)]),d("p",null,[o[26]||(o[26]=d("strong",null,"Taxa Média de Entrega:",-1)),o[27]||(o[27]=Q()),d("span",j6,F(s.$formatPrice(n.value.averageDeliveryFee)),1)])])]),d("div",B6,[o[35]||(o[35]=d("div",{class:"flex items-center justify-between mb-4"},[d("h3",{class:"text-xl font-semibold"},"Resumo de Pagamentos"),d("i",{class:"fa-duotone fa-credit-card text-teal-400 text-3xl"})],-1)),d("div",z6,[d("p",null,[o[29]||(o[29]=d("strong",null,"Pagamentos Pix:",-1)),o[30]||(o[30]=Q()),d("span",q6,F(s.$formatPrice(n.value.pixPayments)),1)]),d("p",null,[o[31]||(o[31]=d("strong",null,"Pagamentos Cartão:",-1)),o[32]||(o[32]=Q()),d("span",H6,F(s.$formatPrice(n.value.cardPayments)),1)]),d("p",null,[o[33]||(o[33]=d("strong",null,"Pagamentos Dinheiro:",-1)),o[34]||(o[34]=Q()),d("span",K6,F(s.$formatPrice(n.value.cashPayments)),1)])])])]))])]),_:1}))}},G6={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg w-auto max-h-[95vh] overflow-y-auto p-6 relative custom-scrollbar",role:"dialog","aria-modal":"true"},Q6={__name:"BaseModal",props:{open:{type:Boolean,default:!1}},emits:["update:open"],setup(t,{emit:e}){const n=e;function r(){n("update:open",!1)}return(s,o)=>t.open?(R(),O("div",{key:0,class:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50 p-4 dark:bg-gray-900/40 m-auto text-gray-900 dark:text-white",onClick:Mn(r,["self"])},[ue(vo,{name:"custom-classes",appear:"","enter-active-class":"animate__animated animate__zoomIn animate__faster","leave-active-class":"animate__animated animate__bounceOutRight animate__faster"},{default:me(()=>[Ae(d("div",G6,[Bd(s.$slots,"default",{},void 0,!0)],512),[[lE,t.open]])]),_:3})])):le("",!0)}},As=Ot(Q6,[["__scopeId","data-v-ec6dc83f"]]),J6={class:"space-y-6 p-4 md:p-8 bg-white dark:bg-gray-800 h-screen rounded-lg shadow-xl"},Y6={class:"flex items-center justify-between"},X6={class:"text-2xl font-bold text-gray-900 dark:text-white"},Z6={key:0,class:"inline-flex items-center ml-2"},e$={key:1,class:"inline-flex items-center ml-2"},t$={class:"text-right"},n$={class:"text-sm text-gray-600 dark:text-gray-400"},r$={class:"font-semibold"},s$={class:"text-xs text-gray-500 dark:text-gray-500"},o$={key:0,class:"text-center py-8"},i$={key:1,class:"text-center py-8"},a$={key:2,class:"flex flex-col lg:flex-row gap-4"},l$={class:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-4 gap-4 flex-grow"},u$={class:"bg-gray-100 dark:bg-gray-900 p-4 rounded-lg shadow-inner"},c$={class:"text-lg font-bold text-gray-900 dark:text-white mb-4 border-b pb-2 border-gray-300 dark:border-gray-700"},d$={class:"ml-2 px-2 py-1 text-xs font-semibold rounded-full bg-orange-200 text-orange-800 dark:bg-orange-800 dark:text-orange-200"},h$={class:"space-y-4 max-h-[calc(100vh-250px)] overflow-y-auto pr-2"},f$=["onClick"],p$={class:"flex-shrink-0 mr-4 space-y-1"},g$={class:"flex items-center gap-2"},m$={class:"font-semibold"},y$={class:"font-light"},v$={key:0,class:"px-1 py-0.5 bg-green-500 text-white text-xs rounded-full animate-bounce"},_$={class:"font-semibold"},b$={class:"font-light"},w$={class:"font-semibold"},x$={class:"font-light"},E$={class:"font-semibold"},T$={class:"font-semibold"},I$={class:"font-light"},k$={key:0,class:"text-center text-gray-500 dark:text-gray-400 py-4"},A$={class:"bg-gray-100 dark:bg-gray-900 p-4 rounded-lg shadow-inner"},S$={class:"text-lg font-bold text-gray-900 dark:text-white mb-4 border-b pb-2 border-gray-300 dark:border-gray-700"},C$={class:"ml-2 px-2 py-1 text-xs font-semibold rounded-full bg-blue-200 text-blue-800 dark:bg-blue-800 dark:text-blue-200"},R$={class:"space-y-4 max-h-[calc(100vh-250px)] overflow-y-auto pr-2"},P$=["onClick"],O$={class:"flex-shrink-0 mr-4 space-y-1"},N$={class:"font-semibold"},D$={class:"font-light"},V$={class:"font-semibold"},M$={class:"font-light"},$$={class:"font-semibold"},L$={class:"font-light"},F$={class:"font-semibold"},U$={class:"font-semibold"},j$={class:"font-light"},B$={key:0,class:"text-center text-gray-500 dark:text-gray-400 py-4"},z$={class:"bg-gray-100 dark:bg-gray-900 p-4 rounded-lg shadow-inner"},q$={class:"text-lg font-bold text-gray-900 dark:text-white mb-4 border-b pb-2 border-gray-300 dark:border-gray-700"},H$={class:"ml-2 px-2 py-1 text-xs font-semibold rounded-full bg-purple-200 text-purple-800 dark:bg-purple-800 dark:text-purple-200"},K$={class:"space-y-4 max-h-[calc(100vh-250px)] overflow-y-auto pr-2"},W$=["onClick"],G$={class:"flex-shrink-0 mr-4 space-y-1"},Q$={class:"font-semibold"},J$={class:"font-light"},Y$={class:"font-semibold"},X$={class:"font-light"},Z$={class:"font-semibold"},eL={class:"font-light"},tL={class:"font-semibold"},nL={class:"font-semibold"},rL={class:"font-light"},sL={key:0,class:"text-center text-gray-500 dark:text-gray-400 py-4"},oL={class:"lg:w-64 bg-gray-100 dark:bg-gray-900 p-4 rounded-lg shadow-inner flex-shrink-0"},iL={class:"space-y-2"},aL={key:3,class:"mt-8"},lL={class:"text-xl font-bold text-gray-900 dark:text-white mb-4 border-b pb-2 border-gray-300 dark:border-gray-700"},uL={class:"ml-2 px-2 py-1 text-xs font-semibold rounded-full bg-gray-200 text-gray-800 dark:bg-gray-800 dark:text-gray-200"},cL={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},dL=["onClick"],hL={class:"flex-shrink-0 mr-4 space-y-1"},fL={class:"font-semibold"},pL={class:"font-light"},gL={class:"font-semibold"},mL={class:"font-light"},yL={class:"font-semibold"},vL={class:"font-light"},_L={class:"font-semibold"},bL={class:"font-semibold"},wL={class:"font-light"},xL={key:4,class:"mt-8 text-center text-gray-500 dark:text-gray-400 py-4"},EL={key:5,class:"bg-red-100 dark:bg-red-900/20 border border-red-300 dark:border-red-700 text-red-700 dark:text-red-400 px-4 py-3 rounded relative"},TL={class:"block sm:inline"},IL={class:"text-gray-900 dark:text-white relative"},kL={class:"md:text-2xl font-bold mb-4 border-b border-gray-300 dark:border-gray-900 pb-2"},AL={class:"text-orange-500 italic font-normal"},SL={class:"grid grid-cols-1 md:grid-cols-2 gap-2 md:gap-4 text-gray-700 dark:text-gray-300 text-md"},CL={class:"col-span-full"},RL={key:0},PL={key:0},OL={key:1},NL={class:"col-span-full"},DL=["value"],VL={key:0},ML={class:"text-sm space-y-1"},$L={class:"font-semibold"},LL={key:0,class:"text-xs text-gray-600 dark:text-gray-400"},FL={class:"mt-6 flex justify-end space-x-4 border-t border-gray-300 dark:border-gray-900 pt-4"},UL=["disabled"],jL={__name:"Orders",setup(t){const e=H([]),n=H(null),r=H(!1),s=H(!0),o=H(!1),i=H(""),a=H(""),u=H(!1),c=H(new Set),h=iw(Tu);let f=null;const g=["recebido","em_preparo","a_caminho","entregue","cancelado","em processamento"];function m(w){return w?w&&typeof w.toDate=="function"?w.toDate().getTime():w&&typeof w._seconds<"u"?w._seconds*1e3:w instanceof Date?w.getTime():typeof w=="string"?new Date(w).getTime():typeof w=="number"?w>1e12?w:w*1e3:0:0}const _=ye(()=>e.value.filter(w=>["recebido","em processamento"].includes(w.status)).sort((w,M)=>m(M.created_at)-m(w.created_at))),T=ye(()=>e.value.filter(w=>w.status==="em_preparo").sort((w,M)=>m(M.created_at)-m(w.created_at))),x=ye(()=>e.value.filter(w=>w.status==="a_caminho").sort((w,M)=>m(M.created_at)-m(w.created_at))),C=ye(()=>e.value.filter(w=>["entregue","cancelado"].includes(w.status)).sort((w,M)=>m(M.created_at)-m(w.created_at)));function P(w){let M=w.replace(/_/g," ");return M=M.charAt(0).toUpperCase()+M.slice(1),M}function V(w){return w&&w&&typeof w.toDate=="function"?w.toDate().toLocaleString("pt-BR"):""}const j=w=>{switch(w){case"credit_card":return"Cartão de Crédito";case"debit_card":return"Cartão de Débito";case"bank_transfer":case"pix":return"Pix";case"cash":return"Dinheiro";default:return"Outro"}},U=w=>{switch(w){case"paid":case"approved":return"Pago";case"pending":return"Pendente";case"failed":return"Falhou";case"refunded":return"Reembolsado";case"cancelled":return"Cancelado";default:return"Desconhecido"}},q=w=>{switch(w){case"em processamento":return"rounded-full px-2 py-0.5 text-xs font-medium bg-orange-50 text-orange-600 dark:bg-orange-500/15 dark:text-orange-500";case"recebido":return"rounded-full px-2 py-0.5 text-xs font-medium bg-yellow-50 text-yellow-600 dark:bg-yellow-500/15 dark:text-yellow-500";case"em_preparo":return"rounded-full px-2 py-0.5 text-xs font-medium bg-blue-50 text-blue-600 dark:bg-blue-500/15 dark:text-blue-500";case"finalizado":case"entregue":return"rounded-full px-2 py-0.5 text-xs font-medium bg-green-50 text-green-600 dark:bg-green-500/15 dark:text-green-500";case"a_caminho":return"rounded-full px-2 py-0.5 text-xs font-medium bg-purple-50 text-purple-600 dark:bg-purple-500/15 dark:text-purple-500";case"cancelado":return"rounded-full px-2 py-0.5 text-xs font-medium bg-red-50 text-red-600 dark:bg-red-500/15 dark:text-red-500";default:return"rounded-full px-2 py-0.5 text-xs font-medium bg-gray-50 text-gray-600 dark:bg-gray-500/15 dark:text-gray-500"}};function k(w){if(!w){console.warn("Tentativa de visualizar pedido nulo");return}if(!w.id){console.warn("Pedido sem ID:",w),i.value="Erro: Pedido sem ID válido";return}console.log("Visualizando pedido:",w.id),n.value=JSON.parse(JSON.stringify(w)),r.value=!0,c.value.has(w.id)&&c.value.delete(w.id)}function v(){n.value=null,r.value=!1,u.value=!1,i.value.includes("Erro ao atualizar pedido")&&(i.value="")}async function b(){if(!n.value){console.warn("Nenhum pedido selecionado");return}if(!n.value.id){console.warn("ID do pedido não encontrado"),i.value="Erro: ID do pedido não encontrado";return}if(!n.value.status){console.warn("Status do pedido não definido"),i.value="Erro: Status do pedido não definido";return}try{u.value=!0,i.value="";const w=n.value.id,M=n.value.status;console.log(`Atualizando pedido ${w} para status: ${M}`);const ce=tN(h,"orders",w);await vN(ce,{status:M,updated_at:new Date}),console.log("Status atualizado no Firestore com sucesso");try{await Ze.put(`/orders/${w}`,{status:M}),console.log("Status atualizado na API com sucesso")}catch(Se){console.warn("Erro ao atualizar via API (mas Firestore foi atualizado):",Se)}v(),console.log(`Status do pedido ${w} atualizado para: ${M}`)}catch(w){console.error("Erro ao atualizar status do pedido:",w);let M="Erro desconhecido";w.code==="permission-denied"?M="Sem permissão para atualizar este pedido":w.code==="not-found"?M="Pedido não encontrado no banco de dados":w.code==="unavailable"?M="Serviço temporariamente indisponível":w.message&&(M=w.message),i.value=`Erro ao atualizar pedido: ${M}`}finally{u.value=!1}}function S(){try{const w=fN(eN(h,"orders"),pN("created_at","desc"));f=_N(w,M=>{const ce=new Set(e.value.map(Se=>Se.id));M.docChanges().forEach(Se=>{const se={id:Se.doc.id,...Se.doc.data()},Ce=["recebido","em processamento"].includes(se.status);if(Se.type==="added")if(!ce.has(se.id))Ce&&c.value.add(se.id),e.value.unshift(se),Ce&&"Notification"in window&&Notification.permission==="granted"&&new Notification("Novo Pedido!",{body:`Pedido #${se.id} de ${se.client}`,icon:"/favicon.ico"});else{Ce?c.value.add(se.id):c.value.delete(se.id);const rt=e.value.findIndex(Et=>Et.id===se.id);rt!==-1&&(e.value[rt]={...e.value[rt],...se})}else if(Se.type==="modified"){const rt=e.value.findIndex(Et=>Et.id===se.id);rt!==-1&&(e.value[rt]={...e.value[rt],...se},Ce?c.value.add(se.id):c.value.delete(se.id))}else if(Se.type==="removed"){const rt=e.value.findIndex(Et=>Et.id===se.id);rt!==-1&&e.value.splice(rt,1),c.value.delete(se.id)}}),o.value=!0,i.value="",a.value=new Date().toLocaleTimeString(),s.value=!1},M=>{console.error("Erro no listener Firestore:",M),i.value=`Erro de conexão: ${M.message}`,o.value=!1,s.value=!1,setTimeout(()=>{o.value||E()},5e3)})}catch(w){console.error("Erro ao configurar listener:",w),i.value=`Erro ao conectar: ${w.message}`,s.value=!1}}function E(){console.log("Tentando reconectar..."),i.value="",s.value=!0,f&&f(),S()}async function A(){try{const w=await Ze.get("/orders");e.value=Array.isArray(w.data)?w.data:[],console.log("Pedidos carregados via API como fallback")}catch(w){console.error("Erro ao carregar pedidos via API:",w)}}return ft(async()=>{console.log("Iniciando conexão em tempo real com Firestore..."),"Notification"in window&&Notification.permission==="default"&&await Notification.requestPermission(),S(),setTimeout(()=>{!o.value&&e.value.length===0&&(console.warn("Firestore não conectou, usando API como fallback"),A(),s.value=!1)},1e4)}),yo(()=>{f&&(f(),console.log("Listener Firestore removido"))}),(w,M)=>(R(),O("div",null,[ue(Ds,null,{default:me(()=>[d("div",J6,[d("div",Y6,[d("div",null,[d("h2",X6,[M[4]||(M[4]=Q(" Pedidos ")),o.value?(R(),O("span",Z6,M[2]||(M[2]=[d("div",{class:"w-2 h-2 bg-green-500 rounded-full animate-pulse"},null,-1),d("span",{class:"text-xs text-green-600 dark:text-green-400 ml-1"},"Tempo Real",-1)]))):(R(),O("span",e$,M[3]||(M[3]=[d("div",{class:"w-2 h-2 bg-red-500 rounded-full"},null,-1),d("span",{class:"text-xs text-red-600 dark:text-red-400 ml-1"},"Desconectado",-1)])))]),M[5]||(M[5]=d("p",{class:"text-gray-600 dark:text-gray-400 text-xs font-normal"}," Gerencie todos os pedidos recebidos em tempo real. ",-1))]),d("div",t$,[d("p",n$,[M[6]||(M[6]=Q(" Total de pedidos: ")),d("span",r$,F(e.value.length),1)]),d("p",s$," Última atualização: "+F(a.value),1)])]),s.value?(R(),O("div",o$,M[7]||(M[7]=[d("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-400 dark:border-gray-600 mx-auto"},null,-1),d("p",{class:"text-gray-600 dark:text-gray-400 mt-4"},"Carregando pedidos...",-1)]))):e.value.length===0?(R(),O("div",i$,M[8]||(M[8]=[d("p",{class:"text-gray-600 dark:text-gray-400 text-lg"},"Nenhum pedido encontrado.",-1)]))):(R(),O("div",a$,[d("div",l$,[d("div",u$,[d("h3",c$,[M[9]||(M[9]=Q(" Novos Pedidos ")),d("span",d$,F(_.value.length),1)]),d("div",h$,[(R(!0),O(ge,null,Ne(_.value,ce=>(R(),O("div",{key:ce.id,onClick:Se=>k(ce),class:re(["p-2 rounded-md border border-gray-200/40 dark:border-gray-700/40 bg-gray-200 dark:bg-gray-800 text-gray-800 dark:text-white text-sm flex items-end justify-between shadow-md cursor-pointer hover:shadow-lg transition-all duration-300",c.value.has(ce.id)?"ring-2 ring-green-500 bg-green-50 dark:bg-green-900/20":""])},[d("div",p$,[d("div",g$,[d("p",m$,[M[10]||(M[10]=Q("Pedido: ")),d("span",y$,F(ce.id),1)]),c.value.has(ce.id)?(R(),O("span",v$," NOVO ")):le("",!0)]),d("p",_$,[M[11]||(M[11]=Q("Cliente: ")),d("span",b$,F(ce.client),1)]),d("p",w$,[M[12]||(M[12]=Q("Total: ")),d("span",x$,F(w.$formatPrice(ce.total)),1)]),d("p",E$,[M[13]||(M[13]=Q("Status: ")),d("span",{class:re(["font-light",q(ce.status)])},F(P(ce.status)),3)]),d("p",T$,[M[14]||(M[14]=Q("Data: ")),d("span",I$,F(V(ce.created_at)),1)])])],10,f$))),128)),_.value.length===0?(R(),O("p",k$,"Nenhum pedido novo.")):le("",!0)])]),d("div",A$,[d("h3",S$,[M[15]||(M[15]=Q(" Em Preparo ")),d("span",C$,F(T.value.length),1)]),d("div",R$,[(R(!0),O(ge,null,Ne(T.value,ce=>(R(),O("div",{key:ce.id,onClick:Se=>k(ce),class:re(["p-2 rounded-md border border-gray-200/40 dark:border-gray-700/40 bg-gray-200 dark:bg-gray-800 text-gray-800 dark:text-white text-sm flex items-end justify-between shadow-md cursor-pointer hover:shadow-lg transition-all duration-300"])},[d("div",O$,[d("p",N$,[M[16]||(M[16]=Q("Pedido: ")),d("span",D$,F(ce.id),1)]),d("p",V$,[M[17]||(M[17]=Q("Cliente: ")),d("span",M$,F(ce.client),1)]),d("p",$$,[M[18]||(M[18]=Q("Total: ")),d("span",L$,F(w.$formatPrice(ce.total)),1)]),d("p",F$,[M[19]||(M[19]=Q("Status: ")),d("span",{class:re(["font-light",q(ce.status)])},F(P(ce.status)),3)]),d("p",U$,[M[20]||(M[20]=Q("Data: ")),d("span",j$,F(V(ce.created_at)),1)])])],8,P$))),128)),T.value.length===0?(R(),O("p",B$,"Nenhum pedido em preparo.")):le("",!0)])]),d("div",z$,[d("h3",q$,[M[21]||(M[21]=Q(" A Caminho ")),d("span",H$,F(x.value.length),1)]),d("div",K$,[(R(!0),O(ge,null,Ne(x.value,ce=>(R(),O("div",{key:ce.id,onClick:Se=>k(ce),class:re(["p-2 rounded-md border border-gray-200/40 dark:border-gray-700/40 bg-gray-200 dark:bg-gray-800 text-gray-800 dark:text-white text-sm flex items-end justify-between shadow-md cursor-pointer hover:shadow-lg transition-all duration-300"])},[d("div",G$,[d("p",Q$,[M[22]||(M[22]=Q("Pedido: ")),d("span",J$,F(ce.id),1)]),d("p",Y$,[M[23]||(M[23]=Q("Cliente: ")),d("span",X$,F(ce.client),1)]),d("p",Z$,[M[24]||(M[24]=Q("Total: ")),d("span",eL,F(w.$formatPrice(ce.total)),1)]),d("p",tL,[M[25]||(M[25]=Q("Status: ")),d("span",{class:re(["font-light",q(ce.status)])},F(P(ce.status)),3)]),d("p",nL,[M[26]||(M[26]=Q("Data: ")),d("span",rL,F(V(ce.created_at)),1)])])],8,W$))),128)),x.value.length===0?(R(),O("p",sL,"Nenhum pedido a caminho.")):le("",!0)])])]),d("div",oL,[M[28]||(M[28]=d("h3",{class:"text-lg font-bold text-gray-900 dark:text-white mb-4 border-b pb-2 border-gray-300 dark:border-gray-700"}," Legenda",-1)),d("ul",iL,[d("li",null,[d("span",{class:re(q("recebido"))},"Recebido",2)]),d("li",null,[d("span",{class:re(q("em processamento"))},"Em Processamento",2)]),d("li",null,[d("span",{class:re(q("em_preparo"))},"Em Preparo",2)]),d("li",null,[d("span",{class:re(q("a_caminho"))},"A Caminho",2)]),d("li",null,[d("span",{class:re(q("entregue"))},"Entregue",2)]),d("li",null,[d("span",{class:re(q("cancelado"))},"Cancelado",2)]),M[27]||(M[27]=d("li",{class:"mt-4"},[d("span",{class:"px-2 py-1 bg-green-500 text-white text-xs rounded-full"},"NOVO (Badge Verde)"),Q(': Pedido que acaba de ser marcado como "recebido" ou "em processamento" e ainda não foi visualizado. ')],-1))])])])),C.value.length>0?(R(),O("div",aL,[d("h3",lL,[M[29]||(M[29]=Q(" Pedidos Finalizados ")),d("span",uL,F(C.value.length),1)]),d("div",cL,[(R(!0),O(ge,null,Ne(C.value,ce=>(R(),O("div",{key:ce.id,onClick:Se=>k(ce),class:re(["p-2 rounded-md border border-gray-200/40 dark:border-gray-700/40 bg-gray-200 dark:bg-gray-800 text-gray-800 dark:text-white text-sm flex items-end justify-between shadow-md cursor-pointer hover:shadow-lg transition-all duration-300"])},[d("div",hL,[d("p",fL,[M[30]||(M[30]=Q("Pedido: ")),d("span",pL,F(ce.id),1)]),d("p",gL,[M[31]||(M[31]=Q("Cliente: ")),d("span",mL,F(ce.client),1)]),d("p",yL,[M[32]||(M[32]=Q("Total: ")),d("span",vL,F(w.$formatPrice(ce.total)),1)]),d("p",_L,[M[33]||(M[33]=Q("Status: ")),d("span",{class:re(["font-light",q(ce.status)])},F(P(ce.status)),3)]),d("p",bL,[M[34]||(M[34]=Q("Data: ")),d("span",wL,F(V(ce.created_at)),1)])])],8,dL))),128))])])):!s.value&&e.value.length>0?(R(),O("div",xL," Nenhum pedido finalizado.")):le("",!0),i.value?(R(),O("div",EL,[M[35]||(M[35]=d("strong",{class:"font-bold"},"Erro de Conexão!",-1)),d("span",TL,F(i.value),1),d("button",{onClick:E,class:"ml-2 underline hover:no-underline"}," Tentar Reconectar ")])):le("",!0)])]),_:1}),n.value?(R(),Qe(As,{key:0,open:r.value,"onUpdate:open":M[1]||(M[1]=ce=>r.value=ce)},{default:me(()=>{var ce,Se;return[d("div",IL,[d("button",{onClick:v,class:"absolute -top-5 -right-5 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white text-xl"}," × "),d("h3",kL,[M[36]||(M[36]=Q(" Detalhes do Pedido ")),d("span",AL,"#"+F(n.value.id),1)]),d("div",SL,[d("div",null,[M[37]||(M[37]=d("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Cliente:",-1)),Q(" "+F(n.value.client),1)]),d("div",null,[M[38]||(M[38]=d("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Telefone:",-1)),Q(" "+F(n.value.telefone||n.value.phone),1)]),d("div",null,[M[39]||(M[39]=d("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Total:",-1)),Q(" "+F(w.$formatPrice(n.value.total)),1)]),d("div",null,[M[40]||(M[40]=d("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Subtotal:",-1)),Q(" "+F(w.$formatPrice(n.value.subtotal)),1)]),d("div",null,[M[41]||(M[41]=d("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Taxa de Entrega:",-1)),Q(" "+F(w.$formatPrice(n.value.taxaEntrega||n.value.fee)),1)]),d("div",null,[M[42]||(M[42]=d("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Tipo de Entrega:",-1)),Q(" "+F(n.value.tipoEntrega||n.value.delivery_type),1)]),d("div",null,[M[43]||(M[43]=d("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Método de Pagamento:",-1)),Q(" "+F(j(n.value.metodoPagamento||n.value.payment_method)),1)]),d("div",null,[M[44]||(M[44]=d("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Status do Pagamento:",-1)),Q(" "+F(U(n.value.payment_status)),1)]),d("div",null,[M[45]||(M[45]=d("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Data do Pedido:",-1)),Q(" "+F(V(n.value.created_at)),1)]),d("div",CL,[M[46]||(M[46]=d("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Endereço:",-1)),n.value.address&&n.value.address.length>0?(R(),O("div",RL,[(R(!0),O(ge,null,Ne(n.value.address,(se,Ce)=>(R(),O("p",{key:Ce},[Q(F(se.street)+", "+F(se.neighborhood)+" ",1),se.reference?(R(),O("span",PL," (Ref: "+F(se.reference)+")",1)):le("",!0)]))),128))])):(R(),O("div",OL,"Nenhum endereço fornecido."))]),d("div",NL,[M[47]||(M[47]=d("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Status do Pedido:",-1)),Ae(d("select",{"onUpdate:modelValue":M[0]||(M[0]=se=>n.value.status=se),class:"p-2 bg-gray-200 dark:bg-gray-700 border border-gray-400 dark:border-gray-600 rounded-md text-gray-800 dark:text-white focus:ring-blue-500 focus:border-blue-500 ml-2 mt-2"},[(R(),O(ge,null,Ne(g,se=>d("option",{key:se,value:se},F(P(se)),9,DL)),64))],512),[[Vr,n.value.status]])])]),n.value.itens&&n.value.itens.length?(R(),O("div",VL,[M[49]||(M[49]=d("h4",{class:"font-semibold mt-6 mb-2 text-gray-700 dark:text-gray-300 border-t border-gray-300 dark:border-gray-900 pt-4"}," Itens do Pedido: ",-1)),d("ul",ML,[(R(!0),O(ge,null,Ne(n.value.itens,(se,Ce)=>(R(),O("li",{key:Ce,class:"text-gray-700 dark:text-gray-300"},[d("p",$L,F(se.item.replaceAll("r$","R$")),1),se.adicionais?(R(),O("p",LL,[M[48]||(M[48]=d("span",{class:"italic"},"Adicionais:",-1)),Q(" "+F(se.adicionais.replaceAll("r$","R$")),1)])):le("",!0)]))),128))])])):le("",!0),d("div",FL,[d("button",{onClick:b,disabled:u.value||!((ce=n.value)!=null&&ce.id)||!((Se=n.value)!=null&&Se.status),class:"px-5 py-1 bg-green-600 hover:bg-green-700 disabled:bg-green-400 disabled:cursor-not-allowed text-white text-md rounded-md transition-colors duration-200"},F(u.value?"Salvando...":"Salvar"),9,UL),d("button",{onClick:v,class:"px-5 py-1 bg-red-600 hover:bg-red-800 text-white text-md rounded-md transition-colors duration-200"}," Cancelar ")])])]}),_:1},8,["open"])):le("",!0)]))}},BL=["onClick"],zL=["onKeydown"],qL={key:0,class:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md shadow-lg max-h-60 overflow-y-auto custom-scrollbar"},HL={class:"py-1"},KL=["onClick","onMouseenter"],WL={key:0,class:"px-4 py-2 text-gray-500 dark:text-gray-400 italic"},GL={__name:"MultiSelectCategoryInput",props:{modelValue:{type:Array,default:()=>[]},categories:{type:Array,required:!0}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,r=e,s=H(""),o=H(!1),i=H(-1),a=H(null),u=ye(()=>n.categories.filter(U=>n.modelValue.includes(U.id)));ye(()=>u.value.map(U=>U.name).join(" x "));const c=ye(()=>{const U=s.value.toLowerCase();return n.categories.filter(q=>q.name.toLowerCase().includes(U)&&!h(q.id))});function h(U){return n.modelValue.includes(U)}function f(){o.value=!o.value,o.value&&(s.value="",i.value=-1)}function g(){o.value=!0,i.value=-1}function m(){o.value=!1,s.value=""}function _(){i.value=-1,o.value=!0}function T(U){if(!h(U)){const q=[...n.modelValue,U];r("update:modelValue",q)}s.value=""}function x(U){const q=n.modelValue.filter(k=>k!==U);r("update:modelValue",q),g()}function C(){if(c.value.length===0){i.value=-1;return}i.value=(i.value+1)%c.value.length}function P(){if(c.value.length===0){i.value=-1;return}i.value=(i.value-1+c.value.length)%c.value.length}function V(){i.value!==-1&&c.value[i.value]&&T(c.value[i.value].id)}function j(U){a.value&&!a.value.contains(U.target)&&m()}return ft(()=>{document.addEventListener("click",j)}),yo(()=>{document.removeEventListener("click",j)}),(U,q)=>(R(),O("div",{class:"relative",ref_key:"multiSelectContainer",ref:a},[d("div",{class:"w-full p-3 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md flex items-center flex-wrap gap-2 cursor-pointer min-h-[48px]",onClick:Mn(f,["stop"])},[q[1]||(q[1]=d("span",{class:"text-gray-500 dark:text-gray-400"}," Selecione categorias... ",-1)),(R(!0),O(ge,null,Ne(u.value,k=>(R(),O("div",{key:k.id,class:"flex items-center bg-blue-500 text-white text-xs px-2 py-1 rounded-full"},[Q(F(k.name)+" ",1),d("button",{onClick:Mn(v=>x(k.id),["stop"]),class:"ml-1 text-white hover:text-blue-100 focus:outline-none"}," × ",8,BL)]))),128)),Ae(d("input",{type:"text","onUpdate:modelValue":q[0]||(q[0]=k=>s.value=k),onInput:_,onFocus:g,onKeydown:[rc(Mn(C,["prevent"]),["down"]),rc(Mn(P,["prevent"]),["up"]),rc(Mn(V,["prevent"]),["enter"])],placeholder:"Buscar categorias...",class:"flex-grow p-0 bg-transparent border-none focus:outline-none text-gray-900 dark:text-white",style:po({width:s.value.length?s.value.length*8+20+"px":"150px"})},null,44,zL),[[tt,s.value]])]),o.value?(R(),O("div",qL,[d("ul",HL,[(R(!0),O(ge,null,Ne(c.value,(k,v)=>(R(),O("li",{key:k.id,onClick:b=>T(k.id),onMouseenter:b=>i.value=v,class:re({"px-4 py-2 cursor-pointer hover:bg-blue-500 hover:text-white":!0,"bg-blue-500 text-white":i.value===v,"text-gray-900 dark:text-white":i.value!==v,"opacity-50 cursor-not-allowed":h(k.id)})},F(k.name),43,KL))),128)),c.value.length===0?(R(),O("li",WL," Nenhuma categoria encontrada. ")):le("",!0)])])):le("",!0)],512))}},QL=Ot(GL,[["__scopeId","data-v-a5c6d68f"]]),JL={class:"space-y-6 p-4 md:p-8 bg-white dark:bg-gray-900 rounded-lg shadow-xl"},YL={key:0,class:"text-center py-8"},XL={key:1,class:"text-center py-8"},ZL={key:2,class:"overflow-x-auto mt-4 rounded-lg"},e5={class:"min-w-full table-auto bg-gray-100 dark:bg-gray-800"},t5={class:"text-gray-800 dark:text-gray-200 text-sm font-light"},n5={class:"py-2 px-2 text-left whitespace-nowrap hidden md:table-cell"},r5=["src","alt"],s5={class:"py-3 text-left whitespace-nowrap"},o5={key:0,class:"text-xs text-gray-600 dark:text-gray-400 mt-1"},i5={class:"py-3 text-left whitespace-pre-line"},a5={key:0},l5={key:0},u5={key:1},c5={key:1,class:"text-red-600 dark:text-red-400"},d5={class:"py-3 text-left"},h5={class:"py-3 text-right"},f5=["onClick"],p5=["onClick"],g5={class:"flex flex-col md:flex-row justify-between items-center mt-6 text-gray-900 dark:text-white p-4 bg-gray-100 dark:bg-gray-800 rounded-lg"},m5={class:"mb-4 md:mb-0"},y5={class:"flex items-center gap-2"},v5={class:"relative"},_5=["disabled"],b5={class:"px-2"},w5=["disabled"],x5={class:""},E5={class:"text-2xl font-bold mb-4 border-b border-gray-300 dark:border-gray-700 pb-2"},T5={key:0,class:"text-center py-4"},I5={key:1,class:"space-y-4"},k5={class:"border border-gray-300 dark:border-gray-700 p-3 rounded-md"},A5=["onUpdate:modelValue"],S5=["onUpdate:modelValue"],C5=["onClick"],R5=["onUpdate:modelValue"],P5=["onUpdate:modelValue"],O5=["onClick"],N5={class:"flex justify-end mt-6 gap-3 border-t border-gray-300 dark:border-gray-700 pt-4"},D5=["disabled"],V5=["disabled"],M5={class:"text-lg mb-4"},$5={class:"text-red-600 dark:text-red-400"},L5={class:"mt-6 flex justify-end gap-3"},F5=["disabled"],U5=["disabled"],j5={__name:"Products",setup(t){const e=H([]),n=H([]),r=H(!1),s=H(!1),o=H(null),i=H(1),a=H(10),u=H(0),c=H(!0),h=H(!1),f=ye(()=>{const S=(i.value-1)*a.value;return Array.isArray(e.value)?e.value.slice(S,S+a.value):[]}),g=ye(()=>Math.ceil(u.value/a.value)),m=H({id:null,name:"",slug:"",description:"",img:"",sizes:[],price:[],extras:[],categoryIds:[]});function _(){m.value={id:null,name:"",slug:"",description:"",img:"",sizes:[],price:[],extras:[],categoryIds:[]}}qt(()=>m.value.name,S=>{m.value.slug=S.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")});function T(S=null){if(_(),S){const E=JSON.parse(JSON.stringify(S));for(m.value.id=E.id,m.value.name=E.name,m.value.slug=E.slug,m.value.description=E.description,m.value.img=E.img,m.value.extras=E.extras||[],m.value.categoryIds=E.categoryIds||[],m.value.price=Array.isArray(E.price)?E.price:[],m.value.sizes=Array.isArray(E.sizes)?E.sizes:[];m.value.sizes.length<m.value.price.length;)m.value.sizes.push("")}r.value=!0}function x(){m.value.sizes.push(""),m.value.price.push(0)}function C(S){m.value.sizes.splice(S,1),m.value.price.splice(S,1)}function P(){m.value.extras.push({name:"",price:0})}function V(S){m.value.extras.splice(S,1)}async function j(){var S;h.value=!0;try{const E={...m.value};E.price=E.price.map(A=>Number(A)).filter(A=>!isNaN(A)),E.extras=E.extras.map(A=>({...A,price:Number(A.price)})).filter(A=>A.name&&!isNaN(A.price)),E.sizes.length!==E.price.length?(E.sizes=[],console.warn("Número de tamanhos não corresponde ao número de preços. Enviando tamanhos vazios.")):E.sizes=E.sizes.filter((A,w)=>E.price[w]!==void 0),E.price.length===0&&(E.sizes=[]),E.id?(await Ze.put(`/products/${E.id}`,E),console.log(`Produto ${E.name} (ID: ${E.id}) atualizado com sucesso.`)):(await Ze.post("/products",E),console.log(`Novo produto '${E.name}' criado com sucesso.`)),r.value=!1,await v()}catch(E){console.error("Erro ao salvar produto:",((S=E.response)==null?void 0:S.data)||E.message)}finally{h.value=!1}}function U(S){o.value=S,s.value=!0}async function q(){var S;h.value=!0;try{o.value&&o.value.id&&(await Ze.delete(`/products/${o.value.id}`),console.log(`Produto '${o.value.name}' (ID: ${o.value.id}) excluído com sucesso.`),s.value=!1,o.value=null,await v())}catch(E){console.error("Erro ao excluir produto:",((S=E.response)==null?void 0:S.data)||E.message)}finally{h.value=!1}}function k(S){return!S||!Array.isArray(S)||n.value.length===0?"":S.map(E=>{var A;return(A=n.value.find(w=>w.id===E))==null?void 0:A.name}).filter(Boolean).join(", ")}async function v(){var S;c.value=!0;try{console.log("Tentando carregar produtos...");const E=await Ze.get("/products");console.log("Produtos recebidos da API:",E.data),e.value=Array.isArray(E.data)?E.data:[],u.value=e.value.length,g.value>0&&i.value>g.value?i.value=g.value:g.value===0&&(i.value=1),console.log(`Produtos carregados. Total: ${u.value}, Página: ${i.value}/${g.value}`)}catch(E){console.error("Erro ao carregar produtos:",((S=E.response)==null?void 0:S.data)||E.message)}finally{c.value=!1}}async function b(){var S;try{console.log("Tentando carregar categorias...");const E=await Ze.get("/categories");n.value=Array.isArray(E.data)?E.data:[],console.log("Categorias recebidas da API:",n.value.length)}catch(E){console.error("Erro ao carregar categorias:",((S=E.response)==null?void 0:S.data)||E.message)}}return qt(a,()=>{i.value=1}),ft(()=>{v(),b()}),(S,E)=>(R(),O(ge,null,[ue(Ds,null,{default:me(()=>[d("div",JL,[E[26]||(E[26]=d("h2",{class:"text-3xl font-bold text-gray-900 dark:text-white"},"Produtos",-1)),E[27]||(E[27]=d("p",{class:"text-gray-600 dark:text-gray-400"},"Adicione, edite ou remova produtos do cardápio.",-1)),d("button",{onClick:E[0]||(E[0]=A=>T()),class:"px-5 py-2 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-md transition-colors duration-200"}," Novo Produto "),c.value?(R(),O("div",YL,E[17]||(E[17]=[d("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-400 dark:border-gray-600 mx-auto"},null,-1),d("p",{class:"text-gray-600 dark:text-gray-400 mt-4"},"Carregando produtos...",-1)]))):e.value.length===0&&!c.value?(R(),O("div",XL,E[18]||(E[18]=[d("p",{class:"text-gray-600 dark:text-gray-400 text-lg"},"Nenhum produto encontrado.",-1)]))):(R(),O("div",ZL,[d("table",e5,[E[22]||(E[22]=d("thead",null,[d("tr",{class:"bg-gray-400 dark:bg-gray-700"},[d("th",{class:"py-3 px-2 text-left text-gray-700 dark:text-gray-300 uppercase text-sm leading-normal hidden md:block"}," img "),d("th",{class:"py-3 text-left text-gray-700 dark:text-gray-300 uppercase text-sm leading-normal"},"Nome "),d("th",{class:"py-3 text-left text-gray-700 dark:text-gray-300 uppercase text-sm leading-normal"},"Preços "),d("th",{class:"py-3 text-left text-gray-700 dark:text-gray-300 uppercase text-sm leading-normal"}," Categorias"),d("th",{class:"py-3 text-center text-gray-700 dark:text-gray-300 uppercase text-sm leading-normal"},"Ações ")])],-1)),d("tbody",t5,[(R(!0),O(ge,null,Ne(f.value,A=>(R(),O("tr",{key:A.id,class:"border-b border-gray-300 dark:border-gray-700 hover:bg-gray-300 dark:hover:bg-gray-700 cursor-default transition-colors duration-300"},[d("td",n5,[d("img",{src:A.img,alt:A.name,class:"w-12 h-12 object-cover rounded-md shadow-sm border border-gray-300 dark:border-gray-700"},null,8,r5)]),d("td",s5,[Q(F(A.name)+" ",1),A.extras&&A.extras.length>0?(R(),O("div",o5,[E[19]||(E[19]=d("p",{class:"font-semibold"},"Adicionais:",-1)),(R(!0),O(ge,null,Ne(A.extras,(w,M)=>(R(),O("div",{key:M},F(w.name)+" - "+F(S.$formatPrice(w.price)),1))),128))])):le("",!0)]),d("td",i5,[A.price&&Array.isArray(A.price)&&A.price.length>0?(R(),O("div",a5,[A.sizes&&Array.isArray(A.sizes)&&A.price.length===A.sizes.length?(R(),O("div",l5,[(R(!0),O(ge,null,Ne(A.price,(w,M)=>(R(),O("div",{key:M},F(A.sizes[M])+" - "+F(S.$formatPrice(w)),1))),128))])):(R(),O("div",u5,[(R(!0),O(ge,null,Ne(A.price,(w,M)=>(R(),O("div",{key:M},F(S.$formatPrice(w)),1))),128))]))])):(R(),O("div",c5,"Dados de preço ausentes ou inválidos."))]),d("td",d5,F(k(A.categoryIds)),1),d("td",h5,[d("button",{onClick:w=>T(A),title:"Editar Produto",class:"px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-l-md transition-colors duration-200"},E[20]||(E[20]=[d("i",{class:"fa-duotone fa-edit"},null,-1)]),8,f5),d("button",{onClick:w=>U(A),title:"Excluir Produto",class:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-r-md transition-colors duration-200"},E[21]||(E[21]=[d("i",{class:"fa-duotone fa-trash"},null,-1)]),8,p5)])]))),128))])]),d("div",g5,[d("span",m5,"Total de itens: "+F(u.value),1),d("div",y5,[E[25]||(E[25]=d("label",{for:"pageSize",class:"text-sm text-gray-700 dark:text-gray-300"},"Itens por página:",-1)),d("div",v5,[Ae(d("select",{id:"pageSize","onUpdate:modelValue":E[1]||(E[1]=A=>a.value=A),class:"appearance-none bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white border border-gray-400 dark:border-gray-600 rounded px-3 py-1 pr-8 focus:outline-none focus:ring-2 focus:ring-blue-500"},E[23]||(E[23]=[d("option",{value:3},"3",-1),d("option",{value:5},"5",-1),d("option",{value:10},"10",-1),d("option",{value:25},"25",-1)]),512),[[Vr,a.value,void 0,{number:!0}]]),E[24]||(E[24]=d("div",{class:"pointer-events-none absolute inset-y-0 right-2 flex items-center text-gray-800 dark:text-white"}," ▼ ",-1))]),d("button",{onClick:E[2]||(E[2]=A=>i.value--),disabled:i.value===1,class:"px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"}," < Anterior ",8,_5),d("span",b5,"Página "+F(i.value)+" de "+F(g.value),1),d("button",{onClick:E[3]||(E[3]=A=>i.value++),disabled:i.value>=g.value,class:"px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"}," Próximo > ",8,w5)])])]))])]),_:1}),r.value?(R(),Qe(As,{key:0,open:r.value,"onUpdate:open":E[13]||(E[13]=A=>r.value=A)},{default:me(()=>[d("div",x5,[d("button",{onClick:E[4]||(E[4]=A=>r.value=!1),class:"absolute top-3 right-3 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white text-xl"}," × "),d("h3",E5,F(m.value.id?"Editar":"Novo")+" Produto ",1),h.value?(R(),O("div",T5,E[28]||(E[28]=[d("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-400 dark:border-gray-600 mx-auto"},null,-1),d("p",{class:"text-gray-600 dark:text-gray-400 mt-2"},"Salvando...",-1)]))):(R(),O("div",I5,[Ae(d("input",{"onUpdate:modelValue":E[5]||(E[5]=A=>m.value.name=A),placeholder:"Nome do Produto",class:"w-full p-3 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[tt,m.value.name]]),Ae(d("textarea",{"onUpdate:modelValue":E[6]||(E[6]=A=>m.value.description=A),placeholder:"Descrição do Produto",rows:"3",class:"w-full p-3 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[tt,m.value.description]]),Ae(d("input",{"onUpdate:modelValue":E[7]||(E[7]=A=>m.value.img=A),placeholder:"URL da imagem (ex: https://exemplo.com/imagem.jpg)",class:"w-full p-3 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[tt,m.value.img]]),d("div",null,[ue(QL,{modelValue:m.value.categoryIds,"onUpdate:modelValue":E[8]||(E[8]=A=>m.value.categoryIds=A),categories:n.value,class:"w-full"},null,8,["modelValue","categories"]),E[29]||(E[29]=d("p",{class:"text-xs text-gray-600 dark:text-gray-400 mt-1"},"Segure Ctrl/Cmd para selecionar múltiplas.",-1))]),d("div",k5,[E[30]||(E[30]=d("p",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Preços e Tamanhos:",-1)),(R(!0),O(ge,null,Ne(m.value.price,(A,w)=>(R(),O("div",{key:w,class:"flex items-center mb-2 gap-2"},[Ae(d("input",{"onUpdate:modelValue":M=>m.value.sizes[w]=M,placeholder:"Tamanho (Opcional)",class:"w-full p-2 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,8,A5),[[tt,m.value.sizes[w]]]),Ae(d("input",{"onUpdate:modelValue":M=>m.value.price[w]=M,type:"number",step:"0.01",placeholder:"Preço",class:"w-24 p-2 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,8,S5),[[tt,m.value.price[w],void 0,{number:!0}]]),d("button",{onClick:M=>C(w),class:"text-red-500 hover:text-red-400 text-xl transition-colors duration-200"}," × ",8,C5)]))),128)),d("button",{onClick:E[9]||(E[9]=A=>x()),class:"text-sm text-blue-600 dark:text-blue-400 hover:underline mt-2"}," + Adicionar Preço/Tamanho ")]),d("div",null,[E[31]||(E[31]=d("p",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Adicionais:",-1)),(R(!0),O(ge,null,Ne(m.value.extras,(A,w)=>(R(),O("div",{key:w,class:"flex items-center gap-2 mb-2"},[Ae(d("input",{"onUpdate:modelValue":M=>A.name=M,placeholder:"Nome do Adicional",class:"flex-1 p-2 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,8,R5),[[tt,A.name]]),Ae(d("input",{"onUpdate:modelValue":M=>A.price=M,type:"number",step:"0.01",placeholder:"Preço",class:"w-24 p-2 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,8,P5),[[tt,A.price,void 0,{number:!0}]]),d("button",{onClick:M=>V(w),class:"text-red-500 hover:text-red-400 text-xl transition-colors duration-200"}," × ",8,O5)]))),128)),d("button",{onClick:E[10]||(E[10]=A=>P()),class:"text-sm text-blue-600 dark:text-blue-400 hover:underline mt-2"}," + Adicionar adicional ")]),d("div",N5,[d("button",{onClick:E[11]||(E[11]=A=>j()),disabled:h.value,class:"px-5 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Salvar ",8,D5),d("button",{onClick:E[12]||(E[12]=A=>r.value=!1),disabled:h.value,class:"px-5 py-2 bg-gray-600 hover:bg-gray-700 text-white font-semibold rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Cancelar ",8,V5)])]))])]),_:1},8,["open"])):le("",!0),s.value?(R(),Qe(As,{key:1,open:s.value,"onUpdate:open":E[16]||(E[16]=A=>s.value=A)},{default:me(()=>{var A;return[d("button",{onClick:E[14]||(E[14]=w=>s.value=!1),class:"absolute top-3 right-3 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white text-xl"}," × "),d("p",M5,[E[32]||(E[32]=Q(" Tem certeza que deseja excluir o produto ")),d("strong",$5,F((A=o.value)==null?void 0:A.name),1),E[33]||(E[33]=Q("? Esta ação é irreversível. "))]),d("div",L5,[d("button",{onClick:q,disabled:h.value,class:"px-5 py-2 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Excluir ",8,F5),d("button",{onClick:E[15]||(E[15]=w=>s.value=!1),disabled:h.value,class:"px-5 py-2 bg-gray-600 hover:bg-gray-700 text-white font-semibold rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Cancelar ",8,U5)])]}),_:1},8,["open"])):le("",!0)],64))}},B5=Ot(j5,[["__scopeId","data-v-ee9feb8b"]]),z5={class:"mb-4"},q5={class:"grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 lg:grid-cols-7 gap-4 max-h-[calc(95vh-160px)] overflow-y-auto pr-2"},H5=["onClick","title"],K5={key:0,class:"col-span-full text-center text-gray-400 py-8"},W5={__name:"IconPickerModal",props:{open:{type:Boolean,default:!1}},emits:["update:open","icon-selected"],setup(t,{emit:e}){const n=t,r=e,s=H(n.open);qt(()=>n.open,h=>{s.value=h});const o=H(["fa-duotone fa-solid fa-pizza-slice","fa-duotone fa-solid fa-hamburger","fa-duotone fa-solid fa-ice-cream","fa-duotone fa-solid fa-mug-hot","fa-duotone fa-solid fa-coffee","fa-duotone fa-solid fa-beer","fa-duotone fa-solid fa-apple-alt","fa-duotone fa-solid fa-carrot","fa-duotone fa-solid fa-cheese","fa-duotone fa-solid fa-bread-slice","fa-duotone fa-solid fa-cookie-bite","fa-duotone fa-solid fa-egg","fa-duotone fa-solid fa-fish","fa-duotone fa-solid fa-hotdog","fa-duotone fa-solid fa-bacon","fa-duotone fa-solid fa-drumstick-bite","fa-duotone fa-solid fa-utensils","fa-duotone fa-solid fa-shopping-basket","fa-duotone fa-solid fa-star","fa-duotone fa-solid fa-heart","fa-duotone fa-solid fa-user","fa-duotone fa-solid fa-cog","fa-duotone fa-solid fa-home","fa-duotone fa-solid fa-info-circle","fa-duotone fa-solid fa-question-circle","fa-duotone fa-solid fa-exclamation-triangle","fa-duotone fa-solid fa-check-circle","fa-duotone fa-solid fa-times-circle","fa-duotone fa-solid fa-bell","fa-duotone fa-solid fa-envelope","fa-duotone fa-solid fa-map-marker-alt","fa-duotone fa-solid fa-phone","fa-duotone fa-solid fa-mobile-alt","fa-duotone fa-solid fa-credit-card","fa-duotone fa-solid fa-money-bill-alt","fa-duotone fa-solid fa-truck","fa-duotone fa-solid fa-motorcycle","fa-duotone fa-solid fa-car","fa-duotone fa-solid fa-store","fa-duotone fa-solid fa-calendar-alt","fa-duotone fa-solid fa-clock","fa-duotone fa-solid fa-fire","fa-duotone fa-solid fa-leaf","fa-duotone fa-solid fa-cloud","fa-duotone fa-solid fa-sun","fa-duotone fa-solid fa-moon","fa-duotone fa-solid fa-umbrella","fa-duotone fa-solid fa-gift","fa-duotone fa-solid fa-percent","fa-duotone fa-solid fa-tag","fa-duotone fa-solid fa-qrcode","fa-duotone fa-solid fa-wifi","fa-duotone fa-solid fa-lock","fa-duotone fa-solid fa-unlock","fa-duotone fa-solid fa-plus","fa-duotone fa-solid fa-minus","fa-duotone fa-solid fa-edit","fa-duotone fa-solid fa-trash","fa-duotone fa-solid fa-search","fa-duotone fa-solid fa-filter","fa-duotone fa-solid fa-sort","fa-duotone fa-solid fa-chart-line","fa-duotone fa-solid fa-receipt","fa-duotone fa-solid fa-box-open","fa-duotone fa-solid fa-tags","fa-duotone fa-solid fa-tools","fab fa-whatsapp","fa-duotone fa-solid fa-chart-bar","fa-duotone fa-solid fa-candy"]),i=H(""),a=ye(()=>{if(!i.value)return o.value;const h=i.value.toLowerCase();return o.value.filter(f=>f.toLowerCase().includes(h))});function u(h){r("icon-selected",h),c()}function c(){r("update:open",!1)}return(h,f)=>(R(),Qe(As,{open:s.value,"onUpdate:open":f[1]||(f[1]=g=>s.value=g)},{default:me(()=>[d("button",{onClick:c,class:"absolute top-3 right-3 text-gray-400 hover:text-white text-xl"}," × "),f[2]||(f[2]=d("h3",{class:"text-2xl font-bold mb-4 border-b border-gray-700 pb-2"},"Escolher Ícone",-1)),d("div",z5,[Ae(d("input",{type:"text","onUpdate:modelValue":f[0]||(f[0]=g=>i.value=g),placeholder:"Buscar ícone (ex: pizza, star, user)",class:"w-full p-3 dark:bg-gray-800 border dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[tt,i.value]])]),d("div",q5,[(R(!0),O(ge,null,Ne(a.value,g=>(R(),O("div",{key:g,onClick:m=>u(g),class:"flex flex-col items-center justify-center p-3 rounded-lg cursor-pointer hover:bg-gray-700 transition-colors duration-200 border border-gray-700",title:g.replace("fas fa-","").replace("fab fa-","")},[d("i",{class:re([g,"text-3xl mb-2 text-blue-400"])},null,2)],8,H5))),128)),a.value.length===0?(R(),O("div",K5," Nenhum ícone encontrado. ")):le("",!0)]),d("div",{class:"mt-6 flex justify-end border-t border-gray-700 pt-4"},[d("button",{onClick:c,class:"px-5 py-2 bg-gray-600 hover:bg-gray-700 text-white font-semibold rounded-md transition-colors duration-200"}," Fechar ")])]),_:1,__:[2]},8,["open"]))}},G5=Ot(W5,[["__scopeId","data-v-e7109440"]]),Q5={class:"space-y-6 p-4 bg-white dark:bg-gray-900 rounded-lg shadow-xl"},J5={key:0,class:"text-center py-8"},Y5={key:1,class:"text-center py-8"},X5={key:2,class:"overflow-x-auto mt-4 rounded-lg"},Z5={class:"min-w-full table-auto bg-gray-100 dark:bg-gray-800"},eF={class:"text-gray-800 dark:text-gray-200 text-sm font-light"},tF={class:"py-3 px-6 text-left whitespace-nowrap flex flex-col"},nF={class:"italic text-gray-600 dark:text-gray-400"},rF={class:"py-3 px-6 text-left"},sF={class:"py-3 px-6 text-left"},oF=["title"],iF={class:"py-3 px-6 text-right"},aF=["onClick"],lF=["onClick"],uF={class:"flex flex-col md:flex-row justify-between items-center mt-6 text-gray-900 dark:text-white p-4 bg-gray-100 dark:bg-gray-800 rounded-lg"},cF={class:"mb-4 md:mb-0"},dF={class:"flex items-center gap-2"},hF={class:"relative"},fF=["disabled"],pF={class:"px-2"},gF=["disabled"],mF={class:"max-w-md text-gray-900 dark:text-white relative"},yF={class:"text-2xl font-bold mb-4 border-b border-gray-300 dark:border-gray-700 pb-2"},vF={key:0,class:"text-center py-4"},_F={key:1,class:"space-y-4"},bF=["value"],wF={class:"flex items-center gap-2 relative"},xF={class:"flex justify-end mt-6 gap-3 border-t border-gray-300 dark:border-gray-700 pt-4"},EF=["disabled"],TF=["disabled"],IF={class:"mb-4 flex flex-col items-center space-y-4"},kF={class:"text-red-600 dark:text-red-400"},AF={class:"mt-6 flex justify-end gap-3"},SF=["disabled"],CF=["disabled"],RF={__name:"Categories",setup(t){const e=H([]),n=H(!1),r=H(!1),s=H(!1),o=H(null),i=H(1),a=H(5),u=H(0),c=H(!0),h=H(!1),f=ye(()=>{const k=(i.value-1)*a.value;return e.value.slice(k,k+a.value)}),g=ye(()=>Math.ceil(u.value/a.value)),m=H({id:null,name:"",slug:"",parent_id:"",icon:""}),_=ye(()=>m.value.id?e.value.filter(k=>k.id!==m.value.id):e.value);function T(){m.value={id:null,name:"",slug:"",parent_id:"",icon:""}}qt(()=>m.value.name,k=>{m.value.slug=k.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")});function x(k=null){T(),k&&(m.value=JSON.parse(JSON.stringify(k))),n.value=!0}function C(k){m.value.icon=k,s.value=!1}async function P(){var k;h.value=!0;try{const v={...m.value};v.parent_id===""&&(v.parent_id=null),v.id?(await Ze.put(`/categories/${v.id}`,v),console.log(`Categoria ${v.id} atualizada com sucesso.`)):(await Ze.post("/categories",v),console.log("Nova categoria criada com sucesso.")),n.value=!1,await q()}catch(v){console.error("Erro ao salvar categoria:",((k=v.response)==null?void 0:k.data)||v.message)}finally{h.value=!1}}function V(k){o.value=k,r.value=!0}async function j(){var k;h.value=!0;try{o.value&&o.value.id&&(await Ze.delete(`/categories/${o.value.id}`),console.log(`Categoria ${o.value.id} excluída com sucesso.`),r.value=!1,await q())}catch(v){console.error("Erro ao excluir categoria:",((k=v.response)==null?void 0:k.data)||v.message)}finally{h.value=!1}}function U(k){if(!k)return"Nenhuma";const v=e.value.find(b=>b.id===k);return v?v.name:"Desconhecida"}async function q(){var k;c.value=!0;try{const v=await Ze.get("/categories");e.value=Array.isArray(v.data)?v.data:[],u.value=e.value.length,i.value>g.value&&g.value>0?i.value=g.value:g.value===0&&(i.value=1)}catch(v){console.error("Erro ao carregar categorias:",((k=v.response)==null?void 0:k.data)||v.message)}finally{c.value=!1}}return qt(a,()=>{i.value=1}),ft(()=>{q()}),(k,v)=>(R(),O("div",null,[ue(Ds,null,{default:me(()=>[d("div",Q5,[v[25]||(v[25]=d("h2",{class:"text-3xl font-bold text-gray-900 dark:text-white"},[Q(" Categorias "),d("p",{class:"text-gray-600 dark:text-gray-400 text-sm font-normal"},"Adicione, edite ou remova categorias de produtos.")],-1)),d("button",{onClick:v[0]||(v[0]=b=>x()),class:"px-5 py-2 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-md transition-colors duration-200"}," Nova Categoria "),c.value?(R(),O("div",J5,v[17]||(v[17]=[d("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-400 dark:border-gray-600 mx-auto"},null,-1),d("p",{class:"text-gray-600 dark:text-gray-400 mt-4"},"Carregando categorias...",-1)]))):e.value.length===0?(R(),O("div",Y5,v[18]||(v[18]=[d("p",{class:"text-gray-600 dark:text-gray-400 text-lg"},"Nenhuma categoria encontrada.",-1)]))):(R(),O("div",X5,[d("table",Z5,[v[21]||(v[21]=d("thead",null,[d("tr",{class:"bg-gray-200 dark:bg-gray-700"},[d("th",{class:"py-3 px-6 text-left text-gray-700 dark:text-gray-300 uppercase text-sm leading-normal"},"Nome "),d("th",{class:"py-3 px-6 text-left text-gray-700 dark:text-gray-300 uppercase text-sm leading-normal"}," Categoria Pai"),d("th",{class:"py-3 px-6 text-left text-gray-700 dark:text-gray-300 uppercase text-sm leading-normal"},"Ícone "),d("th",{class:"py-3 px-6 text-right text-gray-700 dark:text-gray-300 uppercase text-sm leading-normal"},"Ações ")])],-1)),d("tbody",eF,[(R(!0),O(ge,null,Ne(f.value,b=>(R(),O("tr",{key:b.id,class:"border-b border-gray-300 dark:border-gray-700 hover:bg-gray-200 dark:hover:bg-gray-700"},[d("td",tF,[d("span",null,F(b.name),1),d("small",nF,"/"+F(b.slug),1)]),d("td",rF,F(U(b.parent_id)),1),d("td",sF,[d("i",{class:re([b.icon,"mr-2 text-blue-600 dark:text-blue-400"]),title:b.icon},null,10,oF)]),d("td",iF,[d("button",{onClick:S=>x(b),class:"px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-l-md transition-colors duration-200"},v[19]||(v[19]=[d("i",{class:"fa-duotone fa-edit","aria-label":"hidden"},null,-1)]),8,aF),d("button",{onClick:S=>V(b),class:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-r-md transition-colors duration-200"},v[20]||(v[20]=[d("i",{class:"fa-duotone fa-trash","aria-label":"hidden"},null,-1)]),8,lF)])]))),128))])]),d("div",uF,[d("span",cF,"Total de itens: "+F(u.value),1),d("div",dF,[v[24]||(v[24]=d("label",{for:"pageSize",class:"text-sm text-gray-700 dark:text-gray-300"},"Itens por página:",-1)),d("div",hF,[Ae(d("select",{id:"pageSize","onUpdate:modelValue":v[1]||(v[1]=b=>a.value=b),class:"appearance-none bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white border border-gray-400 dark:border-gray-600 rounded px-3 py-1 pr-8 focus:outline-none focus:ring-2 focus:ring-blue-500"},v[22]||(v[22]=[d("option",{value:3},"3",-1),d("option",{value:5},"5",-1),d("option",{value:10},"10",-1),d("option",{value:25},"25",-1)]),512),[[Vr,a.value,void 0,{number:!0}]]),v[23]||(v[23]=d("div",{class:"pointer-events-none absolute inset-y-0 right-2 flex items-center text-gray-800 dark:text-white"}," ▼ ",-1))]),d("button",{onClick:v[2]||(v[2]=b=>i.value--),disabled:i.value===1,class:"px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"}," < Anterior ",8,fF),d("span",pF,"Página "+F(i.value)+" de "+F(g.value),1),d("button",{onClick:v[3]||(v[3]=b=>i.value++),disabled:i.value>=g.value,class:"px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"}," Próximo > ",8,gF)])])]))])]),_:1}),n.value?(R(),Qe(As,{key:0,open:n.value,"onUpdate:open":v[12]||(v[12]=b=>n.value=b)},{default:me(()=>[d("div",mF,[d("button",{onClick:v[4]||(v[4]=b=>n.value=!1),class:"absolute top-3 right-3 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white text-xl"}," × "),d("h3",yF,F(m.value.id?"Editar":"Nova")+" Categoria ",1),h.value?(R(),O("div",vF,v[26]||(v[26]=[d("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-400 dark:border-gray-600 mx-auto"},null,-1),d("p",{class:"text-gray-600 dark:text-gray-400 mt-2"},"Salvando...",-1)]))):(R(),O("div",_F,[Ae(d("input",{"onUpdate:modelValue":v[5]||(v[5]=b=>m.value.name=b),placeholder:"Nome da Categoria",class:"w-full p-3 bg-gray-200 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[tt,m.value.name]]),Ae(d("input",{"onUpdate:modelValue":v[6]||(v[6]=b=>m.value.slug=b),placeholder:"Slug (gerado automaticamente)",readonly:"",class:"w-full p-3 bg-gray-200 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md hidden focus:outline-none focus:ring-2 focus:ring-blue-500 cursor-not-allowed"},null,512),[[tt,m.value.slug]]),d("div",null,[v[28]||(v[28]=d("label",{for:"parent-category-select",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Categoria Pai (Opcional):",-1)),Ae(d("select",{id:"parent-category-select","onUpdate:modelValue":v[7]||(v[7]=b=>m.value.parent_id=b),class:"w-full p-3 bg-gray-200 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"},[v[27]||(v[27]=d("option",{value:""},"Nenhuma (Categoria Principal)",-1)),(R(!0),O(ge,null,Ne(_.value,b=>(R(),O("option",{key:b.id,value:b.id},F(b.name),9,bF))),128))],512),[[Vr,m.value.parent_id]])]),d("div",null,[v[30]||(v[30]=d("label",{for:"icon-input",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Ícone:",-1)),d("div",wF,[Ae(d("input",{type:"text",id:"icon-input","onUpdate:modelValue":v[8]||(v[8]=b=>m.value.icon=b),placeholder:"Ex: fas fa-pizza-slice",class:"w-full p-3 bg-gray-200 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[tt,m.value.icon]]),d("button",{onClick:v[9]||(v[9]=b=>s.value=!0),class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-md transition-colors duration-200 absolute right-0 top-0 h-full flex items-center"},[d("i",{class:re(m.value.icon||"fas fa-search")},null,2),v[29]||(v[29]=d("span",{class:"ml-2 hidden sm:inline"},"Escolher",-1))])]),v[31]||(v[31]=d("p",{class:"text-xs text-gray-600 dark:text-gray-400 mt-1"},[Q('Use classes de ícones como "fas fa-pizza-slice" '),d("a",{class:"text-blue-600 dark:text-blue-400 hover:underline",href:"https://fontawesome.com/icons",target:"_blank"},"(Font Awesome)"),Q(". ")],-1))]),d("div",xF,[d("button",{onClick:v[10]||(v[10]=b=>P()),disabled:h.value,class:"px-5 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Salvar ",8,EF),d("button",{onClick:v[11]||(v[11]=b=>n.value=!1),disabled:h.value,class:"px-5 py-2 bg-gray-600 hover:bg-gray-700 text-white font-semibold rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Cancelar ",8,TF)])]))])]),_:1},8,["open"])):le("",!0),r.value?(R(),Qe(As,{key:1,open:r.value,"onUpdate:open":v[15]||(v[15]=b=>r.value=b)},{default:me(()=>{var b;return[d("button",{onClick:v[13]||(v[13]=S=>r.value=!1),class:"absolute top-3 right-3 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white text-xl mb-5"}," × "),d("div",IF,[v[34]||(v[34]=d("i",{class:"fa-duotone fa-solid fa-circle-exclamation text-6xl text-red-400"},null,-1)),d("span",null,[v[32]||(v[32]=Q(" Tem certeza que deseja excluir a categoria ")),d("strong",kF,F((b=o.value)==null?void 0:b.name),1),v[33]||(v[33]=Q("? "))]),v[35]||(v[35]=Q(" Esta ação é irreversível. "))]),d("div",AF,[d("button",{onClick:j,disabled:h.value,class:"px-5 py-2 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Excluir ",8,SF),d("button",{onClick:v[14]||(v[14]=S=>r.value=!1),disabled:h.value,class:"px-5 py-2 bg-gray-600 hover:bg-gray-700 text-white font-semibold rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Cancelar ",8,CF)])]}),_:1},8,["open"])):le("",!0),s.value?(R(),Qe(G5,{key:2,open:s.value,"onUpdate:open":v[16]||(v[16]=b=>s.value=b),onIconSelected:C},null,8,["open"])):le("",!0)]))}},PF={class:"whatsapp-qr-container p-4 bg-white dark:bg-gray-800 rounded-lg shadow-md text-center"},OF={key:0,class:"text-gray-600 dark:text-gray-400"},NF={key:1},DF={class:"capitalize"},VF={key:0},MF=["src"],$F={key:1,class:"text-red-500"},LF={key:1,class:"text-green-600 dark:text-green-400"},FF={key:2,class:"text-green-600 dark:text-green-400"},UF={key:3},jF={key:4,class:"text-red-600 dark:text-red-400"},BF={key:5,class:"text-gray-500 dark:text-gray-400"},zF=["disabled"],qF={key:0,class:"fas fa-spinner fa-spin mr-2"},HF=["disabled"],KF={key:0,class:"fas fa-spinner fa-spin mr-2"},WF={__name:"WhatsappQrCodeDisplay",setup(t){const e=H(null),n=H("loading"),r=H(!0),s=H(null),o=ye(()=>{switch(n.value){case"inchat":case"connected":return"text-green-600 dark:text-green-400";case"qr-code":return"text-orange-500";case"disconnected":case"closed":case"failed":return"text-red-600 dark:text-red-400";default:return"text-gray-500 dark:text-gray-400"}}),i=async()=>{r.value=!0;try{const u=await Ze.get("/whatsapp/status");n.value=u.data.status,e.value=u.data.qrCode}catch(u){console.error("Erro ao buscar status do QR Code:",u),n.value="failed",e.value=null}finally{r.value=!1}},a=async()=>{r.value=!0;try{const u=await Ze.post("/admin/start-bot");console.log(u),n.value=u.data.status,e.value=u.data.qrCode,setInterval(i,15e3)}catch(u){console.error("Erro ao iniciar o bot:",u),n.value="failed",e.value=null}finally{r.value=!1}};return ft(()=>{i()}),yo(()=>{s.value&&clearInterval(s.value)}),(u,c)=>(R(),Qe(Ds,null,{default:me(()=>[d("div",PF,[c[10]||(c[10]=d("h2",{class:"text-xl font-semibold mb-4 dark:text-white"},"Status da Conexão do WhatsApp",-1)),r.value?(R(),O("div",OF,c[0]||(c[0]=[d("i",{class:"fas fa-spinner fa-spin mr-2"},null,-1),Q(" Carregando status... ")]))):(R(),O("div",NF,[d("p",{class:re(["text-lg font-medium mb-2",o.value])},[c[1]||(c[1]=Q(" Status: ")),d("span",DF,F(n.value),1)],2),n.value==="qr-code"?(R(),O("div",VF,[c[2]||(c[2]=d("p",{class:"text-gray-700 dark:text-gray-300 mb-4"},"Escaneie o QR Code abaixo com seu celular para conectar o bot: ",-1)),e.value?(R(),O("img",{key:0,src:e.value,alt:"QR Code WhatsApp",class:"mx-auto w-64 h-64 border p-2 bg-white"},null,8,MF)):(R(),O("p",$F,"QR Code não disponível. Tente recarregar a página."))])):n.value==="connected"?(R(),O("div",LF,c[3]||(c[3]=[d("i",{class:"fas fa-check-circle mr-2"},null,-1),Q(" Bot conectado com sucesso! "),d("p",{class:"text-gray-700 dark:text-gray-300 mt-2"},"Você pode fechar esta página.",-1)]))):n.value==="inchat"?(R(),O("div",FF,c[4]||(c[4]=[d("i",{class:"fas fa-check-circle mr-2"},null,-1),Q(" Bot conectado com sucesso! "),d("p",{class:"text-gray-700 dark:text-gray-300 mt-2"},"Você pode fechar esta página.",-1)]))):n.value==="disconnected"||n.value==="closed"?(R(),O("div",UF,[c[5]||(c[5]=d("p",{class:"text-red-600 dark:text-red-400"},"Bot desconectado. Aguardando novo QR Code ou tentando reconectar. ",-1)),d("button",{onClick:i,class:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600"}," Tentar novamente ")])):n.value==="failed"?(R(),O("div",jF,[c[6]||(c[6]=d("p",null,"Falha ao iniciar o bot. Verifique os logs do backend.",-1)),d("button",{onClick:i,class:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600"}," Tentar novamente ")])):(R(),O("div",BF,[d("p",null,"Status: "+F(n.value),1)])),d("button",{onClick:i,disabled:r.value,class:"mt-6 px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition duration-200"},[r.value?(R(),O("i",qF)):le("",!0),c[7]||(c[7]=Q(" Atualizar Status "))],8,zF),n.value!=="inchat"||n.value!=="connected"?(R(),O("button",{key:6,onClick:a,disabled:r.value,class:"mt-4 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition duration-200"},[r.value?(R(),O("i",KF)):le("",!0),c[8]||(c[8]=d("i",{class:"fab fa-whatsapp"},null,-1)),c[9]||(c[9]=Q(" Iniciar Bot WhatsApp "))],8,HF)):le("",!0)]))])]),_:1}))}},GF=Ot(WF,[["__scopeId","data-v-df8282e2"]]),QF={class:"space-y-6"},JF={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},YF={class:"bg-gray-100 dark:bg-gray-800 p-6 rounded-lg shadow-md border border-gray-300 dark:border-gray-700"},XF={class:"space-y-4"},ZF={class:"bg-gray-100 dark:bg-gray-800 p-6 rounded-lg shadow-md border border-gray-300 dark:border-gray-700"},e9={class:"space-y-4"},t9={class:"flex items-center"},n9={class:"bg-gray-100 dark:bg-gray-800 p-6 rounded-lg shadow-md border border-gray-300 dark:border-gray-700"},r9={class:"space-y-4"},s9={class:"text-xs text-gray-500 dark:text-gray-500 mt-1 flex items-center justify-between"},o9={class:"flex justify-end mt-6"},i9=["disabled"],a9={key:0},l9={key:1},u9={__name:"AdminSettings",setup(t){const e=H({appName:"",contactEmail:"",whatsappNumber:"",notificationTopic:"geral_promocoes",enableOrderNotifications:!0}),n=H(!1),r=H(!0);async function s(){r.value=!0;try{const i=await Ze.get("/admin/settings");i.data&&(e.value={...e.value,...i.data})}catch(i){console.error("Erro ao carregar configurações:",i)}finally{r.value=!1}}async function o(){n.value=!0;try{await Ze.post("/admin/settings",e.value),console.log("Configurações salvas com sucesso!")}catch(i){console.error("Erro ao salvar configurações:",i)}finally{n.value=!1}}return ft(()=>{s()}),(i,a)=>(R(),Qe(Ds,null,{default:me(()=>[d("div",QF,[a[17]||(a[17]=d("h2",{class:"text-md md:text-2xl font-bold text-gray-900 dark:text-white"},[Q("Configurações do Administrador "),d("p",{class:"text-gray-600 dark:text-gray-400 italic text-xs font-normal"},"Ajuste as configurações gerais da sua plataforma.")],-1)),d("div",JF,[d("div",YF,[a[8]||(a[8]=d("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4 border-b border-gray-300 dark:border-gray-700 pb-2"}," Configurações Gerais",-1)),d("div",XF,[d("div",null,[a[5]||(a[5]=d("label",{for:"appName",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Nome do Aplicativo:",-1)),Ae(d("input",{type:"text",id:"appName","onUpdate:modelValue":a[0]||(a[0]=u=>e.value.appName=u),class:"w-full p-3 bg-gray-200 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nome da Pizzaria"},null,512),[[tt,e.value.appName]])]),d("div",null,[a[6]||(a[6]=d("label",{for:"contactEmail",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Email de Contato:",-1)),Ae(d("input",{type:"email",id:"contactEmail","onUpdate:modelValue":a[1]||(a[1]=u=>e.value.contactEmail=u),class:"w-full p-3 bg-gray-200 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"contato@pizzaria.com"},null,512),[[tt,e.value.contactEmail]])]),d("div",null,[a[7]||(a[7]=d("label",{for:"whatsappNumber",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Número de WhatsApp (para pedidos):",-1)),Ae(d("input",{type:"text",id:"whatsappNumber","onUpdate:modelValue":a[2]||(a[2]=u=>e.value.whatsappNumber=u),class:"w-full p-3 bg-gray-200 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"+55 11 91234-5678"},null,512),[[tt,e.value.whatsappNumber]])])])]),d("div",ZF,[a[12]||(a[12]=d("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4 border-b border-gray-300 dark:border-gray-700 pb-2"}," Notificações FCM",-1)),a[13]||(a[13]=d("p",{class:"text-gray-600 dark:text-gray-400 mb-4"},"Gerencie as configurações de notificação push do Firebase Cloud Messaging.",-1)),d("div",e9,[d("div",null,[a[9]||(a[9]=d("label",{for:"notificationTopic",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Tópico Padrão para Notificações:",-1)),Ae(d("input",{type:"text",id:"notificationTopic","onUpdate:modelValue":a[3]||(a[3]=u=>e.value.notificationTopic=u),class:"w-full p-3 bg-gray-200 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"geral_promocoes"},null,512),[[tt,e.value.notificationTopic]]),a[10]||(a[10]=d("p",{class:"text-xs text-gray-500 dark:text-gray-500 mt-1"},"Este tópico será usado para enviar notificações em massa.",-1))]),d("div",t9,[Ae(d("input",{type:"checkbox",id:"enableOrderNotifications","onUpdate:modelValue":a[4]||(a[4]=u=>e.value.enableOrderNotifications=u),class:"h-5 w-5 text-blue-600 bg-gray-200 dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500"},null,512),[[il,e.value.enableOrderNotifications]]),a[11]||(a[11]=d("label",{for:"enableOrderNotifications",class:"ml-2 block text-sm text-gray-700 dark:text-gray-300"}," Habilitar notificações de atualização de pedido ",-1))])])]),d("div",n9,[a[16]||(a[16]=d("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4 border-b border-gray-300 dark:border-gray-700 pb-2"}," Outros",-1)),d("div",r9,[d("p",s9,[a[14]||(a[14]=Q(" Tema Light/Dark ")),ue(Yy)]),a[15]||(a[15]=d("p",{class:"text-xs text-gray-500 dark:text-gray-500 mt-1 flex items-center justify-between"},[d("label",{for:"xota",class:"animate-xota"},"Ativar notificações de pedidos"),d("input",{id:"xota",type:"checkbox",value:"anal69",class:"w-4 h-4 appearance-none dark:bg-gray-900 checked:bg-green-200 checked:rounded-full checked:outline-2 outline-2 rounded-full not-checked:outline-orange-800 checked:animate-rubberBand checked:outline-orange-500"})],-1))])])]),d("div",o9,[d("button",{onClick:o,disabled:n.value,class:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"},[n.value?(R(),O("span",a9,"Salvando...")):(R(),O("span",l9,"Salvar Configurações"))],8,i9)])])]),_:1}))}},c9={class:"min-h-screen flex items-center justify-center transition-colors duration-200 body"},d9={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert"},h9={class:"block sm:inline"},f9=["disabled"],p9={key:0,class:"flex items-center"},g9={key:1},m9=["disabled"],y9={key:0,class:"flex items-center"},v9={key:1},_9={__name:"Login",setup(t){const e=Cu(),n=H(""),r=H(""),s=async()=>{await e.loginWithEmail(n.value,r.value)},o=async()=>{await e.loginWithGoogle()};return(i,a)=>(R(),O("div",c9,[d("div",{class:re(["p-8 rounded-lg w-full max-w-md h-screen md:h-auto morph",[_e(e).error?"shadow-red-500/30":""]])},[ue(Yy),a[7]||(a[7]=d("img",{src:Jy,alt:"Logo",class:"mx-auto mb-6 w-auto h-24"},null,-1)),_e(e).error?(R(),O("div",d9,[d("span",h9,F(_e(e).error),1)])):le("",!0),d("form",{onSubmit:Mn(s,["prevent"]),class:"space-y-4"},[d("div",null,[a[2]||(a[2]=d("label",{for:"email",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Email",-1)),Ae(d("input",{type:"email",id:"email","onUpdate:modelValue":a[0]||(a[0]=u=>n.value=u),required:"",class:re(["mt-1 block w-full px-3 py-2 border  rounded-md shadow-sm focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white",_e(e).error?"border-red-500":"border-gray-300 dark:border-gray-600"]),placeholder:"seu@email.com"},null,2),[[tt,n.value]])]),d("div",null,[a[3]||(a[3]=d("label",{for:"password",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Senha",-1)),Ae(d("input",{type:"password",id:"password","onUpdate:modelValue":a[1]||(a[1]=u=>r.value=u),required:"",class:re(["mt-1 block w-full px-3 py-2 border  rounded-md shadow-sm focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white",_e(e).error?"border-red-500":"border-gray-300 dark:border-gray-600"]),placeholder:"********"},null,2),[[tt,r.value]])]),d("button",{type:"submit",disabled:_e(e).loading,class:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-amber-600 hover:bg-amber-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 dark:bg-amber-700 dark:hover:bg-amber-800 disabled:opacity-50 disabled:cursor-not-allowed"},[_e(e).loading?(R(),O("span",p9,a[4]||(a[4]=[d("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[d("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),d("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),Q(" Entrando... ")]))):(R(),O("span",g9,"Entrar com Email"))],8,f9)],32),a[8]||(a[8]=rl('<div class="relative my-6"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-gray-300 dark:border-gray-600"></div></div><div class="relative flex justify-center text-sm"><span class="px-2 bg-[#e0e0e0] dark:bg-gray-800 text-gray-500 dark:text-gray-400">Ou</span></div></div>',1)),d("div",null,[d("button",{onClick:o,disabled:_e(e).loading,class:"w-full flex justify-center items-center py-2 px-4 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[a[6]||(a[6]=d("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google logo",class:"w-5 h-5 mr-2"},null,-1)),_e(e).loading?(R(),O("span",y9,a[5]||(a[5]=[d("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-gray-700 dark:text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[d("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),d("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),Q(" Entrando com Google... ")]))):(R(),O("span",v9,"Entrar com Google"))],8,m9)])],2)]))}},b9={class:"space-y-6 p-4 md:p-4 bg-white dark:bg-gray-900 rounded-lg shadow-xl"},w9={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert"},x9={key:1,class:"text-center py-8"},E9={key:2,class:"text-center py-8"},T9={key:3,class:"mt-4 dark:border-gray-700 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},I9={class:"font-semibold text-gray-800 dark:text-white"},k9={class:"text-sm text-gray-600 dark:text-gray-400 mb-2"},A9={class:"text-left mb-4"},S9={class:"flex justify-end space-x-2"},C9=["onClick"],R9=["onClick"],P9={class:"flex flex-col md:flex-row justify-between items-center mt-6 text-gray-900 dark:text-white p-4 bg-gray-100 dark:bg-gray-800 rounded-lg"},O9={class:"mb-4 md:mb-0 text-sm md:text-base"},N9={class:"flex flex-col md:flex-row items-center gap-4 w-full md:w-auto"},D9={class:"flex items-center gap-2 mb-4 md:mb-0 w-full md:w-auto justify-center"},V9={class:"relative"},M9={"aria-label":"Page navigation",class:"w-full flex justify-center"},$9={class:"inline-flex -space-x-px text-sm rounded-md shadow-sm overflow-hidden"},L9={key:0,class:"flex items-center justify-center px-3 h-8 leading-tight text-gray-500 bg-white border border-gray-300 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400"},F9=["onClick"],U9={class:"bg-white dark:bg-gray-800 text-gray-900 dark:text-white p-6 rounded-lg shadow-xl relative"},j9={class:"text-lg mb-4"},B9={class:"mt-6 flex justify-end gap-3"},z9=["disabled"],q9={key:0},H9={key:1},K9=["disabled"],W9={__name:"ManagerUsers",setup(t){const e=H([]),n=H(!0),r=H(!1),s=H(null),o=H(""),i=H(!1),a=H(1),u=H(2),c=H(0),h=ui(),f=Cu(),g=ye(()=>{const U=(a.value-1)*u.value;return e.value.slice(U,U+u.value)}),m=ye(()=>Math.ceil(c.value/u.value)),_=ye(()=>{const U=[],k=Math.floor(2.5);if(m.value<=5)for(let v=1;v<=m.value;v++)U.push(v);else{U.push(1);let v=Math.max(2,a.value-k),b=Math.min(m.value-1,a.value+k);a.value-1<k&&(b=4),m.value-a.value<k&&(v=m.value-5+2),v>2&&U.push("...");for(let S=v;S<=b;S++)U.push(S);b<m.value-1&&U.push("..."),m.value>1&&!U.includes(m.value)&&U.push(m.value)}return[...new Set(U)]}),T=U=>{U==="..."||U<1||U>m.value||U===a.value||(a.value=U)},x=U=>U?"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-semibold dark:bg-green-700 dark:text-green-100":"bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs font-semibold dark:bg-red-700 dark:text-red-100";function C(U,q){s.value=U,o.value=q,r.value=!0}function P(){s.value=null,o.value="",r.value=!1}async function V(){var U,q,k;if(!(!s.value||!o.value)){i.value=!0;try{const v=o.value==="promote"?"/admin/manage-users/promote":"/admin/manage-users/demote",b=o.value==="promote"?"promovido":"rebaixado";await Ze.post(v,{email:s.value.email}),h.showToast("Sucesso!",`Usuário ${s.value.email} foi ${b} com sucesso. Ele precisará fazer login novamente.`,"success",5e3),P(),await j()}catch(v){console.error(`Erro ao ${o.value} usuário:`,((U=v.response)==null?void 0:U.data)||v.message),h.showToast("Erro",`Não foi possível ${o.value} o usuário: ${((k=(q=v.response)==null?void 0:q.data)==null?void 0:k.error)||v.message}`,"error",5e3)}finally{i.value=!1}}}async function j(){var U,q,k;if(!f.isAuthenticated||!f.isAdmin){n.value=!1,console.warn("Não autenticado ou não é admin. Não carregando usuários.");return}n.value=!0;try{console.log("Tentando carregar usuários da API...");const v=await Ze.get("/admin/manage-users/users");console.log("Usuários recebidos:",v.data),e.value=v.data,c.value=e.value.length,a.value>m.value&&m.value>0?a.value=m.value:m.value===0&&(a.value=1)}catch(v){console.error("Erro ao carregar usuários:",((U=v.response)==null?void 0:U.data)||v.message),((q=v.response)==null?void 0:q.status)!==401&&((k=v.response)==null?void 0:k.status)!==403&&h.showToast("Erro","Não foi possível carregar os usuários.","error")}finally{n.value=!1}}return qt(u,()=>{a.value=1}),ft(async()=>{!f.isAuthenticated&&!f.loading&&(console.log("ManageUsers: onMounted - authStore não inicializado, chamando initializeAuth..."),await f.initializeAuth()),console.log("ManageUsers: onMounted - Chamando loadUsers..."),j()}),(U,q)=>(R(),O("div",null,[ue(Ds,null,{default:me(()=>[d("div",b9,[q[10]||(q[10]=d("h2",{class:"md:text-2xl font-semibold text-gray-700 dark:text-white"},[d("i",{class:"fa-duotone fa-users"}),Q(" Gerenciamento de usuários "),d("p",{class:"text-xs font-normal text-gray-600 dark:text-gray-400 text-nowrap"}," Visualize e gerencie as permissões de administrador dos usuários. ")],-1)),!_e(f).isAuthenticated||!_e(f).isAdmin?(R(),O("div",w9,q[4]||(q[4]=[d("span",{class:"block sm:inline"},[Q("Você não tem permissão para acessar esta área ou sua sessão expirou."),d("br"),Q("Por favor, faça login como administrador.")],-1)]))):n.value?(R(),O("div",x9,q[5]||(q[5]=[d("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-400 dark:border-gray-600 mx-auto"},null,-1),d("p",{class:"text-gray-600 dark:text-gray-400 mt-4"},"Carregando usuários...",-1)]))):e.value.length===0?(R(),O("div",E9,q[6]||(q[6]=[d("p",{class:"text-gray-600 dark:text-gray-400 text-xs md:text-lg"},"Nenhum usuário encontrado.",-1)]))):(R(),O("div",T9,[(R(!0),O(ge,null,Ne(g.value,k=>(R(),O("div",{class:"rounded-lg shadow-md bg-white dark:bg-gray-800 p-4 border border-gray-300 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",key:k.uid},[d("p",I9,F(k.displayName||"Nome não informado"),1),d("p",k9,F(k.email),1),d("p",A9,[d("span",{class:re(x(k.isAdmin))},F(k.isAdmin?"Administrador":"Usuário Comum"),3)]),d("div",S9,[k.isAdmin?(R(),O("button",{key:1,onClick:v=>C(k,"demote"),class:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white rounded-md text-sm transition-colors duration-200"}," Rebaixar ",8,R9)):(R(),O("button",{key:0,onClick:v=>C(k,"promote"),class:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded-md text-sm transition-colors duration-200"}," Promover ",8,C9))])]))),128))])),d("div",P9,[d("span",O9,"Total de usuários: "+F(c.value),1),d("div",N9,[d("div",D9,[q[9]||(q[9]=d("label",{for:"pageSize",class:"text-xs text-gray-700 dark:text-gray-300"},"Usuários por página:",-1)),d("div",V9,[Ae(d("select",{id:"pageSize","onUpdate:modelValue":q[0]||(q[0]=k=>u.value=k),class:"appearance-none bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white border border-gray-400 dark:border-gray-600 rounded px-3 py-1 pr-8 focus:outline-none focus:ring-2 focus:ring-blue-500"},q[7]||(q[7]=[d("option",{value:5},"5",-1),d("option",{value:10},"10",-1),d("option",{value:25},"25",-1)]),512),[[Vr,u.value,void 0,{number:!0}]]),q[8]||(q[8]=d("div",{class:"pointer-events-none absolute inset-y-0 right-2 flex items-center text-gray-800 dark:text-white"}," ▼ ",-1))])]),d("nav",M9,[d("ul",$9,[d("li",null,[d("a",{onClick:q[1]||(q[1]=k=>T(a.value-1)),class:re([{"opacity-50 cursor-not-allowed":a.value===1},"flex items-center justify-center px-3 h-8 ms-0 leading-tight text-gray-500 bg-white border border-e-0 border-gray-300 rounded-s-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white transition-colors duration-200"])}," Anterior ",2)]),(R(!0),O(ge,null,Ne(_.value,(k,v)=>(R(),O("li",{key:v},[k==="..."?(R(),O("span",L9," ... ")):(R(),O("a",{key:1,onClick:b=>T(k),class:re([{"text-blue-600 border-blue-300 bg-blue-50 hover:bg-blue-100 dark:border-gray-700 dark:bg-gray-700 dark:text-white":k===a.value,"text-gray-500 bg-white border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white":k!==a.value},"flex items-center justify-center px-3 h-8 leading-tight border transition-colors duration-200"])},F(k),11,F9))]))),128)),d("li",null,[d("a",{onClick:q[2]||(q[2]=k=>T(a.value+1)),class:re([{"opacity-50 cursor-not-allowed":a.value===m.value},"flex items-center justify-center px-3 h-8 leading-tight text-gray-500 bg-white border border-gray-300 rounded-e-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white transition-colors duration-200"])}," Próximo ",2)])])])])])])]),_:1}),ue(As,{open:r.value,"onUpdate:open":q[3]||(q[3]=k=>r.value=k)},{default:me(()=>{var k;return[d("div",U9,[d("button",{onClick:P,class:"absolute top-3 right-3 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white text-xl"}," × "),d("p",j9,[Q(" Tem certeza que deseja "+F(o.value==="promote"?"promover":"rebaixar")+" o usuário ",1),d("strong",{class:re(o.value==="promote"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400")},F((k=s.value)==null?void 0:k.email),3),q[11]||(q[11]=Q("? "))]),q[12]||(q[12]=d("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Esta ação exigirá que o usuário faça login novamente para que as alterações de permissão entrem em vigor. ",-1)),d("div",B9,[d("button",{onClick:V,disabled:i.value,class:re([o.value==="promote"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700","px-5 py-2 text-white font-semibold rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"])},[i.value?(R(),O("span",q9,"Processando...")):(R(),O("span",H9,F(o.value==="promote"?"Confirmar Promoção":"Confirmar Rebaixamento"),1))],10,z9),d("button",{onClick:P,disabled:i.value,class:"px-5 py-2 bg-gray-600 hover:bg-gray-700 text-white font-semibold rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Cancelar ",8,K9)])])]}),_:1},8,["open"])]))}},ys=$T({history:fT("/"),routes:[{path:"/",name:"home",component:uV,meta:{enterActiveClass:"animate__animated animate__fadeIn animate__faster",leaveActiveClass:"animate__animated animate__fadeOut animate__faster"}},{path:"/carrinho",name:"cart",component:AV,meta:{enterActiveClass:"animate__animated animate__fadeIn animate__faster",leaveActiveClass:"animate__animated animate__fadeOut animate__faster"}},{path:"/produto/:slug",name:"productDetail",component:r3,meta:{enterActiveClass:"animate__animated animate__fadeIn animate__faster",leaveActiveClass:"animate__animated animate__fadeOut animate__faster"}},{path:"/favoritos",name:"favritos",component:u3,meta:{enterActiveClass:"animate__animated animate__fadeIn animate__faster",leaveActiveClass:"animate__animated animate__fadeOut animate__faster"}},{path:"/perfil",name:"perfil",component:x3,meta:{enterActiveClass:"animate__animated animate__fadeIn animate__faster",leaveActiveClass:"animate__animated animate__fadeOut animate__faster"}},{path:"/checkout",name:"checkout",component:sM,meta:{enterActiveClass:"animate__animated animate__fadeIn animate__faster",leaveActiveClass:"animate__animated animate__fadeOut animate__faster"}},{path:"/monte-sua-pizza",name:"buildPiza",component:VM,meta:{enterActiveClass:"animate__animated animate__fadeIn animate__faster",leaveActiveClass:"animate__animated animate__fadeOut animate__faster"}},{path:"/configuracoes",name:"settings",component:QM,meta:{enterActiveClass:"animate__animated animate__fadeIn animate__faster",leaveActiveClass:"animate__animated animate__fadeOut animate__faster"}},{path:"/admin/login",name:"admin-login",component:_9,meta:{requiresAuth:!1,publicRoute:!0}},{path:"/admin",name:"admin-dashboard",component:W6,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/orders",name:"admin-orders",component:jL,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/products",name:"admin-products",component:B5,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/categories",name:"admin-categories",component:RF,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/whatsapp-qr",name:"whatsapp-qr",component:GF,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/settings",name:"admin-settings",component:u9,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/manage-users",name:"admin-manager-users",component:W9,meta:{requiresAuth:!0,requiresAdmin:!0}}]});ys.beforeEach(async(t,e,n)=>{const r=Cu();!r.isAuthenticated&&!r.loading&&await r.initializeAuth();const s=t.matched.some(c=>c.meta.requiresAuth),o=t.matched.some(c=>c.meta.requiresAdmin),i=t.matched.some(c=>c.meta.publicRoute),a=r.isAuthenticated,u=r.isAdmin;s&&!a?(console.log("Acesso negado: Rota requer autenticação, mas usuário não está autenticado."),n({name:"admin-login"})):o&&!u?(console.log("Acesso negado: Rota requer privilégios de admin, mas usuário não é admin. Redirecionando para home."),n({name:"home"})):i&&a?(console.log("Redirecionando: Usuário autenticado tentando acessar página de login."),n({name:"admin-dashboard"})):(console.log("Acesso permitido."),n())});function G9(t){return typeof t!="number"?"R$ 0,00":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t)}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("firebase-messaging-sw.js").then(t=>{console.log("Service Worker registrado com sucesso:",t)}).catch(t=>{console.error("Falha no registro do Service Worker:",t)})});const Ru=SE(GT);Ru.config.globalProperties.$formatPrice=G9;Ru.use(PE());Ru.use(ys);Ru.mount("#app");
