var Zk=Object.defineProperty;var eI=(t,e,n)=>e in t?Zk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ye=(t,e,n)=>eI(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();/**
* @vue/shared v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function rp(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const rt={},Ki=[],as=()=>{},tI=()=>!1,Mu=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),ip=t=>t.startsWith("onUpdate:"),Lt=Object.assign,op=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},nI=Object.prototype.hasOwnProperty,Xe=(t,e)=>nI.call(t,e),Ee=Array.isArray,Gi=t=>hl(t)==="[object Map]",yo=t=>hl(t)==="[object Set]",qm=t=>hl(t)==="[object Date]",De=t=>typeof t=="function",_t=t=>typeof t=="string",Wn=t=>typeof t=="symbol",ot=t=>t!==null&&typeof t=="object",Eb=t=>(ot(t)||De(t))&&De(t.then)&&De(t.catch),Tb=Object.prototype.toString,hl=t=>Tb.call(t),sI=t=>hl(t).slice(8,-1),kb=t=>hl(t)==="[object Object]",ap=t=>_t(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,ga=rp(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Nu=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},rI=/-(\w)/g,Vn=Nu(t=>t.replace(rI,(e,n)=>n?n.toUpperCase():"")),iI=/\B([A-Z])/g,Pr=Nu(t=>t.replace(iI,"-$1").toLowerCase()),Lu=Nu(t=>t.charAt(0).toUpperCase()+t.slice(1)),Jd=Nu(t=>t?`on${Lu(t)}`:""),gr=(t,e)=>!Object.is(t,e),bc=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Ib=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},Hc=t=>{const e=parseFloat(t);return isNaN(e)?t:e},oI=t=>{const e=_t(t)?Number(t):NaN;return isNaN(e)?t:e};let Wm;const Vu=()=>Wm||(Wm=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function vo(t){if(Ee(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=_t(s)?uI(s):vo(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(_t(t)||ot(t))return t}const aI=/;(?![^(]*\))/g,lI=/:([^]+)/,cI=/\/\*[^]*?\*\//g;function uI(t){const e={};return t.replace(cI,"").split(aI).forEach(n=>{if(n){const s=n.split(lI);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function re(t){let e="";if(_t(t))e=t;else if(Ee(t))for(let n=0;n<t.length;n++){const s=re(t[n]);s&&(e+=s+" ")}else if(ot(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const dI="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",hI=rp(dI);function Sb(t){return!!t||t===""}function fI(t,e){if(t.length!==e.length)return!1;let n=!0;for(let s=0;n&&s<t.length;s++)n=di(t[s],e[s]);return n}function di(t,e){if(t===e)return!0;let n=qm(t),s=qm(e);if(n||s)return n&&s?t.getTime()===e.getTime():!1;if(n=Wn(t),s=Wn(e),n||s)return t===e;if(n=Ee(t),s=Ee(e),n||s)return n&&s?fI(t,e):!1;if(n=ot(t),s=ot(e),n||s){if(!n||!s)return!1;const r=Object.keys(t).length,i=Object.keys(e).length;if(r!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!di(t[o],e[o]))return!1}}return String(t)===String(e)}function lp(t,e){return t.findIndex(n=>di(n,e))}const Ab=t=>!!(t&&t.__v_isRef===!0),U=t=>_t(t)?t:t==null?"":Ee(t)||ot(t)&&(t.toString===Tb||!De(t.toString))?Ab(t)?U(t.value):JSON.stringify(t,Cb,2):String(t),Cb=(t,e)=>Ab(e)?Cb(t,e.value):Gi(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r],i)=>(n[Zd(s,i)+" =>"]=r,n),{})}:yo(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Zd(n))}:Wn(e)?Zd(e):ot(e)&&!Ee(e)&&!kb(e)?String(e):e,Zd=(t,e="")=>{var n;return Wn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let tn;class Pb{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=tn,!e&&tn&&(this.index=(tn.scopes||(tn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=tn;try{return tn=this,e()}finally{tn=n}}}on(){++this._on===1&&(this.prevScope=tn,tn=this)}off(){this._on>0&&--this._on===0&&(tn=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function Rb(t){return new Pb(t)}function Ob(){return tn}function pI(t,e=!1){tn&&tn.cleanups.push(t)}let at;const eh=new WeakSet;class Db{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,tn&&tn.active&&tn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,eh.has(this)&&(eh.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Nb(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Km(this),Lb(this);const e=at,n=Hn;at=this,Hn=!0;try{return this.fn()}finally{Vb(this),at=e,Hn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)dp(e);this.deps=this.depsTail=void 0,Km(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?eh.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Qh(this)&&this.run()}get dirty(){return Qh(this)}}let Mb=0,ma,ya;function Nb(t,e=!1){if(t.flags|=8,e){t.next=ya,ya=t;return}t.next=ma,ma=t}function cp(){Mb++}function up(){if(--Mb>0)return;if(ya){let e=ya;for(ya=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;ma;){let e=ma;for(ma=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function Lb(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Vb(t){let e,n=t.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),dp(s),gI(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}t.deps=e,t.depsTail=n}function Qh(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&($b(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function $b(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Ma)||(t.globalVersion=Ma,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Qh(t))))return;t.flags|=2;const e=t.dep,n=at,s=Hn;at=t,Hn=!0;try{Lb(t);const r=t.fn(t._value);(e.version===0||gr(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{at=n,Hn=s,Vb(t),t.flags&=-3}}function dp(t,e=!1){const{dep:n,prevSub:s,nextSub:r}=t;if(s&&(s.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)dp(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function gI(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Hn=!0;const Fb=[];function Fs(){Fb.push(Hn),Hn=!1}function Us(){const t=Fb.pop();Hn=t===void 0?!0:t}function Km(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=at;at=void 0;try{e()}finally{at=n}}}let Ma=0;class mI{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class hp{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!at||!Hn||at===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==at)n=this.activeLink=new mI(at,this),at.deps?(n.prevDep=at.depsTail,at.depsTail.nextDep=n,at.depsTail=n):at.deps=at.depsTail=n,Ub(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=at.depsTail,n.nextDep=void 0,at.depsTail.nextDep=n,at.depsTail=n,at.deps===n&&(at.deps=s)}return n}trigger(e){this.version++,Ma++,this.notify(e)}notify(e){cp();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{up()}}}function Ub(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)Ub(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const qc=new WeakMap,ri=Symbol(""),Xh=Symbol(""),Na=Symbol("");function sn(t,e,n){if(Hn&&at){let s=qc.get(t);s||qc.set(t,s=new Map);let r=s.get(n);r||(s.set(n,r=new hp),r.map=s,r.key=n),r.track()}}function Is(t,e,n,s,r,i){const o=qc.get(t);if(!o){Ma++;return}const a=l=>{l&&l.trigger()};if(cp(),e==="clear")o.forEach(a);else{const l=Ee(t),c=l&&ap(n);if(l&&n==="length"){const u=Number(s);o.forEach((h,p)=>{(p==="length"||p===Na||!Wn(p)&&p>=u)&&a(h)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(Na)),e){case"add":l?c&&a(o.get("length")):(a(o.get(ri)),Gi(t)&&a(o.get(Xh)));break;case"delete":l||(a(o.get(ri)),Gi(t)&&a(o.get(Xh)));break;case"set":Gi(t)&&a(o.get(ri));break}}up()}function yI(t,e){const n=qc.get(t);return n&&n.get(e)}function Li(t){const e=Ue(t);return e===t?e:(sn(e,"iterate",Na),Mn(t)?e:e.map(zt))}function $u(t){return sn(t=Ue(t),"iterate",Na),t}const vI={__proto__:null,[Symbol.iterator](){return th(this,Symbol.iterator,zt)},concat(...t){return Li(this).concat(...t.map(e=>Ee(e)?Li(e):e))},entries(){return th(this,"entries",t=>(t[1]=zt(t[1]),t))},every(t,e){return ys(this,"every",t,e,void 0,arguments)},filter(t,e){return ys(this,"filter",t,e,n=>n.map(zt),arguments)},find(t,e){return ys(this,"find",t,e,zt,arguments)},findIndex(t,e){return ys(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return ys(this,"findLast",t,e,zt,arguments)},findLastIndex(t,e){return ys(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return ys(this,"forEach",t,e,void 0,arguments)},includes(...t){return nh(this,"includes",t)},indexOf(...t){return nh(this,"indexOf",t)},join(t){return Li(this).join(t)},lastIndexOf(...t){return nh(this,"lastIndexOf",t)},map(t,e){return ys(this,"map",t,e,void 0,arguments)},pop(){return Wo(this,"pop")},push(...t){return Wo(this,"push",t)},reduce(t,...e){return Gm(this,"reduce",t,e)},reduceRight(t,...e){return Gm(this,"reduceRight",t,e)},shift(){return Wo(this,"shift")},some(t,e){return ys(this,"some",t,e,void 0,arguments)},splice(...t){return Wo(this,"splice",t)},toReversed(){return Li(this).toReversed()},toSorted(t){return Li(this).toSorted(t)},toSpliced(...t){return Li(this).toSpliced(...t)},unshift(...t){return Wo(this,"unshift",t)},values(){return th(this,"values",zt)}};function th(t,e,n){const s=$u(t),r=s[e]();return s!==t&&!Mn(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.value&&(i.value=n(i.value)),i}),r}const _I=Array.prototype;function ys(t,e,n,s,r,i){const o=$u(t),a=o!==t&&!Mn(t),l=o[e];if(l!==_I[e]){const h=l.apply(t,i);return a?zt(h):h}let c=n;o!==t&&(a?c=function(h,p){return n.call(this,zt(h),p,t)}:n.length>2&&(c=function(h,p){return n.call(this,h,p,t)}));const u=l.call(o,c,s);return a&&r?r(u):u}function Gm(t,e,n,s){const r=$u(t);let i=n;return r!==t&&(Mn(t)?n.length>3&&(i=function(o,a,l){return n.call(this,o,a,l,t)}):i=function(o,a,l){return n.call(this,o,zt(a),l,t)}),r[e](i,...s)}function nh(t,e,n){const s=Ue(t);sn(s,"iterate",Na);const r=s[e](...n);return(r===-1||r===!1)&&fl(n[0])?(n[0]=Ue(n[0]),s[e](...n)):r}function Wo(t,e,n=[]){Fs(),cp();const s=Ue(t)[e].apply(t,n);return up(),Us(),s}const bI=rp("__proto__,__v_isRef,__isVue"),Bb=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Wn));function xI(t){Wn(t)||(t=String(t));const e=Ue(this);return sn(e,"has",t),e.hasOwnProperty(t)}class jb{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?RI:Wb:i?qb:Hb).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=Ee(e);if(!r){let l;if(o&&(l=vI[n]))return l;if(n==="hasOwnProperty")return xI}const a=Reflect.get(e,n,lt(e)?e:s);return(Wn(n)?Bb.has(n):bI(n))||(r||sn(e,"get",n),i)?a:lt(a)?o&&ap(n)?a:a.value:ot(a)?r?Gb(a):_o(a):a}}class zb extends jb{constructor(e=!1){super(!1,e)}set(e,n,s,r){let i=e[n];if(!this._isShallow){const l=xr(i);if(!Mn(s)&&!xr(s)&&(i=Ue(i),s=Ue(s)),!Ee(e)&&lt(i)&&!lt(s))return l?!1:(i.value=s,!0)}const o=Ee(e)&&ap(n)?Number(n)<e.length:Xe(e,n),a=Reflect.set(e,n,s,lt(e)?e:r);return e===Ue(r)&&(o?gr(s,i)&&Is(e,"set",n,s):Is(e,"add",n,s)),a}deleteProperty(e,n){const s=Xe(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&s&&Is(e,"delete",n,void 0),r}has(e,n){const s=Reflect.has(e,n);return(!Wn(n)||!Bb.has(n))&&sn(e,"has",n),s}ownKeys(e){return sn(e,"iterate",Ee(e)?"length":ri),Reflect.ownKeys(e)}}class wI extends jb{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const EI=new zb,TI=new wI,kI=new zb(!0);const Jh=t=>t,Kl=t=>Reflect.getPrototypeOf(t);function II(t,e,n){return function(...s){const r=this.__v_raw,i=Ue(r),o=Gi(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=r[t](...s),u=n?Jh:e?Wc:zt;return!e&&sn(i,"iterate",l?Xh:ri),{next(){const{value:h,done:p}=c.next();return p?{value:h,done:p}:{value:a?[u(h[0]),u(h[1])]:u(h),done:p}},[Symbol.iterator](){return this}}}}function Gl(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function SI(t,e){const n={get(r){const i=this.__v_raw,o=Ue(i),a=Ue(r);t||(gr(r,a)&&sn(o,"get",r),sn(o,"get",a));const{has:l}=Kl(o),c=e?Jh:t?Wc:zt;if(l.call(o,r))return c(i.get(r));if(l.call(o,a))return c(i.get(a));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!t&&sn(Ue(r),"iterate",ri),Reflect.get(r,"size",r)},has(r){const i=this.__v_raw,o=Ue(i),a=Ue(r);return t||(gr(r,a)&&sn(o,"has",r),sn(o,"has",a)),r===a?i.has(r):i.has(r)||i.has(a)},forEach(r,i){const o=this,a=o.__v_raw,l=Ue(a),c=e?Jh:t?Wc:zt;return!t&&sn(l,"iterate",ri),a.forEach((u,h)=>r.call(i,c(u),c(h),o))}};return Lt(n,t?{add:Gl("add"),set:Gl("set"),delete:Gl("delete"),clear:Gl("clear")}:{add(r){!e&&!Mn(r)&&!xr(r)&&(r=Ue(r));const i=Ue(this);return Kl(i).has.call(i,r)||(i.add(r),Is(i,"add",r,r)),this},set(r,i){!e&&!Mn(i)&&!xr(i)&&(i=Ue(i));const o=Ue(this),{has:a,get:l}=Kl(o);let c=a.call(o,r);c||(r=Ue(r),c=a.call(o,r));const u=l.call(o,r);return o.set(r,i),c?gr(i,u)&&Is(o,"set",r,i):Is(o,"add",r,i),this},delete(r){const i=Ue(this),{has:o,get:a}=Kl(i);let l=o.call(i,r);l||(r=Ue(r),l=o.call(i,r)),a&&a.call(i,r);const c=i.delete(r);return l&&Is(i,"delete",r,void 0),c},clear(){const r=Ue(this),i=r.size!==0,o=r.clear();return i&&Is(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=II(r,t,e)}),n}function fp(t,e){const n=SI(t,e);return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(Xe(n,r)&&r in s?n:s,r,i)}const AI={get:fp(!1,!1)},CI={get:fp(!1,!0)},PI={get:fp(!0,!1)};const Hb=new WeakMap,qb=new WeakMap,Wb=new WeakMap,RI=new WeakMap;function OI(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function DI(t){return t.__v_skip||!Object.isExtensible(t)?0:OI(sI(t))}function _o(t){return xr(t)?t:pp(t,!1,EI,AI,Hb)}function Kb(t){return pp(t,!1,kI,CI,qb)}function Gb(t){return pp(t,!0,TI,PI,Wb)}function pp(t,e,n,s,r){if(!ot(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=DI(t);if(i===0)return t;const o=r.get(t);if(o)return o;const a=new Proxy(t,i===2?s:n);return r.set(t,a),a}function mr(t){return xr(t)?mr(t.__v_raw):!!(t&&t.__v_isReactive)}function xr(t){return!!(t&&t.__v_isReadonly)}function Mn(t){return!!(t&&t.__v_isShallow)}function fl(t){return t?!!t.__v_raw:!1}function Ue(t){const e=t&&t.__v_raw;return e?Ue(e):t}function gp(t){return!Xe(t,"__v_skip")&&Object.isExtensible(t)&&Ib(t,"__v_skip",!0),t}const zt=t=>ot(t)?_o(t):t,Wc=t=>ot(t)?Gb(t):t;function lt(t){return t?t.__v_isRef===!0:!1}function z(t){return Yb(t,!1)}function mp(t){return Yb(t,!0)}function Yb(t,e){return lt(t)?t:new MI(t,e)}class MI{constructor(e,n){this.dep=new hp,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Ue(e),this._value=n?e:zt(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||Mn(e)||xr(e);e=s?e:Ue(e),gr(e,n)&&(this._rawValue=e,this._value=s?e:zt(e),this.dep.trigger())}}function be(t){return lt(t)?t.value:t}const NI={get:(t,e,n)=>e==="__v_raw"?t:be(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return lt(r)&&!lt(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function Qb(t){return mr(t)?t:new Proxy(t,NI)}function LI(t){const e=Ee(t)?new Array(t.length):{};for(const n in t)e[n]=$I(t,n);return e}class VI{constructor(e,n,s){this._object=e,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return yI(Ue(this._object),this._key)}}function $I(t,e,n){const s=t[e];return lt(s)?s:new VI(t,e,n)}class FI{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new hp(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ma-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&at!==this)return Nb(this,!0),!0}get value(){const e=this.dep.track();return $b(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function UI(t,e,n=!1){let s,r;return De(t)?s=t:(s=t.get,r=t.set),new FI(s,r,n)}const Yl={},Kc=new WeakMap;let Gr;function BI(t,e=!1,n=Gr){if(n){let s=Kc.get(n);s||Kc.set(n,s=[]),s.push(t)}}function jI(t,e,n=rt){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:a,call:l}=n,c=F=>r?F:Mn(F)||r===!1||r===0?Ss(F,1):Ss(F);let u,h,p,g,y=!1,v=!1;if(lt(t)?(h=()=>t.value,y=Mn(t)):mr(t)?(h=()=>c(t),y=!0):Ee(t)?(v=!0,y=t.some(F=>mr(F)||Mn(F)),h=()=>t.map(F=>{if(lt(F))return F.value;if(mr(F))return c(F);if(De(F))return l?l(F,2):F()})):De(t)?e?h=l?()=>l(t,2):t:h=()=>{if(p){Fs();try{p()}finally{Us()}}const F=Gr;Gr=u;try{return l?l(t,3,[g]):t(g)}finally{Gr=F}}:h=as,e&&r){const F=h,M=r===!0?1/0:r;h=()=>Ss(F(),M)}const _=Ob(),E=()=>{u.stop(),_&&_.active&&op(_.effects,u)};if(i&&e){const F=e;e=(...M)=>{F(...M),E()}}let S=v?new Array(t.length).fill(Yl):Yl;const D=F=>{if(!(!(u.flags&1)||!u.dirty&&!F))if(e){const M=u.run();if(r||y||(v?M.some((O,T)=>gr(O,S[T])):gr(M,S))){p&&p();const O=Gr;Gr=u;try{const T=[M,S===Yl?void 0:v&&S[0]===Yl?[]:S,g];S=M,l?l(e,3,T):e(...T)}finally{Gr=O}}}else u.run()};return a&&a(D),u=new Db(h),u.scheduler=o?()=>o(D,!1):D,g=F=>BI(F,!1,u),p=u.onStop=()=>{const F=Kc.get(u);if(F){if(l)l(F,4);else for(const M of F)M();Kc.delete(u)}},e?s?D(!0):S=u.run():o?o(D.bind(null,!0),!0):u.run(),E.pause=u.pause.bind(u),E.resume=u.resume.bind(u),E.stop=E,E}function Ss(t,e=1/0,n){if(e<=0||!ot(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,lt(t))Ss(t.value,e,n);else if(Ee(t))for(let s=0;s<t.length;s++)Ss(t[s],e,n);else if(yo(t)||Gi(t))t.forEach(s=>{Ss(s,e,n)});else if(kb(t)){for(const s in t)Ss(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&Ss(t[s],e,n)}return t}/**
* @vue/runtime-core v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function pl(t,e,n,s){try{return s?t(...s):t()}catch(r){Fu(r,e,n)}}function Kn(t,e,n,s){if(De(t)){const r=pl(t,e,n,s);return r&&Eb(r)&&r.catch(i=>{Fu(i,e,n)}),r}if(Ee(t)){const r=[];for(let i=0;i<t.length;i++)r.push(Kn(t[i],e,n,s));return r}}function Fu(t,e,n,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||rt;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const u=a.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](t,l,c)===!1)return}a=a.parent}if(i){Fs(),pl(i,null,10,[t,l,c]),Us();return}}zI(t,n,r,s,o)}function zI(t,e,n,s=!0,r=!1){if(r)throw t;console.error(t)}const pn=[];let ns=-1;const Yi=[];let rr=null,Bi=0;const Xb=Promise.resolve();let Gc=null;function An(t){const e=Gc||Xb;return t?e.then(this?t.bind(this):t):e}function HI(t){let e=ns+1,n=pn.length;for(;e<n;){const s=e+n>>>1,r=pn[s],i=La(r);i<t||i===t&&r.flags&2?e=s+1:n=s}return e}function yp(t){if(!(t.flags&1)){const e=La(t),n=pn[pn.length-1];!n||!(t.flags&2)&&e>=La(n)?pn.push(t):pn.splice(HI(e),0,t),t.flags|=1,Jb()}}function Jb(){Gc||(Gc=Xb.then(ex))}function qI(t){Ee(t)?Yi.push(...t):rr&&t.id===-1?rr.splice(Bi+1,0,t):t.flags&1||(Yi.push(t),t.flags|=1),Jb()}function Ym(t,e,n=ns+1){for(;n<pn.length;n++){const s=pn[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;pn.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function Zb(t){if(Yi.length){const e=[...new Set(Yi)].sort((n,s)=>La(n)-La(s));if(Yi.length=0,rr){rr.push(...e);return}for(rr=e,Bi=0;Bi<rr.length;Bi++){const n=rr[Bi];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}rr=null,Bi=0}}const La=t=>t.id==null?t.flags&2?-1:1/0:t.id;function ex(t){try{for(ns=0;ns<pn.length;ns++){const e=pn[ns];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),pl(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;ns<pn.length;ns++){const e=pn[ns];e&&(e.flags&=-2)}ns=-1,pn.length=0,Zb(),Gc=null,(pn.length||Yi.length)&&ex()}}let At=null,tx=null;function Yc(t){const e=At;return At=t,tx=t&&t.type.__scopeId||null,e}function _e(t,e=At,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&o0(-1);const i=Yc(e);let o;try{o=t(...r)}finally{Yc(i),s._d&&o0(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Ie(t,e){if(At===null)return t;const n=Hu(At),s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,a,l=rt]=e[r];i&&(De(i)&&(i={mounted:i,updated:i}),i.deep&&Ss(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Br(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let l=a.dir[s];l&&(Fs(),Kn(l,n,8,[t.el,a,t,e]),Us())}}const WI=Symbol("_vte"),nx=t=>t.__isTeleport,ir=Symbol("_leaveCb"),Ql=Symbol("_enterCb");function KI(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return pt(()=>{t.isMounted=!0}),ux(()=>{t.isUnmounting=!0}),t}const Rn=[Function,Array],sx={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Rn,onEnter:Rn,onAfterEnter:Rn,onEnterCancelled:Rn,onBeforeLeave:Rn,onLeave:Rn,onAfterLeave:Rn,onLeaveCancelled:Rn,onBeforeAppear:Rn,onAppear:Rn,onAfterAppear:Rn,onAppearCancelled:Rn},rx=t=>{const e=t.subTree;return e.component?rx(e.component):e},GI={name:"BaseTransition",props:sx,setup(t,{slots:e}){const n=Dx(),s=KI();return()=>{const r=e.default&&ax(e.default(),!0);if(!r||!r.length)return;const i=ix(r),o=Ue(t),{mode:a}=o;if(s.isLeaving)return sh(i);const l=Qm(i);if(!l)return sh(i);let c=Zh(l,o,s,n,h=>c=h);l.type!==on&&Va(l,c);let u=n.subTree&&Qm(n.subTree);if(u&&u.type!==on&&!Jr(l,u)&&rx(n).type!==on){let h=Zh(u,o,s,n);if(Va(u,h),a==="out-in"&&l.type!==on)return s.isLeaving=!0,h.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete h.afterLeave,u=void 0},sh(i);a==="in-out"&&l.type!==on?h.delayLeave=(p,g,y)=>{const v=ox(s,u);v[String(u.key)]=u,p[ir]=()=>{g(),p[ir]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{y(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return i}}};function ix(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==on){e=n;break}}return e}const YI=GI;function ox(t,e){const{leavingVNodes:n}=t;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function Zh(t,e,n,s,r){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:h,onBeforeLeave:p,onLeave:g,onAfterLeave:y,onLeaveCancelled:v,onBeforeAppear:_,onAppear:E,onAfterAppear:S,onAppearCancelled:D}=e,F=String(t.key),M=ox(n,t),O=(w,C)=>{w&&Kn(w,s,9,C)},T=(w,C)=>{const k=C[1];O(w,C),Ee(w)?w.every(A=>A.length<=1)&&k():w.length<=1&&k()},b={mode:o,persisted:a,beforeEnter(w){let C=l;if(!n.isMounted)if(i)C=_||l;else return;w[ir]&&w[ir](!0);const k=M[F];k&&Jr(t,k)&&k.el[ir]&&k.el[ir](),O(C,[w])},enter(w){let C=c,k=u,A=h;if(!n.isMounted)if(i)C=E||c,k=S||u,A=D||h;else return;let I=!1;const V=w[Ql]=Y=>{I||(I=!0,Y?O(A,[w]):O(k,[w]),b.delayedLeave&&b.delayedLeave(),w[Ql]=void 0)};C?T(C,[w,V]):V()},leave(w,C){const k=String(t.key);if(w[Ql]&&w[Ql](!0),n.isUnmounting)return C();O(p,[w]);let A=!1;const I=w[ir]=V=>{A||(A=!0,C(),V?O(v,[w]):O(y,[w]),w[ir]=void 0,M[k]===t&&delete M[k])};M[k]=t,g?T(g,[w,I]):I()},clone(w){const C=Zh(w,e,n,s,r);return r&&r(C),C}};return b}function sh(t){if(Uu(t))return t=Bs(t),t.children=null,t}function Qm(t){if(!Uu(t))return nx(t.type)&&t.children?ix(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&De(n.default))return n.default()}}function Va(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Va(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function ax(t,e=!1,n){let s=[],r=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===pe?(o.patchFlag&128&&r++,s=s.concat(ax(o.children,e,a))):(e||o.type!==on)&&s.push(a!=null?Bs(o,{key:a}):o)}if(r>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function Rr(t,e){return De(t)?Lt({name:t.name},e,{setup:t}):t}function QI(){const t=Dx();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function lx(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Qc(t,e,n,s,r=!1){if(Ee(t)){t.forEach((y,v)=>Qc(y,e&&(Ee(e)?e[v]:e),n,s,r));return}if(Qi(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Qc(t,e,n,s.component.subTree);return}const i=s.shapeFlag&4?Hu(s.component):s.el,o=r?null:i,{i:a,r:l}=t,c=e&&e.r,u=a.refs===rt?a.refs={}:a.refs,h=a.setupState,p=Ue(h),g=h===rt?()=>!1:y=>Xe(p,y);if(c!=null&&c!==l&&(_t(c)?(u[c]=null,g(c)&&(h[c]=null)):lt(c)&&(c.value=null)),De(l))pl(l,a,12,[o,u]);else{const y=_t(l),v=lt(l);if(y||v){const _=()=>{if(t.f){const E=y?g(l)?h[l]:u[l]:l.value;r?Ee(E)&&op(E,i):Ee(E)?E.includes(i)||E.push(i):y?(u[l]=[i],g(l)&&(h[l]=u[l])):(l.value=[i],t.k&&(u[t.k]=l.value))}else y?(u[l]=o,g(l)&&(h[l]=o)):v&&(l.value=o,t.k&&(u[t.k]=o))};o?(_.id=-1,wn(_,n)):_()}}}Vu().requestIdleCallback;Vu().cancelIdleCallback;const Qi=t=>!!t.type.__asyncLoader,Uu=t=>t.type.__isKeepAlive;function XI(t,e){cx(t,"a",e)}function JI(t,e){cx(t,"da",e)}function cx(t,e,n=Mt){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(Bu(e,s,n),n){let r=n.parent;for(;r&&r.parent;)Uu(r.parent.vnode)&&ZI(s,e,n,r),r=r.parent}}function ZI(t,e,n,s){const r=Bu(e,t,s,!0);Ti(()=>{op(s[e],r)},n)}function Bu(t,e,n=Mt,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Fs();const a=yl(n),l=Kn(e,n,t,o);return a(),Us(),l});return s?r.unshift(i):r.push(i),i}}const Ws=t=>(e,n=Mt)=>{(!Ua||t==="sp")&&Bu(t,(...s)=>e(...s),n)},eS=Ws("bm"),pt=Ws("m"),tS=Ws("bu"),nS=Ws("u"),ux=Ws("bum"),Ti=Ws("um"),sS=Ws("sp"),rS=Ws("rtg"),iS=Ws("rtc");function oS(t,e=Mt){Bu("ec",t,e)}const dx="components";function gl(t,e){return fx(dx,t,!0,e)||t}const hx=Symbol.for("v-ndc");function aS(t){return _t(t)?fx(dx,t,!1)||t:t||hx}function fx(t,e,n=!0,s=!1){const r=At||Mt;if(r){const i=r.type;{const a=GS(i,!1);if(a&&(a===e||a===Vn(e)||a===Lu(Vn(e))))return i}const o=Xm(r[t]||i[t],e)||Xm(r.appContext[t],e);return!o&&s?i:o}}function Xm(t,e){return t&&(t[e]||t[Vn(e)]||t[Lu(Vn(e))])}function Ce(t,e,n,s){let r;const i=n,o=Ee(t);if(o||_t(t)){const a=o&&mr(t);let l=!1,c=!1;a&&(l=!Mn(t),c=xr(t),t=$u(t)),r=new Array(t.length);for(let u=0,h=t.length;u<h;u++)r[u]=e(l?c?Wc(zt(t[u])):zt(t[u]):t[u],u,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let a=0;a<t;a++)r[a]=e(a+1,a,void 0,i)}else if(ot(t))if(t[Symbol.iterator])r=Array.from(t,(a,l)=>e(a,l,void 0,i));else{const a=Object.keys(t);r=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];r[l]=e(t[u],u,l,i)}}else r=[];return r}function vp(t,e,n={},s,r){if(At.ce||At.parent&&Qi(At.parent)&&At.parent.ce)return R(),qe(pe,null,[ue("slot",n,s)],64);let i=t[e];i&&i._c&&(i._d=!1),R();const o=i&&px(i(n)),a=n.key||o&&o.key,l=qe(pe,{key:(a&&!Wn(a)?a:`_${e}`)+""},o||[],o&&t._===1?64:-2);return!r&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),i&&i._c&&(i._d=!0),l}function px(t){return t.some(e=>Fa(e)?!(e.type===on||e.type===pe&&!px(e.children)):!0)?t:null}const ef=t=>t?Mx(t)?Hu(t):ef(t.parent):null,va=Lt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>ef(t.parent),$root:t=>ef(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>mx(t),$forceUpdate:t=>t.f||(t.f=()=>{yp(t.update)}),$nextTick:t=>t.n||(t.n=An.bind(t.proxy)),$watch:t=>CS.bind(t)}),rh=(t,e)=>t!==rt&&!t.__isScriptSetup&&Xe(t,e),lS={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const g=o[e];if(g!==void 0)switch(g){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(rh(s,e))return o[e]=1,s[e];if(r!==rt&&Xe(r,e))return o[e]=2,r[e];if((c=t.propsOptions[0])&&Xe(c,e))return o[e]=3,i[e];if(n!==rt&&Xe(n,e))return o[e]=4,n[e];tf&&(o[e]=0)}}const u=va[e];let h,p;if(u)return e==="$attrs"&&sn(t.attrs,"get",""),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==rt&&Xe(n,e))return o[e]=4,n[e];if(p=l.config.globalProperties,Xe(p,e))return p[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return rh(r,e)?(r[e]=n,!0):s!==rt&&Xe(s,e)?(s[e]=n,!0):Xe(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,propsOptions:i}},o){let a;return!!n[o]||t!==rt&&Xe(t,o)||rh(e,o)||(a=i[0])&&Xe(a,o)||Xe(s,o)||Xe(va,o)||Xe(r.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Xe(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Jm(t){return Ee(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let tf=!0;function cS(t){const e=mx(t),n=t.proxy,s=t.ctx;tf=!1,e.beforeCreate&&Zm(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:p,beforeUpdate:g,updated:y,activated:v,deactivated:_,beforeDestroy:E,beforeUnmount:S,destroyed:D,unmounted:F,render:M,renderTracked:O,renderTriggered:T,errorCaptured:b,serverPrefetch:w,expose:C,inheritAttrs:k,components:A,directives:I,filters:V}=e;if(c&&uS(c,s,null),o)for(const ee in o){const we=o[ee];De(we)&&(s[ee]=we.bind(n))}if(r){const ee=r.call(n,n);ot(ee)&&(t.data=_o(ee))}if(tf=!0,i)for(const ee in i){const we=i[ee],Ve=De(we)?we.bind(n,n):De(we.get)?we.get.bind(n,n):as,ht=!De(we)&&De(we.set)?we.set.bind(n):as,Vt=me({get:Ve,set:ht});Object.defineProperty(s,ee,{enumerable:!0,configurable:!0,get:()=>Vt.value,set:Ye=>Vt.value=Ye})}if(a)for(const ee in a)gx(a[ee],s,n,ee);if(l){const ee=De(l)?l.call(n):l;Reflect.ownKeys(ee).forEach(we=>{Ms(we,ee[we])})}u&&Zm(u,t,"c");function de(ee,we){Ee(we)?we.forEach(Ve=>ee(Ve.bind(n))):we&&ee(we.bind(n))}if(de(eS,h),de(pt,p),de(tS,g),de(nS,y),de(XI,v),de(JI,_),de(oS,b),de(iS,O),de(rS,T),de(ux,S),de(Ti,F),de(sS,w),Ee(C))if(C.length){const ee=t.exposed||(t.exposed={});C.forEach(we=>{Object.defineProperty(ee,we,{get:()=>n[we],set:Ve=>n[we]=Ve})})}else t.exposed||(t.exposed={});M&&t.render===as&&(t.render=M),k!=null&&(t.inheritAttrs=k),A&&(t.components=A),I&&(t.directives=I),w&&lx(t)}function uS(t,e,n=as){Ee(t)&&(t=nf(t));for(const s in t){const r=t[s];let i;ot(r)?"default"in r?i=Nt(r.from||s,r.default,!0):i=Nt(r.from||s):i=Nt(r),lt(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function Zm(t,e,n){Kn(Ee(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function gx(t,e,n,s){let r=s.includes(".")?Ax(n,s):()=>n[s];if(_t(t)){const i=e[t];De(i)&&Pt(r,i)}else if(De(t))Pt(r,t.bind(n));else if(ot(t))if(Ee(t))t.forEach(i=>gx(i,e,n,s));else{const i=De(t.handler)?t.handler.bind(n):e[t.handler];De(i)&&Pt(r,i,t)}}function mx(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!r.length&&!n&&!s?l=e:(l={},r.length&&r.forEach(c=>Xc(l,c,o,!0)),Xc(l,e,o)),ot(e)&&i.set(e,l),l}function Xc(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&Xc(t,i,n,!0),r&&r.forEach(o=>Xc(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const a=dS[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const dS={data:e0,props:t0,emits:t0,methods:na,computed:na,beforeCreate:fn,created:fn,beforeMount:fn,mounted:fn,beforeUpdate:fn,updated:fn,beforeDestroy:fn,beforeUnmount:fn,destroyed:fn,unmounted:fn,activated:fn,deactivated:fn,errorCaptured:fn,serverPrefetch:fn,components:na,directives:na,watch:fS,provide:e0,inject:hS};function e0(t,e){return e?t?function(){return Lt(De(t)?t.call(this,this):t,De(e)?e.call(this,this):e)}:e:t}function hS(t,e){return na(nf(t),nf(e))}function nf(t){if(Ee(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function fn(t,e){return t?[...new Set([].concat(t,e))]:e}function na(t,e){return t?Lt(Object.create(null),t,e):e}function t0(t,e){return t?Ee(t)&&Ee(e)?[...new Set([...t,...e])]:Lt(Object.create(null),Jm(t),Jm(e??{})):e}function fS(t,e){if(!t)return e;if(!e)return t;const n=Lt(Object.create(null),t);for(const s in e)n[s]=fn(t[s],e[s]);return n}function yx(){return{app:null,config:{isNativeTag:tI,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let pS=0;function gS(t,e){return function(s,r=null){De(s)||(s=Lt({},s)),r!=null&&!ot(r)&&(r=null);const i=yx(),o=new WeakSet,a=[];let l=!1;const c=i.app={_uid:pS++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:Lx,get config(){return i.config},set config(u){},use(u,...h){return o.has(u)||(u&&De(u.install)?(o.add(u),u.install(c,...h)):De(u)&&(o.add(u),u(c,...h))),c},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),c},component(u,h){return h?(i.components[u]=h,c):i.components[u]},directive(u,h){return h?(i.directives[u]=h,c):i.directives[u]},mount(u,h,p){if(!l){const g=c._ceVNode||ue(s,r);return g.appContext=i,p===!0?p="svg":p===!1&&(p=void 0),t(g,u,p),l=!0,c._container=u,u.__vue_app__=c,Hu(g.component)}},onUnmount(u){a.push(u)},unmount(){l&&(Kn(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(u,h){return i.provides[u]=h,c},runWithContext(u){const h=ii;ii=c;try{return u()}finally{ii=h}}};return c}}let ii=null;function Ms(t,e){if(Mt){let n=Mt.provides;const s=Mt.parent&&Mt.parent.provides;s===n&&(n=Mt.provides=Object.create(s)),n[t]=e}}function Nt(t,e,n=!1){const s=Mt||At;if(s||ii){let r=ii?ii._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return n&&De(e)?e.call(s&&s.proxy):e}}function mS(){return!!(Mt||At||ii)}const vx={},_x=()=>Object.create(vx),bx=t=>Object.getPrototypeOf(t)===vx;function yS(t,e,n,s=!1){const r={},i=_x();t.propsDefaults=Object.create(null),xx(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:Kb(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function vS(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,a=Ue(r),[l]=t.propsOptions;let c=!1;if((s||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let h=0;h<u.length;h++){let p=u[h];if(ju(t.emitsOptions,p))continue;const g=e[p];if(l)if(Xe(i,p))g!==i[p]&&(i[p]=g,c=!0);else{const y=Vn(p);r[y]=sf(l,a,y,g,t,!1)}else g!==i[p]&&(i[p]=g,c=!0)}}}else{xx(t,e,r,i)&&(c=!0);let u;for(const h in a)(!e||!Xe(e,h)&&((u=Pr(h))===h||!Xe(e,u)))&&(l?n&&(n[h]!==void 0||n[u]!==void 0)&&(r[h]=sf(l,a,h,void 0,t,!0)):delete r[h]);if(i!==a)for(const h in i)(!e||!Xe(e,h))&&(delete i[h],c=!0)}c&&Is(t.attrs,"set","")}function xx(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(ga(l))continue;const c=e[l];let u;r&&Xe(r,u=Vn(l))?!i||!i.includes(u)?n[u]=c:(a||(a={}))[u]=c:ju(t.emitsOptions,l)||(!(l in s)||c!==s[l])&&(s[l]=c,o=!0)}if(i){const l=Ue(n),c=a||rt;for(let u=0;u<i.length;u++){const h=i[u];n[h]=sf(r,l,h,c[h],t,!Xe(c,h))}}return o}function sf(t,e,n,s,r,i){const o=t[n];if(o!=null){const a=Xe(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&De(l)){const{propsDefaults:c}=r;if(n in c)s=c[n];else{const u=yl(r);s=c[n]=l.call(null,e),u()}}else s=l;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===Pr(n))&&(s=!0))}return s}const _S=new WeakMap;function wx(t,e,n=!1){const s=n?_S:e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},a=[];let l=!1;if(!De(t)){const u=h=>{l=!0;const[p,g]=wx(h,e,!0);Lt(o,p),g&&a.push(...g)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!l)return ot(t)&&s.set(t,Ki),Ki;if(Ee(i))for(let u=0;u<i.length;u++){const h=Vn(i[u]);n0(h)&&(o[h]=rt)}else if(i)for(const u in i){const h=Vn(u);if(n0(h)){const p=i[u],g=o[h]=Ee(p)||De(p)?{type:p}:Lt({},p),y=g.type;let v=!1,_=!0;if(Ee(y))for(let E=0;E<y.length;++E){const S=y[E],D=De(S)&&S.name;if(D==="Boolean"){v=!0;break}else D==="String"&&(_=!1)}else v=De(y)&&y.name==="Boolean";g[0]=v,g[1]=_,(v||Xe(g,"default"))&&a.push(h)}}const c=[o,a];return ot(t)&&s.set(t,c),c}function n0(t){return t[0]!=="$"&&!ga(t)}const _p=t=>t[0]==="_"||t==="$stable",bp=t=>Ee(t)?t.map(is):[is(t)],bS=(t,e,n)=>{if(e._n)return e;const s=_e((...r)=>bp(e(...r)),n);return s._c=!1,s},Ex=(t,e,n)=>{const s=t._ctx;for(const r in t){if(_p(r))continue;const i=t[r];if(De(i))e[r]=bS(r,i,s);else if(i!=null){const o=bp(i);e[r]=()=>o}}},Tx=(t,e)=>{const n=bp(e);t.slots.default=()=>n},kx=(t,e,n)=>{for(const s in e)(n||!_p(s))&&(t[s]=e[s])},xS=(t,e,n)=>{const s=t.slots=_x();if(t.vnode.shapeFlag&32){const r=e._;r?(kx(s,e,n),n&&Ib(s,"_",r,!0)):Ex(e,s)}else e&&Tx(t,e)},wS=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=rt;if(s.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:kx(r,e,n):(i=!e.$stable,Ex(e,r)),o=e}else e&&(Tx(t,e),o={default:1});if(i)for(const a in r)!_p(a)&&o[a]==null&&delete r[a]},wn=LS;function ES(t){return TS(t)}function TS(t,e){const n=Vu();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:p,setScopeId:g=as,insertStaticContent:y}=t,v=(L,$,B,K=null,J=null,Q=null,le=void 0,ie=null,se=!!$.dynamicChildren)=>{if(L===$)return;L&&!Jr(L,$)&&(K=W(L),Ye(L,J,Q,!0),L=null),$.patchFlag===-2&&(se=!1,$.dynamicChildren=null);const{type:te,ref:Te,shapeFlag:ae}=$;switch(te){case zu:_(L,$,B,K);break;case on:E(L,$,B,K);break;case xc:L==null&&S($,B,K,le);break;case pe:A(L,$,B,K,J,Q,le,ie,se);break;default:ae&1?M(L,$,B,K,J,Q,le,ie,se):ae&6?I(L,$,B,K,J,Q,le,ie,se):(ae&64||ae&128)&&te.process(L,$,B,K,J,Q,le,ie,se,ve)}Te!=null&&J&&Qc(Te,L&&L.ref,Q,$||L,!$)},_=(L,$,B,K)=>{if(L==null)s($.el=a($.children),B,K);else{const J=$.el=L.el;$.children!==L.children&&c(J,$.children)}},E=(L,$,B,K)=>{L==null?s($.el=l($.children||""),B,K):$.el=L.el},S=(L,$,B,K)=>{[L.el,L.anchor]=y(L.children,$,B,K,L.el,L.anchor)},D=({el:L,anchor:$},B,K)=>{let J;for(;L&&L!==$;)J=p(L),s(L,B,K),L=J;s($,B,K)},F=({el:L,anchor:$})=>{let B;for(;L&&L!==$;)B=p(L),r(L),L=B;r($)},M=(L,$,B,K,J,Q,le,ie,se)=>{$.type==="svg"?le="svg":$.type==="math"&&(le="mathml"),L==null?O($,B,K,J,Q,le,ie,se):w(L,$,J,Q,le,ie,se)},O=(L,$,B,K,J,Q,le,ie)=>{let se,te;const{props:Te,shapeFlag:ae,transition:xe,dirs:Re}=L;if(se=L.el=o(L.type,Q,Te&&Te.is,Te),ae&8?u(se,L.children):ae&16&&b(L.children,se,null,K,J,ih(L,Q),le,ie),Re&&Br(L,null,K,"created"),T(se,L,L.scopeId,le,K),Te){for(const Ne in Te)Ne!=="value"&&!ga(Ne)&&i(se,Ne,null,Te[Ne],Q,K);"value"in Te&&i(se,"value",null,Te.value,Q),(te=Te.onVnodeBeforeMount)&&Jn(te,K,L)}Re&&Br(L,null,K,"beforeMount");const Se=kS(J,xe);Se&&xe.beforeEnter(se),s(se,$,B),((te=Te&&Te.onVnodeMounted)||Se||Re)&&wn(()=>{te&&Jn(te,K,L),Se&&xe.enter(se),Re&&Br(L,null,K,"mounted")},J)},T=(L,$,B,K,J)=>{if(B&&g(L,B),K)for(let Q=0;Q<K.length;Q++)g(L,K[Q]);if(J){let Q=J.subTree;if($===Q||Px(Q.type)&&(Q.ssContent===$||Q.ssFallback===$)){const le=J.vnode;T(L,le,le.scopeId,le.slotScopeIds,J.parent)}}},b=(L,$,B,K,J,Q,le,ie,se=0)=>{for(let te=se;te<L.length;te++){const Te=L[te]=ie?or(L[te]):is(L[te]);v(null,Te,$,B,K,J,Q,le,ie)}},w=(L,$,B,K,J,Q,le)=>{const ie=$.el=L.el;let{patchFlag:se,dynamicChildren:te,dirs:Te}=$;se|=L.patchFlag&16;const ae=L.props||rt,xe=$.props||rt;let Re;if(B&&jr(B,!1),(Re=xe.onVnodeBeforeUpdate)&&Jn(Re,B,$,L),Te&&Br($,L,B,"beforeUpdate"),B&&jr(B,!0),(ae.innerHTML&&xe.innerHTML==null||ae.textContent&&xe.textContent==null)&&u(ie,""),te?C(L.dynamicChildren,te,ie,B,K,ih($,J),Q):le||we(L,$,ie,null,B,K,ih($,J),Q,!1),se>0){if(se&16)k(ie,ae,xe,B,J);else if(se&2&&ae.class!==xe.class&&i(ie,"class",null,xe.class,J),se&4&&i(ie,"style",ae.style,xe.style,J),se&8){const Se=$.dynamicProps;for(let Ne=0;Ne<Se.length;Ne++){const ze=Se[Ne],Yt=ae[ze],$t=xe[ze];($t!==Yt||ze==="value")&&i(ie,ze,Yt,$t,J,B)}}se&1&&L.children!==$.children&&u(ie,$.children)}else!le&&te==null&&k(ie,ae,xe,B,J);((Re=xe.onVnodeUpdated)||Te)&&wn(()=>{Re&&Jn(Re,B,$,L),Te&&Br($,L,B,"updated")},K)},C=(L,$,B,K,J,Q,le)=>{for(let ie=0;ie<$.length;ie++){const se=L[ie],te=$[ie],Te=se.el&&(se.type===pe||!Jr(se,te)||se.shapeFlag&198)?h(se.el):B;v(se,te,Te,null,K,J,Q,le,!0)}},k=(L,$,B,K,J)=>{if($!==B){if($!==rt)for(const Q in $)!ga(Q)&&!(Q in B)&&i(L,Q,$[Q],null,J,K);for(const Q in B){if(ga(Q))continue;const le=B[Q],ie=$[Q];le!==ie&&Q!=="value"&&i(L,Q,ie,le,J,K)}"value"in B&&i(L,"value",$.value,B.value,J)}},A=(L,$,B,K,J,Q,le,ie,se)=>{const te=$.el=L?L.el:a(""),Te=$.anchor=L?L.anchor:a("");let{patchFlag:ae,dynamicChildren:xe,slotScopeIds:Re}=$;Re&&(ie=ie?ie.concat(Re):Re),L==null?(s(te,B,K),s(Te,B,K),b($.children||[],B,Te,J,Q,le,ie,se)):ae>0&&ae&64&&xe&&L.dynamicChildren?(C(L.dynamicChildren,xe,B,J,Q,le,ie),($.key!=null||J&&$===J.subTree)&&Ix(L,$,!0)):we(L,$,B,Te,J,Q,le,ie,se)},I=(L,$,B,K,J,Q,le,ie,se)=>{$.slotScopeIds=ie,L==null?$.shapeFlag&512?J.ctx.activate($,B,K,le,se):V($,B,K,J,Q,le,se):Y(L,$,se)},V=(L,$,B,K,J,Q,le)=>{const ie=L.component=zS(L,K,J);if(Uu(L)&&(ie.ctx.renderer=ve),HS(ie,!1,le),ie.asyncDep){if(J&&J.registerDep(ie,de,le),!L.el){const se=ie.subTree=ue(on);E(null,se,$,B)}}else de(ie,L,$,B,J,Q,le)},Y=(L,$,B)=>{const K=$.component=L.component;if(MS(L,$,B))if(K.asyncDep&&!K.asyncResolved){ee(K,$,B);return}else K.next=$,K.update();else $.el=L.el,K.vnode=$},de=(L,$,B,K,J,Q,le)=>{const ie=()=>{if(L.isMounted){let{next:ae,bu:xe,u:Re,parent:Se,vnode:Ne}=L;{const Qt=Sx(L);if(Qt){ae&&(ae.el=Ne.el,ee(L,ae,le)),Qt.asyncDep.then(()=>{L.isUnmounted||ie()});return}}let ze=ae,Yt;jr(L,!1),ae?(ae.el=Ne.el,ee(L,ae,le)):ae=Ne,xe&&bc(xe),(Yt=ae.props&&ae.props.onVnodeBeforeUpdate)&&Jn(Yt,Se,ae,Ne),jr(L,!0);const $t=r0(L),Cn=L.subTree;L.subTree=$t,v(Cn,$t,h(Cn.el),W(Cn),L,J,Q),ae.el=$t.el,ze===null&&NS(L,$t.el),Re&&wn(Re,J),(Yt=ae.props&&ae.props.onVnodeUpdated)&&wn(()=>Jn(Yt,Se,ae,Ne),J)}else{let ae;const{el:xe,props:Re}=$,{bm:Se,m:Ne,parent:ze,root:Yt,type:$t}=L,Cn=Qi($);jr(L,!1),Se&&bc(Se),!Cn&&(ae=Re&&Re.onVnodeBeforeMount)&&Jn(ae,ze,$),jr(L,!0);{Yt.ce&&Yt.ce._injectChildStyle($t);const Qt=L.subTree=r0(L);v(null,Qt,B,K,L,J,Q),$.el=Qt.el}if(Ne&&wn(Ne,J),!Cn&&(ae=Re&&Re.onVnodeMounted)){const Qt=$;wn(()=>Jn(ae,ze,Qt),J)}($.shapeFlag&256||ze&&Qi(ze.vnode)&&ze.vnode.shapeFlag&256)&&L.a&&wn(L.a,J),L.isMounted=!0,$=B=K=null}};L.scope.on();const se=L.effect=new Db(ie);L.scope.off();const te=L.update=se.run.bind(se),Te=L.job=se.runIfDirty.bind(se);Te.i=L,Te.id=L.uid,se.scheduler=()=>yp(Te),jr(L,!0),te()},ee=(L,$,B)=>{$.component=L;const K=L.vnode.props;L.vnode=$,L.next=null,vS(L,$.props,K,B),wS(L,$.children,B),Fs(),Ym(L),Us()},we=(L,$,B,K,J,Q,le,ie,se=!1)=>{const te=L&&L.children,Te=L?L.shapeFlag:0,ae=$.children,{patchFlag:xe,shapeFlag:Re}=$;if(xe>0){if(xe&128){ht(te,ae,B,K,J,Q,le,ie,se);return}else if(xe&256){Ve(te,ae,B,K,J,Q,le,ie,se);return}}Re&8?(Te&16&&gt(te,J,Q),ae!==te&&u(B,ae)):Te&16?Re&16?ht(te,ae,B,K,J,Q,le,ie,se):gt(te,J,Q,!0):(Te&8&&u(B,""),Re&16&&b(ae,B,K,J,Q,le,ie,se))},Ve=(L,$,B,K,J,Q,le,ie,se)=>{L=L||Ki,$=$||Ki;const te=L.length,Te=$.length,ae=Math.min(te,Te);let xe;for(xe=0;xe<ae;xe++){const Re=$[xe]=se?or($[xe]):is($[xe]);v(L[xe],Re,B,null,J,Q,le,ie,se)}te>Te?gt(L,J,Q,!0,!1,ae):b($,B,K,J,Q,le,ie,se,ae)},ht=(L,$,B,K,J,Q,le,ie,se)=>{let te=0;const Te=$.length;let ae=L.length-1,xe=Te-1;for(;te<=ae&&te<=xe;){const Re=L[te],Se=$[te]=se?or($[te]):is($[te]);if(Jr(Re,Se))v(Re,Se,B,null,J,Q,le,ie,se);else break;te++}for(;te<=ae&&te<=xe;){const Re=L[ae],Se=$[xe]=se?or($[xe]):is($[xe]);if(Jr(Re,Se))v(Re,Se,B,null,J,Q,le,ie,se);else break;ae--,xe--}if(te>ae){if(te<=xe){const Re=xe+1,Se=Re<Te?$[Re].el:K;for(;te<=xe;)v(null,$[te]=se?or($[te]):is($[te]),B,Se,J,Q,le,ie,se),te++}}else if(te>xe)for(;te<=ae;)Ye(L[te],J,Q,!0),te++;else{const Re=te,Se=te,Ne=new Map;for(te=Se;te<=xe;te++){const Ft=$[te]=se?or($[te]):is($[te]);Ft.key!=null&&Ne.set(Ft.key,te)}let ze,Yt=0;const $t=xe-Se+1;let Cn=!1,Qt=0;const Gs=new Array($t);for(te=0;te<$t;te++)Gs[te]=0;for(te=Re;te<=ae;te++){const Ft=L[te];if(Yt>=$t){Ye(Ft,J,Q,!0);continue}let Pn;if(Ft.key!=null)Pn=Ne.get(Ft.key);else for(ze=Se;ze<=xe;ze++)if(Gs[ze-Se]===0&&Jr(Ft,$[ze])){Pn=ze;break}Pn===void 0?Ye(Ft,J,Q,!0):(Gs[Pn-Se]=te+1,Pn>=Qt?Qt=Pn:Cn=!0,v(Ft,$[Pn],B,null,J,Q,le,ie,se),Yt++)}const Do=Cn?IS(Gs):Ki;for(ze=Do.length-1,te=$t-1;te>=0;te--){const Ft=Se+te,Pn=$[Ft],Rl=Ft+1<Te?$[Ft+1].el:K;Gs[te]===0?v(null,Pn,B,Rl,J,Q,le,ie,se):Cn&&(ze<0||te!==Do[ze]?Vt(Pn,B,Rl,2):ze--)}}},Vt=(L,$,B,K,J=null)=>{const{el:Q,type:le,transition:ie,children:se,shapeFlag:te}=L;if(te&6){Vt(L.component.subTree,$,B,K);return}if(te&128){L.suspense.move($,B,K);return}if(te&64){le.move(L,$,B,ve);return}if(le===pe){s(Q,$,B);for(let ae=0;ae<se.length;ae++)Vt(se[ae],$,B,K);s(L.anchor,$,B);return}if(le===xc){D(L,$,B);return}if(K!==2&&te&1&&ie)if(K===0)ie.beforeEnter(Q),s(Q,$,B),wn(()=>ie.enter(Q),J);else{const{leave:ae,delayLeave:xe,afterLeave:Re}=ie,Se=()=>{L.ctx.isUnmounted?r(Q):s(Q,$,B)},Ne=()=>{ae(Q,()=>{Se(),Re&&Re()})};xe?xe(Q,Se,Ne):Ne()}else s(Q,$,B)},Ye=(L,$,B,K=!1,J=!1)=>{const{type:Q,props:le,ref:ie,children:se,dynamicChildren:te,shapeFlag:Te,patchFlag:ae,dirs:xe,cacheIndex:Re}=L;if(ae===-2&&(J=!1),ie!=null&&(Fs(),Qc(ie,null,B,L,!0),Us()),Re!=null&&($.renderCache[Re]=void 0),Te&256){$.ctx.deactivate(L);return}const Se=Te&1&&xe,Ne=!Qi(L);let ze;if(Ne&&(ze=le&&le.onVnodeBeforeUnmount)&&Jn(ze,$,L),Te&6)Gt(L.component,B,K);else{if(Te&128){L.suspense.unmount(B,K);return}Se&&Br(L,null,$,"beforeUnmount"),Te&64?L.type.remove(L,$,B,ve,K):te&&!te.hasOnce&&(Q!==pe||ae>0&&ae&64)?gt(te,$,B,!1,!0):(Q===pe&&ae&384||!J&&Te&16)&&gt(se,$,B),K&&tt(L)}(Ne&&(ze=le&&le.onVnodeUnmounted)||Se)&&wn(()=>{ze&&Jn(ze,$,L),Se&&Br(L,null,$,"unmounted")},B)},tt=L=>{const{type:$,el:B,anchor:K,transition:J}=L;if($===pe){Kt(B,K);return}if($===xc){F(L);return}const Q=()=>{r(B),J&&!J.persisted&&J.afterLeave&&J.afterLeave()};if(L.shapeFlag&1&&J&&!J.persisted){const{leave:le,delayLeave:ie}=J,se=()=>le(B,Q);ie?ie(L.el,Q,se):se()}else Q()},Kt=(L,$)=>{let B;for(;L!==$;)B=p(L),r(L),L=B;r($)},Gt=(L,$,B)=>{const{bum:K,scope:J,job:Q,subTree:le,um:ie,m:se,a:te,parent:Te,slots:{__:ae}}=L;s0(se),s0(te),K&&bc(K),Te&&Ee(ae)&&ae.forEach(xe=>{Te.renderCache[xe]=void 0}),J.stop(),Q&&(Q.flags|=8,Ye(le,L,$,B)),ie&&wn(ie,$),wn(()=>{L.isUnmounted=!0},$),$&&$.pendingBranch&&!$.isUnmounted&&L.asyncDep&&!L.asyncResolved&&L.suspenseId===$.pendingId&&($.deps--,$.deps===0&&$.resolve())},gt=(L,$,B,K=!1,J=!1,Q=0)=>{for(let le=Q;le<L.length;le++)Ye(L[le],$,B,K,J)},W=L=>{if(L.shapeFlag&6)return W(L.component.subTree);if(L.shapeFlag&128)return L.suspense.next();const $=p(L.anchor||L.el),B=$&&$[WI];return B?p(B):$};let he=!1;const ce=(L,$,B)=>{L==null?$._vnode&&Ye($._vnode,null,null,!0):v($._vnode||null,L,$,null,null,null,B),$._vnode=L,he||(he=!0,Ym(),Zb(),he=!1)},ve={p:v,um:Ye,m:Vt,r:tt,mt:V,mc:b,pc:we,pbc:C,n:W,o:t};return{render:ce,hydrate:void 0,createApp:gS(ce)}}function ih({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function jr({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function kS(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Ix(t,e,n=!1){const s=t.children,r=e.children;if(Ee(s)&&Ee(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=or(r[i]),a.el=o.el),!n&&a.patchFlag!==-2&&Ix(o,a)),a.type===zu&&(a.el=o.el),a.type===on&&!a.el&&(a.el=o.el)}}function IS(t){const e=t.slice(),n=[0];let s,r,i,o,a;const l=t.length;for(s=0;s<l;s++){const c=t[s];if(c!==0){if(r=n[n.length-1],t[r]<c){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<c?i=a+1:o=a;c<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function Sx(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Sx(e)}function s0(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const SS=Symbol.for("v-scx"),AS=()=>Nt(SS);function ml(t,e){return xp(t,null,e)}function Pt(t,e,n){return xp(t,e,n)}function xp(t,e,n=rt){const{immediate:s,deep:r,flush:i,once:o}=n,a=Lt({},n),l=e&&s||!e&&i!=="post";let c;if(Ua){if(i==="sync"){const g=AS();c=g.__watcherHandles||(g.__watcherHandles=[])}else if(!l){const g=()=>{};return g.stop=as,g.resume=as,g.pause=as,g}}const u=Mt;a.call=(g,y,v)=>Kn(g,u,y,v);let h=!1;i==="post"?a.scheduler=g=>{wn(g,u&&u.suspense)}:i!=="sync"&&(h=!0,a.scheduler=(g,y)=>{y?g():yp(g)}),a.augmentJob=g=>{e&&(g.flags|=4),h&&(g.flags|=2,u&&(g.id=u.uid,g.i=u))};const p=jI(t,e,a);return Ua&&(c?c.push(p):l&&p()),p}function CS(t,e,n){const s=this.proxy,r=_t(t)?t.includes(".")?Ax(s,t):()=>s[t]:t.bind(s,s);let i;De(e)?i=e:(i=e.handler,n=e);const o=yl(this),a=xp(r,i.bind(s),n);return o(),a}function Ax(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const PS=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Vn(e)}Modifiers`]||t[`${Pr(e)}Modifiers`];function RS(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||rt;let r=n;const i=e.startsWith("update:"),o=i&&PS(s,e.slice(7));o&&(o.trim&&(r=n.map(u=>_t(u)?u.trim():u)),o.number&&(r=n.map(Hc)));let a,l=s[a=Jd(e)]||s[a=Jd(Vn(e))];!l&&i&&(l=s[a=Jd(Pr(e))]),l&&Kn(l,t,6,r);const c=s[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Kn(c,t,6,r)}}function Cx(t,e,n=!1){const s=e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},a=!1;if(!De(t)){const l=c=>{const u=Cx(c,e,!0);u&&(a=!0,Lt(o,u))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(ot(t)&&s.set(t,null),null):(Ee(i)?i.forEach(l=>o[l]=null):Lt(o,i),ot(t)&&s.set(t,o),o)}function ju(t,e){return!t||!Mu(e)?!1:(e=e.slice(2).replace(/Once$/,""),Xe(t,e[0].toLowerCase()+e.slice(1))||Xe(t,Pr(e))||Xe(t,e))}function r0(t){const{type:e,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:h,data:p,setupState:g,ctx:y,inheritAttrs:v}=t,_=Yc(t);let E,S;try{if(n.shapeFlag&4){const F=r||s,M=F;E=is(c.call(M,F,u,h,g,p,y)),S=a}else{const F=e;E=is(F.length>1?F(h,{attrs:a,slots:o,emit:l}):F(h,null)),S=e.props?a:OS(a)}}catch(F){_a.length=0,Fu(F,t,1),E=ue(on)}let D=E;if(S&&v!==!1){const F=Object.keys(S),{shapeFlag:M}=D;F.length&&M&7&&(i&&F.some(ip)&&(S=DS(S,i)),D=Bs(D,S,!1,!0))}return n.dirs&&(D=Bs(D,null,!1,!0),D.dirs=D.dirs?D.dirs.concat(n.dirs):n.dirs),n.transition&&Va(D,n.transition),E=D,Yc(_),E}const OS=t=>{let e;for(const n in t)(n==="class"||n==="style"||Mu(n))&&((e||(e={}))[n]=t[n]);return e},DS=(t,e)=>{const n={};for(const s in t)(!ip(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function MS(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:a,patchFlag:l}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?i0(s,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const p=u[h];if(o[p]!==s[p]&&!ju(c,p))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?i0(s,o,c):!0:!!o;return!1}function i0(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!ju(n,i))return!0}return!1}function NS({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const Px=t=>t.__isSuspense;function LS(t,e){e&&e.pendingBranch?Ee(t)?e.effects.push(...t):e.effects.push(t):qI(t)}const pe=Symbol.for("v-fgt"),zu=Symbol.for("v-txt"),on=Symbol.for("v-cmt"),xc=Symbol.for("v-stc"),_a=[];let In=null;function R(t=!1){_a.push(In=t?null:[])}function VS(){_a.pop(),In=_a[_a.length-1]||null}let $a=1;function o0(t,e=!1){$a+=t,t<0&&In&&e&&(In.hasOnce=!0)}function Rx(t){return t.dynamicChildren=$a>0?In||Ki:null,VS(),$a>0&&In&&In.push(t),t}function N(t,e,n,s,r,i){return Rx(f(t,e,n,s,r,i,!0))}function qe(t,e,n,s,r){return Rx(ue(t,e,n,s,r,!0))}function Fa(t){return t?t.__v_isVNode===!0:!1}function Jr(t,e){return t.type===e.type&&t.key===e.key}const Ox=({key:t})=>t??null,wc=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?_t(t)||lt(t)||De(t)?{i:At,r:t,k:e,f:!!n}:t:null);function f(t,e=null,n=null,s=0,r=null,i=t===pe?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Ox(e),ref:e&&wc(e),scopeId:tx,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:At};return a?(wp(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=_t(n)?8:16),$a>0&&!o&&In&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&In.push(l),l}const ue=$S;function $S(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===hx)&&(t=on),Fa(t)){const a=Bs(t,e,!0);return n&&wp(a,n),$a>0&&!i&&In&&(a.shapeFlag&6?In[In.indexOf(t)]=a:In.push(a)),a.patchFlag=-2,a}if(YS(t)&&(t=t.__vccOpts),e){e=FS(e);let{class:a,style:l}=e;a&&!_t(a)&&(e.class=re(a)),ot(l)&&(fl(l)&&!Ee(l)&&(l=Lt({},l)),e.style=vo(l))}const o=_t(t)?1:Px(t)?128:nx(t)?64:ot(t)?4:De(t)?2:0;return f(t,e,n,s,r,o,i,!0)}function FS(t){return t?fl(t)||bx(t)?Lt({},t):t:null}function Bs(t,e,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:a,transition:l}=t,c=e?US(r||{},e):r,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&Ox(c),ref:e&&e.ref?n&&i?Ee(i)?i.concat(wc(e)):[i,wc(e)]:wc(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==pe?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Bs(t.ssContent),ssFallback:t.ssFallback&&Bs(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&s&&Va(u,l.clone(u)),u}function G(t=" ",e=0){return ue(zu,null,t,e)}function Jc(t,e){const n=ue(xc,null,t);return n.staticCount=e,n}function ne(t="",e=!1){return e?(R(),qe(on,null,t)):ue(on,null,t)}function is(t){return t==null||typeof t=="boolean"?ue(on):Ee(t)?ue(pe,null,t.slice()):Fa(t)?or(t):ue(zu,null,String(t))}function or(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Bs(t)}function wp(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(Ee(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),wp(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!bx(e)?e._ctx=At:r===3&&At&&(At.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else De(e)?(e={default:e,_ctx:At},n=32):(e=String(e),s&64?(n=16,e=[G(e)]):n=8);t.children=e,t.shapeFlag|=n}function US(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=re([e.class,s.class]));else if(r==="style")e.style=vo([e.style,s.style]);else if(Mu(r)){const i=e[r],o=s[r];o&&i!==o&&!(Ee(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function Jn(t,e,n,s=null){Kn(t,e,7,[n,s])}const BS=yx();let jS=0;function zS(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||BS,i={uid:jS++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Pb(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:wx(s,r),emitsOptions:Cx(s,r),emit:null,emitted:null,propsDefaults:rt,inheritAttrs:s.inheritAttrs,ctx:rt,data:rt,props:rt,attrs:rt,slots:rt,refs:rt,setupState:rt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=RS.bind(null,i),t.ce&&t.ce(i),i}let Mt=null;const Dx=()=>Mt||At;let Zc,rf;{const t=Vu(),e=(n,s)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};Zc=e("__VUE_INSTANCE_SETTERS__",n=>Mt=n),rf=e("__VUE_SSR_SETTERS__",n=>Ua=n)}const yl=t=>{const e=Mt;return Zc(t),t.scope.on(),()=>{t.scope.off(),Zc(e)}},a0=()=>{Mt&&Mt.scope.off(),Zc(null)};function Mx(t){return t.vnode.shapeFlag&4}let Ua=!1;function HS(t,e=!1,n=!1){e&&rf(e);const{props:s,children:r}=t.vnode,i=Mx(t);yS(t,s,i,e),xS(t,r,n||e);const o=i?qS(t,e):void 0;return e&&rf(!1),o}function qS(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,lS);const{setup:s}=n;if(s){Fs();const r=t.setupContext=s.length>1?KS(t):null,i=yl(t),o=pl(s,t,0,[t.props,r]),a=Eb(o);if(Us(),i(),(a||t.sp)&&!Qi(t)&&lx(t),a){if(o.then(a0,a0),e)return o.then(l=>{l0(t,l)}).catch(l=>{Fu(l,t,0)});t.asyncDep=o}else l0(t,o)}else Nx(t)}function l0(t,e,n){De(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ot(e)&&(t.setupState=Qb(e)),Nx(t)}function Nx(t,e,n){const s=t.type;t.render||(t.render=s.render||as);{const r=yl(t);Fs();try{cS(t)}finally{Us(),r()}}}const WS={get(t,e){return sn(t,"get",""),t[e]}};function KS(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,WS),slots:t.slots,emit:t.emit,expose:e}}function Hu(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Qb(gp(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in va)return va[n](t)},has(e,n){return n in e||n in va}})):t.proxy}function GS(t,e=!0){return De(t)?t.displayName||t.name:t.name||e&&t.__name}function YS(t){return De(t)&&"__vccOpts"in t}const me=(t,e)=>UI(t,e,Ua);function hi(t,e,n){const s=arguments.length;return s===2?ot(e)&&!Ee(e)?Fa(e)?ue(t,null,[e]):ue(t,e):ue(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Fa(n)&&(n=[n]),ue(t,e,n))}const Lx="3.5.16";/**
* @vue/runtime-dom v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let of;const c0=typeof window<"u"&&window.trustedTypes;if(c0)try{of=c0.createPolicy("vue",{createHTML:t=>t})}catch{}const Vx=of?t=>of.createHTML(t):t=>t,QS="http://www.w3.org/2000/svg",XS="http://www.w3.org/1998/Math/MathML",Es=typeof document<"u"?document:null,u0=Es&&Es.createElement("template"),JS={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e==="svg"?Es.createElementNS(QS,t):e==="mathml"?Es.createElementNS(XS,t):n?Es.createElement(t,{is:n}):Es.createElement(t);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>Es.createTextNode(t),createComment:t=>Es.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Es.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{u0.innerHTML=Vx(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const a=u0.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Js="transition",Ko="animation",Ba=Symbol("_vtc"),$x={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},ZS=Lt({},sx,$x),eA=t=>(t.displayName="Transition",t.props=ZS,t),bo=eA((t,{slots:e})=>hi(YI,tA(t),e)),zr=(t,e=[])=>{Ee(t)?t.forEach(n=>n(...e)):t&&t(...e)},d0=t=>t?Ee(t)?t.some(e=>e.length>1):t.length>1:!1;function tA(t){const e={};for(const A in t)A in $x||(e[A]=t[A]);if(t.css===!1)return e;const{name:n="v",type:s,duration:r,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:g=`${n}-leave-to`}=t,y=nA(r),v=y&&y[0],_=y&&y[1],{onBeforeEnter:E,onEnter:S,onEnterCancelled:D,onLeave:F,onLeaveCancelled:M,onBeforeAppear:O=E,onAppear:T=S,onAppearCancelled:b=D}=e,w=(A,I,V,Y)=>{A._enterCancelled=Y,Hr(A,I?u:a),Hr(A,I?c:o),V&&V()},C=(A,I)=>{A._isLeaving=!1,Hr(A,h),Hr(A,g),Hr(A,p),I&&I()},k=A=>(I,V)=>{const Y=A?T:S,de=()=>w(I,A,V);zr(Y,[I,de]),h0(()=>{Hr(I,A?l:i),vs(I,A?u:a),d0(Y)||f0(I,s,v,de)})};return Lt(e,{onBeforeEnter(A){zr(E,[A]),vs(A,i),vs(A,o)},onBeforeAppear(A){zr(O,[A]),vs(A,l),vs(A,c)},onEnter:k(!1),onAppear:k(!0),onLeave(A,I){A._isLeaving=!0;const V=()=>C(A,I);vs(A,h),A._enterCancelled?(vs(A,p),m0()):(m0(),vs(A,p)),h0(()=>{A._isLeaving&&(Hr(A,h),vs(A,g),d0(F)||f0(A,s,_,V))}),zr(F,[A,V])},onEnterCancelled(A){w(A,!1,void 0,!0),zr(D,[A])},onAppearCancelled(A){w(A,!0,void 0,!0),zr(b,[A])},onLeaveCancelled(A){C(A),zr(M,[A])}})}function nA(t){if(t==null)return null;if(ot(t))return[oh(t.enter),oh(t.leave)];{const e=oh(t);return[e,e]}}function oh(t){return oI(t)}function vs(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Ba]||(t[Ba]=new Set)).add(e)}function Hr(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.remove(s));const n=t[Ba];n&&(n.delete(e),n.size||(t[Ba]=void 0))}function h0(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let sA=0;function f0(t,e,n,s){const r=t._endId=++sA,i=()=>{r===t._endId&&s()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:a,propCount:l}=rA(t,e);if(!o)return s();const c=o+"end";let u=0;const h=()=>{t.removeEventListener(c,p),i()},p=g=>{g.target===t&&++u>=l&&h()};setTimeout(()=>{u<l&&h()},a+1),t.addEventListener(c,p)}function rA(t,e){const n=window.getComputedStyle(t),s=y=>(n[y]||"").split(", "),r=s(`${Js}Delay`),i=s(`${Js}Duration`),o=p0(r,i),a=s(`${Ko}Delay`),l=s(`${Ko}Duration`),c=p0(a,l);let u=null,h=0,p=0;e===Js?o>0&&(u=Js,h=o,p=i.length):e===Ko?c>0&&(u=Ko,h=c,p=l.length):(h=Math.max(o,c),u=h>0?o>c?Js:Ko:null,p=u?u===Js?i.length:l.length:0);const g=u===Js&&/\b(transform|all)(,|$)/.test(s(`${Js}Property`).toString());return{type:u,timeout:h,propCount:p,hasTransform:g}}function p0(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,s)=>g0(n)+g0(t[s])))}function g0(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function m0(){return document.body.offsetHeight}function iA(t,e,n){const s=t[Ba];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const eu=Symbol("_vod"),Fx=Symbol("_vsh"),oA={beforeMount(t,{value:e},{transition:n}){t[eu]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Go(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:s}){!e!=!n&&(s?e?(s.beforeEnter(t),Go(t,!0),s.enter(t)):s.leave(t,()=>{Go(t,!1)}):Go(t,e))},beforeUnmount(t,{value:e}){Go(t,e)}};function Go(t,e){t.style.display=e?t[eu]:"none",t[Fx]=!e}const aA=Symbol(""),lA=/(^|;)\s*display\s*:/;function cA(t,e,n){const s=t.style,r=_t(n);let i=!1;if(n&&!r){if(e)if(_t(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Ec(s,a,"")}else for(const o in e)n[o]==null&&Ec(s,o,"");for(const o in n)o==="display"&&(i=!0),Ec(s,o,n[o])}else if(r){if(e!==n){const o=s[aA];o&&(n+=";"+o),s.cssText=n,i=lA.test(n)}}else e&&t.removeAttribute("style");eu in t&&(t[eu]=i?s.display:"",t[Fx]&&(s.display="none"))}const y0=/\s*!important$/;function Ec(t,e,n){if(Ee(n))n.forEach(s=>Ec(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=uA(t,e);y0.test(n)?t.setProperty(Pr(s),n.replace(y0,""),"important"):t[s]=n}}const v0=["Webkit","Moz","ms"],ah={};function uA(t,e){const n=ah[e];if(n)return n;let s=Vn(e);if(s!=="filter"&&s in t)return ah[e]=s;s=Lu(s);for(let r=0;r<v0.length;r++){const i=v0[r]+s;if(i in t)return ah[e]=i}return e}const _0="http://www.w3.org/1999/xlink";function b0(t,e,n,s,r,i=hI(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(_0,e.slice(6,e.length)):t.setAttributeNS(_0,e,n):n==null||i&&!Sb(n)?t.removeAttribute(e):t.setAttribute(e,i?"":Wn(n)?String(n):n)}function x0(t,e,n,s,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Vx(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=Sb(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(r||e)}function As(t,e,n,s){t.addEventListener(e,n,s)}function dA(t,e,n,s){t.removeEventListener(e,n,s)}const w0=Symbol("_vei");function hA(t,e,n,s,r=null){const i=t[w0]||(t[w0]={}),o=i[e];if(s&&o)o.value=s;else{const[a,l]=fA(e);if(s){const c=i[e]=mA(s,r);As(t,a,c,l)}else o&&(dA(t,a,o,l),i[e]=void 0)}}const E0=/(?:Once|Passive|Capture)$/;function fA(t){let e;if(E0.test(t)){e={};let s;for(;s=t.match(E0);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Pr(t.slice(2)),e]}let lh=0;const pA=Promise.resolve(),gA=()=>lh||(pA.then(()=>lh=0),lh=Date.now());function mA(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Kn(yA(s,n.value),e,5,[s])};return n.value=t,n.attached=gA(),n}function yA(t,e){if(Ee(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const T0=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,vA=(t,e,n,s,r,i)=>{const o=r==="svg";e==="class"?iA(t,s,o):e==="style"?cA(t,n,s):Mu(e)?ip(e)||hA(t,e,n,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):_A(t,e,s,o))?(x0(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&b0(t,e,s,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!_t(s))?x0(t,Vn(e),s,i,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),b0(t,e,s,o))};function _A(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&T0(e)&&De(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return T0(e)&&_t(n)?!1:e in t}const wr=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Ee(e)?n=>bc(e,n):e};function bA(t){t.target.composing=!0}function k0(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Nn=Symbol("_assign"),Je={created(t,{modifiers:{lazy:e,trim:n,number:s}},r){t[Nn]=wr(r);const i=s||r.props&&r.props.type==="number";As(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),i&&(a=Hc(a)),t[Nn](a)}),n&&As(t,"change",()=>{t.value=t.value.trim()}),e||(As(t,"compositionstart",bA),As(t,"compositionend",k0),As(t,"change",k0))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:s,trim:r,number:i}},o){if(t[Nn]=wr(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?Hc(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(s&&e===n||r&&t.value.trim()===l)||(t.value=l))}},tu={deep:!0,created(t,e,n){t[Nn]=wr(n),As(t,"change",()=>{const s=t._modelValue,r=ro(t),i=t.checked,o=t[Nn];if(Ee(s)){const a=lp(s,r),l=a!==-1;if(i&&!l)o(s.concat(r));else if(!i&&l){const c=[...s];c.splice(a,1),o(c)}}else if(yo(s)){const a=new Set(s);i?a.add(r):a.delete(r),o(a)}else o(Ux(t,i))})},mounted:I0,beforeUpdate(t,e,n){t[Nn]=wr(n),I0(t,e,n)}};function I0(t,{value:e,oldValue:n},s){t._modelValue=e;let r;if(Ee(e))r=lp(e,s.props.value)>-1;else if(yo(e))r=e.has(s.props.value);else{if(e===n)return;r=di(e,Ux(t,!0))}t.checked!==r&&(t.checked=r)}const Cs={created(t,{value:e},n){t.checked=di(e,n.props.value),t[Nn]=wr(n),As(t,"change",()=>{t[Nn](ro(t))})},beforeUpdate(t,{value:e,oldValue:n},s){t[Nn]=wr(s),e!==n&&(t.checked=di(e,s.props.value))}},Ns={deep:!0,created(t,{value:e,modifiers:{number:n}},s){const r=yo(e);As(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?Hc(ro(o)):ro(o));t[Nn](t.multiple?r?new Set(i):i:i[0]),t._assigning=!0,An(()=>{t._assigning=!1})}),t[Nn]=wr(s)},mounted(t,{value:e}){S0(t,e)},beforeUpdate(t,e,n){t[Nn]=wr(n)},updated(t,{value:e}){t._assigning||S0(t,e)}};function S0(t,e){const n=t.multiple,s=Ee(e);if(!(n&&!s&&!yo(e))){for(let r=0,i=t.options.length;r<i;r++){const o=t.options[r],a=ro(o);if(n)if(s){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=lp(e,a)>-1}else o.selected=e.has(a);else if(di(ro(o),e)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function ro(t){return"_value"in t?t._value:t.value}function Ux(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const xA=["ctrl","shift","alt","meta"],wA={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>xA.some(n=>t[`${n}Key`]&&!e.includes(n))},os=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=(r,...i)=>{for(let o=0;o<e.length;o++){const a=wA[e[o]];if(a&&a(r,e))return}return t(r,...i)})},EA={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},ch=(t,e)=>{const n=t._withKeys||(t._withKeys={}),s=e.join(".");return n[s]||(n[s]=r=>{if(!("key"in r))return;const i=Pr(r.key);if(e.some(o=>o===i||EA[o]===i))return t(r)})},TA=Lt({patchProp:vA},JS);let A0;function kA(){return A0||(A0=ES(TA))}const IA=(...t)=>{const e=kA().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=AA(s);if(!r)return;const i=e._component;!De(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,SA(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function SA(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function AA(t){return _t(t)?document.querySelector(t):t}/*!
 * pinia v3.0.2
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Bx;const qu=t=>Bx=t,jx=Symbol();function af(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var ba;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(ba||(ba={}));function CA(){const t=Rb(!0),e=t.run(()=>z({}));let n=[],s=[];const r=gp({install(i){qu(r),r._a=i,i.provide(jx,r),i.config.globalProperties.$pinia=r,s.forEach(o=>n.push(o)),s=[]},use(i){return this._a?n.push(i):s.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return r}const zx=()=>{};function C0(t,e,n,s=zx){t.push(e);const r=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),s())};return!n&&Ob()&&pI(r),r}function Vi(t,...e){t.slice().forEach(n=>{n(...e)})}const PA=t=>t(),P0=Symbol(),uh=Symbol();function lf(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,s)=>t.set(s,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const s=e[n],r=t[n];af(r)&&af(s)&&t.hasOwnProperty(n)&&!lt(s)&&!mr(s)?t[n]=lf(r,s):t[n]=s}return t}const RA=Symbol();function OA(t){return!af(t)||!Object.prototype.hasOwnProperty.call(t,RA)}const{assign:nr}=Object;function DA(t){return!!(lt(t)&&t.effect)}function MA(t,e,n,s){const{state:r,actions:i,getters:o}=e,a=n.state.value[t];let l;function c(){a||(n.state.value[t]=r?r():{});const u=LI(n.state.value[t]);return nr(u,i,Object.keys(o||{}).reduce((h,p)=>(h[p]=gp(me(()=>{qu(n);const g=n._s.get(t);return o[p].call(g,g)})),h),{}))}return l=Hx(t,c,e,n,s,!0),l}function Hx(t,e,n={},s,r,i){let o;const a=nr({actions:{}},n),l={deep:!0};let c,u,h=[],p=[],g;const y=s.state.value[t];!i&&!y&&(s.state.value[t]={}),z({});let v;function _(b){let w;c=u=!1,typeof b=="function"?(b(s.state.value[t]),w={type:ba.patchFunction,storeId:t,events:g}):(lf(s.state.value[t],b),w={type:ba.patchObject,payload:b,storeId:t,events:g});const C=v=Symbol();An().then(()=>{v===C&&(c=!0)}),u=!0,Vi(h,w,s.state.value[t])}const E=i?function(){const{state:w}=n,C=w?w():{};this.$patch(k=>{nr(k,C)})}:zx;function S(){o.stop(),h=[],p=[],s._s.delete(t)}const D=(b,w="")=>{if(P0 in b)return b[uh]=w,b;const C=function(){qu(s);const k=Array.from(arguments),A=[],I=[];function V(ee){A.push(ee)}function Y(ee){I.push(ee)}Vi(p,{args:k,name:C[uh],store:M,after:V,onError:Y});let de;try{de=b.apply(this&&this.$id===t?this:M,k)}catch(ee){throw Vi(I,ee),ee}return de instanceof Promise?de.then(ee=>(Vi(A,ee),ee)).catch(ee=>(Vi(I,ee),Promise.reject(ee))):(Vi(A,de),de)};return C[P0]=!0,C[uh]=w,C},F={_p:s,$id:t,$onAction:C0.bind(null,p),$patch:_,$reset:E,$subscribe(b,w={}){const C=C0(h,b,w.detached,()=>k()),k=o.run(()=>Pt(()=>s.state.value[t],A=>{(w.flush==="sync"?u:c)&&b({storeId:t,type:ba.direct,events:g},A)},nr({},l,w)));return C},$dispose:S},M=_o(F);s._s.set(t,M);const T=(s._a&&s._a.runWithContext||PA)(()=>s._e.run(()=>(o=Rb()).run(()=>e({action:D}))));for(const b in T){const w=T[b];if(lt(w)&&!DA(w)||mr(w))i||(y&&OA(w)&&(lt(w)?w.value=y[b]:lf(w,y[b])),s.state.value[t][b]=w);else if(typeof w=="function"){const C=D(w,b);T[b]=C,a.actions[b]=w}}return nr(M,T),nr(Ue(M),T),Object.defineProperty(M,"$state",{get:()=>s.state.value[t],set:b=>{_(w=>{nr(w,b)})}}),s._p.forEach(b=>{nr(M,o.run(()=>b({store:M,app:s._a,pinia:s,options:a})))}),y&&i&&n.hydrate&&n.hydrate(M.$state,y),c=!0,u=!0,M}/*! #__NO_SIDE_EFFECTS__ */function Wu(t,e,n){let s;const r=typeof e=="function";s=r?n:e;function i(o,a){const l=mS();return o=o||(l?Nt(jx,null):null),o&&qu(o),o=Bx,o._s.has(t)||(r?Hx(t,e,s,o):MA(t,s,o)),o._s.get(t)}return i.$id=t,i}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const ji=typeof document<"u";function qx(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function NA(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&qx(t.default)}const Qe=Object.assign;function dh(t,e){const n={};for(const s in e){const r=e[s];n[s]=Gn(r)?r.map(t):t(r)}return n}const xa=()=>{},Gn=Array.isArray,Wx=/#/g,LA=/&/g,VA=/\//g,$A=/=/g,FA=/\?/g,Kx=/\+/g,UA=/%5B/g,BA=/%5D/g,Gx=/%5E/g,jA=/%60/g,Yx=/%7B/g,zA=/%7C/g,Qx=/%7D/g,HA=/%20/g;function Ep(t){return encodeURI(""+t).replace(zA,"|").replace(UA,"[").replace(BA,"]")}function qA(t){return Ep(t).replace(Yx,"{").replace(Qx,"}").replace(Gx,"^")}function cf(t){return Ep(t).replace(Kx,"%2B").replace(HA,"+").replace(Wx,"%23").replace(LA,"%26").replace(jA,"`").replace(Yx,"{").replace(Qx,"}").replace(Gx,"^")}function WA(t){return cf(t).replace($A,"%3D")}function KA(t){return Ep(t).replace(Wx,"%23").replace(FA,"%3F")}function GA(t){return t==null?"":KA(t).replace(VA,"%2F")}function ja(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const YA=/\/$/,QA=t=>t.replace(YA,"");function hh(t,e,n="/"){let s,r={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(s=e.slice(0,l),i=e.slice(l+1,a>-1?a:e.length),r=t(i)),a>-1&&(s=s||e.slice(0,a),o=e.slice(a,e.length)),s=e2(s??e,n),{fullPath:s+(i&&"?")+i+o,path:s,query:r,hash:ja(o)}}function XA(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function R0(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function JA(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&io(e.matched[s],n.matched[r])&&Xx(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function io(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Xx(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!ZA(t[n],e[n]))return!1;return!0}function ZA(t,e){return Gn(t)?O0(t,e):Gn(e)?O0(e,t):t===e}function O0(t,e){return Gn(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function e2(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const Zs={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var za;(function(t){t.pop="pop",t.push="push"})(za||(za={}));var wa;(function(t){t.back="back",t.forward="forward",t.unknown=""})(wa||(wa={}));function t2(t){if(!t)if(ji){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),QA(t)}const n2=/^[^#]+#/;function s2(t,e){return t.replace(n2,"#")+e}function r2(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const Ku=()=>({left:window.scrollX,top:window.scrollY});function i2(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=r2(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function D0(t,e){return(history.state?history.state.position-e:-1)+t}const uf=new Map;function o2(t,e){uf.set(t,e)}function a2(t){const e=uf.get(t);return uf.delete(t),e}let l2=()=>location.protocol+"//"+location.host;function Jx(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let a=r.includes(t.slice(i))?t.slice(i).length:1,l=r.slice(a);return l[0]!=="/"&&(l="/"+l),R0(l,"")}return R0(n,t)+s+r}function c2(t,e,n,s){let r=[],i=[],o=null;const a=({state:p})=>{const g=Jx(t,location),y=n.value,v=e.value;let _=0;if(p){if(n.value=g,e.value=p,o&&o===y){o=null;return}_=v?p.position-v.position:0}else s(g);r.forEach(E=>{E(n.value,y,{delta:_,type:za.pop,direction:_?_>0?wa.forward:wa.back:wa.unknown})})};function l(){o=n.value}function c(p){r.push(p);const g=()=>{const y=r.indexOf(p);y>-1&&r.splice(y,1)};return i.push(g),g}function u(){const{history:p}=window;p.state&&p.replaceState(Qe({},p.state,{scroll:Ku()}),"")}function h(){for(const p of i)p();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:h}}function M0(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?Ku():null}}function u2(t){const{history:e,location:n}=window,s={value:Jx(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,c,u){const h=t.indexOf("#"),p=h>-1?(n.host&&document.querySelector("base")?t:t.slice(h))+l:l2()+t+l;try{e[u?"replaceState":"pushState"](c,"",p),r.value=c}catch(g){console.error(g),n[u?"replace":"assign"](p)}}function o(l,c){const u=Qe({},e.state,M0(r.value.back,l,r.value.forward,!0),c,{position:r.value.position});i(l,u,!0),s.value=l}function a(l,c){const u=Qe({},r.value,e.state,{forward:l,scroll:Ku()});i(u.current,u,!0);const h=Qe({},M0(s.value,l,null),{position:u.position+1},c);i(l,h,!1),s.value=l}return{location:s,state:r,push:a,replace:o}}function d2(t){t=t2(t);const e=u2(t),n=c2(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=Qe({location:"",base:t,go:s,createHref:s2.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function h2(t){return typeof t=="string"||t&&typeof t=="object"}function Zx(t){return typeof t=="string"||typeof t=="symbol"}const ew=Symbol("");var N0;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(N0||(N0={}));function oo(t,e){return Qe(new Error,{type:t,[ew]:!0},e)}function _s(t,e){return t instanceof Error&&ew in t&&(e==null||!!(t.type&e))}const L0="[^/]+?",f2={sensitive:!1,strict:!1,start:!0,end:!0},p2=/[.+*?^${}()[\]/\\]/g;function g2(t,e){const n=Qe({},f2,e),s=[];let r=n.start?"^":"";const i=[];for(const c of t){const u=c.length?[]:[90];n.strict&&!c.length&&(r+="/");for(let h=0;h<c.length;h++){const p=c[h];let g=40+(n.sensitive?.25:0);if(p.type===0)h||(r+="/"),r+=p.value.replace(p2,"\\$&"),g+=40;else if(p.type===1){const{value:y,repeatable:v,optional:_,regexp:E}=p;i.push({name:y,repeatable:v,optional:_});const S=E||L0;if(S!==L0){g+=10;try{new RegExp(`(${S})`)}catch(F){throw new Error(`Invalid custom RegExp for param "${y}" (${S}): `+F.message)}}let D=v?`((?:${S})(?:/(?:${S}))*)`:`(${S})`;h||(D=_&&c.length<2?`(?:/${D})`:"/"+D),_&&(D+="?"),r+=D,g+=20,_&&(g+=-8),v&&(g+=-20),S===".*"&&(g+=-50)}u.push(g)}s.push(u)}if(n.strict&&n.end){const c=s.length-1;s[c][s[c].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function a(c){const u=c.match(o),h={};if(!u)return null;for(let p=1;p<u.length;p++){const g=u[p]||"",y=i[p-1];h[y.name]=g&&y.repeatable?g.split("/"):g}return h}function l(c){let u="",h=!1;for(const p of t){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const g of p)if(g.type===0)u+=g.value;else if(g.type===1){const{value:y,repeatable:v,optional:_}=g,E=y in c?c[y]:"";if(Gn(E)&&!v)throw new Error(`Provided param "${y}" is an array but it is not repeatable (* or + modifiers)`);const S=Gn(E)?E.join("/"):E;if(!S)if(_)p.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${y}"`);u+=S}}return u||"/"}return{re:o,score:s,keys:i,parse:a,stringify:l}}function m2(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function tw(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=m2(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(V0(s))return 1;if(V0(r))return-1}return r.length-s.length}function V0(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const y2={type:0,value:""},v2=/[a-zA-Z0-9_]/;function _2(t){if(!t)return[[]];if(t==="/")return[[y2]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(g){throw new Error(`ERR (${n})/"${c}": ${g}`)}let n=0,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let a=0,l,c="",u="";function h(){c&&(n===0?i.push({type:0,value:c}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function p(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:l==="/"?(c&&h(),o()):l===":"?(h(),n=1):p();break;case 4:p(),n=s;break;case 1:l==="("?n=2:v2.test(l)?p():(h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),h(),o(),r}function b2(t,e,n){const s=g2(_2(t.path),n),r=Qe(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function x2(t,e){const n=[],s=new Map;e=B0({strict:!1,end:!0,sensitive:!1},e);function r(h){return s.get(h)}function i(h,p,g){const y=!g,v=F0(h);v.aliasOf=g&&g.record;const _=B0(e,h),E=[v];if("alias"in h){const F=typeof h.alias=="string"?[h.alias]:h.alias;for(const M of F)E.push(F0(Qe({},v,{components:g?g.record.components:v.components,path:M,aliasOf:g?g.record:v})))}let S,D;for(const F of E){const{path:M}=F;if(p&&M[0]!=="/"){const O=p.record.path,T=O[O.length-1]==="/"?"":"/";F.path=p.record.path+(M&&T+M)}if(S=b2(F,p,_),g?g.alias.push(S):(D=D||S,D!==S&&D.alias.push(S),y&&h.name&&!U0(S)&&o(h.name)),nw(S)&&l(S),v.children){const O=v.children;for(let T=0;T<O.length;T++)i(O[T],S,g&&g.children[T])}g=g||S}return D?()=>{o(D)}:xa}function o(h){if(Zx(h)){const p=s.get(h);p&&(s.delete(h),n.splice(n.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=n.indexOf(h);p>-1&&(n.splice(p,1),h.record.name&&s.delete(h.record.name),h.children.forEach(o),h.alias.forEach(o))}}function a(){return n}function l(h){const p=T2(h,n);n.splice(p,0,h),h.record.name&&!U0(h)&&s.set(h.record.name,h)}function c(h,p){let g,y={},v,_;if("name"in h&&h.name){if(g=s.get(h.name),!g)throw oo(1,{location:h});_=g.record.name,y=Qe($0(p.params,g.keys.filter(D=>!D.optional).concat(g.parent?g.parent.keys.filter(D=>D.optional):[]).map(D=>D.name)),h.params&&$0(h.params,g.keys.map(D=>D.name))),v=g.stringify(y)}else if(h.path!=null)v=h.path,g=n.find(D=>D.re.test(v)),g&&(y=g.parse(v),_=g.record.name);else{if(g=p.name?s.get(p.name):n.find(D=>D.re.test(p.path)),!g)throw oo(1,{location:h,currentLocation:p});_=g.record.name,y=Qe({},p.params,h.params),v=g.stringify(y)}const E=[];let S=g;for(;S;)E.unshift(S.record),S=S.parent;return{name:_,path:v,params:y,matched:E,meta:E2(E)}}t.forEach(h=>i(h));function u(){n.length=0,s.clear()}return{addRoute:i,resolve:c,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:r}}function $0(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function F0(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:w2(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function w2(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function U0(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function E2(t){return t.reduce((e,n)=>Qe(e,n.meta),{})}function B0(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}function T2(t,e){let n=0,s=e.length;for(;n!==s;){const i=n+s>>1;tw(t,e[i])<0?s=i:n=i+1}const r=k2(t);return r&&(s=e.lastIndexOf(r,s-1)),s}function k2(t){let e=t;for(;e=e.parent;)if(nw(e)&&tw(t,e)===0)return e}function nw({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function I2(t){const e={};if(t===""||t==="?")return e;const s=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<s.length;++r){const i=s[r].replace(Kx," "),o=i.indexOf("="),a=ja(o<0?i:i.slice(0,o)),l=o<0?null:ja(i.slice(o+1));if(a in e){let c=e[a];Gn(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function j0(t){let e="";for(let n in t){const s=t[n];if(n=WA(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(Gn(s)?s.map(i=>i&&cf(i)):[s&&cf(s)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function S2(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=Gn(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const A2=Symbol(""),z0=Symbol(""),Gu=Symbol(""),Tp=Symbol(""),df=Symbol("");function Yo(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function ar(t,e,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((a,l)=>{const c=p=>{p===!1?l(oo(4,{from:n,to:e})):p instanceof Error?l(p):h2(p)?l(oo(2,{from:e,to:p})):(o&&s.enterCallbacks[r]===o&&typeof p=="function"&&o.push(p),a())},u=i(()=>t.call(s&&s.instances[r],e,n,c));let h=Promise.resolve(u);t.length<3&&(h=h.then(c)),h.catch(p=>l(p))})}function fh(t,e,n,s,r=i=>i()){const i=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(qx(l)){const u=(l.__vccOpts||l)[e];u&&i.push(ar(u,n,s,o,a,r))}else{let c=l();i.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const h=NA(u)?u.default:u;o.mods[a]=u,o.components[a]=h;const g=(h.__vccOpts||h)[e];return g&&ar(g,n,s,o,a,r)()}))}}return i}function H0(t){const e=Nt(Gu),n=Nt(Tp),s=me(()=>{const l=be(t.to);return e.resolve(l)}),r=me(()=>{const{matched:l}=s.value,{length:c}=l,u=l[c-1],h=n.matched;if(!u||!h.length)return-1;const p=h.findIndex(io.bind(null,u));if(p>-1)return p;const g=q0(l[c-2]);return c>1&&q0(u)===g&&h[h.length-1].path!==g?h.findIndex(io.bind(null,l[c-2])):p}),i=me(()=>r.value>-1&&D2(n.params,s.value.params)),o=me(()=>r.value>-1&&r.value===n.matched.length-1&&Xx(n.params,s.value.params));function a(l={}){if(O2(l)){const c=e[be(t.replace)?"replace":"push"](be(t.to)).catch(xa);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:s,href:me(()=>s.value.href),isActive:i,isExactActive:o,navigate:a}}function C2(t){return t.length===1?t[0]:t}const P2=Rr({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:H0,setup(t,{slots:e}){const n=_o(H0(t)),{options:s}=Nt(Gu),r=me(()=>({[W0(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[W0(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&C2(e.default(n));return t.custom?i:hi("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),R2=P2;function O2(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function D2(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!Gn(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function q0(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const W0=(t,e,n)=>t??e??n,M2=Rr({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=Nt(df),r=me(()=>t.route||s.value),i=Nt(z0,0),o=me(()=>{let c=be(i);const{matched:u}=r.value;let h;for(;(h=u[c])&&!h.components;)c++;return c}),a=me(()=>r.value.matched[o.value]);Ms(z0,me(()=>o.value+1)),Ms(A2,a),Ms(df,r);const l=z();return Pt(()=>[l.value,a.value,t.name],([c,u,h],[p,g,y])=>{u&&(u.instances[h]=c,g&&g!==u&&c&&c===p&&(u.leaveGuards.size||(u.leaveGuards=g.leaveGuards),u.updateGuards.size||(u.updateGuards=g.updateGuards))),c&&u&&(!g||!io(u,g)||!p)&&(u.enterCallbacks[h]||[]).forEach(v=>v(c))},{flush:"post"}),()=>{const c=r.value,u=t.name,h=a.value,p=h&&h.components[u];if(!p)return K0(n.default,{Component:p,route:c});const g=h.props[u],y=g?g===!0?c.params:typeof g=="function"?g(c):g:null,_=hi(p,Qe({},y,e,{onVnodeUnmounted:E=>{E.component.isUnmounted&&(h.instances[u]=null)},ref:l}));return K0(n.default,{Component:_,route:c})||_}}});function K0(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const sw=M2;function N2(t){const e=x2(t.routes,t),n=t.parseQuery||I2,s=t.stringifyQuery||j0,r=t.history,i=Yo(),o=Yo(),a=Yo(),l=mp(Zs);let c=Zs;ji&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=dh.bind(null,W=>""+W),h=dh.bind(null,GA),p=dh.bind(null,ja);function g(W,he){let ce,ve;return Zx(W)?(ce=e.getRecordMatcher(W),ve=he):ve=W,e.addRoute(ve,ce)}function y(W){const he=e.getRecordMatcher(W);he&&e.removeRoute(he)}function v(){return e.getRoutes().map(W=>W.record)}function _(W){return!!e.getRecordMatcher(W)}function E(W,he){if(he=Qe({},he||l.value),typeof W=="string"){const B=hh(n,W,he.path),K=e.resolve({path:B.path},he),J=r.createHref(B.fullPath);return Qe(B,K,{params:p(K.params),hash:ja(B.hash),redirectedFrom:void 0,href:J})}let ce;if(W.path!=null)ce=Qe({},W,{path:hh(n,W.path,he.path).path});else{const B=Qe({},W.params);for(const K in B)B[K]==null&&delete B[K];ce=Qe({},W,{params:h(B)}),he.params=h(he.params)}const ve=e.resolve(ce,he),Ke=W.hash||"";ve.params=u(p(ve.params));const L=XA(s,Qe({},W,{hash:qA(Ke),path:ve.path})),$=r.createHref(L);return Qe({fullPath:L,hash:Ke,query:s===j0?S2(W.query):W.query||{}},ve,{redirectedFrom:void 0,href:$})}function S(W){return typeof W=="string"?hh(n,W,l.value.path):Qe({},W)}function D(W,he){if(c!==W)return oo(8,{from:he,to:W})}function F(W){return T(W)}function M(W){return F(Qe(S(W),{replace:!0}))}function O(W){const he=W.matched[W.matched.length-1];if(he&&he.redirect){const{redirect:ce}=he;let ve=typeof ce=="function"?ce(W):ce;return typeof ve=="string"&&(ve=ve.includes("?")||ve.includes("#")?ve=S(ve):{path:ve},ve.params={}),Qe({query:W.query,hash:W.hash,params:ve.path!=null?{}:W.params},ve)}}function T(W,he){const ce=c=E(W),ve=l.value,Ke=W.state,L=W.force,$=W.replace===!0,B=O(ce);if(B)return T(Qe(S(B),{state:typeof B=="object"?Qe({},Ke,B.state):Ke,force:L,replace:$}),he||ce);const K=ce;K.redirectedFrom=he;let J;return!L&&JA(s,ve,ce)&&(J=oo(16,{to:K,from:ve}),Vt(ve,ve,!0,!1)),(J?Promise.resolve(J):C(K,ve)).catch(Q=>_s(Q)?_s(Q,2)?Q:ht(Q):we(Q,K,ve)).then(Q=>{if(Q){if(_s(Q,2))return T(Qe({replace:$},S(Q.to),{state:typeof Q.to=="object"?Qe({},Ke,Q.to.state):Ke,force:L}),he||K)}else Q=A(K,ve,!0,$,Ke);return k(K,ve,Q),Q})}function b(W,he){const ce=D(W,he);return ce?Promise.reject(ce):Promise.resolve()}function w(W){const he=Kt.values().next().value;return he&&typeof he.runWithContext=="function"?he.runWithContext(W):W()}function C(W,he){let ce;const[ve,Ke,L]=L2(W,he);ce=fh(ve.reverse(),"beforeRouteLeave",W,he);for(const B of ve)B.leaveGuards.forEach(K=>{ce.push(ar(K,W,he))});const $=b.bind(null,W,he);return ce.push($),gt(ce).then(()=>{ce=[];for(const B of i.list())ce.push(ar(B,W,he));return ce.push($),gt(ce)}).then(()=>{ce=fh(Ke,"beforeRouteUpdate",W,he);for(const B of Ke)B.updateGuards.forEach(K=>{ce.push(ar(K,W,he))});return ce.push($),gt(ce)}).then(()=>{ce=[];for(const B of L)if(B.beforeEnter)if(Gn(B.beforeEnter))for(const K of B.beforeEnter)ce.push(ar(K,W,he));else ce.push(ar(B.beforeEnter,W,he));return ce.push($),gt(ce)}).then(()=>(W.matched.forEach(B=>B.enterCallbacks={}),ce=fh(L,"beforeRouteEnter",W,he,w),ce.push($),gt(ce))).then(()=>{ce=[];for(const B of o.list())ce.push(ar(B,W,he));return ce.push($),gt(ce)}).catch(B=>_s(B,8)?B:Promise.reject(B))}function k(W,he,ce){a.list().forEach(ve=>w(()=>ve(W,he,ce)))}function A(W,he,ce,ve,Ke){const L=D(W,he);if(L)return L;const $=he===Zs,B=ji?history.state:{};ce&&(ve||$?r.replace(W.fullPath,Qe({scroll:$&&B&&B.scroll},Ke)):r.push(W.fullPath,Ke)),l.value=W,Vt(W,he,ce,$),ht()}let I;function V(){I||(I=r.listen((W,he,ce)=>{if(!Gt.listening)return;const ve=E(W),Ke=O(ve);if(Ke){T(Qe(Ke,{replace:!0,force:!0}),ve).catch(xa);return}c=ve;const L=l.value;ji&&o2(D0(L.fullPath,ce.delta),Ku()),C(ve,L).catch($=>_s($,12)?$:_s($,2)?(T(Qe(S($.to),{force:!0}),ve).then(B=>{_s(B,20)&&!ce.delta&&ce.type===za.pop&&r.go(-1,!1)}).catch(xa),Promise.reject()):(ce.delta&&r.go(-ce.delta,!1),we($,ve,L))).then($=>{$=$||A(ve,L,!1),$&&(ce.delta&&!_s($,8)?r.go(-ce.delta,!1):ce.type===za.pop&&_s($,20)&&r.go(-1,!1)),k(ve,L,$)}).catch(xa)}))}let Y=Yo(),de=Yo(),ee;function we(W,he,ce){ht(W);const ve=de.list();return ve.length?ve.forEach(Ke=>Ke(W,he,ce)):console.error(W),Promise.reject(W)}function Ve(){return ee&&l.value!==Zs?Promise.resolve():new Promise((W,he)=>{Y.add([W,he])})}function ht(W){return ee||(ee=!W,V(),Y.list().forEach(([he,ce])=>W?ce(W):he()),Y.reset()),W}function Vt(W,he,ce,ve){const{scrollBehavior:Ke}=t;if(!ji||!Ke)return Promise.resolve();const L=!ce&&a2(D0(W.fullPath,0))||(ve||!ce)&&history.state&&history.state.scroll||null;return An().then(()=>Ke(W,he,L)).then($=>$&&i2($)).catch($=>we($,W,he))}const Ye=W=>r.go(W);let tt;const Kt=new Set,Gt={currentRoute:l,listening:!0,addRoute:g,removeRoute:y,clearRoutes:e.clearRoutes,hasRoute:_,getRoutes:v,resolve:E,options:t,push:F,replace:M,go:Ye,back:()=>Ye(-1),forward:()=>Ye(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:de.add,isReady:Ve,install(W){const he=this;W.component("RouterLink",R2),W.component("RouterView",sw),W.config.globalProperties.$router=he,Object.defineProperty(W.config.globalProperties,"$route",{enumerable:!0,get:()=>be(l)}),ji&&!tt&&l.value===Zs&&(tt=!0,F(r.location).catch(Ke=>{}));const ce={};for(const Ke in Zs)Object.defineProperty(ce,Ke,{get:()=>l.value[Ke],enumerable:!0});W.provide(Gu,he),W.provide(Tp,Kb(ce)),W.provide(df,l);const ve=W.unmount;Kt.add(W),W.unmount=function(){Kt.delete(W),Kt.size<1&&(c=Zs,I&&I(),I=null,l.value=Zs,tt=!1,ee=!1),ve()}}};function gt(W){return W.reduce((he,ce)=>he.then(()=>w(ce)),Promise.resolve())}return Gt}function L2(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(c=>io(c,a))?s.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>io(c,l))||r.push(l))}return[n,s,r]}function kp(){return Nt(Gu)}function rw(t){return Nt(Tp)}const Ea=Wu("toast",{state:()=>({toast:{show:!1,title:"",message:"",type:"info",timeoutId:null}}),actions:{showToast(t,e,n="info",s=3e3){this.toast.timeoutId&&clearTimeout(this.toast.timeoutId),this.toast.show=!0,this.toast.title=t,this.toast.message=e,this.toast.type=n,this.toast.timeoutId=setTimeout(()=>{this.hideToast()},s)},hideToast(){this.toast.show=!1,this.toast.title="",this.toast.message="",this.toast.type="info",this.toast.timeoutId&&(clearTimeout(this.toast.timeoutId),this.toast.timeoutId=null)}}}),Wt=(t,e)=>{const n=t.__vccOpts||t;for(const[s,r]of e)n[s]=r;return n},V2={class:"flex items-center"},$2={class:"mr-2"},F2={key:0,class:"fas fa-check-circle"},U2={key:1,class:"fas fa-times-circle"},B2={key:2,class:"fas fa-info-circle"},j2={class:"font-semibold"},z2={class:"text-sm"},H2={__name:"ToastNotification",setup(t){const e=Ea(),n=me(()=>e.toast);return(s,r)=>n.value.show?(R(),N("div",{key:0,class:re(["fixed bottom-4 right-4 p-4 rounded-lg shadow-lg text-white max-w-xs z-[1000]",n.value.type==="success"?"bg-green-500":n.value.type==="error"?"bg-red-500":"bg-blue-500"]),role:"alert"},[f("div",V2,[f("div",$2,[n.value.type==="success"?(R(),N("i",F2)):n.value.type==="error"?(R(),N("i",U2)):(R(),N("i",B2))]),f("div",null,[f("p",j2,U(n.value.title),1),f("p",z2,U(n.value.message),1)]),f("button",{onClick:r[0]||(r[0]=i=>be(e).hideToast()),class:"ml-auto text-white opacity-75 hover:opacity-100"}," × ")])],2)):ne("",!0)}},q2=Wt(H2,[["__scopeId","data-v-12732203"]]),W2={__name:"App",setup(t){return(e,n)=>(R(),N(pe,null,[ue(be(sw),null,{default:_e(({Component:s,route:r})=>[ue(bo,{"enter-active-class":r.meta.enterActiveClass,"leave-active-class":r.meta.leaveActiveClass},{default:_e(()=>[(R(),qe(aS(s)))]),_:2},1032,["enter-active-class","leave-active-class"])]),_:1}),ue(q2)],64))}},xo=Wu("cart",()=>{const t=z(JSON.parse(localStorage.getItem("cart_items")||"[]"));function e(o){if(!o||!o.id){console.warn("Tentativa de adicionar item inválido:",o);return}const a=t.value.find(l=>l.id===o.id&&l.size===o.size&&r(l.extras,o.extras));a?a.quantity+=o.quantity:t.value.push({...o,subtotal:o.price+o.extras.reduce((l,c)=>l+c.price,0)})}function n(o){console.log("Removendo item:",o);const a=t.value.findIndex(l=>l.id===o.id&&l.size===o.size&&r(l.extras,o.extras));a!==-1?(t.value.splice(a,1),console.log("Item removido com sucesso!")):console.warn("Item para remover não encontrado.")}function s(){t.value=[]}function r(o,a){if(o.length!==a.length)return!1;const l=[...o].sort((u,h)=>u.name.localeCompare(h.name)),c=[...a].sort((u,h)=>u.name.localeCompare(h.name));return l.every((u,h)=>u.name===c[h].name&&u.price===c[h].price)}const i=me(()=>t.value.reduce((o,a)=>o+(a.price+a.extras.reduce((l,c)=>l+c.price,0))*a.quantity,0));return Pt(t,o=>{localStorage.setItem("cart_items",JSON.stringify(o))},{deep:!0}),{items:t,addItem:e,removeItem:n,clearCart:s,total:i}}),K2={class:"md:translate-20 transition-all -translate-y-2 fixed bottom-0 left-2 right-2 rounded-full bg-gray-200/30 border-t border-gray-200/50 dark:bg-gray-900/30 dark:border-gray-700 shadow-md z-50 backdrop-blur-md"},G2={class:"flex justify-around p-3 text-gray-700 dark:text-gray-300 relative"},Y2={__name:"MenuMobile",setup(t){const e=rw(),n=z(!1),s=o=>e.path===o,r=xo(),i=me(()=>r.items.length);return Pt(i,(o,a)=>{o>a&&(n.value=!0,setTimeout(()=>{n.value=!1},500))}),(o,a)=>{const l=gl("RouterLink");return R(),N("div",K2,[f("nav",G2,[ue(l,{to:"/",class:re(["flex flex-col items-center",{"text-indigo-500 dark:text-emerald-400":s("/")}])},{default:_e(()=>a[0]||(a[0]=[f("i",{class:"fas fa-home text-sm"},null,-1),f("span",{class:"text-xs mt-1"},"Início",-1)])),_:1,__:[0]},8,["class"]),ue(l,{to:"/carrinho",class:re(["flex flex-col items-center relative",{"text-indigo-500 dark:text-emerald-400":s("/carrinho")}])},{default:_e(()=>[a[1]||(a[1]=f("i",{class:"fas fa-shopping-cart text-sm"},null,-1)),a[2]||(a[2]=f("span",{class:"text-xs mt-1"},"Carrinho",-1)),i.value>0?(R(),N("span",{key:0,class:re(["absolute -top-2 -right-2 bg-red-500 text-white text-[10px] rounded-full px-1.5 py-0.5 font-semibold",n.value?"animate-bounce":""])},U(i.value),3)):ne("",!0)]),_:1,__:[1,2]},8,["class"]),ue(l,{to:"/favoritos",class:re(["flex flex-col items-center",{"text-indigo-500 dark:text-emerald-400":s("/favoritos")}])},{default:_e(()=>a[3]||(a[3]=[f("i",{class:"fas fa-heart text-sm"},null,-1),f("span",{class:"text-xs mt-1"},"Favoritos",-1)])),_:1,__:[3]},8,["class"]),ue(l,{to:"/perfil",class:re(["flex flex-col items-center",{"text-indigo-500 dark:text-emerald-400":s("/perfil")}])},{default:_e(()=>a[4]||(a[4]=[f("i",{class:"fas fa-user text-sm"},null,-1),f("span",{class:"text-xs mt-1"},"Perfil",-1)])),_:1,__:[4]},8,["class"])])])}}},iw="/assets/logo-BsbHNySU.png",Q2={key:0,class:"absolute top-0 border-gray-100 border-2 -right-0 bg-red-600 text-white rounded-full text-xs w-5 h-5 flex items-center justify-center"},G0={__name:"IconCart",props:{cartCount:{type:Number,default:0}},setup(t){return(e,n)=>{const s=gl("router-link");return R(),qe(s,{to:"/carrinho",class:"relative text-md p-2"},{default:_e(()=>[n[0]||(n[0]=f("i",{class:"fa-solid fa-cart-shopping text-gray-600 dark:text-gray-300 hover:cursor-pointer"},null,-1)),t.cartCount?(R(),N("span",Q2,U(t.cartCount),1)):ne("",!0)]),_:1,__:[0]})}}},X2={class:"relative inline-block w-11 h-5 ml-4"},J2=["checked"],Z2={for:"theme-switch",class:"absolute top-0 left-0 w-5 h-5 bg-white dark:bg-gray-200 rounded-full border border-gray-300 dark:border-gray-600 shadow-sm transition-transform duration-300 peer-checked:translate-x-6 peer-checked:border-blue-600 dark:peer-checked:border-blue-600 cursor-pointer flex items-center justify-center"},eC={key:0,class:"fa-solid fa-moon text-yellow-500 text-xs"},tC={key:1,class:"fa-solid fa-sun text-orange-400 text-xs"},ow={__name:"ThemeToggle",setup(t){const e=z(!1),n=r=>{e.value=r,r?(document.documentElement.classList.add("dark"),document.documentElement.classList.remove("light"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),document.documentElement.classList.add("light"),localStorage.setItem("theme","light"))},s=r=>{const i=!e.value,o=document.createElement("div");o.classList.add("theme-ripple-effect");let a,l;if(r&&r.clientX&&r.clientY)a=r.clientX,l=r.clientY;else{const u=document.getElementById("theme-switch");if(u){const h=u.getBoundingClientRect();a=h.left+h.width/2,l=h.top+h.height/2}else a=window.innerWidth/2,l=window.innerHeight/2}const c=i?"#fff":"#1a202c";o.style.position="fixed",o.style.top="0",o.style.left="0",o.style.width="100vw",o.style.height="100vh",o.style.zIndex="9999",o.style.pointerEvents="none",o.style.backgroundImage=`radial-gradient(circle at ${a}px ${l}px, transparent 25%, ${c} 25.5%)`,o.style.backgroundSize="100% 100%",o.style.backgroundRepeat="no-repeat",o.style.transition="background-size 1s ease-out",document.body.appendChild(o),o.offsetWidth,requestAnimationFrame(()=>{o.style.backgroundSize="400% 400%"}),n(i),o.addEventListener("transitionend",u=>{u.propertyName==="background-size"&&o.remove()},{once:!0})};return pt(()=>{const r=localStorage.getItem("theme");n(r?r==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches)}),(r,i)=>(R(),N("div",X2,[f("input",{checked:e.value,onChange:s,id:"theme-switch",type:"checkbox",class:"peer appearance-none w-11 h-5 rounded-full cursor-pointer transition-colors duration-300 bg-gray-300 dark:bg-gray-700 checked:bg-blue-600 dark:checked:bg-blue-600"},null,40,J2),f("label",Z2,[e.value?(R(),N("i",eC)):(R(),N("i",tC))]),i[0]||(i[0]=f("span",{class:"sr-only"},"Toggle Theme",-1))]))}};function aw(t,e){return function(){return t.apply(e,arguments)}}const{toString:nC}=Object.prototype,{getPrototypeOf:Ip}=Object,{iterator:Yu,toStringTag:lw}=Symbol,Qu=(t=>e=>{const n=nC.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Xn=t=>(t=t.toLowerCase(),e=>Qu(e)===t),Xu=t=>e=>typeof e===t,{isArray:wo}=Array,Ha=Xu("undefined");function sC(t){return t!==null&&!Ha(t)&&t.constructor!==null&&!Ha(t.constructor)&&vn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const cw=Xn("ArrayBuffer");function rC(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&cw(t.buffer),e}const iC=Xu("string"),vn=Xu("function"),uw=Xu("number"),Ju=t=>t!==null&&typeof t=="object",oC=t=>t===!0||t===!1,Tc=t=>{if(Qu(t)!=="object")return!1;const e=Ip(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(lw in t)&&!(Yu in t)},aC=Xn("Date"),lC=Xn("File"),cC=Xn("Blob"),uC=Xn("FileList"),dC=t=>Ju(t)&&vn(t.pipe),hC=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||vn(t.append)&&((e=Qu(t))==="formdata"||e==="object"&&vn(t.toString)&&t.toString()==="[object FormData]"))},fC=Xn("URLSearchParams"),[pC,gC,mC,yC]=["ReadableStream","Request","Response","Headers"].map(Xn),vC=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function vl(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let s,r;if(typeof t!="object"&&(t=[t]),wo(t))for(s=0,r=t.length;s<r;s++)e.call(null,t[s],s,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(s=0;s<o;s++)a=i[s],e.call(null,t[a],a,t)}}function dw(t,e){e=e.toLowerCase();const n=Object.keys(t);let s=n.length,r;for(;s-- >0;)if(r=n[s],e===r.toLowerCase())return r;return null}const Zr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,hw=t=>!Ha(t)&&t!==Zr;function hf(){const{caseless:t}=hw(this)&&this||{},e={},n=(s,r)=>{const i=t&&dw(e,r)||r;Tc(e[i])&&Tc(s)?e[i]=hf(e[i],s):Tc(s)?e[i]=hf({},s):wo(s)?e[i]=s.slice():e[i]=s};for(let s=0,r=arguments.length;s<r;s++)arguments[s]&&vl(arguments[s],n);return e}const _C=(t,e,n,{allOwnKeys:s}={})=>(vl(e,(r,i)=>{n&&vn(r)?t[i]=aw(r,n):t[i]=r},{allOwnKeys:s}),t),bC=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),xC=(t,e,n,s)=>{t.prototype=Object.create(e.prototype,s),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},wC=(t,e,n,s)=>{let r,i,o;const a={};if(e=e||{},t==null)return e;do{for(r=Object.getOwnPropertyNames(t),i=r.length;i-- >0;)o=r[i],(!s||s(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&Ip(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},EC=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const s=t.indexOf(e,n);return s!==-1&&s===n},TC=t=>{if(!t)return null;if(wo(t))return t;let e=t.length;if(!uw(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},kC=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Ip(Uint8Array)),IC=(t,e)=>{const s=(t&&t[Yu]).call(t);let r;for(;(r=s.next())&&!r.done;){const i=r.value;e.call(t,i[0],i[1])}},SC=(t,e)=>{let n;const s=[];for(;(n=t.exec(e))!==null;)s.push(n);return s},AC=Xn("HTMLFormElement"),CC=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,r){return s.toUpperCase()+r}),Y0=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),PC=Xn("RegExp"),fw=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),s={};vl(n,(r,i)=>{let o;(o=e(r,i,t))!==!1&&(s[i]=o||r)}),Object.defineProperties(t,s)},RC=t=>{fw(t,(e,n)=>{if(vn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=t[n];if(vn(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},OC=(t,e)=>{const n={},s=r=>{r.forEach(i=>{n[i]=!0})};return wo(t)?s(t):s(String(t).split(e)),n},DC=()=>{},MC=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function NC(t){return!!(t&&vn(t.append)&&t[lw]==="FormData"&&t[Yu])}const LC=t=>{const e=new Array(10),n=(s,r)=>{if(Ju(s)){if(e.indexOf(s)>=0)return;if(!("toJSON"in s)){e[r]=s;const i=wo(s)?[]:{};return vl(s,(o,a)=>{const l=n(o,r+1);!Ha(l)&&(i[a]=l)}),e[r]=void 0,i}}return s};return n(t,0)},VC=Xn("AsyncFunction"),$C=t=>t&&(Ju(t)||vn(t))&&vn(t.then)&&vn(t.catch),pw=((t,e)=>t?setImmediate:e?((n,s)=>(Zr.addEventListener("message",({source:r,data:i})=>{r===Zr&&i===n&&s.length&&s.shift()()},!1),r=>{s.push(r),Zr.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",vn(Zr.postMessage)),FC=typeof queueMicrotask<"u"?queueMicrotask.bind(Zr):typeof process<"u"&&process.nextTick||pw,UC=t=>t!=null&&vn(t[Yu]),H={isArray:wo,isArrayBuffer:cw,isBuffer:sC,isFormData:hC,isArrayBufferView:rC,isString:iC,isNumber:uw,isBoolean:oC,isObject:Ju,isPlainObject:Tc,isReadableStream:pC,isRequest:gC,isResponse:mC,isHeaders:yC,isUndefined:Ha,isDate:aC,isFile:lC,isBlob:cC,isRegExp:PC,isFunction:vn,isStream:dC,isURLSearchParams:fC,isTypedArray:kC,isFileList:uC,forEach:vl,merge:hf,extend:_C,trim:vC,stripBOM:bC,inherits:xC,toFlatObject:wC,kindOf:Qu,kindOfTest:Xn,endsWith:EC,toArray:TC,forEachEntry:IC,matchAll:SC,isHTMLForm:AC,hasOwnProperty:Y0,hasOwnProp:Y0,reduceDescriptors:fw,freezeMethods:RC,toObjectSet:OC,toCamelCase:CC,noop:DC,toFiniteNumber:MC,findKey:dw,global:Zr,isContextDefined:hw,isSpecCompliantForm:NC,toJSONObject:LC,isAsyncFn:VC,isThenable:$C,setImmediate:pw,asap:FC,isIterable:UC};function Le(t,e,n,s,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),s&&(this.request=s),r&&(this.response=r,this.status=r.status?r.status:null)}H.inherits(Le,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:H.toJSONObject(this.config),code:this.code,status:this.status}}});const gw=Le.prototype,mw={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{mw[t]={value:t}});Object.defineProperties(Le,mw);Object.defineProperty(gw,"isAxiosError",{value:!0});Le.from=(t,e,n,s,r,i)=>{const o=Object.create(gw);return H.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),Le.call(o,t.message,e,n,s,r),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const BC=null;function ff(t){return H.isPlainObject(t)||H.isArray(t)}function yw(t){return H.endsWith(t,"[]")?t.slice(0,-2):t}function Q0(t,e,n){return t?t.concat(e).map(function(r,i){return r=yw(r),!n&&i?"["+r+"]":r}).join(n?".":""):e}function jC(t){return H.isArray(t)&&!t.some(ff)}const zC=H.toFlatObject(H,{},null,function(e){return/^is[A-Z]/.test(e)});function Zu(t,e,n){if(!H.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=H.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,_){return!H.isUndefined(_[v])});const s=n.metaTokens,r=n.visitor||u,i=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&H.isSpecCompliantForm(e);if(!H.isFunction(r))throw new TypeError("visitor must be a function");function c(y){if(y===null)return"";if(H.isDate(y))return y.toISOString();if(!l&&H.isBlob(y))throw new Le("Blob is not supported. Use a Buffer instead.");return H.isArrayBuffer(y)||H.isTypedArray(y)?l&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function u(y,v,_){let E=y;if(y&&!_&&typeof y=="object"){if(H.endsWith(v,"{}"))v=s?v:v.slice(0,-2),y=JSON.stringify(y);else if(H.isArray(y)&&jC(y)||(H.isFileList(y)||H.endsWith(v,"[]"))&&(E=H.toArray(y)))return v=yw(v),E.forEach(function(D,F){!(H.isUndefined(D)||D===null)&&e.append(o===!0?Q0([v],F,i):o===null?v:v+"[]",c(D))}),!1}return ff(y)?!0:(e.append(Q0(_,v,i),c(y)),!1)}const h=[],p=Object.assign(zC,{defaultVisitor:u,convertValue:c,isVisitable:ff});function g(y,v){if(!H.isUndefined(y)){if(h.indexOf(y)!==-1)throw Error("Circular reference detected in "+v.join("."));h.push(y),H.forEach(y,function(E,S){(!(H.isUndefined(E)||E===null)&&r.call(e,E,H.isString(S)?S.trim():S,v,p))===!0&&g(E,v?v.concat(S):[S])}),h.pop()}}if(!H.isObject(t))throw new TypeError("data must be an object");return g(t),e}function X0(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function Sp(t,e){this._pairs=[],t&&Zu(t,this,e)}const vw=Sp.prototype;vw.append=function(e,n){this._pairs.push([e,n])};vw.toString=function(e){const n=e?function(s){return e.call(this,s,X0)}:X0;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function HC(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function _w(t,e,n){if(!e)return t;const s=n&&n.encode||HC;H.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let i;if(r?i=r(e,n):i=H.isURLSearchParams(e)?e.toString():new Sp(e,n).toString(s),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class J0{constructor(){this.handlers=[]}use(e,n,s){return this.handlers.push({fulfilled:e,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){H.forEach(this.handlers,function(s){s!==null&&e(s)})}}const bw={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},qC=typeof URLSearchParams<"u"?URLSearchParams:Sp,WC=typeof FormData<"u"?FormData:null,KC=typeof Blob<"u"?Blob:null,GC={isBrowser:!0,classes:{URLSearchParams:qC,FormData:WC,Blob:KC},protocols:["http","https","file","blob","url","data"]},Ap=typeof window<"u"&&typeof document<"u",pf=typeof navigator=="object"&&navigator||void 0,YC=Ap&&(!pf||["ReactNative","NativeScript","NS"].indexOf(pf.product)<0),QC=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",XC=Ap&&window.location.href||"http://localhost",JC=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ap,hasStandardBrowserEnv:YC,hasStandardBrowserWebWorkerEnv:QC,navigator:pf,origin:XC},Symbol.toStringTag,{value:"Module"})),an={...JC,...GC};function ZC(t,e){return Zu(t,new an.classes.URLSearchParams,Object.assign({visitor:function(n,s,r,i){return an.isNode&&H.isBuffer(n)?(this.append(s,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function eP(t){return H.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function tP(t){const e={},n=Object.keys(t);let s;const r=n.length;let i;for(s=0;s<r;s++)i=n[s],e[i]=t[i];return e}function xw(t){function e(n,s,r,i){let o=n[i++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=i>=n.length;return o=!o&&H.isArray(r)?r.length:o,l?(H.hasOwnProp(r,o)?r[o]=[r[o],s]:r[o]=s,!a):((!r[o]||!H.isObject(r[o]))&&(r[o]=[]),e(n,s,r[o],i)&&H.isArray(r[o])&&(r[o]=tP(r[o])),!a)}if(H.isFormData(t)&&H.isFunction(t.entries)){const n={};return H.forEachEntry(t,(s,r)=>{e(eP(s),r,n,0)}),n}return null}function nP(t,e,n){if(H.isString(t))try{return(e||JSON.parse)(t),H.trim(t)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(t)}const _l={transitional:bw,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const s=n.getContentType()||"",r=s.indexOf("application/json")>-1,i=H.isObject(e);if(i&&H.isHTMLForm(e)&&(e=new FormData(e)),H.isFormData(e))return r?JSON.stringify(xw(e)):e;if(H.isArrayBuffer(e)||H.isBuffer(e)||H.isStream(e)||H.isFile(e)||H.isBlob(e)||H.isReadableStream(e))return e;if(H.isArrayBufferView(e))return e.buffer;if(H.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return ZC(e,this.formSerializer).toString();if((a=H.isFileList(e))||s.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Zu(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||r?(n.setContentType("application/json",!1),nP(e)):e}],transformResponse:[function(e){const n=this.transitional||_l.transitional,s=n&&n.forcedJSONParsing,r=this.responseType==="json";if(H.isResponse(e)||H.isReadableStream(e))return e;if(e&&H.isString(e)&&(s&&!this.responseType||r)){const o=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?Le.from(a,Le.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:an.classes.FormData,Blob:an.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};H.forEach(["delete","get","head","post","put","patch"],t=>{_l.headers[t]={}});const sP=H.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),rP=t=>{const e={};let n,s,r;return t&&t.split(`
`).forEach(function(o){r=o.indexOf(":"),n=o.substring(0,r).trim().toLowerCase(),s=o.substring(r+1).trim(),!(!n||e[n]&&sP[n])&&(n==="set-cookie"?e[n]?e[n].push(s):e[n]=[s]:e[n]=e[n]?e[n]+", "+s:s)}),e},Z0=Symbol("internals");function Qo(t){return t&&String(t).trim().toLowerCase()}function kc(t){return t===!1||t==null?t:H.isArray(t)?t.map(kc):String(t)}function iP(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(t);)e[s[1]]=s[2];return e}const oP=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function ph(t,e,n,s,r){if(H.isFunction(s))return s.call(this,e,n);if(r&&(e=n),!!H.isString(e)){if(H.isString(s))return e.indexOf(s)!==-1;if(H.isRegExp(s))return s.test(e)}}function aP(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,s)=>n.toUpperCase()+s)}function lP(t,e){const n=H.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(t,s+n,{value:function(r,i,o){return this[s].call(this,e,r,i,o)},configurable:!0})})}let _n=class{constructor(e){e&&this.set(e)}set(e,n,s){const r=this;function i(a,l,c){const u=Qo(l);if(!u)throw new Error("header name must be a non-empty string");const h=H.findKey(r,u);(!h||r[h]===void 0||c===!0||c===void 0&&r[h]!==!1)&&(r[h||l]=kc(a))}const o=(a,l)=>H.forEach(a,(c,u)=>i(c,u,l));if(H.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(H.isString(e)&&(e=e.trim())&&!oP(e))o(rP(e),n);else if(H.isObject(e)&&H.isIterable(e)){let a={},l,c;for(const u of e){if(!H.isArray(u))throw TypeError("Object iterator must return a key-value pair");a[c=u[0]]=(l=a[c])?H.isArray(l)?[...l,u[1]]:[l,u[1]]:u[1]}o(a,n)}else e!=null&&i(n,e,s);return this}get(e,n){if(e=Qo(e),e){const s=H.findKey(this,e);if(s){const r=this[s];if(!n)return r;if(n===!0)return iP(r);if(H.isFunction(n))return n.call(this,r,s);if(H.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Qo(e),e){const s=H.findKey(this,e);return!!(s&&this[s]!==void 0&&(!n||ph(this,this[s],s,n)))}return!1}delete(e,n){const s=this;let r=!1;function i(o){if(o=Qo(o),o){const a=H.findKey(s,o);a&&(!n||ph(s,s[a],a,n))&&(delete s[a],r=!0)}}return H.isArray(e)?e.forEach(i):i(e),r}clear(e){const n=Object.keys(this);let s=n.length,r=!1;for(;s--;){const i=n[s];(!e||ph(this,this[i],i,e,!0))&&(delete this[i],r=!0)}return r}normalize(e){const n=this,s={};return H.forEach(this,(r,i)=>{const o=H.findKey(s,i);if(o){n[o]=kc(r),delete n[i];return}const a=e?aP(i):String(i).trim();a!==i&&delete n[i],n[a]=kc(r),s[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return H.forEach(this,(s,r)=>{s!=null&&s!==!1&&(n[r]=e&&H.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const s=new this(e);return n.forEach(r=>s.set(r)),s}static accessor(e){const s=(this[Z0]=this[Z0]={accessors:{}}).accessors,r=this.prototype;function i(o){const a=Qo(o);s[a]||(lP(r,o),s[a]=!0)}return H.isArray(e)?e.forEach(i):i(e),this}};_n.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);H.reduceDescriptors(_n.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(s){this[n]=s}}});H.freezeMethods(_n);function gh(t,e){const n=this||_l,s=e||n,r=_n.from(s.headers);let i=s.data;return H.forEach(t,function(a){i=a.call(n,i,r.normalize(),e?e.status:void 0)}),r.normalize(),i}function ww(t){return!!(t&&t.__CANCEL__)}function Eo(t,e,n){Le.call(this,t??"canceled",Le.ERR_CANCELED,e,n),this.name="CanceledError"}H.inherits(Eo,Le,{__CANCEL__:!0});function Ew(t,e,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?t(n):e(new Le("Request failed with status code "+n.status,[Le.ERR_BAD_REQUEST,Le.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function cP(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function uP(t,e){t=t||10;const n=new Array(t),s=new Array(t);let r=0,i=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=s[i];o||(o=c),n[r]=l,s[r]=c;let h=i,p=0;for(;h!==r;)p+=n[h++],h=h%t;if(r=(r+1)%t,r===i&&(i=(i+1)%t),c-o<e)return;const g=u&&c-u;return g?Math.round(p*1e3/g):void 0}}function dP(t,e){let n=0,s=1e3/e,r,i;const o=(c,u=Date.now())=>{n=u,r=null,i&&(clearTimeout(i),i=null),t.apply(null,c)};return[(...c)=>{const u=Date.now(),h=u-n;h>=s?o(c,u):(r=c,i||(i=setTimeout(()=>{i=null,o(r)},s-h)))},()=>r&&o(r)]}const nu=(t,e,n=3)=>{let s=0;const r=uP(50,250);return dP(i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,l=o-s,c=r(l),u=o<=a;s=o;const h={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-o)/c:void 0,event:i,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(h)},n)},ey=(t,e)=>{const n=t!=null;return[s=>e[0]({lengthComputable:n,total:t,loaded:s}),e[1]]},ty=t=>(...e)=>H.asap(()=>t(...e)),hP=an.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,an.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(an.origin),an.navigator&&/(msie|trident)/i.test(an.navigator.userAgent)):()=>!0,fP=an.hasStandardBrowserEnv?{write(t,e,n,s,r,i){const o=[t+"="+encodeURIComponent(e)];H.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),H.isString(s)&&o.push("path="+s),H.isString(r)&&o.push("domain="+r),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function pP(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function gP(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Tw(t,e,n){let s=!pP(e);return t&&(s||n==!1)?gP(t,e):e}const ny=t=>t instanceof _n?{...t}:t;function fi(t,e){e=e||{};const n={};function s(c,u,h,p){return H.isPlainObject(c)&&H.isPlainObject(u)?H.merge.call({caseless:p},c,u):H.isPlainObject(u)?H.merge({},u):H.isArray(u)?u.slice():u}function r(c,u,h,p){if(H.isUndefined(u)){if(!H.isUndefined(c))return s(void 0,c,h,p)}else return s(c,u,h,p)}function i(c,u){if(!H.isUndefined(u))return s(void 0,u)}function o(c,u){if(H.isUndefined(u)){if(!H.isUndefined(c))return s(void 0,c)}else return s(void 0,u)}function a(c,u,h){if(h in e)return s(c,u);if(h in t)return s(void 0,c)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u,h)=>r(ny(c),ny(u),h,!0)};return H.forEach(Object.keys(Object.assign({},t,e)),function(u){const h=l[u]||r,p=h(t[u],e[u],u);H.isUndefined(p)&&h!==a||(n[u]=p)}),n}const kw=t=>{const e=fi({},t);let{data:n,withXSRFToken:s,xsrfHeaderName:r,xsrfCookieName:i,headers:o,auth:a}=e;e.headers=o=_n.from(o),e.url=_w(Tw(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(H.isFormData(n)){if(an.hasStandardBrowserEnv||an.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...u]=l?l.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...u].join("; "))}}if(an.hasStandardBrowserEnv&&(s&&H.isFunction(s)&&(s=s(e)),s||s!==!1&&hP(e.url))){const c=r&&i&&fP.read(i);c&&o.set(r,c)}return e},mP=typeof XMLHttpRequest<"u",yP=mP&&function(t){return new Promise(function(n,s){const r=kw(t);let i=r.data;const o=_n.from(r.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=r,u,h,p,g,y;function v(){g&&g(),y&&y(),r.cancelToken&&r.cancelToken.unsubscribe(u),r.signal&&r.signal.removeEventListener("abort",u)}let _=new XMLHttpRequest;_.open(r.method.toUpperCase(),r.url,!0),_.timeout=r.timeout;function E(){if(!_)return;const D=_n.from("getAllResponseHeaders"in _&&_.getAllResponseHeaders()),M={data:!a||a==="text"||a==="json"?_.responseText:_.response,status:_.status,statusText:_.statusText,headers:D,config:t,request:_};Ew(function(T){n(T),v()},function(T){s(T),v()},M),_=null}"onloadend"in _?_.onloadend=E:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(E)},_.onabort=function(){_&&(s(new Le("Request aborted",Le.ECONNABORTED,t,_)),_=null)},_.onerror=function(){s(new Le("Network Error",Le.ERR_NETWORK,t,_)),_=null},_.ontimeout=function(){let F=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const M=r.transitional||bw;r.timeoutErrorMessage&&(F=r.timeoutErrorMessage),s(new Le(F,M.clarifyTimeoutError?Le.ETIMEDOUT:Le.ECONNABORTED,t,_)),_=null},i===void 0&&o.setContentType(null),"setRequestHeader"in _&&H.forEach(o.toJSON(),function(F,M){_.setRequestHeader(M,F)}),H.isUndefined(r.withCredentials)||(_.withCredentials=!!r.withCredentials),a&&a!=="json"&&(_.responseType=r.responseType),c&&([p,y]=nu(c,!0),_.addEventListener("progress",p)),l&&_.upload&&([h,g]=nu(l),_.upload.addEventListener("progress",h),_.upload.addEventListener("loadend",g)),(r.cancelToken||r.signal)&&(u=D=>{_&&(s(!D||D.type?new Eo(null,t,_):D),_.abort(),_=null)},r.cancelToken&&r.cancelToken.subscribe(u),r.signal&&(r.signal.aborted?u():r.signal.addEventListener("abort",u)));const S=cP(r.url);if(S&&an.protocols.indexOf(S)===-1){s(new Le("Unsupported protocol "+S+":",Le.ERR_BAD_REQUEST,t));return}_.send(i||null)})},vP=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let s=new AbortController,r;const i=function(c){if(!r){r=!0,a();const u=c instanceof Error?c:this.reason;s.abort(u instanceof Le?u:new Eo(u instanceof Error?u.message:u))}};let o=e&&setTimeout(()=>{o=null,i(new Le(`timeout ${e} of ms exceeded`,Le.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(i):c.removeEventListener("abort",i)}),t=null)};t.forEach(c=>c.addEventListener("abort",i));const{signal:l}=s;return l.unsubscribe=()=>H.asap(a),l}},_P=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let s=0,r;for(;s<n;)r=s+e,yield t.slice(s,r),s=r},bP=async function*(t,e){for await(const n of xP(t))yield*_P(n,e)},xP=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:s}=await e.read();if(n)break;yield s}}finally{await e.cancel()}},sy=(t,e,n,s)=>{const r=bP(t,e);let i=0,o,a=l=>{o||(o=!0,s&&s(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await r.next();if(c){a(),l.close();return}let h=u.byteLength;if(n){let p=i+=h;n(p)}l.enqueue(new Uint8Array(u))}catch(c){throw a(c),c}},cancel(l){return a(l),r.return()}},{highWaterMark:2})},ed=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Iw=ed&&typeof ReadableStream=="function",wP=ed&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Sw=(t,...e)=>{try{return!!t(...e)}catch{return!1}},EP=Iw&&Sw(()=>{let t=!1;const e=new Request(an.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),ry=64*1024,gf=Iw&&Sw(()=>H.isReadableStream(new Response("").body)),su={stream:gf&&(t=>t.body)};ed&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!su[e]&&(su[e]=H.isFunction(t[e])?n=>n[e]():(n,s)=>{throw new Le(`Response type '${e}' is not supported`,Le.ERR_NOT_SUPPORT,s)})})})(new Response);const TP=async t=>{if(t==null)return 0;if(H.isBlob(t))return t.size;if(H.isSpecCompliantForm(t))return(await new Request(an.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(H.isArrayBufferView(t)||H.isArrayBuffer(t))return t.byteLength;if(H.isURLSearchParams(t)&&(t=t+""),H.isString(t))return(await wP(t)).byteLength},kP=async(t,e)=>{const n=H.toFiniteNumber(t.getContentLength());return n??TP(e)},IP=ed&&(async t=>{let{url:e,method:n,data:s,signal:r,cancelToken:i,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:h="same-origin",fetchOptions:p}=kw(t);c=c?(c+"").toLowerCase():"text";let g=vP([r,i&&i.toAbortSignal()],o),y;const v=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let _;try{if(l&&EP&&n!=="get"&&n!=="head"&&(_=await kP(u,s))!==0){let M=new Request(e,{method:"POST",body:s,duplex:"half"}),O;if(H.isFormData(s)&&(O=M.headers.get("content-type"))&&u.setContentType(O),M.body){const[T,b]=ey(_,nu(ty(l)));s=sy(M.body,ry,T,b)}}H.isString(h)||(h=h?"include":"omit");const E="credentials"in Request.prototype;y=new Request(e,{...p,signal:g,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:s,duplex:"half",credentials:E?h:void 0});let S=await fetch(y);const D=gf&&(c==="stream"||c==="response");if(gf&&(a||D&&v)){const M={};["status","statusText","headers"].forEach(w=>{M[w]=S[w]});const O=H.toFiniteNumber(S.headers.get("content-length")),[T,b]=a&&ey(O,nu(ty(a),!0))||[];S=new Response(sy(S.body,ry,T,()=>{b&&b(),v&&v()}),M)}c=c||"text";let F=await su[H.findKey(su,c)||"text"](S,t);return!D&&v&&v(),await new Promise((M,O)=>{Ew(M,O,{data:F,headers:_n.from(S.headers),status:S.status,statusText:S.statusText,config:t,request:y})})}catch(E){throw v&&v(),E&&E.name==="TypeError"&&/Load failed|fetch/i.test(E.message)?Object.assign(new Le("Network Error",Le.ERR_NETWORK,t,y),{cause:E.cause||E}):Le.from(E,E&&E.code,t,y)}}),mf={http:BC,xhr:yP,fetch:IP};H.forEach(mf,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const iy=t=>`- ${t}`,SP=t=>H.isFunction(t)||t===null||t===!1,Aw={getAdapter:t=>{t=H.isArray(t)?t:[t];const{length:e}=t;let n,s;const r={};for(let i=0;i<e;i++){n=t[i];let o;if(s=n,!SP(n)&&(s=mf[(o=String(n)).toLowerCase()],s===void 0))throw new Le(`Unknown adapter '${o}'`);if(s)break;r[o||"#"+i]=s}if(!s){const i=Object.entries(r).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(iy).join(`
`):" "+iy(i[0]):"as no adapter specified";throw new Le("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return s},adapters:mf};function mh(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Eo(null,t)}function oy(t){return mh(t),t.headers=_n.from(t.headers),t.data=gh.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Aw.getAdapter(t.adapter||_l.adapter)(t).then(function(s){return mh(t),s.data=gh.call(t,t.transformResponse,s),s.headers=_n.from(s.headers),s},function(s){return ww(s)||(mh(t),s&&s.response&&(s.response.data=gh.call(t,t.transformResponse,s.response),s.response.headers=_n.from(s.response.headers))),Promise.reject(s)})}const Cw="1.9.0",td={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{td[t]=function(s){return typeof s===t||"a"+(e<1?"n ":" ")+t}});const ay={};td.transitional=function(e,n,s){function r(i,o){return"[Axios v"+Cw+"] Transitional option '"+i+"'"+o+(s?". "+s:"")}return(i,o,a)=>{if(e===!1)throw new Le(r(o," has been removed"+(n?" in "+n:"")),Le.ERR_DEPRECATED);return n&&!ay[o]&&(ay[o]=!0,console.warn(r(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,a):!0}};td.spelling=function(e){return(n,s)=>(console.warn(`${s} is likely a misspelling of ${e}`),!0)};function AP(t,e,n){if(typeof t!="object")throw new Le("options must be an object",Le.ERR_BAD_OPTION_VALUE);const s=Object.keys(t);let r=s.length;for(;r-- >0;){const i=s[r],o=e[i];if(o){const a=t[i],l=a===void 0||o(a,i,t);if(l!==!0)throw new Le("option "+i+" must be "+l,Le.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Le("Unknown option "+i,Le.ERR_BAD_OPTION)}}const Ic={assertOptions:AP,validators:td},Zn=Ic.validators;let oi=class{constructor(e){this.defaults=e||{},this.interceptors={request:new J0,response:new J0}}async request(e,n){try{return await this._request(e,n)}catch(s){if(s instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const i=r.stack?r.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=fi(this.defaults,n);const{transitional:s,paramsSerializer:r,headers:i}=n;s!==void 0&&Ic.assertOptions(s,{silentJSONParsing:Zn.transitional(Zn.boolean),forcedJSONParsing:Zn.transitional(Zn.boolean),clarifyTimeoutError:Zn.transitional(Zn.boolean)},!1),r!=null&&(H.isFunction(r)?n.paramsSerializer={serialize:r}:Ic.assertOptions(r,{encode:Zn.function,serialize:Zn.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Ic.assertOptions(n,{baseUrl:Zn.spelling("baseURL"),withXsrfToken:Zn.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&H.merge(i.common,i[n.method]);i&&H.forEach(["delete","get","head","post","put","patch","common"],y=>{delete i[y]}),n.headers=_n.concat(o,i);const a=[];let l=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(n)===!1||(l=l&&v.synchronous,a.unshift(v.fulfilled,v.rejected))});const c=[];this.interceptors.response.forEach(function(v){c.push(v.fulfilled,v.rejected)});let u,h=0,p;if(!l){const y=[oy.bind(this),void 0];for(y.unshift.apply(y,a),y.push.apply(y,c),p=y.length,u=Promise.resolve(n);h<p;)u=u.then(y[h++],y[h++]);return u}p=a.length;let g=n;for(h=0;h<p;){const y=a[h++],v=a[h++];try{g=y(g)}catch(_){v.call(this,_);break}}try{u=oy.call(this,g)}catch(y){return Promise.reject(y)}for(h=0,p=c.length;h<p;)u=u.then(c[h++],c[h++]);return u}getUri(e){e=fi(this.defaults,e);const n=Tw(e.baseURL,e.url,e.allowAbsoluteUrls);return _w(n,e.params,e.paramsSerializer)}};H.forEach(["delete","get","head","options"],function(e){oi.prototype[e]=function(n,s){return this.request(fi(s||{},{method:e,url:n,data:(s||{}).data}))}});H.forEach(["post","put","patch"],function(e){function n(s){return function(i,o,a){return this.request(fi(a||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}oi.prototype[e]=n(),oi.prototype[e+"Form"]=n(!0)});let CP=class Pw{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const s=this;this.promise.then(r=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](r);s._listeners=null}),this.promise.then=r=>{let i;const o=new Promise(a=>{s.subscribe(a),i=a}).then(r);return o.cancel=function(){s.unsubscribe(i)},o},e(function(i,o,a){s.reason||(s.reason=new Eo(i,o,a),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=s=>{e.abort(s)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new Pw(function(r){e=r}),cancel:e}}};function PP(t){return function(n){return t.apply(null,n)}}function RP(t){return H.isObject(t)&&t.isAxiosError===!0}const yf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(yf).forEach(([t,e])=>{yf[e]=t});function Rw(t){const e=new oi(t),n=aw(oi.prototype.request,e);return H.extend(n,oi.prototype,e,{allOwnKeys:!0}),H.extend(n,e,null,{allOwnKeys:!0}),n.create=function(r){return Rw(fi(t,r))},n}const Et=Rw(_l);Et.Axios=oi;Et.CanceledError=Eo;Et.CancelToken=CP;Et.isCancel=ww;Et.VERSION=Cw;Et.toFormData=Zu;Et.AxiosError=Le;Et.Cancel=Et.CanceledError;Et.all=function(e){return Promise.all(e)};Et.spread=PP;Et.isAxiosError=RP;Et.mergeConfig=fi;Et.AxiosHeaders=_n;Et.formToJSON=t=>xw(H.isHTMLForm(t)?new FormData(t):t);Et.getAdapter=Aw.getAdapter;Et.HttpStatusCode=yf;Et.default=Et;const{Axios:xG,AxiosError:wG,CanceledError:EG,isCancel:TG,CancelToken:kG,VERSION:IG,all:SG,Cancel:AG,isAxiosError:CG,spread:PG,toFormData:RG,AxiosHeaders:OG,HttpStatusCode:DG,formToJSON:MG,getAdapter:NG,mergeConfig:LG}=Et,OP=()=>{};var ly={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},DP=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(l>>10)),e[s++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Dw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,c=l?t[r+2]:0,u=i>>2,h=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(p=64)),s.push(n[u],n[h],n[p],n[g])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ow(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):DP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const h=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||a==null||c==null||h==null)throw new MP;const p=i<<2|a>>4;if(s.push(p),c!==64){const g=a<<4&240|c>>2;if(s.push(g),h!==64){const y=c<<6&192|h;s.push(y)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class MP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const NP=function(t){const e=Ow(t);return Dw.encodeByteArray(e,!0)},ru=function(t){return NP(t).replace(/\./g,"")},Mw=function(t){try{return Dw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VP=()=>LP().__FIREBASE_DEFAULTS__,$P=()=>{if(typeof process>"u"||typeof ly>"u")return;const t=ly.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},FP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Mw(t[1]);return e&&JSON.parse(e)},nd=()=>{try{return OP()||VP()||$P()||FP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Nw=t=>{var e,n;return(n=(e=nd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},UP=t=>{const e=Nw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Lw=()=>{var t;return(t=nd())===null||t===void 0?void 0:t.config},Vw=t=>{var e;return(e=nd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bl(t){return t.endsWith(".cloudworkstations.dev")}async function $w(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ru(JSON.stringify(n)),ru(JSON.stringify(o)),""].join(".")}const Ta={};function zP(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ta))Ta[e]?t.emulator.push(e):t.prod.push(e);return t}function HP(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let cy=!1;function Fw(t,e){if(typeof window>"u"||typeof document>"u"||!bl(window.location.host)||Ta[t]===e||Ta[t]||cy)return;Ta[t]=e;function n(p){return`__firebase__banner__${p}`}const s="__firebase__banner",i=zP().prod.length>0;function o(){const p=document.getElementById(s);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function l(p,g){p.setAttribute("width","24"),p.setAttribute("id",g),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function c(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{cy=!0,o()},p}function u(p,g){p.setAttribute("id",g),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function h(){const p=HP(s),g=n("text"),y=document.getElementById(g)||document.createElement("span"),v=n("learnmore"),_=document.getElementById(v)||document.createElement("a"),E=n("preprendIcon"),S=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const D=p.element;a(D),u(_,v);const F=c();l(S,E),D.append(S,y,_,F),document.body.appendChild(D)}i?(y.innerText="Preview backend disconnected.",S.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(S.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,y.innerText="Preview backend running in this workspace."),y.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dn())}function WP(){var t;const e=(t=nd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function KP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function GP(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function YP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function QP(){const t=dn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function XP(){return!WP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Uw(){try{return typeof indexedDB=="object"}catch{return!1}}function Bw(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var i;e(((i=r.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function JP(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP="FirebaseError";class ps extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=ZP,Object.setPrototypeOf(this,ps.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ki.prototype.create)}}class ki{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?eR(i,s):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new ps(r,a,s)}}function eR(t,e){return t.replace(tR,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const tR=/\{\$([^}]+)}/g;function nR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function pi(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(uy(i)&&uy(o)){if(!pi(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function uy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xl(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function sa(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[r,i]=s.split("=");e[decodeURIComponent(r)]=decodeURIComponent(i)}}),e}function ra(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function sR(t,e){const n=new rR(t,e);return n.subscribe.bind(n)}class rR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");iR(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=yh),r.error===void 0&&(r.error=yh),r.complete===void 0&&(r.complete=yh);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function iR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function yh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(t){return t&&t._delegate?t._delegate:t}class Yn{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new BP;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lR(e))try{this.getOrInitializeService({instanceIdentifier:Yr})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=Yr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Yr){return this.instances.has(e)}getOptions(e=Yr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);s===a&&o.resolve(r)}return r}onInit(e,n){var s;const r=this.normalizeInstanceIdentifier(n),i=(s=this.onInitCallbacks.get(r))!==null&&s!==void 0?s:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:aR(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Yr){return this.component?this.component.multipleInstances?e:Yr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function aR(t){return t===Yr?void 0:t}function lR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new oR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Be||(Be={}));const uR={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},dR=Be.INFO,hR={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},fR=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=hR[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Cp{constructor(e){this.name=e,this._logLevel=dR,this._logHandler=fR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}}const pR=(t,e)=>e.some(n=>t instanceof n);let dy,hy;function gR(){return dy||(dy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mR(){return hy||(hy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jw=new WeakMap,vf=new WeakMap,zw=new WeakMap,vh=new WeakMap,Pp=new WeakMap;function yR(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ls(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&jw.set(n,t)}).catch(()=>{}),Pp.set(e,t),e}function vR(t){if(vf.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});vf.set(t,e)}let _f={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return vf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||zw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ls(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function _R(t){_f=t(_f)}function bR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(_h(this),e,...n);return zw.set(s,e.sort?e.sort():[e]),Ls(s)}:mR().includes(t)?function(...e){return t.apply(_h(this),e),Ls(jw.get(this))}:function(...e){return Ls(t.apply(_h(this),e))}}function xR(t){return typeof t=="function"?bR(t):(t instanceof IDBTransaction&&vR(t),pR(t,gR())?new Proxy(t,_f):t)}function Ls(t){if(t instanceof IDBRequest)return yR(t);if(vh.has(t))return vh.get(t);const e=xR(t);return e!==t&&(vh.set(t,e),Pp.set(e,t)),e}const _h=t=>Pp.get(t);function sd(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),a=Ls(o);return s&&o.addEventListener("upgradeneeded",l=>{s(Ls(o.result),l.oldVersion,l.newVersion,Ls(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}function bh(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",s=>e(s.oldVersion,s)),Ls(n).then(()=>{})}const wR=["get","getKey","getAll","getAllKeys","count"],ER=["put","add","delete","clear"],xh=new Map;function fy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(xh.get(e))return xh.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=ER.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||wR.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return s&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),r&&l.done]))[0]};return xh.set(e,i),i}_R(t=>({...t,get:(e,n,s)=>fy(e,n)||t.get(e,n,s),has:(e,n)=>!!fy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(kR(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function kR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const bf="@firebase/app",py="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js=new Cp("@firebase/app"),IR="@firebase/app-compat",SR="@firebase/analytics-compat",AR="@firebase/analytics",CR="@firebase/app-check-compat",PR="@firebase/app-check",RR="@firebase/auth",OR="@firebase/auth-compat",DR="@firebase/database",MR="@firebase/data-connect",NR="@firebase/database-compat",LR="@firebase/functions",VR="@firebase/functions-compat",$R="@firebase/installations",FR="@firebase/installations-compat",UR="@firebase/messaging",BR="@firebase/messaging-compat",jR="@firebase/performance",zR="@firebase/performance-compat",HR="@firebase/remote-config",qR="@firebase/remote-config-compat",WR="@firebase/storage",KR="@firebase/storage-compat",GR="@firebase/firestore",YR="@firebase/ai",QR="@firebase/firestore-compat",XR="firebase",JR="11.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xf="[DEFAULT]",ZR={[bf]:"fire-core",[IR]:"fire-core-compat",[AR]:"fire-analytics",[SR]:"fire-analytics-compat",[PR]:"fire-app-check",[CR]:"fire-app-check-compat",[RR]:"fire-auth",[OR]:"fire-auth-compat",[DR]:"fire-rtdb",[MR]:"fire-data-connect",[NR]:"fire-rtdb-compat",[LR]:"fire-fn",[VR]:"fire-fn-compat",[$R]:"fire-iid",[FR]:"fire-iid-compat",[UR]:"fire-fcm",[BR]:"fire-fcm-compat",[jR]:"fire-perf",[zR]:"fire-perf-compat",[HR]:"fire-rc",[qR]:"fire-rc-compat",[WR]:"fire-gcs",[KR]:"fire-gcs-compat",[GR]:"fire-fst",[QR]:"fire-fst-compat",[YR]:"fire-vertex","fire-js":"fire-js",[XR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu=new Map,eO=new Map,wf=new Map;function gy(t,e){try{t.container.addComponent(e)}catch(n){js.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function hs(t){const e=t.name;if(wf.has(e))return js.debug(`There were multiple attempts to register component ${e}.`),!1;wf.set(e,t);for(const n of iu.values())gy(n,t);for(const n of eO.values())gy(n,t);return!0}function To(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Tn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yr=new ki("app","Firebase",tO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Yn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko=JR;function rd(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s=Object.assign({name:xf,automaticDataCollectionEnabled:!0},e),r=s.name;if(typeof r!="string"||!r)throw yr.create("bad-app-name",{appName:String(r)});if(n||(n=Lw()),!n)throw yr.create("no-options");const i=iu.get(r);if(i){if(pi(n,i.options)&&pi(s,i.config))return i;throw yr.create("duplicate-app",{appName:r})}const o=new cR(r);for(const l of wf.values())o.addComponent(l);const a=new nO(n,s,o);return iu.set(r,a),a}function Rp(t=xf){const e=iu.get(t);if(!e&&t===xf&&Lw())return rd();if(!e)throw yr.create("no-app",{appName:t});return e}function Ln(t,e,n){var s;let r=(s=ZR[t])!==null&&s!==void 0?s:t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),js.warn(a.join(" "));return}hs(new Yn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO="firebase-heartbeat-database",rO=1,qa="firebase-heartbeat-store";let wh=null;function Hw(){return wh||(wh=sd(sO,rO,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(qa)}catch(n){console.warn(n)}}}}).catch(t=>{throw yr.create("idb-open",{originalErrorMessage:t.message})})),wh}async function iO(t){try{const n=(await Hw()).transaction(qa),s=await n.objectStore(qa).get(qw(t));return await n.done,s}catch(e){if(e instanceof ps)js.warn(e.message);else{const n=yr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});js.warn(n.message)}}}async function my(t,e){try{const s=(await Hw()).transaction(qa,"readwrite");await s.objectStore(qa).put(e,qw(t)),await s.done}catch(n){if(n instanceof ps)js.warn(n.message);else{const s=yr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});js.warn(s.message)}}}function qw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO=1024,aO=30;class lO{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new uO(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=yy();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats.length>aO){const o=dO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){js.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=yy(),{heartbeatsToSend:s,unsentEntries:r}=cO(this._heartbeatsCache.heartbeats),i=ru(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return js.warn(n),""}}}function yy(){return new Date().toISOString().substring(0,10)}function cO(t,e=oO){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),vy(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),vy(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class uO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Uw()?Bw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await iO(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return my(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return my(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function vy(t){return ru(JSON.stringify({version:2,heartbeats:t})).length}function dO(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hO(t){hs(new Yn("platform-logger",e=>new TR(e),"PRIVATE")),hs(new Yn("heartbeat",e=>new lO(e),"PRIVATE")),Ln(bf,py,t),Ln(bf,py,"esm2017"),Ln("fire-js","")}hO("");var fO="firebase",pO="11.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ln(fO,pO,"app");const Ww="@firebase/installations",Op="0.6.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw=1e4,Gw=`w:${Op}`,Yw="FIS_v2",gO="https://firebaseinstallations.googleapis.com/v1",mO=60*60*1e3,yO="installations",vO="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _O={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},gi=new ki(yO,vO,_O);function Qw(t){return t instanceof ps&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw({projectId:t}){return`${gO}/projects/${t}/installations`}function Jw(t){return{token:t.token,requestStatus:2,expiresIn:xO(t.expiresIn),creationTime:Date.now()}}async function Zw(t,e){const s=(await e.json()).error;return gi.create("request-failed",{requestName:t,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function e1({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function bO(t,{refreshToken:e}){const n=e1(t);return n.append("Authorization",wO(e)),n}async function t1(t){const e=await t();return e.status>=500&&e.status<600?t():e}function xO(t){return Number(t.replace("s","000"))}function wO(t){return`${Yw} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EO({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const s=Xw(t),r=e1(t),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&r.append("x-firebase-client",c)}const o={fid:n,authVersion:Yw,appId:t.appId,sdkVersion:Gw},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await t1(()=>fetch(s,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:Jw(c.authToken)}}else throw await Zw("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TO(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO=/^[cdef][\w-]{21}$/,Ef="";function IO(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=SO(t);return kO.test(n)?n:Ef}catch{return Ef}}function SO(t){return TO(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function id(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1=new Map;function r1(t,e){const n=id(t);i1(n,e),AO(n,e)}function i1(t,e){const n=s1.get(t);if(n)for(const s of n)s(e)}function AO(t,e){const n=CO();n&&n.postMessage({key:t,fid:e}),PO()}let ei=null;function CO(){return!ei&&"BroadcastChannel"in self&&(ei=new BroadcastChannel("[Firebase] FID Change"),ei.onmessage=t=>{i1(t.data.key,t.data.fid)}),ei}function PO(){s1.size===0&&ei&&(ei.close(),ei=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RO="firebase-installations-database",OO=1,mi="firebase-installations-store";let Eh=null;function Dp(){return Eh||(Eh=sd(RO,OO,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(mi)}}})),Eh}async function ou(t,e){const n=id(t),r=(await Dp()).transaction(mi,"readwrite"),i=r.objectStore(mi),o=await i.get(n);return await i.put(e,n),await r.done,(!o||o.fid!==e.fid)&&r1(t,e.fid),e}async function o1(t){const e=id(t),s=(await Dp()).transaction(mi,"readwrite");await s.objectStore(mi).delete(e),await s.done}async function od(t,e){const n=id(t),r=(await Dp()).transaction(mi,"readwrite"),i=r.objectStore(mi),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await r.done,a&&(!o||o.fid!==a.fid)&&r1(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mp(t){let e;const n=await od(t.appConfig,s=>{const r=DO(s),i=MO(t,r);return e=i.registrationPromise,i.installationEntry});return n.fid===Ef?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function DO(t){const e=t||{fid:IO(),registrationStatus:0};return a1(e)}function MO(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(gi.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=NO(t,n);return{installationEntry:n,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:LO(t)}:{installationEntry:e}}async function NO(t,e){try{const n=await EO(t,e);return ou(t.appConfig,n)}catch(n){throw Qw(n)&&n.customData.serverCode===409?await o1(t.appConfig):await ou(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function LO(t){let e=await _y(t.appConfig);for(;e.registrationStatus===1;)await n1(100),e=await _y(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:s}=await Mp(t);return s||n}return e}function _y(t){return od(t,e=>{if(!e)throw gi.create("installation-not-found");return a1(e)})}function a1(t){return VO(t)?{fid:t.fid,registrationStatus:0}:t}function VO(t){return t.registrationStatus===1&&t.registrationTime+Kw<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $O({appConfig:t,heartbeatServiceProvider:e},n){const s=FO(t,n),r=bO(t,n),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&r.append("x-firebase-client",c)}const o={installation:{sdkVersion:Gw,appId:t.appId}},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await t1(()=>fetch(s,a));if(l.ok){const c=await l.json();return Jw(c)}else throw await Zw("Generate Auth Token",l)}function FO(t,{fid:e}){return`${Xw(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Np(t,e=!1){let n;const s=await od(t.appConfig,i=>{if(!l1(i))throw gi.create("not-registered");const o=i.authToken;if(!e&&jO(o))return i;if(o.requestStatus===1)return n=UO(t,e),i;{if(!navigator.onLine)throw gi.create("app-offline");const a=HO(i);return n=BO(t,a),a}});return n?await n:s.authToken}async function UO(t,e){let n=await by(t.appConfig);for(;n.authToken.requestStatus===1;)await n1(100),n=await by(t.appConfig);const s=n.authToken;return s.requestStatus===0?Np(t,e):s}function by(t){return od(t,e=>{if(!l1(e))throw gi.create("not-registered");const n=e.authToken;return qO(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function BO(t,e){try{const n=await $O(t,e),s=Object.assign(Object.assign({},e),{authToken:n});return await ou(t.appConfig,s),n}catch(n){if(Qw(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await o1(t.appConfig);else{const s=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await ou(t.appConfig,s)}throw n}}function l1(t){return t!==void 0&&t.registrationStatus===2}function jO(t){return t.requestStatus===2&&!zO(t)}function zO(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+mO}function HO(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function qO(t){return t.requestStatus===1&&t.requestTime+Kw<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WO(t){const e=t,{installationEntry:n,registrationPromise:s}=await Mp(e);return s?s.catch(console.error):Np(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KO(t,e=!1){const n=t;return await GO(n),(await Np(n,e)).token}async function GO(t){const{registrationPromise:e}=await Mp(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YO(t){if(!t||!t.options)throw Th("App Configuration");if(!t.name)throw Th("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Th(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Th(t){return gi.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1="installations",QO="installations-internal",XO=t=>{const e=t.getProvider("app").getImmediate(),n=YO(e),s=To(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},JO=t=>{const e=t.getProvider("app").getImmediate(),n=To(e,c1).getImmediate();return{getId:()=>WO(n),getToken:r=>KO(n,r)}};function ZO(){hs(new Yn(c1,XO,"PUBLIC")),hs(new Yn(QO,JO,"PRIVATE"))}ZO();Ln(Ww,Op);Ln(Ww,Op,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD="/firebase-messaging-sw.js",tD="/firebase-cloud-messaging-push-scope",u1="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",nD="https://fcmregistrations.googleapis.com/v1",d1="google.c.a.c_id",sD="google.c.a.c_l",rD="google.c.a.ts",iD="google.c.a.e",xy=1e4;var wy;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(wy||(wy={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Wa;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(Wa||(Wa={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function oD(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),s=atob(n),r=new Uint8Array(s.length);for(let i=0;i<s.length;++i)r[i]=s.charCodeAt(i);return r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kh="fcm_token_details_db",aD=5,Ey="fcm_token_object_Store";async function lD(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(i=>i.name).includes(kh))return null;let e=null;return(await sd(kh,aD,{upgrade:async(s,r,i,o)=>{var a;if(r<2||!s.objectStoreNames.contains(Ey))return;const l=o.objectStore(Ey),c=await l.index("fcmSenderId").get(t);if(await l.clear(),!!c){if(r===2){const u=c;if(!u.auth||!u.p256dh||!u.endpoint)return;e={token:u.fcmToken,createTime:(a=u.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:u.auth,p256dh:u.p256dh,endpoint:u.endpoint,swScope:u.swScope,vapidKey:typeof u.vapidKey=="string"?u.vapidKey:Ts(u.vapidKey)}}}else if(r===3){const u=c;e={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:Ts(u.auth),p256dh:Ts(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:Ts(u.vapidKey)}}}else if(r===4){const u=c;e={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:Ts(u.auth),p256dh:Ts(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:Ts(u.vapidKey)}}}}}})).close(),await bh(kh),await bh("fcm_vapid_details_db"),await bh("undefined"),cD(e)?e:null}function cD(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD="firebase-messaging-database",dD=1,Ka="firebase-messaging-store";let Ih=null;function h1(){return Ih||(Ih=sd(uD,dD,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ka)}}})),Ih}async function hD(t){const e=f1(t),s=await(await h1()).transaction(Ka).objectStore(Ka).get(e);if(s)return s;{const r=await lD(t.appConfig.senderId);if(r)return await Lp(t,r),r}}async function Lp(t,e){const n=f1(t),r=(await h1()).transaction(Ka,"readwrite");return await r.objectStore(Ka).put(e,n),await r.done,e}function f1({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},un=new ki("messaging","Messaging",fD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pD(t,e){const n=await $p(t),s=p1(e),r={method:"POST",headers:n,body:JSON.stringify(s)};let i;try{i=await(await fetch(Vp(t.appConfig),r)).json()}catch(o){throw un.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(i.error){const o=i.error.message;throw un.create("token-subscribe-failed",{errorInfo:o})}if(!i.token)throw un.create("token-subscribe-no-token");return i.token}async function gD(t,e){const n=await $p(t),s=p1(e.subscriptionOptions),r={method:"PATCH",headers:n,body:JSON.stringify(s)};let i;try{i=await(await fetch(`${Vp(t.appConfig)}/${e.token}`,r)).json()}catch(o){throw un.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(i.error){const o=i.error.message;throw un.create("token-update-failed",{errorInfo:o})}if(!i.token)throw un.create("token-update-no-token");return i.token}async function mD(t,e){const s={method:"DELETE",headers:await $p(t)};try{const i=await(await fetch(`${Vp(t.appConfig)}/${e}`,s)).json();if(i.error){const o=i.error.message;throw un.create("token-unsubscribe-failed",{errorInfo:o})}}catch(r){throw un.create("token-unsubscribe-failed",{errorInfo:r==null?void 0:r.toString()})}}function Vp({projectId:t}){return`${nD}/projects/${t}/registrations`}async function $p({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function p1({p256dh:t,auth:e,endpoint:n,vapidKey:s}){const r={web:{endpoint:n,auth:e,p256dh:t}};return s!==u1&&(r.web.applicationPubKey=s),r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD=7*24*60*60*1e3;async function vD(t){const e=await bD(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Ts(e.getKey("auth")),p256dh:Ts(e.getKey("p256dh"))},s=await hD(t.firebaseDependencies);if(s){if(xD(s.subscriptionOptions,n))return Date.now()>=s.createTime+yD?_D(t,{token:s.token,createTime:Date.now(),subscriptionOptions:n}):s.token;try{await mD(t.firebaseDependencies,s.token)}catch(r){console.warn(r)}return Ty(t.firebaseDependencies,n)}else return Ty(t.firebaseDependencies,n)}async function _D(t,e){try{const n=await gD(t.firebaseDependencies,e),s=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await Lp(t.firebaseDependencies,s),n}catch(n){throw n}}async function Ty(t,e){const s={token:await pD(t,e),createTime:Date.now(),subscriptionOptions:e};return await Lp(t,s),s.token}async function bD(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:oD(e)})}function xD(t,e){const n=e.vapidKey===t.vapidKey,s=e.endpoint===t.endpoint,r=e.auth===t.auth,i=e.p256dh===t.p256dh;return n&&s&&r&&i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ky(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return wD(e,t),ED(e,t),TD(e,t),e}function wD(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const s=e.notification.body;s&&(t.notification.body=s);const r=e.notification.image;r&&(t.notification.image=r);const i=e.notification.icon;i&&(t.notification.icon=i)}function ED(t,e){e.data&&(t.data=e.data)}function TD(t,e){var n,s,r,i,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const a=(r=(s=e.fcmOptions)===null||s===void 0?void 0:s.link)!==null&&r!==void 0?r:(i=e.notification)===null||i===void 0?void 0:i.click_action;a&&(t.fcmOptions.link=a);const l=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;l&&(t.fcmOptions.analyticsLabel=l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kD(t){return typeof t=="object"&&!!t&&d1 in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ID(t){if(!t||!t.options)throw Sh("App Configuration Object");if(!t.name)throw Sh("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const s of e)if(!n[s])throw Sh(s);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function Sh(t){return un.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e,n,s){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=ID(e);this.firebaseDependencies={app:e,appConfig:r,installations:n,analyticsProvider:s}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AD(t){try{t.swRegistration=await navigator.serviceWorker.register(eD,{scope:tD}),t.swRegistration.update().catch(()=>{}),await CD(t.swRegistration)}catch(e){throw un.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}async function CD(t){return new Promise((e,n)=>{const s=setTimeout(()=>n(new Error(`Service worker not registered after ${xy} ms`)),xy),r=t.installing||t.waiting;t.active?(clearTimeout(s),e()):r?r.onstatechange=i=>{var o;((o=i.target)===null||o===void 0?void 0:o.state)==="activated"&&(r.onstatechange=null,clearTimeout(s),e())}:(clearTimeout(s),n(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PD(t,e){if(!e&&!t.swRegistration&&await AD(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw un.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RD(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=u1)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g1(t,e){if(!navigator)throw un.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw un.create("permission-blocked");return await RD(t,e==null?void 0:e.vapidKey),await PD(t,e==null?void 0:e.serviceWorkerRegistration),vD(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OD(t,e,n){const s=DD(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(s,{message_id:n[d1],message_name:n[sD],message_time:n[rD],message_device_time:Math.floor(Date.now()/1e3)})}function DD(t){switch(t){case Wa.NOTIFICATION_CLICKED:return"notification_open";case Wa.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MD(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Wa.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(ky(n)):t.onMessageHandler.next(ky(n)));const s=n.data;kD(s)&&s[iD]==="1"&&await OD(t,n.messageType,s)}const Iy="@firebase/messaging",Sy="0.12.21";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ND=t=>{const e=new SD(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>MD(e,n)),e},LD=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:s=>g1(e,s)}};function VD(){hs(new Yn("messaging",ND,"PUBLIC")),hs(new Yn("messaging-internal",LD,"PRIVATE")),Ln(Iy,Sy),Ln(Iy,Sy,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m1(){try{await Bw()}catch{return!1}return typeof window<"u"&&Uw()&&JP()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $D(t,e){if(!navigator)throw un.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FD(t=Rp()){return m1().then(e=>{if(!e)throw un.create("unsupported-browser")},e=>{throw un.create("indexed-db-unsupported")}),To(Tt(t),"messaging").getImmediate()}async function UD(t,e){return t=Tt(t),g1(t,e)}function BD(t,e){return t=Tt(t),$D(t,e)}VD();function Fp(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n}function y1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const jD=y1,v1=new ki("auth","Firebase",y1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const au=new Cp("@firebase/auth");function zD(t,...e){au.logLevel<=Be.WARN&&au.warn(`Auth (${ko}): ${t}`,...e)}function Sc(t,...e){au.logLevel<=Be.ERROR&&au.error(`Auth (${ko}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(t,...e){throw Bp(t,...e)}function qn(t,...e){return Bp(t,...e)}function Up(t,e,n){const s=Object.assign(Object.assign({},jD()),{[e]:n});return new ki("auth","Firebase",s).create(e,{appName:t.name})}function Vs(t){return Up(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function HD(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&$n(t,"argument-error"),Up(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Bp(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return v1.create(t,...e)}function Ae(t,e,...n){if(!t)throw Bp(e,...n)}function Rs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Sc(e),new Error(e)}function zs(t,e){t||Rs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function qD(){return Ay()==="http:"||Ay()==="https:"}function Ay(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(qD()||GP()||"connection"in navigator)?navigator.onLine:!0}function KD(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e,n){this.shortDelay=e,this.longDelay=n,zs(n>e,"Short delay should be less than long delay!"),this.isMobile=qP()||YP()}get(){return WD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp(t,e){zs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Rs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Rs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Rs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],QD=new wl(3e4,6e4);function Or(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Dr(t,e,n,s,r={}){return b1(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const a=xl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return KP()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&bl(t.emulatorConfig.host)&&(c.credentials="include"),_1.fetch()(await x1(t,t.config.apiHost,n,a),c)})}async function b1(t,e,n){t._canInitEmulator=!1;const s=Object.assign(Object.assign({},GD),e);try{const r=new JD(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Xl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xl(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Xl(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Xl(t,"user-disabled",o);const u=s[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Up(t,u,c);$n(t,u)}}catch(r){if(r instanceof ps)throw r;$n(t,"network-request-failed",{message:String(r)})}}async function El(t,e,n,s,r={}){const i=await Dr(t,e,n,s,r);return"mfaPendingCredential"in i&&$n(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function x1(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?jp(t.config,r):`${t.config.apiScheme}://${r}`;return YD.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function XD(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class JD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(qn(this.auth,"network-request-failed")),QD.get())})}}function Xl(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=qn(t,e,s);return r.customData._tokenResponse=n,r}function Cy(t){return t!==void 0&&t.enterprise!==void 0}class ZD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return XD(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function eM(t,e){return Dr(t,"GET","/v2/recaptchaConfig",Or(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tM(t,e){return Dr(t,"POST","/v1/accounts:delete",e)}async function lu(t,e){return Dr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ka(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function nM(t,e=!1){const n=Tt(t),s=await n.getIdToken(e),r=zp(s);Ae(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:r,token:s,authTime:ka(Ah(r.auth_time)),issuedAtTime:ka(Ah(r.iat)),expirationTime:ka(Ah(r.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Ah(t){return Number(t)*1e3}function zp(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Sc("JWT malformed, contained fewer than 3 sections"),null;try{const r=Mw(n);return r?JSON.parse(r):(Sc("Failed to decode base64 JWT payload"),null)}catch(r){return Sc("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Py(t){const e=zp(t);return Ae(e,"internal-error"),Ae(typeof e.exp<"u","internal-error"),Ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ga(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof ps&&sM(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function sM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ka(this.lastLoginAt),this.creationTime=ka(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cu(t){var e;const n=t.auth,s=await t.getIdToken(),r=await Ga(t,lu(n,{idToken:s}));Ae(r==null?void 0:r.users.length,n,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?w1(i.providerUserInfo):[],a=oM(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new kf(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function iM(t){const e=Tt(t);await cu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function oM(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function w1(t){return t.map(e=>{var{providerId:n}=e,s=Fp(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aM(t,e){const n=await b1(t,{},async()=>{const s=xl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await x1(t,r,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",_1.fetch()(o,{method:"POST",headers:a,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function lM(t,e){return Dr(t,"POST","/v2/accounts:revokeToken",Or(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ae(e.idToken,"internal-error"),Ae(typeof e.idToken<"u","internal-error"),Ae(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Py(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ae(e.length!==0,"internal-error");const n=Py(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await aM(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new Xi;return s&&(Ae(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(Ae(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(Ae(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xi,this.toJSON())}_performRefresh(){return Rs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(t,e){Ae(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class jn{constructor(e){var{uid:n,auth:s,stsTokenManager:r}=e,i=Fp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new rM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new kf(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Ga(this,this.stsTokenManager.getToken(this.auth,e));return Ae(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return nM(this,e)}reload(){return iM(this)}_assign(e){this!==e&&(Ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new jn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await cu(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Tn(this.auth.app))return Promise.reject(Vs(this.auth));const e=await this.getIdToken();return await Ga(this,tM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,r,i,o,a,l,c,u;const h=(s=n.displayName)!==null&&s!==void 0?s:void 0,p=(r=n.email)!==null&&r!==void 0?r:void 0,g=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,_=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,E=(c=n.createdAt)!==null&&c!==void 0?c:void 0,S=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:D,emailVerified:F,isAnonymous:M,providerData:O,stsTokenManager:T}=n;Ae(D&&T,e,"internal-error");const b=Xi.fromJSON(this.name,T);Ae(typeof D=="string",e,"internal-error"),er(h,e.name),er(p,e.name),Ae(typeof F=="boolean",e,"internal-error"),Ae(typeof M=="boolean",e,"internal-error"),er(g,e.name),er(y,e.name),er(v,e.name),er(_,e.name),er(E,e.name),er(S,e.name);const w=new jn({uid:D,auth:e,email:p,emailVerified:F,displayName:h,isAnonymous:M,photoURL:y,phoneNumber:g,tenantId:v,stsTokenManager:b,createdAt:E,lastLoginAt:S});return O&&Array.isArray(O)&&(w.providerData=O.map(C=>Object.assign({},C))),_&&(w._redirectEventId=_),w}static async _fromIdTokenResponse(e,n,s=!1){const r=new Xi;r.updateFromServerResponse(n);const i=new jn({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await cu(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];Ae(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?w1(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(i!=null&&i.length),a=new Xi;a.updateFromIdToken(s);const l=new jn({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new kf(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry=new Map;function Os(t){zs(t instanceof Function,"Expected a class definition");let e=Ry.get(t);return e?(zs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Ry.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}E1.type="NONE";const Oy=E1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ac(t,e,n){return`firebase:${t}:${e}:${n}`}class Ji{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=Ac(this.userKey,r.apiKey,i),this.fullPersistenceKey=Ac("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await lu(this.auth,{idToken:e}).catch(()=>{});return n?jn._fromGetAccountInfoResponse(this.auth,n,e):null}return jn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Ji(Os(Oy),e,s);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=r[0]||Os(Oy);const o=Ac(s,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){let h;if(typeof u=="string"){const p=await lu(e,{idToken:u}).catch(()=>{});if(!p)break;h=await jn._fromGetAccountInfoResponse(e,p,u)}else h=jn._fromJSON(e,u);c!==i&&(a=h),i=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Ji(i,e,s):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Ji(i,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(S1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(T1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(C1(e))return"Blackberry";if(P1(e))return"Webos";if(k1(e))return"Safari";if((e.includes("chrome/")||I1(e))&&!e.includes("edge/"))return"Chrome";if(A1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function T1(t=dn()){return/firefox\//i.test(t)}function k1(t=dn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function I1(t=dn()){return/crios\//i.test(t)}function S1(t=dn()){return/iemobile/i.test(t)}function A1(t=dn()){return/android/i.test(t)}function C1(t=dn()){return/blackberry/i.test(t)}function P1(t=dn()){return/webos/i.test(t)}function Hp(t=dn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function cM(t=dn()){var e;return Hp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function uM(){return QP()&&document.documentMode===10}function R1(t=dn()){return Hp(t)||A1(t)||P1(t)||C1(t)||/windows phone/i.test(t)||S1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O1(t,e=[]){let n;switch(t){case"Browser":n=Dy(dn());break;case"Worker":n=`${Dy(dn())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ko}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hM(t,e={}){return Dr(t,"GET","/v2/passwordPolicy",Or(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fM=6;class pM{constructor(e){var n,s,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:fM,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,r,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(s=l.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new My(this),this.idTokenSubscription=new My(this),this.beforeStateQueue=new dM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=v1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Os(n)),this._initializationPromise=this.queue(async()=>{var s,r,i;if(!this._deleted&&(this.persistenceManager=await Ji.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await lu(this,{idToken:e}),s=await jn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Tn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let r=s,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await cu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=KD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Tn(this.app))return Promise.reject(Vs(this));const n=e?Tt(e):null;return n&&Ae(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Tn(this.app)?Promise.reject(Vs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Tn(this.app)?Promise.reject(Vs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Os(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await hM(this),n=new pM(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ki("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await lM(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Os(e)||this._popupRedirectResolver;Ae(n,this,"argument-error"),this.redirectPersistenceManager=await Ji.create(this,[Os(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,s,r);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=O1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;if(Tn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&zD(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Mr(t){return Tt(t)}class My{constructor(e){this.auth=e,this.observer=null,this.addObserver=sR(n=>this.observer=n)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ad={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mM(t){ad=t}function D1(t){return ad.loadJS(t)}function yM(){return ad.recaptchaEnterpriseScript}function vM(){return ad.gapiScript}function _M(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class bM{constructor(){this.enterprise=new xM}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class xM{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const wM="recaptcha-enterprise",M1="NO_RECAPTCHA";class EM{constructor(e){this.type=wM,this.auth=Mr(e)}async verify(e="verify",n=!1){async function s(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{eM(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new ZD(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function r(i,o,a){const l=window.grecaptcha;Cy(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(M1)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new bM().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{s(this.auth).then(a=>{if(!n&&Cy(window.grecaptcha))r(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=yM();l.length!==0&&(l+=a),D1(l).then(()=>{r(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Ny(t,e,n,s=!1,r=!1){const i=new EM(t);let o;if(r)o=M1;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return s?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Ly(t,e,n,s,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Ny(t,e,n,n==="getOobCode");return s(t,o)}else return s(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await Ny(t,e,n,n==="getOobCode");return s(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TM(t,e){const n=To(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(pi(i,e??{}))return r;$n(r,"already-initialized")}return n.initialize({options:e})}function kM(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(Os);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function IM(t,e,n){const s=Mr(t);Ae(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=N1(e),{host:o,port:a}=SM(e),l=a===null?"":`:${a}`,c={url:`${i}//${o}${l}/`},u=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){Ae(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ae(pi(c,s.config.emulator)&&pi(u,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=c,s.emulatorConfig=u,s.settings.appVerificationDisabledForTesting=!0,bl(o)?($w(`${i}//${o}${l}`),Fw("Auth",!0)):AM()}function N1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function SM(t){const e=N1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:Vy(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:Vy(o)}}}function Vy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function AM(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Rs("not implemented")}_getIdTokenResponse(e){return Rs("not implemented")}_linkToIdToken(e,n){return Rs("not implemented")}_getReauthenticationResolver(e){return Rs("not implemented")}}async function CM(t,e){return Dr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PM(t,e){return El(t,"POST","/v1/accounts:signInWithPassword",Or(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RM(t,e){return El(t,"POST","/v1/accounts:signInWithEmailLink",Or(t,e))}async function OM(t,e){return El(t,"POST","/v1/accounts:signInWithEmailLink",Or(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya extends qp{constructor(e,n,s,r=null){super("password",s),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Ya(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Ya(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ly(e,n,"signInWithPassword",PM);case"emailLink":return RM(e,{email:this._email,oobCode:this._password});default:$n(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ly(e,s,"signUpPassword",CM);case"emailLink":return OM(e,{idToken:n,email:this._email,oobCode:this._password});default:$n(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zi(t,e){return El(t,"POST","/v1/accounts:signInWithIdp",Or(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DM="http://localhost";class yi extends qp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new yi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):$n("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r}=n,i=Fp(n,["providerId","signInMethod"]);if(!s||!r)return null;const o=new yi(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Zi(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Zi(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Zi(e,n)}buildRequest(){const e={requestUri:DM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=xl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MM(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function NM(t){const e=sa(ra(t)).link,n=e?sa(ra(e)).deep_link_id:null,s=sa(ra(t)).deep_link_id;return(s?sa(ra(s)).link:null)||s||n||e||t}class Wp{constructor(e){var n,s,r,i,o,a;const l=sa(ra(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(s=l.oobCode)!==null&&s!==void 0?s:null,h=MM((r=l.mode)!==null&&r!==void 0?r:null);Ae(c&&u&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=u,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=NM(e);try{return new Wp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(){this.providerId=Io.PROVIDER_ID}static credential(e,n){return Ya._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Wp.parseLink(n);return Ae(s,"argument-error"),Ya._fromEmailAndCode(e,s.code,s.tenantId)}}Io.PROVIDER_ID="password";Io.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Io.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl extends Kp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends Tl{constructor(){super("facebook.com")}static credential(e){return yi._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return lr.credential(e.oauthAccessToken)}catch{return null}}}lr.FACEBOOK_SIGN_IN_METHOD="facebook.com";lr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps extends Tl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return yi._fromParams({providerId:Ps.PROVIDER_ID,signInMethod:Ps.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ps.credentialFromTaggedObject(e)}static credentialFromError(e){return Ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Ps.credential(n,s)}catch{return null}}}Ps.GOOGLE_SIGN_IN_METHOD="google.com";Ps.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr extends Tl{constructor(){super("github.com")}static credential(e){return yi._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cr.credentialFromTaggedObject(e)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cr.credential(e.oauthAccessToken)}catch{return null}}}cr.GITHUB_SIGN_IN_METHOD="github.com";cr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur extends Tl{constructor(){super("twitter.com")}static credential(e,n){return yi._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return ur.credential(n,s)}catch{return null}}}ur.TWITTER_SIGN_IN_METHOD="twitter.com";ur.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await jn._fromIdTokenResponse(e,s,r),o=$y(s);return new vi({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=$y(s);return new vi({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function $y(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu extends ps{constructor(e,n,s,r){var i;super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,uu.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new uu(e,n,s,r)}}function L1(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?uu._fromErrorAndOperation(t,i,e,s):i})}async function LM(t,e,n=!1){const s=await Ga(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return vi._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VM(t,e,n=!1){const{auth:s}=t;if(Tn(s.app))return Promise.reject(Vs(s));const r="reauthenticate";try{const i=await Ga(t,L1(s,r,e,t),n);Ae(i.idToken,s,"internal-error");const o=zp(i.idToken);Ae(o,s,"internal-error");const{sub:a}=o;return Ae(t.uid===a,s,"user-mismatch"),vi._forOperation(t,r,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&$n(s,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V1(t,e,n=!1){if(Tn(t.app))return Promise.reject(Vs(t));const s="signIn",r=await L1(t,s,e),i=await vi._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}async function $M(t,e){return V1(Mr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FM(t,e){return El(t,"POST","/v1/accounts:signInWithCustomToken",Or(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ch(t,e){if(Tn(t.app))return Promise.reject(Vs(t));const n=Mr(t),s=await FM(n,{token:e,returnSecureToken:!0}),r=await vi._fromIdTokenResponse(n,"signIn",s);return await n._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UM(t){const e=Mr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function BM(t,e,n){return Tn(t.app)?Promise.reject(Vs(t)):$M(Tt(t),Io.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&UM(t),s})}function jM(t,e,n,s){return Tt(t).onIdTokenChanged(e,n,s)}function zM(t,e,n){return Tt(t).beforeAuthStateChanged(e,n)}function HM(t){return Tt(t).signOut()}const du="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(du,"1"),this.storage.removeItem(du),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qM=1e3,WM=10;class F1 extends $1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=R1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);uM()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,WM):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},qM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}F1.type="LOCAL";const KM=F1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1 extends $1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}U1.type="SESSION";const B1=U1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GM(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new ld(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await GM(a);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ld.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gp(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=Gp("",20);r.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(h){const p=h;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(p.data.response);break;default:clearTimeout(u),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ls(){return window}function QM(t){ls().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j1(){return typeof ls().WorkerGlobalScope<"u"&&typeof ls().importScripts=="function"}async function XM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function JM(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function ZM(){return j1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1="firebaseLocalStorageDb",e4=1,hu="firebaseLocalStorage",H1="fbase_key";class kl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function cd(t,e){return t.transaction([hu],e?"readwrite":"readonly").objectStore(hu)}function t4(){const t=indexedDB.deleteDatabase(z1);return new kl(t).toPromise()}function If(){const t=indexedDB.open(z1,e4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(hu,{keyPath:H1})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(hu)?e(s):(s.close(),await t4(),e(await If()))})})}async function Fy(t,e,n){const s=cd(t,!0).put({[H1]:e,value:n});return new kl(s).toPromise()}async function n4(t,e){const n=cd(t,!1).get(e),s=await new kl(n).toPromise();return s===void 0?null:s.value}function Uy(t,e){const n=cd(t,!0).delete(e);return new kl(n).toPromise()}const s4=800,r4=3;class q1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await If(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>r4)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return j1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ld._getInstance(ZM()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await XM(),!this.activeServiceWorker)return;this.sender=new YM(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||JM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await If();return await Fy(e,du,"1"),await Uy(e,du),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Fy(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>n4(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Uy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=cd(r,!1).getAll();return new kl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),s4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}q1.type="LOCAL";const i4=q1;new wl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(t,e){return e?Os(e):(Ae(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp extends qp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Zi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Zi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Zi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function o4(t){return V1(t.auth,new Yp(t),t.bypassAuthState)}function a4(t){const{auth:e,user:n}=t;return Ae(n,e,"internal-error"),VM(n,new Yp(t),t.bypassAuthState)}async function l4(t){const{auth:e,user:n}=t;return Ae(n,e,"internal-error"),LM(n,new Yp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return o4;case"linkViaPopup":case"linkViaRedirect":return l4;case"reauthViaPopup":case"reauthViaRedirect":return a4;default:$n(this.auth,"internal-error")}}resolve(e){zs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4=new wl(2e3,1e4);async function u4(t,e,n){if(Tn(t.app))return Promise.reject(qn(t,"operation-not-supported-in-this-environment"));const s=Mr(t);HD(t,e,Kp);const r=W1(s,n);return new ti(s,"signInViaPopup",e,r).executeNotNull()}class ti extends K1{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,ti.currentPopupAction&&ti.currentPopupAction.cancel(),ti.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ae(e,this.auth,"internal-error"),e}async onExecution(){zs(this.filter.length===1,"Popup operations only handle one event");const e=Gp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(qn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(qn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ti.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(qn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,c4.get())};e()}}ti.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d4="pendingRedirect",Cc=new Map;class h4 extends K1{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Cc.get(this.auth._key());if(!e){try{const s=await f4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Cc.set(this.auth._key(),e)}return this.bypassAuthState||Cc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function f4(t,e){const n=m4(e),s=g4(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function p4(t,e){Cc.set(t._key(),e)}function g4(t){return Os(t._redirectPersistence)}function m4(t){return Ac(d4,t.config.apiKey,t.name)}async function y4(t,e,n=!1){if(Tn(t.app))return Promise.reject(Vs(t));const s=Mr(t),r=W1(s,e),o=await new h4(s,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v4=10*60*1e3;class _4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!b4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!G1(e)){const r=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(qn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=v4&&this.cachedEventUids.clear(),this.cachedEventUids.has(By(e))}saveEventToCache(e){this.cachedEventUids.add(By(e)),this.lastProcessedEventTime=Date.now()}}function By(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function G1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function b4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return G1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x4(t,e={}){return Dr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,E4=/^https?/;async function T4(t){if(t.config.emulator)return;const{authorizedDomains:e}=await x4(t);for(const n of e)try{if(k4(n))return}catch{}$n(t,"unauthorized-domain")}function k4(t){const e=Tf(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!E4.test(n))return!1;if(w4.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I4=new wl(3e4,6e4);function jy(){const t=ls().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function S4(t){return new Promise((e,n)=>{var s,r,i;function o(){jy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{jy(),n(qn(t,"network-request-failed"))},timeout:I4.get()})}if(!((r=(s=ls().gapi)===null||s===void 0?void 0:s.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((i=ls().gapi)===null||i===void 0)&&i.load)o();else{const a=_M("iframefcb");return ls()[a]=()=>{gapi.load?o():n(qn(t,"network-request-failed"))},D1(`${vM()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Pc=null,e})}let Pc=null;function A4(t){return Pc=Pc||S4(t),Pc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4=new wl(5e3,15e3),P4="__/auth/iframe",R4="emulator/auth/iframe",O4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},D4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function M4(t){const e=t.config;Ae(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?jp(e,R4):`https://${t.config.authDomain}/${P4}`,s={apiKey:e.apiKey,appName:t.name,v:ko},r=D4.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${xl(s).slice(1)}`}async function N4(t){const e=await A4(t),n=ls().gapi;return Ae(n,t,"internal-error"),e.open({where:document.body,url:M4(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:O4,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=qn(t,"network-request-failed"),a=ls().setTimeout(()=>{i(o)},C4.get());function l(){ls().clearTimeout(a),r(s)}s.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},V4=500,$4=600,F4="_blank",U4="http://localhost";class zy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function B4(t,e,n,s=V4,r=$4){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const l=Object.assign(Object.assign({},L4),{width:s.toString(),height:r.toString(),top:i,left:o}),c=dn().toLowerCase();n&&(a=I1(c)?F4:n),T1(c)&&(e=e||U4,l.scrollbars="yes");const u=Object.entries(l).reduce((p,[g,y])=>`${p}${g}=${y},`,"");if(cM(c)&&a!=="_self")return j4(e||"",a),new zy(null);const h=window.open(e||"",a,u);Ae(h,t,"popup-blocked");try{h.focus()}catch{}return new zy(h)}function j4(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z4="__/auth/handler",H4="emulator/auth/handler",q4=encodeURIComponent("fac");async function Hy(t,e,n,s,r,i){Ae(t.config.authDomain,t,"auth-domain-config-required"),Ae(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:ko,eventId:r};if(e instanceof Kp){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",nR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries({}))o[u]=h}if(e instanceof Tl){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${q4}=${encodeURIComponent(l)}`:"";return`${W4(t)}?${xl(a).slice(1)}${c}`}function W4({config:t}){return t.emulator?jp(t,H4):`https://${t.authDomain}/${z4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ph="webStorageSupport";class K4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=B1,this._completeRedirectFn=y4,this._overrideRedirectResult=p4}async _openPopup(e,n,s,r){var i;zs((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Hy(e,n,s,Tf(),r);return B4(e,o,Gp())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await Hy(e,n,s,Tf(),r);return QM(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(zs(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await N4(e),s=new _4(e);return n.register("authEvent",r=>(Ae(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ph,{type:Ph},r=>{var i;const o=(i=r==null?void 0:r[0])===null||i===void 0?void 0:i[Ph];o!==void 0&&n(!!o),$n(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=T4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return R1()||k1()||Hp()}}const G4=K4;var qy="@firebase/auth",Wy="1.10.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q4(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function X4(t){hs(new Yn("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;Ae(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:O1(t)},c=new gM(s,r,i,l);return kM(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),hs(new Yn("auth-internal",e=>{const n=Mr(e.getProvider("auth").getImmediate());return(s=>new Y4(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ln(qy,Wy,Q4(t)),Ln(qy,Wy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4=5*60,Z4=Vw("authIdTokenMaxAge")||J4;let Ky=null;const eN=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>Z4)return;const r=n==null?void 0:n.token;Ky!==r&&(Ky=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function Qp(t=Rp()){const e=To(t,"auth");if(e.isInitialized())return e.getImmediate();const n=TM(t,{popupRedirectResolver:G4,persistence:[i4,KM,B1]}),s=Vw("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=eN(i.toString());zM(n,o,()=>o(n.currentUser)),jM(n,a=>o(a))}}const r=Nw("auth");return r&&IM(n,`http://${r}`),n}function tN(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}mM({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=qn("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",tN().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});X4("Browser");var Gy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vr,Y1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,b){function w(){}w.prototype=b.prototype,T.D=b.prototype,T.prototype=new w,T.prototype.constructor=T,T.C=function(C,k,A){for(var I=Array(arguments.length-2),V=2;V<arguments.length;V++)I[V-2]=arguments[V];return b.prototype[k].apply(C,I)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(T,b,w){w||(w=0);var C=Array(16);if(typeof b=="string")for(var k=0;16>k;++k)C[k]=b.charCodeAt(w++)|b.charCodeAt(w++)<<8|b.charCodeAt(w++)<<16|b.charCodeAt(w++)<<24;else for(k=0;16>k;++k)C[k]=b[w++]|b[w++]<<8|b[w++]<<16|b[w++]<<24;b=T.g[0],w=T.g[1],k=T.g[2];var A=T.g[3],I=b+(A^w&(k^A))+C[0]+3614090360&4294967295;b=w+(I<<7&4294967295|I>>>25),I=A+(k^b&(w^k))+C[1]+3905402710&4294967295,A=b+(I<<12&4294967295|I>>>20),I=k+(w^A&(b^w))+C[2]+606105819&4294967295,k=A+(I<<17&4294967295|I>>>15),I=w+(b^k&(A^b))+C[3]+3250441966&4294967295,w=k+(I<<22&4294967295|I>>>10),I=b+(A^w&(k^A))+C[4]+4118548399&4294967295,b=w+(I<<7&4294967295|I>>>25),I=A+(k^b&(w^k))+C[5]+1200080426&4294967295,A=b+(I<<12&4294967295|I>>>20),I=k+(w^A&(b^w))+C[6]+2821735955&4294967295,k=A+(I<<17&4294967295|I>>>15),I=w+(b^k&(A^b))+C[7]+4249261313&4294967295,w=k+(I<<22&4294967295|I>>>10),I=b+(A^w&(k^A))+C[8]+1770035416&4294967295,b=w+(I<<7&4294967295|I>>>25),I=A+(k^b&(w^k))+C[9]+2336552879&4294967295,A=b+(I<<12&4294967295|I>>>20),I=k+(w^A&(b^w))+C[10]+4294925233&4294967295,k=A+(I<<17&4294967295|I>>>15),I=w+(b^k&(A^b))+C[11]+2304563134&4294967295,w=k+(I<<22&4294967295|I>>>10),I=b+(A^w&(k^A))+C[12]+1804603682&4294967295,b=w+(I<<7&4294967295|I>>>25),I=A+(k^b&(w^k))+C[13]+4254626195&4294967295,A=b+(I<<12&4294967295|I>>>20),I=k+(w^A&(b^w))+C[14]+2792965006&4294967295,k=A+(I<<17&4294967295|I>>>15),I=w+(b^k&(A^b))+C[15]+1236535329&4294967295,w=k+(I<<22&4294967295|I>>>10),I=b+(k^A&(w^k))+C[1]+4129170786&4294967295,b=w+(I<<5&4294967295|I>>>27),I=A+(w^k&(b^w))+C[6]+3225465664&4294967295,A=b+(I<<9&4294967295|I>>>23),I=k+(b^w&(A^b))+C[11]+643717713&4294967295,k=A+(I<<14&4294967295|I>>>18),I=w+(A^b&(k^A))+C[0]+3921069994&4294967295,w=k+(I<<20&4294967295|I>>>12),I=b+(k^A&(w^k))+C[5]+3593408605&4294967295,b=w+(I<<5&4294967295|I>>>27),I=A+(w^k&(b^w))+C[10]+38016083&4294967295,A=b+(I<<9&4294967295|I>>>23),I=k+(b^w&(A^b))+C[15]+3634488961&4294967295,k=A+(I<<14&4294967295|I>>>18),I=w+(A^b&(k^A))+C[4]+3889429448&4294967295,w=k+(I<<20&4294967295|I>>>12),I=b+(k^A&(w^k))+C[9]+568446438&4294967295,b=w+(I<<5&4294967295|I>>>27),I=A+(w^k&(b^w))+C[14]+3275163606&4294967295,A=b+(I<<9&4294967295|I>>>23),I=k+(b^w&(A^b))+C[3]+4107603335&4294967295,k=A+(I<<14&4294967295|I>>>18),I=w+(A^b&(k^A))+C[8]+1163531501&4294967295,w=k+(I<<20&4294967295|I>>>12),I=b+(k^A&(w^k))+C[13]+2850285829&4294967295,b=w+(I<<5&4294967295|I>>>27),I=A+(w^k&(b^w))+C[2]+4243563512&4294967295,A=b+(I<<9&4294967295|I>>>23),I=k+(b^w&(A^b))+C[7]+1735328473&4294967295,k=A+(I<<14&4294967295|I>>>18),I=w+(A^b&(k^A))+C[12]+2368359562&4294967295,w=k+(I<<20&4294967295|I>>>12),I=b+(w^k^A)+C[5]+4294588738&4294967295,b=w+(I<<4&4294967295|I>>>28),I=A+(b^w^k)+C[8]+2272392833&4294967295,A=b+(I<<11&4294967295|I>>>21),I=k+(A^b^w)+C[11]+1839030562&4294967295,k=A+(I<<16&4294967295|I>>>16),I=w+(k^A^b)+C[14]+4259657740&4294967295,w=k+(I<<23&4294967295|I>>>9),I=b+(w^k^A)+C[1]+2763975236&4294967295,b=w+(I<<4&4294967295|I>>>28),I=A+(b^w^k)+C[4]+1272893353&4294967295,A=b+(I<<11&4294967295|I>>>21),I=k+(A^b^w)+C[7]+4139469664&4294967295,k=A+(I<<16&4294967295|I>>>16),I=w+(k^A^b)+C[10]+3200236656&4294967295,w=k+(I<<23&4294967295|I>>>9),I=b+(w^k^A)+C[13]+681279174&4294967295,b=w+(I<<4&4294967295|I>>>28),I=A+(b^w^k)+C[0]+3936430074&4294967295,A=b+(I<<11&4294967295|I>>>21),I=k+(A^b^w)+C[3]+3572445317&4294967295,k=A+(I<<16&4294967295|I>>>16),I=w+(k^A^b)+C[6]+76029189&4294967295,w=k+(I<<23&4294967295|I>>>9),I=b+(w^k^A)+C[9]+3654602809&4294967295,b=w+(I<<4&4294967295|I>>>28),I=A+(b^w^k)+C[12]+3873151461&4294967295,A=b+(I<<11&4294967295|I>>>21),I=k+(A^b^w)+C[15]+530742520&4294967295,k=A+(I<<16&4294967295|I>>>16),I=w+(k^A^b)+C[2]+3299628645&4294967295,w=k+(I<<23&4294967295|I>>>9),I=b+(k^(w|~A))+C[0]+4096336452&4294967295,b=w+(I<<6&4294967295|I>>>26),I=A+(w^(b|~k))+C[7]+1126891415&4294967295,A=b+(I<<10&4294967295|I>>>22),I=k+(b^(A|~w))+C[14]+2878612391&4294967295,k=A+(I<<15&4294967295|I>>>17),I=w+(A^(k|~b))+C[5]+4237533241&4294967295,w=k+(I<<21&4294967295|I>>>11),I=b+(k^(w|~A))+C[12]+1700485571&4294967295,b=w+(I<<6&4294967295|I>>>26),I=A+(w^(b|~k))+C[3]+2399980690&4294967295,A=b+(I<<10&4294967295|I>>>22),I=k+(b^(A|~w))+C[10]+4293915773&4294967295,k=A+(I<<15&4294967295|I>>>17),I=w+(A^(k|~b))+C[1]+2240044497&4294967295,w=k+(I<<21&4294967295|I>>>11),I=b+(k^(w|~A))+C[8]+1873313359&4294967295,b=w+(I<<6&4294967295|I>>>26),I=A+(w^(b|~k))+C[15]+4264355552&4294967295,A=b+(I<<10&4294967295|I>>>22),I=k+(b^(A|~w))+C[6]+2734768916&4294967295,k=A+(I<<15&4294967295|I>>>17),I=w+(A^(k|~b))+C[13]+1309151649&4294967295,w=k+(I<<21&4294967295|I>>>11),I=b+(k^(w|~A))+C[4]+4149444226&4294967295,b=w+(I<<6&4294967295|I>>>26),I=A+(w^(b|~k))+C[11]+3174756917&4294967295,A=b+(I<<10&4294967295|I>>>22),I=k+(b^(A|~w))+C[2]+718787259&4294967295,k=A+(I<<15&4294967295|I>>>17),I=w+(A^(k|~b))+C[9]+3951481745&4294967295,T.g[0]=T.g[0]+b&4294967295,T.g[1]=T.g[1]+(k+(I<<21&4294967295|I>>>11))&4294967295,T.g[2]=T.g[2]+k&4294967295,T.g[3]=T.g[3]+A&4294967295}s.prototype.u=function(T,b){b===void 0&&(b=T.length);for(var w=b-this.blockSize,C=this.B,k=this.h,A=0;A<b;){if(k==0)for(;A<=w;)r(this,T,A),A+=this.blockSize;if(typeof T=="string"){for(;A<b;)if(C[k++]=T.charCodeAt(A++),k==this.blockSize){r(this,C),k=0;break}}else for(;A<b;)if(C[k++]=T[A++],k==this.blockSize){r(this,C),k=0;break}}this.h=k,this.o+=b},s.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var b=1;b<T.length-8;++b)T[b]=0;var w=8*this.o;for(b=T.length-8;b<T.length;++b)T[b]=w&255,w/=256;for(this.u(T),T=Array(16),b=w=0;4>b;++b)for(var C=0;32>C;C+=8)T[w++]=this.g[b]>>>C&255;return T};function i(T,b){var w=a;return Object.prototype.hasOwnProperty.call(w,T)?w[T]:w[T]=b(T)}function o(T,b){this.h=b;for(var w=[],C=!0,k=T.length-1;0<=k;k--){var A=T[k]|0;C&&A==b||(w[k]=A,C=!1)}this.g=w}var a={};function l(T){return-128<=T&&128>T?i(T,function(b){return new o([b|0],0>b?-1:0)}):new o([T|0],0>T?-1:0)}function c(T){if(isNaN(T)||!isFinite(T))return h;if(0>T)return _(c(-T));for(var b=[],w=1,C=0;T>=w;C++)b[C]=T/w|0,w*=4294967296;return new o(b,0)}function u(T,b){if(T.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(T.charAt(0)=="-")return _(u(T.substring(1),b));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=c(Math.pow(b,8)),C=h,k=0;k<T.length;k+=8){var A=Math.min(8,T.length-k),I=parseInt(T.substring(k,k+A),b);8>A?(A=c(Math.pow(b,A)),C=C.j(A).add(c(I))):(C=C.j(w),C=C.add(c(I)))}return C}var h=l(0),p=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(v(this))return-_(this).m();for(var T=0,b=1,w=0;w<this.g.length;w++){var C=this.i(w);T+=(0<=C?C:4294967296+C)*b,b*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(y(this))return"0";if(v(this))return"-"+_(this).toString(T);for(var b=c(Math.pow(T,6)),w=this,C="";;){var k=F(w,b).g;w=E(w,k.j(b));var A=((0<w.g.length?w.g[0]:w.h)>>>0).toString(T);if(w=k,y(w))return A+C;for(;6>A.length;)A="0"+A;C=A+C}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function y(T){if(T.h!=0)return!1;for(var b=0;b<T.g.length;b++)if(T.g[b]!=0)return!1;return!0}function v(T){return T.h==-1}t.l=function(T){return T=E(this,T),v(T)?-1:y(T)?0:1};function _(T){for(var b=T.g.length,w=[],C=0;C<b;C++)w[C]=~T.g[C];return new o(w,~T.h).add(p)}t.abs=function(){return v(this)?_(this):this},t.add=function(T){for(var b=Math.max(this.g.length,T.g.length),w=[],C=0,k=0;k<=b;k++){var A=C+(this.i(k)&65535)+(T.i(k)&65535),I=(A>>>16)+(this.i(k)>>>16)+(T.i(k)>>>16);C=I>>>16,A&=65535,I&=65535,w[k]=I<<16|A}return new o(w,w[w.length-1]&-2147483648?-1:0)};function E(T,b){return T.add(_(b))}t.j=function(T){if(y(this)||y(T))return h;if(v(this))return v(T)?_(this).j(_(T)):_(_(this).j(T));if(v(T))return _(this.j(_(T)));if(0>this.l(g)&&0>T.l(g))return c(this.m()*T.m());for(var b=this.g.length+T.g.length,w=[],C=0;C<2*b;C++)w[C]=0;for(C=0;C<this.g.length;C++)for(var k=0;k<T.g.length;k++){var A=this.i(C)>>>16,I=this.i(C)&65535,V=T.i(k)>>>16,Y=T.i(k)&65535;w[2*C+2*k]+=I*Y,S(w,2*C+2*k),w[2*C+2*k+1]+=A*Y,S(w,2*C+2*k+1),w[2*C+2*k+1]+=I*V,S(w,2*C+2*k+1),w[2*C+2*k+2]+=A*V,S(w,2*C+2*k+2)}for(C=0;C<b;C++)w[C]=w[2*C+1]<<16|w[2*C];for(C=b;C<2*b;C++)w[C]=0;return new o(w,0)};function S(T,b){for(;(T[b]&65535)!=T[b];)T[b+1]+=T[b]>>>16,T[b]&=65535,b++}function D(T,b){this.g=T,this.h=b}function F(T,b){if(y(b))throw Error("division by zero");if(y(T))return new D(h,h);if(v(T))return b=F(_(T),b),new D(_(b.g),_(b.h));if(v(b))return b=F(T,_(b)),new D(_(b.g),b.h);if(30<T.g.length){if(v(T)||v(b))throw Error("slowDivide_ only works with positive integers.");for(var w=p,C=b;0>=C.l(T);)w=M(w),C=M(C);var k=O(w,1),A=O(C,1);for(C=O(C,2),w=O(w,2);!y(C);){var I=A.add(C);0>=I.l(T)&&(k=k.add(w),A=I),C=O(C,1),w=O(w,1)}return b=E(T,k.j(b)),new D(k,b)}for(k=h;0<=T.l(b);){for(w=Math.max(1,Math.floor(T.m()/b.m())),C=Math.ceil(Math.log(w)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),A=c(w),I=A.j(b);v(I)||0<I.l(T);)w-=C,A=c(w),I=A.j(b);y(A)&&(A=p),k=k.add(A),T=E(T,I)}return new D(k,T)}t.A=function(T){return F(this,T).h},t.and=function(T){for(var b=Math.max(this.g.length,T.g.length),w=[],C=0;C<b;C++)w[C]=this.i(C)&T.i(C);return new o(w,this.h&T.h)},t.or=function(T){for(var b=Math.max(this.g.length,T.g.length),w=[],C=0;C<b;C++)w[C]=this.i(C)|T.i(C);return new o(w,this.h|T.h)},t.xor=function(T){for(var b=Math.max(this.g.length,T.g.length),w=[],C=0;C<b;C++)w[C]=this.i(C)^T.i(C);return new o(w,this.h^T.h)};function M(T){for(var b=T.g.length+1,w=[],C=0;C<b;C++)w[C]=T.i(C)<<1|T.i(C-1)>>>31;return new o(w,T.h)}function O(T,b){var w=b>>5;b%=32;for(var C=T.g.length-w,k=[],A=0;A<C;A++)k[A]=0<b?T.i(A+w)>>>b|T.i(A+w+1)<<32-b:T.i(A+w);return new o(k,T.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Y1=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,vr=o}).apply(typeof Gy<"u"?Gy:typeof self<"u"?self:typeof window<"u"?window:{});var Jl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Q1,ia,X1,Rc,Sf,J1,Z1,eE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,m,x){return d==Array.prototype||d==Object.prototype||(d[m]=x.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jl=="object"&&Jl];for(var m=0;m<d.length;++m){var x=d[m];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var s=n(this);function r(d,m){if(m)e:{var x=s;d=d.split(".");for(var P=0;P<d.length-1;P++){var j=d[P];if(!(j in x))break e;x=x[j]}d=d[d.length-1],P=x[d],m=m(P),m!=P&&m!=null&&e(x,d,{configurable:!0,writable:!0,value:m})}}function i(d,m){d instanceof String&&(d+="");var x=0,P=!1,j={next:function(){if(!P&&x<d.length){var q=x++;return{value:m(q,d[q]),done:!1}}return P=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}r("Array.prototype.values",function(d){return d||function(){return i(this,function(m,x){return x})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(d){var m=typeof d;return m=m!="object"?m:d?Array.isArray(d)?"array":m:"null",m=="array"||m=="object"&&typeof d.length=="number"}function c(d){var m=typeof d;return m=="object"&&d!=null||m=="function"}function u(d,m,x){return d.call.apply(d.bind,arguments)}function h(d,m,x){if(!d)throw Error();if(2<arguments.length){var P=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,P),d.apply(m,j)}}return function(){return d.apply(m,arguments)}}function p(d,m,x){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:h,p.apply(null,arguments)}function g(d,m){var x=Array.prototype.slice.call(arguments,1);return function(){var P=x.slice();return P.push.apply(P,arguments),d.apply(this,P)}}function y(d,m){function x(){}x.prototype=m.prototype,d.aa=m.prototype,d.prototype=new x,d.prototype.constructor=d,d.Qb=function(P,j,q){for(var oe=Array(arguments.length-2),st=2;st<arguments.length;st++)oe[st-2]=arguments[st];return m.prototype[j].apply(P,oe)}}function v(d){const m=d.length;if(0<m){const x=Array(m);for(let P=0;P<m;P++)x[P]=d[P];return x}return[]}function _(d,m){for(let x=1;x<arguments.length;x++){const P=arguments[x];if(l(P)){const j=d.length||0,q=P.length||0;d.length=j+q;for(let oe=0;oe<q;oe++)d[j+oe]=P[oe]}else d.push(P)}}class E{constructor(m,x){this.i=m,this.j=x,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function S(d){return/^[\s\xa0]*$/.test(d)}function D(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function F(d){return F[" "](d),d}F[" "]=function(){};var M=D().indexOf("Gecko")!=-1&&!(D().toLowerCase().indexOf("webkit")!=-1&&D().indexOf("Edge")==-1)&&!(D().indexOf("Trident")!=-1||D().indexOf("MSIE")!=-1)&&D().indexOf("Edge")==-1;function O(d,m,x){for(const P in d)m.call(x,d[P],P,d)}function T(d,m){for(const x in d)m.call(void 0,d[x],x,d)}function b(d){const m={};for(const x in d)m[x]=d[x];return m}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(d,m){let x,P;for(let j=1;j<arguments.length;j++){P=arguments[j];for(x in P)d[x]=P[x];for(let q=0;q<w.length;q++)x=w[q],Object.prototype.hasOwnProperty.call(P,x)&&(d[x]=P[x])}}function k(d){var m=1;d=d.split(":");const x=[];for(;0<m&&d.length;)x.push(d.shift()),m--;return d.length&&x.push(d.join(":")),x}function A(d){a.setTimeout(()=>{throw d},0)}function I(){var d=Ve;let m=null;return d.g&&(m=d.g,d.g=d.g.next,d.g||(d.h=null),m.next=null),m}class V{constructor(){this.h=this.g=null}add(m,x){const P=Y.get();P.set(m,x),this.h?this.h.next=P:this.g=P,this.h=P}}var Y=new E(()=>new de,d=>d.reset());class de{constructor(){this.next=this.g=this.h=null}set(m,x){this.h=m,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,we=!1,Ve=new V,ht=()=>{const d=a.Promise.resolve(void 0);ee=()=>{d.then(Vt)}};var Vt=()=>{for(var d;d=I();){try{d.h.call(d.g)}catch(x){A(x)}var m=Y;m.j(d),100>m.h&&(m.h++,d.next=m.g,m.g=d)}we=!1};function Ye(){this.s=this.s,this.C=this.C}Ye.prototype.s=!1,Ye.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ye.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function tt(d,m){this.type=d,this.g=this.target=m,this.defaultPrevented=!1}tt.prototype.h=function(){this.defaultPrevented=!0};var Kt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,m=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const x=()=>{};a.addEventListener("test",x,m),a.removeEventListener("test",x,m)}catch{}return d}();function Gt(d,m){if(tt.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var x=this.type=d.type,P=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=m,m=d.relatedTarget){if(M){e:{try{F(m.nodeName);var j=!0;break e}catch{}j=!1}j||(m=null)}}else x=="mouseover"?m=d.fromElement:x=="mouseout"&&(m=d.toElement);this.relatedTarget=m,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:gt[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Gt.aa.h.call(this)}}y(Gt,tt);var gt={2:"touch",3:"pen",4:"mouse"};Gt.prototype.h=function(){Gt.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var W="closure_listenable_"+(1e6*Math.random()|0),he=0;function ce(d,m,x,P,j){this.listener=d,this.proxy=null,this.src=m,this.type=x,this.capture=!!P,this.ha=j,this.key=++he,this.da=this.fa=!1}function ve(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Ke(d){this.src=d,this.g={},this.h=0}Ke.prototype.add=function(d,m,x,P,j){var q=d.toString();d=this.g[q],d||(d=this.g[q]=[],this.h++);var oe=$(d,m,P,j);return-1<oe?(m=d[oe],x||(m.fa=!1)):(m=new ce(m,this.src,q,!!P,j),m.fa=x,d.push(m)),m};function L(d,m){var x=m.type;if(x in d.g){var P=d.g[x],j=Array.prototype.indexOf.call(P,m,void 0),q;(q=0<=j)&&Array.prototype.splice.call(P,j,1),q&&(ve(m),d.g[x].length==0&&(delete d.g[x],d.h--))}}function $(d,m,x,P){for(var j=0;j<d.length;++j){var q=d[j];if(!q.da&&q.listener==m&&q.capture==!!x&&q.ha==P)return j}return-1}var B="closure_lm_"+(1e6*Math.random()|0),K={};function J(d,m,x,P,j){if(Array.isArray(m)){for(var q=0;q<m.length;q++)J(d,m[q],x,P,j);return null}return x=Re(x),d&&d[W]?d.K(m,x,c(P)?!!P.capture:!1,j):Q(d,m,x,!1,P,j)}function Q(d,m,x,P,j,q){if(!m)throw Error("Invalid event type");var oe=c(j)?!!j.capture:!!j,st=ae(d);if(st||(d[B]=st=new Ke(d)),x=st.add(m,x,P,oe,q),x.proxy)return x;if(P=le(),x.proxy=P,P.src=d,P.listener=x,d.addEventListener)Kt||(j=oe),j===void 0&&(j=!1),d.addEventListener(m.toString(),P,j);else if(d.attachEvent)d.attachEvent(te(m.toString()),P);else if(d.addListener&&d.removeListener)d.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return x}function le(){function d(x){return m.call(d.src,d.listener,x)}const m=Te;return d}function ie(d,m,x,P,j){if(Array.isArray(m))for(var q=0;q<m.length;q++)ie(d,m[q],x,P,j);else P=c(P)?!!P.capture:!!P,x=Re(x),d&&d[W]?(d=d.i,m=String(m).toString(),m in d.g&&(q=d.g[m],x=$(q,x,P,j),-1<x&&(ve(q[x]),Array.prototype.splice.call(q,x,1),q.length==0&&(delete d.g[m],d.h--)))):d&&(d=ae(d))&&(m=d.g[m.toString()],d=-1,m&&(d=$(m,x,P,j)),(x=-1<d?m[d]:null)&&se(x))}function se(d){if(typeof d!="number"&&d&&!d.da){var m=d.src;if(m&&m[W])L(m.i,d);else{var x=d.type,P=d.proxy;m.removeEventListener?m.removeEventListener(x,P,d.capture):m.detachEvent?m.detachEvent(te(x),P):m.addListener&&m.removeListener&&m.removeListener(P),(x=ae(m))?(L(x,d),x.h==0&&(x.src=null,m[B]=null)):ve(d)}}}function te(d){return d in K?K[d]:K[d]="on"+d}function Te(d,m){if(d.da)d=!0;else{m=new Gt(m,this);var x=d.listener,P=d.ha||d.src;d.fa&&se(d),d=x.call(P,m)}return d}function ae(d){return d=d[B],d instanceof Ke?d:null}var xe="__closure_events_fn_"+(1e9*Math.random()>>>0);function Re(d){return typeof d=="function"?d:(d[xe]||(d[xe]=function(m){return d.handleEvent(m)}),d[xe])}function Se(){Ye.call(this),this.i=new Ke(this),this.M=this,this.F=null}y(Se,Ye),Se.prototype[W]=!0,Se.prototype.removeEventListener=function(d,m,x,P){ie(this,d,m,x,P)};function Ne(d,m){var x,P=d.F;if(P)for(x=[];P;P=P.F)x.push(P);if(d=d.M,P=m.type||m,typeof m=="string")m=new tt(m,d);else if(m instanceof tt)m.target=m.target||d;else{var j=m;m=new tt(P,d),C(m,j)}if(j=!0,x)for(var q=x.length-1;0<=q;q--){var oe=m.g=x[q];j=ze(oe,P,!0,m)&&j}if(oe=m.g=d,j=ze(oe,P,!0,m)&&j,j=ze(oe,P,!1,m)&&j,x)for(q=0;q<x.length;q++)oe=m.g=x[q],j=ze(oe,P,!1,m)&&j}Se.prototype.N=function(){if(Se.aa.N.call(this),this.i){var d=this.i,m;for(m in d.g){for(var x=d.g[m],P=0;P<x.length;P++)ve(x[P]);delete d.g[m],d.h--}}this.F=null},Se.prototype.K=function(d,m,x,P){return this.i.add(String(d),m,!1,x,P)},Se.prototype.L=function(d,m,x,P){return this.i.add(String(d),m,!0,x,P)};function ze(d,m,x,P){if(m=d.i.g[String(m)],!m)return!0;m=m.concat();for(var j=!0,q=0;q<m.length;++q){var oe=m[q];if(oe&&!oe.da&&oe.capture==x){var st=oe.listener,Ut=oe.ha||oe.src;oe.fa&&L(d.i,oe),j=st.call(Ut,P)!==!1&&j}}return j&&!P.defaultPrevented}function Yt(d,m,x){if(typeof d=="function")x&&(d=p(d,x));else if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:a.setTimeout(d,m||0)}function $t(d){d.g=Yt(()=>{d.g=null,d.i&&(d.i=!1,$t(d))},d.l);const m=d.h;d.h=null,d.m.apply(null,m)}class Cn extends Ye{constructor(m,x){super(),this.m=m,this.l=x,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:$t(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qt(d){Ye.call(this),this.h=d,this.g={}}y(Qt,Ye);var Gs=[];function Do(d){O(d.g,function(m,x){this.g.hasOwnProperty(x)&&se(m)},d),d.g={}}Qt.prototype.N=function(){Qt.aa.N.call(this),Do(this)},Qt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ft=a.JSON.stringify,Pn=a.JSON.parse,Rl=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function Vd(){}Vd.prototype.h=null;function em(d){return d.h||(d.h=d.i())}function tm(){}var Mo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function $d(){tt.call(this,"d")}y($d,tt);function Fd(){tt.call(this,"c")}y(Fd,tt);var Vr={},nm=null;function Ol(){return nm=nm||new Se}Vr.La="serverreachability";function sm(d){tt.call(this,Vr.La,d)}y(sm,tt);function No(d){const m=Ol();Ne(m,new sm(m))}Vr.STAT_EVENT="statevent";function rm(d,m){tt.call(this,Vr.STAT_EVENT,d),this.stat=m}y(rm,tt);function hn(d){const m=Ol();Ne(m,new rm(m,d))}Vr.Ma="timingevent";function im(d,m){tt.call(this,Vr.Ma,d),this.size=m}y(im,tt);function Lo(d,m){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},m)}function Vo(){this.g=!0}Vo.prototype.xa=function(){this.g=!1};function Pk(d,m,x,P,j,q){d.info(function(){if(d.g)if(q)for(var oe="",st=q.split("&"),Ut=0;Ut<st.length;Ut++){var Ge=st[Ut].split("=");if(1<Ge.length){var Xt=Ge[0];Ge=Ge[1];var Jt=Xt.split("_");oe=2<=Jt.length&&Jt[1]=="type"?oe+(Xt+"="+Ge+"&"):oe+(Xt+"=redacted&")}}else oe=null;else oe=q;return"XMLHTTP REQ ("+P+") [attempt "+j+"]: "+m+`
`+x+`
`+oe})}function Rk(d,m,x,P,j,q,oe){d.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+j+"]: "+m+`
`+x+`
`+q+" "+oe})}function Oi(d,m,x,P){d.info(function(){return"XMLHTTP TEXT ("+m+"): "+Dk(d,x)+(P?" "+P:"")})}function Ok(d,m){d.info(function(){return"TIMEOUT: "+m})}Vo.prototype.info=function(){};function Dk(d,m){if(!d.g)return m;if(!m)return null;try{var x=JSON.parse(m);if(x){for(d=0;d<x.length;d++)if(Array.isArray(x[d])){var P=x[d];if(!(2>P.length)){var j=P[1];if(Array.isArray(j)&&!(1>j.length)){var q=j[0];if(q!="noop"&&q!="stop"&&q!="close")for(var oe=1;oe<j.length;oe++)j[oe]=""}}}}return Ft(x)}catch{return m}}var Dl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},om={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ud;function Ml(){}y(Ml,Vd),Ml.prototype.g=function(){return new XMLHttpRequest},Ml.prototype.i=function(){return{}},Ud=new Ml;function Ys(d,m,x,P){this.j=d,this.i=m,this.l=x,this.R=P||1,this.U=new Qt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new am}function am(){this.i=null,this.g="",this.h=!1}var lm={},Bd={};function jd(d,m,x){d.L=1,d.v=$l(gs(m)),d.m=x,d.P=!0,cm(d,null)}function cm(d,m){d.F=Date.now(),Nl(d),d.A=gs(d.v);var x=d.A,P=d.R;Array.isArray(P)||(P=[String(P)]),Em(x.i,"t",P),d.C=0,x=d.j.J,d.h=new am,d.g=Bm(d.j,x?m:null,!d.m),0<d.O&&(d.M=new Cn(p(d.Y,d,d.g),d.O)),m=d.U,x=d.g,P=d.ca;var j="readystatechange";Array.isArray(j)||(j&&(Gs[0]=j.toString()),j=Gs);for(var q=0;q<j.length;q++){var oe=J(x,j[q],P||m.handleEvent,!1,m.h||m);if(!oe)break;m.g[oe.key]=oe}m=d.H?b(d.H):{},d.m?(d.u||(d.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,m)):(d.u="GET",d.g.ea(d.A,d.u,null,m)),No(),Pk(d.i,d.u,d.A,d.l,d.R,d.m)}Ys.prototype.ca=function(d){d=d.target;const m=this.M;m&&ms(d)==3?m.j():this.Y(d)},Ys.prototype.Y=function(d){try{if(d==this.g)e:{const Jt=ms(this.g);var m=this.g.Ba();const Ni=this.g.Z();if(!(3>Jt)&&(Jt!=3||this.g&&(this.h.h||this.g.oa()||Pm(this.g)))){this.J||Jt!=4||m==7||(m==8||0>=Ni?No(3):No(2)),zd(this);var x=this.g.Z();this.X=x;t:if(um(this)){var P=Pm(this.g);d="";var j=P.length,q=ms(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$r(this),$o(this);var oe="";break t}this.h.i=new a.TextDecoder}for(m=0;m<j;m++)this.h.h=!0,d+=this.h.i.decode(P[m],{stream:!(q&&m==j-1)});P.length=0,this.h.g+=d,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=x==200,Rk(this.i,this.u,this.A,this.l,this.R,Jt,x),this.o){if(this.T&&!this.K){t:{if(this.g){var st,Ut=this.g;if((st=Ut.g?Ut.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(st)){var Ge=st;break t}}Ge=null}if(x=Ge)Oi(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hd(this,x);else{this.o=!1,this.s=3,hn(12),$r(this),$o(this);break e}}if(this.P){x=!0;let Bn;for(;!this.J&&this.C<oe.length;)if(Bn=Mk(this,oe),Bn==Bd){Jt==4&&(this.s=4,hn(14),x=!1),Oi(this.i,this.l,null,"[Incomplete Response]");break}else if(Bn==lm){this.s=4,hn(15),Oi(this.i,this.l,oe,"[Invalid Chunk]"),x=!1;break}else Oi(this.i,this.l,Bn,null),Hd(this,Bn);if(um(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Jt!=4||oe.length!=0||this.h.h||(this.s=1,hn(16),x=!1),this.o=this.o&&x,!x)Oi(this.i,this.l,oe,"[Invalid Chunked Response]"),$r(this),$o(this);else if(0<oe.length&&!this.W){this.W=!0;var Xt=this.j;Xt.g==this&&Xt.ba&&!Xt.M&&(Xt.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),Qd(Xt),Xt.M=!0,hn(11))}}else Oi(this.i,this.l,oe,null),Hd(this,oe);Jt==4&&$r(this),this.o&&!this.J&&(Jt==4?Vm(this.j,this):(this.o=!1,Nl(this)))}else Xk(this.g),x==400&&0<oe.indexOf("Unknown SID")?(this.s=3,hn(12)):(this.s=0,hn(13)),$r(this),$o(this)}}}catch{}finally{}};function um(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function Mk(d,m){var x=d.C,P=m.indexOf(`
`,x);return P==-1?Bd:(x=Number(m.substring(x,P)),isNaN(x)?lm:(P+=1,P+x>m.length?Bd:(m=m.slice(P,P+x),d.C=P+x,m)))}Ys.prototype.cancel=function(){this.J=!0,$r(this)};function Nl(d){d.S=Date.now()+d.I,dm(d,d.I)}function dm(d,m){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Lo(p(d.ba,d),m)}function zd(d){d.B&&(a.clearTimeout(d.B),d.B=null)}Ys.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(Ok(this.i,this.A),this.L!=2&&(No(),hn(17)),$r(this),this.s=2,$o(this)):dm(this,this.S-d)};function $o(d){d.j.G==0||d.J||Vm(d.j,d)}function $r(d){zd(d);var m=d.M;m&&typeof m.ma=="function"&&m.ma(),d.M=null,Do(d.U),d.g&&(m=d.g,d.g=null,m.abort(),m.ma())}function Hd(d,m){try{var x=d.j;if(x.G!=0&&(x.g==d||qd(x.h,d))){if(!d.K&&qd(x.h,d)&&x.G==3){try{var P=x.Da.g.parse(m)}catch{P=null}if(Array.isArray(P)&&P.length==3){var j=P;if(j[0]==0){e:if(!x.u){if(x.g)if(x.g.F+3e3<d.F)Hl(x),jl(x);else break e;Yd(x),hn(18)}}else x.za=j[1],0<x.za-x.T&&37500>j[2]&&x.F&&x.v==0&&!x.C&&(x.C=Lo(p(x.Za,x),6e3));if(1>=pm(x.h)&&x.ca){try{x.ca()}catch{}x.ca=void 0}}else Ur(x,11)}else if((d.K||x.g==d)&&Hl(x),!S(m))for(j=x.Da.g.parse(m),m=0;m<j.length;m++){let Ge=j[m];if(x.T=Ge[0],Ge=Ge[1],x.G==2)if(Ge[0]=="c"){x.K=Ge[1],x.ia=Ge[2];const Xt=Ge[3];Xt!=null&&(x.la=Xt,x.j.info("VER="+x.la));const Jt=Ge[4];Jt!=null&&(x.Aa=Jt,x.j.info("SVER="+x.Aa));const Ni=Ge[5];Ni!=null&&typeof Ni=="number"&&0<Ni&&(P=1.5*Ni,x.L=P,x.j.info("backChannelRequestTimeoutMs_="+P)),P=x;const Bn=d.g;if(Bn){const Wl=Bn.g?Bn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wl){var q=P.h;q.g||Wl.indexOf("spdy")==-1&&Wl.indexOf("quic")==-1&&Wl.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(Wd(q,q.h),q.h=null))}if(P.D){const Xd=Bn.g?Bn.g.getResponseHeader("X-HTTP-Session-Id"):null;Xd&&(P.ya=Xd,ct(P.I,P.D,Xd))}}x.G=3,x.l&&x.l.ua(),x.ba&&(x.R=Date.now()-d.F,x.j.info("Handshake RTT: "+x.R+"ms")),P=x;var oe=d;if(P.qa=Um(P,P.J?P.ia:null,P.W),oe.K){gm(P.h,oe);var st=oe,Ut=P.L;Ut&&(st.I=Ut),st.B&&(zd(st),Nl(st)),P.g=oe}else Nm(P);0<x.i.length&&zl(x)}else Ge[0]!="stop"&&Ge[0]!="close"||Ur(x,7);else x.G==3&&(Ge[0]=="stop"||Ge[0]=="close"?Ge[0]=="stop"?Ur(x,7):Gd(x):Ge[0]!="noop"&&x.l&&x.l.ta(Ge),x.v=0)}}No(4)}catch{}}var Nk=class{constructor(d,m){this.g=d,this.map=m}};function hm(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function fm(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function pm(d){return d.h?1:d.g?d.g.size:0}function qd(d,m){return d.h?d.h==m:d.g?d.g.has(m):!1}function Wd(d,m){d.g?d.g.add(m):d.h=m}function gm(d,m){d.h&&d.h==m?d.h=null:d.g&&d.g.has(m)&&d.g.delete(m)}hm.prototype.cancel=function(){if(this.i=mm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function mm(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let m=d.i;for(const x of d.g.values())m=m.concat(x.D);return m}return v(d.i)}function Lk(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(l(d)){for(var m=[],x=d.length,P=0;P<x;P++)m.push(d[P]);return m}m=[],x=0;for(P in d)m[x++]=d[P];return m}function Vk(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(l(d)||typeof d=="string"){var m=[];d=d.length;for(var x=0;x<d;x++)m.push(x);return m}m=[],x=0;for(const P in d)m[x++]=P;return m}}}function ym(d,m){if(d.forEach&&typeof d.forEach=="function")d.forEach(m,void 0);else if(l(d)||typeof d=="string")Array.prototype.forEach.call(d,m,void 0);else for(var x=Vk(d),P=Lk(d),j=P.length,q=0;q<j;q++)m.call(void 0,P[q],x&&x[q],d)}var vm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $k(d,m){if(d){d=d.split("&");for(var x=0;x<d.length;x++){var P=d[x].indexOf("="),j=null;if(0<=P){var q=d[x].substring(0,P);j=d[x].substring(P+1)}else q=d[x];m(q,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Fr(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Fr){this.h=d.h,Ll(this,d.j),this.o=d.o,this.g=d.g,Vl(this,d.s),this.l=d.l;var m=d.i,x=new Bo;x.i=m.i,m.g&&(x.g=new Map(m.g),x.h=m.h),_m(this,x),this.m=d.m}else d&&(m=String(d).match(vm))?(this.h=!1,Ll(this,m[1]||"",!0),this.o=Fo(m[2]||""),this.g=Fo(m[3]||"",!0),Vl(this,m[4]),this.l=Fo(m[5]||"",!0),_m(this,m[6]||"",!0),this.m=Fo(m[7]||"")):(this.h=!1,this.i=new Bo(null,this.h))}Fr.prototype.toString=function(){var d=[],m=this.j;m&&d.push(Uo(m,bm,!0),":");var x=this.g;return(x||m=="file")&&(d.push("//"),(m=this.o)&&d.push(Uo(m,bm,!0),"@"),d.push(encodeURIComponent(String(x)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.s,x!=null&&d.push(":",String(x))),(x=this.l)&&(this.g&&x.charAt(0)!="/"&&d.push("/"),d.push(Uo(x,x.charAt(0)=="/"?Bk:Uk,!0))),(x=this.i.toString())&&d.push("?",x),(x=this.m)&&d.push("#",Uo(x,zk)),d.join("")};function gs(d){return new Fr(d)}function Ll(d,m,x){d.j=x?Fo(m,!0):m,d.j&&(d.j=d.j.replace(/:$/,""))}function Vl(d,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);d.s=m}else d.s=null}function _m(d,m,x){m instanceof Bo?(d.i=m,Hk(d.i,d.h)):(x||(m=Uo(m,jk)),d.i=new Bo(m,d.h))}function ct(d,m,x){d.i.set(m,x)}function $l(d){return ct(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Fo(d,m){return d?m?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Uo(d,m,x){return typeof d=="string"?(d=encodeURI(d).replace(m,Fk),x&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Fk(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var bm=/[#\/\?@]/g,Uk=/[#\?:]/g,Bk=/[#\?]/g,jk=/[#\?@]/g,zk=/#/g;function Bo(d,m){this.h=this.g=null,this.i=d||null,this.j=!!m}function Qs(d){d.g||(d.g=new Map,d.h=0,d.i&&$k(d.i,function(m,x){d.add(decodeURIComponent(m.replace(/\+/g," ")),x)}))}t=Bo.prototype,t.add=function(d,m){Qs(this),this.i=null,d=Di(this,d);var x=this.g.get(d);return x||this.g.set(d,x=[]),x.push(m),this.h+=1,this};function xm(d,m){Qs(d),m=Di(d,m),d.g.has(m)&&(d.i=null,d.h-=d.g.get(m).length,d.g.delete(m))}function wm(d,m){return Qs(d),m=Di(d,m),d.g.has(m)}t.forEach=function(d,m){Qs(this),this.g.forEach(function(x,P){x.forEach(function(j){d.call(m,j,P,this)},this)},this)},t.na=function(){Qs(this);const d=Array.from(this.g.values()),m=Array.from(this.g.keys()),x=[];for(let P=0;P<m.length;P++){const j=d[P];for(let q=0;q<j.length;q++)x.push(m[P])}return x},t.V=function(d){Qs(this);let m=[];if(typeof d=="string")wm(this,d)&&(m=m.concat(this.g.get(Di(this,d))));else{d=Array.from(this.g.values());for(let x=0;x<d.length;x++)m=m.concat(d[x])}return m},t.set=function(d,m){return Qs(this),this.i=null,d=Di(this,d),wm(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[m]),this.h+=1,this},t.get=function(d,m){return d?(d=this.V(d),0<d.length?String(d[0]):m):m};function Em(d,m,x){xm(d,m),0<x.length&&(d.i=null,d.g.set(Di(d,m),v(x)),d.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],m=Array.from(this.g.keys());for(var x=0;x<m.length;x++){var P=m[x];const q=encodeURIComponent(String(P)),oe=this.V(P);for(P=0;P<oe.length;P++){var j=q;oe[P]!==""&&(j+="="+encodeURIComponent(String(oe[P]))),d.push(j)}}return this.i=d.join("&")};function Di(d,m){return m=String(m),d.j&&(m=m.toLowerCase()),m}function Hk(d,m){m&&!d.j&&(Qs(d),d.i=null,d.g.forEach(function(x,P){var j=P.toLowerCase();P!=j&&(xm(this,P),Em(this,j,x))},d)),d.j=m}function qk(d,m){const x=new Vo;if(a.Image){const P=new Image;P.onload=g(Xs,x,"TestLoadImage: loaded",!0,m,P),P.onerror=g(Xs,x,"TestLoadImage: error",!1,m,P),P.onabort=g(Xs,x,"TestLoadImage: abort",!1,m,P),P.ontimeout=g(Xs,x,"TestLoadImage: timeout",!1,m,P),a.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=d}else m(!1)}function Wk(d,m){const x=new Vo,P=new AbortController,j=setTimeout(()=>{P.abort(),Xs(x,"TestPingServer: timeout",!1,m)},1e4);fetch(d,{signal:P.signal}).then(q=>{clearTimeout(j),q.ok?Xs(x,"TestPingServer: ok",!0,m):Xs(x,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(j),Xs(x,"TestPingServer: error",!1,m)})}function Xs(d,m,x,P,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),P(x)}catch{}}function Kk(){this.g=new Rl}function Gk(d,m,x){const P=x||"";try{ym(d,function(j,q){let oe=j;c(j)&&(oe=Ft(j)),m.push(P+q+"="+encodeURIComponent(oe))})}catch(j){throw m.push(P+"type="+encodeURIComponent("_badmap")),j}}function Fl(d){this.l=d.Ub||null,this.j=d.eb||!1}y(Fl,Vd),Fl.prototype.g=function(){return new Ul(this.l,this.j)},Fl.prototype.i=function(d){return function(){return d}}({});function Ul(d,m){Se.call(this),this.D=d,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(Ul,Se),t=Ul.prototype,t.open=function(d,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=m,this.readyState=1,zo(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(m.body=d),(this.D||a).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,jo(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,zo(this)),this.g&&(this.readyState=3,zo(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Tm(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Tm(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var m=d.value?d.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!d.done}))&&(this.response=this.responseText+=m)}d.done?jo(this):zo(this),this.readyState==3&&Tm(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,jo(this))},t.Qa=function(d){this.g&&(this.response=d,jo(this))},t.ga=function(){this.g&&jo(this)};function jo(d){d.readyState=4,d.l=null,d.j=null,d.v=null,zo(d)}t.setRequestHeader=function(d,m){this.u.append(d,m)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],m=this.h.entries();for(var x=m.next();!x.done;)x=x.value,d.push(x[0]+": "+x[1]),x=m.next();return d.join(`\r
`)};function zo(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Ul.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function km(d){let m="";return O(d,function(x,P){m+=P,m+=":",m+=x,m+=`\r
`}),m}function Kd(d,m,x){e:{for(P in x){var P=!1;break e}P=!0}P||(x=km(x),typeof d=="string"?x!=null&&encodeURIComponent(String(x)):ct(d,m,x))}function mt(d){Se.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(mt,Se);var Yk=/^https?$/i,Qk=["POST","PUT"];t=mt.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,m,x,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);m=m?m.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ud.g(),this.v=this.o?em(this.o):em(Ud),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(m,String(d),!0),this.B=!1}catch(q){Im(this,q);return}if(d=x||"",x=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var j in P)x.set(j,P[j]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const q of P.keys())x.set(q,P.get(q));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(x.keys()).find(q=>q.toLowerCase()=="content-type"),j=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Qk,m,void 0))||P||j||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,oe]of x)this.g.setRequestHeader(q,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Cm(this),this.u=!0,this.g.send(d),this.u=!1}catch(q){Im(this,q)}};function Im(d,m){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=m,d.m=5,Sm(d),Bl(d)}function Sm(d){d.A||(d.A=!0,Ne(d,"complete"),Ne(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Ne(this,"complete"),Ne(this,"abort"),Bl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bl(this,!0)),mt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Am(this):this.bb())},t.bb=function(){Am(this)};function Am(d){if(d.h&&typeof o<"u"&&(!d.v[1]||ms(d)!=4||d.Z()!=2)){if(d.u&&ms(d)==4)Yt(d.Ea,0,d);else if(Ne(d,"readystatechange"),ms(d)==4){d.h=!1;try{const oe=d.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var x;if(!(x=m)){var P;if(P=oe===0){var j=String(d.D).match(vm)[1]||null;!j&&a.self&&a.self.location&&(j=a.self.location.protocol.slice(0,-1)),P=!Yk.test(j?j.toLowerCase():"")}x=P}if(x)Ne(d,"complete"),Ne(d,"success");else{d.m=6;try{var q=2<ms(d)?d.g.statusText:""}catch{q=""}d.l=q+" ["+d.Z()+"]",Sm(d)}}finally{Bl(d)}}}}function Bl(d,m){if(d.g){Cm(d);const x=d.g,P=d.v[0]?()=>{}:null;d.g=null,d.v=null,m||Ne(d,"ready");try{x.onreadystatechange=P}catch{}}}function Cm(d){d.I&&(a.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function ms(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<ms(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var m=this.g.responseText;return d&&m.indexOf(d)==0&&(m=m.substring(d.length)),Pn(m)}};function Pm(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Xk(d){const m={};d=(d.g&&2<=ms(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<d.length;P++){if(S(d[P]))continue;var x=k(d[P]);const j=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const q=m[j]||[];m[j]=q,q.push(x)}T(m,function(P){return P.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ho(d,m,x){return x&&x.internalChannelParams&&x.internalChannelParams[d]||m}function Rm(d){this.Aa=0,this.i=[],this.j=new Vo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ho("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ho("baseRetryDelayMs",5e3,d),this.cb=Ho("retryDelaySeedMs",1e4,d),this.Wa=Ho("forwardChannelMaxRetries",2,d),this.wa=Ho("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new hm(d&&d.concurrentRequestLimit),this.Da=new Kk,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Rm.prototype,t.la=8,t.G=1,t.connect=function(d,m,x,P){hn(0),this.W=d,this.H=m||{},x&&P!==void 0&&(this.H.OSID=x,this.H.OAID=P),this.F=this.X,this.I=Um(this,null,this.W),zl(this)};function Gd(d){if(Om(d),d.G==3){var m=d.U++,x=gs(d.I);if(ct(x,"SID",d.K),ct(x,"RID",m),ct(x,"TYPE","terminate"),qo(d,x),m=new Ys(d,d.j,m),m.L=2,m.v=$l(gs(x)),x=!1,a.navigator&&a.navigator.sendBeacon)try{x=a.navigator.sendBeacon(m.v.toString(),"")}catch{}!x&&a.Image&&(new Image().src=m.v,x=!0),x||(m.g=Bm(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Nl(m)}Fm(d)}function jl(d){d.g&&(Qd(d),d.g.cancel(),d.g=null)}function Om(d){jl(d),d.u&&(a.clearTimeout(d.u),d.u=null),Hl(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function zl(d){if(!fm(d.h)&&!d.s){d.s=!0;var m=d.Ga;ee||ht(),we||(ee(),we=!0),Ve.add(m,d),d.B=0}}function Jk(d,m){return pm(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=m.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Lo(p(d.Ga,d,m),$m(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const j=new Ys(this,this.j,d);let q=this.o;if(this.S&&(q?(q=b(q),C(q,this.S)):q=this.S),this.m!==null||this.O||(j.H=q,q=null),this.P)e:{for(var m=0,x=0;x<this.i.length;x++){t:{var P=this.i[x];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(m+=P,4096<m){m=x;break e}if(m===4096||x===this.i.length-1){m=x+1;break e}}m=1e3}else m=1e3;m=Mm(this,j,m),x=gs(this.I),ct(x,"RID",d),ct(x,"CVER",22),this.D&&ct(x,"X-HTTP-Session-Id",this.D),qo(this,x),q&&(this.O?m="headers="+encodeURIComponent(String(km(q)))+"&"+m:this.m&&Kd(x,this.m,q)),Wd(this.h,j),this.Ua&&ct(x,"TYPE","init"),this.P?(ct(x,"$req",m),ct(x,"SID","null"),j.T=!0,jd(j,x,null)):jd(j,x,m),this.G=2}}else this.G==3&&(d?Dm(this,d):this.i.length==0||fm(this.h)||Dm(this))};function Dm(d,m){var x;m?x=m.l:x=d.U++;const P=gs(d.I);ct(P,"SID",d.K),ct(P,"RID",x),ct(P,"AID",d.T),qo(d,P),d.m&&d.o&&Kd(P,d.m,d.o),x=new Ys(d,d.j,x,d.B+1),d.m===null&&(x.H=d.o),m&&(d.i=m.D.concat(d.i)),m=Mm(d,x,1e3),x.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Wd(d.h,x),jd(x,P,m)}function qo(d,m){d.H&&O(d.H,function(x,P){ct(m,P,x)}),d.l&&ym({},function(x,P){ct(m,P,x)})}function Mm(d,m,x){x=Math.min(d.i.length,x);var P=d.l?p(d.l.Na,d.l,d):null;e:{var j=d.i;let q=-1;for(;;){const oe=["count="+x];q==-1?0<x?(q=j[0].g,oe.push("ofs="+q)):q=0:oe.push("ofs="+q);let st=!0;for(let Ut=0;Ut<x;Ut++){let Ge=j[Ut].g;const Xt=j[Ut].map;if(Ge-=q,0>Ge)q=Math.max(0,j[Ut].g-100),st=!1;else try{Gk(Xt,oe,"req"+Ge+"_")}catch{P&&P(Xt)}}if(st){P=oe.join("&");break e}}}return d=d.i.splice(0,x),m.D=d,P}function Nm(d){if(!d.g&&!d.u){d.Y=1;var m=d.Fa;ee||ht(),we||(ee(),we=!0),Ve.add(m,d),d.v=0}}function Yd(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Lo(p(d.Fa,d),$m(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,Lm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Lo(p(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,hn(10),jl(this),Lm(this))};function Qd(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function Lm(d){d.g=new Ys(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var m=gs(d.qa);ct(m,"RID","rpc"),ct(m,"SID",d.K),ct(m,"AID",d.T),ct(m,"CI",d.F?"0":"1"),!d.F&&d.ja&&ct(m,"TO",d.ja),ct(m,"TYPE","xmlhttp"),qo(d,m),d.m&&d.o&&Kd(m,d.m,d.o),d.L&&(d.g.I=d.L);var x=d.g;d=d.ia,x.L=1,x.v=$l(gs(m)),x.m=null,x.P=!0,cm(x,d)}t.Za=function(){this.C!=null&&(this.C=null,jl(this),Yd(this),hn(19))};function Hl(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function Vm(d,m){var x=null;if(d.g==m){Hl(d),Qd(d),d.g=null;var P=2}else if(qd(d.h,m))x=m.D,gm(d.h,m),P=1;else return;if(d.G!=0){if(m.o)if(P==1){x=m.m?m.m.length:0,m=Date.now()-m.F;var j=d.B;P=Ol(),Ne(P,new im(P,x)),zl(d)}else Nm(d);else if(j=m.s,j==3||j==0&&0<m.X||!(P==1&&Jk(d,m)||P==2&&Yd(d)))switch(x&&0<x.length&&(m=d.h,m.i=m.i.concat(x)),j){case 1:Ur(d,5);break;case 4:Ur(d,10);break;case 3:Ur(d,6);break;default:Ur(d,2)}}}function $m(d,m){let x=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(x*=2),x*m}function Ur(d,m){if(d.j.info("Error code "+m),m==2){var x=p(d.fb,d),P=d.Xa;const j=!P;P=new Fr(P||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ll(P,"https"),$l(P),j?qk(P.toString(),x):Wk(P.toString(),x)}else hn(2);d.G=0,d.l&&d.l.sa(m),Fm(d),Om(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),hn(2)):(this.j.info("Failed to ping google.com"),hn(1))};function Fm(d){if(d.G=0,d.ka=[],d.l){const m=mm(d.h);(m.length!=0||d.i.length!=0)&&(_(d.ka,m),_(d.ka,d.i),d.h.i.length=0,v(d.i),d.i.length=0),d.l.ra()}}function Um(d,m,x){var P=x instanceof Fr?gs(x):new Fr(x);if(P.g!="")m&&(P.g=m+"."+P.g),Vl(P,P.s);else{var j=a.location;P=j.protocol,m=m?m+"."+j.hostname:j.hostname,j=+j.port;var q=new Fr(null);P&&Ll(q,P),m&&(q.g=m),j&&Vl(q,j),x&&(q.l=x),P=q}return x=d.D,m=d.ya,x&&m&&ct(P,x,m),ct(P,"VER",d.la),qo(d,P),P}function Bm(d,m,x){if(m&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=d.Ca&&!d.pa?new mt(new Fl({eb:x})):new mt(d.pa),m.Ha(d.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function jm(){}t=jm.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ql(){}ql.prototype.g=function(d,m){return new xn(d,m)};function xn(d,m){Se.call(this),this.g=new Rm(m),this.l=d,this.h=m&&m.messageUrlParams||null,d=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(d?d["X-WebChannel-Content-Type"]=m.messageContentType:d={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(d?d["X-WebChannel-Client-Profile"]=m.va:d={"X-WebChannel-Client-Profile":m.va}),this.g.S=d,(d=m&&m.Sb)&&!S(d)&&(this.g.m=d),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!S(m)&&(this.g.D=m,d=this.h,d!==null&&m in d&&(d=this.h,m in d&&delete d[m])),this.j=new Mi(this)}y(xn,Se),xn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xn.prototype.close=function(){Gd(this.g)},xn.prototype.o=function(d){var m=this.g;if(typeof d=="string"){var x={};x.__data__=d,d=x}else this.u&&(x={},x.__data__=Ft(d),d=x);m.i.push(new Nk(m.Ya++,d)),m.G==3&&zl(m)},xn.prototype.N=function(){this.g.l=null,delete this.j,Gd(this.g),delete this.g,xn.aa.N.call(this)};function zm(d){$d.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var m=d.__sm__;if(m){e:{for(const x in m){d=x;break e}d=void 0}(this.i=d)&&(d=this.i,m=m!==null&&d in m?m[d]:void 0),this.data=m}else this.data=d}y(zm,$d);function Hm(){Fd.call(this),this.status=1}y(Hm,Fd);function Mi(d){this.g=d}y(Mi,jm),Mi.prototype.ua=function(){Ne(this.g,"a")},Mi.prototype.ta=function(d){Ne(this.g,new zm(d))},Mi.prototype.sa=function(d){Ne(this.g,new Hm)},Mi.prototype.ra=function(){Ne(this.g,"b")},ql.prototype.createWebChannel=ql.prototype.g,xn.prototype.send=xn.prototype.o,xn.prototype.open=xn.prototype.m,xn.prototype.close=xn.prototype.close,eE=function(){return new ql},Z1=function(){return Ol()},J1=Vr,Sf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Dl.NO_ERROR=0,Dl.TIMEOUT=8,Dl.HTTP_ERROR=6,Rc=Dl,om.COMPLETE="complete",X1=om,tm.EventType=Mo,Mo.OPEN="a",Mo.CLOSE="b",Mo.ERROR="c",Mo.MESSAGE="d",Se.prototype.listen=Se.prototype.K,ia=tm,mt.prototype.listenOnce=mt.prototype.L,mt.prototype.getLastError=mt.prototype.Ka,mt.prototype.getLastErrorCode=mt.prototype.Ba,mt.prototype.getStatus=mt.prototype.Z,mt.prototype.getResponseJson=mt.prototype.Oa,mt.prototype.getResponseText=mt.prototype.oa,mt.prototype.send=mt.prototype.ea,mt.prototype.setWithCredentials=mt.prototype.Ha,Q1=mt}).apply(typeof Jl<"u"?Jl:typeof self<"u"?self:typeof window<"u"?window:{});const Yy="@firebase/firestore",Qy="4.7.16";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let So="11.8.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i=new Cp("@firebase/firestore");function zi(){return _i.logLevel}function fe(t,...e){if(_i.logLevel<=Be.DEBUG){const n=e.map(Xp);_i.debug(`Firestore (${So}): ${t}`,...n)}}function Hs(t,...e){if(_i.logLevel<=Be.ERROR){const n=e.map(Xp);_i.error(`Firestore (${So}): ${t}`,...n)}}function ao(t,...e){if(_i.logLevel<=Be.WARN){const n=e.map(Xp);_i.warn(`Firestore (${So}): ${t}`,...n)}}function Xp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,tE(t,s,n)}function tE(t,e,n){let s=`FIRESTORE (${So}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Hs(s),new Error(s)}function et(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||tE(e,r,s)}function Me(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends ps{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(nn.UNAUTHENTICATED))}shutdown(){}}class sN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class rN{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){et(this.o===void 0,42304);let s=this.i;const r=l=>this.i!==s?(s=this.i,n(l)):Promise.resolve();let i=new ai;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ai,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ai)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(et(typeof s.accessToken=="string",31837,{l:s}),new nE(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return et(e===null||typeof e=="string",2055,{h:e}),new nn(e)}}class iN{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class oN{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new iN(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(nn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Xy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class aN{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Tn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){et(this.o===void 0,3512);const s=i=>{i.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,fe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Xy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(et(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Xy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=lN(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function $e(t,e){return t<e?-1:t>e?1:0}function Af(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=t.codePointAt(n),r=e.codePointAt(n);if(s!==r){if(s<128&&r<128)return $e(s,r);{const i=sE(),o=cN(i.encode(Jy(t,n)),i.encode(Jy(e,n)));return o!==0?o:$e(s,r)}}n+=s>65535?2:1}return $e(t.length,e.length)}function Jy(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function cN(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return $e(t[n],e[n]);return $e(t.length,e.length)}function lo(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy=-62135596800,ev=1e6;class Rt{static now(){return Rt.fromMillis(Date.now())}static fromDate(e){return Rt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*ev);return new Rt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ge(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ge(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Zy)throw new ge(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ev}_compareTo(e){return this.seconds===e.seconds?$e(this.nanoseconds,e.nanoseconds):$e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Zy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new Rt(0,0))}static max(){return new Oe(new Rt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv="__name__";class rs{constructor(e,n,s){n===void 0?n=0:n>e.length&&Pe(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Pe(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return rs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof rs?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=rs.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return $e(e.length,n.length)}static compareSegments(e,n){const s=rs.isNumericId(e),r=rs.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?rs.extractNumericId(e).compare(rs.extractNumericId(n)):Af(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return vr.fromString(e.substring(4,e.length-2))}}class dt extends rs{construct(e,n,s){return new dt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ge(Z.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new dt(n)}static emptyPath(){return new dt([])}}const uN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ht extends rs{construct(e,n,s){return new Ht(e,n,s)}static isValidIdentifier(e){return uN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ht.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===tv}static keyField(){return new Ht([tv])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new ge(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new ge(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ge(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(s+=a,r++):(i(),r++)}if(i(),o)throw new ge(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ht(n)}static emptyPath(){return new Ht([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.path=e}static fromPath(e){return new ke(dt.fromString(e))}static fromName(e){return new ke(dt.fromString(e).popFirst(5))}static empty(){return new ke(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return dt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ke(new dt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa=-1;function dN(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=Oe.fromTimestamp(s===1e9?new Rt(n+1,0):new Rt(n,s));return new Er(r,ke.empty(),e)}function hN(t){return new Er(t.readTime,t.key,Qa)}class Er{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Er(Oe.min(),ke.empty(),Qa)}static max(){return new Er(Oe.max(),ke.empty(),Qa)}}function fN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ke.comparator(t.documentKey,e.documentKey),n!==0?n:$e(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ao(t){if(t.code!==Z.FAILED_PRECONDITION||t.message!==pN)throw t;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new X((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof X?n:X.resolve(n)}catch(n){return X.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):X.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):X.reject(n)}static resolve(e){return new X((n,s)=>{n(e)})}static reject(e){return new X((n,s)=>{s(e)})}static waitFor(e){return new X((n,s)=>{let r=0,i=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++i,o&&i===r&&n()},l=>s(l))}),o=!0,i===r&&n()})}static or(e){let n=X.resolve(!1);for(const s of e)n=n.next(r=>r?X.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new X((s,r)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===i&&s(o)},u=>r(u))}})}static doWhile(e,n){return new X((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}function mN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Co(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>n.writeSequenceNumber(s))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}ud.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jp=-1;function dd(t){return t==null}function fu(t){return t===0&&1/t==-1/0}function yN(t){return typeof t=="number"&&Number.isInteger(t)&&!fu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE="";function vN(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=nv(e)),e=_N(t.get(n),e);return nv(e)}function _N(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case iE:n+="";break;default:n+=i}}return n}function nv(t){return t+iE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Nr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function oE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,n){this.comparator=e,this.root=n||jt.EMPTY}insert(e,n){return new ft(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,jt.BLACK,null,null))}remove(e){return new ft(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zl(this.root,e,this.comparator,!0)}}class Zl{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jt{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??jt.RED,this.left=r??jt.EMPTY,this.right=i??jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new jt(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return jt.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Pe(27949);return e+(this.isRed()?0:1)}}jt.EMPTY=null,jt.RED=!0,jt.BLACK=!1;jt.EMPTY=new class{constructor(){this.size=0}get key(){throw Pe(57766)}get value(){throw Pe(16141)}get color(){throw Pe(16727)}get left(){throw Pe(29726)}get right(){throw Pe(36894)}copy(e,n,s,r,i){return this}insert(e,n,s){return new jt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.comparator=e,this.data=new ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new rv(this.data.getIterator())}getIteratorFrom(e){return new rv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Ot)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ot(this.comparator);return n.data=e,n}}class rv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.fields=e,e.sort(Ht.comparator)}static empty(){return new zn([])}unionWith(e){let n=new Ot(Ht.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new zn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return lo(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new aE("Invalid base64 string: "+i):i}}(e);return new qt(n)}static fromUint8Array(e){const n=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new qt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qt.EMPTY_BYTE_STRING=new qt("");const bN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Tr(t){if(et(!!t,39018),typeof t=="string"){let e=0;const n=bN.exec(t);if(et(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:bt(t.seconds),nanos:bt(t.nanos)}}function bt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function kr(t){return typeof t=="string"?qt.fromBase64String(t):qt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE="server_timestamp",cE="__type__",uE="__previous_value__",dE="__local_write_time__";function Zp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[cE])===null||n===void 0?void 0:n.stringValue)===lE}function hd(t){const e=t.mapValue.fields[uE];return Zp(e)?hd(e):e}function Xa(t){const e=Tr(t.mapValue.fields[dE].timestampValue);return new Rt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e,n,s,r,i,o,a,l,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=u}}const pu="(default)";class Ja{constructor(e,n){this.projectId=e,this.database=n||pu}static empty(){return new Ja("","")}get isDefaultDatabase(){return this.database===pu}isEqual(e){return e instanceof Ja&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE="__type__",wN="__max__",ec={mapValue:{}},fE="__vector__",gu="value";function Ir(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Zp(t)?4:TN(t)?9007199254740991:EN(t)?10:11:Pe(28295,{value:t})}function fs(t,e){if(t===e)return!0;const n=Ir(t);if(n!==Ir(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Xa(t).isEqual(Xa(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Tr(r.timestampValue),a=Tr(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return kr(r.bytesValue).isEqual(kr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return bt(r.geoPointValue.latitude)===bt(i.geoPointValue.latitude)&&bt(r.geoPointValue.longitude)===bt(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return bt(r.integerValue)===bt(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=bt(r.doubleValue),a=bt(i.doubleValue);return o===a?fu(o)===fu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return lo(t.arrayValue.values||[],e.arrayValue.values||[],fs);case 10:case 11:return function(r,i){const o=r.mapValue.fields||{},a=i.mapValue.fields||{};if(sv(o)!==sv(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!fs(o[l],a[l])))return!1;return!0}(t,e);default:return Pe(52216,{left:t})}}function Za(t,e){return(t.values||[]).find(n=>fs(n,e))!==void 0}function co(t,e){if(t===e)return 0;const n=Ir(t),s=Ir(e);if(n!==s)return $e(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return $e(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=bt(i.integerValue||i.doubleValue),l=bt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return iv(t.timestampValue,e.timestampValue);case 4:return iv(Xa(t),Xa(e));case 5:return Af(t.stringValue,e.stringValue);case 6:return function(i,o){const a=kr(i),l=kr(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=$e(a[c],l[c]);if(u!==0)return u}return $e(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=$e(bt(i.latitude),bt(o.latitude));return a!==0?a:$e(bt(i.longitude),bt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ov(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,c,u;const h=i.fields||{},p=o.fields||{},g=(a=h[gu])===null||a===void 0?void 0:a.arrayValue,y=(l=p[gu])===null||l===void 0?void 0:l.arrayValue,v=$e(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((u=y==null?void 0:y.values)===null||u===void 0?void 0:u.length)||0);return v!==0?v:ov(g,y)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===ec.mapValue&&o===ec.mapValue)return 0;if(i===ec.mapValue)return 1;if(o===ec.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const p=Af(l[h],u[h]);if(p!==0)return p;const g=co(a[l[h]],c[u[h]]);if(g!==0)return g}return $e(l.length,u.length)}(t.mapValue,e.mapValue);default:throw Pe(23264,{Pe:n})}}function iv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return $e(t,e);const n=Tr(t),s=Tr(e),r=$e(n.seconds,s.seconds);return r!==0?r:$e(n.nanos,s.nanos)}function ov(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=co(n[r],s[r]);if(i)return i}return $e(n.length,s.length)}function uo(t){return Cf(t)}function Cf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=Tr(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return kr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ke.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=Cf(i);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${Cf(n.fields[o])}`;return r+"}"}(t.mapValue):Pe(61005,{value:t})}function Oc(t){switch(Ir(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=hd(t);return e?16+Oc(e):16;case 5:return 2*t.stringValue.length;case 6:return kr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((r,i)=>r+Oc(i),0)}(t.arrayValue);case 10:case 11:return function(s){let r=0;return Nr(s.fields,(i,o)=>{r+=i.length+Oc(o)}),r}(t.mapValue);default:throw Pe(13486,{value:t})}}function av(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Pf(t){return!!t&&"integerValue"in t}function eg(t){return!!t&&"arrayValue"in t}function lv(t){return!!t&&"nullValue"in t}function cv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Dc(t){return!!t&&"mapValue"in t}function EN(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[hE])===null||n===void 0?void 0:n.stringValue)===fE}function Ia(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Nr(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Ia(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ia(t.arrayValue.values[n]);return e}return Object.assign({},t)}function TN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===wN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.value=e}static empty(){return new kn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Dc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ia(n)}setAll(e){let n=Ht.emptyPath(),s={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,s,r),s={},r=[],n=a.popLast()}o?s[a.lastSegment()]=Ia(o):r.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());Dc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return fs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];Dc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){Nr(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new kn(Ia(this.value))}}function pE(t){const e=[];return Nr(t.fields,(n,s)=>{const r=new Ht([n]);if(Dc(s)){const i=pE(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new zn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e,n,s,r,i,o,a){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new rn(e,0,Oe.min(),Oe.min(),Oe.min(),kn.empty(),0)}static newFoundDocument(e,n,s,r){return new rn(e,1,n,Oe.min(),s,r,0)}static newNoDocument(e,n){return new rn(e,2,n,Oe.min(),Oe.min(),kn.empty(),0)}static newUnknownDocument(e,n){return new rn(e,3,n,Oe.min(),Oe.min(),kn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof rn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,n){this.position=e,this.inclusive=n}}function uv(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=ke.comparator(ke.fromName(o.referenceValue),n.key):s=co(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function dv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!fs(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e,n="asc"){this.field=e,this.dir=n}}function kN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{}class It extends gE{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new SN(e,n,s):n==="array-contains"?new PN(e,s):n==="in"?new RN(e,s):n==="not-in"?new ON(e,s):n==="array-contains-any"?new DN(e,s):new It(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new AN(e,s):new CN(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(co(n,this.value)):n!==null&&Ir(this.value)===Ir(n)&&this.matchesComparison(co(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qn extends gE{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new Qn(e,n)}matches(e){return mE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function mE(t){return t.op==="and"}function yE(t){return IN(t)&&mE(t)}function IN(t){for(const e of t.filters)if(e instanceof Qn)return!1;return!0}function Rf(t){if(t instanceof It)return t.field.canonicalString()+t.op.toString()+uo(t.value);if(yE(t))return t.filters.map(e=>Rf(e)).join(",");{const e=t.filters.map(n=>Rf(n)).join(",");return`${t.op}(${e})`}}function vE(t,e){return t instanceof It?function(s,r){return r instanceof It&&s.op===r.op&&s.field.isEqual(r.field)&&fs(s.value,r.value)}(t,e):t instanceof Qn?function(s,r){return r instanceof Qn&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((i,o,a)=>i&&vE(o,r.filters[a]),!0):!1}(t,e):void Pe(19439)}function _E(t){return t instanceof It?function(n){return`${n.field.canonicalString()} ${n.op} ${uo(n.value)}`}(t):t instanceof Qn?function(n){return n.op.toString()+" {"+n.getFilters().map(_E).join(" ,")+"}"}(t):"Filter"}class SN extends It{constructor(e,n,s){super(e,n,s),this.key=ke.fromName(s.referenceValue)}matches(e){const n=ke.comparator(e.key,this.key);return this.matchesComparison(n)}}class AN extends It{constructor(e,n){super(e,"in",n),this.keys=bE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class CN extends It{constructor(e,n){super(e,"not-in",n),this.keys=bE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function bE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>ke.fromName(s.referenceValue))}class PN extends It{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return eg(n)&&Za(n.arrayValue,this.value)}}class RN extends It{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Za(this.value.arrayValue,n)}}class ON extends It{constructor(e,n){super(e,"not-in",n)}matches(e){if(Za(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Za(this.value.arrayValue,n)}}class DN extends It{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!eg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Za(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e,n=null,s=[],r=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.Ie=null}}function hv(t,e=null,n=[],s=[],r=null,i=null,o=null){return new MN(t,e,n,s,r,i,o)}function tg(t){const e=Me(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>Rf(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),dd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>uo(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>uo(s)).join(",")),e.Ie=n}return e.Ie}function ng(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!kN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!vE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!dv(t.startAt,e.startAt)&&dv(t.endAt,e.endAt)}function Of(t){return ke.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,n=null,s=[],r=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function NN(t,e,n,s,r,i,o,a){return new Po(t,e,n,s,r,i,o,a)}function sg(t){return new Po(t)}function fv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function xE(t){return t.collectionGroup!==null}function Sa(t){const e=Me(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ee.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ot(Ht.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ee.push(new el(i,s))}),n.has(Ht.keyField().canonicalString())||e.Ee.push(new el(Ht.keyField(),s))}return e.Ee}function cs(t){const e=Me(t);return e.de||(e.de=LN(e,Sa(t))),e.de}function LN(t,e){if(t.limitType==="F")return hv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new el(r.field,i)});const n=t.endAt?new mu(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new mu(t.startAt.position,t.startAt.inclusive):null;return hv(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function Df(t,e){const n=t.filters.concat([e]);return new Po(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Mf(t,e,n){return new Po(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function fd(t,e){return ng(cs(t),cs(e))&&t.limitType===e.limitType}function wE(t){return`${tg(cs(t))}|lt:${t.limitType}`}function Hi(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(r=>_E(r)).join(", ")}]`),dd(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(r=>uo(r)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(r=>uo(r)).join(",")),`Target(${s})`}(cs(t))}; limitType=${t.limitType})`}function pd(t,e){return e.isFoundDocument()&&function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):ke.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(t,e)&&function(s,r){for(const i of Sa(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(s,r){return!(s.startAt&&!function(o,a,l){const c=uv(o,a,l);return o.inclusive?c<=0:c<0}(s.startAt,Sa(s),r)||s.endAt&&!function(o,a,l){const c=uv(o,a,l);return o.inclusive?c>=0:c>0}(s.endAt,Sa(s),r))}(t,e)}function VN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function EE(t){return(e,n)=>{let s=!1;for(const r of Sa(t)){const i=$N(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function $N(t,e,n){const s=t.field.isKeyField()?ke.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?co(l,c):Pe(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return Pe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Nr(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return oE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN=new ft(ke.comparator);function qs(){return FN}const TE=new ft(ke.comparator);function oa(...t){let e=TE;for(const n of t)e=e.insert(n.key,n);return e}function kE(t){let e=TE;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function ni(){return Aa()}function IE(){return Aa()}function Aa(){return new Ii(t=>t.toString(),(t,e)=>t.isEqual(e))}const UN=new ft(ke.comparator),BN=new Ot(ke.comparator);function je(...t){let e=BN;for(const n of t)e=e.add(n);return e}const jN=new Ot($e);function zN(){return jN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fu(e)?"-0":e}}function SE(t){return{integerValue:""+t}}function HN(t,e){return yN(e)?SE(e):rg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(){this._=void 0}}function qN(t,e,n){return t instanceof yu?function(r,i){const o={fields:{[cE]:{stringValue:lE},[dE]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Zp(i)&&(i=hd(i)),i&&(o.fields[uE]=i),{mapValue:o}}(n,e):t instanceof tl?CE(t,e):t instanceof nl?PE(t,e):function(r,i){const o=AE(r,i),a=pv(o)+pv(r.Re);return Pf(o)&&Pf(r.Re)?SE(a):rg(r.serializer,a)}(t,e)}function WN(t,e,n){return t instanceof tl?CE(t,e):t instanceof nl?PE(t,e):n}function AE(t,e){return t instanceof vu?function(s){return Pf(s)||function(i){return!!i&&"doubleValue"in i}(s)}(e)?e:{integerValue:0}:null}class yu extends gd{}class tl extends gd{constructor(e){super(),this.elements=e}}function CE(t,e){const n=RE(e);for(const s of t.elements)n.some(r=>fs(r,s))||n.push(s);return{arrayValue:{values:n}}}class nl extends gd{constructor(e){super(),this.elements=e}}function PE(t,e){let n=RE(e);for(const s of t.elements)n=n.filter(r=>!fs(r,s));return{arrayValue:{values:n}}}class vu extends gd{constructor(e,n){super(),this.serializer=e,this.Re=n}}function pv(t){return bt(t.integerValue||t.doubleValue)}function RE(t){return eg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function KN(t,e){return t.field.isEqual(e.field)&&function(s,r){return s instanceof tl&&r instanceof tl||s instanceof nl&&r instanceof nl?lo(s.elements,r.elements,fs):s instanceof vu&&r instanceof vu?fs(s.Re,r.Re):s instanceof yu&&r instanceof yu}(t.transform,e.transform)}class GN{constructor(e,n){this.version=e,this.transformResults=n}}class $s{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new $s}static exists(e){return new $s(void 0,e)}static updateTime(e){return new $s(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Mc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class md{}function OE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ME(t.key,$s.none()):new yd(t.key,t.data,$s.none());{const n=t.data,s=kn.empty();let r=new Ot(Ht.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new Si(t.key,s,new zn(r.toArray()),$s.none())}}function YN(t,e,n){t instanceof yd?function(r,i,o){const a=r.value.clone(),l=mv(r.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Si?function(r,i,o){if(!Mc(r.precondition,i))return void i.convertToUnknownDocument(o.version);const a=mv(r.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(DE(r)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ca(t,e,n,s){return t instanceof yd?function(i,o,a,l){if(!Mc(i.precondition,o))return a;const c=i.value.clone(),u=yv(i.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,s):t instanceof Si?function(i,o,a,l){if(!Mc(i.precondition,o))return a;const c=yv(i.fieldTransforms,l,o),u=o.data;return u.setAll(DE(i)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,s):function(i,o,a){return Mc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function QN(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=AE(s.transform,r||null);i!=null&&(n===null&&(n=kn.empty()),n.set(s.field,i))}return n||null}function gv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&lo(s,r,(i,o)=>KN(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class yd extends md{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Si extends md{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function DE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function mv(t,e,n){const s=new Map;et(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,a=e.data.field(i.field);s.set(i.field,WN(o,a,n[r]))}return s}function yv(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,qN(i,o,e))}return s}class ME extends md{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class XN extends md{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&YN(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Ca(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Ca(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=IE();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(r.key)?null:a;const l=OE(o,a);l!==null&&s.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(Oe.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),je())}isEqual(e){return this.batchId===e.batchId&&lo(this.mutations,e.mutations,(n,s)=>gv(n,s))&&lo(this.baseMutations,e.baseMutations,(n,s)=>gv(n,s))}}class ig{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){et(e.mutations.length===s.length,58842,{fe:e.mutations.length,ge:s.length});let r=function(){return UN}();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new ig(e,n,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt,He;function tL(t){switch(t){case Z.OK:return Pe(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return Pe(15467,{code:t})}}function NE(t){if(t===void 0)return Hs("GRPC error has no .code"),Z.UNKNOWN;switch(t){case kt.OK:return Z.OK;case kt.CANCELLED:return Z.CANCELLED;case kt.UNKNOWN:return Z.UNKNOWN;case kt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case kt.INTERNAL:return Z.INTERNAL;case kt.UNAVAILABLE:return Z.UNAVAILABLE;case kt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case kt.NOT_FOUND:return Z.NOT_FOUND;case kt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case kt.ABORTED:return Z.ABORTED;case kt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case kt.DATA_LOSS:return Z.DATA_LOSS;default:return Pe(39323,{code:t})}}(He=kt||(kt={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nL=new vr([4294967295,4294967295],0);function vv(t){const e=sE().encode(t),n=new Y1;return n.update(e),new Uint8Array(n.digest())}function _v(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new vr([n,s],0),new vr([r,i],0)]}class og{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new aa(`Invalid padding: ${n}`);if(s<0)throw new aa(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new aa(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new aa(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=vr.fromNumber(this.pe)}we(e,n,s){let r=e.add(n.multiply(vr.fromNumber(s)));return r.compare(nL)===1&&(r=new vr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ye).toNumber()}Se(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=vv(e),[s,r]=_v(n);for(let i=0;i<this.hashCount;i++){const o=this.we(s,r,i);if(!this.Se(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new og(i,r,n);return s.forEach(a=>o.insert(a)),o}insert(e){if(this.pe===0)return;const n=vv(e),[s,r]=_v(n);for(let i=0;i<this.hashCount;i++){const o=this.we(s,r,i);this.be(o)}}be(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class aa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,Il.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new vd(Oe.min(),r,new ft($e),qs(),je())}}class Il{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Il(s,n,je(),je(),je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,n,s,r){this.De=e,this.removedTargetIds=n,this.key=s,this.ve=r}}class LE{constructor(e,n){this.targetId=e,this.Ce=n}}class VE{constructor(e,n,s=qt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class bv{constructor(){this.Fe=0,this.Me=xv(),this.xe=qt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=je(),n=je(),s=je();return this.Me.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:Pe(38017,{changeType:i})}}),new Il(this.xe,this.Oe,e,n,s)}Qe(){this.Ne=!1,this.Me=xv()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,et(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class sL{constructor(e){this.ze=e,this.je=new Map,this.He=qs(),this.Je=tc(),this.Ye=tc(),this.Ze=new ft($e)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const s=this.rt(n);switch(e.state){case 0:this.it(n)&&s.ke(e.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(e.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(n);break;case 3:this.it(n)&&(s.Ge(),s.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),s.ke(e.resumeToken));break;default:Pe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((s,r)=>{this.it(r)&&n(r)})}ot(e){const n=e.targetId,s=e.Ce.count,r=this._t(n);if(r){const i=r.target;if(Of(i))if(s===0){const o=new ke(i.path);this.tt(n,o,rn.newNoDocument(o,Oe.min()))}else et(s===1,20013,{expectedCount:s});else{const o=this.ut(n);if(o!==s){const a=this.ct(e),l=a?this.lt(a,e,o):1;if(l!==0){this.st(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,c)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,a;try{o=kr(s).toUint8Array()}catch(l){if(l instanceof aE)return ao("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new og(o,r,i)}catch(l){return ao(l instanceof aa?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.pe===0?null:a}lt(e,n,s){return n.Ce.count===s-this.Tt(e,n.targetId)?0:2}Tt(e,n){const s=this.ze.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const o=this.ze.Pt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.tt(n,i,null),r++)}),r}It(e){const n=new Map;this.je.forEach((i,o)=>{const a=this._t(o);if(a){if(i.current&&Of(a.target)){const l=new ke(a.target.path);this.Et(l).has(o)||this.dt(o,l)||this.tt(o,l,rn.newNoDocument(l,e))}i.Le&&(n.set(o,i.qe()),i.Qe())}});let s=je();this.Ye.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this._t(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(s=s.add(i))}),this.He.forEach((i,o)=>o.setReadTime(e));const r=new vd(e,n,this.Ze,this.He,s);return this.He=qs(),this.Je=tc(),this.Ye=tc(),this.Ze=new ft($e),r}et(e,n){if(!this.it(e))return;const s=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,s),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,s){if(!this.it(e))return;const r=this.rt(e);this.dt(e,n)?r.$e(n,1):r.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),s&&(this.He=this.He.insert(n,s))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new bv,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Ot($e),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Ot($e),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||fe("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new bv),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function tc(){return new ft(ke.comparator)}function xv(){return new ft(ke.comparator)}const rL={asc:"ASCENDING",desc:"DESCENDING"},iL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oL={and:"AND",or:"OR"};class aL{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Nf(t,e){return t.useProto3Json||dd(e)?e:{value:e}}function _u(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $E(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function lL(t,e){return _u(t,e.toTimestamp())}function us(t){return et(!!t,49232),Oe.fromTimestamp(function(n){const s=Tr(n);return new Rt(s.seconds,s.nanos)}(t))}function ag(t,e){return Lf(t,e).canonicalString()}function Lf(t,e){const n=function(r){return new dt(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function FE(t){const e=dt.fromString(t);return et(HE(e),10190,{key:e.toString()}),e}function Vf(t,e){return ag(t.databaseId,e.path)}function Rh(t,e){const n=FE(e);if(n.get(1)!==t.databaseId.projectId)throw new ge(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ge(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ke(BE(n))}function UE(t,e){return ag(t.databaseId,e)}function cL(t){const e=FE(t);return e.length===4?dt.emptyPath():BE(e)}function $f(t){return new dt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function BE(t){return et(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function wv(t,e,n){return{name:Vf(t,e),fields:n.value.mapValue.fields}}function uL(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Pe(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(et(u===void 0||typeof u=="string",58123),qt.fromBase64String(u||"")):(et(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),qt.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?Z.UNKNOWN:NE(c.code);return new ge(u,c.message||"")}(o);n=new VE(s,r,i,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=Rh(t,s.document.name),i=us(s.document.updateTime),o=s.document.createTime?us(s.document.createTime):Oe.min(),a=new kn({mapValue:{fields:s.document.fields}}),l=rn.newFoundDocument(r,i,o,a),c=s.targetIds||[],u=s.removedTargetIds||[];n=new Nc(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=Rh(t,s.document),i=s.readTime?us(s.readTime):Oe.min(),o=rn.newNoDocument(r,i),a=s.removedTargetIds||[];n=new Nc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=Rh(t,s.document),i=s.removedTargetIds||[];n=new Nc([],i,r,null)}else{if(!("filter"in e))return Pe(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new eL(r,i),a=s.targetId;n=new LE(a,o)}}return n}function dL(t,e){let n;if(e instanceof yd)n={update:wv(t,e.key,e.value)};else if(e instanceof ME)n={delete:Vf(t,e.key)};else if(e instanceof Si)n={update:wv(t,e.key,e.data),updateMask:bL(e.fieldMask)};else{if(!(e instanceof XN))return Pe(16599,{ft:e.type});n={verify:Vf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(i,o){const a=o.transform;if(a instanceof yu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof tl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof nl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof vu)return{fieldPath:o.field.canonicalString(),increment:a.Re};throw Pe(20930,{transform:o.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:lL(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Pe(27497)}(t,e.precondition)),n}function hL(t,e){return t&&t.length>0?(et(e!==void 0,14353),t.map(n=>function(r,i){let o=r.updateTime?us(r.updateTime):us(i);return o.isEqual(Oe.min())&&(o=us(i)),new GN(o,r.transformResults||[])}(n,e))):[]}function fL(t,e){return{documents:[UE(t,e.path)]}}function pL(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=UE(t,r);const i=function(c){if(c.length!==0)return zE(Qn.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(u=>function(p){return{field:qi(p.field),direction:yL(p.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Nf(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{gt:n,parent:r}}function gL(t){let e=cL(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){et(s===1,65062);const u=n.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let i=[];n.where&&(i=function(h){const p=jE(h);return p instanceof Qn&&yE(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(p=>function(y){return new el(Wi(y.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,dd(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(h){const p=!!h.before,g=h.values||[];return new mu(g,p)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const p=!h.before,g=h.values||[];return new mu(g,p)}(n.endAt)),NN(e,r,o,i,a,"F",l,c)}function mL(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pe(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function jE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Wi(n.unaryFilter.field);return It.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=Wi(n.unaryFilter.field);return It.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Wi(n.unaryFilter.field);return It.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Wi(n.unaryFilter.field);return It.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Pe(61313);default:return Pe(60726)}}(t):t.fieldFilter!==void 0?function(n){return It.create(Wi(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Pe(58110);default:return Pe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Qn.create(n.compositeFilter.filters.map(s=>jE(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Pe(1026)}}(n.compositeFilter.op))}(t):Pe(30097,{filter:t})}function yL(t){return rL[t]}function vL(t){return iL[t]}function _L(t){return oL[t]}function qi(t){return{fieldPath:t.canonicalString()}}function Wi(t){return Ht.fromServerFormat(t.fieldPath)}function zE(t){return t instanceof It?function(n){if(n.op==="=="){if(cv(n.value))return{unaryFilter:{field:qi(n.field),op:"IS_NAN"}};if(lv(n.value))return{unaryFilter:{field:qi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(cv(n.value))return{unaryFilter:{field:qi(n.field),op:"IS_NOT_NAN"}};if(lv(n.value))return{unaryFilter:{field:qi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qi(n.field),op:vL(n.op),value:n.value}}}(t):t instanceof Qn?function(n){const s=n.getFilters().map(r=>zE(r));return s.length===1?s[0]:{compositeFilter:{op:_L(n.op),filters:s}}}(t):Pe(54877,{filter:t})}function bL(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function HE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e,n,s,r,i=Oe.min(),o=Oe.min(),a=qt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new dr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{constructor(e){this.wt=e}}function wL(t){const e=gL({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Mf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{constructor(){this.Cn=new TL}addToCollectionParentIndex(e,n){return this.Cn.add(n),X.resolve()}getCollectionParents(e,n){return X.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return X.resolve()}deleteFieldIndex(e,n){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,n){return X.resolve()}getDocumentsMatchingTarget(e,n){return X.resolve(null)}getIndexType(e,n){return X.resolve(0)}getFieldIndexes(e,n){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,n){return X.resolve(Er.min())}getMinOffsetFromCollectionGroup(e,n){return X.resolve(Er.min())}updateCollectionGroup(e,n,s){return X.resolve()}updateIndexEntries(e,n){return X.resolve()}}class TL{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new Ot(dt.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new Ot(dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},qE=41943040;class mn{static withCacheSize(e){return new mn(e,mn.DEFAULT_COLLECTION_PERCENTILE,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mn.DEFAULT_COLLECTION_PERCENTILE=10,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mn.DEFAULT=new mn(qE,mn.DEFAULT_COLLECTION_PERCENTILE,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mn.DISABLED=new mn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new ho(0)}static lr(){return new ho(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv="LruGarbageCollector",kL=1048576;function kv([t,e],[n,s]){const r=$e(t,n);return r===0?$e(e,s):r}class IL{constructor(e){this.Er=e,this.buffer=new Ot(kv),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();kv(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class SL{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){fe(Tv,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Co(n)?fe(Tv,"Ignoring IndexedDB error during garbage collection: ",n):await Ao(n)}await this.mr(3e5)})}}class AL{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return X.resolve(ud.le);const s=new IL(n);return this.gr.forEachTarget(e,r=>s.Rr(r.sequenceNumber)).next(()=>this.gr.yr(e,r=>s.Rr(r))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.gr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(Ev)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ev):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let s,r,i,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),r=this.params.maximumSequenceNumbersToCollect):r=h,o=Date.now(),this.nthSequenceNumber(e,r))).next(h=>(s=h,a=Date.now(),this.removeTargets(e,s,n))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,s))).next(h=>(c=Date.now(),zi()<=Be.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:h})))}}function CL(t,e){return new AL(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(){this.changes=new Ii(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,rn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?X.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(s!==null&&Ca(s.mutation,r,zn.empty(),Rt.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,je()).next(()=>s))}getLocalViewOfDocuments(e,n,s=je()){const r=ni();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let o=oa();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=ni();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,je()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,s,r){let i=qs();const o=Aa(),a=function(){return Aa()}();return n.forEach((l,c)=>{const u=s.get(c.key);r.has(c.key)&&(u===void 0||u.mutation instanceof Si)?i=i.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),Ca(u.mutation,c,u.mutation.getFieldMask(),Rt.now())):o.set(c.key,zn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var h;return a.set(c,new RL(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const s=Aa();let r=new ft((o,a)=>o-a),i=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=s.get(l)||zn.empty();u=a.applyToLocalView(c,u),s.set(l,u);const h=(r.get(a.batchId)||je()).add(l);r=r.insert(a.batchId,h)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=IE();u.forEach(p=>{if(!i.has(p)){const g=OE(n.get(p),s.get(p));g!==null&&h.set(p,g),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return X.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,r){return function(o){return ke.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):xE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):X.resolve(ni());let a=Qa,l=i;return o.next(c=>X.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(u)?X.resolve():this.remoteDocumentCache.getEntry(e,u).next(p=>{l=l.insert(u,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,je())).next(u=>({batchId:a,changes:kE(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ke(n)).next(s=>{let r=oa();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=oa();return this.indexManager.getCollectionParents(e,i).next(a=>X.forEach(a,l=>{const c=function(h,p){return new Po(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,s,r).next(u=>{u.forEach((h,p)=>{o=o.insert(h,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r))).next(o=>{i.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,rn.newInvalidDocument(u)))});let a=oa();return o.forEach((l,c)=>{const u=i.get(l);u!==void 0&&Ca(u.mutation,c,zn.empty(),Rt.now()),pd(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return X.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:us(r.createTime)}}(n)),X.resolve()}getNamedQuery(e,n){return X.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(r){return{name:r.name,query:wL(r.bundledQuery),readTime:us(r.readTime)}}(n)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(){this.overlays=new ft(ke.comparator),this.Qr=new Map}getOverlay(e,n){return X.resolve(this.overlays.get(n))}getOverlays(e,n){const s=ni();return X.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.bt(e,n,i)}),X.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.Qr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.Qr.delete(s)),X.resolve()}getOverlaysForCollection(e,n,s){const r=ni(),i=n.length+1,o=new ke(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>s&&r.set(l.getKey(),l)}return X.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new ft((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>s){let u=i.get(c.largestBatchId);u===null&&(u=ni(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=ni(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=r)););return X.resolve(a)}bt(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.Qr.get(r.largestBatchId).delete(s.key);this.Qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new ZN(n,s));let i=this.Qr.get(n);i===void 0&&(i=je(),this.Qr.set(n,i)),this.Qr.set(n,i.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(){this.sessionToken=qt.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(){this.$r=new Ot(Dt.Ur),this.Kr=new Ot(Dt.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const s=new Dt(e,n);this.$r=this.$r.add(s),this.Kr=this.Kr.add(s)}Gr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.zr(new Dt(e,n))}jr(e,n){e.forEach(s=>this.removeReference(s,n))}Hr(e){const n=new ke(new dt([])),s=new Dt(n,e),r=new Dt(n,e+1),i=[];return this.Kr.forEachInRange([s,r],o=>{this.zr(o),i.push(o.key)}),i}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new ke(new dt([])),s=new Dt(n,e),r=new Dt(n,e+1);let i=je();return this.Kr.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Dt(e,0),s=this.$r.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Dt{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return ke.comparator(e.key,n.key)||$e(e.Zr,n.Zr)}static Wr(e,n){return $e(e.Zr,n.Zr)||ke.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Ot(Dt.Ur)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new JN(i,n,s,r);this.mutationQueue.push(o);for(const a of r)this.Xr=this.Xr.add(new Dt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return X.resolve(o)}lookupMutationBatch(e,n){return X.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ti(s),i=r<0?0:r;return X.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?Jp:this.nr-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Dt(n,0),r=new Dt(n,Number.POSITIVE_INFINITY),i=[];return this.Xr.forEachInRange([s,r],o=>{const a=this.ei(o.Zr);i.push(a)}),X.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Ot($e);return n.forEach(r=>{const i=new Dt(r,0),o=new Dt(r,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([i,o],a=>{s=s.add(a.Zr)})}),X.resolve(this.ni(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;ke.isDocumentKey(i)||(i=i.child(""));const o=new Dt(new ke(i),0);let a=new Ot($e);return this.Xr.forEachWhile(l=>{const c=l.key.path;return!!s.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.Zr)),!0)},o),X.resolve(this.ni(a))}ni(e){const n=[];return e.forEach(s=>{const r=this.ei(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){et(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Xr;return X.forEach(n.mutations,r=>{const i=new Dt(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Xr=s})}sr(e){}containsKey(e,n){const s=new Dt(n,0),r=this.Xr.firstAfterOrEqual(s);return X.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(e){this.ii=e,this.docs=function(){return new ft(ke.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ii(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return X.resolve(s?s.document.mutableCopy():rn.newInvalidDocument(n))}getEntries(e,n){let s=qs();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():rn.newInvalidDocument(r))}),X.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=qs();const o=n.path,a=new ke(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||fN(hN(u),s)<=0||(r.has(u.key)||pd(n,u))&&(i=i.insert(u.key,u.mutableCopy()))}return X.resolve(i)}getAllFromCollectionGroup(e,n,s,r){Pe(9500)}si(e,n){return X.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new $L(this)}getSize(e){return X.resolve(this.size)}}class $L extends PL{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Br.addEntry(e,r)):this.Br.removeEntry(s)}),X.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(e){this.persistence=e,this.oi=new Ii(n=>tg(n),ng),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this._i=0,this.ai=new lg,this.targetCount=0,this.ui=ho.cr()}forEachTarget(e,n){return this.oi.forEach((s,r)=>n(r)),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this._i&&(this._i=n),X.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new ho(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,X.resolve()}updateTargetData(e,n){return this.Tr(n),X.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.oi.forEach((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.oi.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),X.waitFor(i).next(()=>r)}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,n){const s=this.oi.get(n)||null;return X.resolve(s)}addMatchingKeys(e,n,s){return this.ai.Gr(n,s),X.resolve()}removeMatchingKeys(e,n,s){this.ai.jr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),X.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),X.resolve()}getMatchingKeysForTargetId(e,n){const s=this.ai.Yr(n);return X.resolve(s)}containsKey(e,n){return X.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e,n){this.ci={},this.overlays={},this.li=new ud(0),this.hi=!1,this.hi=!0,this.Pi=new NL,this.referenceDelegate=e(this),this.Ti=new FL(this),this.indexManager=new EL,this.remoteDocumentCache=function(r){return new VL(r)}(s=>this.referenceDelegate.Ii(s)),this.serializer=new xL(n),this.Ei=new DL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new ML,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ci[e.toKey()];return s||(s=new LL(n,this.referenceDelegate),this.ci[e.toKey()]=s),s}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,s){fe("MemoryPersistence","Starting transaction:",e);const r=new UL(this.li.next());return this.referenceDelegate.di(),s(r).next(i=>this.referenceDelegate.Ai(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ri(e,n){return X.or(Object.values(this.ci).map(s=>()=>s.containsKey(e,n)))}}class UL extends gN{constructor(e){super(),this.currentSequenceNumber=e}}class cg{constructor(e){this.persistence=e,this.Vi=new lg,this.mi=null}static fi(e){return new cg(e)}get gi(){if(this.mi)return this.mi;throw Pe(60996)}addReference(e,n,s){return this.Vi.addReference(s,n),this.gi.delete(s.toString()),X.resolve()}removeReference(e,n,s){return this.Vi.removeReference(s,n),this.gi.add(s.toString()),X.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),X.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(r=>this.gi.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.gi.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.gi,s=>{const r=ke.fromPath(s);return this.pi(e,r).next(i=>{i||n.removeEntry(r,Oe.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(s=>{s?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return X.or([()=>X.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class bu{constructor(e,n){this.persistence=e,this.yi=new Ii(s=>vN(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=CL(this,n)}static fi(e,n){return new bu(e,n)}di(){}Ai(e){return X.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.Sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}Sr(e){let n=0;return this.yr(e,s=>{n++}).next(()=>n)}yr(e,n){return X.forEach(this.yi,(s,r)=>this.Dr(e,s,r).next(i=>i?X.resolve():n(r)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.si(e,o=>this.Dr(e,o,n).next(a=>{a||(s++,i.removeEntry(o,Oe.min()))})).next(()=>i.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),X.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),X.resolve()}removeReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),X.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),X.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Oc(e.data.value)),n}Dr(e,n,s){return X.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.yi.get(n);return X.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.ds=s,this.As=r}static Rs(e,n){let s=je(),r=je();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new ug(e,n.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return XP()?8:mN(dn())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ws(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Ss(e,n,r,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new BL;return this.bs(e,n,o).next(a=>{if(i.result=a,this.fs)return this.Ds(e,n,o,a.size)})}).next(()=>i.result)}Ds(e,n,s,r){return s.documentReadCount<this.gs?(zi()<=Be.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",Hi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),X.resolve()):(zi()<=Be.DEBUG&&fe("QueryEngine","Query:",Hi(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.ps*r?(zi()<=Be.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",Hi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cs(n))):X.resolve())}ws(e,n){if(fv(n))return X.resolve(null);let s=cs(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Mf(n,null,"F"),s=cs(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=je(...i);return this.ys.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,s).next(l=>{const c=this.vs(n,a);return this.Cs(n,c,o,l.readTime)?this.ws(e,Mf(n,null,"F")):this.Fs(e,c,n,l)}))})))}Ss(e,n,s,r){return fv(n)||r.isEqual(Oe.min())?X.resolve(null):this.ys.getDocuments(e,s).next(i=>{const o=this.vs(n,i);return this.Cs(n,o,s,r)?X.resolve(null):(zi()<=Be.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Hi(n)),this.Fs(e,o,n,dN(r,Qa)).next(a=>a))})}vs(e,n){let s=new Ot(EE(e));return n.forEach((r,i)=>{pd(e,i)&&(s=s.add(i))}),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}bs(e,n,s){return zi()<=Be.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",Hi(n)),this.ys.getDocumentsMatchingQuery(e,n,Er.min(),s)}Fs(e,n,s,r){return this.ys.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg="LocalStore",zL=3e8;class HL{constructor(e,n,s,r){this.persistence=e,this.Ms=n,this.serializer=r,this.xs=new ft($e),this.Os=new Ii(i=>tg(i),ng),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(s)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new OL(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function qL(t,e,n,s){return new HL(t,e,n,s)}async function KE(t,e){const n=Me(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Ls(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],a=[];let l=je();for(const c of r){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(s,l).next(c=>({ks:c,removedBatchIds:o,addedBatchIds:a}))})})}function WL(t,e){const n=Me(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Bs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const h=c.batch,p=h.keys();let g=X.resolve();return p.forEach(y=>{g=g.next(()=>u.getEntry(l,y)).next(v=>{const _=c.docVersions.get(y);et(_!==null,48541),v.version.compareTo(_)<0&&(h.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),u.addEntry(v)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(a){let l=je();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function GE(t){const e=Me(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function KL(t,e){const n=Me(t),s=e.snapshotVersion;let r=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Bs.newChangeBuffer({trackRemovals:!0});r=n.xs;const a=[];e.targetChanges.forEach((u,h)=>{const p=r.get(h);if(!p)return;a.push(n.Ti.removeMatchingKeys(i,u.removedDocuments,h).next(()=>n.Ti.addMatchingKeys(i,u.addedDocuments,h)));let g=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(qt.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):u.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(u.resumeToken,s)),r=r.insert(h,g),function(v,_,E){return v.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=zL?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(p,g,u)&&a.push(n.Ti.updateTargetData(i,g))});let l=qs(),c=je();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))}),a.push(GL(i,o,e.documentUpdates).next(u=>{l=u.qs,c=u.Qs})),!s.isEqual(Oe.min())){const u=n.Ti.getLastRemoteSnapshotVersion(i).next(h=>n.Ti.setTargetsMetadata(i,i.currentSequenceNumber,s));a.push(u)}return X.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.xs=r,i))}function GL(t,e,n){let s=je(),r=je();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=qs();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(Oe.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):fe(dg,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{qs:o,Qs:r}})}function YL(t,e){const n=Me(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Jp),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function QL(t,e){const n=Me(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Ti.getTargetData(s,e).next(i=>i?(r=i,X.resolve(r)):n.Ti.allocateTargetId(s).next(o=>(r=new dr(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Ti.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.xs.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.xs=n.xs.insert(s.targetId,s),n.Os.set(e,s.targetId)),s})}async function Ff(t,e,n){const s=Me(t),r=s.xs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Co(o))throw o;fe(dg,`Failed to update sequence numbers for target ${e}: ${o}`)}s.xs=s.xs.remove(e),s.Os.delete(r.target)}function Iv(t,e,n){const s=Me(t);let r=Oe.min(),i=je();return s.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const h=Me(l),p=h.Os.get(u);return p!==void 0?X.resolve(h.xs.get(p)):h.Ti.getTargetData(c,u)}(s,o,cs(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,s.Ti.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>s.Ms.getDocumentsMatchingQuery(o,e,n?r:Oe.min(),n?i:je())).next(a=>(XL(s,VN(e),a),{documents:a,$s:i})))}function XL(t,e,n){let s=t.Ns.get(e)||Oe.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Ns.set(e,s)}class Sv{constructor(){this.activeTargetIds=zN()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class JL{constructor(){this.xo=new Sv,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,s){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Sv,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZL{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av="ConnectivityMonitor";class Cv{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){fe(Av,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){fe(Av,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nc=null;function Uf(){return nc===null?nc=function(){return 268435456+Math.round(2147483648*Math.random())}():nc++,"0x"+nc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oh="RestConnection",eV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class tV{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${s}/databases/${r}`,this.Go=this.databaseId.database===pu?`project_id=${s}`:`project_id=${s}&database_id=${r}`}zo(e,n,s,r,i){const o=Uf(),a=this.jo(e,n.toUriEncodedString());fe(Oh,`Sending RPC '${e}' ${o}:`,a,s);const l={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(l,r,i);const{host:c}=new URL(a),u=bl(c);return this.Jo(e,a,l,s,u).then(h=>(fe(Oh,`Received RPC '${e}' ${o}: `,h),h),h=>{throw ao(Oh,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",s),h})}Yo(e,n,s,r,i,o){return this.zo(e,n,s,r,i)}Ho(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+So}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}jo(e,n){const s=eV[e];return`${this.Ko}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zt="WebChannelConnection";class sV extends tV{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=Uf();return new Promise((a,l)=>{const c=new Q1;c.setWithCredentials(!0),c.listenOnce(X1.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Rc.NO_ERROR:const h=c.getResponseJson();fe(Zt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case Rc.TIMEOUT:fe(Zt,`RPC '${e}' ${o} timed out`),l(new ge(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Rc.HTTP_ERROR:const p=c.getStatus();if(fe(Zt,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const y=g==null?void 0:g.error;if(y&&y.status&&y.message){const v=function(E){const S=E.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(S)>=0?S:Z.UNKNOWN}(y.status);l(new ge(v,y.message))}else l(new ge(Z.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new ge(Z.UNAVAILABLE,"Connection failed."));break;default:Pe(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{fe(Zt,`RPC '${e}' ${o} completed.`)}});const u=JSON.stringify(r);fe(Zt,`RPC '${e}' ${o} sending request:`,r),c.send(n,"POST",u,s,15)})}T_(e,n,s){const r=Uf(),i=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=eE(),a=Z1(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Ho(l.initMessageHeaders,n,s),l.encodeInitMessageHeaders=!0;const u=i.join("");fe(Zt,`Creating RPC '${e}' stream ${r}: ${u}`,l);const h=o.createWebChannel(u,l);let p=!1,g=!1;const y=new nV({Zo:_=>{g?fe(Zt,`Not sending because RPC '${e}' stream ${r} is closed:`,_):(p||(fe(Zt,`Opening RPC '${e}' stream ${r} transport.`),h.open(),p=!0),fe(Zt,`RPC '${e}' stream ${r} sending:`,_),h.send(_))},Xo:()=>h.close()}),v=(_,E,S)=>{_.listen(E,D=>{try{S(D)}catch(F){setTimeout(()=>{throw F},0)}})};return v(h,ia.EventType.OPEN,()=>{g||(fe(Zt,`RPC '${e}' stream ${r} transport opened.`),y.__())}),v(h,ia.EventType.CLOSE,()=>{g||(g=!0,fe(Zt,`RPC '${e}' stream ${r} transport closed`),y.u_())}),v(h,ia.EventType.ERROR,_=>{g||(g=!0,ao(Zt,`RPC '${e}' stream ${r} transport errored. Name:`,_.name,"Message:",_.message),y.u_(new ge(Z.UNAVAILABLE,"The operation could not be completed")))}),v(h,ia.EventType.MESSAGE,_=>{var E;if(!g){const S=_.data[0];et(!!S,16349);const D=S,F=(D==null?void 0:D.error)||((E=D[0])===null||E===void 0?void 0:E.error);if(F){fe(Zt,`RPC '${e}' stream ${r} received error:`,F);const M=F.status;let O=function(w){const C=kt[w];if(C!==void 0)return NE(C)}(M),T=F.message;O===void 0&&(O=Z.INTERNAL,T="Unknown error status: "+M+" with message "+F.message),g=!0,y.u_(new ge(O,T)),h.close()}else fe(Zt,`RPC '${e}' stream ${r} received:`,S),y.c_(S)}}),v(a,J1.STAT_EVENT,_=>{_.stat===Sf.PROXY?fe(Zt,`RPC '${e}' stream ${r} detected buffering proxy`):_.stat===Sf.NOPROXY&&fe(Zt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{y.a_()},0),y}}function Dh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _d(t){return new aL(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,n,s=1e3,r=1.5,i=6e4){this.xi=e,this.timerId=n,this.I_=s,this.E_=r,this.d_=i,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(e){this.cancel();const n=Math.floor(this.A_+this.g_()),s=Math.max(0,Date.now()-this.V_),r=Math.max(0,n-s);r>0&&fe("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.A_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.R_=this.xi.enqueueAfterDelay(this.timerId,r,()=>(this.V_=Date.now(),e())),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){this.R_!==null&&(this.R_.skipDelay(),this.R_=null)}cancel(){this.R_!==null&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv="PersistentStream";class QE{constructor(e,n,s,r,i,o,a,l){this.xi=e,this.y_=s,this.w_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.S_=0,this.b_=null,this.D_=null,this.stream=null,this.v_=0,this.C_=new YE(e,n)}F_(){return this.state===1||this.state===5||this.M_()}M_(){return this.state===2||this.state===3}start(){this.v_=0,this.state!==4?this.auth():this.x_()}async stop(){this.F_()&&await this.close(0)}O_(){this.state=0,this.C_.reset()}N_(){this.M_()&&this.b_===null&&(this.b_=this.xi.enqueueAfterDelay(this.y_,6e4,()=>this.B_()))}L_(e){this.k_(),this.stream.send(e)}async B_(){if(this.M_())return this.close(0)}k_(){this.b_&&(this.b_.cancel(),this.b_=null)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}async close(e,n){this.k_(),this.q_(),this.C_.cancel(),this.S_++,e!==4?this.C_.reset():n&&n.code===Z.RESOURCE_EXHAUSTED?(Hs(n.toString()),Hs("Using maximum backoff delay to prevent overloading the backend."),this.C_.m_()):n&&n.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Q_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}Q_(){}auth(){this.state=1;const e=this.U_(this.S_),n=this.S_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.S_===n&&this.K_(s,r)},s=>{e(()=>{const r=new ge(Z.UNKNOWN,"Fetching auth token failed: "+s.message);return this.W_(r)})})}K_(e,n){const s=this.U_(this.S_);this.stream=this.G_(e,n),this.stream.e_(()=>{s(()=>this.listener.e_())}),this.stream.n_(()=>{s(()=>(this.state=2,this.D_=this.xi.enqueueAfterDelay(this.w_,1e4,()=>(this.M_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(r=>{s(()=>this.W_(r))}),this.stream.onMessage(r=>{s(()=>++this.v_==1?this.z_(r):this.onNext(r))})}x_(){this.state=5,this.C_.f_(async()=>{this.state=0,this.start()})}W_(e){return fe(Pv,`close with error: ${e}`),this.stream=null,this.close(4,e)}U_(e){return n=>{this.xi.enqueueAndForget(()=>this.S_===e?n():(fe(Pv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class rV extends QE{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}G_(e,n){return this.connection.T_("Listen",e,n)}z_(e){return this.onNext(e)}onNext(e){this.C_.reset();const n=uL(this.serializer,e),s=function(i){if(!("targetChange"in i))return Oe.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Oe.min():o.readTime?us(o.readTime):Oe.min()}(e);return this.listener.j_(n,s)}H_(e){const n={};n.database=$f(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Of(l)?{documents:fL(i,l)}:{query:pL(i,l).gt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=$E(i,o.resumeToken);const c=Nf(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Oe.min())>0){a.readTime=_u(i,o.snapshotVersion.toTimestamp());const c=Nf(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const s=mL(this.serializer,e);s&&(n.labels=s),this.L_(n)}J_(e){const n={};n.database=$f(this.serializer),n.removeTarget=e,this.L_(n)}}class iV extends QE{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get Y_(){return this.v_>0}start(){this.lastStreamToken=void 0,super.start()}Q_(){this.Y_&&this.Z_([])}G_(e,n){return this.connection.T_("Write",e,n)}z_(e){return et(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,et(!e.writeResults||e.writeResults.length===0,55816),this.listener.X_()}onNext(e){et(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.C_.reset();const n=hL(e.writeResults,e.commitTime),s=us(e.commitTime);return this.listener.ea(s,n)}ta(){const e={};e.database=$f(this.serializer),this.L_(e)}Z_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>dL(this.serializer,s))};this.L_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{}class aV extends oV{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.na=!1}ra(){if(this.na)throw new ge(Z.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,s,r){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.zo(e,Lf(n,s),r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ge(Z.UNKNOWN,i.toString())})}Yo(e,n,s,r,i){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Yo(e,Lf(n,s),r,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ge(Z.UNKNOWN,o.toString())})}terminate(){this.na=!0,this.connection.terminate()}}class lV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){this.ia===0&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve())))}ca(e){this.state==="Online"?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.aa("Offline")))}set(e){this.la(),this.ia=0,e==="Online"&&(this.oa=!1),this.aa(e)}aa(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ua(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.oa?(Hs(n),this.oa=!1):fe("OnlineStateTracker",n)}la(){this.sa!==null&&(this.sa.cancel(),this.sa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi="RemoteStore";class cV{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=i,this.Ea.No(o=>{s.enqueueAndForget(async()=>{Ai(this)&&(fe(bi,"Restarting streams for network reachability change."),await async function(l){const c=Me(l);c.Ta.add(4),await Sl(c),c.da.set("Unknown"),c.Ta.delete(4),await bd(c)}(this))})}),this.da=new lV(s,r)}}async function bd(t){if(Ai(t))for(const e of t.Ia)await e(!0)}async function Sl(t){for(const e of t.Ia)await e(!1)}function XE(t,e){const n=Me(t);n.Pa.has(e.targetId)||(n.Pa.set(e.targetId,e),gg(n)?pg(n):Ro(n).M_()&&fg(n,e))}function hg(t,e){const n=Me(t),s=Ro(n);n.Pa.delete(e),s.M_()&&JE(n,e),n.Pa.size===0&&(s.M_()?s.N_():Ai(n)&&n.da.set("Unknown"))}function fg(t,e){if(t.Aa.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ro(t).H_(e)}function JE(t,e){t.Aa.Ke(e),Ro(t).J_(e)}function pg(t){t.Aa=new sL({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Pa.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),Ro(t).start(),t.da._a()}function gg(t){return Ai(t)&&!Ro(t).F_()&&t.Pa.size>0}function Ai(t){return Me(t).Ta.size===0}function ZE(t){t.Aa=void 0}async function uV(t){t.da.set("Online")}async function dV(t){t.Pa.forEach((e,n)=>{fg(t,e)})}async function hV(t,e){ZE(t),gg(t)?(t.da.ca(e),pg(t)):t.da.set("Unknown")}async function fV(t,e,n){if(t.da.set("Online"),e instanceof VE&&e.state===2&&e.cause)try{await async function(r,i){const o=i.cause;for(const a of i.targetIds)r.Pa.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.Pa.delete(a),r.Aa.removeTarget(a))}(t,e)}catch(s){fe(bi,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await xu(t,s)}else if(e instanceof Nc?t.Aa.Xe(e):e instanceof LE?t.Aa.ot(e):t.Aa.nt(e),!n.isEqual(Oe.min()))try{const s=await GE(t.localStore);n.compareTo(s)>=0&&await function(i,o){const a=i.Aa.It(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.Pa.get(c);u&&i.Pa.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=i.Pa.get(l);if(!u)return;i.Pa.set(l,u.withResumeToken(qt.EMPTY_BYTE_STRING,u.snapshotVersion)),JE(i,l);const h=new dr(u.target,l,c,u.sequenceNumber);fg(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(s){fe(bi,"Failed to raise snapshot:",s),await xu(t,s)}}async function xu(t,e,n){if(!Co(e))throw e;t.Ta.add(1),await Sl(t),t.da.set("Offline"),n||(n=()=>GE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{fe(bi,"Retrying IndexedDB access"),await n(),t.Ta.delete(1),await bd(t)})}function eT(t,e){return e().catch(n=>xu(t,n,e))}async function xd(t){const e=Me(t),n=Sr(e);let s=e.ha.length>0?e.ha[e.ha.length-1].batchId:Jp;for(;pV(e);)try{const r=await YL(e.localStore,s);if(r===null){e.ha.length===0&&n.N_();break}s=r.batchId,gV(e,r)}catch(r){await xu(e,r)}tT(e)&&nT(e)}function pV(t){return Ai(t)&&t.ha.length<10}function gV(t,e){t.ha.push(e);const n=Sr(t);n.M_()&&n.Y_&&n.Z_(e.mutations)}function tT(t){return Ai(t)&&!Sr(t).F_()&&t.ha.length>0}function nT(t){Sr(t).start()}async function mV(t){Sr(t).ta()}async function yV(t){const e=Sr(t);for(const n of t.ha)e.Z_(n.mutations)}async function vV(t,e,n){const s=t.ha.shift(),r=ig.from(s,e,n);await eT(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await xd(t)}async function _V(t,e){e&&Sr(t).Y_&&await async function(s,r){if(function(o){return tL(o)&&o!==Z.ABORTED}(r.code)){const i=s.ha.shift();Sr(s).O_(),await eT(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r)),await xd(s)}}(t,e),tT(t)&&nT(t)}async function Rv(t,e){const n=Me(t);n.asyncQueue.verifyOperationInProgress(),fe(bi,"RemoteStore received new credentials");const s=Ai(n);n.Ta.add(3),await Sl(n),s&&n.da.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ta.delete(3),await bd(n)}async function bV(t,e){const n=Me(t);e?(n.Ta.delete(2),await bd(n)):e||(n.Ta.add(2),await Sl(n),n.da.set("Unknown"))}function Ro(t){return t.Ra||(t.Ra=function(n,s,r){const i=Me(n);return i.ra(),new rV(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{e_:uV.bind(null,t),n_:dV.bind(null,t),i_:hV.bind(null,t),j_:fV.bind(null,t)}),t.Ia.push(async e=>{e?(t.Ra.O_(),gg(t)?pg(t):t.da.set("Unknown")):(await t.Ra.stop(),ZE(t))})),t.Ra}function Sr(t){return t.Va||(t.Va=function(n,s,r){const i=Me(n);return i.ra(),new iV(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:mV.bind(null,t),i_:_V.bind(null,t),X_:yV.bind(null,t),ea:vV.bind(null,t)}),t.Ia.push(async e=>{e?(t.Va.O_(),await xd(t)):(await t.Va.stop(),t.ha.length>0&&(fe(bi,`Stopping write stream with ${t.ha.length} pending writes`),t.ha=[]))})),t.Va}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new ai,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,a=new mg(e,n,o,r,i);return a.start(s),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yg(t,e){if(Hs("AsyncQueue",`${e}: ${t}`),Co(t))return new ge(Z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{static emptySet(e){return new eo(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ke.comparator(n.key,s.key):(n,s)=>ke.comparator(n.key,s.key),this.keyedMap=oa(),this.sortedSet=new ft(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof eo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new eo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(){this.ma=new ft(ke.comparator)}track(e){const n=e.doc.key,s=this.ma.get(n);s?e.type!==0&&s.type===3?this.ma=this.ma.insert(n,e):e.type===3&&s.type!==1?this.ma=this.ma.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ma=this.ma.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ma=this.ma.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ma=this.ma.remove(n):e.type===1&&s.type===2?this.ma=this.ma.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ma=this.ma.insert(n,{type:2,doc:e.doc}):Pe(63341,{Vt:e,fa:s}):this.ma=this.ma.insert(n,e)}ga(){const e=[];return this.ma.inorderTraversal((n,s)=>{e.push(s)}),e}}class fo{constructor(e,n,s,r,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new fo(e,n,eo.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{constructor(){this.pa=void 0,this.ya=[]}wa(){return this.ya.some(e=>e.Sa())}}class wV{constructor(){this.queries=Dv(),this.onlineState="Unknown",this.ba=new Set}terminate(){(function(n,s){const r=Me(n),i=r.queries;r.queries=Dv(),i.forEach((o,a)=>{for(const l of a.ya)l.onError(s)})})(this,new ge(Z.ABORTED,"Firestore shutting down"))}}function Dv(){return new Ii(t=>wE(t),fd)}async function EV(t,e){const n=Me(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.wa()&&e.Sa()&&(s=2):(i=new xV,s=e.Sa()?0:1);try{switch(s){case 0:i.pa=await n.onListen(r,!0);break;case 1:i.pa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=yg(o,`Initialization of query '${Hi(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.ya.push(e),e.Da(n.onlineState),i.pa&&e.va(i.pa)&&vg(n)}async function TV(t,e){const n=Me(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.ya.indexOf(e);o>=0&&(i.ya.splice(o,1),i.ya.length===0?r=e.Sa()?0:1:!i.wa()&&e.Sa()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function kV(t,e){const n=Me(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const a of o.ya)a.va(r)&&(s=!0);o.pa=r}}s&&vg(n)}function IV(t,e,n){const s=Me(t),r=s.queries.get(e);if(r)for(const i of r.ya)i.onError(n);s.queries.delete(e)}function vg(t){t.ba.forEach(e=>{e.next()})}var Bf,Mv;(Mv=Bf||(Bf={})).Ca="default",Mv.Cache="cache";class SV{constructor(e,n,s){this.query=e,this.Fa=n,this.Ma=!1,this.xa=null,this.onlineState="Unknown",this.options=s||{}}va(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new fo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Ma?this.Oa(e)&&(this.Fa.next(e),n=!0):this.Na(e,this.onlineState)&&(this.Ba(e),n=!0),this.xa=e,n}onError(e){this.Fa.error(e)}Da(e){this.onlineState=e;let n=!1;return this.xa&&!this.Ma&&this.Na(this.xa,e)&&(this.Ba(this.xa),n=!0),n}Na(e,n){if(!e.fromCache||!this.Sa())return!0;const s=n!=="Offline";return(!this.options.La||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Oa(e){if(e.docChanges.length>0)return!0;const n=this.xa&&this.xa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Ba(e){e=fo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Ma=!0,this.Fa.next(e)}Sa(){return this.options.source!==Bf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e){this.key=e}}class rT{constructor(e){this.key=e}}class AV{constructor(e,n){this.query=e,this.Ga=n,this.za=null,this.hasCachedResults=!1,this.current=!1,this.ja=je(),this.mutatedKeys=je(),this.Ha=EE(e),this.Ja=new eo(this.Ha)}get Ya(){return this.Ga}Za(e,n){const s=n?n.Xa:new Ov,r=n?n.Ja:this.Ja;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,h)=>{const p=r.get(u),g=pd(this.query,h)?h:null,y=!!p&&this.mutatedKeys.has(p.key),v=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let _=!1;p&&g?p.data.isEqual(g.data)?y!==v&&(s.track({type:3,doc:g}),_=!0):this.eu(p,g)||(s.track({type:2,doc:g}),_=!0,(l&&this.Ha(g,l)>0||c&&this.Ha(g,c)<0)&&(a=!0)):!p&&g?(s.track({type:0,doc:g}),_=!0):p&&!g&&(s.track({type:1,doc:p}),_=!0,(l||c)&&(a=!0)),_&&(g?(o=o.add(g),i=v?i.add(u):i.delete(u)):(o=o.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),i=i.delete(u.key),s.track({type:1,doc:u})}return{Ja:o,Xa:s,Cs:a,mutatedKeys:i}}eu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.Ja;this.Ja=e.Ja,this.mutatedKeys=e.mutatedKeys;const o=e.Xa.ga();o.sort((u,h)=>function(g,y){const v=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pe(20277,{Vt:_})}};return v(g)-v(y)}(u.type,h.type)||this.Ha(u.doc,h.doc)),this.tu(s),r=r!=null&&r;const a=n&&!r?this.nu():[],l=this.ja.size===0&&this.current&&!r?1:0,c=l!==this.za;return this.za=l,o.length!==0||c?{snapshot:new fo(this.query,e.Ja,i,o,e.mutatedKeys,l===0,c,!1,!!s&&s.resumeToken.approximateByteSize()>0),ru:a}:{ru:a}}Da(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ja:this.Ja,Xa:new Ov,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ru:[]}}iu(e){return!this.Ga.has(e)&&!!this.Ja.has(e)&&!this.Ja.get(e).hasLocalMutations}tu(e){e&&(e.addedDocuments.forEach(n=>this.Ga=this.Ga.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ga=this.Ga.delete(n)),this.current=e.current)}nu(){if(!this.current)return[];const e=this.ja;this.ja=je(),this.Ja.forEach(s=>{this.iu(s.key)&&(this.ja=this.ja.add(s.key))});const n=[];return e.forEach(s=>{this.ja.has(s)||n.push(new rT(s))}),this.ja.forEach(s=>{e.has(s)||n.push(new sT(s))}),n}su(e){this.Ga=e.$s,this.ja=je();const n=this.Za(e.documents);return this.applyChanges(n,!0)}ou(){return fo.fromInitialDocuments(this.query,this.Ja,this.mutatedKeys,this.za===0,this.hasCachedResults)}}const _g="SyncEngine";class CV{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class PV{constructor(e){this.key=e,this._u=!1}}class RV{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.au={},this.uu=new Ii(a=>wE(a),fd),this.cu=new Map,this.lu=new Set,this.hu=new ft(ke.comparator),this.Pu=new Map,this.Tu=new lg,this.Iu={},this.Eu=new Map,this.du=ho.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return this.Au===!0}}async function OV(t,e,n=!0){const s=uT(t);let r;const i=s.uu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.ou()):r=await iT(s,e,n,!0),r}async function DV(t,e){const n=uT(t);await iT(n,e,!0,!1)}async function iT(t,e,n,s){const r=await QL(t.localStore,cs(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return s&&(a=await MV(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&XE(t.remoteStore,r),a}async function MV(t,e,n,s,r){t.Ru=(h,p,g)=>async function(v,_,E,S){let D=_.view.Za(E);D.Cs&&(D=await Iv(v.localStore,_.query,!1).then(({documents:T})=>_.view.Za(T,D)));const F=S&&S.targetChanges.get(_.targetId),M=S&&S.targetMismatches.get(_.targetId)!=null,O=_.view.applyChanges(D,v.isPrimaryClient,F,M);return Lv(v,_.targetId,O.ru),O.snapshot}(t,h,p,g);const i=await Iv(t.localStore,e,!0),o=new AV(e,i.$s),a=o.Za(i.documents),l=Il.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),c=o.applyChanges(a,t.isPrimaryClient,l);Lv(t,n,c.ru);const u=new CV(e,n,o);return t.uu.set(e,u),t.cu.has(n)?t.cu.get(n).push(e):t.cu.set(n,[e]),c.snapshot}async function NV(t,e,n){const s=Me(t),r=s.uu.get(e),i=s.cu.get(r.targetId);if(i.length>1)return s.cu.set(r.targetId,i.filter(o=>!fd(o,e))),void s.uu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await Ff(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&hg(s.remoteStore,r.targetId),jf(s,r.targetId)}).catch(Ao)):(jf(s,r.targetId),await Ff(s.localStore,r.targetId,!0))}async function LV(t,e){const n=Me(t),s=n.uu.get(e),r=n.cu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),hg(n.remoteStore,s.targetId))}async function VV(t,e,n){const s=HV(t);try{const r=await function(o,a){const l=Me(o),c=Rt.now(),u=a.reduce((g,y)=>g.add(y.key),je());let h,p;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let y=qs(),v=je();return l.Bs.getEntries(g,u).next(_=>{y=_,y.forEach((E,S)=>{S.isValidDocument()||(v=v.add(E))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,y)).next(_=>{h=_;const E=[];for(const S of a){const D=QN(S,h.get(S.key).overlayedDocument);D!=null&&E.push(new Si(S.key,D,pE(D.value.mapValue),$s.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,E,a)}).next(_=>{p=_;const E=_.applyToLocalDocumentSet(h,v);return l.documentOverlayCache.saveOverlays(g,_.batchId,E)})}).then(()=>({batchId:p.batchId,changes:kE(h)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let c=o.Iu[o.currentUser.toKey()];c||(c=new ft($e)),c=c.insert(a,l),o.Iu[o.currentUser.toKey()]=c}(s,r.batchId,n),await Al(s,r.changes),await xd(s.remoteStore)}catch(r){const i=yg(r,"Failed to persist write");n.reject(i)}}async function oT(t,e){const n=Me(t);try{const s=await KL(n.localStore,e);e.targetChanges.forEach((r,i)=>{const o=n.Pu.get(i);o&&(et(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o._u=!0:r.modifiedDocuments.size>0?et(o._u,14607):r.removedDocuments.size>0&&(et(o._u,42227),o._u=!1))}),await Al(n,s,e)}catch(s){await Ao(s)}}function Nv(t,e,n){const s=Me(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.uu.forEach((i,o)=>{const a=o.view.Da(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=Me(o);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(const p of h.ya)p.Da(a)&&(c=!0)}),c&&vg(l)}(s.eventManager,e),r.length&&s.au.j_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function $V(t,e,n){const s=Me(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Pu.get(e),i=r&&r.key;if(i){let o=new ft(ke.comparator);o=o.insert(i,rn.newNoDocument(i,Oe.min()));const a=je().add(i),l=new vd(Oe.min(),new Map,new ft($e),o,a);await oT(s,l),s.hu=s.hu.remove(i),s.Pu.delete(e),bg(s)}else await Ff(s.localStore,e,!1).then(()=>jf(s,e,n)).catch(Ao)}async function FV(t,e){const n=Me(t),s=e.batch.batchId;try{const r=await WL(n.localStore,e);lT(n,s,null),aT(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Al(n,r)}catch(r){await Ao(r)}}async function UV(t,e,n){const s=Me(t);try{const r=await function(o,a){const l=Me(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(et(h!==null,37113),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(s.localStore,e);lT(s,e,n),aT(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Al(s,r)}catch(r){await Ao(r)}}function aT(t,e){(t.Eu.get(e)||[]).forEach(n=>{n.resolve()}),t.Eu.delete(e)}function lT(t,e,n){const s=Me(t);let r=s.Iu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Iu[s.currentUser.toKey()]=r}}function jf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.cu.get(e))t.uu.delete(s),n&&t.au.Vu(s,n);t.cu.delete(e),t.isPrimaryClient&&t.Tu.Hr(e).forEach(s=>{t.Tu.containsKey(s)||cT(t,s)})}function cT(t,e){t.lu.delete(e.path.canonicalString());const n=t.hu.get(e);n!==null&&(hg(t.remoteStore,n),t.hu=t.hu.remove(e),t.Pu.delete(n),bg(t))}function Lv(t,e,n){for(const s of n)s instanceof sT?(t.Tu.addReference(s.key,e),BV(t,s)):s instanceof rT?(fe(_g,"Document no longer in limbo: "+s.key),t.Tu.removeReference(s.key,e),t.Tu.containsKey(s.key)||cT(t,s.key)):Pe(19791,{mu:s})}function BV(t,e){const n=e.key,s=n.path.canonicalString();t.hu.get(n)||t.lu.has(s)||(fe(_g,"New document in limbo: "+n),t.lu.add(s),bg(t))}function bg(t){for(;t.lu.size>0&&t.hu.size<t.maxConcurrentLimboResolutions;){const e=t.lu.values().next().value;t.lu.delete(e);const n=new ke(dt.fromString(e)),s=t.du.next();t.Pu.set(s,new PV(n)),t.hu=t.hu.insert(n,s),XE(t.remoteStore,new dr(cs(sg(n.path)),s,"TargetPurposeLimboResolution",ud.le))}}async function Al(t,e,n){const s=Me(t),r=[],i=[],o=[];s.uu.isEmpty()||(s.uu.forEach((a,l)=>{o.push(s.Ru(l,e,n).then(c=>{var u;if((c||n)&&s.isPrimaryClient){const h=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;s.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){r.push(c);const h=ug.Rs(l.targetId,c);i.push(h)}}))}),await Promise.all(o),s.au.j_(r),await async function(l,c){const u=Me(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>X.forEach(c,p=>X.forEach(p.ds,g=>u.persistence.referenceDelegate.addReference(h,p.targetId,g)).next(()=>X.forEach(p.As,g=>u.persistence.referenceDelegate.removeReference(h,p.targetId,g)))))}catch(h){if(!Co(h))throw h;fe(dg,"Failed to update sequence numbers: "+h)}for(const h of c){const p=h.targetId;if(!h.fromCache){const g=u.xs.get(p),y=g.snapshotVersion,v=g.withLastLimboFreeSnapshotVersion(y);u.xs=u.xs.insert(p,v)}}}(s.localStore,i))}async function jV(t,e){const n=Me(t);if(!n.currentUser.isEqual(e)){fe(_g,"User change. New user:",e.toKey());const s=await KE(n.localStore,e);n.currentUser=e,function(i,o){i.Eu.forEach(a=>{a.forEach(l=>{l.reject(new ge(Z.CANCELLED,o))})}),i.Eu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Al(n,s.ks)}}function zV(t,e){const n=Me(t),s=n.Pu.get(e);if(s&&s._u)return je().add(s.key);{let r=je();const i=n.cu.get(e);if(!i)return r;for(const o of i){const a=n.uu.get(o);r=r.unionWith(a.view.Ya)}return r}}function uT(t){const e=Me(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=oT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$V.bind(null,e),e.au.j_=kV.bind(null,e.eventManager),e.au.Vu=IV.bind(null,e.eventManager),e}function HV(t){const e=Me(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=UV.bind(null,e),e}class wu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_d(e.databaseInfo.databaseId),this.sharedClientState=this.pu(e),this.persistence=this.yu(e),await this.persistence.start(),this.localStore=this.wu(e),this.gcScheduler=this.Su(e,this.localStore),this.indexBackfillerScheduler=this.bu(e,this.localStore)}Su(e,n){return null}bu(e,n){return null}wu(e){return qL(this.persistence,new jL,e.initialUser,this.serializer)}yu(e){return new WE(cg.fi,this.serializer)}pu(e){return new JL}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wu.provider={build:()=>new wu};class qV extends wu{constructor(e){super(),this.cacheSizeBytes=e}Su(e,n){et(this.persistence.referenceDelegate instanceof bu,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new SL(s,e.asyncQueue,n)}yu(e){const n=this.cacheSizeBytes!==void 0?mn.withCacheSize(this.cacheSizeBytes):mn.DEFAULT;return new WE(s=>bu.fi(s,n),this.serializer)}}class zf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Nv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=jV.bind(null,this.syncEngine),await bV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new wV}()}createDatastore(e){const n=_d(e.databaseInfo.databaseId),s=function(i){return new sV(i)}(e.databaseInfo);return function(i,o,a,l){return new aV(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,r,i,o,a){return new cV(s,r,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Nv(this.syncEngine,n,0),function(){return Cv.C()?new Cv:new ZL}())}createSyncEngine(e,n){return function(r,i,o,a,l,c,u){const h=new RV(r,i,o,a,l,c);return u&&(h.Au=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const i=Me(r);fe(bi,"RemoteStore shutting down."),i.Ta.add(5),await Sl(i),i.Ea.shutdown(),i.da.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}zf.provider={build:()=>new zf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.vu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.vu(this.observer.error,e):Hs("Uncaught Error in snapshot listener:",e.toString()))}Cu(){this.muted=!0}vu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar="FirestoreClient";class KV{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=nn.UNAUTHENTICATED,this.clientId=rE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async o=>{fe(Ar,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(fe(Ar,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ai;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=yg(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Mh(t,e){t.asyncQueue.verifyOperationInProgress(),fe(Ar,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await KE(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Vv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await GV(t);fe(Ar,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>Rv(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,r)=>Rv(e.remoteStore,r)),t._onlineComponents=e}async function GV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){fe(Ar,"Using user provided OfflineComponentProvider");try{await Mh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===Z.FAILED_PRECONDITION||r.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;ao("Error using user provided cache. Falling back to memory cache: "+n),await Mh(t,new wu)}}else fe(Ar,"Using default OfflineComponentProvider"),await Mh(t,new qV(void 0));return t._offlineComponents}async function dT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(fe(Ar,"Using user provided OnlineComponentProvider"),await Vv(t,t._uninitializedComponentsProvider._online)):(fe(Ar,"Using default OnlineComponentProvider"),await Vv(t,new zf))),t._onlineComponents}function YV(t){return dT(t).then(e=>e.syncEngine)}async function $v(t){const e=await dT(t),n=e.eventManager;return n.onListen=OV.bind(null,e.syncEngine),n.onUnlisten=NV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=DV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=LV.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(t,e,n){if(!n)throw new ge(Z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function QV(t,e,n,s){if(e===!0&&s===!0)throw new ge(Z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Uv(t){if(!ke.isDocumentKey(t))throw new ge(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Bv(t){if(ke.isDocumentKey(t))throw new ge(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function wd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Pe(12329,{type:typeof t})}function to(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ge(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=wd(t);throw new ge(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT="firestore.googleapis.com",jv=!0;class zv{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new ge(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=pT,this.ssl=jv}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:jv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=qE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<kL)throw new ge(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hT((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ge(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ge(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ge(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ed{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new nN;switch(s.type){case"firstParty":return new oN(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ge(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=Fv.get(n);s&&(fe("ComponentProvider","Removing Datastore"),Fv.delete(n),s.terminate())}(this),Promise.resolve()}}function XV(t,e,n,s={}){var r;t=to(t,Ed);const i=bl(e),o=t._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),l=`${e}:${n}`;i&&($w(`https://${l}`),Fw("Firestore",!0)),o.host!==pT&&o.host!==l&&ao("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},o),{host:l,ssl:i,emulatorOptions:s});if(!pi(c,a)&&(t._setSettings(c),s.mockUserToken)){let u,h;if(typeof s.mockUserToken=="string")u=s.mockUserToken,h=nn.MOCK_USER;else{u=jP(s.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const p=s.mockUserToken.sub||s.mockUserToken.user_id;if(!p)throw new ge(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new nn(p)}t._authCredentials=new sN(new nE(u,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Ci(this.firestore,e,this._query)}}class bn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _r(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bn(this.firestore,e,this._key)}}class _r extends Ci{constructor(e,n,s){super(e,n,sg(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bn(this.firestore,null,new ke(e))}withConverter(e){return new _r(this.firestore,e,this._path)}}function JV(t,e,...n){if(t=Tt(t),fT("collection","path",e),t instanceof Ed){const s=dt.fromString(e,...n);return Bv(s),new _r(t,null,s)}{if(!(t instanceof bn||t instanceof _r))throw new ge(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(dt.fromString(e,...n));return Bv(s),new _r(t.firestore,null,s)}}function ZV(t,e,...n){if(t=Tt(t),arguments.length===1&&(e=rE.newId()),fT("doc","path",e),t instanceof Ed){const s=dt.fromString(e,...n);return Uv(s),new bn(t,null,new ke(s))}{if(!(t instanceof bn||t instanceof _r))throw new ge(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(dt.fromString(e,...n));return Uv(s),new bn(t.firestore,t instanceof _r?t.converter:null,new ke(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv="AsyncQueue";class qv{constructor(e=Promise.resolve()){this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new YE(this,"async_queue_retry"),this.ec=()=>{const s=Dh();s&&fe(Hv,"Visibility state changed to "+s.visibilityState),this.C_.p_()},this.tc=e;const n=Dh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nc(),this.rc(e)}enterRestrictedMode(e){if(!this.ju){this.ju=!0,this.Zu=e||!1;const n=Dh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ec)}}enqueue(e){if(this.nc(),this.ju)return new Promise(()=>{});const n=new ai;return this.rc(()=>this.ju&&this.Zu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.zu.push(e),this.sc()))}async sc(){if(this.zu.length!==0){try{await this.zu[0](),this.zu.shift(),this.C_.reset()}catch(e){if(!Co(e))throw e;fe(Hv,"Operation failed with retryable error: "+e)}this.zu.length>0&&this.C_.f_(()=>this.sc())}}rc(e){const n=this.tc.then(()=>(this.Yu=!0,e().catch(s=>{throw this.Ju=s,this.Yu=!1,Hs("INTERNAL UNHANDLED ERROR: ",Wv(s)),s}).then(s=>(this.Yu=!1,s))));return this.tc=n,n}enqueueAfterDelay(e,n,s){this.nc(),this.Xu.indexOf(e)>-1&&(n=0);const r=mg.createAndSchedule(this,e,n,s,i=>this.oc(i));return this.Hu.push(r),r}nc(){this.Ju&&Pe(47125,{_c:Wv(this.Ju)})}verifyOperationInProgress(){}async ac(){let e;do e=this.tc,await e;while(e!==this.tc)}uc(e){for(const n of this.Hu)if(n.timerId===e)return!0;return!1}cc(e){return this.ac().then(()=>{this.Hu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Hu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ac()})}lc(e){this.Xu.push(e)}oc(e){const n=this.Hu.indexOf(e);this.Hu.splice(n,1)}}function Wv(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(t){return function(n,s){if(typeof n!="object"||n===null)return!1;const r=n;for(const i of s)if(i in r&&typeof r[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Eu extends Ed{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new qv,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new qv(e),this._firestoreClient=void 0,await e}}}function gT(t,e){const n=typeof t=="object"?t:Rp(),s=typeof t=="string"?t:pu,r=To(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=UP("firestore");i&&XV(r,...i)}return r}function mT(t){if(t._terminated)throw new ge(Z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||e3(t),t._firestoreClient}function e3(t){var e,n,s;const r=t._freezeSettings(),i=function(a,l,c,u){return new xN(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,hT(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=r.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new KV(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e){this._byteString=e}static fromBase64String(e){try{return new po(qt.fromBase64String(e))}catch(n){throw new ge(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new po(qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ge(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ge(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ge(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $e(this._lat,e._lat)||$e(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t3=/^__.*__$/;class yT{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Si(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function vT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pe(40011,{hc:t})}}class Tg{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Pc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get hc(){return this.settings.hc}Tc(e){return new Tg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ic(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Tc({path:s,Ec:!1});return r.dc(e),r}Ac(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Tc({path:s,Ec:!1});return r.Pc(),r}Rc(e){return this.Tc({path:void 0,Ec:!0})}Vc(e){return Tu(e,this.settings.methodName,this.settings.mc||!1,this.path,this.settings.fc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Pc(){if(this.path)for(let e=0;e<this.path.length;e++)this.dc(this.path.get(e))}dc(e){if(e.length===0)throw this.Vc("Document fields must not be empty");if(vT(this.hc)&&t3.test(e))throw this.Vc('Document fields cannot begin and end with "__"')}}class n3{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||_d(e)}gc(e,n,s,r=!1){return new Tg({hc:e,methodName:n,fc:s,path:Ht.emptyPath(),Ec:!1,mc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _T(t){const e=t._freezeSettings(),n=_d(t._databaseId);return new n3(t._databaseId,!!e.ignoreUndefinedProperties,n)}class kd extends xg{_toFieldTransform(e){if(e.hc!==2)throw e.hc===1?e.Vc(`${this._methodName}() can only appear at the top level of your update data`):e.Vc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kd}}function s3(t,e,n,s){const r=t.gc(1,e,n);xT("Data must be an object, but it was:",r,s);const i=[],o=kn.empty();Nr(s,(l,c)=>{const u=kg(e,l,n);c=Tt(c);const h=r.Ac(u);if(c instanceof kd)i.push(u);else{const p=Cl(c,h);p!=null&&(i.push(u),o.set(u,p))}});const a=new zn(i);return new yT(o,a,r.fieldTransforms)}function r3(t,e,n,s,r,i){const o=t.gc(1,e,n),a=[Gv(e,s,n)],l=[r];if(i.length%2!=0)throw new ge(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(Gv(e,i[p])),l.push(i[p+1]);const c=[],u=kn.empty();for(let p=a.length-1;p>=0;--p)if(!l3(c,a[p])){const g=a[p];let y=l[p];y=Tt(y);const v=o.Ac(g);if(y instanceof kd)c.push(g);else{const _=Cl(y,v);_!=null&&(c.push(g),u.set(g,_))}}const h=new zn(c);return new yT(u,h,o.fieldTransforms)}function i3(t,e,n,s=!1){return Cl(n,t.gc(s?4:3,e))}function Cl(t,e){if(bT(t=Tt(t)))return xT("Unsupported field value:",e,t),o3(t,e);if(t instanceof xg)return function(s,r){if(!vT(r.hc))throw r.Vc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Vc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Ec&&e.hc!==4)throw e.Vc("Nested arrays are not supported");return function(s,r){const i=[];let o=0;for(const a of s){let l=Cl(a,r.Rc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(s,r){if((s=Tt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return HN(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=Rt.fromDate(s);return{timestampValue:_u(r.serializer,i)}}if(s instanceof Rt){const i=new Rt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:_u(r.serializer,i)}}if(s instanceof wg)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof po)return{bytesValue:$E(r.serializer,s._byteString)};if(s instanceof bn){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.Vc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:ag(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof Eg)return function(o,a){return{mapValue:{fields:{[hE]:{stringValue:fE},[gu]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Vc("VectorValues must only contain numeric values.");return rg(a.serializer,c)})}}}}}}(s,r);throw r.Vc(`Unsupported field value: ${wd(s)}`)}(t,e)}function o3(t,e){const n={};return oE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Nr(t,(s,r)=>{const i=Cl(r,e.Ic(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function bT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Rt||t instanceof wg||t instanceof po||t instanceof bn||t instanceof xg||t instanceof Eg)}function xT(t,e,n){if(!bT(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const s=wd(n);throw s==="an object"?e.Vc(t+" a custom object"):e.Vc(t+" "+s)}}function Gv(t,e,n){if((e=Tt(e))instanceof Td)return e._internalPath;if(typeof e=="string")return kg(t,e);throw Tu("Field path arguments must be of type string or ",t,!1,void 0,n)}const a3=new RegExp("[~\\*/\\[\\]]");function kg(t,e,n){if(e.search(a3)>=0)throw Tu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Td(...e.split("."))._internalPath}catch{throw Tu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Tu(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${s}`),o&&(l+=` in document ${r}`),l+=")"),new ge(Z.INVALID_ARGUMENT,a+t+l)}function l3(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new bn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new c3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ig("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class c3 extends wT{data(){return super.data()}}function Ig(t,e){return typeof e=="string"?kg(t,e):e instanceof Td?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u3(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ge(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sg{}class ET extends Sg{}function d3(t,e,...n){let s=[];e instanceof Sg&&s.push(e),s=s.concat(n),function(i){const o=i.filter(l=>l instanceof Cg).length,a=i.filter(l=>l instanceof Ag).length;if(o>1||o>0&&a>0)throw new ge(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const r of s)t=r._apply(t);return t}class Ag extends ET{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Ag(e,n,s)}_apply(e){const n=this._parse(e);return TT(e._query,n),new Ci(e.firestore,e.converter,Df(e._query,n))}_parse(e){const n=_T(e.firestore);return function(i,o,a,l,c,u,h){let p;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new ge(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){Qv(h,u);const y=[];for(const v of h)y.push(Yv(l,i,v));p={arrayValue:{values:y}}}else p=Yv(l,i,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||Qv(h,u),p=i3(a,o,h,u==="in"||u==="not-in");return It.create(c,u,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Cg extends Sg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Cg(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:Qn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,i){let o=r;const a=i.getFlattenedFilters();for(const l of a)TT(o,l),o=Df(o,l)}(e._query,n),new Ci(e.firestore,e.converter,Df(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Pg extends ET{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Pg(e,n)}_apply(e){const n=function(r,i,o){if(r.startAt!==null)throw new ge(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new ge(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new el(i,o)}(e._query,this._field,this._direction);return new Ci(e.firestore,e.converter,function(r,i){const o=r.explicitOrderBy.concat([i]);return new Po(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function h3(t,e="asc"){const n=e,s=Ig("orderBy",t);return Pg._create(s,n)}function Yv(t,e,n){if(typeof(n=Tt(n))=="string"){if(n==="")throw new ge(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xE(e)&&n.indexOf("/")!==-1)throw new ge(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(dt.fromString(n));if(!ke.isDocumentKey(s))throw new ge(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return av(t,new ke(s))}if(n instanceof bn)return av(t,n._key);throw new ge(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${wd(n)}.`)}function Qv(t,e){if(!Array.isArray(t)||t.length===0)throw new ge(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function TT(t,e){const n=function(r,i){for(const o of r)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ge(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class f3{convertValue(e,n="none"){switch(Ir(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(kr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Pe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Nr(e,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertVectorValue(e){var n,s,r;const i=(r=(s=(n=e.fields)===null||n===void 0?void 0:n[gu].arrayValue)===null||s===void 0?void 0:s.values)===null||r===void 0?void 0:r.map(o=>bt(o.doubleValue));return new Eg(i)}convertGeoPoint(e){return new wg(bt(e.latitude),bt(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=hd(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Xa(e));default:return null}}convertTimestamp(e){const n=Tr(e);return new Rt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=dt.fromString(e);et(HE(s),9688,{name:e});const r=new Ja(s.get(1),s.get(3)),i=new ke(s.popFirst(5));return r.isEqual(n)||Hs(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class kT extends wT{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Lc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Ig("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class Lc extends kT{data(e={}){return super.data(e)}}class p3{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new la(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Lc(this._firestore,this._userDataWriter,s.key,s,new la(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ge(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const l=new Lc(r._firestore,r._userDataWriter,a.doc.key,a.doc,new la(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Lc(r._firestore,r._userDataWriter,a.doc.key,a.doc,new la(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:g3(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function g3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pe(61501,{type:t})}}class IT extends f3{constructor(e){super(),this.firestore=e}convertBytes(e){return new po(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new bn(this.firestore,null,n)}}function m3(t,e,n,...s){t=to(t,bn);const r=to(t.firestore,Eu),i=_T(r);let o;return o=typeof(e=Tt(e))=="string"||e instanceof Td?r3(i,"updateDoc",t._key,e,n,s):s3(i,"updateDoc",t._key,e),v3(r,[o.toMutation(t._key,$s.exists(!0))])}function y3(t,...e){var n,s,r;t=Tt(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Kv(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Kv(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(s=h.error)===null||s===void 0?void 0:s.bind(h),e[o+2]=(r=h.complete)===null||r===void 0?void 0:r.bind(h)}let l,c,u;if(t instanceof bn)c=to(t.firestore,Eu),u=sg(t._key.path),l={next:h=>{e[o]&&e[o](_3(c,t,h))},error:e[o+1],complete:e[o+2]};else{const h=to(t,Ci);c=to(h.firestore,Eu),u=h._query;const p=new IT(c);l={next:g=>{e[o]&&e[o](new p3(c,p,h,g))},error:e[o+1],complete:e[o+2]},u3(t._query)}return function(p,g,y,v){const _=new WV(v),E=new SV(g,_,y);return p.asyncQueue.enqueueAndForget(async()=>EV(await $v(p),E)),()=>{_.Cu(),p.asyncQueue.enqueueAndForget(async()=>TV(await $v(p),E))}}(mT(c),u,a,l)}function v3(t,e){return function(s,r){const i=new ai;return s.asyncQueue.enqueueAndForget(async()=>VV(await YV(s),r,i)),i.promise}(mT(t),e)}function _3(t,e,n){const s=n.docs.get(e._key),r=new IT(t);return new kT(t,r,e._key,s,new la(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){So=r})(ko),hs(new Yn("firestore",(s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),a=new Eu(new rN(s.getProvider("auth-internal")),new aN(o,s.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ge(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ja(c.options.projectId,u)}(o,r),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Ln(Yy,Qy,e),Ln(Yy,Qy,"esm2017")})();const b3={apiKey:"AIzaSyCqcgvxcgWwG4LmYkSL66x4GYi1KLxuHts",authDomain:"chat-bot-pizzaria.firebaseapp.com",projectId:"chat-bot-pizzaria",storageBucket:"chat-bot-pizzaria.firebasestorage.app",messagingSenderId:"1090893949199",appId:"1:1090893949199:web:cc9724c44f5ef76ea9f67a",measurementId:"G-TQ6E8YLYHD"},Id=rd(b3),En=Qp(Id);gT(Id);const x3=new Ps;console.log("Firebase inicializado com sucesso");let Nh=null;async function Sd(){return await m1()?(Nh||(Nh=FD(Id),console.log("Firebase Messaging suportado e inicializado.")),Nh):(console.warn("Firebase Messaging NÃO suportado neste navegador."),null)}async function ku(t){const e=await Sd();if(!e)return console.warn("Não foi possível obter a instância de Messaging. Abortando solicitação de token."),null;try{if(await Notification.requestPermission()==="granted"){console.log("Permissão de notificação concedida.");const s=await UD(e,{vapidKey:"BIs0n17mt2gj5vBTzyM5znHMDOgI6lcOiGanKQW2SiPlFcgmSvLpBu-d0txnoNKLivhbsUD0iwHHSBQk_LNgQ0A"});return s?(console.log("FCM Registration Token:",s),await it.post("/fcm/save-token",{userId:t,fcmToken:s}),console.log("Token enviado para o backend com sucesso."),s):(console.warn("Nenhum token de registro de FCM disponível."),null)}else return console.warn("Permissão de notificação negada."),null}catch(n){return console.error("Erro ao obter token de notificação:",n),null}}async function ST(){const t=await Sd();t?BD(t,e=>{var n;if(console.log("Mensagem recebida em primeiro plano:",e),"Notification"in window&&Notification.permission==="granted"){const s=new Notification(e.notification.title,{body:e.notification.body,icon:e.notification.icon||"/favicon.ico",badge:"/favicon.ico",tag:((n=e.data)==null?void 0:n.orderId)||"general",requireInteraction:!0,actions:[{action:"view",title:"Ver Pedido"},{action:"close",title:"Fechar"}]});s.onclick=function(){var r;window.focus(),(r=e.data)!=null&&r.orderId&&console.log("Abrindo pedido:",e.data.orderId),s.close()}}else alert(`Notificação: ${e.notification.title} - ${e.notification.body}`)}):console.warn("Não foi possível configurar notificações em primeiro plano: Messaging não suportado.")}const it=Et.create({baseURL:"https://lemming-crucial-smoothly.ngrok-free.app/api",timeout:1e4,headers:{"ngrok-skip-browser-warning":"true"}});it.interceptors.request.use(async t=>{const e=t.url.includes("/admin/"),n=t.url.includes("/auth/");if(e&&En.currentUser)try{const s=await En.currentUser.getIdToken(!0);t.headers.Authorization=`Bearer ${s}`,console.log("httpClient: ID Token anexado à requisição admin.")}catch(s){console.error("httpClient: Erro ao obter ID Token para requisição admin:",s),delete t.headers.Authorization}else!e&&!n&&delete t.headers.Authorization;return t},t=>Promise.reject(t));it.interceptors.response.use(t=>t,async t=>{var n,s;const e=(n=t.response)==null?void 0:n.status;return e===401||e===403?(console.warn("Sessão expirada ou acesso negado. Redirecionando para login admin."),localStorage.removeItem("adminAuthToken"),localStorage.removeItem("adminUser"),En.currentUser&&await En.signOut(),ui.currentRoute.value.path!=="/admin/login"&&ui.push("/admin/login")):console.error("Erro na requisição:",((s=t.response)==null?void 0:s.data)||t.message),Promise.reject(t)});const Xv="cached_categories",Jv="categories_last_updated",w3=60*60*1e3;function E3(t,e,n=z([])){const s=z(!1),r=()=>s.value=!s.value,i=z([]),o=z([]),a=z({}),l=(p,g)=>{const y=new Set;g.forEach(D=>{var F;(F=D.categoryIds)==null||F.forEach(M=>y.add(M))});const v=p.filter(D=>y.has(D.id)),_=new Set(v.map(D=>D.id)),E=[],S={};p.filter(D=>!D.parent_id).forEach(D=>{let F=!1;_.has(D.id)&&(F=!0);const O=p.filter(T=>T.parent_id===D.id).filter(T=>_.has(T.id));O.length>0&&(F=!0),F&&(E.push(D),S[D.id]=O)}),o.value=E,a.value=S},c=async()=>{try{const{data:p}=await it.get("/categories");localStorage.setItem(Xv,JSON.stringify(p)),localStorage.setItem(Jv,Date.now().toString()),i.value=p,l(p,n.value)}catch(p){console.error("Erro ao carregar categorias:",p)}},u=(p,g=!1)=>{setTimeout(()=>s.value=!1,100),p&&g&&[...(a.value[p]||[]).map(v=>v.id)]},h=p=>!e||!e.value?!1:p.some(g=>e.value.includes(g));return pt(()=>{const p=localStorage.getItem(Xv),g=localStorage.getItem(Jv);if(p&&g&&Date.now()-parseInt(g,10)<w3)try{const v=JSON.parse(p);i.value=v,l(v,n.value)}catch(v){console.warn("Cache de categorias corrompido. Recarregando...",v),c()}else c()}),Pt(n,p=>{i.value.length>0&&p&&p.length>0?l(i.value,p):i.value.length>0&&(!p||p.length===0)&&(o.value=[],a.value={})},{deep:!0}),{open:s,toggleMenu:r,parentCategories:o,childCategories:a,selectCategory:u,isSelected:h}}const AT=Symbol("selectedCategoryIds"),CT=Symbol("filterProductsByCategory"),PT=Symbol("allProducts"),T3={class:"bg-red-400 fixed top-0 w-full z-50"},k3={class:"relative px-4 hidden md:block"},I3={class:"container mx-auto flex justify-between items-center"},S3={class:"space-x-6 text-white flex"},A3=["onClick"],C3={key:0,class:"fa-solid fa-chevron-down fa-2xs pt-3 ml-1 group-hover:rotate-180 group-hover:text-yellow-300 transition duration-200 ease-in-out"},P3={key:1,class:"absolute bg-white p-3 w-52 top-12 transform scale-0 group-hover:scale-100 transition duration-150 ease-in-out origin-top shadow-lg rounded-md"},R3=["onClick"],O3={class:"flex space-x-2"},D3={class:"py-2 px-4 bg-gray-50 dark:bg-gray-800 flex justify-between items-center md:hidden w-screen"},M3={key:1},N3={type:"button",name:"mobile-menu",class:"p-2 text-gray-600 dark:text-gray-300 text-sm relative"},L3={class:"flex flex-col w-48 items-start"},V3=["onClick"],$3={key:0,class:"ml-3"},F3=["onClick"],U3={key:3,class:"dark:text-white ml-4 truncate flex justify-center items-center title-font p-2"},B3={key:4,src:iw,alt:"Pizzaria da Nonna",class:"object-contain h-10 w-full"},j3={class:"flex-none"},z3={__name:"NewHader",props:{title:{type:String,required:!1,default:"Pizzaria da Nonna"},showBackButton:{type:Boolean,default:!1}},setup(t){const e=z(!1),n=()=>{e.value=!e.value,console.log("Menu mobile is:",e.value)},s=xo(),r=me(()=>s.items.length),i=Nt(AT,z(null)),o=Nt(CT,()=>{console.warn("filterByCategory function not provided to NewHeader.")}),a=Nt(PT,z([])),{parentCategories:l,childCategories:c,isSelected:u}=E3(null,i,a),h=(y,v=!1)=>{let _=null;if(y)if(v){const E=c.value[y]||[];_=[y,...E.map(S=>S.id)]}else _=[y];o(_)},p=(y,v=!1)=>{h(y,v),n()};function g(){window.history.back()}return(y,v)=>(R(),N("header",T3,[f("nav",k3,[f("div",I3,[v[4]||(v[4]=f("div",{class:"text-white text-2xl font-bold"},"Pizzaria da Nonna",-1)),f("ul",S3,[f("li",{onClick:v[0]||(v[0]=_=>h(null)),class:"py-4"},[f("span",{class:re(["cursor-pointer whitespace-nowrap",be(i)===null||be(i)&&be(i).length===0?"text-yellow-300":""])},v[2]||(v[2]=[f("i",{class:"fa fa-list"},null,-1),G(" Todas")]),2)]),(R(!0),N(pe,null,Ce(be(l),_=>{var E,S,D;return R(),N("li",{class:"group flex relative py-4",key:_.id},[f("span",{onClick:F=>h(_.id,!0),class:re(["cursor-pointer whitespace-nowrap ",be(u)([_.id,...((E=be(c)[_.id])==null?void 0:E.map(F=>F.id))||[]])?"text-yellow-300":"group-hover:text-yellow-300"])},[f("i",{class:re(_.icon)},null,2),G(" "+U(_.name),1)],10,A3),((S=be(c)[_.id])==null?void 0:S.length)>0?(R(),N("i",C3)):ne("",!0),((D=be(c)[_.id])==null?void 0:D.length)>0?(R(),N("ul",P3,[(R(!0),N(pe,null,Ce(be(c)[_.id],F=>{var M;return R(),N("li",{key:F.id,onClick:O=>h(F.id),class:re(["cursor-pointer p-1 whitespace-nowrap rounded-md text-gray-600 hover:text-red-400 hover:bg-gray-300",(M=be(i))!=null&&M.includes(F.id)?"text-red-400 font-bold bg-gray-200":"text-gray-600 hover:text-red-400 hover:bg-gray-300"])},[f("span",null,[f("i",{class:re(F.icon)},null,2),G(" "+U(F.name),1)])],10,R3)}),128))])):ne("",!0)])}),128)),v[3]||(v[3]=f("li",{class:"py-4"},[f("a",{href:"#contact",class:"hover:text-yellow-300"},"Contato")],-1))]),f("div",O3,[ue(G0,{"cart-count":r.value},null,8,["cart-count"])])])]),f("div",D3,[t.showBackButton?(R(),N("button",{key:0,type:"button",name:"goback",onClick:os(g,["prevent"]),class:"flex-none"},v[5]||(v[5]=[f("i",{class:"fa fa-arrow-left text-gray-400 dark:text-gray-200 text-md"},null,-1)]))):(R(),N("div",M3,[f("button",N3,[f("i",{onClick:n,class:re(["h-4 fas text-sm",[e.value?"fa-xmark":"fa-bars"]])},null,2),f("div",{class:re(["absolute group-hover:translate-x-2 transition-all duration-200 ease-in-out z-50 p-2 dark:bg-gray-700 rounded-md -top-2 -left-5 h-screen flex flex-col space-y-2",[e.value?"translate-x-0 bg-white":"-translate-x-full"]])},[f("div",{class:"flex-row-reverse flex h-4 w-full"},[f("i",{onClick:n,class:"fas text-xl fa-xmark"})]),f("ul",L3,[f("li",{onClick:v[1]||(v[1]=_=>p(null)),class:re(["flex space-x-2 items-center w-full p-2 text-sm hover:bg-gray-400/30 hover:rounded-md cursor-pointer whitespace-nowrap",[be(i)===null||be(i)&&be(i).length===0?"text-red-400 bg-gray-400/30 rounded-md":""]])},v[6]||(v[6]=[f("i",{class:"fa fa-list"},null,-1),G(),f("span",null,"Ver tudo",-1)]),2),(R(!0),N(pe,null,Ce(be(l),_=>{var E,S;return R(),N("li",{key:_.id,class:re(["flex flex-col w-full mt-1 whitespace-nowrap group",["cursor-pointer whitespace-nowrap ",be(u)([_.id,...((E=be(c)[_.id])==null?void 0:E.map(D=>D.id))||[]])?"text-red-400 group-hover:bg-pink-400":"group-hover:text-red-400"]])},[f("span",{class:"flex space-x-1 items-center w-full p-2 text-sm hover:bg-gray-400/30 hover:rounded-md cursor-pointer whitespace-nowrap",onClick:D=>p(_.id,!0)},[f("i",{class:re(["text-xs text-gray-400",_.icon])},null,2),f("span",null,U(_.name),1)],8,V3),((S=be(c)[_.id])==null?void 0:S.length)>0?(R(),N("ul",$3,[(R(!0),N(pe,null,Ce(be(c)[_.id],D=>{var F;return R(),N("li",{class:re(["cursor-pointer p-2 whitespace-nowrap rounded-md flex justify-start mb-1 w-full",(F=be(i))!=null&&F.includes(D.id)?"text-red-400  bg-gray-400/30":"text-gray-600 dark:text-gray-100 hover:text-red-400 hover:bg-gray-400/30 "]),key:D.id,onClick:M=>p(D.id)},[f("span",null,[f("i",{class:re(["text-xs text-gray-400",D.icon])},null,2),G(" "+U(D.name),1)])],10,F3)}),128))])):ne("",!0)],2)}),128))])],2)])])),e.value?(R(),N("div",{key:2,onClick:n,class:"bg-black/50 backdrop-blur-sm w-screen h-screen z-20 top-0 left-0 absolute"})):ne("",!0),t.showBackButton?(R(),N("span",U3,U(t.title),1)):(R(),N("img",B3)),f("div",j3,[ue(G0,{"cart-count":r.value},null,8,["cart-count"])])])]))}},H3=Wt(z3,[["__scopeId","data-v-d090641f"]]),q3={class:"py-4 h-auto pb-16 md:pb-0 pt-20 m-auto"},Pi={__name:"AppLayout",props:{isHeaderVisible:{type:Boolean,default:!0},title:{type:String,default:"Pizzaria da Nonna"},topNavVisible:{type:Boolean,default:!1},topNavTitle:{type:String,default:"Pizzaria da Nonna"},showBackButton:{type:Boolean,default:!0},mobileMenuVisible:{type:Boolean,default:!0}},setup(t){const e=t;return(n,s)=>(R(),N("div",null,[ue(H3,{title:t.topNavTitle,showBackButton:t.showBackButton},null,8,["title","showBackButton"]),f("main",q3,[vp(n.$slots,"default")]),e.mobileMenuVisible?(R(),qe(Y2,{key:0})):ne("",!0)]))}},RT=Wu("favorite",()=>{const t=z(JSON.parse(localStorage.getItem("favorites")||"[]"));function e(i){const o=t.value.findIndex(a=>a.id===i.id);o!==-1?t.value.splice(o,1):t.value.push(i)}function n(i){return t.value.some(o=>o.id===i)}function s(){t.value=[]}Pt(t,i=>{localStorage.setItem("favorites",JSON.stringify(i))},{deep:!0});const r=me(()=>t.value.length);return{favorites:t,toggleFavorite:e,isFavorite:n,clearFavorites:s,count:r}}),W3={__name:"IconFavorite",props:{product:{type:Object}},setup(t){const e=RT(),n=t,s=()=>{n.product?e.toggleFavorite(n.product):console.warn("Tentativa de adicionar/remover favorito sem um produto.")},r=()=>n.product&&e.isFavorite(n.product.id);return(i,o)=>(R(),N("button",{onClick:s,class:"rounded-full h-6 w-6 border border-gray-400/50"},[f("i",{class:re([r()?"fas fa-heart text-red-500 animate__animated animate__heartBeat":"fas fa-heart text-gray-400","hover:text-red-500 hover:animate-pulse"])},null,2)]))}},K3={class:"flex items-baseline gap-[2px] text-amber-300 text-[11px]"},G3=["onMouseover","onClick"],Y3={key:2,class:"dark:text-gray-200 text-gray-500"},Q3={key:3,class:"ml-2 text-sm text-gray-500"},X3={key:4,class:"ml-2 text-sm text-red-500"},Lh="voted_products",J3={__name:"Rating",props:{productId:{type:String,required:!0},rating:{type:Number,required:!0,default:0},showTextRating:{type:Boolean,required:!1,default:!1},ratingText:{type:Number,required:!1,default:0}},setup(t){const e=t,n=z(e.rating),s=z(0),r=z(!1),i=z(!1),o=z(null);me(()=>Math.floor(n.value)),me(()=>n.value%1>=.5);const a=()=>{const u=JSON.parse(localStorage.getItem(Lh)||"[]");r.value=u.includes(e.productId)},l=()=>{let u=JSON.parse(localStorage.getItem(Lh)||"[]");u.includes(e.productId)||(u.push(e.productId),localStorage.setItem(Lh,JSON.stringify(u))),r.value=!0},c=async u=>{var h,p;if(!(r.value||i.value)){i.value=!0,o.value=null;try{const g=await it.put(`/products/${e.productId}/rate`,{stars:u});n.value=g.data.rating,l(),console.log("Voto registrado com sucesso:",g.data)}catch(g){console.error("Erro ao votar:",g),o.value=((p=(h=g.response)==null?void 0:h.data)==null?void 0:p.error)||"Erro ao registrar voto."}finally{i.value=!1}}};return pt(()=>{a(),e.ratingText===0&&e.rating>0?n.value=e.rating:e.ratingText>0&&(n.value=e.ratingText)}),(u,h)=>(R(),N("div",K3,[!r.value&&!i.value?(R(),N(pe,{key:0},Ce(5,p=>f("i",{key:p,class:re(["fas fa-star cursor-pointer transition-colors duration-200",p<=s.value?"text-amber-500":"text-amber-300"]),onMouseover:g=>s.value=p,onMouseleave:h[0]||(h[0]=g=>s.value=0),onClick:g=>c(p)},null,42,G3)),64)):(R(),N(pe,{key:1},Ce(5,p=>f("i",{key:p,class:re({"fas fa-star":p<=n.value,"fas fa-star-half-alt":p===Math.floor(n.value)+1&&n.value%1>=.5,"far fa-star text-gray-400 dark:text-gray-500":p>n.value})},null,2)),64)),t.showTextRating?(R(),N("span",Y3," ("+U(Number(n.value).toFixed(1))+")",1)):ne("",!0),i.value?(R(),N("span",Q3,"Votando...")):ne("",!0),o.value?(R(),N("span",X3,U(o.value),1)):ne("",!0)]))}},OT=Wt(J3,[["__scopeId","data-v-941aface"]]),Z3={class:"rounded-[8px] p-2 shadow flex flex-col justify-between bg-white dark:bg-gray-800 gap-4 border border-gray-200 dark:border-gray-700"},e5={class:"font-semibold dark:text-gray-200 truncate"},t5={class:"flex justify-between items-center"},n5={class:"flex flex-row justify-between items-baseline"},s5={class:"text-sm font-medium text-gray-800 dark:text-white"},DT={__name:"ProductCard",props:{product:{type:Object,required:!0,default:()=>({name:"Sem nome",price:[0],image:null})}},setup(t){return(e,n)=>{const s=gl("router-link");return R(),N("div",Z3,[ue(s,{to:"/produto/"+t.product.slug},{default:_e(()=>[f("div",{class:re(["h-32 rounded-md bg-cover bg-center shadow-md hover:shadow-lg object-contain",{"bg-emerald-500 dark:bg-amber-400":!t.product.img}]),style:vo({backgroundImage:t.product.img?`url(${t.product.img})`:"none"})},null,6)]),_:1},8,["to"]),f("span",e5,U(t.product.name||"Produto sem nome"),1),f("div",t5,[ue(OT,{"product-id":t.product.id,rating:t.product.rating,"show-text-rating":!0,"rating-text":t.product.rating},null,8,["product-id","rating","rating-text"]),ue(W3,{product:t.product},null,8,["product"])]),n[1]||(n[1]=f("div",{class:"hidden"},null,-1)),f("div",n5,[f("span",s5,U(e.$formatPrice(t.product.price[0])),1),ue(s,{to:"/produto/"+t.product.slug,class:"bg-gray-900 px-3 py-1 rounded-md shadow-md dark:shadow-gray-800 shadow-gray-400 cursor-pointer hover:bg-gray-950"},{default:_e(()=>n[0]||(n[0]=[f("i",{class:"fa fa-cart-plus text-white"},null,-1)])),_:1,__:[0]},8,["to"])])])}}},r5={},i5={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"};function o5(t,e){return R(),N("div",i5,[(R(),N(pe,null,Ce(6,n=>f("div",{key:n,class:"animate-pulse bg-white dark:bg-gray-800 p-4 rounded-xl shadow-md"},e[0]||(e[0]=[f("div",{class:"w-full h-40 bg-gray-300 dark:bg-gray-700 rounded mb-4"},null,-1),f("div",{class:"h-5 bg-gray-300 dark:bg-gray-700 rounded w-3/4 mb-2"},null,-1),f("div",{class:"h-4 bg-gray-300 dark:bg-gray-700 rounded w-1/2"},null,-1)]))),64))])}const a5=Wt(r5,[["render",o5]]),Zv="cached_products",e_="products_last_updated",l5=60*60*1e3;function c5(){const t=z([]),e=z(!0),n=z(null),s=z(""),r=z("name_asc"),i=me(()=>{let l=[...t.value];if(n.value&&(l=l.filter(c=>{var u;return(u=c.categoryIds)==null?void 0:u.some(h=>n.value.includes(h))})),s.value.trim()!==""){const c=s.value.toLowerCase();l=l.filter(u=>{var h;return(h=u.name)==null?void 0:h.toLowerCase().includes(c)})}switch(r.value){case"name_asc":l.sort((c,u)=>c.name.localeCompare(u.name));break;case"name_desc":l.sort((c,u)=>u.name.localeCompare(c.name));break;case"price_asc":l.sort((c,u)=>(c.price??0)-(u.price??0));break;case"price_desc":l.sort((c,u)=>(u.price??0)-(c.price??0));break}return l}),o=l=>{n.value=l},a=async()=>{try{const{data:l}=await it.get("/products");localStorage.setItem(Zv,JSON.stringify(l)),localStorage.setItem(e_,Date.now().toString()),t.value=l}catch(l){console.error("Erro ao buscar produtos:",l)}finally{e.value=!1}};return pt(async()=>{const l=localStorage.getItem(Zv),c=localStorage.getItem(e_);if(l&&c&&Date.now()-parseInt(c,10)<l5)try{t.value=JSON.parse(l),e.value=!1}catch{await a()}else await a()}),{products:t,filteredProducts:i,loading:e,selectedCategoryIds:n,searchTerm:s,sortOption:r,filterByCategory:o}}var t_;let u5=Symbol("headlessui.useid"),d5=0;const Rg=(t_=QI)!=null?t_:function(){return Nt(u5,()=>`${++d5}`)()};function xt(t){var e;if(t==null||t.value==null)return null;let n=(e=t.value.$el)!=null?e:t.value;return n instanceof Node?n:null}function Ad(t,e,...n){if(t in e){let r=e[t];return typeof r=="function"?r(...n):r}let s=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(r=>`"${r}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,Ad),s}var h5=Object.defineProperty,f5=(t,e,n)=>e in t?h5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,n_=(t,e,n)=>(f5(t,typeof e!="symbol"?e+"":e,n),n);let p5=class{constructor(){n_(this,"current",this.detect()),n_(this,"currentId",0)}set(e){this.current!==e&&(this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}},Og=new p5;function Dg(t){if(Og.isServer)return null;if(t instanceof Node)return t.ownerDocument;if(t!=null&&t.hasOwnProperty("value")){let e=xt(t);if(e)return e.ownerDocument}return document}let Hf=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var qf=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t))(qf||{}),g5=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(g5||{}),m5=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(m5||{});function MT(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(Hf)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var Mg=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(Mg||{});function Ng(t,e=0){var n;return t===((n=Dg(t))==null?void 0:n.body)?!1:Ad(e,{0(){return t.matches(Hf)},1(){let s=t;for(;s!==null;){if(s.matches(Hf))return!0;s=s.parentElement}return!1}})}function NT(t){let e=Dg(t);An(()=>{e&&!Ng(e.activeElement,0)&&v5(t)})}var y5=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(y5||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function v5(t){t==null||t.focus({preventScroll:!0})}let _5=["textarea","input"].join(",");function b5(t){var e,n;return(n=(e=t==null?void 0:t.matches)==null?void 0:e.call(t,_5))!=null?n:!1}function LT(t,e=n=>n){return t.slice().sort((n,s)=>{let r=e(n),i=e(s);if(r===null||i===null)return 0;let o=r.compareDocumentPosition(i);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function x5(t,e){return w5(MT(),e,{relativeTo:t})}function w5(t,e,{sorted:n=!0,relativeTo:s=null,skipElements:r=[]}={}){var i;let o=(i=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t==null?void 0:t.ownerDocument)!=null?i:document,a=Array.isArray(t)?n?LT(t):t:MT(t);r.length>0&&a.length>1&&(a=a.filter(y=>!r.includes(y))),s=s??o.activeElement;let l=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,a.indexOf(s))-1;if(e&4)return Math.max(0,a.indexOf(s))+1;if(e&8)return a.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=e&32?{preventScroll:!0}:{},h=0,p=a.length,g;do{if(h>=p||h+p<=0)return 0;let y=c+h;if(e&16)y=(y+p)%p;else{if(y<0)return 3;if(y>=p)return 1}g=a[y],g==null||g.focus(u),h+=l}while(g!==o.activeElement);return e&6&&b5(g)&&g.select(),2}function E5(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function T5(){return/Android/gi.test(window.navigator.userAgent)}function k5(){return E5()||T5()}function sc(t,e,n){Og.isServer||ml(s=>{document.addEventListener(t,e,n),s(()=>document.removeEventListener(t,e,n))})}function I5(t,e,n){Og.isServer||ml(s=>{window.addEventListener(t,e,n),s(()=>window.removeEventListener(t,e,n))})}function S5(t,e,n=me(()=>!0)){function s(i,o){if(!n.value||i.defaultPrevented)return;let a=o(i);if(a===null||!a.getRootNode().contains(a))return;let l=function c(u){return typeof u=="function"?c(u()):Array.isArray(u)||u instanceof Set?u:[u]}(t);for(let c of l){if(c===null)continue;let u=c instanceof HTMLElement?c:xt(c);if(u!=null&&u.contains(a)||i.composed&&i.composedPath().includes(u))return}return!Ng(a,Mg.Loose)&&a.tabIndex!==-1&&i.preventDefault(),e(i,a)}let r=z(null);sc("pointerdown",i=>{var o,a;n.value&&(r.value=((a=(o=i.composedPath)==null?void 0:o.call(i))==null?void 0:a[0])||i.target)},!0),sc("mousedown",i=>{var o,a;n.value&&(r.value=((a=(o=i.composedPath)==null?void 0:o.call(i))==null?void 0:a[0])||i.target)},!0),sc("click",i=>{k5()||r.value&&(s(i,()=>r.value),r.value=null)},!0),sc("touchend",i=>s(i,()=>i.target instanceof HTMLElement?i.target:null),!0),I5("blur",i=>s(i,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function s_(t,e){if(t)return t;let n=e??"button";if(typeof n=="string"&&n.toLowerCase()==="button")return"button"}function A5(t,e){let n=z(s_(t.value.type,t.value.as));return pt(()=>{n.value=s_(t.value.type,t.value.as)}),ml(()=>{var s;n.value||xt(e)&&xt(e)instanceof HTMLButtonElement&&!((s=xt(e))!=null&&s.hasAttribute("type"))&&(n.value="button")}),n}function r_(t){return[t.screenX,t.screenY]}function C5(){let t=z([-1,-1]);return{wasMoved(e){let n=r_(e);return t.value[0]===n[0]&&t.value[1]===n[1]?!1:(t.value=n,!0)},update(e){t.value=r_(e)}}}function P5({container:t,accept:e,walk:n,enabled:s}){ml(()=>{let r=t.value;if(!r||s!==void 0&&!s.value)return;let i=Dg(t);if(!i)return;let o=Object.assign(l=>e(l),{acceptNode:e}),a=i.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,o,!1);for(;a.nextNode();)n(a.currentNode)})}var Wf=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(Wf||{}),R5=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(R5||{});function Cd({visible:t=!0,features:e=0,ourProps:n,theirProps:s,...r}){var i;let o=$T(s,n),a=Object.assign(r,{props:o});if(t||e&2&&o.static)return Vh(a);if(e&1){let l=(i=o.unmount)==null||i?0:1;return Ad(l,{0(){return null},1(){return Vh({...r,props:{...o,hidden:!0,style:{display:"none"}}})}})}return Vh(a)}function Vh({props:t,attrs:e,slots:n,slot:s,name:r}){var i,o;let{as:a,...l}=O5(t,["unmount","static"]),c=(i=n.default)==null?void 0:i.call(n,s),u={};if(s){let h=!1,p=[];for(let[g,y]of Object.entries(s))typeof y=="boolean"&&(h=!0),y===!0&&p.push(g);h&&(u["data-headlessui-state"]=p.join(" "))}if(a==="template"){if(c=VT(c??[]),Object.keys(l).length>0||Object.keys(e).length>0){let[h,...p]=c??[];if(!D5(h)||p.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${r} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(l).concat(Object.keys(e)).map(v=>v.trim()).filter((v,_,E)=>E.indexOf(v)===_).sort((v,_)=>v.localeCompare(_)).map(v=>`  - ${v}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(v=>`  - ${v}`).join(`
`)].join(`
`));let g=$T((o=h.props)!=null?o:{},l,u),y=Bs(h,g,!0);for(let v in g)v.startsWith("on")&&(y.props||(y.props={}),y.props[v]=g[v]);return y}return Array.isArray(c)&&c.length===1?c[0]:c}return hi(a,Object.assign({},l,u),{default:()=>c})}function VT(t){return t.flatMap(e=>e.type===pe?VT(e.children):[e])}function $T(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let s of t)for(let r in s)r.startsWith("on")&&typeof s[r]=="function"?(n[r]!=null||(n[r]=[]),n[r].push(s[r])):e[r]=s[r];if(e.disabled||e["aria-disabled"])return Object.assign(e,Object.fromEntries(Object.keys(n).map(s=>[s,void 0])));for(let s in n)Object.assign(e,{[s](r,...i){let o=n[s];for(let a of o){if(r instanceof Event&&r.defaultPrevented)return;a(r,...i)}}});return e}function O5(t,e=[]){let n=Object.assign({},t);for(let s of e)s in n&&delete n[s];return n}function D5(t){return t==null?!1:typeof t.type=="string"||typeof t.type=="object"||typeof t.type=="function"}let FT=Symbol("Context");var sl=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(sl||{});function M5(){return Nt(FT,null)}function N5(t){Ms(FT,t)}var Bt=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(Bt||{});function L5(t){throw new Error("Unexpected object: "+t)}var Sn=(t=>(t[t.First=0]="First",t[t.Previous=1]="Previous",t[t.Next=2]="Next",t[t.Last=3]="Last",t[t.Specific=4]="Specific",t[t.Nothing=5]="Nothing",t))(Sn||{});function V5(t,e){let n=e.resolveItems();if(n.length<=0)return null;let s=e.resolveActiveIndex(),r=s??-1;switch(t.focus){case 0:{for(let i=0;i<n.length;++i)if(!e.resolveDisabled(n[i],i,n))return i;return s}case 1:{r===-1&&(r=n.length);for(let i=r-1;i>=0;--i)if(!e.resolveDisabled(n[i],i,n))return i;return s}case 2:{for(let i=r+1;i<n.length;++i)if(!e.resolveDisabled(n[i],i,n))return i;return s}case 3:{for(let i=n.length-1;i>=0;--i)if(!e.resolveDisabled(n[i],i,n))return i;return s}case 4:{for(let i=0;i<n.length;++i)if(e.resolveId(n[i],i,n)===t.id)return i;return s}case 5:return null;default:L5(t)}}let i_=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function o_(t){var e,n;let s=(e=t.innerText)!=null?e:"",r=t.cloneNode(!0);if(!(r instanceof HTMLElement))return s;let i=!1;for(let a of r.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))a.remove(),i=!0;let o=i?(n=r.innerText)!=null?n:"":s;return i_.test(o)&&(o=o.replace(i_,"")),o}function $5(t){let e=t.getAttribute("aria-label");if(typeof e=="string")return e.trim();let n=t.getAttribute("aria-labelledby");if(n){let s=n.split(" ").map(r=>{let i=document.getElementById(r);if(i){let o=i.getAttribute("aria-label");return typeof o=="string"?o.trim():o_(i).trim()}return null}).filter(Boolean);if(s.length>0)return s.join(", ")}return o_(t).trim()}function F5(t){let e=z(""),n=z("");return()=>{let s=xt(t);if(!s)return"";let r=s.innerText;if(e.value===r)return n.value;let i=$5(s).trim().toLowerCase();return e.value=r,n.value=i,i}}var U5=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(U5||{}),B5=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(B5||{});function j5(t){requestAnimationFrame(()=>requestAnimationFrame(t))}let UT=Symbol("MenuContext");function Pd(t){let e=Nt(UT,null);if(e===null){let n=new Error(`<${t} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Pd),n}return e}let z5=Rr({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(t,{slots:e,attrs:n}){let s=z(1),r=z(null),i=z(null),o=z([]),a=z(""),l=z(null),c=z(1);function u(p=g=>g){let g=l.value!==null?o.value[l.value]:null,y=LT(p(o.value.slice()),_=>xt(_.dataRef.domRef)),v=g?y.indexOf(g):null;return v===-1&&(v=null),{items:y,activeItemIndex:v}}let h={menuState:s,buttonRef:r,itemsRef:i,items:o,searchQuery:a,activeItemIndex:l,activationTrigger:c,closeMenu:()=>{s.value=1,l.value=null},openMenu:()=>s.value=0,goToItem(p,g,y){let v=u(),_=V5(p===Sn.Specific?{focus:Sn.Specific,id:g}:{focus:p},{resolveItems:()=>v.items,resolveActiveIndex:()=>v.activeItemIndex,resolveId:E=>E.id,resolveDisabled:E=>E.dataRef.disabled});a.value="",l.value=_,c.value=y??1,o.value=v.items},search(p){let g=a.value!==""?0:1;a.value+=p.toLowerCase();let y=(l.value!==null?o.value.slice(l.value+g).concat(o.value.slice(0,l.value+g)):o.value).find(_=>_.dataRef.textValue.startsWith(a.value)&&!_.dataRef.disabled),v=y?o.value.indexOf(y):-1;v===-1||v===l.value||(l.value=v,c.value=1)},clearSearch(){a.value=""},registerItem(p,g){let y=u(v=>[...v,{id:p,dataRef:g}]);o.value=y.items,l.value=y.activeItemIndex,c.value=1},unregisterItem(p){let g=u(y=>{let v=y.findIndex(_=>_.id===p);return v!==-1&&y.splice(v,1),y});o.value=g.items,l.value=g.activeItemIndex,c.value=1}};return S5([r,i],(p,g)=>{var y;h.closeMenu(),Ng(g,Mg.Loose)||(p.preventDefault(),(y=xt(r))==null||y.focus())},me(()=>s.value===0)),Ms(UT,h),N5(me(()=>Ad(s.value,{0:sl.Open,1:sl.Closed}))),()=>{let p={open:s.value===0,close:h.closeMenu};return Cd({ourProps:{},theirProps:t,slot:p,slots:e,attrs:n,name:"Menu"})}}}),H5=Rr({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(t,{attrs:e,slots:n,expose:s}){var r;let i=(r=t.id)!=null?r:`headlessui-menu-button-${Rg()}`,o=Pd("MenuButton");s({el:o.buttonRef,$el:o.buttonRef});function a(h){switch(h.key){case Bt.Space:case Bt.Enter:case Bt.ArrowDown:h.preventDefault(),h.stopPropagation(),o.openMenu(),An(()=>{var p;(p=xt(o.itemsRef))==null||p.focus({preventScroll:!0}),o.goToItem(Sn.First)});break;case Bt.ArrowUp:h.preventDefault(),h.stopPropagation(),o.openMenu(),An(()=>{var p;(p=xt(o.itemsRef))==null||p.focus({preventScroll:!0}),o.goToItem(Sn.Last)});break}}function l(h){switch(h.key){case Bt.Space:h.preventDefault();break}}function c(h){t.disabled||(o.menuState.value===0?(o.closeMenu(),An(()=>{var p;return(p=xt(o.buttonRef))==null?void 0:p.focus({preventScroll:!0})})):(h.preventDefault(),o.openMenu(),j5(()=>{var p;return(p=xt(o.itemsRef))==null?void 0:p.focus({preventScroll:!0})})))}let u=A5(me(()=>({as:t.as,type:e.type})),o.buttonRef);return()=>{var h;let p={open:o.menuState.value===0},{...g}=t,y={ref:o.buttonRef,id:i,type:u.value,"aria-haspopup":"menu","aria-controls":(h=xt(o.itemsRef))==null?void 0:h.id,"aria-expanded":o.menuState.value===0,onKeydown:a,onKeyup:l,onClick:c};return Cd({ourProps:y,theirProps:g,slot:p,attrs:e,slots:n,name:"MenuButton"})}}}),q5=Rr({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(t,{attrs:e,slots:n,expose:s}){var r;let i=(r=t.id)!=null?r:`headlessui-menu-items-${Rg()}`,o=Pd("MenuItems"),a=z(null);s({el:o.itemsRef,$el:o.itemsRef}),P5({container:me(()=>xt(o.itemsRef)),enabled:me(()=>o.menuState.value===0),accept(p){return p.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:p.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(p){p.setAttribute("role","none")}});function l(p){var g;switch(a.value&&clearTimeout(a.value),p.key){case Bt.Space:if(o.searchQuery.value!=="")return p.preventDefault(),p.stopPropagation(),o.search(p.key);case Bt.Enter:if(p.preventDefault(),p.stopPropagation(),o.activeItemIndex.value!==null){let y=o.items.value[o.activeItemIndex.value];(g=xt(y.dataRef.domRef))==null||g.click()}o.closeMenu(),NT(xt(o.buttonRef));break;case Bt.ArrowDown:return p.preventDefault(),p.stopPropagation(),o.goToItem(Sn.Next);case Bt.ArrowUp:return p.preventDefault(),p.stopPropagation(),o.goToItem(Sn.Previous);case Bt.Home:case Bt.PageUp:return p.preventDefault(),p.stopPropagation(),o.goToItem(Sn.First);case Bt.End:case Bt.PageDown:return p.preventDefault(),p.stopPropagation(),o.goToItem(Sn.Last);case Bt.Escape:p.preventDefault(),p.stopPropagation(),o.closeMenu(),An(()=>{var y;return(y=xt(o.buttonRef))==null?void 0:y.focus({preventScroll:!0})});break;case Bt.Tab:p.preventDefault(),p.stopPropagation(),o.closeMenu(),An(()=>x5(xt(o.buttonRef),p.shiftKey?qf.Previous:qf.Next));break;default:p.key.length===1&&(o.search(p.key),a.value=setTimeout(()=>o.clearSearch(),350));break}}function c(p){switch(p.key){case Bt.Space:p.preventDefault();break}}let u=M5(),h=me(()=>u!==null?(u.value&sl.Open)===sl.Open:o.menuState.value===0);return()=>{var p,g;let y={open:o.menuState.value===0},{...v}=t,_={"aria-activedescendant":o.activeItemIndex.value===null||(p=o.items.value[o.activeItemIndex.value])==null?void 0:p.id,"aria-labelledby":(g=xt(o.buttonRef))==null?void 0:g.id,id:i,onKeydown:l,onKeyup:c,role:"menu",tabIndex:0,ref:o.itemsRef};return Cd({ourProps:_,theirProps:v,slot:y,attrs:e,slots:n,features:Wf.RenderStrategy|Wf.Static,visible:h.value,name:"MenuItems"})}}}),rc=Rr({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(t,{slots:e,attrs:n,expose:s}){var r;let i=(r=t.id)!=null?r:`headlessui-menu-item-${Rg()}`,o=Pd("MenuItem"),a=z(null);s({el:a,$el:a});let l=me(()=>o.activeItemIndex.value!==null?o.items.value[o.activeItemIndex.value].id===i:!1),c=F5(a),u=me(()=>({disabled:t.disabled,get textValue(){return c()},domRef:a}));pt(()=>o.registerItem(i,u)),Ti(()=>o.unregisterItem(i)),ml(()=>{o.menuState.value===0&&l.value&&o.activationTrigger.value!==0&&An(()=>{var E,S;return(S=(E=xt(a))==null?void 0:E.scrollIntoView)==null?void 0:S.call(E,{block:"nearest"})})});function h(E){if(t.disabled)return E.preventDefault();o.closeMenu(),NT(xt(o.buttonRef))}function p(){if(t.disabled)return o.goToItem(Sn.Nothing);o.goToItem(Sn.Specific,i)}let g=C5();function y(E){g.update(E)}function v(E){g.wasMoved(E)&&(t.disabled||l.value||o.goToItem(Sn.Specific,i,0))}function _(E){g.wasMoved(E)&&(t.disabled||l.value&&o.goToItem(Sn.Nothing))}return()=>{let{disabled:E,...S}=t,D={active:l.value,disabled:E,close:o.closeMenu};return Cd({ourProps:{id:i,ref:a,role:"menuitem",tabIndex:E===!0?void 0:-1,"aria-disabled":E===!0?!0:void 0,onClick:h,onFocus:p,onPointerenter:y,onMouseenter:y,onPointermove:v,onMousemove:v,onPointerleave:_,onMouseleave:_},theirProps:{...n,...S},slot:D,attrs:n,slots:e,name:"MenuItem"})}}});const W5={class:"mx-auto max-w-7xl px-0 lg:px-8 relative"},K5={class:"flex items-center justify-end space-x-4 bg-white dark:bg-gray-900 pb-2 mt-2 pt-2 sticky top-14 px-2"},G5={class:"w-10 text-right"},Y5={class:"px-1 py-1"},Q5={for:"az"},X5=["active"],J5={for:"za"},Z5=["active"],e$={class:"px-1 py-1"},t$={for:"minor_price"},n$=["active"],s$={for:"hight_price"},r$=["active"],i$={key:1,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2 mt-5"},o$={key:0,class:"col-span-6 flex items-center justify-center"},a$={__name:"ProdutListPage",setup(t){const{products:e,filteredProducts:n,loading:s,selectedCategoryIds:r,filterByCategory:i,sortOption:o,searchTerm:a}=c5();return Ms(AT,r),Ms(CT,i),Ms(PT,e),(l,c)=>(R(),qe(Pi,{"show-back-button":!1},{default:_e(()=>[f("div",W5,[f("div",K5,[c[10]||(c[10]=f("div",{class:"absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none"},[f("i",{class:"fa fa-search h-4 w-4 text-gray-400","aria-hidden":"true"})],-1)),Ie(f("input",{type:"text","onUpdate:modelValue":c[0]||(c[0]=u=>lt(a)?a.value=u:null),placeholder:"Buscar produtos...",name:"search",id:"search",class:"block w-full p-2 ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},null,512),[[Je,be(a)]]),f("div",G5,[ue(be(z5),{as:"div",class:"relative inline-block text-left group"},{default:_e(()=>[f("div",null,[ue(be(H5),{class:"inline-flex space-x-1 w-full items-center bg-white dark:bg-gray-800 justify-center rounded-md shadow-md p-2 text-sm font-medium dark:text-white group-hover:bg-black/10 focus:outline-none focus-visible:ring-2 focus-visible:ring-white/75"},{default:_e(()=>c[5]||(c[5]=[f("i",{class:"fa-solid fa-arrow-up-wide-short"},null,-1)])),_:1,__:[5]})]),ue(bo,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:_e(()=>[ue(be(q5),{class:"absolute right-0 mt-2 w-56 origin-top-right divide-y divide-gray-100 dark:divide-gray-900 rounded-md bg-white dark:bg-gray-800 shadow-lg ring-1 ring-black/5 focus:outline-none"},{default:_e(()=>[f("div",Y5,[ue(be(rc),null,{default:_e(({active:u,selected:h})=>[f("label",Q5,[f("span",{class:re([u?"bg-violet-500 text-white":"text-gray-900 dark:text-white","group flex w-full items-center rounded-md px-2 py-2 text-sm"])},[Ie(f("input",{type:"radio",name:"nama_az",id:"az",value:"name_asc",class:"hidden","onUpdate:modelValue":c[1]||(c[1]=p=>lt(o)?o.value=p:null)},null,512),[[Cs,be(o)]]),f("i",{active:u,class:"mr-2 h-5 w-5 text-violet-400 fa fa-arrow-down-a-z","aria-hidden":"true"},null,8,X5),c[6]||(c[6]=G(" Nome (A-Z) "))],2)])]),_:1}),ue(be(rc),null,{default:_e(({active:u})=>[f("label",J5,[f("span",{class:re([u?"bg-violet-500 text-white":"text-gray-900 dark:text-white","group flex w-full items-center rounded-md px-2 py-2 text-sm"])},[Ie(f("input",{type:"radio",name:"nama_za",id:"za",value:"name_desc",class:"hidden","onUpdate:modelValue":c[2]||(c[2]=h=>lt(o)?o.value=h:null)},null,512),[[Cs,be(o)]]),f("i",{active:u,class:"mr-2 h-5 w-5 text-violet-400 fa fa-arrow-up-z-a","aria-hidden":"true"},null,8,Z5),c[7]||(c[7]=G(" Nome (Z-A) "))],2)])]),_:1})]),f("div",e$,[ue(be(rc),null,{default:_e(({active:u})=>[f("label",t$,[Ie(f("input",{type:"radio",name:"minor_price",id:"minor_price",value:"price_asc",class:"hidden","onUpdate:modelValue":c[3]||(c[3]=h=>lt(o)?o.value=h:null)},null,512),[[Cs,be(o)]]),f("span",{class:re([u?"bg-violet-500 text-white":"text-gray-900 dark:text-white","group flex w-full items-center rounded-md px-2 py-2 text-sm"])},[f("i",{active:u,class:"mr-2 h-5 w-5 text-violet-400 fa fa-arrow-down-1-9","aria-hidden":"true"},null,8,n$),c[8]||(c[8]=G(" Menor preço "))],2)])]),_:1}),ue(be(rc),null,{default:_e(({active:u})=>[f("label",s$,[Ie(f("input",{type:"radio",name:"hight_price",id:"hight_price",value:"price_desc",class:"hidden","onUpdate:modelValue":c[4]||(c[4]=h=>lt(o)?o.value=h:null)},null,512),[[Cs,be(o)]]),f("span",{class:re([u?"bg-violet-500 text-white":"text-gray-900 dark:text-white","group flex w-full items-center rounded-md px-2 py-2 text-sm"])},[f("i",{active:u,class:"mr-2 h-5 w-5 text-violet-400 fa fa-arrow-up-9-1","aria-hidden":"true"},null,8,r$),c[9]||(c[9]=G(" Maior preço "))],2)])]),_:1})])]),_:1})]),_:1})]),_:1})])]),be(s)?(R(),qe(a5,{key:0})):(R(),N("div",i$,[(R(!0),N(pe,null,Ce(be(n),u=>(R(),qe(DT,{key:u.id,product:u},null,8,["product"]))),128)),be(n).length==0?(R(),N("div",o$," Não há produtos para esta categoria ")):ne("",!0)]))])]),_:1}))}},l$={class:"container mx-auto p-4"},c$={key:0,class:"text-gray-500 dark:text-gray-400"},u$={key:1,class:"grid grid-cols-1 gap-4"},d$={class:"flex-grow"},h$={key:0,class:"text-gray-500 dark:text-gray-400 text-sm"},f$={key:1,class:"text-gray-500 dark:text-gray-400 text-sm"},p$={class:"text-gray-500 dark:text-gray-400 text-xs"},g$={class:"flex items-center mt-2"},m$={class:"flex items-center border rounded-full shadow-lg dark:border-gray-700 border-gray-300"},y$=["onClick"],v$={class:"w-8 text-center text-gray-700 dark:text-gray-300"},_$=["onClick"],b$=["onClick"],x$={key:2,class:"mt-8 border-t pt-4 dark:border-gray-700 border-gray-300"},w$={class:"flex justify-between items-center dark:text-gray-200"},E$={class:"text-xl font-semibold"},T$={__name:"Cart",setup(t){const e=xo(),n=kp(),s=me(()=>e.items),r=me(()=>e.items.length),i=me(()=>e.total),o=g=>{e.removeItem(g)},a=(g,y)=>{if(y>=1){const v=e.items.findIndex(_=>_.id===g.id&&_.size===g.size&&p(_.extras,g.extras));if(v!==-1){const _=[...e.items];_[v].quantity=y,e.items=_}else console.warn("Item não encontrado no carrinho para atualização:",g)}},l=g=>{g.quantity>1&&a(g,g.quantity-1)},c=g=>{a(g,g.quantity+1)},u=()=>{console.log("Finalizar Pedido!"),n.push("/checkout")},h=g=>{let y=g.id;return g.size&&(y+=`-${g.size}`),g.extras&&g.extras.length>0&&(y+=`-${g.extras.map(v=>v.name).join("-")}`),y},p=(g,y)=>{if(g.length!==y.length)return!1;const v=[...g].sort((E,S)=>E.name.localeCompare(S.name)),_=[...y].sort((E,S)=>E.name.localeCompare(S.name));return v.every((E,S)=>E.name===_[S].name&&E.price===_[S].price)};return(g,y)=>{const v=gl("router-link");return R(),qe(Pi,{"is-header-visible":!1,"top-nav-visible":!0,"top-nav-title":"Carrinho"},{default:_e(()=>[f("div",l$,[r.value===0?(R(),N("div",c$," Seu carrinho está vazio. Adicione deliciosos itens ao seu pedido! ")):(R(),N("div",u$,[(R(!0),N(pe,null,Ce(s.value,_=>(R(),N("div",{key:h(_),class:"flex items-top border rounded-md p-4 dark:bg-gray-800 dark:border-gray-700 border-gray-300"},[ue(v,{to:"/produto/"+_.slug,class:"w-24 h-24 mr-2"},{default:_e(()=>[f("div",{class:re(["w-16 h-16 rounded-md bg-cover bg-center shadow-md",{"bg-emerald-500 dark:bg-amber-400":!_.img}]),style:vo({backgroundImage:_.img?`url(${_.img})`:"none"})},null,6)]),_:2},1032,["to"]),f("div",d$,[ue(v,{to:"/produto/"+_.slug,class:"font-semibold dark:text-gray-200 hover:underline"},{default:_e(()=>[G(U(_.name||"Item sem nome"),1)]),_:2},1032,["to"]),_.size?(R(),N("div",h$," Tam: "+U(_.size),1)):ne("",!0),_.extras&&_.extras.length>0?(R(),N("div",f$,[f("small",null," Extras: "+U(_.extras.map(E=>E.name).join(", ")),1)])):ne("",!0),f("p",p$," Preço Unitário: "+U(g.$formatPrice(_.price+_.extras.reduce((E,S)=>E+S.price,0))),1),f("div",g$,[y[2]||(y[2]=f("label",{for:"quantity",class:"mr-2 text-sm text-gray-700 dark:text-gray-300 sr-only"}," Quantidade: ",-1)),f("div",m$,[f("button",{onClick:E=>l(_),class:"px-2 py-1 text-gray-700 dark:text-gray-300 hover:bg-gray-300 rounded-l-full dark:hover:bg-gray-700 focus:outline-none"},y[0]||(y[0]=[f("i",{class:"fa fa-minus"},null,-1)]),8,y$),f("span",v$,U(_.quantity),1),f("button",{onClick:E=>c(_),class:"px-2 py-1 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-700 focus:outline-none rounded-r-full"},y[1]||(y[1]=[f("i",{class:"fa fa-plus"},null,-1)]),8,_$)])])]),f("button",{onClick:E=>o(_),class:"h-10 w-10 inline-flex items-center justify-center bg-transparent transition-all duration-300 cursor-pointer rounded-full hover:bg-red-500/20 text-red-500 relative group"},y[3]||(y[3]=[f("i",{class:"fa fa-trash"},null,-1),f("span",{class:"text-xs text-red-500 absolute -bottom-4 hidden group-hover:flex transition-all duration-300"},[f("small",null,"Excluir")],-1)]),8,b$)]))),128))])),r.value>0?(R(),N("div",x$,[f("div",w$,[y[4]||(y[4]=f("span",{class:"font-bold"},"Total do Pedido:",-1)),f("span",E$,U(g.$formatPrice(i.value)),1)]),f("button",{class:"bg-emerald-500 container hover:bg-emerald-600 text-white font-semibold py-2 px-4 rounded-md shadow-md mt-4",onClick:u}," Finalizar Pedido ")])):ne("",!0)])]),_:1})}}},k$=Wt(T$,[["__scopeId","data-v-d7ffcfb0"]]),I$={},S$={class:"animate-pulse space-y-4 max-w-2xl mx-auto p-4"};function A$(t,e){return R(),N("div",S$,e[0]||(e[0]=[Jc('<div class="w-full h-56 bg-gray-300 dark:bg-gray-700 rounded-2xl"></div><div class="h-6 bg-gray-300 dark:bg-gray-700 rounded w-3/4"></div><div class="h-4 bg-gray-300 dark:bg-gray-700 rounded w-full"></div><div class="h-4 bg-gray-300 dark:bg-gray-700 rounded w-5/6"></div><div class="h-10 bg-gray-300 dark:bg-gray-700 rounded w-36"></div><div class="space-y-2"><div class="h-4 bg-gray-300 dark:bg-gray-700 rounded w-1/2"></div><div class="flex gap-2"><div class="h-10 bg-gray-300 dark:bg-gray-700 rounded w-full"></div><div class="h-10 bg-gray-300 dark:bg-gray-700 rounded w-full"></div></div></div><div class="h-10 bg-gray-300 dark:bg-gray-700 rounded w-full"></div>',7)]))}const C$=Wt(I$,[["render",A$]]),P$={class:"p-4 max-w-2xl mx-auto"},R$={key:1},O$={class:"relative"},D$=["src"],M$={class:"flex items-center justify-between mb-4"},N$={class:"text-xl font-semibold"},L$={class:"text-green-600 font-bold text-lg"},V$={class:"text-gray-600 dark:text-gray-300 mb-6 leading-relaxed"},$$={class:"mb-6"},F$={class:"flex items-center gap-4 w-36"},U$={class:"text-xl font-medium w-8 text-center"},B$={key:0,class:"mb-6"},j$={class:"font-medium mb-2"},z$={class:"flex gap-2 flex-wrap"},H$=["onClick"],q$={class:"font-semibold"},W$={class:"text-sm"},K$={key:1,class:"mb-6"},G$={class:"flex flex-wrap gap-2"},Y$=["for"],Q$=["id","value"],X$={class:"font-medium"},J$={class:"text-xs text-red-500"},Z$={key:0,class:"m-4 fixed flex justify-center items-center space-x-2 top-4 transform bg-green-600 text-white px-4 py-2 rounded shadow-lg z-50 border-l-4 border-l-green-800"},e6="cached_products",t6={__name:"ProductDetail",setup(t){const e=rw(),n=kp(),s=xo();me(()=>s.items.length);const r=z(null),i=z([]),o=z(0),a=z([]),l=z(1),c=z(!0),u=z(!1);function h(){l.value<10&&l.value++}function p(){l.value>1&&l.value--}async function g(v){try{const{data:_}=await it.get(`/products/${v}`);r.value=_,i.value=_.extras||[]}catch(_){console.error("Erro ao carregar produto da API:",_),n.push("/")}finally{c.value=!1}}pt(async()=>{const v=localStorage.getItem(e6),_=v?JSON.parse(v):[],E=e.params.slug,S=_.find(D=>D.slug===E);S?(r.value=S,i.value=S.extras||[],c.value=!1,g(E)):await g(E)});function y(){var S,D;if(!r.value)return;const v=((S=r.value.price)==null?void 0:S[o.value])||0,_=a.value.reduce((F,M)=>F+M.price,0),E=(v+_)*l.value;s.addItem({id:r.value.id,name:r.value.name,quantity:l.value,size:(D=r.value.sizes)==null?void 0:D[o.value],price:v,extras:a.value,subtotal:E,img:r.value.img,slug:r.value.slug}),u.value=!0,setTimeout(()=>u.value=!1,3e3)}return(v,_)=>{var E;return R(),N("div",null,[ue(Pi,{"show-back-button":!0,"top-nav-title":(E=r.value)==null?void 0:E.name,"mobile-menu-visible":!1},{default:_e(()=>{var S,D,F,M,O,T,b;return[f("div",P$,[c.value?(R(),qe(C$,{key:0})):(R(),N("div",R$,[f("div",O$,[r.value?(R(),qe(OT,{key:0,"product-id":r.value.id,rating:r.value.rating||0,"show-text-rating":!0,"rating-text":r.value.rating||0,class:"mb-6 absolute bottom-0 right-5"},null,8,["product-id","rating","rating-text"])):ne("",!0),f("img",{src:(S=r.value)==null?void 0:S.img,alt:"Imagem do produto",class:"w-full lg:h-60 object-cover mb-6 rounded-md shadow-lg"},null,8,D$)]),f("div",M$,[f("h1",N$,U((D=r.value)==null?void 0:D.name),1),f("span",L$,U(v.$formatPrice((M=(F=r.value)==null?void 0:F.price)==null?void 0:M[o.value])),1)]),f("p",V$,U((O=r.value)==null?void 0:O.description),1),f("div",$$,[_[1]||(_[1]=f("h4",{class:"font-medium mb-2"},"Quantidade",-1)),f("div",F$,[f("button",{onClick:p,class:"w-10 h-10 bg-gray-200 dark:bg-gray-800 rounded-md text-xl font-bold hover:bg-gray-300"}," - "),f("span",U$,U(l.value),1),f("button",{onClick:h,class:"w-10 h-10 bg-gray-200 dark:bg-gray-800 rounded-md text-xl font-bold hover:bg-gray-300"}," + ")])]),(b=(T=r.value)==null?void 0:T.sizes)!=null&&b.length?(R(),N("div",B$,[f("h4",j$," Tamanho"+U(r.value.sizes.length>1?"s":""),1),f("div",z$,[(R(!0),N(pe,null,Ce(r.value.sizes,(w,C)=>{var k;return R(),N("div",{key:C,onClick:A=>o.value=C,class:re(["cursor-pointer border rounded-md px-4 py-2 shadow-sm transition",o.value===C?"bg-red-600 text-white border-red-700":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600"])},[f("div",q$,U(w),1),f("div",W$,U(v.$formatPrice((k=r.value.price)==null?void 0:k[C])),1)],10,H$)}),128))])])):ne("",!0),i.value.length?(R(),N("div",K$,[_[2]||(_[2]=f("h4",{class:"font-medium mb-2"},"Adicionais",-1)),f("div",G$,[(R(!0),N(pe,null,Ce(i.value,(w,C)=>(R(),N("label",{key:C,for:"extra-"+C,class:re(["cursor-pointer border rounded-md px-4 py-2 flex flex-col items-center transition text-sm bg-white dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700",{"border-blue-600 dark:border-blue-400 text-blue-600 dark:text-blue-400":a.value.includes(w)}])},[Ie(f("input",{class:"hidden",type:"checkbox",id:"extra-"+C,value:w,"onUpdate:modelValue":_[0]||(_[0]=k=>a.value=k)},null,8,Q$),[[tu,a.value]]),f("span",X$,U(w.name),1),f("span",J$,U(v.$formatPrice(w.price)),1)],10,Y$))),128))])])):ne("",!0),f("button",{onClick:y,class:"w-full bg-red-600 text-white font-semibold py-3 rounded-lg hover:bg-red-700 transition-all duration-200"}," Adicionar ao Carrinho "),ue(bo,{name:"fade"},{default:_e(()=>[u.value?(R(),N("div",Z$,_[3]||(_[3]=[f("i",{class:"fa-regular fa-circle-check text-green-800","aria-hidden":"true"},null,-1),f("span",null,"Produto adicionado ao carrinho!",-1)]))):ne("",!0)]),_:1})]))])]}),_:1},8,["top-nav-title"])])}}},n6={class:"container mx-auto p-4"},s6={class:"text-2xl font-semibold mb-4 dark:text-gray-200"},r6={key:0,class:"text-gray-500 dark:text-gray-400"},i6={key:1,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},o6={__name:"Favorites",setup(t){const e=RT(),n=me(()=>e.favorites),s=me(()=>n.value.length);return(r,i)=>(R(),qe(Pi,{"top-nav-visible":!0,"is-header-visible":!1,"top-nav-title":"Favoritos"},{default:_e(()=>[f("div",n6,[f("h2",s6," Meus Favoritos ("+U(s.value)+") ",1),s.value===0?(R(),N("div",r6," Sua lista de favoritos está vazia. Adicione produtos clicando no ícone de coração! ")):(R(),N("div",i6,[(R(!0),N(pe,null,Ce(n.value,o=>(R(),qe(DT,{key:o.id,product:o},null,8,["product"]))),128))]))])]),_:1}))}},a6=Wt(o6,[["__scopeId","data-v-702433d7"]]),l6={class:"container mx-auto p-4 max-w-md bg-white shadow-lg rounded-lg mt-8"},c6={class:"mb-6"},u6={key:0,class:"w-5 h-5 text-green-700",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},d6={key:1,class:"w-5 h-5 text-red-700",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},h6={key:2,class:"w-5 h-5 text-blue-700 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},f6={class:"mb-6"},p6=["value"],g6={key:0,class:"text-green-600 text-xs mt-1"},m6=["disabled"],y6={key:0},v6={key:1},_6={key:2},b6={__name:"Profile",setup(t){const n=rd({apiKey:"AIzaSyCqcgvxcgWwG4LmYkSL66x4GYi1KLxuHts",authDomain:"chat-bot-pizzaria.firebaseapp.com",projectId:"chat-bot-pizzaria",storageBucket:"chat-bot-pizzaria.firebasestorage.app",messagingSenderId:"1090893949199",appId:"1:1090893949199:web:cc9724c44f5ef76ea9f67a",measurementId:"G-TQ6E8YLYHD"}),s=Qp(n),r=z("Carregando status..."),i=z(null),o=z(!1),a=z(!1),l=z(!0),c=z("loading_user_id");s.onAuthStateChanged(g=>{if(g)c.value=g.uid,console.log("User ID from Firebase Auth:",c.value);else{let y=localStorage.getItem("guestUserId");y||(y=`guest_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,localStorage.setItem("guestUserId",y)),c.value=y,console.log("Guest User ID:",c.value)}});const u=me(()=>r.value.includes("Concedida")?"bg-green-100 text-green-800":r.value.includes("Negada")?"bg-red-100 text-red-800":r.value.includes("Erro")||r.value.includes("não suportadas")?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"),h=async()=>{o.value=!0;try{const g=await ku(c.value);g?(i.value=g,r.value="Permissão de notificação Concedida!"):r.value="Permissão de notificação Negada ou token não obtido."}catch(g){console.error("Erro geral ao lidar com a solicitação de notificação:",g),r.value=`Erro: ${g.message}`}finally{o.value=!1}},p=()=>{i.value&&navigator.clipboard.writeText(i.value).then(()=>{a.value=!0,setTimeout(()=>{a.value=!1},2e3)}).catch(g=>{console.error("Falha ao copiar o token:",g)})};return pt(async()=>{if(!await Sd()){l.value=!1,r.value="Notificações não suportadas neste navegador.";return}if("serviceWorker"in navigator)try{const v=await navigator.serviceWorker.register("/firebase-messaging-sw.js");console.log("Service Worker registrado com sucesso:",v)}catch(v){console.error("Falha ao registrar o Service Worker:",v),r.value=`Erro ao registrar Service Worker: ${v.message}`,l.value=!1;return}else{r.value="Navegador não suporta Service Workers.",l.value=!1;return}ST();const y=Notification.permission;if(y==="granted"){r.value="Permissão de notificação Concedida.";try{const v=await ku(c.value);v&&(i.value=v)}catch(v){console.error("Erro ao obter token na montagem:",v),r.value=`Erro ao obter token: ${v.message}`}}else y==="denied"?r.value="Permissão de notificação Negada.":r.value="Aguardando permissão..."}),(g,y)=>(R(),qe(Pi,{"top-nav-title":"Perfil - Configurações de Notificação"},{default:_e(()=>[f("div",l6,[y[5]||(y[5]=f("h2",{class:"text-2xl font-bold text-gray-800 mb-6 text-center"},"Configurações de Notificação",-1)),f("div",c6,[y[3]||(y[3]=f("p",{class:"text-gray-700 mb-2"},"Status das Notificações:",-1)),f("div",{class:re([u.value,"p-3 rounded-md text-sm font-medium flex items-center justify-between"])},[f("span",null,U(r.value),1),r.value.includes("Concedida")?(R(),N("svg",u6,y[0]||(y[0]=[f("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):r.value.includes("Negada")?(R(),N("svg",d6,y[1]||(y[1]=[f("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1)]))):(R(),N("svg",h6,y[2]||(y[2]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004 12c0 2.21.894 4.204 2.342 5.658M18 18v-5h-.582m-15.356-2A8.001 8.001 0 0020 12c0-2.21-.894-4.204-2.342-5.658"},null,-1)])))],2)]),f("div",f6,[y[4]||(y[4]=f("p",{class:"text-gray-700 mb-2"},"Seu Token FCM:",-1)),f("input",{type:"text",value:i.value||"Gerando...",readonly:"",class:"w-full p-2 border border-gray-300 rounded-md bg-gray-100 text-gray-600 text-sm font-mono",onClick:p},null,8,p6),a.value?(R(),N("p",g6,"Copiado!")):ne("",!0)]),f("button",{onClick:h,disabled:o.value||!l.value,class:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md transition duration-300 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed"},[l.value?o.value?(R(),N("span",v6,"Permissão Solicitada")):(R(),N("span",_6,"Solicitar Permissão de Notificação")):(R(),N("span",y6,"Notificações não suportadas"))],8,m6),y[6]||(y[6]=f("p",{class:"text-gray-500 text-xs mt-4 text-center"}," Ative as notificações para receber atualizações sobre seus pedidos e promoções. ",-1))])]),_:1}))}},x6={},w6={class:"border-b border-b-gray-300 dark:border-b-gray-800 mb-4"};function E6(t,e){return R(),N("div",w6)}const Vc=Wt(x6,[["render",E6]]),T6={class:"container mx-auto p-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 lg:gap-8 gap-4 lg:-mt-20"},k6={class:"lg:col-span-2"},I6={key:0,class:"p-4 border border-gray-300 rounded-md mb-4 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-200"},S6={class:"text-gray-500 dark:text-gray-400"},A6={class:"text-gray-500 dark:text-gray-400"},C6={class:"text-gray-500 dark:text-gray-400"},P6={class:"text-gray-500 dark:text-gray-400"},R6={class:"p-4 border border-gray-300 rounded-md mb-4 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-200"},O6={key:0},D6={class:"mb-4"},M6={class:"mb-4"},N6={class:"mb-4"},L6={class:"mb-4"},V6={class:"mb-4"},$6={class:"flex justify-end gap-2"},F6={class:"mb-6"},U6={class:"flex items-center gap-4 text-gray-700 dark:text-gray-300 text-xs mb-2"},B6=["src","alt"],j6={class:"flex-3"},z6={class:"flex-1"},H6={class:"mb-4"},q6={class:"space-x-4 flex items-center"},W6={class:"flex gap-2 mb-4"},K6=["value"],G6={class:"text-sm font-medium"},Y6={key:1,class:"mb-4"},Q6={class:"ml-4"},X6={key:0,class:"mt-4"},J6={class:"flex justify-between items-center dark:text-gray-200"},Z6={class:"font-bold"},eF={key:0,class:"m-4 fixed flex justify-center items-center space-x-2 top-4 transform bg-green-600 text-white px-4 py-2 rounded shadow-lg z-50 border-l-4 border-l-green-800"},a_="customer_data",tF=5,nF={__name:"Checkout",setup(t){const e=kp(),n=xo(),s=me(()=>n.total),r=me(()=>n.items),i=_o({name:"",phone:"",deliveryType:"Entrega",address:"",reference:"",neighborhood:""}),o=me(()=>Object.values(i).some(_=>_!=="")),a=z(!1),l=z("pix"),c=z("no"),u=z(0),h=z(""),p=[{value:"pix",label:"Pix",icon:"fa-brands fa-pix"},{value:"credit-card",label:"Cartão",icon:"fa fa-credit-card"},{value:"cash",label:"Dinheiro",icon:"fa fa-money-bill-1-wave"}];function g(){const _=Date.now().toString().slice(-5),E=Math.floor(Math.random()*1e5).toString().padStart(5,"0");return`${_}${E}`}pt(()=>{const _=localStorage.getItem(a_);_&&Object.assign(i,JSON.parse(_))});function y(){localStorage.setItem(a_,JSON.stringify(i))}async function v(){if(n.items.length===0){alert("Seu carrinho está vazio. Adicione itens para finalizar o pedido.");return}const _=i.deliveryType==="Retirada"?0:tF,E=s.value,S=E+_,D={orderNumber:g(),customer:{...i},items:n.items,subtotal:E,tax:_,total:S,paymentMethod:l.value,deliveryType:i.deliveryType,needChange:c.value==="yes",changeAmount:l.value==="cash"&&c.value==="yes"?u.value:null,created_at:new Date().toISOString()},F=n.items.map(w=>{let C=`${w.quantity}x ${w.name}${w.size?` (${w.size})`:""} - R$ ${w.subtotal.toFixed(2).replace(".",",")}`;if(w.extras&&w.extras.length>0){const k=w.extras.map(A=>`${A.name} - R$ ${A.price.toFixed(2).replace(".",",")}`).join(" | ");C+=`
_Adicionais:_ ${k}`}return C}).join(`
`);let M=[`*Tipo:* ${D.deliveryType}`];D.deliveryType==="Entrega"?M.push("*Tempo de entrega:* 40 a 50min"):M.push("*Pronto para retirada em:* 20-30min");const O=`NOVO PEDIDO: #${D.orderNumber}

DADOS DO PEDIDO:
${F}

DADOS DA ENTREGA:
${M.join(`
`)}
*Cliente:* ${i.name}
*Telefone:* ${i.phone}
`+(D.deliveryType==="Entrega"?`*Endereço:* ${i.address}
`:"")+(D.deliveryType==="Entrega"&&i.reference?`*Ponto de referência:* ${i.reference}
`:D.deliveryType==="Entrega"?`*Ponto de referência:* nenhum
`:"")+(D.deliveryType==="Entrega"&&i.neighborhood?`*Bairro:* ${i.neighborhood}
`:"")+`
DADOS DO PAGAMENTO:
*Método de pagamento:* ${D.paymentMethod?D.paymentMethod.toUpperCase():"N/A"}
*Subtotal:* R$ ${D.subtotal.toFixed(2).replace(".",",")}
`+(D.deliveryType==="Entrega"?`*Taxa de entrega:* R$ ${D.tax.toFixed(2).replace(".",",")}
`:"")+`*Total:* R$ ${D.total.toFixed(2).replace(".",",")}`,T="5571992477638",b=encodeURIComponent(O);window.open(`https://wa.me/${T}?text=${b}`),await new Promise(w=>setTimeout(w,1e3)),h.value=D.orderNumber,y(),n.clearCart(),a.value=!1,setTimeout(()=>{h.value="",e.push("/")},3e3)}return(_,E)=>(R(),qe(Pi,{"top-nav-visible":!0,"top-nav-title":"Finalizar pedido","is-header-visible":!1},{default:_e(()=>[f("div",T6,[E[36]||(E[36]=f("ol",{"aria-label":"Breadcrumb",class:"lg:col-span-8 md:col-span-2 px-1 flex text-xs space-x-2 items-center text-gray-500 min-w-0 gap-2 whitespace-nowrap"},[f("li",{class:"text-xs/loose"},[f("a",{href:"",class:"flex items-center gap-2 align-middle leading-none transition-all"},[f("i",{class:"fa fa-home"}),G(" Início ")])]),f("i",{class:"fa fa-chevron-right text-gray-400"}),f("span",{class:"text-green-600"},"Finalizar pedido")],-1)),f("div",k6,[o.value&&!a.value?(R(),N("div",I6,[E[18]||(E[18]=f("h3",{class:"font-semibold mb-2 dark:text-gray-100"},"Dados do Cliente",-1)),f("div",null,[E[14]||(E[14]=f("span",{class:"font-semibold mr-2"},"Nome:",-1)),f("span",S6,U(i.name),1)]),f("div",null,[E[15]||(E[15]=f("span",{class:"font-semibold mr-2"},"Telefone:",-1)),f("span",A6,U(i.phone),1)]),f("div",null,[E[16]||(E[16]=f("span",{class:"font-semibold mr-2"},"Endereço:",-1)),f("span",C6,U(i.address),1)]),f("div",null,[E[17]||(E[17]=f("span",{class:"font-semibold mr-2"},"Ponto de referência:",-1)),f("span",P6,U(i.reference),1)]),f("button",{onClick:E[0]||(E[0]=S=>a.value=!0),class:"mt-4 px-4 py-2 bg-blue-500 hover:bg-blue-700 text-white font-semibold rounded-md shadow focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-green-500"}," Alterar meus dados ")])):ne("",!0)]),f("div",R6,[f("form",{onSubmit:os(v,["prevent"])},[!o.value||a.value?(R(),N("div",O6,[E[24]||(E[24]=f("h3",{class:"font-semibold mb-4 dark:text-gray-100"},"Dados do Cliente",-1)),f("div",D6,[E[19]||(E[19]=f("label",{for:"name",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"},"Nome:",-1)),Ie(f("input",{type:"text",id:"name","onUpdate:modelValue":E[1]||(E[1]=S=>i.name=S),required:"",class:"input"},null,512),[[Je,i.name]])]),f("div",M6,[E[20]||(E[20]=f("label",{for:"phone",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"},"Telefone:",-1)),Ie(f("input",{type:"tel",id:"phone","onUpdate:modelValue":E[2]||(E[2]=S=>i.phone=S),required:"",class:"input"},null,512),[[Je,i.phone]])]),f("div",N6,[E[21]||(E[21]=f("label",{for:"address",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"},"Endereço:",-1)),Ie(f("input",{type:"text",id:"address","onUpdate:modelValue":E[3]||(E[3]=S=>i.address=S),required:"",class:"input"},null,512),[[Je,i.address]])]),f("div",L6,[E[22]||(E[22]=f("label",{for:"reference",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"},"Ponto de Referência:",-1)),Ie(f("input",{id:"reference","onUpdate:modelValue":E[4]||(E[4]=S=>i.reference=S),class:"input"},null,512),[[Je,i.reference]])]),f("div",V6,[E[23]||(E[23]=f("label",{for:"neighborhood",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"},"Bairro:",-1)),Ie(f("input",{id:"neighborhood","onUpdate:modelValue":E[5]||(E[5]=S=>i.neighborhood=S),class:"input"},null,512),[[Je,i.neighborhood]])]),f("div",$6,[f("button",{type:"button",onClick:E[6]||(E[6]=S=>a.value=!1),class:"bg-gray-500 hover:bg-gray-600 text-white py-2 px-4 rounded-md shadow-md"}," Cancelar "),f("button",{type:"button",onClick:E[7]||(E[7]=()=>{a.value=!1,y()}),class:"bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-md shadow-md"}," Salvar ")])])):ne("",!0),E[32]||(E[32]=f("h3",{class:"font-semibold mb-4 dark:text-gray-100 text-gray-700"}," Resumo do pedido ",-1)),f("div",F6,[(R(!0),N(pe,null,Ce(r.value,S=>(R(),N("div",U6,[f("img",{src:S.img,alt:S.name,class:"h-10 w-10 rounded-md object-cover shadow-md"},null,8,B6),f("span",j6,U(S.name),1),f("span",z6,"x"+U(S.quantity),1),f("span",null,U(_.$formatPrice(S.subtotal)),1)]))),256))]),E[33]||(E[33]=f("div",{class:"space-y-2"},[f("label",{for:"coupon",class:"text-xs text-gray-700"},"Código do cupom"),f("div",{class:"relative"},[f("input",{type:"text",name:"coupon",id:"coupon",class:"block w-full rounded-md py-3 ps-4 pe-12 text-gray-800 text-sm focus:ring-transparent border-gray-200 dark:bg-gray-50",placeholder:"Digite o código",autocomplete:"off"}),f("button",{class:"absolute top-1/2 -translate-y-1/2 end-1 py-2 px-5 inline-block font-semibold tracking-wide border align-middle duration-500 text-sm text-center bg-gray-200 hover:bg-gray-300 border-gray-200 hover:border-gray-300 text-gray-900 rounded-md"}," Aplicar cupom ")])],-1)),ue(Vc),f("div",H6,[E[25]||(E[25]=f("span",{class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-4"}," Tipo de Entrega/Retirada: ",-1)),f("div",q6,[f("div",null,[Ie(f("input",{type:"radio",id:"deliveryTypeDelivery",name:"deliveryTypeOptions",value:"Entrega","onUpdate:modelValue":E[8]||(E[8]=S=>i.deliveryType=S),class:"form-radio hidden"},null,512),[[Cs,i.deliveryType]]),f("label",{for:"deliveryTypeDelivery",class:re(["cursor-pointer px-4 py-2 rounded border text-sm font-medium transition",i.deliveryType==="Entrega"?"bg-indigo-600 text-white":"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 border-gray-300 dark:border-gray-600"])}," 🚚 Entrega ",2)]),f("div",null,[Ie(f("input",{type:"radio",id:"deliveryTypeRetirada",name:"deliveryTypeOptions",value:"Retirada","onUpdate:modelValue":E[9]||(E[9]=S=>i.deliveryType=S),class:"form-radio hidden"},null,512),[[Cs,i.deliveryType]]),f("label",{for:"deliveryTypeRetirada",class:re(["cursor-pointer px-4 py-2 rounded border text-sm font-medium transition",i.deliveryType==="Retirada"?"bg-indigo-600 text-white":"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 border-gray-300 dark:border-gray-600"])}," 🏠 Retirada ",2)])])]),ue(Vc),E[34]||(E[34]=f("h3",{class:"font-semibold mb-4 dark:text-gray-100 text-gray-700"},"Pagamento",-1)),f("div",W6,[(R(),N(pe,null,Ce(p,S=>f("label",{key:S.value,class:"relative cursor-pointer"},[Ie(f("input",{type:"radio",name:"paymentMethod",value:S.value,"onUpdate:modelValue":E[10]||(E[10]=D=>l.value=D),class:"hidden"},null,8,K6),[[Cs,l.value]]),f("div",{class:re(["flex px-4 py-2 space-x-2 items-center justify-center border rounded-md shadow-md transition",l.value===S.value?"bg-green-600 text-white border-green-600":"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 border-gray-300 dark:border-gray-600"])},[f("i",{class:re(S.icon)},null,2),f("div",G6,U(S.label),1)],2)])),64))]),l.value==="cash"?(R(),N("div",Y6,[E[29]||(E[29]=f("label",{class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"},"Precisa de Troco?",-1)),f("label",null,[Ie(f("input",{type:"radio",value:"yes","onUpdate:modelValue":E[11]||(E[11]=S=>c.value=S),class:"mr-2"},null,512),[[Cs,c.value]]),E[26]||(E[26]=G(" Sim "))]),f("label",Q6,[Ie(f("input",{type:"radio",value:"no","onUpdate:modelValue":E[12]||(E[12]=S=>c.value=S),class:"mr-2"},null,512),[[Cs,c.value]]),E[27]||(E[27]=G(" Não "))]),c.value==="yes"?(R(),N("div",X6,[E[28]||(E[28]=f("label",{for:"changeAmount",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"},"Valor para Troco:",-1)),Ie(f("input",{type:"number",id:"changeAmount","onUpdate:modelValue":E[13]||(E[13]=S=>u.value=S),min:"0",class:"input"},null,512),[[Je,u.value,void 0,{number:!0}]])])):ne("",!0)])):ne("",!0),ue(Vc),f("div",null,[f("div",J6,[E[30]||(E[30]=f("span",{class:"font-semibold"},"Total do Pedido:",-1)),f("span",Z6,U(_.$formatPrice(s.value)),1)]),E[31]||(E[31]=f("button",{type:"submit",class:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg shadow-md mt-4 focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-green-500"}," Finalizar Pedido ",-1))])],32)]),ue(bo,{name:"fade"},{default:_e(()=>[h.value?(R(),N("div",eF,[E[35]||(E[35]=f("i",{class:"fa-regular fa-circle-check text-green-800","aria-hidden":"true"},null,-1)),f("span",null,"Pedido realizado com sucesso! Número do Pedido: "+U(h.value),1)])):ne("",!0)]),_:1})])]),_:1}))}},sF={class:"container mx-auto p-4"},rF={class:"mb-4"},iF=["value"],oF={key:0,class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},aF={class:"mb-4"},lF={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2"},cF=["value","disabled"],uF={key:0,class:"text-red-500 text-sm mt-1"},dF={key:1,class:"mt-2"},hF={class:"mr-2"},fF=["onUpdate:modelValue"],pF={key:0,value:"metade"},gF={class:"mb-4"},mF={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2"},yF=["value"],vF={class:"mb-4"},_F=["value"],bF={class:"mt-8 border-t pt-4 dark:border-gray-700"},xF={key:0},wF={key:1},EF={key:0},TF={key:1},kF={key:2},IF={key:0},SF={key:3},AF={class:"flex justify-between items-center mt-4 dark:text-gray-200"},CF={class:"text-xl font-bold"},PF=["disabled"],RF={key:4,class:"text-red-500 text-sm mt-1"},OF={__name:"BuildPizza",setup(t){const e=xo(),n=z([{name:"Média",maxSabor:2,price:25},{name:"Grande",maxSabor:4,price:35}]),s=z([{name:"Calabresa",price:10},{name:"Pepperoni",price:12},{name:"Margherita",price:9},{name:"Frango com Catupiry",price:11},{name:"Portuguesa",price:10},{name:"Quatro Queijos",price:13}]),r=z([{name:"Queijo Extra",price:5},{name:"Azeitonas",price:3},{name:"Bacon",price:6},{name:"Cebola Caramelizada",price:4}]),i=z([{name:"Catupiry",price:7},{name:"Cheddar",price:8},{name:"Chocolate",price:9}]),o=z(n.value[0]),a=z([]),l=z([]),c=z(null),u=z([]),h=me(()=>o.value?o.value.maxSabor:0),p=v=>a.value.some(_=>_.name===v.name),g=me(()=>{let v=o.value?o.value.price:0;return a.value.forEach((_,E)=>{v+=_.price/(u.value[E]==="metade"?2:1)}),l.value.forEach(_=>{v+=_.price}),c.value&&(v+=c.value.price),v}),y=()=>{if(a.value.length>=2&&a.value.length<=h.value){const v={id:"pizza-customizada-"+Date.now(),name:"Pizza Montada",size:o.value.name,sabores:a.value.map((_,E)=>({name:_.name,metade:u.value[E]})),adicionais:l.value.map(_=>_.name),borda:c.value?c.value.name:"Sem Borda",price:g.value,quantity:1};e.addItem(v),alert("Pizza personalizada adicionada ao carrinho!")}else alert(`Selecione de 2 a ${h.value} sabores para adicionar ao carrinho.`)};return(v,_)=>(R(),qe(Pi,{"top-nav-title":"Monte Sua Pizza"},{default:_e(()=>{var E;return[f("div",sF,[_[15]||(_[15]=f("h2",{class:"text-2xl font-semibold mb-6 dark:text-gray-200"},"Monte Sua Pizza",-1)),f("div",rF,[_[4]||(_[4]=f("label",{for:"pizza-size",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"}," Tamanho da Pizza: ",-1)),Ie(f("select",{id:"pizza-size","onUpdate:modelValue":_[0]||(_[0]=S=>o.value=S),class:"input"},[(R(!0),N(pe,null,Ce(n.value,S=>(R(),N("option",{key:S.name,value:S},U(S.name)+" (Máx. "+U(S.maxSabor)+" sabores) - "+U(v.$formatPrice(S.price)),9,iF))),128))],512),[[Ns,o.value]]),o.value?(R(),N("p",oF," Você pode escolher até "+U(o.value.maxSabor)+" sabores. ",1)):ne("",!0)]),f("div",aF,[_[7]||(_[7]=f("h3",{class:"text-xl font-semibold mb-2 dark:text-gray-100"},"Sabores",-1)),f("div",lF,[(R(!0),N(pe,null,Ce(s.value,S=>(R(),N("label",{key:S.name,class:"flex items-center"},[Ie(f("input",{type:"checkbox",value:S,"onUpdate:modelValue":_[1]||(_[1]=D=>a.value=D),disabled:a.value.length>=h.value&&!p(S),class:"mr-2"},null,8,cF),[[tu,a.value]]),f("span",null,U(S.name)+" - "+U(v.$formatPrice(S.price)),1)]))),128))]),a.value.length>h.value?(R(),N("p",uF," Você selecionou mais sabores do que o permitido para este tamanho. ")):ne("",!0),a.value.length>1&&((E=o.value)==null?void 0:E.maxSabor)>1?(R(),N("div",dF,[_[6]||(_[6]=f("h4",{class:"font-semibold mb-1 dark:text-gray-100"},"Metades:",-1)),(R(!0),N(pe,null,Ce(a.value,(S,D)=>(R(),N("div",{key:"metade-"+D,class:"flex items-center mb-1"},[f("span",hF,U(S.name)+":",1),Ie(f("select",{"onUpdate:modelValue":F=>u.value[D]=F,class:"input-sm"},[_[5]||(_[5]=f("option",{value:"inteira"},"Inteira",-1)),a.value.length===2?(R(),N("option",pF,"Metade")):ne("",!0)],8,fF),[[Ns,u.value[D]]])]))),128))])):ne("",!0)]),f("div",gF,[_[8]||(_[8]=f("h3",{class:"text-xl font-semibold mb-2 dark:text-gray-100"},"Adicionais",-1)),f("div",mF,[(R(!0),N(pe,null,Ce(r.value,S=>(R(),N("label",{key:S.name,class:"flex items-center"},[Ie(f("input",{type:"checkbox",value:S,"onUpdate:modelValue":_[2]||(_[2]=D=>l.value=D),class:"mr-2"},null,8,yF),[[tu,l.value]]),f("span",null,U(S.name)+" - "+U(v.$formatPrice(S.price)),1)]))),128))])]),f("div",vF,[_[10]||(_[10]=f("label",{for:"pizza-borda",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"}," Borda: ",-1)),Ie(f("select",{id:"pizza-borda","onUpdate:modelValue":_[3]||(_[3]=S=>c.value=S),class:"input"},[_[9]||(_[9]=f("option",{value:null},"Sem Borda",-1)),(R(!0),N(pe,null,Ce(i.value,S=>(R(),N("option",{key:S.name,value:S},U(S.name)+" - "+U(v.$formatPrice(S.price)),9,_F))),128))],512),[[Ns,c.value]])]),f("div",bF,[_[14]||(_[14]=f("h3",{class:"text-xl font-semibold mb-2 dark:text-gray-100"},"Resumo:",-1)),o.value?(R(),N("p",xF," Tamanho: "+U(o.value.name)+" - "+U(v.$formatPrice(o.value.price)),1)):ne("",!0),a.value.length>0?(R(),N("p",wF,[_[11]||(_[11]=G(" Sabores: ")),(R(!0),N(pe,null,Ce(a.value,(S,D)=>(R(),N("span",{key:S.name},[G(U(S.name),1),u.value[D]==="metade"?(R(),N("span",EF," (Metade)")):ne("",!0),D<a.value.length-1?(R(),N("span",TF," | ")):ne("",!0),G(" "+U(v.$formatPrice(S.price/(u.value[D]==="metade"?2:1))),1)]))),128))])):ne("",!0),l.value.length>0?(R(),N("p",kF,[_[12]||(_[12]=G(" Adicionais: ")),(R(!0),N(pe,null,Ce(l.value,(S,D)=>(R(),N("span",{key:S.name},[G(U(S.name)+" "+U(v.$formatPrice(S.price)),1),D<l.value.length-1?(R(),N("span",IF,", ")):ne("",!0)]))),128))])):ne("",!0),c.value?(R(),N("p",SF," Borda: "+U(c.value.name)+" - "+U(v.$formatPrice(c.value.price)),1)):ne("",!0),f("div",AF,[_[13]||(_[13]=f("span",{class:"font-semibold"},"Preço Total:",-1)),f("span",CF,U(v.$formatPrice(g.value)),1)]),f("button",{onClick:y,disabled:a.value.length<2||a.value.length>h.value,class:"w-full bg-red-600 hover:bg-red-700 text-white font-semibold py-3 rounded-lg shadow-md mt-4 focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-green-500"}," Adicionar ao Carrinho ",8,PF),a.value.length<2||a.value.length>h.value?(R(),N("p",RF," Selecione de 2 a "+U(h.value)+" sabores para adicionar ao carrinho. ",1)):ne("",!0)])])]}),_:1}))}},DF=Wt(OF,[["__scopeId","data-v-6c04b263"]]),MF={class:"container mx-auto p-4 max-w-md bg-white shadow-lg rounded-lg mt-8"},NF={class:"mb-6"},LF={key:0,class:"w-5 h-5 text-green-700",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},VF={key:1,class:"w-5 h-5 text-red-700",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},$F={key:2,class:"w-5 h-5 text-blue-700 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},FF={class:"mb-6"},UF=["value"],BF={key:0,class:"text-green-600 text-xs mt-1"},jF=["disabled"],zF={key:0},HF={key:1},qF={key:2},WF={__name:"NotificationOptIn",setup(t){const n=rd({apiKey:"AIzaSyCqcgvxcgWwG4LmYkSL66x4GYi1KLxuHts",authDomain:"chat-bot-pizzaria.firebaseapp.com",projectId:"chat-bot-pizzaria",storageBucket:"chat-bot-pizzaria.firebasestorage.app",messagingSenderId:"1090893949199",appId:"1:1090893949199:web:cc9724c44f5ef76ea9f67a",measurementId:"G-TQ6E8YLYHD"}),s=Qp(n),r=z("Carregando status..."),i=z(null),o=z(!1),a=z(!1),l=z(!0),c=z("loading_user_id");s.onAuthStateChanged(g=>{if(g)c.value=g.uid,console.log("User ID from Firebase Auth:",c.value);else{let y=localStorage.getItem("guestUserId");y||(y=`guest_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,localStorage.setItem("guestUserId",y)),c.value=y,console.log("Guest User ID:",c.value)}});const u=me(()=>r.value.includes("Concedida")?"bg-green-100 text-green-800":r.value.includes("Negada")?"bg-red-100 text-red-800":r.value.includes("Erro")||r.value.includes("não suportadas")?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"),h=async()=>{o.value=!0;try{const g=await ku(c.value);g?(i.value=g,r.value="Permissão de notificação Concedida!"):r.value="Permissão de notificação Negada ou token não obtido."}catch(g){console.error("Erro geral ao lidar com a solicitação de notificação:",g),r.value=`Erro: ${g.message}`}finally{o.value=!1}},p=()=>{i.value&&navigator.clipboard.writeText(i.value).then(()=>{a.value=!0,setTimeout(()=>{a.value=!1},2e3)}).catch(g=>{console.error("Falha ao copiar o token:",g)})};return pt(async()=>{if(!await Sd()){l.value=!1,r.value="Notificações não suportadas neste navegador.";return}if("serviceWorker"in navigator)try{const v=await navigator.serviceWorker.register("/firebase-messaging-sw.js");console.log("Service Worker registrado com sucesso:",v)}catch(v){console.error("Falha ao registrar o Service Worker:",v),r.value=`Erro ao registrar Service Worker: ${v.message}`,l.value=!1;return}else{r.value="Navegador não suporta Service Workers.",l.value=!1;return}ST();const y=Notification.permission;if(y==="granted"){r.value="Permissão de notificação Concedida.";try{const v=await ku(c.value);v&&(i.value=v)}catch(v){console.error("Erro ao obter token na montagem:",v),r.value=`Erro ao obter token: ${v.message}`}}else y==="denied"?r.value="Permissão de notificação Negada.":r.value="Aguardando permissão..."}),(g,y)=>(R(),N("div",MF,[y[5]||(y[5]=f("h2",{class:"text-2xl font-bold text-gray-800 mb-6 text-center"},"Configurações de Notificação",-1)),f("div",NF,[y[3]||(y[3]=f("p",{class:"text-gray-700 mb-2"},"Status das Notificações:",-1)),f("div",{class:re([u.value,"p-3 rounded-md text-sm font-medium flex items-center justify-between"])},[f("span",null,U(r.value),1),r.value.includes("Concedida")?(R(),N("svg",LF,y[0]||(y[0]=[f("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):r.value.includes("Negada")?(R(),N("svg",VF,y[1]||(y[1]=[f("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1)]))):(R(),N("svg",$F,y[2]||(y[2]=[f("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004 12c0 2.21.894 4.204 2.342 5.658M18 18v-5h-.582m-15.356-2A8.001 8.001 0 0020 12c0-2.21-.894-4.204-2.342-5.658"},null,-1)])))],2)]),f("div",FF,[y[4]||(y[4]=f("p",{class:"text-gray-700 mb-2"},"Seu Token FCM:",-1)),f("input",{type:"text",value:i.value||"Gerando...",readonly:"",class:"w-full p-2 border border-gray-300 rounded-md bg-gray-100 text-gray-600 text-sm font-mono",onClick:p},null,8,UF),a.value?(R(),N("p",BF,"Copiado!")):ne("",!0)]),f("button",{onClick:h,disabled:o.value||!l.value,class:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md transition duration-300 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed"},[l.value?o.value?(R(),N("span",HF,"Permissão Solicitada")):(R(),N("span",qF,"Solicitar Permissão de Notificação")):(R(),N("span",zF,"Notificações não suportadas"))],8,jF),y[6]||(y[6]=f("p",{class:"text-gray-500 text-xs mt-4 text-center"}," Ative as notificações para receber atualizações sobre seus pedidos e promoções. ",-1))]))}},KF=Wt(WF,[["__scopeId","data-v-422d1d2a"]]),Rd=Wu("auth",{state:()=>({user:JSON.parse(localStorage.getItem("adminUser"))||null,authToken:localStorage.getItem("adminAuthToken")||null,loading:!1,error:null}),getters:{isAuthenticated:t=>!!t.authToken&&!!t.user,isAdmin:t=>{var e;return((e=t.user)==null?void 0:e.isAdmin)||!1}},actions:{async _updateUserInfoFromFirebase(t){if(!t){this.user=null;return}const e=await t.getIdTokenResult(!0);this.user={uid:t.uid,email:t.email,displayName:t.displayName,isAdmin:e.claims.admin||!1},localStorage.setItem("adminUser",JSON.stringify(this.user)),console.log("Auth Store: User info updated from Firebase ID Token claims:",this.user)},async loginWithEmail(t,e){const n=Ea();this.loading=!0,this.error=null;try{const i=await(await BM(En,t,e)).user.getIdToken(),o=await it.post("/auth/login",{idToken:i});this.authToken=o.data.customToken,localStorage.setItem("adminAuthToken",this.authToken),await Ch(En,this.authToken),await this._updateUserInfoFromFirebase(En.currentUser),n.showToast("Sucesso!","Login realizado com sucesso.","success"),ui.push("/admin")}catch(s){console.error("Erro ao fazer login com e-mail:",s);let r="Erro ao fazer login. Tente novamente.";s.code==="auth/user-not-found"||s.code==="auth/wrong-password"||s.code==="auth/invalid-credential"||s.code==="auth/invalid-email"?r="Email ou senha inválidos.":s.response&&s.response.data&&s.response.data.error&&(r=s.response.data.error),this.error=r,n.showToast("Erro de Login",r,"error"),this.authToken=null,this.user=null,localStorage.removeItem("adminAuthToken"),localStorage.removeItem("adminUser")}finally{this.loading=!1}},async loginWithGoogle(){const t=Ea();this.loading=!0,this.error=null;try{const s=await(await u4(En,x3)).user.getIdToken(),r=await it.post("/auth/google",{idToken:s});this.authToken=r.data.customToken,localStorage.setItem("adminAuthToken",this.authToken),await Ch(En,this.authToken),await this._updateUserInfoFromFirebase(En.currentUser),t.showToast("Sucesso!","Login com Google realizado com sucesso.","success"),ui.push("/admin")}catch(e){console.error("Erro ao fazer login com Google:",e);let n="Erro ao fazer login com Google. Tente novamente.";e.response&&e.response.data&&e.response.data.error&&(n=e.response.data.error),this.error=n,t.showToast("Erro de Login",n,"error"),this.authToken=null,this.user=null,localStorage.removeItem("adminAuthToken"),localStorage.removeItem("adminUser")}finally{this.loading=!1}},async logout(){const t=Ea();this.loading=!0,this.error=null;try{await HM(En),this.authToken=null,this.user=null,localStorage.removeItem("adminAuthToken"),localStorage.removeItem("adminUser"),t.showToast("Logout","Você foi desconectado.","info"),ui.push("/admin/login")}catch(e){console.error("Erro ao fazer logout:",e),this.error="Erro ao fazer logout.",t.showToast("Erro de Logout","Não foi possível desconectar.","error")}finally{this.loading=!1}},async initializeAuth(){const t=localStorage.getItem("adminAuthToken");if(t){this.authToken=t;try{await Ch(En,t),await this._updateUserInfoFromFirebase(En.currentUser),console.log("Auth Store: Inicializado com token e user do localStorage. isAdmin:",this.user.isAdmin)}catch(e){console.error("Erro ao re-autenticar com custom token:",e),this.authToken=null,this.user=null,localStorage.removeItem("adminAuthToken"),localStorage.removeItem("adminUser")}}else this.authToken=null,this.user=null,localStorage.removeItem("adminAuthToken"),localStorage.removeItem("adminUser"),console.log("Auth Store: Nenhum token/user no localStorage ou inconsistente. Limpando.")}}}),GF={class:"space-y-3 h-full flex flex-col justify-between"},YF={class:"flex-1 space-y-3 p-4"},QF={key:0,class:"absolute left-full ml-3 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-xl opacity-0 group-hover:opacity-100 transition-all duration-200 pointer-events-none whitespace-nowrap z-[9999] transform translate-x-2 group-hover:-translate-x-2"},XF={key:0,class:"absolute left-full ml-3 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-xl opacity-0 group-hover:opacity-100 transition-all duration-200 pointer-events-none whitespace-nowrap z-[9999] transform translate-x-2 group-hover:-translate-x-2"},JF={key:0,class:"absolute left-full ml-3 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-xl opacity-0 group-hover:opacity-100 transition-all duration-200 pointer-events-none whitespace-nowrap z-[9999] transform translate-x-2 group-hover:-translate-x-2"},ZF={key:0,class:"absolute left-full ml-3 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-xl opacity-0 group-hover:opacity-100 transition-all duration-200 pointer-events-none whitespace-nowrap z-[9999] transform translate-x-2 group-hover:-translate-x-2"},e9={key:0,class:"absolute left-full ml-3 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-xl opacity-0 group-hover:opacity-100 transition-all duration-200 pointer-events-none whitespace-nowrap z-[9999] transform translate-x-2 group-hover:-translate-x-2"},t9={key:0,class:"absolute left-full ml-3 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-xl opacity-0 group-hover:opacity-100 transition-all duration-200 pointer-events-none whitespace-nowrap z-[9999] transform translate-x-2 group-hover:-translate-x-2"},n9={key:0,class:"absolute left-full ml-3 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-xl opacity-0 group-hover:opacity-100 transition-all duration-200 pointer-events-none whitespace-nowrap z-[9999] transform translate-x-2 group-hover:-translate-x-2"},s9={key:0,class:"absolute left-full ml-3 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-xl opacity-0 group-hover:opacity-100 transition-all duration-200 pointer-events-none whitespace-nowrap z-[9999] transform translate-x-2 group-hover:-translate-x-2"},r9={key:0,class:"absolute top-1 left-full ml-3 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-xl opacity-0 group-hover:opacity-100 transition-all duration-300 pointer-events-none whitespace-nowrap z-[9999] transform translate-x-2 group-hover:-translate-x-2"},i9={key:0,class:"fixed inset-0 bg-gray-800 p-6 z-50 md:hidden flex flex-col w-64 shadow-lg translate-x-0 transition-transform duration-300 ease-in-out"},o9={class:"space-y-3 flex-grow"},a9={__name:"Sidebar",props:{mobileMenuOpen:{type:Boolean,default:!1},shortMenu:{type:Boolean,default:!1}},emits:["toggle-mobile-menu","toggle-short-menu"],setup(t,{emit:e}){const n=e,s=()=>{n("toggle-mobile-menu")},r=()=>{n("toggle-short-menu")};return(i,o)=>{const a=gl("RouterLink");return R(),N(pe,null,[f("nav",{class:re([t.shortMenu?"w-20":"w-52","hidden md:block bg-gray-800 dark:bg-gray-800 rounded-lg ml-2 shadow-lg fixed left-0 top-2 bottom-4 h-[calc(100vh-1rem)] transition-all duration-300 z-50"])},[f("div",GF,[o[17]||(o[17]=f("div",{class:"flex items-center justify-center bg-gray-900 text-gray-200 p-2 rounded-t-md"},"PN",-1)),f("div",YF,[ue(a,{to:"/admin","active-class":"active__class",class:"active__class__hover flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-400 hover:bg-gray-900 hover:text-orange-200 dark:hover:bg-gray-700 transition-colors duration-300 relative group"},{default:_e(()=>[o[1]||(o[1]=f("div",{class:"w-5 h-5 flex items-center"},[f("i",{class:"fa-duotone fa-chart-line fa-fw"})],-1)),f("span",{class:re(["overflow-hidden transition-all duration-300",t.shortMenu?"opacity-0 w-0":"ml-3 opacity-100"])},"Dashboard",2),t.shortMenu?(R(),N("div",QF,o[0]||(o[0]=[G(" Dashboard "),f("div",{class:"absolute top-1/2 left-[2px] transform -translate-x-2 -translate-y-1/2 w-0 h-0 border-t-[6px] border-b-[6px] border-r-[6px] border-transparent border-r-gray-900"},null,-1)]))):ne("",!0)]),_:1,__:[1]}),ue(a,{to:"/admin/orders","active-class":"active__class",class:"active__class__hover flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-400 hover:bg-gray-900 hover:text-orange-200 dark:hover:bg-gray-700 transition-colors duration-300 relative group"},{default:_e(()=>[o[3]||(o[3]=f("div",{class:"flex items-center w-6 h-6"},[f("i",{class:"fa-duotone fa-book fa-fw","aria-hidden":"true"})],-1)),f("span",{class:re(["ml-3 overflow-hidden transition-all duration-300",t.shortMenu?"opacity-0 w-0 hidden":"opacity-100"])},"Pedidos",2),t.shortMenu?(R(),N("div",XF,o[2]||(o[2]=[G(" Pedidos "),f("div",{class:"absolute top-1/2 left-[2px] transform -translate-x-2 -translate-y-1/2 w-0 h-0 border-t-[6px] border-b-[6px] border-r-[6px] border-transparent border-r-gray-900"},null,-1)]))):ne("",!0)]),_:1,__:[3]}),ue(a,{to:"/admin/products","active-class":"active__class",class:"active__class__hover flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-400 hover:bg-gray-700 dark:hover:bg-gray-700 transition-colors duration-200 relative group"},{default:_e(()=>[o[5]||(o[5]=f("div",{class:"w-6 h-6 flex items-center"},[f("i",{class:"fa-duotone fa-box-open fa-fw","aria-hidden":"true"})],-1)),f("span",{class:re(["ml-3 overflow-hidden transition-all duration-300",t.shortMenu?"opacity-0 w-0":"opacity-100"])},"Produtos",2),t.shortMenu?(R(),N("div",JF,o[4]||(o[4]=[G(" Produtos "),f("div",{class:"absolute top-1/2 left-[2px] transform -translate-x-2 -translate-y-1/2 w-0 h-0 border-t-[6px] border-b-[6px] border-r-[6px] border-transparent border-r-gray-900"},null,-1)]))):ne("",!0)]),_:1,__:[5]}),ue(a,{to:"/admin/categories","active-class":"active__class",class:"active__class__hover flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-400 hover:bg-gray-700 dark:hover:bg-gray-700 transition-colors duration-200 relative group"},{default:_e(()=>[o[7]||(o[7]=f("div",{class:"w-6 h-6 flex items-center"},[f("i",{class:"fa-duotone fa-tags fa-fw","aria-hidden":"true"})],-1)),f("span",{class:re(["ml-3 overflow-hidden transition-all duration-300",t.shortMenu?"opacity-0 w-0":"opacity-100"])},"Categorias",2),t.shortMenu?(R(),N("div",ZF,o[6]||(o[6]=[G(" Categorias "),f("div",{class:"absolute top-1/2 left-[2px] transform -translate-x-2 -translate-y-1/2 w-0 h-0 border-t-[6px] border-b-[6px] border-r-[6px] border-transparent border-r-gray-900"},null,-1)]))):ne("",!0)]),_:1,__:[7]}),ue(a,{to:"/admin/whatsapp-qr","active-class":"active__class",class:"active__class__hover flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-400 hover:bg-gray-700 dark:hover:bg-gray-700 transition-colors duration-200 relative group"},{default:_e(()=>[o[9]||(o[9]=f("div",{class:"w-6 h-6 flex items-center"},[f("i",{class:"fab fa-whatsapp fa-fw","aria-hidden":"true"})],-1)),f("span",{class:re(["ml-3 overflow-hidden transition-all duration-300",t.shortMenu?"opacity-0 w-0":"opacity-100"])},"Whatsapp",2),t.shortMenu?(R(),N("div",e9,o[8]||(o[8]=[G(" Conectar WhatsApp "),f("div",{class:"absolute top-1/2 left-[2px] transform -translate-x-2 -translate-y-1/2 w-0 h-0 border-t-[6px] border-b-[6px] border-r-[6px] border-transparent border-r-gray-900"},null,-1)]))):ne("",!0)]),_:1,__:[9]}),ue(a,{to:"/admin/settings","active-class":"active__class",class:"active__class__hover flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-400 hover:bg-gray-700 dark:hover:bg-gray-700 transition-colors duration-200 relative group"},{default:_e(()=>[o[11]||(o[11]=f("div",{class:"w-6 h-6 flex items-center"},[f("i",{class:"fa-duotone fa-tools fa-fw","aria-hidden":"true"})],-1)),f("span",{class:re(["ml-3 overflow-hidden transition-all duration-300",t.shortMenu?"opacity-0 w-0":"opacity-100"])},"Configurações",2),t.shortMenu?(R(),N("div",t9,o[10]||(o[10]=[G(" Configurações "),f("div",{class:"absolute top-1/2 left-[2px] transform -translate-x-2 -translate-y-1/2 w-0 h-0 border-t-[6px] border-b-[6px] border-r-[6px] border-transparent border-r-gray-900"},null,-1)]))):ne("",!0)]),_:1,__:[11]}),ue(a,{to:"/admin/manage-users","active-class":"active__class",class:"active__class__hover flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-400 hover:bg-gray-700 dark:hover:bg-gray-700 transition-colors duration-200 relative group"},{default:_e(()=>[o[13]||(o[13]=f("div",{class:"w-6 h-6 flex items-center"},[f("i",{class:"fa-duotone fa-users-gear fa-fw","aria-hidden":"true"})],-1)),f("span",{class:re(["ml-3 overflow-hidden transition-all duration-300",t.shortMenu?"opacity-0 w-0":"opacity-100"])},"Usuários",2),t.shortMenu?(R(),N("div",n9,o[12]||(o[12]=[G(" Gerenciamento de Usuários "),f("div",{class:"absolute top-1/2 left-[2px] transform -translate-x-2 -translate-y-1/2 w-0 h-0 border-t-[6px] border-b-[6px] border-r-[6px] border-transparent border-r-gray-900"},null,-1)]))):ne("",!0)]),_:1,__:[13]}),ue(a,{to:"/admin/reports","active-class":"active__class",class:"active__class__hover flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-400 hover:bg-gray-900 hover:text-orange-200 dark:hover:bg-gray-700 transition-colors duration-300 relative group"},{default:_e(()=>[o[15]||(o[15]=f("div",{class:"flex items-center w-6 h-6"},[f("i",{class:"fa-duotone fa-chart-pie fa-fw","aria-hidden":"true"})],-1)),f("span",{class:re(["ml-3 overflow-hidden transition-all duration-300",t.shortMenu?"opacity-0 w-0 hidden":"opacity-100"])},"Relatórios",2),t.shortMenu?(R(),N("div",s9,o[14]||(o[14]=[G(" Relatórios de Vendas "),f("div",{class:"absolute top-1/2 left-[2px] transform -translate-x-2 -translate-y-1/2 w-0 h-0 border-t-[6px] border-b-[6px] border-r-[6px] border-transparent border-r-gray-900"},null,-1)]))):ne("",!0)]),_:1,__:[15]})]),f("div",{class:"p-3 hidden md:flex text-gray-300 relative cursor-pointer hover:text-white transition-colors group bg-sky-600 hover:bg-sky-700 rounded-b-md h-12 space-x-2 justify-center items-center",onClick:r},[f("i",{class:re([t.shortMenu?"fa-light fa-circle-arrow-right":"fa-light fa-circle-arrow-left","fa-fw"]),"aria-hidden":"true"},null,2),f("span",{class:re(["grow text-ellipsis line-clamp-1 pr-1",t.shortMenu?"hidden":""])},"Recolher menu",2),t.shortMenu?(R(),N("div",r9,[G(U(t.shortMenu?"Expandir menu":"Contrair menu")+" ",1),o[16]||(o[16]=f("div",{class:"absolute top-1/2 left-[2px] transform -translate-x-2 -translate-y-1/2 w-0 h-0 border-t-[6px] border-b-[6px] border-r-[6px] border-transparent border-r-gray-900"},null,-1))])):ne("",!0)])])],2),ue(bo,{name:"slide"},{default:_e(()=>[t.mobileMenuOpen?(R(),N("aside",i9,[f("div",{class:"flex justify-end mb-6"},[f("button",{onClick:s,class:"text-gray-500 dark:text-white text-3xl"}," × ")]),f("nav",o9,[ue(a,{onClick:s,to:"/admin","active-class":"bg-gray-700 text-white",class:"flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-300 hover:bg-blue-50 dark:hover:bg-gray-700 transition-colors duration-200"},{default:_e(()=>o[18]||(o[18]=[f("i",{class:"fa-duotone fa-chart-line mr-3 text-lg"},null,-1),G(" Dashboard ")])),_:1,__:[18]}),ue(a,{onClick:s,to:"/admin/orders","active-class":"bg-gray-700 text-white",class:"flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-300 hover:bg-blue-50 dark:hover:bg-gray-700 transition-colors duration-200"},{default:_e(()=>o[19]||(o[19]=[f("i",{class:"fa-duotone fa-receipt mr-3 text-lg"},null,-1),G(" Pedidos ")])),_:1,__:[19]}),ue(a,{onClick:s,to:"/admin/products","active-class":"bg-gray-700 text-white",class:"flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-300 hover:bg-blue-50 dark:hover:bg-gray-700 transition-colors duration-200"},{default:_e(()=>o[20]||(o[20]=[f("i",{class:"fa-duotone fa-box-open mr-3 text-lg"},null,-1),G(" Produtos ")])),_:1,__:[20]}),ue(a,{onClick:s,to:"/admin/categories","active-class":"bg-gray-700 text-white",class:"flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-300 hover:bg-blue-50 dark:hover:bg-gray-700 transition-colors duration-200"},{default:_e(()=>o[21]||(o[21]=[f("i",{class:"fa-duotone fa-tags mr-3 text-lg"},null,-1),G(" Categorias ")])),_:1,__:[21]}),ue(a,{onClick:s,to:"/admin/whatsapp-qr","active-class":"bg-gray-700 text-white",class:"flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-300 hover:bg-blue-50 dark:hover:bg-gray-700 transition-colors duration-200"},{default:_e(()=>o[22]||(o[22]=[f("i",{class:"fab fa-whatsapp mr-3 text-lg"},null,-1),G(" WhatsApp QR ")])),_:1,__:[22]}),ue(a,{onClick:s,to:"/admin/settings","active-class":"bg-gray-700 text-white",class:"flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-300 hover:bg-blue-50 dark:hover:bg-gray-700 transition-colors duration-200"},{default:_e(()=>o[23]||(o[23]=[f("i",{class:"fa-duotone fa-tools mr-3 text-lg"},null,-1),G(" Configurações ")])),_:1,__:[23]}),ue(Vc,{class:"border-b-gray-900/30"}),ue(a,{onClick:s,to:"/admin/manage-users","active-class":"bg-gray-700 text-white",class:"flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-300 hover:bg-blue-50 dark:hover:bg-gray-700 transition-colors duration-200"},{default:_e(()=>o[24]||(o[24]=[f("i",{class:"fa-duotone fa-users-gear mr-3 text-lg"},null,-1),G(" Gerenciar Usuários ")])),_:1,__:[24]}),ue(a,{onClick:s,to:"/admin/reports","active-class":"bg-gray-700 text-white",class:"flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-300 hover:bg-blue-50 dark:hover:bg-gray-700 transition-colors duration-200"},{default:_e(()=>o[25]||(o[25]=[f("i",{class:"fa-duotone fa-chart-pie mr-3 text-lg"},null,-1),G(" Relatórios ")])),_:1,__:[25]})])])):ne("",!0)]),_:1})],64)}}},l9=Wt(a9,[["__scopeId","data-v-69e4273e"]]),c9={class:"grid min-h-full bg-gray-200 dark:bg-gray-900 relative"},u9={class:"flex space-x-6"},d9={class:"flex items-center space-x-4 py-4 group relative"},h9={key:0,class:"text-gray-700 dark:text-gray-300 sm:block"},f9={class:"text-xs"},p9={__name:"AdminLayout",setup(t){const e=Rd(),n=z(!1),s=z(!1),r=z(!1),i=()=>{const h=localStorage.getItem("adminSidebarShortMenu");h!==null&&(r.value=JSON.parse(h))},o=h=>{localStorage.setItem("adminSidebarShortMenu",JSON.stringify(h))},a=()=>{s.value=!s.value},l=()=>{n.value=!n.value},c=()=>{r.value=!r.value,o(r.value)},u=()=>{n.value=!1};return Pt(r,h=>{o(h)}),pt(()=>{e.initializeAuth(),i()}),(h,p)=>{var g;return R(),N("div",null,[f("div",c9,[f("header",{class:re(["fixed top-0 lg:top-0.5 left-0 right-0 lg:right-2 z-50 bg-gray-100/30 backdrop-blur-xs dark:bg-gray-800/50 shadow pr-6 pl-4 md:pl-0 flex items-center justify-between h-14 rounded-2xl transform-all duration-300",r.value?"lg:left-25":"lg:left-56"])},[f("div",{class:"flex items-center"},[f("button",{onClick:l,class:"md:hidden text-gray-700 dark:text-white text-2xl mr-4"},p[2]||(p[2]=[f("i",{class:"fa-duotone fa-solid fa-bars-sort"},null,-1)])),p[3]||(p[3]=f("h1",{class:"text-md font-bold p-4 hidden md:flex transition-all duration-300 dark:text-gray-200"},[f("span",null,"Painel Admin")],-1))]),f("div",u9,[p[7]||(p[7]=Jc('<div class="flex items-center space-x-8" data-v-646a505a><button class="text-gray-700 dark:text-white text-2xl cursor-pointer relative group" data-v-646a505a><span class="absolute top-0 -right-2 bg-orange-600 text-white text-xs rounded-full px-1 z-10" data-v-646a505a>3</span><i class="fa-duotone fa-bell" data-v-646a505a></i><div class="rounded-md text-xs z-20 px-2 py-1 bg-white dark:bg-gray-700 absolute -bottom-5 -left-1/2 shadow-md group-hover:flex hidden group-hover:translate-y-2 animate__animated animate__fadeIn" data-v-646a505a> Notificações </div></button><button class="text-gray-700 dark:text-white text-2xl cursor-pointer relative group" data-v-646a505a><span class="absolute top-0 -right-2 bg-yellow-600 text-white text-xs rounded-full px-1 z-10" data-v-646a505a>3</span><i class="fa-duotone fa-envelope" data-v-646a505a></i><div class="rounded-md text-xs z-20 px-2 py-1 bg-white dark:bg-gray-700 absolute -bottom-5 -left-1/2 shadow-md group-hover:flex hidden group-hover:translate-y-2 animate__animated animate__fadeIn" data-v-646a505a> Mensagens </div></button><button class="text-gray-700 dark:text-white text-2xl cursor-pointer relative group" data-v-646a505a><i class="fa-duotone fa-cogs" data-v-646a505a></i><div class="rounded-md text-xs z-20 px-2 py-1 bg-white dark:bg-gray-700 absolute -bottom-5 -left-1/2 shadow-md group-hover:flex hidden group-hover:translate-y-2 animate__animated animate__fadeIn" data-v-646a505a> Configurações </div></button></div>',1)),f("div",d9,[(g=be(e).user)!=null&&g.email?(R(),N("div",h9,[f("div",{onClick:a,class:"flex items-center cursor-pointer"},[p[4]||(p[4]=f("i",{class:"fa-duotone fa-user-circle mr-2 text-2xl dark:text-white"},null,-1)),f("span",f9,U(be(e).user.displayName),1)]),f("ul",{class:re(["w-auto flex-col space-y-4 text-sm dark:text-gray-200 bg-gray-100 dark:bg-gray-800 absolute p-2 rounded-md shadow-lg top-8 -z-50 -right-1 opacity-0 -translate-y-full group-hover:flex group-hover:translate-y-5 group-hover:opacity-100 transition-all duration-200 border border-gray-200 dark:border-gray-800",[{"opacity-100 translate-y-5":s.value}]])},[p[6]||(p[6]=Jc('<li class="flex items-center space-x-2 p-2 whitespace-nowrap cursor-pointer hover:bg-gray-200/90 dark:hover:bg-gray-400" data-v-646a505a><i class="fa-duotone fa-user" data-v-646a505a></i><span class="text-gray-600" data-v-646a505a>Perfil</span></li><li class="flex items-center space-x-2 p-2 whitespace-nowrap cursor-pointer hover:bg-gray-200/90 dark:hover:bg-gray-400" data-v-646a505a><i class="fa-duotone fa-cog" data-v-646a505a></i><span class="text-gray-600" data-v-646a505a>Configurações</span></li><li class="flex items-center space-x-2 p-2 whitespace-nowrap cursor-pointer hover:bg-gray-200/90 dark:hover:bg-gray-400" data-v-646a505a><i class="fa-duotone fa-lock" data-v-646a505a></i><span class="text-gray-600" data-v-646a505a>Segurança</span></li>',3)),f("li",{onClick:p[0]||(p[0]=y=>be(e).logout()),class:"flex items-center space-x-2 p-2 whitespace-nowrap cursor-pointer text-red-600 hover:bg-gray-200/90 dark:hover:bg-gray-400"},p[5]||(p[5]=[f("i",{class:"fa-duotone fa-solid fa-right-from-bracket"},null,-1),f("span",null,"Sair",-1)]))],2)])):ne("",!0)])])],2),ue(l9,{"mobile-menu-open":n.value,"short-menu":r.value,onToggleMobileMenu:l,onToggleShortMenu:c},null,8,["mobile-menu-open","short-menu"]),f("main",{class:re(["flex-1 mt-14 p-4 transition-all duration-300",r.value?"md:ml-22":"md:ml-52"]),onClick:p[1]||(p[1]=y=>s.value=!1)},[f("div",{class:re(["transition-transform duration-300 ease-in-out",{"translate-x-0":!n.value,"translate-x-52 original-transform":n.value}]),onClick:os(u,["stop"])},[vp(h.$slots,"default",{},void 0,!0)],2)],2)])])}}},Lr=Wt(p9,[["__scopeId","data-v-646a505a"]]),g9={class:"space-y-8 p-4 md:p-8 bg-white dark:bg-gray-900 rounded-lg shadow-xl"},m9={key:0,class:"text-center py-12"},y9={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 text-gray-700 dark:text-white"},v9={class:"dark:bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700/20 hover:scale-110 transition-all duration-300"},_9={class:"space-y-2"},b9={class:"text-lg"},x9={class:"text-green-400 text-lg"},w9={class:"text-yellow-400 text-lg"},E9={class:"text-lg"},T9={class:"dark:bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700/20 hover:scale-110 transition-all duration-300"},k9={class:"space-y-2"},I9={class:"text-lg"},S9={class:"text-lg"},A9={class:"list-disc list-inside ml-4"},C9={key:0,class:"text-sm italic"},P9={class:"dark:bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700/20 hover:scale-110 transition-all duration-300"},R9={class:"space-y-2"},O9={class:"text-lg"},D9={class:"text-lg"},M9={class:"list-disc list-inside ml-4"},N9={key:0,class:"text-sm italic"},L9={class:"dark:bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700/20 hover:scale-110 transition-all duration-300"},V9={class:"space-y-2"},$9={class:"text-lg"},F9={class:"text-lg"},U9={class:"text-lg"},B9={class:"dark:bg-gray-800 p-6 rounded-lg shadow-lg border border-gray-700/20 hover:scale-110 transition-all duration-300"},j9={class:"space-y-2"},z9={class:"text-lg"},H9={class:"text-lg"},q9={class:"text-lg"},W9={__name:"AdminDashboard",setup(t){const e=z(!0),n=z({totalOrders:0,completedOrders:0,pendingOrders:0,totalRevenue:0,totalProducts:0,totalCategories:0,topSellingProducts:[],totalClients:0,totalOrders:0,newClientsLast30Days:0,mostActiveClients:[],deliveryOrders:0,pickupOrders:0,averageDeliveryFee:0,pixPayments:0,cardPayments:0,cashPayments:0});async function s(){var r;e.value=!0;try{const i=n.value;return n.value={completedOrders:i.data.completedOrders||980,pendingOrders:i.data.pendingOrders||150,totalRevenue:i.data.totalRevenue||75000.5,totalProducts:i.data.totalProducts||55,totalCategories:i.data.totalCategories||12,topSellingProducts:i.data.topSellingProducts||[{name:"Pizza de Calabresa",sales:120},{name:"Coca-Cola 2L",sales:90},{name:"Pizza de Chocolate",sales:75}],totalClients:i.data.totalClients||800,totalOrders:i.data.totalOrders||1234,newClientsLast30Days:i.data.newClientsLast30Days||45,mostActiveClients:i.data.mostActiveClients||[{name:"Ana Souza",orders:15},{name:"Carlos Lima",orders:12}],deliveryOrders:i.data.deliveryOrders||850,pickupOrders:i.data.pickupOrders||384,averageDeliveryFee:i.data.averageDeliveryFee||7.5,pixPayments:i.data.pixPayments||3e4,cardPayments:i.data.cardPayments||4e4,cashPayments:i.data.cashPayments||5000.5},console.log("Dados do dashboard carregados:",n.value),n.value}catch(i){console.error("Erro ao carregar dados do dashboard:",((r=i.response)==null?void 0:r.data)||i.message)}finally{e.value=!1}}return pt(()=>{s()}),(r,i)=>(R(),qe(Lr,null,{default:_e(()=>[f("div",g9,[i[36]||(i[36]=f("div",{class:"text-gray-700 dark:text-white flex flex-col items-start space-y-0"},[f("span",{class:"text-2xl font-bold"},"Dashboard Administrativo"),f("small",{class:"text-gray-500 dark:text-gray-400 text-xs"},"Visão geral e estatísticas da sua plataforma.")],-1)),e.value?(R(),N("div",m9,i[0]||(i[0]=[f("div",{class:"animate-spin rounded-full h-16 w-16 border-b-2 border-gray-400 mx-auto"},null,-1),f("p",{class:"text-gray-400 mt-4 text-lg"},"Carregando dados do dashboard...",-1)]))):(R(),N("div",y9,[f("div",v9,[i[9]||(i[9]=f("div",{class:"flex items-center justify-between mb-4"},[f("h3",{class:"text-xl font-semibold"},"Visão Geral de Pedidos"),f("i",{class:"fa-duotone fa-receipt text-blue-400 text-3xl"})],-1)),f("div",_9,[f("p",null,[i[1]||(i[1]=f("strong",null,"Total de Pedidos:",-1)),i[2]||(i[2]=G()),f("span",b9,U(n.value.totalOrders),1)]),f("p",null,[i[3]||(i[3]=f("strong",null,"Pedidos Finalizados:",-1)),i[4]||(i[4]=G()),f("span",x9,U(n.value.completedOrders),1)]),f("p",null,[i[5]||(i[5]=f("strong",null,"Pedidos Pendentes:",-1)),i[6]||(i[6]=G()),f("span",w9,U(n.value.pendingOrders),1)]),f("p",null,[i[7]||(i[7]=f("strong",null,"Receita Total:",-1)),i[8]||(i[8]=G()),f("span",E9,U(r.$formatPrice(n.value.totalRevenue)),1)])])]),f("div",T9,[i[15]||(i[15]=f("div",{class:"flex items-center justify-between mb-4"},[f("h3",{class:"text-xl font-semibold"},"Resumo de Produtos"),f("i",{class:"fa-duotone fa-box-open text-orange-600 text-3xl"})],-1)),f("div",k9,[f("p",null,[i[10]||(i[10]=f("strong",null,"Total de Produtos:",-1)),i[11]||(i[11]=G()),f("span",I9,U(n.value.totalProducts),1)]),f("p",null,[i[12]||(i[12]=f("strong",null,"Total de Categorias:",-1)),i[13]||(i[13]=G()),f("span",S9,U(n.value.totalCategories),1)]),i[14]||(i[14]=f("p",null,[f("strong",null,"Produtos Mais Vendidos:")],-1)),f("ul",A9,[(R(!0),N(pe,null,Ce(n.value.topSellingProducts,(o,a)=>(R(),N("li",{key:a,class:"text-sm"},U(o.name)+" ("+U(o.sales)+" vendas) ",1))),128)),n.value.topSellingProducts.length===0?(R(),N("li",C9,"Nenhum produto mais vendido.")):ne("",!0)])])]),f("div",P9,[i[21]||(i[21]=f("div",{class:"flex items-center justify-between mb-4"},[f("h3",{class:"text-xl font-semibold"},"Resumo de Clientes"),f("i",{class:"fa-duotone fa-users text-pink-400 text-3xl"})],-1)),f("div",R9,[f("p",null,[i[16]||(i[16]=f("strong",null,"Total de Clientes:",-1)),i[17]||(i[17]=G()),f("span",O9,U(n.value.totalClients),1)]),f("p",null,[i[18]||(i[18]=f("strong",null,"Novos Clientes (Últimos 30 dias):",-1)),i[19]||(i[19]=G()),f("span",D9,U(n.value.newClientsLast30Days),1)]),i[20]||(i[20]=f("p",null,[f("strong",null,"Clientes Mais Ativos:")],-1)),f("ul",M9,[(R(!0),N(pe,null,Ce(n.value.mostActiveClients,(o,a)=>(R(),N("li",{key:a,class:"text-sm"},U(o.name)+" ("+U(o.orders)+" pedidos) ",1))),128)),n.value.mostActiveClients.length===0?(R(),N("li",N9,"Nenhum cliente ativo.")):ne("",!0)])])]),f("div",L9,[i[28]||(i[28]=f("div",{class:"flex items-center justify-between mb-4"},[f("h3",{class:"text-xl font-semibold"},"Estatísticas de Entrega"),f("i",{class:"fa-duotone fa-truck text-orange-400 text-3xl"})],-1)),f("div",V9,[f("p",null,[i[22]||(i[22]=f("strong",null,"Pedidos para Delivery:",-1)),i[23]||(i[23]=G()),f("span",$9,U(n.value.deliveryOrders),1)]),f("p",null,[i[24]||(i[24]=f("strong",null,"Pedidos para Retirada:",-1)),i[25]||(i[25]=G()),f("span",F9,U(n.value.pickupOrders),1)]),f("p",null,[i[26]||(i[26]=f("strong",null,"Taxa Média de Entrega:",-1)),i[27]||(i[27]=G()),f("span",U9,U(r.$formatPrice(n.value.averageDeliveryFee)),1)])])]),f("div",B9,[i[35]||(i[35]=f("div",{class:"flex items-center justify-between mb-4"},[f("h3",{class:"text-xl font-semibold"},"Resumo de Pagamentos"),f("i",{class:"fa-duotone fa-credit-card text-teal-400 text-3xl"})],-1)),f("div",j9,[f("p",null,[i[29]||(i[29]=f("strong",null,"Pagamentos Pix:",-1)),i[30]||(i[30]=G()),f("span",z9,U(r.$formatPrice(n.value.pixPayments)),1)]),f("p",null,[i[31]||(i[31]=f("strong",null,"Pagamentos Cartão:",-1)),i[32]||(i[32]=G()),f("span",H9,U(r.$formatPrice(n.value.cardPayments)),1)]),f("p",null,[i[33]||(i[33]=f("strong",null,"Pagamentos Dinheiro:",-1)),i[34]||(i[34]=G()),f("span",q9,U(r.$formatPrice(n.value.cashPayments)),1)])])])]))])]),_:1}))}},K9={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg w-auto max-h-[95vh] overflow-y-auto p-6 relative custom-scrollbar",role:"dialog","aria-modal":"true"},G9={__name:"BaseModal",props:{open:{type:Boolean,default:!1}},emits:["update:open"],setup(t,{emit:e}){const n=e;function s(){n("update:open",!1)}return(r,i)=>t.open?(R(),N("div",{key:0,class:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50 p-4 dark:bg-gray-900/40 m-auto text-gray-900 dark:text-white",onClick:os(s,["self"])},[ue(bo,{name:"custom-classes",appear:"","enter-active-class":"animate__animated animate__zoomIn animate__faster","leave-active-class":"animate__animated animate__bounceOutRight animate__faster"},{default:_e(()=>[Ie(f("div",K9,[vp(r.$slots,"default",{},void 0,!0)],512),[[oA,t.open]])]),_:3})])):ne("",!0)}},xi=Wt(G9,[["__scopeId","data-v-ec6dc83f"]]),Y9={class:"space-y-4 p-4 bg-white dark:bg-gray-800 rounded-lg shadow-xl"},Q9={class:"flex items-center justify-between"},X9={class:"text-2xl font-bold text-gray-700 dark:text-white"},J9={class:"inline-flex items-center ml-2"},Z9={class:"text-right"},eU={class:"text-sm text-gray-600 dark:text-gray-400"},tU={class:"font-semibold"},nU={class:"text-xs text-gray-500 dark:text-gray-500"},sU={key:0,class:"text-center py-8"},rU={key:1,class:"text-center py-8"},iU={key:2,class:"flex flex-col lg:flex-row gap-4"},oU={class:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-4 gap-x-4 flex-grow"},aU={class:"bg-green-700/10 rounded-lg"},lU={class:"p-2 text-white mb-4 border-b border-green-900/30 rounded-t-md bg-green-700 bg-linear from-green-800 via-green-700 to-green-500"},cU={class:"ml-2 px-2 py-1 text-xs rounded-full bg-green-200 text-green-800 dark:bg-green-800 dark:text-green-200"},uU={class:"space-y-4 max-h-[calc(100vh-250px)] overflow-y-auto pr-2"},dU=["onClick"],hU={class:"flex-shrink-0 space-y-1 text-xs"},fU={class:"font-semibold"},pU={class:"font-light"},gU={class:"font-light"},mU={class:"flex items-center justify-between space-x-4"},yU={class:"font-light"},vU={class:"font-semibold hidden"},_U={class:"font-semibold"},bU={class:"font-light"},xU={key:0,class:"text-center text-gray-500 dark:text-gray-400 py-4"},wU={class:"bg-sky-700/10 rounded-lg"},EU={class:"text-white rounded-t-md mb-4 border-b p-2 border-gray-300 dark:border-gray-700 bg-sky-700 bg-linear from-sky-800 via-sky-700 to-sky-500"},TU={class:"ml-2 px-2 py-1 text-xs rounded-full bg-blue-200 text-blue-800 dark:bg-blue-800 dark:text-blue-200"},kU={class:"space-y-4 max-h-[calc(100vh-250px)] overflow-y-auto pr-2"},IU=["onClick"],SU={class:"flex-shrink-0 mr-4 space-y-1 text-xs"},AU={class:"font-semibold"},CU={class:"font-light"},PU={class:"font-semibold"},RU={class:"font-light"},OU={class:"font-semibold"},DU={class:"font-light"},MU={class:"font-semibold hidden"},NU={class:"font-semibold"},LU={class:"font-light"},VU={key:0,class:"text-center text-gray-500 dark:text-gray-400 py-4"},$U={class:"bg-purple-700/10 rounded-lg"},FU={class:"bg-purple-700 bg-linear from-purple-800 via-purple-700 to-purple-500 p-2 mb-4 rounded-t-md text-white"},UU={class:"ml-2 px-2 py-1 text-xs font-semibold rounded-full bg-purple-200 text-purple-800 dark:bg-purple-800 dark:text-purple-200"},BU={class:"space-y-4 max-h-[calc(100vh-250px)] overflow-y-auto pr-2"},jU=["onClick"],zU={class:"flex-shrink-0 mr-4 space-y-1 text-xs"},HU={class:"font-semibold"},qU={class:"font-light"},WU={class:"font-semibold"},KU={class:"font-light"},GU={class:"font-semibold"},YU={class:"font-light"},QU={class:"font-semibold hidden"},XU={class:"font-semibold"},JU={class:"font-light"},ZU={key:0,class:"text-center text-gray-500 dark:text-gray-400 py-4"},eB={class:"lg:w-52 bg-gray-200 dark:bg-gray-900 p-4 rounded-lg flex-shrink-0"},tB={class:"space-y-2"},nB={key:3,class:"mt-8"},sB={class:"text-xl font-bold text-gray-900 dark:text-white mb-4 border-b pb-2 border-gray-300 dark:border-gray-700"},rB={class:"ml-2 px-2 py-1 text-xs font-semibold rounded-full bg-gray-200 text-gray-800 dark:bg-gray-900 inset-shadow-red-500 shaodw-md dark:text-gray-200"},iB={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},oB=["onClick"],aB={class:"flex-shrink-0 mr-4 space-y-1"},lB={class:"font-semibold"},cB={class:"font-light"},uB={class:"font-semibold"},dB={class:"font-light"},hB={class:"font-semibold"},fB={class:"font-light"},pB={class:"font-semibold"},gB={class:"font-semibold"},mB={class:"font-light"},yB={key:4,class:"mt-8 text-center text-gray-500 dark:text-gray-400 py-4"},vB={key:5,class:"bg-red-100 dark:bg-red-900/20 border border-red-300 dark:border-red-700 text-red-700 dark:text-red-400 px-4 py-3 rounded relative"},_B={class:"block sm:inline"},bB={class:"text-gray-900 dark:text-white relative"},xB={class:"md:text-2xl font-bold mb-4 border-b border-gray-300 dark:border-gray-900 pb-2"},wB={class:"text-orange-500 italic font-normal"},EB={class:"grid grid-cols-1 md:grid-cols-2 gap-2 md:gap-4 text-gray-700 dark:text-gray-300 text-md"},TB={class:"col-span-full"},kB={key:0},IB={key:0},SB={key:1},AB={class:"col-span-full"},CB=["value"],PB={key:0},RB={class:"text-sm space-y-1"},OB={class:"font-semibold"},DB={key:0,class:"text-xs text-gray-600 dark:text-gray-400"},MB={class:"mt-6 flex justify-end space-x-4 border-t border-gray-300 dark:border-gray-900 pt-4"},NB=["disabled"],LB={__name:"Orders",setup(t){const e=z([]),n=z(null),s=z(!1),r=z(!0),i=z(!1),o=z(""),a=z(""),l=z(!1),c=z(new Set),u=gT(Id);let h=null;const p=["recebido","em_preparo","a_caminho","entregue","cancelado","em processamento"];function g(I){return I?I&&typeof I.toDate=="function"?I.toDate().getTime():I&&typeof I._seconds<"u"?I._seconds*1e3:I instanceof Date?I.getTime():typeof I=="string"?new Date(I).getTime():typeof I=="number"?I>1e12?I:I*1e3:0:0}const y=me(()=>e.value.filter(I=>["recebido","em processamento"].includes(I.status)&&I.payment_status!=="cancelled"&&I.payment_status!=="pending").sort((I,V)=>g(V.created_at)-g(I.created_at))),v=me(()=>e.value.filter(I=>I.status==="em_preparo").sort((I,V)=>g(V.created_at)-g(I.created_at))),_=me(()=>e.value.filter(I=>I.status==="a_caminho").sort((I,V)=>g(V.created_at)-g(I.created_at))),E=me(()=>e.value.filter(I=>["entregue","cancelado"].includes(I.status)).sort((I,V)=>g(V.created_at)-g(I.created_at)));function S(I){let V=I.replace(/_/g," ");return V=V.charAt(0).toUpperCase()+V.slice(1),V}function D(I){return I&&I&&typeof I.toDate=="function"?I.toDate().toLocaleString("pt-BR"):""}const F=I=>{switch(I){case"credit_card":return"Cartão de Crédito";case"debit_card":return"Cartão de Débito";case"bank_transfer":case"pix":return"Pix";case"cash":return"Dinheiro";default:return"Outro"}},M=I=>{switch(I){case"paid":case"approved":return"Aprovado";case"pending":return"Pendente";case"failed":return"Falhou";case"refunded":return"Reembolsado";case"cancelled":return"Cancelado";default:return"Desconhecido"}},O=I=>{switch(I){case"em processamento":return"rounded-full px-2 py-0.5 text-xs font-medium bg-orange-50 text-orange-600 dark:bg-orange-500/15 dark:text-orange-500";case"recebido":return"rounded-full px-2 py-0.5 text-xs font-medium bg-yellow-50 text-yellow-600 dark:bg-yellow-500/15 dark:text-yellow-500";case"em_preparo":return"rounded-full px-2 py-0.5 text-xs font-medium bg-blue-50 text-blue-600 dark:bg-blue-500/15 dark:text-blue-500";case"finalizado":case"entregue":return"rounded-full px-2 py-0.5 text-xs font-medium bg-green-50 text-green-600 dark:bg-green-500/15 dark:text-green-500";case"a_caminho":return"rounded-full px-2 py-0.5 text-xs font-medium bg-purple-50 text-purple-600 dark:bg-purple-500/15 dark:text-purple-500";case"cancelado":return"rounded-full px-2 py-0.5 text-xs font-medium bg-red-50 text-red-600 dark:bg-red-500/15 dark:text-red-500";default:return"rounded-full px-2 py-0.5 text-xs font-medium bg-gray-50 text-gray-600 dark:bg-gray-500/15 dark:text-gray-500"}};function T(I){if(!I){console.warn("Tentativa de visualizar pedido nulo");return}if(!I.id){console.warn("Pedido sem ID:",I),o.value="Erro: Pedido sem ID válido";return}console.log("Visualizando pedido:",I.id),n.value=JSON.parse(JSON.stringify(I)),s.value=!0,c.value.has(I.id)&&c.value.delete(I.id)}function b(){n.value=null,s.value=!1,l.value=!1,o.value.includes("Erro ao atualizar pedido")&&(o.value="")}async function w(){if(!n.value){console.warn("Nenhum pedido selecionado");return}if(!n.value.id){console.warn("ID do pedido não encontrado"),o.value="Erro: ID do pedido não encontrado";return}if(!n.value.status){console.warn("Status do pedido não definido"),o.value="Erro: Status do pedido não definido";return}try{l.value=!0,o.value="";const I=n.value.id,V=n.value.status;console.log(`Atualizando pedido ${I} para status: ${V}`);const Y=ZV(u,"orders",I);await m3(Y,{status:V,updated_at:new Date}),console.log("Status atualizado no Firestore com sucesso");try{await it.put(`/orders/${I}`,{status:V}),console.log("Status atualizado na API com sucesso")}catch(de){console.warn("Erro ao atualizar via API (mas Firestore foi atualizado):",de)}b(),console.log(`Status do pedido ${I} atualizado para: ${V}`)}catch(I){console.error("Erro ao atualizar status do pedido:",I);let V="Erro desconhecido";I.code==="permission-denied"?V="Sem permissão para atualizar este pedido":I.code==="not-found"?V="Pedido não encontrado no banco de dados":I.code==="unavailable"?V="Serviço temporariamente indisponível":I.message&&(V=I.message),o.value=`Erro ao atualizar pedido: ${V}`}finally{l.value=!1}}function C(){try{const I=d3(JV(u,"orders"),h3("created_at","desc"));h=y3(I,V=>{const Y=new Set(e.value.map(de=>de.id));V.docChanges().forEach(de=>{const ee={id:de.doc.id,...de.doc.data()},we=["recebido","em processamento"].includes(ee.status)&&ee.payment_status!=="cancelled"&&ee.payment_status!=="pending";if(de.type==="added")if(!Y.has(ee.id))we&&c.value.add(ee.id),e.value.unshift(ee),we&&"Notification"in window&&Notification.permission==="granted"&&new Notification("Novo Pedido!",{body:`Pedido #${ee.id} de ${ee.client}`,icon:"/assets/image/old_nonna.png"});else{we?c.value.add(ee.id):c.value.delete(ee.id);const Ve=e.value.findIndex(ht=>ht.id===ee.id);Ve!==-1&&(e.value[Ve]={...e.value[Ve],...ee})}else if(de.type==="modified"){const Ve=e.value.findIndex(ht=>ht.id===ee.id);Ve!==-1&&(e.value[Ve]={...e.value[Ve],...ee},we?c.value.add(ee.id):c.value.delete(ee.id))}else if(de.type==="removed"){const Ve=e.value.findIndex(ht=>ht.id===ee.id);Ve!==-1&&e.value.splice(Ve,1),c.value.delete(ee.id)}}),i.value=!0,o.value="",a.value=new Date().toLocaleTimeString(),r.value=!1},V=>{console.error("Erro no listener Firestore:",V),o.value=`Erro de conexão: ${V.message}`,i.value=!1,r.value=!1,setTimeout(()=>{i.value||k()},5e3)})}catch(I){console.error("Erro ao configurar listener:",I),o.value=`Erro ao conectar: ${I.message}`,r.value=!1}}function k(){console.log("Tentando reconectar..."),o.value="",r.value=!0,h&&h(),C()}async function A(){try{const I=await it.get("/orders");e.value=Array.isArray(I.data)?I.data:[],console.log("Pedidos carregados via API como fallback")}catch(I){console.error("Erro ao carregar pedidos via API:",I)}}return pt(async()=>{console.log("Iniciando conexão em tempo real com Firestore..."),"Notification"in window&&Notification.permission==="default"&&await Notification.requestPermission(),C(),setTimeout(()=>{!i.value&&e.value.length===0&&(console.warn("Firestore não conectou, usando API como fallback"),A(),r.value=!1)},1e4)}),Ti(()=>{h&&(h(),console.log("Listener Firestore removido"))}),(I,V)=>(R(),N("div",null,[ue(Lr,null,{default:_e(()=>[f("div",Y9,[f("div",Q9,[f("div",null,[f("h2",X9,[V[2]||(V[2]=G(" Pedidos ")),f("span",J9,[f("div",{class:re([i.value?"w-2 h-2 bg-green-500 rounded-full animate-pulse":"w-2 h-2 bg-red-500 rounded-full"])},null,2),f("span",{class:re([i.value?"text-xs text-green-600 dark:text-green-400 ml-1":"text-xs text-red-600 dark:text-red-400 ml-1"])},U(i.value?"Tempo real":"Desconectado"),3)])]),V[3]||(V[3]=f("p",{class:"text-gray-600 dark:text-gray-400 text-xs font-normal italic"}," Gerencie todos os pedidos recebidos em tempo real. ",-1))]),f("div",Z9,[f("p",eU,[V[4]||(V[4]=G(" Total de pedidos: ")),f("span",tU,U(e.value.length),1)]),f("p",nU," Última atualização: "+U(a.value),1)])]),r.value?(R(),N("div",sU,V[5]||(V[5]=[f("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-400 dark:border-gray-600 mx-auto"},null,-1),f("p",{class:"text-gray-600 dark:text-gray-400 mt-4"},"Carregando pedidos...",-1)]))):e.value.length===0?(R(),N("div",rU,V[6]||(V[6]=[f("p",{class:"text-gray-600 dark:text-gray-400 text-lg"},"Nenhum pedido encontrado.",-1)]))):(R(),N("div",iU,[f("div",oU,[f("div",aU,[f("h3",lU,[V[7]||(V[7]=f("span",null,"Novos pedidos",-1)),f("span",cU,U(y.value.length),1)]),f("div",uU,[(R(!0),N(pe,null,Ce(y.value,Y=>(R(),N("div",{key:Y.id,onClick:de=>T(Y),class:re(["p-2 rounded-md border border-green-200/40 dark:border-green-700/40 bg-green-200 dark:bg-green-800 text-gray-800 dark:text-white text-sm flex items-end justify-between shadow-md cursor-pointer hover:shadow-lg transition-all duration-300",c.value.has(Y.id)?"bg-green-50 dark:bg-green-900/20":""])},[f("div",hU,[f("p",fU,[V[8]||(V[8]=G("Pedido: ")),f("span",pU,U(Y.id),1)]),f("p",null,[V[9]||(V[9]=f("i",{class:"fa-duotone fa-solid fa-user"},null,-1)),V[10]||(V[10]=G()),f("span",gU,U(Y.client),1)]),f("div",mU,[f("div",null,[V[11]||(V[11]=f("i",{class:"fa-duotone fa-solid fa-money-bill-wave mr-2"},null,-1)),f("span",yU,U(I.$formatPrice(Y.total)),1)]),f("div",null,"Pagamento: "+U(M(Y.payment_status)),1)]),f("p",vU,[V[12]||(V[12]=G("Status: ")),f("span",{class:re(["font-light",O(Y.status)])},U(S(Y.status)),3)]),f("p",_U,[V[13]||(V[13]=f("i",{class:"fa-duotone fa-solid fa-calendar-days"},null,-1)),V[14]||(V[14]=G()),f("span",bU,U(D(Y.created_at)),1)])])],10,dU))),128)),y.value.length===0?(R(),N("p",xU,"Nenhum pedido novo.")):ne("",!0)])]),f("div",wU,[f("h3",EU,[V[15]||(V[15]=G(" Em preparo ")),f("span",TU,U(v.value.length),1)]),f("div",kU,[(R(!0),N(pe,null,Ce(v.value,Y=>(R(),N("div",{key:Y.id,onClick:de=>T(Y),class:re(["p-2 rounded-md border border-gray-200/40 dark:border-gray-700/40 bg-gray-200 dark:bg-gray-800 text-gray-800 dark:text-white text-sm flex items-end justify-between shadow-md cursor-pointer hover:shadow-lg transition-all duration-300"])},[f("div",SU,[f("p",AU,[V[16]||(V[16]=G("Pedido: ")),f("span",CU,U(Y.id),1)]),f("p",PU,[V[17]||(V[17]=f("i",{class:"fa-duotone fa-solid fa-user"},null,-1)),V[18]||(V[18]=G()),f("span",RU,U(Y.client),1)]),f("p",OU,[V[19]||(V[19]=f("i",{class:"fa-duotone fa-solid fa-money-bill-wave mr-2"},null,-1)),f("span",DU,U(I.$formatPrice(Y.total)),1)]),f("p",MU,[V[20]||(V[20]=G("Status: ")),f("span",{class:re(["font-light",O(Y.status)])},U(S(Y.status)),3)]),f("p",NU,[V[21]||(V[21]=f("i",{class:"fa-duotone fa-solid fa-calendar-days"},null,-1)),V[22]||(V[22]=G()),f("span",LU,U(D(Y.created_at)),1)])])],8,IU))),128)),v.value.length===0?(R(),N("p",VU,"Nenhum pedido em preparo.")):ne("",!0)])]),f("div",$U,[f("h3",FU,[V[23]||(V[23]=G(" A caminho ")),f("span",UU,U(_.value.length),1)]),f("div",BU,[(R(!0),N(pe,null,Ce(_.value,Y=>(R(),N("div",{key:Y.id,onClick:de=>T(Y),class:re(["p-2 rounded-md border border-purple-200/40 dark:border-purple-700/40 bg-purple-200 dark:bg-purple-800 text-gray-800 dark:text-white text-sm flex items-end justify-between shadow-md cursor-pointer hover:shadow-lg transition-all duration-300"])},[f("div",zU,[f("p",HU,[V[24]||(V[24]=G("Pedido: ")),f("span",qU,U(Y.id),1)]),f("p",WU,[V[25]||(V[25]=f("i",{class:"fa-duotone fa-solid fa-user"},null,-1)),V[26]||(V[26]=G()),f("span",KU,U(Y.client),1)]),f("p",GU,[V[27]||(V[27]=f("i",{class:"fa-duotone fa-solid fa-money-bill-wave mr-2"},null,-1)),f("span",YU,U(I.$formatPrice(Y.total)),1)]),f("p",QU,[V[28]||(V[28]=G("Status: ")),f("span",{class:re(["font-light",O(Y.status)])},U(S(Y.status)),3)]),f("p",XU,[V[29]||(V[29]=f("i",{class:"fa-duotone fa-solid fa-calendar-days"},null,-1)),V[30]||(V[30]=G()),f("span",JU,U(D(Y.created_at)),1)])])],8,jU))),128)),_.value.length===0?(R(),N("p",ZU,"Nenhum pedido a caminho.")):ne("",!0)])])]),f("div",eB,[V[32]||(V[32]=f("h3",{class:"text-lg font-bold text-gray-900 dark:text-white mb-4 border-b pb-2 border-gray-300 dark:border-gray-700"}," Legenda",-1)),f("ul",tB,[f("li",null,[f("span",{class:re(O("recebido"))},"Recebido",2)]),f("li",null,[f("span",{class:re(O("em processamento"))},"Em Processamento",2)]),f("li",null,[f("span",{class:re(O("em_preparo"))},"Em Preparo",2)]),f("li",null,[f("span",{class:re(O("a_caminho"))},"A Caminho",2)]),f("li",null,[f("span",{class:re(O("entregue"))},"Entregue",2)]),f("li",null,[f("span",{class:re(O("cancelado"))},"Cancelado",2)]),V[31]||(V[31]=f("li",{class:"flex flex-col space-y-1.5"},[f("span",{class:"px-2 py-1 bg-green-500 text-green-700 text-xs rounded-full w-14"},"Novo"),f("span",{class:"dark:text-gray-400 text-xs"},'Pedido que acaba de ser marcado como "recebido" ou "em processamento" e ainda não foi visualizado.')],-1))])])])),E.value.length>0?(R(),N("div",nB,[f("h3",sB,[V[33]||(V[33]=G(" Pedidos finalizados ")),f("span",rB,U(E.value.length),1)]),f("div",iB,[(R(!0),N(pe,null,Ce(E.value,Y=>(R(),N("div",{key:Y.id,onClick:de=>T(Y),class:re(["p-2 rounded-md border border-gray-200/40 dark:border-gray-700/40 bg-gray-200 dark:bg-gray-800 text-gray-800 dark:text-white text-sm flex items-end justify-between shadow-md cursor-pointer hover:shadow-lg transition-all duration-300"])},[f("div",aB,[f("p",lB,[V[34]||(V[34]=G("Pedido: ")),f("span",cB,U(Y.id),1)]),f("p",uB,[V[35]||(V[35]=G("Cliente: ")),f("span",dB,U(Y.client),1)]),f("p",hB,[V[36]||(V[36]=G("Total: ")),f("span",fB,U(I.$formatPrice(Y.total)),1)]),f("p",pB,[V[37]||(V[37]=G("Status: ")),f("span",{class:re(["font-light",O(Y.status)])},U(S(Y.status)),3)]),f("p",gB,[V[38]||(V[38]=G("Data: ")),f("span",mB,U(D(Y.created_at)),1)])])],8,oB))),128))])])):!r.value&&e.value.length>0?(R(),N("div",yB," Nenhum pedido finalizado. ")):ne("",!0),o.value?(R(),N("div",vB,[V[39]||(V[39]=f("strong",{class:"font-bold"},"Erro de Conexão!",-1)),f("span",_B,U(o.value),1),f("button",{onClick:k,class:"ml-2 underline hover:no-underline"}," Tentar Reconectar ")])):ne("",!0)])]),_:1}),n.value?(R(),qe(xi,{key:0,open:s.value,"onUpdate:open":V[1]||(V[1]=Y=>s.value=Y)},{default:_e(()=>{var Y,de;return[f("div",bB,[f("button",{onClick:b,class:"absolute -top-5 -right-5 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white text-xl"}," × "),f("h3",xB,[V[40]||(V[40]=G(" Detalhes do Pedido ")),f("span",wB,"#"+U(n.value.id),1)]),f("div",EB,[f("div",null,[V[41]||(V[41]=f("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Cliente:",-1)),G(" "+U(n.value.client),1)]),f("div",null,[V[42]||(V[42]=f("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Telefone:",-1)),G(" "+U(n.value.telefone||n.value.phone),1)]),f("div",null,[V[43]||(V[43]=f("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Total:",-1)),G(" "+U(I.$formatPrice(n.value.total)),1)]),f("div",null,[V[44]||(V[44]=f("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Subtotal:",-1)),G(" "+U(I.$formatPrice(n.value.subtotal)),1)]),f("div",null,[V[45]||(V[45]=f("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Taxa de Entrega:",-1)),G(" "+U(I.$formatPrice(n.value.taxaEntrega||n.value.fee)),1)]),f("div",null,[V[46]||(V[46]=f("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Tipo de Entrega:",-1)),G(" "+U(n.value.tipoEntrega||n.value.delivery_type),1)]),f("div",null,[V[47]||(V[47]=f("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Método de Pagamento:",-1)),G(" "+U(F(n.value.metodoPagamento||n.value.payment_method)),1)]),f("div",null,[V[48]||(V[48]=f("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Status do Pagamento:",-1)),G(" "+U(M(n.value.payment_status)),1)]),f("div",null,[V[49]||(V[49]=f("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Data do Pedido:",-1)),G(" "+U(D(n.value.created_at)),1)]),f("div",TB,[V[50]||(V[50]=f("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Endereço:",-1)),n.value.address&&n.value.address.length>0?(R(),N("div",kB,[(R(!0),N(pe,null,Ce(n.value.address,(ee,we)=>(R(),N("p",{key:we},[G(U(ee.street)+", "+U(ee.neighborhood)+" ",1),ee.reference?(R(),N("span",IB," (Ref: "+U(ee.reference)+")",1)):ne("",!0)]))),128))])):(R(),N("div",SB,"Nenhum endereço fornecido."))]),f("div",AB,[V[51]||(V[51]=f("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Status do Pedido:",-1)),Ie(f("select",{"onUpdate:modelValue":V[0]||(V[0]=ee=>n.value.status=ee),class:"p-2 bg-gray-200 dark:bg-gray-700 border border-gray-400 dark:border-gray-600 rounded-md text-gray-800 dark:text-white focus:ring-blue-500 focus:border-blue-500 ml-2 mt-2"},[(R(),N(pe,null,Ce(p,ee=>f("option",{key:ee,value:ee},U(S(ee)),9,CB)),64))],512),[[Ns,n.value.status]])])]),n.value.itens&&n.value.itens.length?(R(),N("div",PB,[V[53]||(V[53]=f("h4",{class:"font-semibold mt-6 mb-2 text-gray-700 dark:text-gray-300 border-t border-gray-300 dark:border-gray-900 pt-4"}," Itens do Pedido: ",-1)),f("ul",RB,[(R(!0),N(pe,null,Ce(n.value.itens,(ee,we)=>(R(),N("li",{key:we,class:"text-gray-700 dark:text-gray-300"},[f("p",OB,U(ee.item.replaceAll("r$","R$")),1),ee.adicionais?(R(),N("p",DB,[V[52]||(V[52]=f("span",{class:"italic"},"Adicionais:",-1)),G(" "+U(ee.adicionais.replaceAll("r$","R$")),1)])):ne("",!0)]))),128))])])):ne("",!0),f("div",MB,[f("button",{onClick:w,disabled:l.value||!((Y=n.value)!=null&&Y.id)||!((de=n.value)!=null&&de.status),class:"px-5 py-1 bg-green-600 hover:bg-green-700 disabled:bg-green-400 disabled:cursor-not-allowed text-white text-md rounded-md transition-colors duration-200"},U(l.value?"Salvando...":"Salvar"),9,NB),f("button",{onClick:b,class:"px-5 py-1 bg-red-600 hover:bg-red-800 text-white text-md rounded-md transition-colors duration-200"}," Cancelar ")])])]}),_:1},8,["open"])):ne("",!0)]))}},VB=["onClick"],$B=["onKeydown"],FB={key:0,class:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md shadow-lg max-h-60 overflow-y-auto custom-scrollbar"},UB={class:"py-1"},BB=["onClick","onMouseenter"],jB={key:0,class:"px-4 py-2 text-gray-500 dark:text-gray-400 italic"},zB={__name:"MultiSelectCategoryInput",props:{modelValue:{type:Array,default:()=>[]},categories:{type:Array,required:!0}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,s=e,r=z(""),i=z(!1),o=z(-1),a=z(null),l=me(()=>n.categories.filter(M=>n.modelValue.includes(M.id)));me(()=>l.value.map(M=>M.name).join(" x "));const c=me(()=>{const M=r.value.toLowerCase();return n.categories.filter(O=>O.name.toLowerCase().includes(M)&&!u(O.id))});function u(M){return n.modelValue.includes(M)}function h(){i.value=!i.value,i.value&&(r.value="",o.value=-1)}function p(){i.value=!0,o.value=-1}function g(){i.value=!1,r.value=""}function y(){o.value=-1,i.value=!0}function v(M){if(!u(M)){const O=[...n.modelValue,M];s("update:modelValue",O)}r.value=""}function _(M){const O=n.modelValue.filter(T=>T!==M);s("update:modelValue",O),p()}function E(){if(c.value.length===0){o.value=-1;return}o.value=(o.value+1)%c.value.length}function S(){if(c.value.length===0){o.value=-1;return}o.value=(o.value-1+c.value.length)%c.value.length}function D(){o.value!==-1&&c.value[o.value]&&v(c.value[o.value].id)}function F(M){a.value&&!a.value.contains(M.target)&&g()}return pt(()=>{document.addEventListener("click",F)}),Ti(()=>{document.removeEventListener("click",F)}),(M,O)=>(R(),N("div",{class:"relative",ref_key:"multiSelectContainer",ref:a},[f("div",{class:"w-full p-3 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md flex items-center flex-wrap gap-2 cursor-pointer min-h-[48px]",onClick:os(h,["stop"])},[O[1]||(O[1]=f("span",{class:"text-gray-500 dark:text-gray-400"}," Selecione categorias... ",-1)),(R(!0),N(pe,null,Ce(l.value,T=>(R(),N("div",{key:T.id,class:"flex items-center bg-blue-500 text-white text-xs px-2 py-1 rounded-full"},[G(U(T.name)+" ",1),f("button",{onClick:os(b=>_(T.id),["stop"]),class:"ml-1 text-white hover:text-blue-100 focus:outline-none"}," × ",8,VB)]))),128)),Ie(f("input",{type:"text","onUpdate:modelValue":O[0]||(O[0]=T=>r.value=T),onInput:y,onFocus:p,onKeydown:[ch(os(E,["prevent"]),["down"]),ch(os(S,["prevent"]),["up"]),ch(os(D,["prevent"]),["enter"])],placeholder:"Buscar categorias...",class:"flex-grow p-0 bg-transparent border-none focus:outline-none text-gray-900 dark:text-white",style:vo({width:r.value.length?r.value.length*8+20+"px":"150px"})},null,44,$B),[[Je,r.value]])]),i.value?(R(),N("div",FB,[f("ul",UB,[(R(!0),N(pe,null,Ce(c.value,(T,b)=>(R(),N("li",{key:T.id,onClick:w=>v(T.id),onMouseenter:w=>o.value=b,class:re({"px-4 py-2 cursor-pointer hover:bg-blue-500 hover:text-white":!0,"bg-blue-500 text-white":o.value===b,"text-gray-900 dark:text-white":o.value!==b,"opacity-50 cursor-not-allowed":u(T.id)})},U(T.name),43,BB))),128)),c.value.length===0?(R(),N("li",jB," Nenhuma categoria encontrada. ")):ne("",!0)])])):ne("",!0)],512))}},HB=Wt(zB,[["__scopeId","data-v-a5c6d68f"]]),qB={class:"space-y-6 p-4 md:p-8 bg-white dark:bg-gray-900 rounded-lg shadow-xl"},WB={key:0,class:"text-center py-8"},KB={key:1,class:"text-center py-8"},GB={key:2,class:"overflow-x-auto mt-4 rounded-lg"},YB={class:"min-w-full table-auto bg-gray-100 dark:bg-gray-800"},QB={class:"text-gray-800 dark:text-gray-200 text-sm font-light"},XB={class:"py-2 px-2 text-left whitespace-nowrap hidden md:table-cell"},JB=["src","alt"],ZB={class:"py-3 text-left whitespace-nowrap"},e8={key:0,class:"text-xs text-gray-600 dark:text-gray-400 mt-1"},t8={class:"py-3 text-left whitespace-pre-line"},n8={key:0},s8={key:0},r8={key:1},i8={key:1,class:"text-red-600 dark:text-red-400"},o8={class:"py-3 text-left"},a8={class:"py-3 text-right"},l8=["onClick"],c8=["onClick"],u8={class:"flex flex-col md:flex-row justify-between items-center mt-6 text-gray-900 dark:text-white p-4 bg-gray-100 dark:bg-gray-800 rounded-lg"},d8={class:"mb-4 md:mb-0"},h8={class:"flex items-center gap-2"},f8={class:"relative"},p8=["disabled"],g8={class:"px-2"},m8=["disabled"],y8={class:""},v8={class:"text-2xl font-bold mb-4 border-b border-gray-300 dark:border-gray-700 pb-2"},_8={key:0,class:"text-center py-4"},b8={key:1,class:"space-y-4"},x8={class:"border border-gray-300 dark:border-gray-700 p-3 rounded-md"},w8=["onUpdate:modelValue"],E8=["onUpdate:modelValue"],T8=["onClick"],k8=["onUpdate:modelValue"],I8=["onUpdate:modelValue"],S8=["onClick"],A8={class:"flex justify-end mt-6 gap-3 border-t border-gray-300 dark:border-gray-700 pt-4"},C8=["disabled"],P8=["disabled"],R8={class:"text-lg mb-4"},O8={class:"text-red-600 dark:text-red-400"},D8={class:"mt-6 flex justify-end gap-3"},M8=["disabled"],N8=["disabled"],L8={__name:"Products",setup(t){const e=z([]),n=z([]),s=z(!1),r=z(!1),i=z(null),o=z(1),a=z(10),l=z(0),c=z(!0),u=z(!1),h=me(()=>{const C=(o.value-1)*a.value;return Array.isArray(e.value)?e.value.slice(C,C+a.value):[]}),p=me(()=>Math.ceil(l.value/a.value)),g=z({id:null,name:"",slug:"",description:"",img:"",sizes:[],price:[],extras:[],categoryIds:[]});function y(){g.value={id:null,name:"",slug:"",description:"",img:"",sizes:[],price:[],extras:[],categoryIds:[]}}Pt(()=>g.value.name,C=>{g.value.slug=C.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")});function v(C=null){if(y(),C){const k=JSON.parse(JSON.stringify(C));for(g.value.id=k.id,g.value.name=k.name,g.value.slug=k.slug,g.value.description=k.description,g.value.img=k.img,g.value.extras=k.extras||[],g.value.categoryIds=k.categoryIds||[],g.value.price=Array.isArray(k.price)?k.price:[],g.value.sizes=Array.isArray(k.sizes)?k.sizes:[];g.value.sizes.length<g.value.price.length;)g.value.sizes.push("")}s.value=!0}function _(){g.value.sizes.push(""),g.value.price.push(0)}function E(C){g.value.sizes.splice(C,1),g.value.price.splice(C,1)}function S(){g.value.extras.push({name:"",price:0})}function D(C){g.value.extras.splice(C,1)}async function F(){var C;u.value=!0;try{const k={...g.value};k.price=k.price.map(A=>Number(A)).filter(A=>!isNaN(A)),k.extras=k.extras.map(A=>({...A,price:Number(A.price)})).filter(A=>A.name&&!isNaN(A.price)),k.sizes.length!==k.price.length?(k.sizes=[],console.warn("Número de tamanhos não corresponde ao número de preços. Enviando tamanhos vazios.")):k.sizes=k.sizes.filter((A,I)=>k.price[I]!==void 0),k.price.length===0&&(k.sizes=[]),k.id?(await it.put(`/products/${k.id}`,k),console.log(`Produto ${k.name} (ID: ${k.id}) atualizado com sucesso.`)):(await it.post("/products",k),console.log(`Novo produto '${k.name}' criado com sucesso.`)),s.value=!1,await b()}catch(k){console.error("Erro ao salvar produto:",((C=k.response)==null?void 0:C.data)||k.message)}finally{u.value=!1}}function M(C){i.value=C,r.value=!0}async function O(){var C;u.value=!0;try{i.value&&i.value.id&&(await it.delete(`/products/${i.value.id}`),console.log(`Produto '${i.value.name}' (ID: ${i.value.id}) excluído com sucesso.`),r.value=!1,i.value=null,await b())}catch(k){console.error("Erro ao excluir produto:",((C=k.response)==null?void 0:C.data)||k.message)}finally{u.value=!1}}function T(C){return!C||!Array.isArray(C)||n.value.length===0?"":C.map(k=>{var A;return(A=n.value.find(I=>I.id===k))==null?void 0:A.name}).filter(Boolean).join(", ")}async function b(){var C;c.value=!0;try{console.log("Tentando carregar produtos...");const k=await it.get("/products");console.log("Produtos recebidos da API:",k.data),e.value=Array.isArray(k.data)?k.data:[],l.value=e.value.length,p.value>0&&o.value>p.value?o.value=p.value:p.value===0&&(o.value=1),console.log(`Produtos carregados. Total: ${l.value}, Página: ${o.value}/${p.value}`)}catch(k){console.error("Erro ao carregar produtos:",((C=k.response)==null?void 0:C.data)||k.message)}finally{c.value=!1}}async function w(){var C;try{console.log("Tentando carregar categorias...");const k=await it.get("/categories");n.value=Array.isArray(k.data)?k.data:[],console.log("Categorias recebidas da API:",n.value.length)}catch(k){console.error("Erro ao carregar categorias:",((C=k.response)==null?void 0:C.data)||k.message)}}return Pt(a,()=>{o.value=1}),pt(()=>{b(),w()}),(C,k)=>(R(),N(pe,null,[ue(Lr,null,{default:_e(()=>[f("div",qB,[k[26]||(k[26]=f("h2",{class:"text-3xl font-bold text-gray-900 dark:text-white"},"Produtos",-1)),k[27]||(k[27]=f("p",{class:"text-gray-600 dark:text-gray-400"},"Adicione, edite ou remova produtos do cardápio.",-1)),f("button",{onClick:k[0]||(k[0]=A=>v()),class:"px-5 py-2 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-md transition-colors duration-200"}," Novo Produto "),c.value?(R(),N("div",WB,k[17]||(k[17]=[f("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-400 dark:border-gray-600 mx-auto"},null,-1),f("p",{class:"text-gray-600 dark:text-gray-400 mt-4"},"Carregando produtos...",-1)]))):e.value.length===0&&!c.value?(R(),N("div",KB,k[18]||(k[18]=[f("p",{class:"text-gray-600 dark:text-gray-400 text-lg"},"Nenhum produto encontrado.",-1)]))):(R(),N("div",GB,[f("table",YB,[k[22]||(k[22]=f("thead",null,[f("tr",{class:"bg-gray-400 dark:bg-gray-700"},[f("th",{class:"py-3 px-2 text-left text-gray-700 dark:text-gray-300 uppercase text-sm leading-normal hidden md:block"}," img "),f("th",{class:"py-3 text-left text-gray-700 dark:text-gray-300 uppercase text-sm leading-normal"},"Nome "),f("th",{class:"py-3 text-left text-gray-700 dark:text-gray-300 uppercase text-sm leading-normal"},"Preços "),f("th",{class:"py-3 text-left text-gray-700 dark:text-gray-300 uppercase text-sm leading-normal"}," Categorias"),f("th",{class:"py-3 text-center text-gray-700 dark:text-gray-300 uppercase text-sm leading-normal"},"Ações ")])],-1)),f("tbody",QB,[(R(!0),N(pe,null,Ce(h.value,A=>(R(),N("tr",{key:A.id,class:"border-b border-gray-300 dark:border-gray-700 hover:bg-gray-300 dark:hover:bg-gray-700 cursor-default transition-colors duration-300"},[f("td",XB,[f("img",{src:A.img,alt:A.name,class:"w-12 h-12 object-cover rounded-md shadow-sm border border-gray-300 dark:border-gray-700"},null,8,JB)]),f("td",ZB,[G(U(A.name)+" ",1),A.extras&&A.extras.length>0?(R(),N("div",e8,[k[19]||(k[19]=f("p",{class:"font-semibold"},"Adicionais:",-1)),(R(!0),N(pe,null,Ce(A.extras,(I,V)=>(R(),N("div",{key:V},U(I.name)+" - "+U(C.$formatPrice(I.price)),1))),128))])):ne("",!0)]),f("td",t8,[A.price&&Array.isArray(A.price)&&A.price.length>0?(R(),N("div",n8,[A.sizes&&Array.isArray(A.sizes)&&A.price.length===A.sizes.length?(R(),N("div",s8,[(R(!0),N(pe,null,Ce(A.price,(I,V)=>(R(),N("div",{key:V},U(A.sizes[V])+" - "+U(C.$formatPrice(I)),1))),128))])):(R(),N("div",r8,[(R(!0),N(pe,null,Ce(A.price,(I,V)=>(R(),N("div",{key:V},U(C.$formatPrice(I)),1))),128))]))])):(R(),N("div",i8,"Dados de preço ausentes ou inválidos."))]),f("td",o8,U(T(A.categoryIds)),1),f("td",a8,[f("button",{onClick:I=>v(A),title:"Editar Produto",class:"px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-l-md transition-colors duration-200"},k[20]||(k[20]=[f("i",{class:"fa-duotone fa-edit"},null,-1)]),8,l8),f("button",{onClick:I=>M(A),title:"Excluir Produto",class:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-r-md transition-colors duration-200"},k[21]||(k[21]=[f("i",{class:"fa-duotone fa-trash"},null,-1)]),8,c8)])]))),128))])]),f("div",u8,[f("span",d8,"Total de itens: "+U(l.value),1),f("div",h8,[k[25]||(k[25]=f("label",{for:"pageSize",class:"text-sm text-gray-700 dark:text-gray-300"},"Itens por página:",-1)),f("div",f8,[Ie(f("select",{id:"pageSize","onUpdate:modelValue":k[1]||(k[1]=A=>a.value=A),class:"appearance-none bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white border border-gray-400 dark:border-gray-600 rounded px-3 py-1 pr-8 focus:outline-none focus:ring-2 focus:ring-blue-500"},k[23]||(k[23]=[f("option",{value:3},"3",-1),f("option",{value:5},"5",-1),f("option",{value:10},"10",-1),f("option",{value:25},"25",-1)]),512),[[Ns,a.value,void 0,{number:!0}]]),k[24]||(k[24]=f("div",{class:"pointer-events-none absolute inset-y-0 right-2 flex items-center text-gray-800 dark:text-white"}," ▼ ",-1))]),f("button",{onClick:k[2]||(k[2]=A=>o.value--),disabled:o.value===1,class:"px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"}," < Anterior ",8,p8),f("span",g8,"Página "+U(o.value)+" de "+U(p.value),1),f("button",{onClick:k[3]||(k[3]=A=>o.value++),disabled:o.value>=p.value,class:"px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"}," Próximo > ",8,m8)])])]))])]),_:1}),s.value?(R(),qe(xi,{key:0,open:s.value,"onUpdate:open":k[13]||(k[13]=A=>s.value=A)},{default:_e(()=>[f("div",y8,[f("button",{onClick:k[4]||(k[4]=A=>s.value=!1),class:"absolute top-3 right-3 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white text-xl"}," × "),f("h3",v8,U(g.value.id?"Editar":"Novo")+" Produto ",1),u.value?(R(),N("div",_8,k[28]||(k[28]=[f("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-400 dark:border-gray-600 mx-auto"},null,-1),f("p",{class:"text-gray-600 dark:text-gray-400 mt-2"},"Salvando...",-1)]))):(R(),N("div",b8,[Ie(f("input",{"onUpdate:modelValue":k[5]||(k[5]=A=>g.value.name=A),placeholder:"Nome do Produto",class:"w-full p-3 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[Je,g.value.name]]),Ie(f("textarea",{"onUpdate:modelValue":k[6]||(k[6]=A=>g.value.description=A),placeholder:"Descrição do Produto",rows:"3",class:"w-full p-3 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[Je,g.value.description]]),Ie(f("input",{"onUpdate:modelValue":k[7]||(k[7]=A=>g.value.img=A),placeholder:"URL da imagem (ex: https://exemplo.com/imagem.jpg)",class:"w-full p-3 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[Je,g.value.img]]),f("div",null,[ue(HB,{modelValue:g.value.categoryIds,"onUpdate:modelValue":k[8]||(k[8]=A=>g.value.categoryIds=A),categories:n.value,class:"w-full"},null,8,["modelValue","categories"]),k[29]||(k[29]=f("p",{class:"text-xs text-gray-600 dark:text-gray-400 mt-1"},"Segure Ctrl/Cmd para selecionar múltiplas.",-1))]),f("div",x8,[k[30]||(k[30]=f("p",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Preços e Tamanhos:",-1)),(R(!0),N(pe,null,Ce(g.value.price,(A,I)=>(R(),N("div",{key:I,class:"flex items-center mb-2 gap-2"},[Ie(f("input",{"onUpdate:modelValue":V=>g.value.sizes[I]=V,placeholder:"Tamanho (Opcional)",class:"w-full p-2 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,8,w8),[[Je,g.value.sizes[I]]]),Ie(f("input",{"onUpdate:modelValue":V=>g.value.price[I]=V,type:"number",step:"0.01",placeholder:"Preço",class:"w-24 p-2 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,8,E8),[[Je,g.value.price[I],void 0,{number:!0}]]),f("button",{onClick:V=>E(I),class:"text-red-500 hover:text-red-400 text-xl transition-colors duration-200"}," × ",8,T8)]))),128)),f("button",{onClick:k[9]||(k[9]=A=>_()),class:"text-sm text-blue-600 dark:text-blue-400 hover:underline mt-2"}," + Adicionar Preço/Tamanho ")]),f("div",null,[k[31]||(k[31]=f("p",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Adicionais:",-1)),(R(!0),N(pe,null,Ce(g.value.extras,(A,I)=>(R(),N("div",{key:I,class:"flex items-center gap-2 mb-2"},[Ie(f("input",{"onUpdate:modelValue":V=>A.name=V,placeholder:"Nome do Adicional",class:"flex-1 p-2 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,8,k8),[[Je,A.name]]),Ie(f("input",{"onUpdate:modelValue":V=>A.price=V,type:"number",step:"0.01",placeholder:"Preço",class:"w-24 p-2 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,8,I8),[[Je,A.price,void 0,{number:!0}]]),f("button",{onClick:V=>D(I),class:"text-red-500 hover:text-red-400 text-xl transition-colors duration-200"}," × ",8,S8)]))),128)),f("button",{onClick:k[10]||(k[10]=A=>S()),class:"text-sm text-blue-600 dark:text-blue-400 hover:underline mt-2"}," + Adicionar adicional ")]),f("div",A8,[f("button",{onClick:k[11]||(k[11]=A=>F()),disabled:u.value,class:"px-5 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Salvar ",8,C8),f("button",{onClick:k[12]||(k[12]=A=>s.value=!1),disabled:u.value,class:"px-5 py-2 bg-gray-600 hover:bg-gray-700 text-white font-semibold rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Cancelar ",8,P8)])]))])]),_:1},8,["open"])):ne("",!0),r.value?(R(),qe(xi,{key:1,open:r.value,"onUpdate:open":k[16]||(k[16]=A=>r.value=A)},{default:_e(()=>{var A;return[f("button",{onClick:k[14]||(k[14]=I=>r.value=!1),class:"absolute top-3 right-3 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white text-xl"}," × "),f("p",R8,[k[32]||(k[32]=G(" Tem certeza que deseja excluir o produto ")),f("strong",O8,U((A=i.value)==null?void 0:A.name),1),k[33]||(k[33]=G("? Esta ação é irreversível. "))]),f("div",D8,[f("button",{onClick:O,disabled:u.value,class:"px-5 py-2 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Excluir ",8,M8),f("button",{onClick:k[15]||(k[15]=I=>r.value=!1),disabled:u.value,class:"px-5 py-2 bg-gray-600 hover:bg-gray-700 text-white font-semibold rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Cancelar ",8,N8)])]}),_:1},8,["open"])):ne("",!0)],64))}},V8=Wt(L8,[["__scopeId","data-v-ee9feb8b"]]),$8={class:"mb-4"},F8={class:"grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 lg:grid-cols-7 gap-4 max-h-[calc(95vh-160px)] overflow-y-auto pr-2"},U8=["onClick","title"],B8={key:0,class:"col-span-full text-center text-gray-400 py-8"},j8={__name:"IconPickerModal",props:{open:{type:Boolean,default:!1}},emits:["update:open","icon-selected"],setup(t,{emit:e}){const n=t,s=e,r=z(n.open);Pt(()=>n.open,u=>{r.value=u});const i=z(["fa-duotone fa-solid fa-pizza-slice","fa-duotone fa-solid fa-hamburger","fa-duotone fa-solid fa-ice-cream","fa-duotone fa-solid fa-mug-hot","fa-duotone fa-solid fa-coffee","fa-duotone fa-solid fa-beer","fa-duotone fa-solid fa-apple-alt","fa-duotone fa-solid fa-carrot","fa-duotone fa-solid fa-cheese","fa-duotone fa-solid fa-bread-slice","fa-duotone fa-solid fa-cookie-bite","fa-duotone fa-solid fa-egg","fa-duotone fa-solid fa-fish","fa-duotone fa-solid fa-hotdog","fa-duotone fa-solid fa-bacon","fa-duotone fa-solid fa-drumstick-bite","fa-duotone fa-solid fa-utensils","fa-duotone fa-solid fa-shopping-basket","fa-duotone fa-solid fa-star","fa-duotone fa-solid fa-heart","fa-duotone fa-solid fa-user","fa-duotone fa-solid fa-cog","fa-duotone fa-solid fa-home","fa-duotone fa-solid fa-info-circle","fa-duotone fa-solid fa-question-circle","fa-duotone fa-solid fa-exclamation-triangle","fa-duotone fa-solid fa-check-circle","fa-duotone fa-solid fa-times-circle","fa-duotone fa-solid fa-bell","fa-duotone fa-solid fa-envelope","fa-duotone fa-solid fa-map-marker-alt","fa-duotone fa-solid fa-phone","fa-duotone fa-solid fa-mobile-alt","fa-duotone fa-solid fa-credit-card","fa-duotone fa-solid fa-money-bill-alt","fa-duotone fa-solid fa-truck","fa-duotone fa-solid fa-motorcycle","fa-duotone fa-solid fa-car","fa-duotone fa-solid fa-store","fa-duotone fa-solid fa-calendar-alt","fa-duotone fa-solid fa-clock","fa-duotone fa-solid fa-fire","fa-duotone fa-solid fa-leaf","fa-duotone fa-solid fa-cloud","fa-duotone fa-solid fa-sun","fa-duotone fa-solid fa-moon","fa-duotone fa-solid fa-umbrella","fa-duotone fa-solid fa-gift","fa-duotone fa-solid fa-percent","fa-duotone fa-solid fa-tag","fa-duotone fa-solid fa-qrcode","fa-duotone fa-solid fa-wifi","fa-duotone fa-solid fa-lock","fa-duotone fa-solid fa-unlock","fa-duotone fa-solid fa-plus","fa-duotone fa-solid fa-minus","fa-duotone fa-solid fa-edit","fa-duotone fa-solid fa-trash","fa-duotone fa-solid fa-search","fa-duotone fa-solid fa-filter","fa-duotone fa-solid fa-sort","fa-duotone fa-solid fa-chart-line","fa-duotone fa-solid fa-receipt","fa-duotone fa-solid fa-box-open","fa-duotone fa-solid fa-tags","fa-duotone fa-solid fa-tools","fab fa-whatsapp","fa-duotone fa-solid fa-chart-bar","fa-duotone fa-solid fa-candy"]),o=z(""),a=me(()=>{if(!o.value)return i.value;const u=o.value.toLowerCase();return i.value.filter(h=>h.toLowerCase().includes(u))});function l(u){s("icon-selected",u),c()}function c(){s("update:open",!1)}return(u,h)=>(R(),qe(xi,{open:r.value,"onUpdate:open":h[1]||(h[1]=p=>r.value=p)},{default:_e(()=>[f("button",{onClick:c,class:"absolute top-3 right-3 text-gray-400 hover:text-white text-xl"}," × "),h[2]||(h[2]=f("h3",{class:"text-2xl font-bold mb-4 border-b border-gray-700 pb-2"},"Escolher Ícone",-1)),f("div",$8,[Ie(f("input",{type:"text","onUpdate:modelValue":h[0]||(h[0]=p=>o.value=p),placeholder:"Buscar ícone (ex: pizza, star, user)",class:"w-full p-3 dark:bg-gray-800 border dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[Je,o.value]])]),f("div",F8,[(R(!0),N(pe,null,Ce(a.value,p=>(R(),N("div",{key:p,onClick:g=>l(p),class:"flex flex-col items-center justify-center p-3 rounded-lg cursor-pointer hover:bg-gray-700 transition-colors duration-200 border border-gray-700",title:p.replace("fas fa-","").replace("fab fa-","")},[f("i",{class:re([p,"text-3xl mb-2 text-blue-400"])},null,2)],8,U8))),128)),a.value.length===0?(R(),N("div",B8," Nenhum ícone encontrado. ")):ne("",!0)]),f("div",{class:"mt-6 flex justify-end border-t border-gray-700 pt-4"},[f("button",{onClick:c,class:"px-5 py-2 bg-gray-600 hover:bg-gray-700 text-white font-semibold rounded-md transition-colors duration-200"}," Fechar ")])]),_:1,__:[2]},8,["open"]))}},z8=Wt(j8,[["__scopeId","data-v-e7109440"]]),H8={class:"space-y-6 p-4 bg-white dark:bg-gray-900 rounded-lg shadow-xl"},q8={key:0,class:"text-center py-8"},W8={key:1,class:"text-center py-8"},K8={key:2,class:"overflow-x-auto mt-4 rounded-lg"},G8={class:"min-w-full table-auto bg-gray-100 dark:bg-gray-800"},Y8={class:"text-gray-800 dark:text-gray-200 text-sm font-light"},Q8={class:"py-3 px-6 text-left whitespace-nowrap flex flex-col"},X8={class:"italic text-gray-600 dark:text-gray-400"},J8={class:"py-3 px-6 text-left"},Z8={class:"py-3 px-6 text-left"},e7=["title"],t7={class:"py-3 px-6 text-right"},n7=["onClick"],s7=["onClick"],r7={class:"flex flex-col md:flex-row justify-between items-center mt-6 text-gray-900 dark:text-white p-4 bg-gray-100 dark:bg-gray-800 rounded-lg"},i7={class:"mb-4 md:mb-0"},o7={class:"flex items-center gap-2"},a7={class:"relative"},l7=["disabled"],c7={class:"px-2"},u7=["disabled"],d7={class:"max-w-md text-gray-900 dark:text-white relative"},h7={class:"text-2xl font-bold mb-4 border-b border-gray-300 dark:border-gray-700 pb-2"},f7={key:0,class:"text-center py-4"},p7={key:1,class:"space-y-4"},g7=["value"],m7={class:"flex items-center gap-2 relative"},y7={class:"flex justify-end mt-6 gap-3 border-t border-gray-300 dark:border-gray-700 pt-4"},v7=["disabled"],_7=["disabled"],b7={class:"mb-4 flex flex-col items-center space-y-4"},x7={class:"text-red-600 dark:text-red-400"},w7={class:"mt-6 flex justify-end gap-3"},E7=["disabled"],T7=["disabled"],k7={__name:"Categories",setup(t){const e=z([]),n=z(!1),s=z(!1),r=z(!1),i=z(null),o=z(1),a=z(5),l=z(0),c=z(!0),u=z(!1),h=me(()=>{const T=(o.value-1)*a.value;return e.value.slice(T,T+a.value)}),p=me(()=>Math.ceil(l.value/a.value)),g=z({id:null,name:"",slug:"",parent_id:"",icon:""}),y=me(()=>g.value.id?e.value.filter(T=>T.id!==g.value.id):e.value);function v(){g.value={id:null,name:"",slug:"",parent_id:"",icon:""}}Pt(()=>g.value.name,T=>{g.value.slug=T.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")});function _(T=null){v(),T&&(g.value=JSON.parse(JSON.stringify(T))),n.value=!0}function E(T){g.value.icon=T,r.value=!1}async function S(){var T;u.value=!0;try{const b={...g.value};b.parent_id===""&&(b.parent_id=null),b.id?(await it.put(`/categories/${b.id}`,b),console.log(`Categoria ${b.id} atualizada com sucesso.`)):(await it.post("/categories",b),console.log("Nova categoria criada com sucesso.")),n.value=!1,await O()}catch(b){console.error("Erro ao salvar categoria:",((T=b.response)==null?void 0:T.data)||b.message)}finally{u.value=!1}}function D(T){i.value=T,s.value=!0}async function F(){var T;u.value=!0;try{i.value&&i.value.id&&(await it.delete(`/categories/${i.value.id}`),console.log(`Categoria ${i.value.id} excluída com sucesso.`),s.value=!1,await O())}catch(b){console.error("Erro ao excluir categoria:",((T=b.response)==null?void 0:T.data)||b.message)}finally{u.value=!1}}function M(T){if(!T)return"Nenhuma";const b=e.value.find(w=>w.id===T);return b?b.name:"Desconhecida"}async function O(){var T;c.value=!0;try{const b=await it.get("/categories");e.value=Array.isArray(b.data)?b.data:[],l.value=e.value.length,o.value>p.value&&p.value>0?o.value=p.value:p.value===0&&(o.value=1)}catch(b){console.error("Erro ao carregar categorias:",((T=b.response)==null?void 0:T.data)||b.message)}finally{c.value=!1}}return Pt(a,()=>{o.value=1}),pt(()=>{O()}),(T,b)=>(R(),N("div",null,[ue(Lr,null,{default:_e(()=>[f("div",H8,[b[25]||(b[25]=f("h2",{class:"text-3xl font-bold text-gray-900 dark:text-white"},[G(" Categorias "),f("p",{class:"text-gray-600 dark:text-gray-400 text-sm font-normal"},"Adicione, edite ou remova categorias de produtos.")],-1)),f("button",{onClick:b[0]||(b[0]=w=>_()),class:"px-5 py-2 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-md transition-colors duration-200"}," Nova Categoria "),c.value?(R(),N("div",q8,b[17]||(b[17]=[f("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-400 dark:border-gray-600 mx-auto"},null,-1),f("p",{class:"text-gray-600 dark:text-gray-400 mt-4"},"Carregando categorias...",-1)]))):e.value.length===0?(R(),N("div",W8,b[18]||(b[18]=[f("p",{class:"text-gray-600 dark:text-gray-400 text-lg"},"Nenhuma categoria encontrada.",-1)]))):(R(),N("div",K8,[f("table",G8,[b[21]||(b[21]=f("thead",null,[f("tr",{class:"bg-gray-200 dark:bg-gray-700"},[f("th",{class:"py-3 px-6 text-left text-gray-700 dark:text-gray-300 uppercase text-sm leading-normal"},"Nome "),f("th",{class:"py-3 px-6 text-left text-gray-700 dark:text-gray-300 uppercase text-sm leading-normal"}," Categoria Pai"),f("th",{class:"py-3 px-6 text-left text-gray-700 dark:text-gray-300 uppercase text-sm leading-normal"},"Ícone "),f("th",{class:"py-3 px-6 text-right text-gray-700 dark:text-gray-300 uppercase text-sm leading-normal"},"Ações ")])],-1)),f("tbody",Y8,[(R(!0),N(pe,null,Ce(h.value,w=>(R(),N("tr",{key:w.id,class:"border-b border-gray-300 dark:border-gray-700 hover:bg-gray-200 dark:hover:bg-gray-700"},[f("td",Q8,[f("span",null,U(w.name),1),f("small",X8,"/"+U(w.slug),1)]),f("td",J8,U(M(w.parent_id)),1),f("td",Z8,[f("i",{class:re([w.icon,"mr-2 text-blue-600 dark:text-blue-400"]),title:w.icon},null,10,e7)]),f("td",t7,[f("button",{onClick:C=>_(w),class:"px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-l-md transition-colors duration-200"},b[19]||(b[19]=[f("i",{class:"fa-duotone fa-edit","aria-label":"hidden"},null,-1)]),8,n7),f("button",{onClick:C=>D(w),class:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-r-md transition-colors duration-200"},b[20]||(b[20]=[f("i",{class:"fa-duotone fa-trash","aria-label":"hidden"},null,-1)]),8,s7)])]))),128))])]),f("div",r7,[f("span",i7,"Total de itens: "+U(l.value),1),f("div",o7,[b[24]||(b[24]=f("label",{for:"pageSize",class:"text-sm text-gray-700 dark:text-gray-300"},"Itens por página:",-1)),f("div",a7,[Ie(f("select",{id:"pageSize","onUpdate:modelValue":b[1]||(b[1]=w=>a.value=w),class:"appearance-none bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white border border-gray-400 dark:border-gray-600 rounded px-3 py-1 pr-8 focus:outline-none focus:ring-2 focus:ring-blue-500"},b[22]||(b[22]=[f("option",{value:3},"3",-1),f("option",{value:5},"5",-1),f("option",{value:10},"10",-1),f("option",{value:25},"25",-1)]),512),[[Ns,a.value,void 0,{number:!0}]]),b[23]||(b[23]=f("div",{class:"pointer-events-none absolute inset-y-0 right-2 flex items-center text-gray-800 dark:text-white"}," ▼ ",-1))]),f("button",{onClick:b[2]||(b[2]=w=>o.value--),disabled:o.value===1,class:"px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"}," < Anterior ",8,l7),f("span",c7,"Página "+U(o.value)+" de "+U(p.value),1),f("button",{onClick:b[3]||(b[3]=w=>o.value++),disabled:o.value>=p.value,class:"px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"}," Próximo > ",8,u7)])])]))])]),_:1}),n.value?(R(),qe(xi,{key:0,open:n.value,"onUpdate:open":b[12]||(b[12]=w=>n.value=w)},{default:_e(()=>[f("div",d7,[f("button",{onClick:b[4]||(b[4]=w=>n.value=!1),class:"absolute top-3 right-3 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white text-xl"}," × "),f("h3",h7,U(g.value.id?"Editar":"Nova")+" Categoria ",1),u.value?(R(),N("div",f7,b[26]||(b[26]=[f("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-400 dark:border-gray-600 mx-auto"},null,-1),f("p",{class:"text-gray-600 dark:text-gray-400 mt-2"},"Salvando...",-1)]))):(R(),N("div",p7,[Ie(f("input",{"onUpdate:modelValue":b[5]||(b[5]=w=>g.value.name=w),placeholder:"Nome da Categoria",class:"w-full p-3 bg-gray-200 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[Je,g.value.name]]),Ie(f("input",{"onUpdate:modelValue":b[6]||(b[6]=w=>g.value.slug=w),placeholder:"Slug (gerado automaticamente)",readonly:"",class:"w-full p-3 bg-gray-200 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md hidden focus:outline-none focus:ring-2 focus:ring-blue-500 cursor-not-allowed"},null,512),[[Je,g.value.slug]]),f("div",null,[b[28]||(b[28]=f("label",{for:"parent-category-select",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Categoria Pai (Opcional):",-1)),Ie(f("select",{id:"parent-category-select","onUpdate:modelValue":b[7]||(b[7]=w=>g.value.parent_id=w),class:"w-full p-3 bg-gray-200 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"},[b[27]||(b[27]=f("option",{value:""},"Nenhuma (Categoria Principal)",-1)),(R(!0),N(pe,null,Ce(y.value,w=>(R(),N("option",{key:w.id,value:w.id},U(w.name),9,g7))),128))],512),[[Ns,g.value.parent_id]])]),f("div",null,[b[30]||(b[30]=f("label",{for:"icon-input",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Ícone:",-1)),f("div",m7,[Ie(f("input",{type:"text",id:"icon-input","onUpdate:modelValue":b[8]||(b[8]=w=>g.value.icon=w),placeholder:"Ex: fas fa-pizza-slice",class:"w-full p-3 bg-gray-200 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[Je,g.value.icon]]),f("button",{onClick:b[9]||(b[9]=w=>r.value=!0),class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-md transition-colors duration-200 absolute right-0 top-0 h-full flex items-center"},[f("i",{class:re(g.value.icon||"fas fa-search")},null,2),b[29]||(b[29]=f("span",{class:"ml-2 hidden sm:inline"},"Escolher",-1))])]),b[31]||(b[31]=f("p",{class:"text-xs text-gray-600 dark:text-gray-400 mt-1"},[G('Use classes de ícones como "fas fa-pizza-slice" '),f("a",{class:"text-blue-600 dark:text-blue-400 hover:underline",href:"https://fontawesome.com/icons",target:"_blank"},"(Font Awesome)"),G(". ")],-1))]),f("div",y7,[f("button",{onClick:b[10]||(b[10]=w=>S()),disabled:u.value,class:"px-5 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Salvar ",8,v7),f("button",{onClick:b[11]||(b[11]=w=>n.value=!1),disabled:u.value,class:"px-5 py-2 bg-gray-600 hover:bg-gray-700 text-white font-semibold rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Cancelar ",8,_7)])]))])]),_:1},8,["open"])):ne("",!0),s.value?(R(),qe(xi,{key:1,open:s.value,"onUpdate:open":b[15]||(b[15]=w=>s.value=w)},{default:_e(()=>{var w;return[f("button",{onClick:b[13]||(b[13]=C=>s.value=!1),class:"absolute top-3 right-3 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white text-xl mb-5"}," × "),f("div",b7,[b[34]||(b[34]=f("i",{class:"fa-duotone fa-solid fa-circle-exclamation text-6xl text-red-400"},null,-1)),f("span",null,[b[32]||(b[32]=G(" Tem certeza que deseja excluir a categoria ")),f("strong",x7,U((w=i.value)==null?void 0:w.name),1),b[33]||(b[33]=G("? "))]),b[35]||(b[35]=G(" Esta ação é irreversível. "))]),f("div",w7,[f("button",{onClick:F,disabled:u.value,class:"px-5 py-2 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Excluir ",8,E7),f("button",{onClick:b[14]||(b[14]=C=>s.value=!1),disabled:u.value,class:"px-5 py-2 bg-gray-600 hover:bg-gray-700 text-white font-semibold rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Cancelar ",8,T7)])]}),_:1},8,["open"])):ne("",!0),r.value?(R(),qe(z8,{key:2,open:r.value,"onUpdate:open":b[16]||(b[16]=w=>r.value=w),onIconSelected:E},null,8,["open"])):ne("",!0)]))}},I7={class:"whatsapp-qr-container p-4 bg-white dark:bg-gray-800 rounded-lg shadow-md text-center"},S7={key:0,class:"text-gray-600 dark:text-gray-400"},A7={key:1},C7={class:"capitalize"},P7={key:0},R7=["src"],O7={key:1,class:"text-red-500"},D7={key:1,class:"text-green-600 dark:text-green-400"},M7={key:2,class:"text-green-600 dark:text-green-400"},N7={key:3},L7={key:4,class:"text-red-600 dark:text-red-400"},V7={key:5,class:"text-gray-500 dark:text-gray-400"},$7=["disabled"],F7={key:0,class:"fas fa-spinner fa-spin mr-2"},U7=["disabled"],B7={key:0,class:"fas fa-spinner fa-spin mr-2"},j7={__name:"WhatsappQrCodeDisplay",setup(t){const e=z(null),n=z("loading"),s=z(!0),r=z(null),i=me(()=>{switch(n.value){case"inchat":case"connected":return"text-green-600 dark:text-green-400";case"qr-code":return"text-orange-500";case"disconnected":case"closed":case"failed":return"text-red-600 dark:text-red-400";default:return"text-gray-500 dark:text-gray-400"}}),o=async()=>{s.value=!0;try{const l=await it.get("/whatsapp/status");n.value=l.data.status,e.value=l.data.qrCode}catch(l){console.error("Erro ao buscar status do QR Code:",l),n.value="failed",e.value=null}finally{s.value=!1}},a=async()=>{s.value=!0;try{const l=await it.post("/admin/start-bot");console.log(l),n.value=l.data.status,e.value=l.data.qrCode,setInterval(o,15e3)}catch(l){console.error("Erro ao iniciar o bot:",l),n.value="failed",e.value=null}finally{s.value=!1}};return pt(()=>{o()}),Ti(()=>{r.value&&clearInterval(r.value)}),(l,c)=>(R(),qe(Lr,null,{default:_e(()=>[f("div",I7,[c[10]||(c[10]=f("h2",{class:"text-xl font-semibold mb-4 dark:text-white"},"Status da Conexão do WhatsApp",-1)),s.value?(R(),N("div",S7,c[0]||(c[0]=[f("i",{class:"fas fa-spinner fa-spin mr-2"},null,-1),G(" Carregando status... ")]))):(R(),N("div",A7,[f("p",{class:re(["text-lg font-medium mb-2",i.value])},[c[1]||(c[1]=G(" Status: ")),f("span",C7,U(n.value),1)],2),n.value==="qr-code"?(R(),N("div",P7,[c[2]||(c[2]=f("p",{class:"text-gray-700 dark:text-gray-300 mb-4"},"Escaneie o QR Code abaixo com seu celular para conectar o bot: ",-1)),e.value?(R(),N("img",{key:0,src:e.value,alt:"QR Code WhatsApp",class:"mx-auto w-64 h-64 border p-2 bg-white"},null,8,R7)):(R(),N("p",O7,"QR Code não disponível. Tente recarregar a página."))])):n.value==="connected"?(R(),N("div",D7,c[3]||(c[3]=[f("i",{class:"fas fa-check-circle mr-2"},null,-1),G(" Bot conectado com sucesso! "),f("p",{class:"text-gray-700 dark:text-gray-300 mt-2"},"Você pode fechar esta página.",-1)]))):n.value==="inchat"?(R(),N("div",M7,c[4]||(c[4]=[f("i",{class:"fas fa-check-circle mr-2"},null,-1),G(" Bot conectado com sucesso! "),f("p",{class:"text-gray-700 dark:text-gray-300 mt-2"},"Você pode fechar esta página.",-1)]))):n.value==="disconnected"||n.value==="closed"?(R(),N("div",N7,[c[5]||(c[5]=f("p",{class:"text-red-600 dark:text-red-400"},"Bot desconectado. Aguardando novo QR Code ou tentando reconectar. ",-1)),f("button",{onClick:o,class:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600"}," Tentar novamente ")])):n.value==="failed"?(R(),N("div",L7,[c[6]||(c[6]=f("p",null,"Falha ao iniciar o bot. Verifique os logs do backend.",-1)),f("button",{onClick:o,class:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600"}," Tentar novamente ")])):(R(),N("div",V7,[f("p",null,"Status: "+U(n.value),1)])),f("button",{onClick:o,disabled:s.value,class:"mt-6 px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition duration-200"},[s.value?(R(),N("i",F7)):ne("",!0),c[7]||(c[7]=G(" Atualizar Status "))],8,$7),n.value!=="inchat"||n.value!=="connected"?(R(),N("button",{key:6,onClick:a,disabled:s.value,class:"mt-4 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition duration-200"},[s.value?(R(),N("i",B7)):ne("",!0),c[8]||(c[8]=f("i",{class:"fab fa-whatsapp"},null,-1)),c[9]||(c[9]=G(" Iniciar Bot WhatsApp "))],8,U7)):ne("",!0)]))])]),_:1}))}},z7=Wt(j7,[["__scopeId","data-v-df8282e2"]]),H7={class:"space-y-6"},q7={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},W7={class:"bg-gray-100 dark:bg-gray-800 p-6 rounded-lg shadow-md border border-gray-300 dark:border-gray-700"},K7={class:"space-y-4"},G7={class:"bg-gray-100 dark:bg-gray-800 p-6 rounded-lg shadow-md border border-gray-300 dark:border-gray-700"},Y7={class:"space-y-4"},Q7={class:"flex items-center"},X7={class:"bg-gray-100 dark:bg-gray-800 p-6 rounded-lg shadow-md border border-gray-300 dark:border-gray-700"},J7={class:"space-y-4"},Z7={class:"text-xs text-gray-500 dark:text-gray-500 mt-1 flex items-center justify-between"},ej={class:"flex justify-end mt-6"},tj=["disabled"],nj={key:0},sj={key:1},rj={__name:"AdminSettings",setup(t){const e=z({appName:"",contactEmail:"",whatsappNumber:"",notificationTopic:"geral_promocoes",enableOrderNotifications:!0}),n=z(!1),s=z(!0);async function r(){s.value=!0;try{const o=await it.get("/admin/settings");o.data&&(e.value={...e.value,...o.data})}catch(o){console.error("Erro ao carregar configurações:",o)}finally{s.value=!1}}async function i(){n.value=!0;try{await it.post("/admin/settings",e.value),console.log("Configurações salvas com sucesso!")}catch(o){console.error("Erro ao salvar configurações:",o)}finally{n.value=!1}}return pt(()=>{r()}),(o,a)=>(R(),qe(Lr,null,{default:_e(()=>[f("div",H7,[a[17]||(a[17]=f("h2",{class:"text-md md:text-2xl font-bold text-gray-900 dark:text-white"},[G("Configurações do Administrador "),f("p",{class:"text-gray-600 dark:text-gray-400 italic text-xs font-normal"},"Ajuste as configurações gerais da sua plataforma.")],-1)),f("div",q7,[f("div",W7,[a[8]||(a[8]=f("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4 border-b border-gray-300 dark:border-gray-700 pb-2"}," Configurações Gerais",-1)),f("div",K7,[f("div",null,[a[5]||(a[5]=f("label",{for:"appName",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Nome do Aplicativo:",-1)),Ie(f("input",{type:"text",id:"appName","onUpdate:modelValue":a[0]||(a[0]=l=>e.value.appName=l),class:"w-full p-3 bg-gray-200 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nome da Pizzaria"},null,512),[[Je,e.value.appName]])]),f("div",null,[a[6]||(a[6]=f("label",{for:"contactEmail",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Email de Contato:",-1)),Ie(f("input",{type:"email",id:"contactEmail","onUpdate:modelValue":a[1]||(a[1]=l=>e.value.contactEmail=l),class:"w-full p-3 bg-gray-200 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"contato@pizzaria.com"},null,512),[[Je,e.value.contactEmail]])]),f("div",null,[a[7]||(a[7]=f("label",{for:"whatsappNumber",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Número de WhatsApp (para pedidos):",-1)),Ie(f("input",{type:"text",id:"whatsappNumber","onUpdate:modelValue":a[2]||(a[2]=l=>e.value.whatsappNumber=l),class:"w-full p-3 bg-gray-200 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"+55 11 91234-5678"},null,512),[[Je,e.value.whatsappNumber]])])])]),f("div",G7,[a[12]||(a[12]=f("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4 border-b border-gray-300 dark:border-gray-700 pb-2"}," Notificações FCM",-1)),a[13]||(a[13]=f("p",{class:"text-gray-600 dark:text-gray-400 mb-4"},"Gerencie as configurações de notificação push do Firebase Cloud Messaging.",-1)),f("div",Y7,[f("div",null,[a[9]||(a[9]=f("label",{for:"notificationTopic",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Tópico Padrão para Notificações:",-1)),Ie(f("input",{type:"text",id:"notificationTopic","onUpdate:modelValue":a[3]||(a[3]=l=>e.value.notificationTopic=l),class:"w-full p-3 bg-gray-200 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"geral_promocoes"},null,512),[[Je,e.value.notificationTopic]]),a[10]||(a[10]=f("p",{class:"text-xs text-gray-500 dark:text-gray-500 mt-1"},"Este tópico será usado para enviar notificações em massa.",-1))]),f("div",Q7,[Ie(f("input",{type:"checkbox",id:"enableOrderNotifications","onUpdate:modelValue":a[4]||(a[4]=l=>e.value.enableOrderNotifications=l),class:"h-5 w-5 text-blue-600 bg-gray-200 dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500"},null,512),[[tu,e.value.enableOrderNotifications]]),a[11]||(a[11]=f("label",{for:"enableOrderNotifications",class:"ml-2 block text-sm text-gray-700 dark:text-gray-300"}," Habilitar notificações de atualização de pedido ",-1))])])]),f("div",X7,[a[16]||(a[16]=f("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4 border-b border-gray-300 dark:border-gray-700 pb-2"}," Outros",-1)),f("div",J7,[f("p",Z7,[a[14]||(a[14]=G(" Tema Light/Dark ")),ue(ow)]),a[15]||(a[15]=f("p",{class:"text-xs text-gray-500 dark:text-gray-500 mt-1 flex items-center justify-between"},[f("label",{for:"xota",class:"animate-xota"},"Ativar notificações de pedidos"),f("input",{id:"xota",type:"checkbox",value:"anal69",class:"w-4 h-4 appearance-none dark:bg-gray-900 checked:bg-green-200 checked:rounded-full checked:outline-2 outline-2 rounded-full not-checked:outline-orange-800 checked:animate-rubberBand checked:outline-orange-500"})],-1))])])]),f("div",ej,[f("button",{onClick:i,disabled:n.value,class:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"},[n.value?(R(),N("span",nj,"Salvando...")):(R(),N("span",sj,"Salvar Configurações"))],8,tj)])])]),_:1}))}},ij={class:"min-h-screen flex items-center justify-center transition-colors duration-200 body"},oj={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert"},aj={class:"block sm:inline"},lj=["disabled"],cj={key:0,class:"flex items-center"},uj={key:1},dj=["disabled"],hj={key:0,class:"flex items-center"},fj={key:1},pj={__name:"Login",setup(t){const e=Rd(),n=z(""),s=z(""),r=async()=>{await e.loginWithEmail(n.value,s.value)},i=async()=>{await e.loginWithGoogle()};return(o,a)=>(R(),N("div",ij,[f("div",{class:re(["p-8 rounded-lg w-full max-w-md h-screen md:h-auto morph",[be(e).error?"shadow-red-500/30":""]])},[ue(ow),a[7]||(a[7]=f("img",{src:iw,alt:"Logo",class:"mx-auto mb-6 w-auto h-24"},null,-1)),be(e).error?(R(),N("div",oj,[f("span",aj,U(be(e).error),1)])):ne("",!0),f("form",{onSubmit:os(r,["prevent"]),class:"space-y-4"},[f("div",null,[a[2]||(a[2]=f("label",{for:"email",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Email",-1)),Ie(f("input",{type:"email",id:"email","onUpdate:modelValue":a[0]||(a[0]=l=>n.value=l),required:"",class:re(["mt-1 block w-full px-3 py-2 border  rounded-md shadow-sm focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white",be(e).error?"border-red-500":"border-gray-300 dark:border-gray-600"]),placeholder:"seu@email.com"},null,2),[[Je,n.value]])]),f("div",null,[a[3]||(a[3]=f("label",{for:"password",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Senha",-1)),Ie(f("input",{type:"password",id:"password","onUpdate:modelValue":a[1]||(a[1]=l=>s.value=l),required:"",class:re(["mt-1 block w-full px-3 py-2 border  rounded-md shadow-sm focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white",be(e).error?"border-red-500":"border-gray-300 dark:border-gray-600"]),placeholder:"********"},null,2),[[Je,s.value]])]),f("button",{type:"submit",disabled:be(e).loading,class:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-amber-600 hover:bg-amber-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 dark:bg-amber-700 dark:hover:bg-amber-800 disabled:opacity-50 disabled:cursor-not-allowed"},[be(e).loading?(R(),N("span",cj,a[4]||(a[4]=[f("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[f("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),f("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),G(" Entrando... ")]))):(R(),N("span",uj,"Entrar com Email"))],8,lj)],32),a[8]||(a[8]=Jc('<div class="relative my-6"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-gray-300 dark:border-gray-600"></div></div><div class="relative flex justify-center text-sm"><span class="px-2 bg-[#e0e0e0] dark:bg-gray-800 text-gray-500 dark:text-gray-400">Ou</span></div></div>',1)),f("div",null,[f("button",{onClick:i,disabled:be(e).loading,class:"w-full flex justify-center items-center py-2 px-4 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[a[6]||(a[6]=f("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google logo",class:"w-5 h-5 mr-2"},null,-1)),be(e).loading?(R(),N("span",hj,a[5]||(a[5]=[f("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-gray-700 dark:text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[f("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),f("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),G(" Entrando com Google... ")]))):(R(),N("span",fj,"Entrar com Google"))],8,dj)])],2)]))}},gj={class:"space-y-6 p-4 md:p-4 bg-white dark:bg-gray-900 rounded-lg shadow-xl"},mj={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert"},yj={key:1,class:"text-center py-8"},vj={key:2,class:"text-center py-8"},_j={key:3,class:"mt-4 dark:border-gray-700 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},bj={class:"font-semibold text-gray-800 dark:text-white"},xj={class:"text-sm text-gray-600 dark:text-gray-400 mb-2"},wj={class:"text-left mb-4"},Ej={class:"flex justify-end space-x-2"},Tj=["onClick"],kj=["onClick"],Ij={class:"flex flex-col md:flex-row justify-between items-center mt-6 text-gray-900 dark:text-white p-4 bg-gray-100 dark:bg-gray-800 rounded-lg"},Sj={class:"mb-4 md:mb-0 text-sm md:text-base"},Aj={class:"flex flex-col md:flex-row items-center gap-4 w-full md:w-auto"},Cj={class:"flex items-center gap-2 mb-4 md:mb-0 w-full md:w-auto justify-center"},Pj={class:"relative"},Rj={"aria-label":"Page navigation",class:"w-full flex justify-center"},Oj={class:"inline-flex -space-x-px text-sm rounded-md shadow-sm overflow-hidden"},Dj={key:0,class:"flex items-center justify-center px-3 h-8 leading-tight text-gray-500 bg-white border border-gray-300 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400"},Mj=["onClick"],Nj={class:"bg-white dark:bg-gray-800 text-gray-900 dark:text-white p-6 rounded-lg shadow-xl relative"},Lj={class:"text-lg mb-4"},Vj={class:"mt-6 flex justify-end gap-3"},$j=["disabled"],Fj={key:0},Uj={key:1},Bj=["disabled"],jj={__name:"ManagerUsers",setup(t){const e=z([]),n=z(!0),s=z(!1),r=z(null),i=z(""),o=z(!1),a=z(1),l=z(2),c=z(0),u=Ea(),h=Rd(),p=me(()=>{const M=(a.value-1)*l.value;return e.value.slice(M,M+l.value)}),g=me(()=>Math.ceil(c.value/l.value)),y=me(()=>{const M=[],T=Math.floor(2.5);if(g.value<=5)for(let b=1;b<=g.value;b++)M.push(b);else{M.push(1);let b=Math.max(2,a.value-T),w=Math.min(g.value-1,a.value+T);a.value-1<T&&(w=4),g.value-a.value<T&&(b=g.value-5+2),b>2&&M.push("...");for(let C=b;C<=w;C++)M.push(C);w<g.value-1&&M.push("..."),g.value>1&&!M.includes(g.value)&&M.push(g.value)}return[...new Set(M)]}),v=M=>{M==="..."||M<1||M>g.value||M===a.value||(a.value=M)},_=M=>M?"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-semibold dark:bg-green-700 dark:text-green-100":"bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs font-semibold dark:bg-red-700 dark:text-red-100";function E(M,O){r.value=M,i.value=O,s.value=!0}function S(){r.value=null,i.value="",s.value=!1}async function D(){var M,O,T;if(!(!r.value||!i.value)){o.value=!0;try{const b=i.value==="promote"?"/admin/manage-users/promote":"/admin/manage-users/demote",w=i.value==="promote"?"promovido":"rebaixado";await it.post(b,{email:r.value.email}),u.showToast("Sucesso!",`Usuário ${r.value.email} foi ${w} com sucesso. Ele precisará fazer login novamente.`,"success",5e3),S(),await F()}catch(b){console.error(`Erro ao ${i.value} usuário:`,((M=b.response)==null?void 0:M.data)||b.message),u.showToast("Erro",`Não foi possível ${i.value} o usuário: ${((T=(O=b.response)==null?void 0:O.data)==null?void 0:T.error)||b.message}`,"error",5e3)}finally{o.value=!1}}}async function F(){var M,O,T;if(!h.isAuthenticated||!h.isAdmin){n.value=!1,console.warn("Não autenticado ou não é admin. Não carregando usuários.");return}n.value=!0;try{console.log("Tentando carregar usuários da API...");const b=await it.get("/admin/manage-users/users");console.log("Usuários recebidos:",b.data),e.value=b.data,c.value=e.value.length,a.value>g.value&&g.value>0?a.value=g.value:g.value===0&&(a.value=1)}catch(b){console.error("Erro ao carregar usuários:",((M=b.response)==null?void 0:M.data)||b.message),((O=b.response)==null?void 0:O.status)!==401&&((T=b.response)==null?void 0:T.status)!==403&&u.showToast("Erro","Não foi possível carregar os usuários.","error")}finally{n.value=!1}}return Pt(l,()=>{a.value=1}),pt(async()=>{!h.isAuthenticated&&!h.loading&&(console.log("ManageUsers: onMounted - authStore não inicializado, chamando initializeAuth..."),await h.initializeAuth()),console.log("ManageUsers: onMounted - Chamando loadUsers..."),F()}),(M,O)=>(R(),N("div",null,[ue(Lr,null,{default:_e(()=>[f("div",gj,[O[10]||(O[10]=f("h2",{class:"md:text-2xl font-semibold text-gray-700 dark:text-white"},[f("i",{class:"fa-duotone fa-users"}),G(" Gerenciamento de usuários "),f("p",{class:"text-xs font-normal text-gray-600 dark:text-gray-400 text-nowrap"}," Visualize e gerencie as permissões de administrador dos usuários. ")],-1)),!be(h).isAuthenticated||!be(h).isAdmin?(R(),N("div",mj,O[4]||(O[4]=[f("span",{class:"block sm:inline"},[G("Você não tem permissão para acessar esta área ou sua sessão expirou."),f("br"),G("Por favor, faça login como administrador.")],-1)]))):n.value?(R(),N("div",yj,O[5]||(O[5]=[f("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-400 dark:border-gray-600 mx-auto"},null,-1),f("p",{class:"text-gray-600 dark:text-gray-400 mt-4"},"Carregando usuários...",-1)]))):e.value.length===0?(R(),N("div",vj,O[6]||(O[6]=[f("p",{class:"text-gray-600 dark:text-gray-400 text-xs md:text-lg"},"Nenhum usuário encontrado.",-1)]))):(R(),N("div",_j,[(R(!0),N(pe,null,Ce(p.value,T=>(R(),N("div",{class:"rounded-lg shadow-md bg-white dark:bg-gray-800 p-4 border border-gray-300 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",key:T.uid},[f("p",bj,U(T.displayName||"Nome não informado"),1),f("p",xj,U(T.email),1),f("p",wj,[f("span",{class:re(_(T.isAdmin))},U(T.isAdmin?"Administrador":"Usuário Comum"),3)]),f("div",Ej,[T.isAdmin?(R(),N("button",{key:1,onClick:b=>E(T,"demote"),class:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white rounded-md text-sm transition-colors duration-200"}," Rebaixar ",8,kj)):(R(),N("button",{key:0,onClick:b=>E(T,"promote"),class:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded-md text-sm transition-colors duration-200"}," Promover ",8,Tj))])]))),128))])),f("div",Ij,[f("span",Sj,"Total de usuários: "+U(c.value),1),f("div",Aj,[f("div",Cj,[O[9]||(O[9]=f("label",{for:"pageSize",class:"text-xs text-gray-700 dark:text-gray-300"},"Usuários por página:",-1)),f("div",Pj,[Ie(f("select",{id:"pageSize","onUpdate:modelValue":O[0]||(O[0]=T=>l.value=T),class:"appearance-none bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white border border-gray-400 dark:border-gray-600 rounded px-3 py-1 pr-8 focus:outline-none focus:ring-2 focus:ring-blue-500"},O[7]||(O[7]=[f("option",{value:5},"5",-1),f("option",{value:10},"10",-1),f("option",{value:25},"25",-1)]),512),[[Ns,l.value,void 0,{number:!0}]]),O[8]||(O[8]=f("div",{class:"pointer-events-none absolute inset-y-0 right-2 flex items-center text-gray-800 dark:text-white"}," ▼ ",-1))])]),f("nav",Rj,[f("ul",Oj,[f("li",null,[f("a",{onClick:O[1]||(O[1]=T=>v(a.value-1)),class:re([{"opacity-50 cursor-not-allowed":a.value===1},"flex items-center justify-center px-3 h-8 ms-0 leading-tight text-gray-500 bg-white border border-e-0 border-gray-300 rounded-s-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white transition-colors duration-200"])}," Anterior ",2)]),(R(!0),N(pe,null,Ce(y.value,(T,b)=>(R(),N("li",{key:b},[T==="..."?(R(),N("span",Dj," ... ")):(R(),N("a",{key:1,onClick:w=>v(T),class:re([{"text-blue-600 border-blue-300 bg-blue-50 hover:bg-blue-100 dark:border-gray-700 dark:bg-gray-700 dark:text-white":T===a.value,"text-gray-500 bg-white border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white":T!==a.value},"flex items-center justify-center px-3 h-8 leading-tight border transition-colors duration-200"])},U(T),11,Mj))]))),128)),f("li",null,[f("a",{onClick:O[2]||(O[2]=T=>v(a.value+1)),class:re([{"opacity-50 cursor-not-allowed":a.value===g.value},"flex items-center justify-center px-3 h-8 leading-tight text-gray-500 bg-white border border-gray-300 rounded-e-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white transition-colors duration-200"])}," Próximo ",2)])])])])])])]),_:1}),ue(xi,{open:s.value,"onUpdate:open":O[3]||(O[3]=T=>s.value=T)},{default:_e(()=>{var T;return[f("div",Nj,[f("button",{onClick:S,class:"absolute top-3 right-3 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white text-xl"}," × "),f("p",Lj,[G(" Tem certeza que deseja "+U(i.value==="promote"?"promover":"rebaixar")+" o usuário ",1),f("strong",{class:re(i.value==="promote"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400")},U((T=r.value)==null?void 0:T.email),3),O[11]||(O[11]=G("? "))]),O[12]||(O[12]=f("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Esta ação exigirá que o usuário faça login novamente para que as alterações de permissão entrem em vigor. ",-1)),f("div",Vj,[f("button",{onClick:D,disabled:o.value,class:re([i.value==="promote"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700","px-5 py-2 text-white font-semibold rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"])},[o.value?(R(),N("span",Fj,"Processando...")):(R(),N("span",Uj,U(i.value==="promote"?"Confirmar Promoção":"Confirmar Rebaixamento"),1))],10,$j),f("button",{onClick:S,disabled:o.value,class:"px-5 py-2 bg-gray-600 hover:bg-gray-700 text-white font-semibold rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Cancelar ",8,Bj)])])]}),_:1},8,["open"])]))}};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Pl(t){return t+.5|0}const hr=(t,e,n)=>Math.max(Math.min(t,n),e);function ca(t){return hr(Pl(t*2.55),0,255)}function br(t){return hr(Pl(t*255),0,255)}function ks(t){return hr(Pl(t/2.55)/100,0,1)}function l_(t){return hr(Pl(t*100),0,100)}const On={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Kf=[..."0123456789ABCDEF"],zj=t=>Kf[t&15],Hj=t=>Kf[(t&240)>>4]+Kf[t&15],ic=t=>(t&240)>>4===(t&15),qj=t=>ic(t.r)&&ic(t.g)&&ic(t.b)&&ic(t.a);function Wj(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&On[t[1]]*17,g:255&On[t[2]]*17,b:255&On[t[3]]*17,a:e===5?On[t[4]]*17:255}:(e===7||e===9)&&(n={r:On[t[1]]<<4|On[t[2]],g:On[t[3]]<<4|On[t[4]],b:On[t[5]]<<4|On[t[6]],a:e===9?On[t[7]]<<4|On[t[8]]:255})),n}const Kj=(t,e)=>t<255?e(t):"";function Gj(t){var e=qj(t)?zj:Hj;return t?"#"+e(t.r)+e(t.g)+e(t.b)+Kj(t.a,e):void 0}const Yj=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function BT(t,e,n){const s=e*Math.min(n,1-n),r=(i,o=(i+t/30)%12)=>n-s*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function Qj(t,e,n){const s=(r,i=(r+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[s(5),s(3),s(1)]}function Xj(t,e,n){const s=BT(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)s[r]*=1-e-n,s[r]+=e;return s}function Jj(t,e,n,s,r){return t===r?(e-n)/s+(e<n?6:0):e===r?(n-t)/s+2:(t-e)/s+4}function Lg(t){const n=t.r/255,s=t.g/255,r=t.b/255,i=Math.max(n,s,r),o=Math.min(n,s,r),a=(i+o)/2;let l,c,u;return i!==o&&(u=i-o,c=a>.5?u/(2-i-o):u/(i+o),l=Jj(n,s,r,u,i),l=l*60+.5),[l|0,c||0,a]}function Vg(t,e,n,s){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,s)).map(br)}function $g(t,e,n){return Vg(BT,t,e,n)}function Zj(t,e,n){return Vg(Xj,t,e,n)}function ez(t,e,n){return Vg(Qj,t,e,n)}function jT(t){return(t%360+360)%360}function tz(t){const e=Yj.exec(t);let n=255,s;if(!e)return;e[5]!==s&&(n=e[6]?ca(+e[5]):br(+e[5]));const r=jT(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?s=Zj(r,i,o):e[1]==="hsv"?s=ez(r,i,o):s=$g(r,i,o),{r:s[0],g:s[1],b:s[2],a:n}}function nz(t,e){var n=Lg(t);n[0]=jT(n[0]+e),n=$g(n),t.r=n[0],t.g=n[1],t.b=n[2]}function sz(t){if(!t)return;const e=Lg(t),n=e[0],s=l_(e[1]),r=l_(e[2]);return t.a<255?`hsla(${n}, ${s}%, ${r}%, ${ks(t.a)})`:`hsl(${n}, ${s}%, ${r}%)`}const c_={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},u_={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function rz(){const t={},e=Object.keys(u_),n=Object.keys(c_);let s,r,i,o,a;for(s=0;s<e.length;s++){for(o=a=e[s],r=0;r<n.length;r++)i=n[r],a=a.replace(i,c_[i]);i=parseInt(u_[o],16),t[a]=[i>>16&255,i>>8&255,i&255]}return t}let oc;function iz(t){oc||(oc=rz(),oc.transparent=[0,0,0,0]);const e=oc[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const oz=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function az(t){const e=oz.exec(t);let n=255,s,r,i;if(e){if(e[7]!==s){const o=+e[7];n=e[8]?ca(o):hr(o*255,0,255)}return s=+e[1],r=+e[3],i=+e[5],s=255&(e[2]?ca(s):hr(s,0,255)),r=255&(e[4]?ca(r):hr(r,0,255)),i=255&(e[6]?ca(i):hr(i,0,255)),{r:s,g:r,b:i,a:n}}}function lz(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${ks(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const $h=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,$i=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function cz(t,e,n){const s=$i(ks(t.r)),r=$i(ks(t.g)),i=$i(ks(t.b));return{r:br($h(s+n*($i(ks(e.r))-s))),g:br($h(r+n*($i(ks(e.g))-r))),b:br($h(i+n*($i(ks(e.b))-i))),a:t.a+n*(e.a-t.a)}}function ac(t,e,n){if(t){let s=Lg(t);s[e]=Math.max(0,Math.min(s[e]+s[e]*n,e===0?360:1)),s=$g(s),t.r=s[0],t.g=s[1],t.b=s[2]}}function zT(t,e){return t&&Object.assign(e||{},t)}function d_(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=br(t[3]))):(e=zT(t,{r:0,g:0,b:0,a:1}),e.a=br(e.a)),e}function uz(t){return t.charAt(0)==="r"?az(t):tz(t)}class rl{constructor(e){if(e instanceof rl)return e;const n=typeof e;let s;n==="object"?s=d_(e):n==="string"&&(s=Wj(e)||iz(e)||uz(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=zT(this._rgb);return e&&(e.a=ks(e.a)),e}set rgb(e){this._rgb=d_(e)}rgbString(){return this._valid?lz(this._rgb):void 0}hexString(){return this._valid?Gj(this._rgb):void 0}hslString(){return this._valid?sz(this._rgb):void 0}mix(e,n){if(e){const s=this.rgb,r=e.rgb;let i;const o=n===i?.5:n,a=2*o-1,l=s.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;i=1-c,s.r=255&c*s.r+i*r.r+.5,s.g=255&c*s.g+i*r.g+.5,s.b=255&c*s.b+i*r.b+.5,s.a=o*s.a+(1-o)*r.a,this.rgb=s}return this}interpolate(e,n){return e&&(this._rgb=cz(this._rgb,e._rgb,n)),this}clone(){return new rl(this.rgb)}alpha(e){return this._rgb.a=br(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Pl(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return ac(this._rgb,2,e),this}darken(e){return ac(this._rgb,2,-e),this}saturate(e){return ac(this._rgb,1,e),this}desaturate(e){return ac(this._rgb,1,-e),this}rotate(e){return nz(this._rgb,e),this}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function bs(){}const dz=(()=>{let t=0;return()=>t++})();function Ze(t){return t==null}function St(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function We(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Fn(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function es(t,e){return Fn(t)?t:e}function Fe(t,e){return typeof t>"u"?e:t}const hz=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,HT=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function ut(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function nt(t,e,n,s){let r,i,o;if(St(t))for(i=t.length,r=0;r<i;r++)e.call(n,t[r],r);else if(We(t))for(o=Object.keys(t),i=o.length,r=0;r<i;r++)e.call(n,t[o[r]],o[r])}function Iu(t,e){let n,s,r,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,s=t.length;n<s;++n)if(r=t[n],i=e[n],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function Su(t){if(St(t))return t.map(Su);if(We(t)){const e=Object.create(null),n=Object.keys(t),s=n.length;let r=0;for(;r<s;++r)e[n[r]]=Su(t[n[r]]);return e}return t}function qT(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function fz(t,e,n,s){if(!qT(t))return;const r=e[t],i=n[t];We(r)&&We(i)?il(r,i,s):e[t]=Su(i)}function il(t,e,n){const s=St(e)?e:[e],r=s.length;if(!We(t))return t;n=n||{};const i=n.merger||fz;let o;for(let a=0;a<r;++a){if(o=s[a],!We(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)i(l[c],t,o,n)}return t}function Pa(t,e){return il(t,e,{merger:pz})}function pz(t,e,n){if(!qT(t))return;const s=e[t],r=n[t];We(s)&&We(r)?Pa(s,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Su(r))}const h_={"":t=>t,x:t=>t.x,y:t=>t.y};function gz(t){const e=t.split("."),n=[];let s="";for(const r of e)s+=r,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function mz(t){const e=gz(t);return n=>{for(const s of e){if(s==="")break;n=n&&n[s]}return n}}function wi(t,e){return(h_[e]||(h_[e]=mz(e)))(t)}function Fg(t){return t.charAt(0).toUpperCase()+t.slice(1)}const ol=t=>typeof t<"u",Cr=t=>typeof t=="function",f_=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function yz(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const vt=Math.PI,yt=2*vt,vz=yt+vt,Au=Number.POSITIVE_INFINITY,_z=vt/180,Ct=vt/2,qr=vt/4,p_=vt*2/3,WT=Math.log10,ds=Math.sign;function Ra(t,e,n){return Math.abs(t-e)<n}function g_(t){const e=Math.round(t);t=Ra(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(WT(t))),s=t/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function bz(t){const e=[],n=Math.sqrt(t);let s;for(s=1;s<n;s++)t%s===0&&(e.push(s),e.push(t/s));return n===(n|0)&&e.push(n),e.sort((r,i)=>r-i).pop(),e}function xz(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function al(t){return!xz(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function wz(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function Ez(t,e,n){let s,r,i;for(s=0,r=t.length;s<r;s++)i=t[s][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function Ds(t){return t*(vt/180)}function Tz(t){return t*(180/vt)}function m_(t){if(!Fn(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function KT(t,e){const n=e.x-t.x,s=e.y-t.y,r=Math.sqrt(n*n+s*s);let i=Math.atan2(s,n);return i<-.5*vt&&(i+=yt),{angle:i,distance:r}}function Gf(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function kz(t,e){return(t-e+vz)%yt-vt}function sr(t){return(t%yt+yt)%yt}function ll(t,e,n,s){const r=sr(t),i=sr(e),o=sr(n),a=sr(i-r),l=sr(o-r),c=sr(r-i),u=sr(r-o);return r===i||r===o||s&&i===o||a>l&&c<u}function ln(t,e,n){return Math.max(e,Math.min(n,t))}function Iz(t){return ln(t,-32768,32767)}function fr(t,e,n,s=1e-6){return t>=Math.min(e,n)-s&&t<=Math.max(e,n)+s}function Ug(t,e,n){n=n||(o=>t[o]<e);let s=t.length-1,r=0,i;for(;s-r>1;)i=r+s>>1,n(i)?r=i:s=i;return{lo:r,hi:s}}const si=(t,e,n,s)=>Ug(t,n,s?r=>{const i=t[r][e];return i<n||i===n&&t[r+1][e]===n}:r=>t[r][e]<n),Sz=(t,e,n)=>Ug(t,n,s=>t[s][e]>=n);function Az(t,e,n){let s=0,r=t.length;for(;s<r&&t[s]<e;)s++;for(;r>s&&t[r-1]>n;)r--;return s>0||r<t.length?t.slice(s,r):t}const GT=["push","pop","shift","splice","unshift"];function Cz(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),GT.forEach(n=>{const s="_onData"+Fg(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const o=r.apply(this,i);return t._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...i)}),o}})})}function y_(t,e){const n=t._chartjs;if(!n)return;const s=n.listeners,r=s.indexOf(e);r!==-1&&s.splice(r,1),!(s.length>0)&&(GT.forEach(i=>{delete t[i]}),delete t._chartjs)}function YT(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const QT=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function XT(t,e){let n=[],s=!1;return function(...r){n=r,s||(s=!0,QT.call(window,()=>{s=!1,t.apply(e,n)}))}}function Pz(t,e){let n;return function(...s){return e?(clearTimeout(n),n=setTimeout(t,e,s)):t.apply(this,s),e}}const Bg=t=>t==="start"?"left":t==="end"?"right":"center",en=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,Rz=(t,e,n,s)=>t===(s?"left":"right")?n:t==="center"?(e+n)/2:e;function Oz(t,e,n){const s=e.length;let r=0,i=s;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:h,max:p,minDefined:g,maxDefined:y}=o.getUserBounds();if(g){if(r=Math.min(si(l,u,h).lo,n?s:si(e,u,o.getPixelForValue(h)).lo),c){const v=l.slice(0,r+1).reverse().findIndex(_=>!Ze(_[a.axis]));r-=Math.max(0,v)}r=ln(r,0,s-1)}if(y){let v=Math.max(si(l,o.axis,p,!0).hi+1,n?0:si(e,u,o.getPixelForValue(p),!0).hi+1);if(c){const _=l.slice(v-1).findIndex(E=>!Ze(E[a.axis]));v+=Math.max(0,_)}i=ln(v,r,s)-r}else i=s-r}return{start:r,count:i}}function Dz(t){const{xScale:e,yScale:n,_scaleRanges:s}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!s)return t._scaleRanges=r,!0;const i=s.xmin!==e.min||s.xmax!==e.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,r),i}const lc=t=>t===0||t===1,v_=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*yt/n)),__=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*yt/n)+1,Oa={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Ct)+1,easeOutSine:t=>Math.sin(t*Ct),easeInOutSine:t=>-.5*(Math.cos(vt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>lc(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>lc(t)?t:v_(t,.075,.3),easeOutElastic:t=>lc(t)?t:__(t,.075,.3),easeInOutElastic(t){return lc(t)?t:t<.5?.5*v_(t*2,.1125,.45):.5+.5*__(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Oa.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Oa.easeInBounce(t*2)*.5:Oa.easeOutBounce(t*2-1)*.5+.5};function jg(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function b_(t){return jg(t)?t:new rl(t)}function Fh(t){return jg(t)?t:new rl(t).saturate(.5).darken(.1).hexString()}const Mz=["x","y","borderWidth","radius","tension"],Nz=["color","borderColor","backgroundColor"];function Lz(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:Nz},numbers:{type:"number",properties:Mz}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Vz(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const x_=new Map;function $z(t,e){e=e||{};const n=t+JSON.stringify(e);let s=x_.get(n);return s||(s=new Intl.NumberFormat(t,e),x_.set(n,s)),s}function zg(t,e,n){return $z(e,n).format(t)}const Fz={values(t){return St(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const s=this.chart.options.locale;let r,i=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),i=Uz(t,n)}const o=WT(Math.abs(i)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),zg(t,s,l)}};function Uz(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var JT={formatters:Fz};function Bz(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:JT.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Ei=Object.create(null),Yf=Object.create(null);function Da(t,e){if(!e)return t;const n=e.split(".");for(let s=0,r=n.length;s<r;++s){const i=n[s];t=t[i]||(t[i]=Object.create(null))}return t}function Uh(t,e,n){return typeof e=="string"?il(Da(t,e),n):il(Da(t,""),e)}class jz{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,r)=>Fh(r.backgroundColor),this.hoverBorderColor=(s,r)=>Fh(r.borderColor),this.hoverColor=(s,r)=>Fh(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Uh(this,e,n)}get(e){return Da(this,e)}describe(e,n){return Uh(Yf,e,n)}override(e,n){return Uh(Ei,e,n)}route(e,n,s,r){const i=Da(this,e),o=Da(this,s),a="_"+n;Object.defineProperties(i,{[a]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[r];return We(l)?Object.assign({},c,l):Fe(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var wt=new jz({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Lz,Vz,Bz]);function zz(t){return!t||Ze(t.size)||Ze(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function w_(t,e,n,s,r){let i=e[r];return i||(i=e[r]=t.measureText(r).width,n.push(r)),i>s&&(s=i),s}function Wr(t,e,n){const s=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*s)/s+r}function E_(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Qf(t,e,n,s){ZT(t,e,n,s,null)}function ZT(t,e,n,s,r){let i,o,a,l,c,u,h,p;const g=e.pointStyle,y=e.rotation,v=e.radius;let _=(y||0)*_z;if(g&&typeof g=="object"&&(i=g.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,s),t.rotate(_),t.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),t.restore();return}if(!(isNaN(v)||v<=0)){switch(t.beginPath(),g){default:r?t.ellipse(n,s,r/2,v,0,0,yt):t.arc(n,s,v,0,yt),t.closePath();break;case"triangle":u=r?r/2:v,t.moveTo(n+Math.sin(_)*u,s-Math.cos(_)*v),_+=p_,t.lineTo(n+Math.sin(_)*u,s-Math.cos(_)*v),_+=p_,t.lineTo(n+Math.sin(_)*u,s-Math.cos(_)*v),t.closePath();break;case"rectRounded":c=v*.516,l=v-c,o=Math.cos(_+qr)*l,h=Math.cos(_+qr)*(r?r/2-c:l),a=Math.sin(_+qr)*l,p=Math.sin(_+qr)*(r?r/2-c:l),t.arc(n-h,s-a,c,_-vt,_-Ct),t.arc(n+p,s-o,c,_-Ct,_),t.arc(n+h,s+a,c,_,_+Ct),t.arc(n-p,s+o,c,_+Ct,_+vt),t.closePath();break;case"rect":if(!y){l=Math.SQRT1_2*v,u=r?r/2:l,t.rect(n-u,s-l,2*u,2*l);break}_+=qr;case"rectRot":h=Math.cos(_)*(r?r/2:v),o=Math.cos(_)*v,a=Math.sin(_)*v,p=Math.sin(_)*(r?r/2:v),t.moveTo(n-h,s-a),t.lineTo(n+p,s-o),t.lineTo(n+h,s+a),t.lineTo(n-p,s+o),t.closePath();break;case"crossRot":_+=qr;case"cross":h=Math.cos(_)*(r?r/2:v),o=Math.cos(_)*v,a=Math.sin(_)*v,p=Math.sin(_)*(r?r/2:v),t.moveTo(n-h,s-a),t.lineTo(n+h,s+a),t.moveTo(n+p,s-o),t.lineTo(n-p,s+o);break;case"star":h=Math.cos(_)*(r?r/2:v),o=Math.cos(_)*v,a=Math.sin(_)*v,p=Math.sin(_)*(r?r/2:v),t.moveTo(n-h,s-a),t.lineTo(n+h,s+a),t.moveTo(n+p,s-o),t.lineTo(n-p,s+o),_+=qr,h=Math.cos(_)*(r?r/2:v),o=Math.cos(_)*v,a=Math.sin(_)*v,p=Math.sin(_)*(r?r/2:v),t.moveTo(n-h,s-a),t.lineTo(n+h,s+a),t.moveTo(n+p,s-o),t.lineTo(n-p,s+o);break;case"line":o=r?r/2:Math.cos(_)*v,a=Math.sin(_)*v,t.moveTo(n-o,s-a),t.lineTo(n+o,s+a);break;case"dash":t.moveTo(n,s),t.lineTo(n+Math.cos(_)*(r?r/2:v),s+Math.sin(_)*v);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function cl(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Hg(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function qg(t){t.restore()}function Hz(t,e,n,s,r){if(!e)return t.lineTo(n.x,n.y);if(r==="middle"){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else r==="after"!=!!s?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function qz(t,e,n,s){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function Wz(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Ze(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function Kz(t,e,n,s,r){if(r.strikethrough||r.underline){const i=t.measureText(s),o=e-i.actualBoundingBoxLeft,a=e+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function Gz(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function ul(t,e,n,s,r,i={}){const o=St(e)?e:[e],a=i.strokeWidth>0&&i.strokeColor!=="";let l,c;for(t.save(),t.font=r.string,Wz(t,i),l=0;l<o.length;++l)c=o[l],i.backdrop&&Gz(t,i.backdrop),a&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),Ze(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(c,n,s,i.maxWidth)),t.fillText(c,n,s,i.maxWidth),Kz(t,n,s,c,i),s+=Number(r.lineHeight);t.restore()}function Cu(t,e){const{x:n,y:s,w:r,h:i,radius:o}=e;t.arc(n+o.topLeft,s+o.topLeft,o.topLeft,1.5*vt,vt,!0),t.lineTo(n,s+i-o.bottomLeft),t.arc(n+o.bottomLeft,s+i-o.bottomLeft,o.bottomLeft,vt,Ct,!0),t.lineTo(n+r-o.bottomRight,s+i),t.arc(n+r-o.bottomRight,s+i-o.bottomRight,o.bottomRight,Ct,0,!0),t.lineTo(n+r,s+o.topRight),t.arc(n+r-o.topRight,s+o.topRight,o.topRight,0,-Ct,!0),t.lineTo(n+o.topLeft,s)}const Yz=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Qz=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Xz(t,e){const n=(""+t).match(Yz);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const Jz=t=>+t||0;function Wg(t,e){const n={},s=We(e),r=s?Object.keys(e):e,i=We(t)?s?o=>Fe(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)n[o]=Jz(i(o));return n}function ek(t){return Wg(t,{top:"y",right:"x",bottom:"y",left:"x"})}function no(t){return Wg(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Un(t){const e=ek(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function cn(t,e){t=t||{},e=e||wt.font;let n=Fe(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let s=Fe(t.style,e.style);s&&!(""+s).match(Qz)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const r={family:Fe(t.family,e.family),lineHeight:Xz(Fe(t.lineHeight,e.lineHeight),n),size:n,style:s,weight:Fe(t.weight,e.weight),string:""};return r.string=zz(r),r}function cc(t,e,n,s){let r,i,o;for(r=0,i=t.length;r<i;++r)if(o=t[r],o!==void 0&&o!==void 0)return o}function Zz(t,e,n){const{min:s,max:r}=t,i=HT(e,(r-s)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(s,-Math.abs(i)),max:o(r,i)}}function Ri(t,e){return Object.assign(Object.create(t),e)}function Kg(t,e=[""],n,s,r=()=>t[0]){const i=n||t;typeof s>"u"&&(s=rk("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:s,_getTarget:r,override:a=>Kg([a,...t],e,i,s)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return nk(a,l,()=>aH(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return k_(a).includes(l)},ownKeys(a){return k_(a)},set(a,l,c){const u=a._storage||(a._storage=r());return a[l]=u[l]=c,delete a._keys,!0}})}function go(t,e,n,s){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:tk(t,s),setContext:i=>go(t,i,n,s),override:i=>go(t.override(i),e,n,s)};return new Proxy(r,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,a){return nk(i,o,()=>tH(i,o,a))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,a){return t[o]=a,delete i[o],!0}})}function tk(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:s=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:s,isScriptable:Cr(n)?n:()=>n,isIndexable:Cr(s)?s:()=>s}}const eH=(t,e)=>t?t+Fg(e):e,Gg=(t,e)=>We(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function nk(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const s=n();return t[e]=s,s}function tH(t,e,n){const{_proxy:s,_context:r,_subProxy:i,_descriptors:o}=t;let a=s[e];return Cr(a)&&o.isScriptable(e)&&(a=nH(e,a,t,n)),St(a)&&a.length&&(a=sH(e,a,t,o.isIndexable)),Gg(e,a)&&(a=go(a,r,i&&i[e],o)),a}function nH(t,e,n,s){const{_proxy:r,_context:i,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(i,o||s);return a.delete(t),Gg(t,l)&&(l=Yg(r._scopes,r,t,l)),l}function sH(t,e,n,s){const{_proxy:r,_context:i,_subProxy:o,_descriptors:a}=n;if(typeof i.index<"u"&&s(t))return e[i.index%e.length];if(We(e[0])){const l=e,c=r._scopes.filter(u=>u!==l);e=[];for(const u of l){const h=Yg(c,r,t,u);e.push(go(h,i,o&&o[t],a))}}return e}function sk(t,e,n){return Cr(t)?t(e,n):t}const rH=(t,e)=>t===!0?e:typeof t=="string"?wi(e,t):void 0;function iH(t,e,n,s,r){for(const i of e){const o=rH(n,i);if(o){t.add(o);const a=sk(o._fallback,n,r);if(typeof a<"u"&&a!==n&&a!==s)return a}else if(o===!1&&typeof s<"u"&&n!==s)return null}return!1}function Yg(t,e,n,s){const r=e._rootScopes,i=sk(e._fallback,n,s),o=[...t,...r],a=new Set;a.add(s);let l=T_(a,o,n,i||n,s);return l===null||typeof i<"u"&&i!==n&&(l=T_(a,o,i,l,s),l===null)?!1:Kg(Array.from(a),[""],r,i,()=>oH(e,n,s))}function T_(t,e,n,s,r){for(;n;)n=iH(t,e,n,s,r);return n}function oH(t,e,n){const s=t._getTarget();e in s||(s[e]={});const r=s[e];return St(r)&&We(n)?n:r||{}}function aH(t,e,n,s){let r;for(const i of e)if(r=rk(eH(i,t),n),typeof r<"u")return Gg(t,r)?Yg(n,s,t,r):r}function rk(t,e){for(const n of e){if(!n)continue;const s=n[t];if(typeof s<"u")return s}}function k_(t){let e=t._keys;return e||(e=t._keys=lH(t._scopes)),e}function lH(t){const e=new Set;for(const n of t)for(const s of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(s);return Array.from(e)}const cH=Number.EPSILON||1e-14,mo=(t,e)=>e<t.length&&!t[e].skip&&t[e],ik=t=>t==="x"?"y":"x";function uH(t,e,n,s){const r=t.skip?e:t,i=e,o=n.skip?e:n,a=Gf(i,r),l=Gf(o,i);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=s*c,p=s*u;return{previous:{x:i.x-h*(o.x-r.x),y:i.y-h*(o.y-r.y)},next:{x:i.x+p*(o.x-r.x),y:i.y+p*(o.y-r.y)}}}function dH(t,e,n){const s=t.length;let r,i,o,a,l,c=mo(t,0);for(let u=0;u<s-1;++u)if(l=c,c=mo(t,u+1),!(!l||!c)){if(Ra(e[u],0,cH)){n[u]=n[u+1]=0;continue}r=n[u]/e[u],i=n[u+1]/e[u],a=Math.pow(r,2)+Math.pow(i,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=r*o*e[u],n[u+1]=i*o*e[u])}}function hH(t,e,n="x"){const s=ik(n),r=t.length;let i,o,a,l=mo(t,0);for(let c=0;c<r;++c){if(o=a,a=l,l=mo(t,c+1),!a)continue;const u=a[n],h=a[s];o&&(i=(u-o[n])/3,a[`cp1${n}`]=u-i,a[`cp1${s}`]=h-i*e[c]),l&&(i=(l[n]-u)/3,a[`cp2${n}`]=u+i,a[`cp2${s}`]=h+i*e[c])}}function fH(t,e="x"){const n=ik(e),s=t.length,r=Array(s).fill(0),i=Array(s);let o,a,l,c=mo(t,0);for(o=0;o<s;++o)if(a=l,l=c,c=mo(t,o+1),!!l){if(c){const u=c[e]-l[e];r[o]=u!==0?(c[n]-l[n])/u:0}i[o]=a?c?ds(r[o-1])!==ds(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}dH(t,r,i),hH(t,i,e)}function uc(t,e,n){return Math.max(Math.min(t,n),e)}function pH(t,e){let n,s,r,i,o,a=cl(t[0],e);for(n=0,s=t.length;n<s;++n)o=i,i=a,a=n<s-1&&cl(t[n+1],e),i&&(r=t[n],o&&(r.cp1x=uc(r.cp1x,e.left,e.right),r.cp1y=uc(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=uc(r.cp2x,e.left,e.right),r.cp2y=uc(r.cp2y,e.top,e.bottom)))}function gH(t,e,n,s,r){let i,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")fH(t,r);else{let c=s?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)a=t[i],l=uH(c,a,t[Math.min(i+1,o-(s?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&pH(t,n)}function Qg(){return typeof window<"u"&&typeof document<"u"}function Xg(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Pu(t,e,n){let s;return typeof t=="string"?(s=parseInt(t,10),t.indexOf("%")!==-1&&(s=s/100*e.parentNode[n])):s=t,s}const Od=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function mH(t,e){return Od(t).getPropertyValue(e)}const yH=["top","right","bottom","left"];function li(t,e,n){const s={};n=n?"-"+n:"";for(let r=0;r<4;r++){const i=yH[r];s[i]=parseFloat(t[e+"-"+i+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const vH=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function _H(t,e){const n=t.touches,s=n&&n.length?n[0]:t,{offsetX:r,offsetY:i}=s;let o=!1,a,l;if(vH(r,i,t.target))a=r,l=i;else{const c=e.getBoundingClientRect();a=s.clientX-c.left,l=s.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Qr(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:s}=e,r=Od(n),i=r.boxSizing==="border-box",o=li(r,"padding"),a=li(r,"border","width"),{x:l,y:c,box:u}=_H(t,n),h=o.left+(u&&a.left),p=o.top+(u&&a.top);let{width:g,height:y}=e;return i&&(g-=o.width+a.width,y-=o.height+a.height),{x:Math.round((l-h)/g*n.width/s),y:Math.round((c-p)/y*n.height/s)}}function bH(t,e,n){let s,r;if(e===void 0||n===void 0){const i=t&&Xg(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const o=i.getBoundingClientRect(),a=Od(i),l=li(a,"border","width"),c=li(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,s=Pu(a.maxWidth,i,"clientWidth"),r=Pu(a.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:s||Au,maxHeight:r||Au}}const dc=t=>Math.round(t*10)/10;function xH(t,e,n,s){const r=Od(t),i=li(r,"margin"),o=Pu(r.maxWidth,t,"clientWidth")||Au,a=Pu(r.maxHeight,t,"clientHeight")||Au,l=bH(t,e,n);let{width:c,height:u}=l;if(r.boxSizing==="content-box"){const p=li(r,"border","width"),g=li(r,"padding");c-=g.width+p.width,u-=g.height+p.height}return c=Math.max(0,c-i.width),u=Math.max(0,s?c/s:u-i.height),c=dc(Math.min(c,o,l.maxWidth)),u=dc(Math.min(u,a,l.maxHeight)),c&&!u&&(u=dc(c/2)),(e!==void 0||n!==void 0)&&s&&l.height&&u>l.height&&(u=l.height,c=dc(Math.floor(u*s))),{width:c,height:u}}function I_(t,e,n){const s=e||1,r=Math.floor(t.height*s),i=Math.floor(t.width*s);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==s||o.height!==r||o.width!==i?(t.currentDevicePixelRatio=s,o.height=r,o.width=i,t.ctx.setTransform(s,0,0,s,0,0),!0):!1}const wH=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Qg()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function S_(t,e){const n=mH(t,e),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function Xr(t,e,n,s){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function EH(t,e,n,s){return{x:t.x+n*(e.x-t.x),y:s==="middle"?n<.5?t.y:e.y:s==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function TH(t,e,n,s){const r={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=Xr(t,r,n),a=Xr(r,i,n),l=Xr(i,e,n),c=Xr(o,a,n),u=Xr(a,l,n);return Xr(c,u,n)}const kH=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},IH=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function so(t,e,n){return t?kH(e,n):IH()}function ok(t,e){let n,s;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=s)}function ak(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function lk(t){return t==="angle"?{between:ll,compare:kz,normalize:sr}:{between:fr,compare:(e,n)=>e-n,normalize:e=>e}}function A_({start:t,end:e,count:n,loop:s,style:r}){return{start:t%n,end:e%n,loop:s&&(e-t+1)%n===0,style:r}}function SH(t,e,n){const{property:s,start:r,end:i}=n,{between:o,normalize:a}=lk(s),l=e.length;let{start:c,end:u,loop:h}=t,p,g;if(h){for(c+=l,u+=l,p=0,g=l;p<g&&o(a(e[c%l][s]),r,i);++p)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:h,style:t.style}}function AH(t,e,n){if(!n)return[t];const{property:s,start:r,end:i}=n,o=e.length,{compare:a,between:l,normalize:c}=lk(s),{start:u,end:h,loop:p,style:g}=SH(t,e,n),y=[];let v=!1,_=null,E,S,D;const F=()=>l(r,D,E)&&a(r,D)!==0,M=()=>a(i,E)===0||l(i,D,E),O=()=>v||F(),T=()=>!v||M();for(let b=u,w=u;b<=h;++b)S=e[b%o],!S.skip&&(E=c(S[s]),E!==D&&(v=l(E,r,i),_===null&&O()&&(_=a(E,r)===0?b:w),_!==null&&T()&&(y.push(A_({start:_,end:b,loop:p,count:o,style:g})),_=null),w=b,D=E));return _!==null&&y.push(A_({start:_,end:h,loop:p,count:o,style:g})),y}function CH(t,e){const n=[],s=t.segments;for(let r=0;r<s.length;r++){const i=AH(s[r],t.points,e);i.length&&n.push(...i)}return n}function PH(t,e,n,s){let r=0,i=e-1;if(n&&!s)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(i+=r);i>r&&t[i%e].skip;)i--;return i%=e,{start:r,end:i}}function RH(t,e,n,s){const r=t.length,i=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%r];c.skip||c.stop?a.skip||(s=!1,i.push({start:e%r,end:(l-1)%r,loop:s}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&i.push({start:e%r,end:o%r,loop:s}),i}function OH(t,e){const n=t.points,s=t.options.spanGaps,r=n.length;if(!r)return[];const i=!!t._loop,{start:o,end:a}=PH(n,r,i,s);if(s===!0)return C_(t,[{start:o,end:a,loop:i}],n,e);const l=a<o?a+r:a,c=!!t._fullLoop&&o===0&&a===r-1;return C_(t,RH(n,o,l,c),n,e)}function C_(t,e,n,s){return!s||!s.setContext||!n?e:DH(t,e,n,s)}function DH(t,e,n,s){const r=t._chart.getContext(),i=P_(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=i,h=e[0].start,p=h;function g(y,v,_,E){const S=a?-1:1;if(y!==v){for(y+=l;n[y%l].skip;)y-=S;for(;n[v%l].skip;)v+=S;y%l!==v%l&&(c.push({start:y%l,end:v%l,loop:_,style:E}),u=E,h=v%l)}}for(const y of e){h=a?h:y.start;let v=n[h%l],_;for(p=h+1;p<=y.end;p++){const E=n[p%l];_=P_(s.setContext(Ri(r,{type:"segment",p0:v,p1:E,p0DataIndex:(p-1)%l,p1DataIndex:p%l,datasetIndex:o}))),MH(_,u)&&g(h,p-1,y.loop,u),v=E,u=_}h<p-1&&g(h,p-1,y.loop,u)}return c}function P_(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function MH(t,e){if(!e)return!1;const n=[],s=function(r,i){return jg(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(t,s)!==JSON.stringify(e,s)}function hc(t,e,n){return t.options.clip?t[n]:e[n]}function NH(t,e){const{xScale:n,yScale:s}=t;return n&&s?{left:hc(n,e,"left"),right:hc(n,e,"right"),top:hc(s,e,"top"),bottom:hc(s,e,"bottom")}:e}function LH(t,e){const n=e._clip;if(n.disabled)return!1;const s=NH(e,t.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:s.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class VH{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,s,r){const i=n.listeners[r],o=n.duration;i.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(s-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=QT.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((s,r)=>{if(!s.running||!s.items.length)return;const i=s.items;let o=i.length-1,a=!1,l;for(;o>=0;--o)l=i[o],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(r.draw(),this._notify(r,s,e,"progress")),i.length||(s.running=!1,this._notify(r,s,e,"complete"),s.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let s=n.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,s)),s}listen(e,n,s){this._getAnims(e).listeners[n].push(s)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,r)=>Math.max(s,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const s=n.items;let r=s.length-1;for(;r>=0;--r)s[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var xs=new VH;const R_="transparent",$H={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const s=b_(t||R_),r=s.valid&&b_(e||R_);return r&&r.valid?r.mix(s,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class FH{constructor(e,n,s,r){const i=n[s];r=cc([e.to,r,i,e.from]);const o=cc([e.from,i,r]);this._active=!0,this._fn=e.fn||$H[e.type||typeof o],this._easing=Oa[e.easing]||Oa.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=s,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,s){if(this._active){this._notify(!1);const r=this._target[this._prop],i=s-this._start,o=this._duration-i;this._start=s,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=cc([e.to,n,r,e.from]),this._from=cc([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,s=this._duration,r=this._prop,i=this._from,o=this._loop,a=this._to;let l;if(this._active=i!==a&&(o||n<s),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=i;return}l=n/s%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(i,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,s)=>{e.push({res:n,rej:s})})}_notify(e){const n=e?"res":"rej",s=this._promises||[];for(let r=0;r<s.length;r++)s[r][n]()}}class ck{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!We(e))return;const n=Object.keys(wt.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const i=e[r];if(!We(i))return;const o={};for(const a of n)o[a]=i[a];(St(i.properties)&&i.properties||[r]).forEach(a=>{(a===r||!s.has(a))&&s.set(a,o)})})}_animateOptions(e,n){const s=n.options,r=BH(e,s);if(!r)return[];const i=this._createAnimations(r,s);return s.$shared&&UH(e.options.$animations,s).then(()=>{e.options=s},()=>{}),i}_createAnimations(e,n){const s=this._properties,r=[],i=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(e,n));continue}const u=n[c];let h=i[c];const p=s.get(c);if(h)if(p&&h.active()){h.update(p,u,a);continue}else h.cancel();if(!p||!p.duration){e[c]=u;continue}i[c]=h=new FH(p,e,c,u),r.push(h)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const s=this._createAnimations(e,n);if(s.length)return xs.add(this._chart,s),!0}}function UH(t,e){const n=[],s=Object.keys(e);for(let r=0;r<s.length;r++){const i=t[s[r]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function BH(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function O_(t,e){const n=t&&t.options||{},s=n.reverse,r=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:s?i:r,end:s?r:i}}function jH(t,e,n){if(n===!1)return!1;const s=O_(t,n),r=O_(e,n);return{top:r.end,right:s.end,bottom:r.start,left:s.start}}function zH(t){let e,n,s,r;return We(t)?(e=t.top,n=t.right,s=t.bottom,r=t.left):e=n=s=r=t,{top:e,right:n,bottom:s,left:r,disabled:t===!1}}function uk(t,e){const n=[],s=t._getSortedDatasetMetas(e);let r,i;for(r=0,i=s.length;r<i;++r)n.push(s[r].index);return n}function D_(t,e,n,s={}){const r=t.keys,i=s.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(u=!0,s.all)continue;break}c=t.values[l],Fn(c)&&(i||e===0||ds(e)===ds(c))&&(e+=c)}return!u&&!s.all?0:e}function HH(t,e){const{iScale:n,vScale:s}=e,r=n.axis==="x"?"x":"y",i=s.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[r]:u,[i]:t[u]};return a}function Bh(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function qH(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function WH(t){const{min:e,max:n,minDefined:s,maxDefined:r}=t.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function KH(t,e,n){const s=t[e]||(t[e]={});return s[n]||(s[n]={})}function M_(t,e,n,s){for(const r of e.getMatchingVisibleMetas(s).reverse()){const i=t[r.index];if(n&&i>0||!n&&i<0)return r.index}return null}function N_(t,e){const{chart:n,_cachedMeta:s}=t,r=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:a}=s,l=i.axis,c=o.axis,u=qH(i,o,s),h=e.length;let p;for(let g=0;g<h;++g){const y=e[g],{[l]:v,[c]:_}=y,E=y._stacks||(y._stacks={});p=E[c]=KH(r,u,v),p[a]=_,p._top=M_(p,o,!0,s.type),p._bottom=M_(p,o,!1,s.type);const S=p._visualValues||(p._visualValues={});S[a]=_}}function jh(t,e){const n=t.scales;return Object.keys(n).filter(s=>n[s].axis===e).shift()}function GH(t,e){return Ri(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function YH(t,e,n){return Ri(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Xo(t,e){const n=t.controller.index,s=t.vScale&&t.vScale.axis;if(s){e=e||t._parsed;for(const r of e){const i=r._stacks;if(!i||i[s]===void 0||i[s][n]===void 0)return;delete i[s][n],i[s]._visualValues!==void 0&&i[s]._visualValues[n]!==void 0&&delete i[s]._visualValues[n]}}}const zh=t=>t==="reset"||t==="none",L_=(t,e)=>e?t:Object.assign({},t),QH=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:uk(n,!0),values:null};class ci{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Bh(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Xo(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,s=this.getDataset(),r=(h,p,g,y)=>h==="x"?p:h==="r"?y:g,i=n.xAxisID=Fe(s.xAxisID,jh(e,"x")),o=n.yAxisID=Fe(s.yAxisID,jh(e,"y")),a=n.rAxisID=Fe(s.rAxisID,jh(e,"r")),l=n.indexAxis,c=n.iAxisID=r(l,i,o,a),u=n.vAxisID=r(l,o,i,a);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&y_(this._data,this),e._stacked&&Xo(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),s=this._data;if(We(n)){const r=this._cachedMeta;this._data=HH(n,r)}else if(s!==n){if(s){y_(s,this);const r=this._cachedMeta;Xo(r),r._parsed=[]}n&&Object.isExtensible(n)&&Cz(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,s=this.getDataset();let r=!1;this._dataCheck();const i=n._stacked;n._stacked=Bh(n.vScale,n),n.stack!==s.stack&&(r=!0,Xo(n),n.stack=s.stack),this._resyncElements(e),(r||i!==n._stacked)&&(N_(this,n._parsed),n._stacked=Bh(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:s,_data:r}=this,{iScale:i,_stacked:o}=s,a=i.axis;let l=e===0&&n===r.length?!0:s._sorted,c=e>0&&s._parsed[e-1],u,h,p;if(this._parsing===!1)s._parsed=r,s._sorted=!0,p=r;else{St(r[e])?p=this.parseArrayData(s,r,e,n):We(r[e])?p=this.parseObjectData(s,r,e,n):p=this.parsePrimitiveData(s,r,e,n);const g=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<n;++u)s._parsed[u+e]=h=p[u],l&&(g()&&(l=!1),c=h);s._sorted=l}o&&N_(this,p)}parsePrimitiveData(e,n,s,r){const{iScale:i,vScale:o}=e,a=i.axis,l=o.axis,c=i.getLabels(),u=i===o,h=new Array(r);let p,g,y;for(p=0,g=r;p<g;++p)y=p+s,h[p]={[a]:u||i.parse(c[y],y),[l]:o.parse(n[y],y)};return h}parseArrayData(e,n,s,r){const{xScale:i,yScale:o}=e,a=new Array(r);let l,c,u,h;for(l=0,c=r;l<c;++l)u=l+s,h=n[u],a[l]={x:i.parse(h[0],u),y:o.parse(h[1],u)};return a}parseObjectData(e,n,s,r){const{xScale:i,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(r);let u,h,p,g;for(u=0,h=r;u<h;++u)p=u+s,g=n[p],c[u]={x:i.parse(wi(g,a),p),y:o.parse(wi(g,l),p)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,s){const r=this.chart,i=this._cachedMeta,o=n[e.axis],a={keys:uk(r,!0),values:n._stacks[e.axis]._visualValues};return D_(a,o,i.index,{mode:s})}updateRangeFromParsed(e,n,s,r){const i=s[n.axis];let o=i===null?NaN:i;const a=r&&s._stacks[n.axis];r&&a&&(r.values=a,o=D_(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const s=this._cachedMeta,r=s._parsed,i=s._sorted&&e===s.iScale,o=r.length,a=this._getOtherScale(e),l=QH(n,s,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=WH(a);let p,g;function y(){g=r[p];const v=g[a.axis];return!Fn(g[e.axis])||u>v||h<v}for(p=0;p<o&&!(!y()&&(this.updateRangeFromParsed(c,e,g,l),i));++p);if(i){for(p=o-1;p>=0;--p)if(!y()){this.updateRangeFromParsed(c,e,g,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,s=[];let r,i,o;for(r=0,i=n.length;r<i;++r)o=n[r][e.axis],Fn(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,s=n.iScale,r=n.vScale,i=this.getParsed(e);return{label:s?""+s.getLabelForValue(i[s.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=zH(Fe(this.options.clip,jH(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,s=this._cachedMeta,r=s.data||[],i=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,c=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(e,i,a,l),u=a;u<a+l;++u){const h=r[u];h.hidden||(h.active&&c?o.push(h):h.draw(e,i))}for(u=0;u<o.length;++u)o[u].draw(e,i)}getStyle(e,n){const s=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,n,s){const r=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=YH(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=GH(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=s,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",s){const r=n==="active",i=this._cachedDataOpts,o=e+"-"+n,a=i[o],l=this.enableOptionSharing&&ol(s);if(a)return L_(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),h=r?[`${e}Hover`,"hover",e,""]:[e,""],p=c.getOptionScopes(this.getDataset(),u),g=Object.keys(wt.elements[e]),y=()=>this.getContext(s,r,n),v=c.resolveNamedOptions(p,g,y,h);return v.$shared&&(v.$shared=l,i[o]=Object.freeze(L_(v,l))),v}_resolveAnimations(e,n,s){const r=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,a=i[o];if(a)return a;let l;if(r.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,n),p=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(p,this.getContext(e,s,n))}const c=new ck(r,l&&l.animations);return l&&l._cacheable&&(i[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||zh(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const s=this.resolveDataElementOptions(e,n),r=this._sharedOptions,i=this.getSharedOptions(s),o=this.includeOptions(n,i)||i!==r;return this.updateSharedOptions(i,n,s),{sharedOptions:i,includeOptions:o}}updateElement(e,n,s,r){zh(r)?Object.assign(e,s):this._resolveAnimations(n,r).update(e,s)}updateSharedOptions(e,n,s){e&&!zh(n)&&this._resolveAnimations(void 0,n).update(e,s)}_setStyle(e,n,s,r){e.active=r;const i=this.getStyle(n,r);this._resolveAnimations(n,s,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,n,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,s=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const r=s.length,i=n.length,o=Math.min(i,r);o&&this.parse(0,o),i>r?this._insertElements(r,i-r,e):i<r&&this._removeElements(i,r-i)}_insertElements(e,n,s=!0){const r=this._cachedMeta,i=r.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(i),a=e;a<o;++a)i[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,n),s&&this.updateElements(i,e,n,"reset")}updateElements(e,n,s,r){}_removeElements(e,n){const s=this._cachedMeta;if(this._parsing){const r=s._parsed.splice(e,n);s._stacked&&Xo(s,r)}s.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,s,r]=e;this[n](s,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ye(ci,"defaults",{}),ye(ci,"datasetElementType",null),ye(ci,"dataElementType",null);function XH(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let s=[];for(let r=0,i=n.length;r<i;r++)s=s.concat(n[r].controller.getAllParsedValues(t));t._cache.$bar=YT(s.sort((r,i)=>r-i))}return t._cache.$bar}function JH(t){const e=t.iScale,n=XH(e,t.type);let s=e._length,r,i,o,a;const l=()=>{o===32767||o===-32768||(ol(a)&&(s=Math.min(s,Math.abs(o-a)||s)),a=o)};for(r=0,i=n.length;r<i;++r)o=e.getPixelForValue(n[r]),l();for(a=void 0,r=0,i=e.ticks.length;r<i;++r)o=e.getPixelForTick(r),l();return s}function ZH(t,e,n,s){const r=n.barThickness;let i,o;return Ze(r)?(i=e.min*n.categoryPercentage,o=n.barPercentage):(i=r*s,o=1),{chunk:i/s,ratio:o,start:e.pixels[t]-i/2}}function eq(t,e,n,s){const r=e.pixels,i=r[t];let o=t>0?r[t-1]:null,a=t<r.length-1?r[t+1]:null;const l=n.categoryPercentage;o===null&&(o=i-(a===null?e.end-e.start:a-i)),a===null&&(a=i+i-o);const c=i-(i-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/s,ratio:n.barPercentage,start:c}}function tq(t,e,n,s){const r=n.parse(t[0],s),i=n.parse(t[1],s),o=Math.min(r,i),a=Math.max(r,i);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:r,end:i,min:o,max:a}}function dk(t,e,n,s){return St(t)?tq(t,e,n,s):e[n.axis]=n.parse(t,s),e}function V_(t,e,n,s){const r=t.iScale,i=t.vScale,o=r.getLabels(),a=r===i,l=[];let c,u,h,p;for(c=n,u=n+s;c<u;++c)p=e[c],h={},h[r.axis]=a||r.parse(o[c],c),l.push(dk(p,h,i,c));return l}function Hh(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function nq(t,e,n){return t!==0?ds(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function sq(t){let e,n,s,r,i;return t.horizontal?(e=t.base>t.x,n="left",s="right"):(e=t.base<t.y,n="bottom",s="top"),e?(r="end",i="start"):(r="start",i="end"),{start:n,end:s,reverse:e,top:r,bottom:i}}function rq(t,e,n,s){let r=e.borderSkipped;const i={};if(!r){t.borderSkipped=i;return}if(r===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=sq(t);r==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===s?r=c:(n._bottom||0)===s?r=u:(i[$_(u,o,a,l)]=!0,r=c)),i[$_(r,o,a,l)]=!0,t.borderSkipped=i}function $_(t,e,n,s){return s?(t=iq(t,e,n),t=F_(t,n,e)):t=F_(t,e,n),t}function iq(t,e,n){return t===e?n:t===n?e:t}function F_(t,e,n){return t==="start"?e:t==="end"?n:t}function oq(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class $c extends ci{parsePrimitiveData(e,n,s,r){return V_(e,n,s,r)}parseArrayData(e,n,s,r){return V_(e,n,s,r)}parseObjectData(e,n,s,r){const{iScale:i,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=i.axis==="x"?a:l,u=o.axis==="x"?a:l,h=[];let p,g,y,v;for(p=s,g=s+r;p<g;++p)v=n[p],y={},y[i.axis]=i.parse(wi(v,c),p),h.push(dk(wi(v,u),y,o,p));return h}updateRangeFromParsed(e,n,s,r){super.updateRangeFromParsed(e,n,s,r);const i=s._custom;i&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:s,vScale:r}=n,i=this.getParsed(e),o=i._custom,a=Hh(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+s.getLabelForValue(i[s.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,s,r){const i=r==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:p}=this._getSharedOptions(n,r);for(let g=n;g<n+s;g++){const y=this.getParsed(g),v=i||Ze(y[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(g),_=this._calculateBarIndexPixels(g,u),E=(y._stacks||{})[a.axis],S={horizontal:c,base:v.base,enableBorderRadius:!E||Hh(y._custom)||o===E._top||o===E._bottom,x:c?v.head:_.center,y:c?_.center:v.head,height:c?_.size:Math.abs(v.size),width:c?Math.abs(v.size):_.size};p&&(S.options=h||this.resolveDataElementOptions(g,e[g].active?"active":r));const D=S.options||e[g].options;rq(S,D,E,o),oq(S,D,u.ratio),this.updateElement(e[g],g,S,r)}}_getStacks(e,n){const{iScale:s}=this._cachedMeta,r=s.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),i=s.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[s.axis],c=u=>{const h=u._parsed.find(g=>g[s.axis]===l),p=h&&h[u.vScale.axis];if(Ze(p)||isNaN(p))return!0};for(const u of r)if(!(n!==void 0&&c(u))&&((i===!1||o.indexOf(u.stack)===-1||i===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,s){const r=this._getStacks(e,s),i=n!==void 0?r.indexOf(n):-1;return i===-1?r.length-1:i}_getRuler(){const e=this.options,n=this._cachedMeta,s=n.iScale,r=[];let i,o;for(i=0,o=n.data.length;i<o;++i)r.push(s.getPixelForValue(this.getParsed(i)[s.axis],i));const a=e.barThickness;return{min:a||JH(n),pixels:r,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:s,index:r},options:{base:i,minBarLength:o}}=this,a=i||0,l=this.getParsed(e),c=l._custom,u=Hh(c);let h=l[n.axis],p=0,g=s?this.applyStack(n,l,s):h,y,v;g!==h&&(p=g-h,g=h),u&&(h=c.barStart,g=c.barEnd-c.barStart,h!==0&&ds(h)!==ds(c.barEnd)&&(p=0),p+=h);const _=!Ze(i)&&!u?i:p;let E=n.getPixelForValue(_);if(this.chart.getDataVisibility(e)?y=n.getPixelForValue(p+g):y=E,v=y-E,Math.abs(v)<o){v=nq(v,n,a)*o,h===a&&(E-=v/2);const S=n.getPixelForDecimal(0),D=n.getPixelForDecimal(1),F=Math.min(S,D),M=Math.max(S,D);E=Math.max(Math.min(E,M),F),y=E+v,s&&!u&&(l._stacks[n.axis]._visualValues[r]=n.getValueForPixel(y)-n.getValueForPixel(E))}if(E===n.getPixelForValue(a)){const S=ds(v)*n.getLineWidthForValue(a)/2;E+=S,v-=S}return{size:v,base:E,head:y,center:y+v/2}}_calculateBarIndexPixels(e,n){const s=n.scale,r=this.options,i=r.skipNull,o=Fe(r.maxBarThickness,1/0);let a,l;if(n.grouped){const c=i?this._getStackCount(e):n.stackCount,u=r.barThickness==="flex"?eq(e,n,r,c):ZH(e,n,r,c),h=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0);a=u.start+u.chunk*h+u.chunk/2,l=Math.min(o,u.chunk*u.ratio)}else a=s.getPixelForValue(this.getParsed(e)[s.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,s=e.data,r=s.length;let i=0;for(;i<r;++i)this.getParsed(i)[n.axis]!==null&&!s[i].hidden&&s[i].draw(this._ctx)}}ye($c,"id","bar"),ye($c,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),ye($c,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function aq(t,e,n){let s=1,r=1,i=0,o=0;if(e<yt){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),h=Math.cos(l),p=Math.sin(l),g=(D,F,M)=>ll(D,a,l,!0)?1:Math.max(F,F*n,M,M*n),y=(D,F,M)=>ll(D,a,l,!0)?-1:Math.min(F,F*n,M,M*n),v=g(0,c,h),_=g(Ct,u,p),E=y(vt,c,h),S=y(vt+Ct,u,p);s=(v-E)/2,r=(_-S)/2,i=-(v+E)/2,o=-(_+S)/2}return{ratioX:s,ratioY:r,offsetX:i,offsetY:o}}class ua extends ci{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const s=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=s;else{let i=l=>+s[l];if(We(s[e])){const{key:l="value"}=this._parsing;i=c=>+wi(s[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)r._parsed[o]=i(o)}}_getRotation(){return Ds(this.options.rotation-90)}_getCircumference(){return Ds(this.options.circumference)}_getRotationExtents(){let e=yt,n=-yt;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const r=this.chart.getDatasetMeta(s).controller,i=r._getRotation(),o=r._getCircumference();e=Math.min(e,i),n=Math.max(n,i+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:s}=n,r=this._cachedMeta,i=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,a=Math.max((Math.min(s.width,s.height)-o)/2,0),l=Math.min(hz(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:p,ratioY:g,offsetX:y,offsetY:v}=aq(h,u,l),_=(s.width-o)/p,E=(s.height-o)/g,S=Math.max(Math.min(_,E)/2,0),D=HT(this.options.radius,S),F=Math.max(D*l,0),M=(D-F)/this._getVisibleDatasetWeightTotal();this.offsetX=y*D,this.offsetY=v*D,r.total=this.calculateTotal(),this.outerRadius=D-M*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-M*c,0),this.updateElements(i,0,i.length,e)}_circumference(e,n){const s=this.options,r=this._cachedMeta,i=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*i/yt)}updateElements(e,n,s,r){const i=r==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,h=(a.top+a.bottom)/2,p=i&&c.animateScale,g=p?0:this.innerRadius,y=p?0:this.outerRadius,{sharedOptions:v,includeOptions:_}=this._getSharedOptions(n,r);let E=this._getRotation(),S;for(S=0;S<n;++S)E+=this._circumference(S,i);for(S=n;S<n+s;++S){const D=this._circumference(S,i),F=e[S],M={x:u+this.offsetX,y:h+this.offsetY,startAngle:E,endAngle:E+D,circumference:D,outerRadius:y,innerRadius:g};_&&(M.options=v||this.resolveDataElementOptions(S,F.active?"active":r)),E+=D,this.updateElement(F,S,M,r)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let s=0,r;for(r=0;r<n.length;r++){const i=e._parsed[r];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(r)&&!n[r].hidden&&(s+=Math.abs(i))}return s}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?yt*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,s=this.chart,r=s.data.labels||[],i=zg(n._parsed[e],s.options.locale);return{label:r[e]||"",value:i}}getMaxBorderWidth(e){let n=0;const s=this.chart;let r,i,o,a,l;if(!e){for(r=0,i=s.data.datasets.length;r<i;++r)if(s.isDatasetVisible(r)){o=s.getDatasetMeta(r),e=o.data,a=o.controller;break}}if(!e)return 0;for(r=0,i=e.length;r<i;++r)l=a.resolveDataElementOptions(r),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let s=0,r=e.length;s<r;++s){const i=this.resolveDataElementOptions(s);n=Math.max(n,i.offset||0,i.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(e){return Math.max(Fe(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}ye(ua,"id","doughnut"),ye(ua,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),ye(ua,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),ye(ua,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:s,color:r}}=e.legend.options;return n.labels.map((i,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:i,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:r,lineWidth:l.borderWidth,pointStyle:s,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}});class Fc extends ci{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:s,data:r=[],_dataset:i}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=Oz(n,r,o);this._drawStart=a,this._drawCount=l,Dz(n)&&(a=0,l=r.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!i._decimated,s.points=r;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(s,void 0,{animated:!o,options:c},e),this.updateElements(r,a,l,e)}updateElements(e,n,s,r){const i=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(n,r),p=o.axis,g=a.axis,{spanGaps:y,segment:v}=this.options,_=al(y)?y:Number.POSITIVE_INFINITY,E=this.chart._animationsDisabled||i||r==="none",S=n+s,D=e.length;let F=n>0&&this.getParsed(n-1);for(let M=0;M<D;++M){const O=e[M],T=E?O:{};if(M<n||M>=S){T.skip=!0;continue}const b=this.getParsed(M),w=Ze(b[g]),C=T[p]=o.getPixelForValue(b[p],M),k=T[g]=i||w?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,b,l):b[g],M);T.skip=isNaN(C)||isNaN(k)||w,T.stop=M>0&&Math.abs(b[p]-F[p])>_,v&&(T.parsed=b,T.raw=c.data[M]),h&&(T.options=u||this.resolveDataElementOptions(M,O.active?"active":r)),E||this.updateElement(O,M,T,r),F=b}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,s=n.options&&n.options.borderWidth||0,r=e.data||[];if(!r.length)return s;const i=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}ye(Fc,"id","line"),ye(Fc,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ye(Fc,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Xf extends ua{}ye(Xf,"id","pie"),ye(Xf,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});function Kr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Jg{constructor(e){ye(this,"options");this.options=e||{}}static override(e){Object.assign(Jg.prototype,e)}init(){}formats(){return Kr()}parse(){return Kr()}format(){return Kr()}add(){return Kr()}diff(){return Kr()}startOf(){return Kr()}endOf(){return Kr()}}var lq={_date:Jg};function cq(t,e,n,s){const{controller:r,data:i,_sorted:o}=t,a=r._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&i.length){const c=a._reversePixels?Sz:si;if(s){if(r._sharedOptions){const u=i[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const p=c(i,e,n-h),g=c(i,e,n+h);return{lo:p.lo,hi:g.hi}}}}else{const u=c(i,e,n);if(l){const{vScale:h}=r._cachedMeta,{_parsed:p}=t,g=p.slice(0,u.lo+1).reverse().findIndex(v=>!Ze(v[h.axis]));u.lo-=Math.max(0,g);const y=p.slice(u.hi).findIndex(v=>!Ze(v[h.axis]));u.hi+=Math.max(0,y)}return u}}return{lo:0,hi:i.length-1}}function Dd(t,e,n,s,r){const i=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=i.length;a<l;++a){const{index:c,data:u}=i[a],{lo:h,hi:p}=cq(i[a],e,o,r);for(let g=h;g<=p;++g){const y=u[g];y.skip||s(y,c,g)}}}function uq(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(s,r){const i=e?Math.abs(s.x-r.x):0,o=n?Math.abs(s.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function qh(t,e,n,s,r){const i=[];return!r&&!t.isPointInArea(e)||Dd(t,n,e,function(a,l,c){!r&&!cl(a,t.chartArea,0)||a.inRange(e.x,e.y,s)&&i.push({element:a,datasetIndex:l,index:c})},!0),i}function dq(t,e,n,s){let r=[];function i(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],s),{angle:h}=KT(o,{x:e.x,y:e.y});ll(h,c,u)&&r.push({element:o,datasetIndex:a,index:l})}return Dd(t,n,e,i),r}function hq(t,e,n,s,r,i){let o=[];const a=uq(n);let l=Number.POSITIVE_INFINITY;function c(u,h,p){const g=u.inRange(e.x,e.y,r);if(s&&!g)return;const y=u.getCenterPoint(r);if(!(!!i||t.isPointInArea(y))&&!g)return;const _=a(e,y);_<l?(o=[{element:u,datasetIndex:h,index:p}],l=_):_===l&&o.push({element:u,datasetIndex:h,index:p})}return Dd(t,n,e,c),o}function Wh(t,e,n,s,r,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!s?dq(t,e,n,r):hq(t,e,n,s,r,i)}function U_(t,e,n,s,r){const i=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Dd(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],r)&&(i.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,r))}),s&&!a?[]:i}var fq={modes:{index(t,e,n,s){const r=Qr(e,t),i=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?qh(t,r,i,s,o):Wh(t,r,i,!1,s,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,s){const r=Qr(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?qh(t,r,i,s,o):Wh(t,r,i,!1,s,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,s){const r=Qr(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return qh(t,r,i,s,o)},nearest(t,e,n,s){const r=Qr(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return Wh(t,r,i,n.intersect,s,o)},x(t,e,n,s){const r=Qr(e,t);return U_(t,r,"x",n.intersect,s)},y(t,e,n,s){const r=Qr(e,t);return U_(t,r,"y",n.intersect,s)}}};const hk=["left","top","right","bottom"];function Jo(t,e){return t.filter(n=>n.pos===e)}function B_(t,e){return t.filter(n=>hk.indexOf(n.pos)===-1&&n.box.axis===e)}function Zo(t,e){return t.sort((n,s)=>{const r=e?s:n,i=e?n:s;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function pq(t){const e=[];let n,s,r,i,o,a;for(n=0,s=(t||[]).length;n<s;++n)r=t[n],{position:i,options:{stack:o,stackWeight:a=1}}=r,e.push({index:n,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&i+o,stackWeight:a});return e}function gq(t){const e={};for(const n of t){const{stack:s,pos:r,stackWeight:i}=n;if(!s||!hk.includes(r))continue;const o=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function mq(t,e){const n=gq(t),{vBoxMaxWidth:s,hBoxMaxHeight:r}=e;let i,o,a;for(i=0,o=t.length;i<o;++i){a=t[i];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*s:l&&e.availableWidth,a.height=r):(a.width=s,a.height=u?u*r:l&&e.availableHeight)}return n}function yq(t){const e=pq(t),n=Zo(e.filter(c=>c.box.fullSize),!0),s=Zo(Jo(e,"left"),!0),r=Zo(Jo(e,"right")),i=Zo(Jo(e,"top"),!0),o=Zo(Jo(e,"bottom")),a=B_(e,"x"),l=B_(e,"y");return{fullSize:n,leftAndTop:s.concat(i),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:Jo(e,"chartArea"),vertical:s.concat(r).concat(l),horizontal:i.concat(o).concat(a)}}function j_(t,e,n,s){return Math.max(t[n],e[n])+Math.max(t[s],e[s])}function fk(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function vq(t,e,n,s){const{pos:r,box:i}=n,o=t.maxPadding;if(!We(r)){n.size&&(t[r]-=n.size);const h=s[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?i.height:i.width),n.size=h.size/h.count,t[r]+=n.size}i.getPadding&&fk(o,i.getPadding());const a=Math.max(0,e.outerWidth-j_(o,t,"left","right")),l=Math.max(0,e.outerHeight-j_(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function _q(t){const e=t.maxPadding;function n(s){const r=Math.max(e[s]-t[s],0);return t[s]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function bq(t,e){const n=e.maxPadding;function s(r){const i={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{i[o]=Math.max(e[o],n[o])}),i}return s(t?["left","right"]:["top","bottom"])}function da(t,e,n,s){const r=[];let i,o,a,l,c,u;for(i=0,o=t.length,c=0;i<o;++i){a=t[i],l=a.box,l.update(a.width||e.w,a.height||e.h,bq(a.horizontal,e));const{same:h,other:p}=vq(e,n,a,s);c|=h&&r.length,u=u||p,l.fullSize||r.push(a)}return c&&da(r,e,n,s)||u}function fc(t,e,n,s,r){t.top=n,t.left=e,t.right=e+s,t.bottom=n+r,t.width=s,t.height=r}function z_(t,e,n,s){const r=n.padding;let{x:i,y:o}=e;for(const a of t){const l=a.box,c=s[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=e.w*u,p=c.size||l.height;ol(c.start)&&(o=c.start),l.fullSize?fc(l,r.left,o,n.outerWidth-r.right-r.left,p):fc(l,e.left+c.placed,o,h,p),c.start=o,c.placed+=h,o=l.bottom}else{const h=e.h*u,p=c.size||l.width;ol(c.start)&&(i=c.start),l.fullSize?fc(l,i,r.top,p,n.outerHeight-r.bottom-r.top):fc(l,i,e.top+c.placed,p,h),c.start=i,c.placed+=h,i=l.right}}e.x=i,e.y=o}var Dn={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,s){if(!t)return;const r=Un(t.options.layout.padding),i=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=yq(t.boxes),l=a.vertical,c=a.horizontal;nt(t.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});const u=l.reduce((v,_)=>_.box.options&&_.box.options.display===!1?v:v+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/u,hBoxMaxHeight:o/2}),p=Object.assign({},r);fk(p,Un(s));const g=Object.assign({maxPadding:p,w:i,h:o,x:r.left,y:r.top},r),y=mq(l.concat(c),h);da(a.fullSize,g,h,y),da(l,g,h,y),da(c,g,h,y)&&da(l,g,h,y),_q(g),z_(a.leftAndTop,g,h,y),g.x+=g.w,g.y+=g.h,z_(a.rightAndBottom,g,h,y),t.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},nt(a.chartArea,v=>{const _=v.box;Object.assign(_,t.chartArea),_.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class pk{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,s){}removeEventListener(e,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,s,r){return n=Math.max(0,n||e.width),s=s||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):s)}}isAttached(e){return!0}updateConfig(e){}}class xq extends pk{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Uc="$chartjs",wq={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},H_=t=>t===null||t==="";function Eq(t,e){const n=t.style,s=t.getAttribute("height"),r=t.getAttribute("width");if(t[Uc]={initial:{height:s,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",H_(r)){const i=S_(t,"width");i!==void 0&&(t.width=i)}if(H_(s))if(t.style.height==="")t.height=t.width/(e||2);else{const i=S_(t,"height");i!==void 0&&(t.height=i)}return t}const gk=wH?{passive:!0}:!1;function Tq(t,e,n){t&&t.addEventListener(e,n,gk)}function kq(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,gk)}function Iq(t,e){const n=wq[t.type]||t.type,{x:s,y:r}=Qr(t,e);return{type:n,chart:e,native:t,x:s!==void 0?s:null,y:r!==void 0?r:null}}function Ru(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function Sq(t,e,n){const s=t.canvas,r=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||Ru(a.addedNodes,s),o=o&&!Ru(a.removedNodes,s);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function Aq(t,e,n){const s=t.canvas,r=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||Ru(a.removedNodes,s),o=o&&!Ru(a.addedNodes,s);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const dl=new Map;let q_=0;function mk(){const t=window.devicePixelRatio;t!==q_&&(q_=t,dl.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function Cq(t,e){dl.size||window.addEventListener("resize",mk),dl.set(t,e)}function Pq(t){dl.delete(t),dl.size||window.removeEventListener("resize",mk)}function Rq(t,e,n){const s=t.canvas,r=s&&Xg(s);if(!r)return;const i=XT((a,l)=>{const c=r.clientWidth;n(a,l),c<r.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||i(c,u)});return o.observe(r),Cq(t,i),o}function Kh(t,e,n){n&&n.disconnect(),e==="resize"&&Pq(t)}function Oq(t,e,n){const s=t.canvas,r=XT(i=>{t.ctx!==null&&n(Iq(i,t))},t);return Tq(s,e,r),r}class Dq extends pk{acquireContext(e,n){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(Eq(e,n),s):null}releaseContext(e){const n=e.canvas;if(!n[Uc])return!1;const s=n[Uc].initial;["height","width"].forEach(i=>{const o=s[i];Ze(o)?n.removeAttribute(i):n.setAttribute(i,o)});const r=s.style||{};return Object.keys(r).forEach(i=>{n.style[i]=r[i]}),n.width=n.width,delete n[Uc],!0}addEventListener(e,n,s){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),o={attach:Sq,detach:Aq,resize:Rq}[n]||Oq;r[n]=o(e,n,s)}removeEventListener(e,n){const s=e.$proxies||(e.$proxies={}),r=s[n];if(!r)return;({attach:Kh,detach:Kh,resize:Kh}[n]||kq)(e,n,r),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,s,r){return xH(e,n,s,r)}isAttached(e){const n=e&&Xg(e);return!!(n&&n.isConnected)}}function Mq(t){return!Qg()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?xq:Dq}var _c;let Ks=(_c=class{constructor(){ye(this,"x");ye(this,"y");ye(this,"active",!1);ye(this,"options");ye(this,"$animations")}tooltipPosition(e){const{x:n,y:s}=this.getProps(["x","y"],e);return{x:n,y:s}}hasValue(){return al(this.x)&&al(this.y)}getProps(e,n){const s=this.$animations;if(!n||!s)return this;const r={};return e.forEach(i=>{r[i]=s[i]&&s[i].active()?s[i]._to:this[i]}),r}},ye(_c,"defaults",{}),ye(_c,"defaultRoutes"),_c);function Nq(t,e){const n=t.options.ticks,s=Lq(t),r=Math.min(n.maxTicksLimit||s,s),i=n.major.enabled?$q(e):[],o=i.length,a=i[0],l=i[o-1],c=[];if(o>r)return Fq(e,c,i,o/r),c;const u=Vq(i,e,r);if(o>0){let h,p;const g=o>1?Math.round((l-a)/(o-1)):null;for(pc(e,c,u,Ze(g)?0:a-g,a),h=0,p=o-1;h<p;h++)pc(e,c,u,i[h],i[h+1]);return pc(e,c,u,l,Ze(g)?e.length:l+g),c}return pc(e,c,u),c}function Lq(t){const e=t.options.offset,n=t._tickSize(),s=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(s,r))}function Vq(t,e,n){const s=Uq(t),r=e.length/n;if(!s)return Math.max(r,1);const i=bz(s);for(let o=0,a=i.length-1;o<a;o++){const l=i[o];if(l>r)return l}return Math.max(r,1)}function $q(t){const e=[];let n,s;for(n=0,s=t.length;n<s;n++)t[n].major&&e.push(n);return e}function Fq(t,e,n,s){let r=0,i=n[0],o;for(s=Math.ceil(s),o=0;o<t.length;o++)o===i&&(e.push(t[o]),r++,i=n[r*s])}function pc(t,e,n,s,r){const i=Fe(s,0),o=Math.min(Fe(r,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),r&&(l=r-s,n=l/Math.floor(l/n)),u=i;u<0;)a++,u=Math.round(i+a*n);for(c=Math.max(i,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(i+a*n))}function Uq(t){const e=t.length;let n,s;if(e<2)return!1;for(s=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==s)return!1;return s}const Bq=t=>t==="left"?"right":t==="right"?"left":t,W_=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,K_=(t,e)=>Math.min(e||t,t);function G_(t,e){const n=[],s=t.length/e,r=t.length;let i=0;for(;i<r;i+=s)n.push(t[Math.floor(i)]);return n}function jq(t,e,n){const s=t.ticks.length,r=Math.min(e,s-1),i=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(r),c;if(!(n&&(s===1?c=Math.max(l-i,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(r-1))/2,l+=r<e?c:-c,l<i-a||l>o+a)))return l}function zq(t,e){nt(t,n=>{const s=n.gc,r=s.length/2;let i;if(r>e){for(i=0;i<r;++i)delete n.data[s[i]];s.splice(0,r)}})}function ea(t){return t.drawTicks?t.tickLength:0}function Y_(t,e){if(!t.display)return 0;const n=cn(t.font,e),s=Un(t.padding);return(St(t.text)?t.text.length:1)*n.lineHeight+s.height}function Hq(t,e){return Ri(t,{scale:e,type:"scale"})}function qq(t,e,n){return Ri(t,{tick:n,index:e,type:"tick"})}function Wq(t,e,n){let s=Bg(t);return(n&&e!=="right"||!n&&e==="right")&&(s=Bq(s)),s}function Kq(t,e,n,s){const{top:r,left:i,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let h=0,p,g,y;const v=o-r,_=a-i;if(t.isHorizontal()){if(g=en(s,i,a),We(n)){const E=Object.keys(n)[0],S=n[E];y=u[E].getPixelForValue(S)+v-e}else n==="center"?y=(c.bottom+c.top)/2+v-e:y=W_(t,n,e);p=a-i}else{if(We(n)){const E=Object.keys(n)[0],S=n[E];g=u[E].getPixelForValue(S)-_+e}else n==="center"?g=(c.left+c.right)/2-_+e:g=W_(t,n,e);y=en(s,o,r),h=n==="left"?-Ct:Ct}return{titleX:g,titleY:y,maxWidth:p,rotation:h}}class Oo extends Ks{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:s,_suggestedMax:r}=this;return e=es(e,Number.POSITIVE_INFINITY),n=es(n,Number.NEGATIVE_INFINITY),s=es(s,Number.POSITIVE_INFINITY),r=es(r,Number.NEGATIVE_INFINITY),{min:es(e,s),max:es(n,r),minDefined:Fn(e),maxDefined:Fn(n)}}getMinMax(e){let{min:n,max:s,minDefined:r,maxDefined:i}=this.getUserBounds(),o;if(r&&i)return{min:n,max:s};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),r||(n=Math.min(n,o.min)),i||(s=Math.max(s,o.max));return n=i&&n>s?s:n,s=r&&n>s?n:s,{min:es(n,es(s,n)),max:es(s,es(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ut(this.options.beforeUpdate,[this])}update(e,n,s){const{beginAtZero:r,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Zz(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?G_(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Nq(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,e=!e),this._startPixel=n,this._endPixel=s,this._reversePixels=e,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ut(this.options.afterUpdate,[this])}beforeSetDimensions(){ut(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ut(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ut(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ut(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let s,r,i;for(s=0,r=e.length;s<r;s++)i=e[s],i.label=ut(n.callback,[i.value,s,e],this)}afterTickToLabelConversion(){ut(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ut(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,s=K_(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,i=n.maxRotation;let o=r,a,l,c;if(!this._isVisible()||!n.display||r>=i||s<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),h=u.widest.width,p=u.highest.height,g=ln(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/s:g/(s-1),h+6>a&&(a=g/(s-(e.offset?.5:1)),l=this.maxHeight-ea(e.grid)-n.padding-Y_(e.title,this.chart.options.font),c=Math.sqrt(h*h+p*p),o=Tz(Math.min(Math.asin(ln((u.highest.height+6)/a,-1,1)),Math.asin(ln(l/c,-1,1))-Math.asin(ln(p/c,-1,1)))),o=Math.max(r,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){ut(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ut(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:s,title:r,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Y_(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=ea(i)+l):(e.height=this.maxHeight,e.width=ea(i)+l),s.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:p}=this._getLabelSizes(),g=s.padding*2,y=Ds(this.labelRotation),v=Math.cos(y),_=Math.sin(y);if(a){const E=s.mirror?0:_*h.width+v*p.height;e.height=Math.min(this.maxHeight,e.height+E+g)}else{const E=s.mirror?0:v*h.width+_*p.height;e.width=Math.min(this.maxWidth,e.width+E+g)}this._calculatePadding(c,u,_,v)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,s,r){const{ticks:{align:i,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,g=0;l?c?(p=r*e.width,g=s*n.height):(p=s*e.height,g=r*n.width):i==="start"?g=n.width:i==="end"?p=e.width:i!=="inner"&&(p=e.width/2,g=n.width/2),this.paddingLeft=Math.max((p-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((g-h+o)*this.width/(this.width-h),0)}else{let u=n.height/2,h=e.height/2;i==="start"?(u=0,h=e.height):i==="end"&&(u=n.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ut(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,s;for(n=0,s=e.length;n<s;n++)Ze(e[n].label)&&(e.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=G_(s,n)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,s){const{ctx:r,_longestTextCache:i}=this,o=[],a=[],l=Math.floor(n/K_(n,s));let c=0,u=0,h,p,g,y,v,_,E,S,D,F,M;for(h=0;h<n;h+=l){if(y=e[h].label,v=this._resolveTickFontOptions(h),r.font=_=v.string,E=i[_]=i[_]||{data:{},gc:[]},S=v.lineHeight,D=F=0,!Ze(y)&&!St(y))D=w_(r,E.data,E.gc,D,y),F=S;else if(St(y))for(p=0,g=y.length;p<g;++p)M=y[p],!Ze(M)&&!St(M)&&(D=w_(r,E.data,E.gc,D,M),F+=S);o.push(D),a.push(F),c=Math.max(D,c),u=Math.max(F,u)}zq(i,n);const O=o.indexOf(c),T=a.indexOf(u),b=w=>({width:o[w]||0,height:a[w]||0});return{first:b(0),last:b(n-1),widest:b(O),highest:b(T),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return Iz(this._alignToPixels?Wr(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const s=n[e];return s.$context||(s.$context=qq(this.getContext(),e,s))}return this.$context||(this.$context=Hq(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Ds(this.labelRotation),s=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,a=i?i.widest.width+o:0,l=i?i.highest.height+o:0;return this.isHorizontal()?l*s>a*r?a/s:l/r:l*r<a*s?l/s:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,s=this.chart,r=this.options,{grid:i,position:o,border:a}=r,l=i.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),p=ea(i),g=[],y=a.setContext(this.getContext()),v=y.display?y.width:0,_=v/2,E=function(de){return Wr(s,de,v)};let S,D,F,M,O,T,b,w,C,k,A,I;if(o==="top")S=E(this.bottom),T=this.bottom-p,w=S-_,k=E(e.top)+_,I=e.bottom;else if(o==="bottom")S=E(this.top),k=e.top,I=E(e.bottom)-_,T=S+_,w=this.top+p;else if(o==="left")S=E(this.right),O=this.right-p,b=S-_,C=E(e.left)+_,A=e.right;else if(o==="right")S=E(this.left),C=e.left,A=E(e.right)-_,O=S+_,b=this.left+p;else if(n==="x"){if(o==="center")S=E((e.top+e.bottom)/2+.5);else if(We(o)){const de=Object.keys(o)[0],ee=o[de];S=E(this.chart.scales[de].getPixelForValue(ee))}k=e.top,I=e.bottom,T=S+_,w=T+p}else if(n==="y"){if(o==="center")S=E((e.left+e.right)/2);else if(We(o)){const de=Object.keys(o)[0],ee=o[de];S=E(this.chart.scales[de].getPixelForValue(ee))}O=S-_,b=O-p,C=e.left,A=e.right}const V=Fe(r.ticks.maxTicksLimit,h),Y=Math.max(1,Math.ceil(h/V));for(D=0;D<h;D+=Y){const de=this.getContext(D),ee=i.setContext(de),we=a.setContext(de),Ve=ee.lineWidth,ht=ee.color,Vt=we.dash||[],Ye=we.dashOffset,tt=ee.tickWidth,Kt=ee.tickColor,Gt=ee.tickBorderDash||[],gt=ee.tickBorderDashOffset;F=jq(this,D,l),F!==void 0&&(M=Wr(s,F,Ve),c?O=b=C=A=M:T=w=k=I=M,g.push({tx1:O,ty1:T,tx2:b,ty2:w,x1:C,y1:k,x2:A,y2:I,width:Ve,color:ht,borderDash:Vt,borderDashOffset:Ye,tickWidth:tt,tickColor:Kt,tickBorderDash:Gt,tickBorderDashOffset:gt}))}return this._ticksLength=h,this._borderValue=S,g}_computeLabelItems(e){const n=this.axis,s=this.options,{position:r,ticks:i}=s,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=i,p=ea(s.grid),g=p+u,y=h?-u:g,v=-Ds(this.labelRotation),_=[];let E,S,D,F,M,O,T,b,w,C,k,A,I="middle";if(r==="top")O=this.bottom-y,T=this._getXAxisLabelAlignment();else if(r==="bottom")O=this.top+y,T=this._getXAxisLabelAlignment();else if(r==="left"){const Y=this._getYAxisLabelAlignment(p);T=Y.textAlign,M=Y.x}else if(r==="right"){const Y=this._getYAxisLabelAlignment(p);T=Y.textAlign,M=Y.x}else if(n==="x"){if(r==="center")O=(e.top+e.bottom)/2+g;else if(We(r)){const Y=Object.keys(r)[0],de=r[Y];O=this.chart.scales[Y].getPixelForValue(de)+g}T=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")M=(e.left+e.right)/2-g;else if(We(r)){const Y=Object.keys(r)[0],de=r[Y];M=this.chart.scales[Y].getPixelForValue(de)}T=this._getYAxisLabelAlignment(p).textAlign}n==="y"&&(l==="start"?I="top":l==="end"&&(I="bottom"));const V=this._getLabelSizes();for(E=0,S=a.length;E<S;++E){D=a[E],F=D.label;const Y=i.setContext(this.getContext(E));b=this.getPixelForTick(E)+i.labelOffset,w=this._resolveTickFontOptions(E),C=w.lineHeight,k=St(F)?F.length:1;const de=k/2,ee=Y.color,we=Y.textStrokeColor,Ve=Y.textStrokeWidth;let ht=T;o?(M=b,T==="inner"&&(E===S-1?ht=this.options.reverse?"left":"right":E===0?ht=this.options.reverse?"right":"left":ht="center"),r==="top"?c==="near"||v!==0?A=-k*C+C/2:c==="center"?A=-V.highest.height/2-de*C+C:A=-V.highest.height+C/2:c==="near"||v!==0?A=C/2:c==="center"?A=V.highest.height/2-de*C:A=V.highest.height-k*C,h&&(A*=-1),v!==0&&!Y.showLabelBackdrop&&(M+=C/2*Math.sin(v))):(O=b,A=(1-k)*C/2);let Vt;if(Y.showLabelBackdrop){const Ye=Un(Y.backdropPadding),tt=V.heights[E],Kt=V.widths[E];let Gt=A-Ye.top,gt=0-Ye.left;switch(I){case"middle":Gt-=tt/2;break;case"bottom":Gt-=tt;break}switch(T){case"center":gt-=Kt/2;break;case"right":gt-=Kt;break;case"inner":E===S-1?gt-=Kt:E>0&&(gt-=Kt/2);break}Vt={left:gt,top:Gt,width:Kt+Ye.width,height:tt+Ye.height,color:Y.backdropColor}}_.push({label:F,font:w,textOffset:A,options:{rotation:v,color:ee,strokeColor:we,strokeWidth:Ve,textAlign:ht,textBaseline:I,translation:[M,O],backdrop:Vt}})}return _}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Ds(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:s,mirror:r,padding:i}}=this.options,o=this._getLabelSizes(),a=e+i,l=o.widest.width;let c,u;return n==="left"?r?(u=this.right+i,s==="near"?c="left":s==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,s==="near"?c="right":s==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?r?(u=this.left+i,s==="near"?c="right":s==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,s==="near"?c="left":s==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:s,top:r,width:i,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(s,r,i,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(i=>i.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,s=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const a=(l,c,u)=>{!u.width||!u.color||(s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(c.x,c.y),s.stroke(),s.restore())};if(n.display)for(i=0,o=r.length;i<o;++i){const l=r[i];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:s,grid:r}}=this,i=s.setContext(this.getContext()),o=s.display?i.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,p;this.isHorizontal()?(c=Wr(e,this.left,o)-o/2,u=Wr(e,this.right,a)+a/2,h=p=l):(h=Wr(e,this.top,o)-o/2,p=Wr(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(c,h),n.lineTo(u,p),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,r=this._computeLabelArea();r&&Hg(s,r);const i=this.getLabelItems(e);for(const o of i){const a=o.options,l=o.font,c=o.label,u=o.textOffset;ul(s,c,0,u,l,a)}r&&qg(s)}drawTitle(){const{ctx:e,options:{position:n,title:s,reverse:r}}=this;if(!s.display)return;const i=cn(s.font),o=Un(s.padding),a=s.align;let l=i.lineHeight/2;n==="bottom"||n==="center"||We(n)?(l+=o.bottom,St(s.text)&&(l+=i.lineHeight*(s.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:h,rotation:p}=Kq(this,l,n,a);ul(e,s.text,0,0,i,{color:s.color,maxWidth:h,rotation:p,textAlign:Wq(a,n,r),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,s=Fe(e.grid&&e.grid.z,-1),r=Fe(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Oo.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:s,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",r=[];let i,o;for(i=0,o=n.length;i<o;++i){const a=n[i];a[s]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return cn(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class gc{constructor(e,n,s){this.type=e,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let s;Qq(n)&&(s=this.register(n));const r=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,Gq(e,o,s),this.override&&wt.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,s=e.id,r=this.scope;s in n&&delete n[s],r&&s in wt[r]&&(delete wt[r][s],this.override&&delete Ei[s])}}function Gq(t,e,n){const s=il(Object.create(null),[n?wt.get(n):{},wt.get(e),t.defaults]);wt.set(e,s),t.defaultRoutes&&Yq(e,t.defaultRoutes),t.descriptors&&wt.describe(e,t.descriptors)}function Yq(t,e){Object.keys(e).forEach(n=>{const s=n.split("."),r=s.pop(),i=[t].concat(s).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");wt.route(i,r,l,a)})}function Qq(t){return"id"in t&&"defaults"in t}class Xq{constructor(){this.controllers=new gc(ci,"datasets",!0),this.elements=new gc(Ks,"elements"),this.plugins=new gc(Object,"plugins"),this.scales=new gc(Oo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,s){[...n].forEach(r=>{const i=s||this._getRegistryForType(r);s||i.isForType(r)||i===this.plugins&&r.id?this._exec(e,i,r):nt(r,o=>{const a=s||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,s){const r=Fg(e);ut(s["before"+r],[],s),n[e](s),ut(s["after"+r],[],s)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(e))return s}return this.plugins}_get(e,n,s){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return r}}var ss=new Xq;class Jq{constructor(){this._init=[]}notify(e,n,s,r){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(i,e,n,s);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,s,r){r=r||{};for(const i of e){const o=i.plugin,a=o[s],l=[n,r,i.options];if(ut(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){Ze(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const s=e&&e.config,r=Fe(s.options&&s.options.plugins,{}),i=Zq(s);return r===!1&&!n?[]:tW(e,i,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],s=this._cache,r=(i,o)=>i.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,s),e,"stop"),this._notify(r(s,n),e,"start")}}function Zq(t){const e={},n=[],s=Object.keys(ss.plugins.items);for(let i=0;i<s.length;i++)n.push(ss.getPlugin(s[i]));const r=t.plugins||[];for(let i=0;i<r.length;i++){const o=r[i];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function eW(t,e){return!e&&t===!1?null:t===!0?{}:t}function tW(t,{plugins:e,localIds:n},s,r){const i=[],o=t.getContext();for(const a of e){const l=a.id,c=eW(s[l],r);c!==null&&i.push({plugin:a,options:nW(t.config,{plugin:a,local:n[l]},c,o)})}return i}function nW(t,{plugin:e,local:n},s,r){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(s,i);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Jf(t,e){const n=wt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function sW(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function rW(t,e){return t===e?"_index_":"_value_"}function Q_(t){if(t==="x"||t==="y"||t==="r")return t}function iW(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Zf(t,...e){if(Q_(t))return t;for(const n of e){const s=n.axis||iW(n.position)||t.length>1&&Q_(t[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function X_(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function oW(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(s=>s.xAxisID===t||s.yAxisID===t);if(n.length)return X_(t,"x",n[0])||X_(t,"y",n[0])}return{}}function aW(t,e){const n=Ei[t.type]||{scales:{}},s=e.scales||{},r=Jf(t.type,e),i=Object.create(null);return Object.keys(s).forEach(o=>{const a=s[o];if(!We(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Zf(o,a,oW(o,t),wt.scales[a.type]),c=rW(l,r),u=n.scales||{};i[o]=Pa(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Jf(a,e),u=(Ei[a]||{}).scales||{};Object.keys(u).forEach(h=>{const p=sW(h,l),g=o[p+"AxisID"]||p;i[g]=i[g]||Object.create(null),Pa(i[g],[{axis:p},s[g],u[h]])})}),Object.keys(i).forEach(o=>{const a=i[o];Pa(a,[wt.scales[a.type],wt.scale])}),i}function yk(t){const e=t.options||(t.options={});e.plugins=Fe(e.plugins,{}),e.scales=aW(t,e)}function vk(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function lW(t){return t=t||{},t.data=vk(t.data),yk(t),t}const J_=new Map,_k=new Set;function mc(t,e){let n=J_.get(t);return n||(n=e(),J_.set(t,n),_k.add(n)),n}const ta=(t,e,n)=>{const s=wi(e,n);s!==void 0&&t.add(s)};class cW{constructor(e){this._config=lW(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=vk(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),yk(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return mc(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return mc(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return mc(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,s=this.type;return mc(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const s=this._scopeCache;let r=s.get(e);return(!r||n)&&(r=new Map,s.set(e,r)),r}getOptionScopes(e,n,s){const{options:r,type:i}=this,o=this._cachedScopes(e,s),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(h=>ta(l,e,h))),u.forEach(h=>ta(l,r,h)),u.forEach(h=>ta(l,Ei[i]||{},h)),u.forEach(h=>ta(l,wt,h)),u.forEach(h=>ta(l,Yf,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),_k.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Ei[n]||{},wt.datasets[n]||{},{type:n},wt,Yf]}resolveNamedOptions(e,n,s,r=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=Z_(this._resolverCache,e,r);let l=o;if(dW(o,n)){i.$shared=!1,s=Cr(s)?s():s;const c=this.createResolver(e,s,a);l=go(o,s,c)}for(const c of n)i[c]=l[c];return i}createResolver(e,n,s=[""],r){const{resolver:i}=Z_(this._resolverCache,e,s);return We(n)?go(i,n,void 0,r):i}}function Z_(t,e,n){let s=t.get(e);s||(s=new Map,t.set(e,s));const r=n.join();let i=s.get(r);return i||(i={resolver:Kg(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},s.set(r,i)),i}const uW=t=>We(t)&&Object.getOwnPropertyNames(t).some(e=>Cr(t[e]));function dW(t,e){const{isScriptable:n,isIndexable:s}=tk(t);for(const r of e){const i=n(r),o=s(r),a=(o||i)&&t[r];if(i&&(Cr(a)||uW(a))||o&&St(a))return!0}return!1}var hW="4.4.9";const fW=["top","bottom","left","right","chartArea"];function eb(t,e){return t==="top"||t==="bottom"||fW.indexOf(t)===-1&&e==="x"}function tb(t,e){return function(n,s){return n[t]===s[t]?n[e]-s[e]:n[t]-s[t]}}function nb(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),ut(n&&n.onComplete,[t],e)}function pW(t){const e=t.chart,n=e.options.animation;ut(n&&n.onProgress,[t],e)}function bk(t){return Qg()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Bc={},sb=t=>{const e=bk(t);return Object.values(Bc).filter(n=>n.canvas===e).pop()};function gW(t,e,n){const s=Object.keys(t);for(const r of s){const i=+r;if(i>=e){const o=t[r];delete t[r],(n>0||i>e)&&(t[i+n]=o)}}}function mW(t,e,n,s){return!n||t.type==="mouseout"?null:s?e:t}var tr;let Md=(tr=class{static register(...e){ss.add(...e),rb()}static unregister(...e){ss.remove(...e),rb()}constructor(e,n){const s=this.config=new cW(n),r=bk(e),i=sb(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||Mq(r)),this.platform.updateConfig(s);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=dz(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Jq,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Pz(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],Bc[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}xs.listen(this,"complete",nb),xs.listen(this,"progress",pW),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:s,height:r,_aspectRatio:i}=this;return Ze(e)?n&&i?i:r?s/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return ss}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():I_(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return E_(this.canvas,this.ctx),this}stop(){return xs.stop(this),this}resize(e,n){xs.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const s=this.options,r=this.canvas,i=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,n,i),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,I_(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),ut(s.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};nt(n,(s,r)=>{s.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,s=this.scales,r=Object.keys(s).reduce((o,a)=>(o[a]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const a=n[o],l=Zf(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),nt(i,o=>{const a=o.options,l=a.id,c=Zf(l,a),u=Fe(a.type,o.dtype);(a.position===void 0||eb(a.position,c)!==eb(o.dposition))&&(a.position=o.dposition),r[l]=!0;let h=null;if(l in s&&s[l].type===u)h=s[l];else{const p=ss.getScale(u);h=new p({id:l,type:u,ctx:this.ctx,chart:this}),s[h.id]=h}h.init(a,e)}),nt(r,(o,a)=>{o||delete s[a]}),nt(s,o=>{Dn.configure(this,o,o.options),Dn.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,s=e.length;if(e.sort((r,i)=>r.index-i.index),s>n){for(let r=n;r<s;++r)this._destroyDatasetMeta(r);e.splice(n,s-n)}this._sortedMetasets=e.slice(0).sort(tb("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((s,r)=>{n.filter(i=>i===s._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let s,r;for(this._removeUnreferencedMetasets(),s=0,r=n.length;s<r;s++){const i=n[s];let o=this.getDatasetMeta(s);const a=i.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=a,o.indexAxis=i.indexAxis||Jf(a,this.options),o.order=i.order||0,o.index=s,o.label=""+i.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const l=ss.getController(a),{datasetElementType:c,dataElementType:u}=wt.datasets[a];Object.assign(l,{dataElementType:ss.getElement(u),datasetElementType:c&&ss.getElement(c)}),o.controller=new l(this,s),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){nt(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),p=!r&&i.indexOf(h)===-1;h.buildOrUpdateElements(p),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),r||nt(i,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(tb("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){nt(this.scales,e=>{Dn.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!f_(n,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:r,count:i}of n){const o=s==="_removeElements"?-i:i;gW(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=i=>new Set(e.filter(o=>o[0]===i).map((o,a)=>a+","+o.splice(1).join(","))),r=s(0);for(let i=1;i<n;i++)if(!f_(r,s(i)))return;return Array.from(r).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Dn.update(this,this.width,this.height,e);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],nt(this.boxes,r=>{s&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,i)=>{r._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,Cr(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const s=this.getDatasetMeta(e),r={meta:s,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(s.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(xs.has(this)?this.attached&&!xs.running(this)&&xs.start(this):(this.draw(),nb({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,s=[];let r,i;for(r=0,i=n.length;r<i;++r){const o=n[r];(!e||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,s={meta:e,index:e.index,cancelable:!0},r=LH(this,e);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(r&&Hg(n,r),e.controller.draw(),r&&qg(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return cl(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,s,r){const i=fq.modes[n];return typeof i=="function"?i(this,e,s,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],s=this._metasets;let r=s.filter(i=>i&&i._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},s.push(r)),r}getContext(){return this.$context||(this.$context=Ri(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(e,n){const s=this.getDatasetMeta(e);s.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,s){const r=s?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,r);ol(n)?(i.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),o.update(i,{visible:s}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),xs.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),E_(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Bc[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,s=(i,o)=>{n.addEventListener(this,i,o),e[i]=o},r=(i,o,a)=>{i.offsetX=o,i.offsetY=a,this._eventHandler(i)};nt(this.options.events,i=>s(i,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,s=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},r=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},i=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),s("resize",i),s("detach",o)};o=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),s("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){nt(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},nt(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,s){const r=s?"set":"remove";let i,o,a,l;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],s=e.map(({datasetIndex:i,index:o})=>{const a=this.getDatasetMeta(i);if(!a)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:a.data[o],index:o}});!Iu(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(e,n,s){return this._plugins.notify(this,e,n,s)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,s){const r=this.options.hover,i=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=i(n,e),a=s?e:i(e,n);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const s={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,r)===!1)return;const i=this._handleEvent(e,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,r),(i||s.changed)&&this.render(),this}_handleEvent(e,n,s){const{_active:r=[],options:i}=this,o=n,a=this._getActiveElements(e,r,s,o),l=yz(e),c=mW(e,this._lastEvent,s,l);s&&(this._lastEvent=null,ut(i.onHover,[e,a,this],this),l&&ut(i.onClick,[e,a,this],this));const u=!Iu(a,r);return(u||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=c,u}_getActiveElements(e,n,s,r){if(e.type==="mouseout")return[];if(!s)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}},ye(tr,"defaults",wt),ye(tr,"instances",Bc),ye(tr,"overrides",Ei),ye(tr,"registry",ss),ye(tr,"version",hW),ye(tr,"getChart",sb),tr);function rb(){return nt(Md.instances,t=>t._plugins.invalidate())}function yW(t,e,n){const{startAngle:s,pixelMargin:r,x:i,y:o,outerRadius:a,innerRadius:l}=e;let c=r/a;t.beginPath(),t.arc(i,o,a,s-c,n+c),l>r?(c=r/l,t.arc(i,o,l,n+c,s-c,!0)):t.arc(i,o,r,n+Ct,s-Ct),t.closePath(),t.clip()}function vW(t){return Wg(t,["outerStart","outerEnd","innerStart","innerEnd"])}function _W(t,e,n,s){const r=vW(t.options.borderRadius),i=(n-e)/2,o=Math.min(i,s*e/2),a=l=>{const c=(n-Math.min(i,l))*s/2;return ln(l,0,Math.min(i,c))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:ln(r.innerStart,0,o),innerEnd:ln(r.innerEnd,0,o)}}function Fi(t,e,n,s){return{x:n+t*Math.cos(e),y:s+t*Math.sin(e)}}function Ou(t,e,n,s,r,i){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,h=Math.max(e.outerRadius+s+n-c,0),p=u>0?u+s+n+c:0;let g=0;const y=r-l;if(s){const Y=u>0?u-s:0,de=h>0?h-s:0,ee=(Y+de)/2,we=ee!==0?y*ee/(ee+s):y;g=(y-we)/2}const v=Math.max(.001,y*h-n/vt)/h,_=(y-v)/2,E=l+_+g,S=r-_-g,{outerStart:D,outerEnd:F,innerStart:M,innerEnd:O}=_W(e,p,h,S-E),T=h-D,b=h-F,w=E+D/T,C=S-F/b,k=p+M,A=p+O,I=E+M/k,V=S-O/A;if(t.beginPath(),i){const Y=(w+C)/2;if(t.arc(o,a,h,w,Y),t.arc(o,a,h,Y,C),F>0){const Ve=Fi(b,C,o,a);t.arc(Ve.x,Ve.y,F,C,S+Ct)}const de=Fi(A,S,o,a);if(t.lineTo(de.x,de.y),O>0){const Ve=Fi(A,V,o,a);t.arc(Ve.x,Ve.y,O,S+Ct,V+Math.PI)}const ee=(S-O/p+(E+M/p))/2;if(t.arc(o,a,p,S-O/p,ee,!0),t.arc(o,a,p,ee,E+M/p,!0),M>0){const Ve=Fi(k,I,o,a);t.arc(Ve.x,Ve.y,M,I+Math.PI,E-Ct)}const we=Fi(T,E,o,a);if(t.lineTo(we.x,we.y),D>0){const Ve=Fi(T,w,o,a);t.arc(Ve.x,Ve.y,D,E-Ct,w)}}else{t.moveTo(o,a);const Y=Math.cos(w)*h+o,de=Math.sin(w)*h+a;t.lineTo(Y,de);const ee=Math.cos(C)*h+o,we=Math.sin(C)*h+a;t.lineTo(ee,we)}t.closePath()}function bW(t,e,n,s,r){const{fullCircles:i,startAngle:o,circumference:a}=e;let l=e.endAngle;if(i){Ou(t,e,n,s,l,r);for(let c=0;c<i;++c)t.fill();isNaN(a)||(l=o+(a%yt||yt))}return Ou(t,e,n,s,l,r),t.fill(),l}function xW(t,e,n,s,r){const{fullCircles:i,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:p}=l,g=l.borderAlign==="inner";if(!c)return;t.setLineDash(h||[]),t.lineDashOffset=p,g?(t.lineWidth=c*2,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let y=e.endAngle;if(i){Ou(t,e,n,s,y,r);for(let v=0;v<i;++v)t.stroke();isNaN(a)||(y=o+(a%yt||yt))}g&&yW(t,e,y),i||(Ou(t,e,n,s,y,r),t.stroke())}class ha extends Ks{constructor(n){super();ye(this,"circumference");ye(this,"endAngle");ye(this,"fullCircles");ye(this,"innerRadius");ye(this,"outerRadius");ye(this,"pixelMargin");ye(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,s,r){const i=this.getProps(["x","y"],r),{angle:o,distance:a}=KT(i,{x:n,y:s}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:h,circumference:p}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),g=(this.options.spacing+this.options.borderWidth)/2,y=Fe(p,c-l),v=ll(o,l,c)&&l!==c,_=y>=yt||v,E=fr(a,u+g,h+g);return _&&E}getCenterPoint(n){const{x:s,y:r,startAngle:i,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:u}=this.options,h=(i+o)/2,p=(a+l+u+c)/2;return{x:s+Math.cos(h)*p,y:r+Math.sin(h)*p}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:s,circumference:r}=this,i=(s.offset||0)/4,o=(s.spacing||0)/2,a=s.circular;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=r>yt?Math.floor(r/yt):0,r===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*i,Math.sin(l)*i);const c=1-Math.sin(Math.min(vt,r||0)),u=i*c;n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,bW(n,this,u,o,a),xW(n,this,u,o,a),n.restore()}}ye(ha,"id","arc"),ye(ha,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),ye(ha,"defaultRoutes",{backgroundColor:"backgroundColor"}),ye(ha,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function xk(t,e,n=e){t.lineCap=Fe(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Fe(n.borderDash,e.borderDash)),t.lineDashOffset=Fe(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Fe(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Fe(n.borderWidth,e.borderWidth),t.strokeStyle=Fe(n.borderColor,e.borderColor)}function wW(t,e,n){t.lineTo(n.x,n.y)}function EW(t){return t.stepped?Hz:t.tension||t.cubicInterpolationMode==="monotone"?qz:wW}function wk(t,e,n={}){const s=t.length,{start:r=0,end:i=s-1}=n,{start:o,end:a}=e,l=Math.max(r,o),c=Math.min(i,a),u=r<o&&i<o||r>a&&i>a;return{count:s,start:l,loop:e.loop,ilen:c<l&&!u?s+c-l:c-l}}function TW(t,e,n,s){const{points:r,options:i}=e,{count:o,start:a,loop:l,ilen:c}=wk(r,n,s),u=EW(i);let{move:h=!0,reverse:p}=s||{},g,y,v;for(g=0;g<=c;++g)y=r[(a+(p?c-g:g))%o],!y.skip&&(h?(t.moveTo(y.x,y.y),h=!1):u(t,v,y,p,i.stepped),v=y);return l&&(y=r[(a+(p?c:0))%o],u(t,v,y,p,i.stepped)),!!l}function kW(t,e,n,s){const r=e.points,{count:i,start:o,ilen:a}=wk(r,n,s),{move:l=!0,reverse:c}=s||{};let u=0,h=0,p,g,y,v,_,E;const S=F=>(o+(c?a-F:F))%i,D=()=>{v!==_&&(t.lineTo(u,_),t.lineTo(u,v),t.lineTo(u,E))};for(l&&(g=r[S(0)],t.moveTo(g.x,g.y)),p=0;p<=a;++p){if(g=r[S(p)],g.skip)continue;const F=g.x,M=g.y,O=F|0;O===y?(M<v?v=M:M>_&&(_=M),u=(h*u+F)/++h):(D(),t.lineTo(F,M),y=O,h=0,v=_=M),E=M}D()}function ep(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?kW:TW}function IW(t){return t.stepped?EH:t.tension||t.cubicInterpolationMode==="monotone"?TH:Xr}function SW(t,e,n,s){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,s)&&r.closePath()),xk(t,e.options),t.stroke(r)}function AW(t,e,n,s){const{segments:r,options:i}=e,o=ep(e);for(const a of r)xk(t,i,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+s-1})&&t.closePath(),t.stroke()}const CW=typeof Path2D=="function";function PW(t,e,n,s){CW&&!e.options.segment?SW(t,e,n,s):AW(t,e,n,s)}class fa extends Ks{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const r=s.spanGaps?this._loop:this._fullLoop;gH(this._points,s,e,r,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=OH(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,s=e.length;return s&&n[e[s-1].end]}interpolate(e,n){const s=this.options,r=e[n],i=this.points,o=CH(this,{property:n,start:r,end:r});if(!o.length)return;const a=[],l=IW(s);let c,u;for(c=0,u=o.length;c<u;++c){const{start:h,end:p}=o[c],g=i[h],y=i[p];if(g===y){a.push(g);continue}const v=Math.abs((r-g[n])/(y[n]-g[n])),_=l(g,y,v,s.stepped);_[n]=e[n],a.push(_)}return a.length===1?a[0]:a}pathSegment(e,n,s){return ep(this)(e,this,n,s)}path(e,n,s){const r=this.segments,i=ep(this);let o=this._loop;n=n||0,s=s||this.points.length-n;for(const a of r)o&=i(e,this,a,{start:n,end:n+s-1});return!!o}draw(e,n,s,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),PW(e,this,s,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ye(fa,"id","line"),ye(fa,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ye(fa,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ye(fa,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function ib(t,e,n,s){const r=t.options,{[n]:i}=t.getProps([n],s);return Math.abs(e-i)<r.radius+r.hitRadius}class jc extends Ks{constructor(n){super();ye(this,"parsed");ye(this,"skip");ye(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,s,r){const i=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(n-o,2)+Math.pow(s-a,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(n,s){return ib(this,n,"x",s)}inYRange(n,s){return ib(this,n,"y",s)}getCenterPoint(n){const{x:s,y:r}=this.getProps(["x","y"],n);return{x:s,y:r}}size(n){n=n||this.options||{};let s=n.radius||0;s=Math.max(s,s&&n.hoverRadius||0);const r=s&&n.borderWidth||0;return(s+r)*2}draw(n,s){const r=this.options;this.skip||r.radius<.1||!cl(this,s,this.size(r)/2)||(n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.fillStyle=r.backgroundColor,Qf(n,r,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}ye(jc,"id","point"),ye(jc,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ye(jc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function Ek(t,e){const{x:n,y:s,base:r,width:i,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,h;return t.horizontal?(h=o/2,a=Math.min(n,r),l=Math.max(n,r),c=s-h,u=s+h):(h=i/2,a=n-h,l=n+h,c=Math.min(s,r),u=Math.max(s,r)),{left:a,top:c,right:l,bottom:u}}function pr(t,e,n,s){return t?0:ln(e,n,s)}function RW(t,e,n){const s=t.options.borderWidth,r=t.borderSkipped,i=ek(s);return{t:pr(r.top,i.top,0,n),r:pr(r.right,i.right,0,e),b:pr(r.bottom,i.bottom,0,n),l:pr(r.left,i.left,0,e)}}function OW(t,e,n){const{enableBorderRadius:s}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,i=no(r),o=Math.min(e,n),a=t.borderSkipped,l=s||We(r);return{topLeft:pr(!l||a.top||a.left,i.topLeft,0,o),topRight:pr(!l||a.top||a.right,i.topRight,0,o),bottomLeft:pr(!l||a.bottom||a.left,i.bottomLeft,0,o),bottomRight:pr(!l||a.bottom||a.right,i.bottomRight,0,o)}}function DW(t){const e=Ek(t),n=e.right-e.left,s=e.bottom-e.top,r=RW(t,n/2,s/2),i=OW(t,n/2,s/2);return{outer:{x:e.left,y:e.top,w:n,h:s,radius:i},inner:{x:e.left+r.l,y:e.top+r.t,w:n-r.l-r.r,h:s-r.t-r.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,i.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(r.b,r.r))}}}}function Gh(t,e,n,s){const r=e===null,i=n===null,a=t&&!(r&&i)&&Ek(t,s);return a&&(r||fr(e,a.left,a.right))&&(i||fr(n,a.top,a.bottom))}function MW(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function NW(t,e){t.rect(e.x,e.y,e.w,e.h)}function Yh(t,e,n={}){const s=t.x!==n.x?-e:0,r=t.y!==n.y?-e:0,i=(t.x+t.w!==n.x+n.w?e:0)-s,o=(t.y+t.h!==n.y+n.h?e:0)-r;return{x:t.x+s,y:t.y+r,w:t.w+i,h:t.h+o,radius:t.radius}}class zc extends Ks{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:s,backgroundColor:r}}=this,{inner:i,outer:o}=DW(this),a=MW(o.radius)?Cu:NW;e.save(),(o.w!==i.w||o.h!==i.h)&&(e.beginPath(),a(e,Yh(o,n,i)),e.clip(),a(e,Yh(i,-n,o)),e.fillStyle=s,e.fill("evenodd")),e.beginPath(),a(e,Yh(i,n)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,n,s){return Gh(this,e,n,s)}inXRange(e,n){return Gh(this,e,null,n)}inYRange(e,n){return Gh(this,null,e,n)}getCenterPoint(e){const{x:n,y:s,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(n+r)/2:n,y:i?s:(s+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}ye(zc,"id","bar"),ye(zc,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),ye(zc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const ob=(t,e)=>{let{boxHeight:n=e,boxWidth:s=e}=t;return t.usePointStyle&&(n=Math.min(n,e),s=t.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(e,n)}},LW=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class ab extends Ks{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,s){this.maxWidth=e,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=ut(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(s=>e.filter(s,this.chart.data))),e.sort&&(n=n.sort((s,r)=>e.sort(s,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,r=cn(s.font),i=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=ob(s,i);let c,u;n.font=r.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,i,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,s,r){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=r+a;let h=e;i.textAlign="left",i.textBaseline="middle";let p=-1,g=-u;return this.legendItems.forEach((y,v)=>{const _=s+n/2+i.measureText(y.text).width;(v===0||c[c.length-1]+_+2*a>o)&&(h+=u,c[c.length-(v>0?0:1)]=0,g+=u,p++),l[v]={left:0,top:g,row:p,width:_,height:r},c[c.length-1]+=_+a}),h}_fitCols(e,n,s,r){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let h=a,p=0,g=0,y=0,v=0;return this.legendItems.forEach((_,E)=>{const{itemWidth:S,itemHeight:D}=VW(s,n,i,_,r);E>0&&g+D+2*a>u&&(h+=p+a,c.push({width:p,height:g}),y+=p+a,v++,p=g=0),l[E]={left:y,top:g,col:v,width:S,height:D},p=Math.max(p,S),g+=D+a}),h+=p,c.push({width:p,height:g}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:r},rtl:i}}=this,o=so(i,this.left,this.width);if(this.isHorizontal()){let a=0,l=en(s,this.left+r,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=en(s,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+e+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=en(s,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=en(s,this.top+e+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Hg(e,this),this._draw(),qg(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:s,ctx:r}=this,{align:i,labels:o}=e,a=wt.color,l=so(e.rtl,this.left,this.width),c=cn(o.font),{padding:u}=o,h=c.size,p=h/2;let g;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:y,boxHeight:v,itemHeight:_}=ob(o,h),E=function(O,T,b){if(isNaN(y)||y<=0||isNaN(v)||v<0)return;r.save();const w=Fe(b.lineWidth,1);if(r.fillStyle=Fe(b.fillStyle,a),r.lineCap=Fe(b.lineCap,"butt"),r.lineDashOffset=Fe(b.lineDashOffset,0),r.lineJoin=Fe(b.lineJoin,"miter"),r.lineWidth=w,r.strokeStyle=Fe(b.strokeStyle,a),r.setLineDash(Fe(b.lineDash,[])),o.usePointStyle){const C={radius:v*Math.SQRT2/2,pointStyle:b.pointStyle,rotation:b.rotation,borderWidth:w},k=l.xPlus(O,y/2),A=T+p;ZT(r,C,k,A,o.pointStyleWidth&&y)}else{const C=T+Math.max((h-v)/2,0),k=l.leftForLtr(O,y),A=no(b.borderRadius);r.beginPath(),Object.values(A).some(I=>I!==0)?Cu(r,{x:k,y:C,w:y,h:v,radius:A}):r.rect(k,C,y,v),r.fill(),w!==0&&r.stroke()}r.restore()},S=function(O,T,b){ul(r,b.text,O,T+_/2,c,{strikethrough:b.hidden,textAlign:l.textAlign(b.textAlign)})},D=this.isHorizontal(),F=this._computeTitleHeight();D?g={x:en(i,this.left+u,this.right-s[0]),y:this.top+u+F,line:0}:g={x:this.left+u,y:en(i,this.top+F+u,this.bottom-n[0].height),line:0},ok(this.ctx,e.textDirection);const M=_+u;this.legendItems.forEach((O,T)=>{r.strokeStyle=O.fontColor,r.fillStyle=O.fontColor;const b=r.measureText(O.text).width,w=l.textAlign(O.textAlign||(O.textAlign=o.textAlign)),C=y+p+b;let k=g.x,A=g.y;l.setWidth(this.width),D?T>0&&k+C+u>this.right&&(A=g.y+=M,g.line++,k=g.x=en(i,this.left+u,this.right-s[g.line])):T>0&&A+M>this.bottom&&(k=g.x=k+n[g.line].width+u,g.line++,A=g.y=en(i,this.top+F+u,this.bottom-n[g.line].height));const I=l.x(k);if(E(I,A,O),k=Rz(w,k+y+p,D?k+C:this.right,e.rtl),S(l.x(k),A,O),D)g.x+=C+u;else if(typeof O.text!="string"){const V=c.lineHeight;g.y+=Tk(O,V)+u}else g.y+=M}),ak(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,s=cn(n.font),r=Un(n.padding);if(!n.display)return;const i=so(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=s.size/2,c=r.top+l;let u,h=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),u=this.top+c,h=en(e.align,h,this.right-p);else{const y=this.columnSizes.reduce((v,_)=>Math.max(v,_.height),0);u=c+en(e.align,this.top,this.bottom-y-e.labels.padding-this._computeTitleHeight())}const g=en(a,h,h+p);o.textAlign=i.textAlign(Bg(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=s.string,ul(o,n.text,g,u,s)}_computeTitleHeight(){const e=this.options.title,n=cn(e.font),s=Un(e.padding);return e.display?n.lineHeight+s.height:0}_getLegendItemAt(e,n){let s,r,i;if(fr(e,this.left,this.right)&&fr(n,this.top,this.bottom)){for(i=this.legendHitBoxes,s=0;s<i.length;++s)if(r=i[s],fr(e,r.left,r.left+r.width)&&fr(n,r.top,r.top+r.height))return this.legendItems[s]}return null}handleEvent(e){const n=this.options;if(!UW(e.type,n))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,i=LW(r,s);r&&!i&&ut(n.onLeave,[e,r,this],this),this._hoveredItem=s,s&&!i&&ut(n.onHover,[e,s,this],this)}else s&&ut(n.onClick,[e,s,this],this)}}function VW(t,e,n,s,r){const i=$W(s,t,e,n),o=FW(r,s,e.lineHeight);return{itemWidth:i,itemHeight:o}}function $W(t,e,n,s){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((i,o)=>i.length>o.length?i:o)),e+n.size/2+s.measureText(r).width}function FW(t,e,n){let s=t;return typeof e.text!="string"&&(s=Tk(e,n)),s}function Tk(t,e){const n=t.text?t.text.length:0;return e*n}function UW(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var BW={id:"legend",_element:ab,start(t,e,n){const s=t.legend=new ab({ctx:t.ctx,options:n,chart:t});Dn.configure(t,s,n),Dn.addBox(t,s)},stop(t){Dn.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const s=t.legend;Dn.configure(t,s,n),s.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const s=e.datasetIndex,r=n.chart;r.isDatasetVisible(s)?(r.hide(s),e.hidden=!0):(r.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:r,color:i,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=Un(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:s||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class kk extends Ks{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const r=St(s.text)?s.text.length:1;this._padding=Un(s.padding);const i=r*cn(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:s,bottom:r,right:i,options:o}=this,a=o.align;let l=0,c,u,h;return this.isHorizontal()?(u=en(a,s,i),h=n+e,c=i-s):(o.position==="left"?(u=s+e,h=en(a,r,n),l=vt*-.5):(u=i-e,h=en(a,n,r),l=vt*.5),c=r-n),{titleX:u,titleY:h,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const s=cn(n.font),i=s.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(i);ul(e,n.text,0,0,s,{color:n.color,maxWidth:l,rotation:c,textAlign:Bg(n.align),textBaseline:"middle",translation:[o,a]})}}function jW(t,e){const n=new kk({ctx:t.ctx,options:e,chart:t});Dn.configure(t,n,e),Dn.addBox(t,n),t.titleBlock=n}var zW={id:"title",_element:kk,start(t,e,n){jW(t,n)},stop(t){const e=t.titleBlock;Dn.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const s=t.titleBlock;Dn.configure(t,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const pa={average(t){if(!t.length)return!1;let e,n,s=new Set,r=0,i=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();s.add(l.x),r+=l.y,++i}}return i===0||s.size===0?!1:{x:[...s].reduce((a,l)=>a+l)/s.size,y:r/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,s=e.y,r=Number.POSITIVE_INFINITY,i,o,a;for(i=0,o=t.length;i<o;++i){const l=t[i].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=Gf(e,c);u<r&&(r=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,s=l.y}return{x:n,y:s}}};function ts(t,e){return e&&(St(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function ws(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function HW(t,e){const{element:n,datasetIndex:s,index:r}=e,i=t.getDatasetMeta(s).controller,{label:o,value:a}=i.getLabelAndValue(r);return{chart:t,label:o,parsed:i.getParsed(r),raw:t.data.datasets[s].data[r],formattedValue:a,dataset:i.getDataset(),dataIndex:r,datasetIndex:s,element:n}}function lb(t,e){const n=t.chart.ctx,{body:s,footer:r,title:i}=t,{boxWidth:o,boxHeight:a}=e,l=cn(e.bodyFont),c=cn(e.titleFont),u=cn(e.footerFont),h=i.length,p=r.length,g=s.length,y=Un(e.padding);let v=y.height,_=0,E=s.reduce((F,M)=>F+M.before.length+M.lines.length+M.after.length,0);if(E+=t.beforeBody.length+t.afterBody.length,h&&(v+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),E){const F=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;v+=g*F+(E-g)*l.lineHeight+(E-1)*e.bodySpacing}p&&(v+=e.footerMarginTop+p*u.lineHeight+(p-1)*e.footerSpacing);let S=0;const D=function(F){_=Math.max(_,n.measureText(F).width+S)};return n.save(),n.font=c.string,nt(t.title,D),n.font=l.string,nt(t.beforeBody.concat(t.afterBody),D),S=e.displayColors?o+2+e.boxPadding:0,nt(s,F=>{nt(F.before,D),nt(F.lines,D),nt(F.after,D)}),S=0,n.font=u.string,nt(t.footer,D),n.restore(),_+=y.width,{width:_,height:v}}function qW(t,e){const{y:n,height:s}=e;return n<s/2?"top":n>t.height-s/2?"bottom":"center"}function WW(t,e,n,s){const{x:r,width:i}=s,o=n.caretSize+n.caretPadding;if(t==="left"&&r+i+o>e.width||t==="right"&&r-i-o<0)return!0}function KW(t,e,n,s){const{x:r,width:i}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return s==="center"?c=r<=(a+l)/2?"left":"right":r<=i/2?c="left":r>=o-i/2&&(c="right"),WW(c,t,e,n)&&(c="center"),c}function cb(t,e,n){const s=n.yAlign||e.yAlign||qW(t,n);return{xAlign:n.xAlign||e.xAlign||KW(t,e,n,s),yAlign:s}}function GW(t,e){let{x:n,width:s}=t;return e==="right"?n-=s:e==="center"&&(n-=s/2),n}function YW(t,e,n){let{y:s,height:r}=t;return e==="top"?s+=n:e==="bottom"?s-=r+n:s-=r/2,s}function ub(t,e,n,s){const{caretSize:r,caretPadding:i,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=r+i,{topLeft:u,topRight:h,bottomLeft:p,bottomRight:g}=no(o);let y=GW(e,a);const v=YW(e,l,c);return l==="center"?a==="left"?y+=c:a==="right"&&(y-=c):a==="left"?y-=Math.max(u,p)+r:a==="right"&&(y+=Math.max(h,g)+r),{x:ln(y,0,s.width-e.width),y:ln(v,0,s.height-e.height)}}function yc(t,e,n){const s=Un(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-s.right:t.x+s.left}function db(t){return ts([],ws(t))}function QW(t,e,n){return Ri(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function hb(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const Ik={beforeTitle:bs,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return n[e.dataIndex]}return""},afterTitle:bs,beforeBody:bs,beforeLabel:bs,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Ze(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:bs,afterBody:bs,beforeFooter:bs,footer:bs,afterFooter:bs};function gn(t,e,n,s){const r=t[e].call(n,s);return typeof r>"u"?Ik[e].call(n,s):r}class tp extends Ks{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,s=this.options.setContext(this.getContext()),r=s.enabled&&n.options.animation&&s.animations,i=new ck(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=QW(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:s}=n,r=gn(s,"beforeTitle",this,e),i=gn(s,"title",this,e),o=gn(s,"afterTitle",this,e);let a=[];return a=ts(a,ws(r)),a=ts(a,ws(i)),a=ts(a,ws(o)),a}getBeforeBody(e,n){return db(gn(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:s}=n,r=[];return nt(e,i=>{const o={before:[],lines:[],after:[]},a=hb(s,i);ts(o.before,ws(gn(a,"beforeLabel",this,i))),ts(o.lines,gn(a,"label",this,i)),ts(o.after,ws(gn(a,"afterLabel",this,i))),r.push(o)}),r}getAfterBody(e,n){return db(gn(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:s}=n,r=gn(s,"beforeFooter",this,e),i=gn(s,"footer",this,e),o=gn(s,"afterFooter",this,e);let a=[];return a=ts(a,ws(r)),a=ts(a,ws(i)),a=ts(a,ws(o)),a}_createItems(e){const n=this._active,s=this.chart.data,r=[],i=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(HW(this.chart,n[l]));return e.filter&&(a=a.filter((u,h,p)=>e.filter(u,h,p,s))),e.itemSort&&(a=a.sort((u,h)=>e.itemSort(u,h,s))),nt(a,u=>{const h=hb(e.callbacks,u);r.push(gn(h,"labelColor",this,u)),i.push(gn(h,"labelPointStyle",this,u)),o.push(gn(h,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const s=this.options.setContext(this.getContext()),r=this._active;let i,o=[];if(!r.length)this.opacity!==0&&(i={opacity:0});else{const a=pa[s.position].call(this,r,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const l=this._size=lb(this,s),c=Object.assign({},a,l),u=cb(this.chart,s,c),h=ub(s,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,s,r){const i=this.getCaretPosition(e,s,r);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,s){const{xAlign:r,yAlign:i}=this,{caretSize:o,cornerRadius:a}=s,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=no(a),{x:p,y:g}=e,{width:y,height:v}=n;let _,E,S,D,F,M;return i==="center"?(F=g+v/2,r==="left"?(_=p,E=_-o,D=F+o,M=F-o):(_=p+y,E=_+o,D=F-o,M=F+o),S=_):(r==="left"?E=p+Math.max(l,u)+o:r==="right"?E=p+y-Math.max(c,h)-o:E=this.caretX,i==="top"?(D=g,F=D-o,_=E-o,S=E+o):(D=g+v,F=D+o,_=E+o,S=E-o),M=D),{x1:_,x2:E,x3:S,y1:D,y2:F,y3:M}}drawTitle(e,n,s){const r=this.title,i=r.length;let o,a,l;if(i){const c=so(s.rtl,this.x,this.width);for(e.x=yc(this,s.titleAlign,s),n.textAlign=c.textAlign(s.titleAlign),n.textBaseline="middle",o=cn(s.titleFont),a=s.titleSpacing,n.fillStyle=s.titleColor,n.font=o.string,l=0;l<i;++l)n.fillText(r[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===i&&(e.y+=s.titleMarginBottom-a)}}_drawColorBox(e,n,s,r,i){const o=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:l,boxWidth:c}=i,u=cn(i.bodyFont),h=yc(this,"left",i),p=r.x(h),g=l<u.lineHeight?(u.lineHeight-l)/2:0,y=n.y+g;if(i.usePointStyle){const v={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},_=r.leftForLtr(p,c)+c/2,E=y+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,Qf(e,v,_,E),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Qf(e,v,_,E)}else{e.lineWidth=We(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const v=r.leftForLtr(p,c),_=r.leftForLtr(r.xPlus(p,1),c-2),E=no(o.borderRadius);Object.values(E).some(S=>S!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,Cu(e,{x:v,y,w:c,h:l,radius:E}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Cu(e,{x:_,y:y+1,w:c-2,h:l-2,radius:E}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(v,y,c,l),e.strokeRect(v,y,c,l),e.fillStyle=o.backgroundColor,e.fillRect(_,y+1,c-2,l-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,n,s){const{body:r}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=s,h=cn(s.bodyFont);let p=h.lineHeight,g=0;const y=so(s.rtl,this.x,this.width),v=function(b){n.fillText(b,y.x(e.x+g),e.y+p/2),e.y+=p+i},_=y.textAlign(o);let E,S,D,F,M,O,T;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,e.x=yc(this,_,s),n.fillStyle=s.bodyColor,nt(this.beforeBody,v),g=a&&_!=="right"?o==="center"?c/2+u:c+2+u:0,F=0,O=r.length;F<O;++F){for(E=r[F],S=this.labelTextColors[F],n.fillStyle=S,nt(E.before,v),D=E.lines,a&&D.length&&(this._drawColorBox(n,e,F,y,s),p=Math.max(h.lineHeight,l)),M=0,T=D.length;M<T;++M)v(D[M]),p=h.lineHeight;nt(E.after,v)}g=0,p=h.lineHeight,nt(this.afterBody,v),e.y-=i}drawFooter(e,n,s){const r=this.footer,i=r.length;let o,a;if(i){const l=so(s.rtl,this.x,this.width);for(e.x=yc(this,s.footerAlign,s),e.y+=s.footerMarginTop,n.textAlign=l.textAlign(s.footerAlign),n.textBaseline="middle",o=cn(s.footerFont),n.fillStyle=s.footerColor,n.font=o.string,a=0;a<i;++a)n.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+s.footerSpacing}}drawBackground(e,n,s,r){const{xAlign:i,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=s,{topLeft:h,topRight:p,bottomLeft:g,bottomRight:y}=no(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+h,l),o==="top"&&this.drawCaret(e,n,s,r),n.lineTo(a+c-p,l),n.quadraticCurveTo(a+c,l,a+c,l+p),o==="center"&&i==="right"&&this.drawCaret(e,n,s,r),n.lineTo(a+c,l+u-y),n.quadraticCurveTo(a+c,l+u,a+c-y,l+u),o==="bottom"&&this.drawCaret(e,n,s,r),n.lineTo(a+g,l+u),n.quadraticCurveTo(a,l+u,a,l+u-g),o==="center"&&i==="left"&&this.drawCaret(e,n,s,r),n.lineTo(a,l+h),n.quadraticCurveTo(a,l,a+h,l),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,s=this.$animations,r=s&&s.x,i=s&&s.y;if(r||i){const o=pa[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=lb(this,e),l=Object.assign({},o,this._size),c=cb(n,e,l),u=ub(e,l,c,n);(r._to!==u.x||i._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=Un(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=s,this.drawBackground(i,e,r,n),ok(e,n.textDirection),i.y+=o.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),ak(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const s=this._active,r=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),i=!Iu(s,r),o=this._positionChanged(r,n);(i||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],o=this._getActiveElements(e,i,n,s),a=this._positionChanged(o,e),l=n||!Iu(o,i)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,s,r){const i=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,s);return i.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:s,caretY:r,options:i}=this,o=pa[i.position].call(this,e,n);return o!==!1&&(s!==o.x||r!==o.y)}}ye(tp,"positioners",pa);var XW={id:"tooltip",_element:tp,positioners:pa,afterInit(t,e,n){n&&(t.tooltip=new tp({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Ik},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const JW=(t,e,n,s)=>(typeof e=="string"?(n=t.push(e)-1,s.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function ZW(t,e,n,s){const r=t.indexOf(e);if(r===-1)return JW(t,e,n,s);const i=t.lastIndexOf(e);return r!==i?n:r}const eK=(t,e)=>t===null?null:ln(Math.round(t),0,e);function fb(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class np extends Oo{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:r,label:i}of n)s[r]===i&&s.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Ze(e))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===e?n:ZW(s,e,Fe(n,e),this._addedLabels),eK(n,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:s,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),n||(r=this.getLabels().length-1)),this.min=s,this.max=r}buildTicks(){const e=this.min,n=this.max,s=this.options.offset,r=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=e;o<=n;o++)r.push({value:o});return r}getLabelForValue(e){return fb.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}ye(np,"id","category"),ye(np,"defaults",{ticks:{callback:fb}});function tK(t,e){const n=[],{bounds:r,step:i,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:p}=t,g=i||1,y=u-1,{min:v,max:_}=e,E=!Ze(o),S=!Ze(a),D=!Ze(c),F=(_-v)/(h+1);let M=g_((_-v)/y/g)*g,O,T,b,w;if(M<1e-14&&!E&&!S)return[{value:v},{value:_}];w=Math.ceil(_/M)-Math.floor(v/M),w>y&&(M=g_(w*M/y/g)*g),Ze(l)||(O=Math.pow(10,l),M=Math.ceil(M*O)/O),r==="ticks"?(T=Math.floor(v/M)*M,b=Math.ceil(_/M)*M):(T=v,b=_),E&&S&&i&&wz((a-o)/i,M/1e3)?(w=Math.round(Math.min((a-o)/M,u)),M=(a-o)/w,T=o,b=a):D?(T=E?o:T,b=S?a:b,w=c-1,M=(b-T)/w):(w=(b-T)/M,Ra(w,Math.round(w),M/1e3)?w=Math.round(w):w=Math.ceil(w));const C=Math.max(m_(M),m_(T));O=Math.pow(10,Ze(l)?C:l),T=Math.round(T*O)/O,b=Math.round(b*O)/O;let k=0;for(E&&(p&&T!==o?(n.push({value:o}),T<o&&k++,Ra(Math.round((T+k*M)*O)/O,o,pb(o,F,t))&&k++):T<o&&k++);k<w;++k){const A=Math.round((T+k*M)*O)/O;if(S&&A>a)break;n.push({value:A})}return S&&p&&b!==a?n.length&&Ra(n[n.length-1].value,a,pb(a,F,t))?n[n.length-1].value=a:n.push({value:a}):(!S||b===a)&&n.push({value:b}),n}function pb(t,e,{horizontal:n,minRotation:s}){const r=Ds(s),i=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class nK extends Oo{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Ze(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:r,max:i}=this;const o=l=>r=n?r:l,a=l=>i=s?i:l;if(e){const l=ds(r),c=ds(i);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===i){let l=i===0?1:Math.abs(i*.05);a(i+l),e||o(r-l)}this.min=r,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=e,r;return s?(r=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const r={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=tK(r,i);return e.bounds==="ticks"&&Ez(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const r=(s-n)/Math.max(e.length-1,1)/2;n-=r,s+=r}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(e){return zg(e,this.chart.options.locale,this.options.ticks.format)}}class sp extends nK{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Fn(e)?e:0,this.max=Fn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,s=Ds(this.options.ticks.minRotation),r=(e?Math.sin(s):Math.cos(s))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ye(sp,"id","linear"),ye(sp,"defaults",{ticks:{callback:JT.formatters.numeric}});const Nd={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},yn=Object.keys(Nd);function gb(t,e){return t-e}function mb(t,e){if(Ze(e))return null;const n=t._adapter,{parser:s,round:r,isoWeekday:i}=t._parseOpts;let o=e;return typeof s=="function"&&(o=s(o)),Fn(o)||(o=typeof s=="string"?n.parse(o,s):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(al(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,r)),+o)}function yb(t,e,n,s){const r=yn.length;for(let i=yn.indexOf(t);i<r-1;++i){const o=Nd[yn[i]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=s)return yn[i]}return yn[r-1]}function sK(t,e,n,s,r){for(let i=yn.length-1;i>=yn.indexOf(n);i--){const o=yn[i];if(Nd[o].common&&t._adapter.diff(r,s,o)>=e-1)return o}return yn[n?yn.indexOf(n):0]}function rK(t){for(let e=yn.indexOf(t)+1,n=yn.length;e<n;++e)if(Nd[yn[e]].common)return yn[e]}function vb(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:s,hi:r}=Ug(n,e),i=n[s]>=e?n[s]:n[r];t[i]=!0}}function iK(t,e,n,s){const r=t._adapter,i=+r.startOf(e[0].value,s),o=e[e.length-1].value;let a,l;for(a=i;a<=o;a=+r.add(a,1,s))l=n[a],l>=0&&(e[l].major=!0);return e}function _b(t,e,n){const s=[],r={},i=e.length;let o,a;for(o=0;o<i;++o)a=e[o],r[a]=o,s.push({value:a,major:!1});return i===0||!n?s:iK(t,s,r,n)}class Du extends Oo{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const s=e.time||(e.time={}),r=this._adapter=new lq._date(e.adapters.date);r.init(n),Pa(s.displayFormats,r.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:mb(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,s=e.time.unit||"day";let{min:r,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(r=Math.min(r,c.min)),!a&&!isNaN(c.max)&&(i=Math.max(i,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=Fn(r)&&!isNaN(r)?r:+n.startOf(Date.now(),s),i=Fn(i)&&!isNaN(i)?i:+n.endOf(Date.now(),s)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],s=e[e.length-1]),{min:n,max:s}}buildTicks(){const e=this.options,n=e.time,s=e.ticks,r=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,o=this.max,a=Az(r,i,o);return this._unit=n.unit||(s.autoSkip?yb(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):sK(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:rK(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),_b(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,s=0,r,i;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?s=i:s=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=ln(n,0,o),s=ln(s,0,o),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const e=this._adapter,n=this.min,s=this.max,r=this.options,i=r.time,o=i.unit||yb(i.minUnit,n,s,this._getLabelCapacity(n)),a=Fe(r.ticks.stepSize,1),l=o==="week"?i.isoWeekday:!1,c=al(l)||l===!0,u={};let h=n,p,g;if(c&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,c?"day":o),e.diff(s,n,o)>1e5*a)throw new Error(n+" and "+s+" are too far apart with stepSize of "+a+" "+o);const y=r.ticks.source==="data"&&this.getDataTimestamps();for(p=h,g=0;p<s;p=+e.add(p,a,o),g++)vb(u,p,y);return(p===s||r.bounds==="ticks"||g===1)&&vb(u,p,y),Object.keys(u).sort(gb).map(v=>+v)}getLabelForValue(e){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(e,s.tooltipFormat):n.format(e,s.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,i=this._unit,o=n||r[i];return this._adapter.format(e,o)}_tickFormatFunction(e,n,s,r){const i=this.options,o=i.ticks.callback;if(o)return ut(o,[e,n,s],this);const a=i.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],p=s[n],g=c&&h&&p&&p.major;return this._adapter.format(e,r||(g?h:u))}generateTickLabels(e){let n,s,r;for(n=0,s=e.length;n<s;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,s=this.ctx.measureText(e).width,r=Ds(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:s*i+a*o,h:s*o+a*i}}_getLabelCapacity(e){const n=this.options.time,s=n.displayFormats,r=s[n.unit]||s.millisecond,i=this._tickFormatFunction(e,0,_b(this,[e],this._majorUnit),r),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,s;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,s=r.length;n<s;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,s;if(e.length)return e;const r=this.getLabels();for(n=0,s=r.length;n<s;++n)e.push(mb(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return YT(e.sort(gb))}}ye(Du,"id","time"),ye(Du,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function vc(t,e,n){let s=0,r=t.length-1,i,o,a,l;n?(e>=t[s].pos&&e<=t[r].pos&&({lo:s,hi:r}=si(t,"pos",e)),{pos:i,time:a}=t[s],{pos:o,time:l}=t[r]):(e>=t[s].time&&e<=t[r].time&&({lo:s,hi:r}=si(t,"time",e)),{time:i,pos:a}=t[s],{time:o,pos:l}=t[r]);const c=o-i;return c?a+(l-a)*(e-i)/c:a}class bb extends Du{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=vc(n,this.min),this._tableRange=vc(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:s}=this,r=[],i=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=s&&r.push(c);if(r.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(o=0,a=r.length;o<a;++o)u=r[o+1],l=r[o-1],c=r[o],Math.round((u+l)/2)!==c&&i.push({time:c,pos:o/(a-1)});return i}_generate(){const e=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((r,i)=>r-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?e=this.normalize(n.concat(s)):e=n.length?n:s,e=this._cache.all=e,e}getDecimalForValue(e){return(vc(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return vc(this._table,s*this._tableRange+this._minPos,!0)}}ye(bb,"id","timeseries"),ye(bb,"defaults",Du.defaults);const Sk={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},oK={ariaLabel:{type:String},ariaDescribedby:{type:String}},aK={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...Sk,...oK},lK=Lx[0]==="2"?(t,e)=>Object.assign(t,{attrs:e}):(t,e)=>Object.assign(t,e);function Ui(t){return fl(t)?Ue(t):t}function cK(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t;return fl(e)?new Proxy(t,{}):t}function uK(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function Ak(t,e){t.labels=e}function Ck(t,e,n){const s=[];t.datasets=e.map(r=>{const i=t.datasets.find(o=>o[n]===r[n]);return!i||!r.data||s.includes(i)?{...r}:(s.push(i),Object.assign(i,r),i)})}function dK(t,e){const n={labels:[],datasets:[]};return Ak(n,t.labels),Ck(n,t.datasets,e),n}const hK=Rr({props:aK,setup(t,e){let{expose:n,slots:s}=e;const r=z(null),i=mp(null);n({chart:i});const o=()=>{if(!r.value)return;const{type:c,data:u,options:h,plugins:p,datasetIdKey:g}=t,y=dK(u,g),v=cK(y,u);i.value=new Md(r.value,{type:c,data:v,options:{...h},plugins:p})},a=()=>{const c=Ue(i.value);c&&(t.destroyDelay>0?setTimeout(()=>{c.destroy(),i.value=null},t.destroyDelay):(c.destroy(),i.value=null))},l=c=>{c.update(t.updateMode)};return pt(o),Ti(a),Pt([()=>t.options,()=>t.data],(c,u)=>{let[h,p]=c,[g,y]=u;const v=Ue(i.value);if(!v)return;let _=!1;if(h){const E=Ui(h),S=Ui(g);E&&E!==S&&(uK(v,E),_=!0)}if(p){const E=Ui(p.labels),S=Ui(y.labels),D=Ui(p.datasets),F=Ui(y.datasets);E!==S&&(Ak(v.config.data,E),_=!0),D&&D!==F&&(Ck(v.config.data,D,t.datasetIdKey),_=!0)}_&&An(()=>{l(v)})},{deep:!0}),()=>hi("canvas",{role:"img",ariaLabel:t.ariaLabel,ariaDescribedby:t.ariaDescribedby,ref:r},[hi("p",{},[s.default?s.default():""])])}});function Zg(t,e){return Md.register(e),Rr({props:Sk,setup(n,s){let{expose:r}=s;const i=mp(null),o=a=>{i.value=a==null?void 0:a.chart};return r({chart:i}),()=>hi(hK,lK({ref:o},{type:t,...n}))}})}const xb=Zg("bar",$c),wb=Zg("line",Fc),fK=Zg("pie",Xf),pK={class:"p-6 bg-white dark:bg-gray-800 rounded-lg shadow-md"},gK={class:"mb-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},mK={key:0},yK={key:1},vK={key:2},_K={key:3},bK={key:4},xK={class:"col-span-full md:col-span-1 flex items-end"},wK=["disabled"],EK={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert"},TK={class:"block sm:inline"},kK={key:1,class:"bg-blue-100 border border-blue-400 text-blue-700 px-4 py-3 rounded relative mb-4",role:"alert"},IK={key:2,class:"mt-8"},SK={class:"text-xl font-semibold text-gray-700 dark:text-gray-300 mb-4"},AK={class:"font-normal"},CK={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8"},PK={class:"bg-gray-100 dark:bg-gray-700 p-4 rounded-lg shadow-sm"},RK={class:"text-2xl font-bold text-orange-600 dark:text-orange-400"},OK={key:0,class:"bg-gray-100 dark:bg-gray-700 p-4 rounded-lg shadow-sm"},DK={class:"text-2xl font-bold text-blue-600 dark:text-blue-400"},MK={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"},NK={key:0,class:"bg-gray-100 dark:bg-gray-700 p-4 rounded-lg shadow-sm"},LK={class:"h-64"},VK={key:1,class:"bg-gray-100 dark:bg-gray-700 p-4 rounded-lg shadow-sm"},$K={class:"h-64"},FK={key:2,class:"mt-6 bg-gray-100 dark:bg-gray-700 p-4 rounded-lg shadow-sm"},UK={class:"h-64"},BK={key:3,class:"mt-6 bg-gray-100 dark:bg-gray-700 p-4 rounded-lg shadow-sm"},jK={class:"h-64"},zK={key:4,class:"mt-6 bg-gray-100 dark:bg-gray-700 p-4 rounded-lg shadow-sm"},HK={class:"h-64"},qK={key:1},WK={class:"overflow-x-auto"},KK={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},GK={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},YK={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200"},QK={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200"},XK={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200"},JK={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200 capitalize"},ZK={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200 capitalize"},eG={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200"},tG={key:2,class:"mt-6"},nG={class:"list-disc pl-5 text-gray-900 dark:text-gray-200"},sG={class:"font-medium"},rG={key:3,class:"mt-6"},iG={class:"list-disc pl-5 text-gray-900 dark:text-gray-200"},oG={class:"font-medium"},aG={key:4,class:"mt-6"},lG={class:"list-disc pl-5 text-gray-900 dark:text-gray-200"},cG={class:"font-medium"},uG={key:5,class:"mt-6"},dG={class:"list-disc pl-5 text-gray-900 dark:text-gray-200"},hG={class:"font-medium"},fG={key:6,class:"mt-6"},pG={class:"list-disc pl-5 text-gray-900 dark:text-gray-200"},gG={class:"font-medium"},mG={__name:"SalesReports",setup(t){Md.register(zW,XW,BW,zc,np,sp,ha,fa,jc);function e(M){return typeof M!="number"?"R$ 0,00":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2,maximumFractionDigits:2}).format(M)}const n=z("daily"),s=z(""),r=z(""),i=z(new Date().getFullYear()),o=z(new Date().getMonth()+1),a=z(new Date().getFullYear()),l=z(null),c=z(!1),u=z(null),h=z(!1),p={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"#d1d5db"}},tooltip:{callbacks:{label:function(M){let O=M.dataset.label||"";return O&&(O+=": "),M.parsed.y!==null&&(O+=e(M.parsed.y)),O}}}},scales:{x:{ticks:{color:"#d1d5db"},grid:{color:"rgba(209, 213, 219, 0.1)"}},y:{ticks:{color:"#d1d5db",callback:function(M){return e(M)}},grid:{color:"rgba(209, 213, 219, 0.1)"}}}},g=me(()=>{var b;if(!l.value||!((b=l.value.details)!=null&&b.byPaymentType))return{labels:[],datasets:[{data:[]}]};const M=Object.keys(l.value.details.byPaymentType),O=Object.values(l.value.details.byPaymentType);return{labels:M,datasets:[{label:"Vendas",backgroundColor:["#F97316","#22C55E","#3B82F6","#EF4444","#8B5CF6","#EC4899"].slice(0,M.length),data:O}]}}),y=me(()=>{var b;if(!l.value||!((b=l.value.details)!=null&&b.byDeliveryType))return{labels:[],datasets:[{data:[]}]};const M=Object.keys(l.value.details.byDeliveryType),O=Object.values(l.value.details.byDeliveryType);return{labels:M,datasets:[{label:"Vendas",backgroundColor:["#A855F7","#F43F5E","#10B981","#EAB308","#6366F1"].slice(0,M.length),data:O}]}}),v=me(()=>{var b;if(!l.value||!((b=l.value.details)!=null&&b.byDay))return{labels:[],datasets:[{data:[]}]};const O=["Domingo","Segunda-feira","Terça-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sábado"].filter(w=>l.value.details.byDay[w]!==void 0),T=O.map(w=>l.value.details.byDay[w]);return{labels:O,datasets:[{label:"Vendas por Dia",backgroundColor:"#F97316",borderColor:"#F97316",data:T}]}}),_=me(()=>{var T;if(!l.value||!((T=l.value.details)!=null&&T.byDayOfMonth))return{labels:[],datasets:[{data:[]}]};const M=Object.keys(l.value.details.byDayOfMonth).sort((b,w)=>parseInt(b)-parseInt(w)),O=M.map(b=>l.value.details.byDayOfMonth[b]);return{labels:M.map(b=>`Dia ${b}`),datasets:[{label:"Vendas por Dia do Mês",backgroundColor:"rgba(59, 130, 246, 0.5)",borderColor:"#3B82F6",data:O,fill:!1,tension:.1}]}}),E=me(()=>{var b;if(!l.value||!((b=l.value.details)!=null&&b.byMonth))return{labels:[],datasets:[{data:[]}]};const O=["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"].filter(w=>l.value.details.byMonth[`${w.charAt(0).toUpperCase()+w.slice(1)} ${a.value}`]!==void 0),T=O.map(w=>l.value.details.byMonth[`${w.charAt(0).toUpperCase()+w.slice(1)} ${a.value}`]);return{labels:O.map(w=>w.charAt(0).toUpperCase()+w.slice(1)),datasets:[{label:"Vendas por Mês",backgroundColor:"rgba(139, 92, 246, 0.5)",borderColor:"#8B5CF6",data:T,fill:!1,tension:.1}]}}),S=M=>{const O=new Date(M),T=O.getFullYear(),b=String(O.getMonth()+1).padStart(2,"0"),w=String(O.getDate()).padStart(2,"0");return`${T}-${b}-${w}`};pt(()=>{s.value=S(new Date);const M=new Date,O=new Date(M);O.setDate(M.getDate()-M.getDay()),r.value=S(O),F()}),Pt(n,()=>{D()}),Pt(l,M=>{M&&Object.keys(M).length>0?(h.value=!1,An(()=>{h.value=!0})):h.value=!1},{immediate:!0,deep:!0});const D=()=>{u.value=null,l.value=null,h.value=!1},F=async()=>{c.value=!0,u.value=null,l.value=null,h.value=!1;let M="",O={};try{switch(n.value){case"daily":if(!s.value)throw new Error("Por favor, selecione uma data para o relatório diário.");M="/admin/reports/sales/daily",O={date:s.value};break;case"weekly":M="/admin/reports/sales/weekly",r.value&&(O={startDate:r.value});break;case"monthly":if(!i.value||!o.value)throw new Error("Por favor, insira o ano e o mês para o relatório mensal.");M="/admin/reports/sales/monthly",O={year:i.value,month:o.value};break;case"yearly":if(!a.value)throw new Error("Por favor, insira o ano para o relatório anual.");M="/admin/reports/sales/yearly",O={year:a.value};break;default:throw new Error("Tipo de relatório inválido selecionado.")}const T=await it.get(M,{params:O});l.value=T.data}catch(T){T.response&&T.response.data&&T.response.data.message?u.value=T.response.data.message:u.value=T.message||"Ocorreu um erro ao buscar o relatório.",console.error("Erro ao buscar relatório:",T)}finally{c.value=!1}};return(M,O)=>(R(),qe(Lr,null,{default:_e(()=>{var T,b,w,C,k,A,I;return[f("div",pK,[O[30]||(O[30]=f("h2",{class:"text-2xl font-bold text-gray-800 dark:text-gray-200 mb-6"},"Relatórios de Vendas",-1)),f("div",gK,[f("div",null,[O[7]||(O[7]=f("label",{for:"reportType",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Tipo de relatório:",-1)),Ie(f("select",{id:"reportType","onUpdate:modelValue":O[0]||(O[0]=V=>n.value=V),onChange:D,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm rounded-md dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600"},O[6]||(O[6]=[f("option",{value:"daily"},"Diário",-1),f("option",{value:"weekly"},"Semanal",-1),f("option",{value:"monthly"},"Mensal",-1),f("option",{value:"yearly"},"Anual",-1)]),544),[[Ns,n.value]])]),n.value==="daily"?(R(),N("div",mK,[O[8]||(O[8]=f("label",{for:"dailyDate",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Selecione o Dia:",-1)),Ie(f("input",{type:"date",id:"dailyDate","onUpdate:modelValue":O[1]||(O[1]=V=>s.value=V),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm rounded-md dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600"},null,512),[[Je,s.value]])])):ne("",!0),n.value==="weekly"?(R(),N("div",yK,[O[9]||(O[9]=f("label",{for:"weeklyStartDate",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Data de Início da Semana:",-1)),Ie(f("input",{type:"date",id:"weeklyStartDate","onUpdate:modelValue":O[2]||(O[2]=V=>r.value=V),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm rounded-md dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600"},null,512),[[Je,r.value]])])):ne("",!0),n.value==="monthly"?(R(),N("div",vK,[O[10]||(O[10]=f("label",{for:"monthlyYear",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Ano:",-1)),Ie(f("input",{type:"number",id:"monthlyYear","onUpdate:modelValue":O[3]||(O[3]=V=>i.value=V),placeholder:"Ex: 2024",class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm rounded-md dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600"},null,512),[[Je,i.value]])])):ne("",!0),n.value==="monthly"?(R(),N("div",_K,[O[11]||(O[11]=f("label",{for:"monthlyMonth",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Mês:",-1)),Ie(f("input",{type:"number",id:"monthlyMonth","onUpdate:modelValue":O[4]||(O[4]=V=>o.value=V),placeholder:"Ex: 6 (Junho)",min:"1",max:"12",class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm rounded-md dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600"},null,512),[[Je,o.value]])])):ne("",!0),n.value==="yearly"?(R(),N("div",bK,[O[12]||(O[12]=f("label",{for:"yearlyYear",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Ano:",-1)),Ie(f("input",{type:"number",id:"yearlyYear","onUpdate:modelValue":O[5]||(O[5]=V=>a.value=V),placeholder:"Ex: 2024",class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm rounded-md dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600"},null,512),[[Je,a.value]])])):ne("",!0),f("div",xK,[f("button",{onClick:F,disabled:c.value,class:"w-full bg-orange-600 hover:bg-orange-700 text-white font-bold py-2 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 disabled:opacity-50"},U(c.value?"Carregando...":"Gerar Relatório"),9,wK)])]),u.value?(R(),N("div",EK,[O[13]||(O[13]=f("strong",{class:"font-bold"},"Erro!",-1)),f("span",TK,U(u.value),1)])):ne("",!0),!c.value&&l.value&&Object.keys(l.value).length===0?(R(),N("div",kK,O[14]||(O[14]=[f("strong",{class:"font-bold"},"Aviso!",-1),f("span",{class:"block sm:inline"}," Nenhum dado encontrado para o período selecionado.",-1)]))):ne("",!0),l.value&&Object.keys(l.value).length>0&&!c.value?(R(),N("div",IK,[f("h3",SK,[O[15]||(O[15]=G("Resumo do Relatório: ")),f("span",AK,U(l.value.period),1)]),f("div",CK,[f("div",PK,[O[16]||(O[16]=f("p",{class:"text-gray-600 dark:text-gray-400 text-sm"},"Vendas Totais",-1)),f("p",RK,U(e(l.value.totalSales)),1)]),l.value.salesCount!==void 0?(R(),N("div",OK,[O[17]||(O[17]=f("p",{class:"text-gray-600 dark:text-gray-400 text-sm"},"Quantidade de Pedidos",-1)),f("p",DK,U(l.value.salesCount),1)])):ne("",!0)]),h.value?(R(),N("div",MK,[g.value.labels.length>0?(R(),N("div",NK,[O[18]||(O[18]=f("h4",{class:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Vendas por Tipo de Pagamento",-1)),f("div",LK,[(R(),qe(be(xb),{data:g.value,options:p,key:l.value.period+"-payment"},null,8,["data"]))])])):ne("",!0),y.value.labels.length>0?(R(),N("div",VK,[O[19]||(O[19]=f("h4",{class:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Vendas por Tipo de Entrega",-1)),f("div",$K,[(R(),qe(be(fK),{data:y.value,options:p,key:l.value.period+"-delivery"},null,8,["data"]))])])):ne("",!0),n.value==="weekly"&&v.value.labels.length>0?(R(),N("div",FK,[O[20]||(O[20]=f("h4",{class:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Vendas por Dia da Semana:",-1)),f("div",UK,[(R(),qe(be(xb),{data:v.value,options:p,key:l.value.period+"-day"},null,8,["data"]))])])):ne("",!0),n.value==="monthly"&&_.value.labels.length>0?(R(),N("div",BK,[O[21]||(O[21]=f("h4",{class:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Vendas por Dia do Mês:",-1)),f("div",jK,[(R(),qe(be(wb),{data:_.value,options:p,key:l.value.period+"-daymonth"},null,8,["data"]))])])):ne("",!0),n.value==="yearly"&&E.value.labels.length>0?(R(),N("div",zK,[O[22]||(O[22]=f("h4",{class:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Vendas por Mês:",-1)),f("div",HK,[(R(),qe(be(wb),{data:E.value,options:p,key:l.value.period+"-month"},null,8,["data"]))])])):ne("",!0)])):ne("",!0),n.value==="daily"&&((b=(T=l.value.details)==null?void 0:T.orders)!=null&&b.length)?(R(),N("div",qK,[O[24]||(O[24]=f("h4",{class:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Pedidos Detalhados:",-1)),f("div",WK,[f("table",KK,[O[23]||(O[23]=f("thead",{class:"bg-gray-50 dark:bg-gray-700"},[f("tr",null,[f("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," ID do Pedido "),f("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Cliente "),f("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Valor Total "),f("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Pagamento "),f("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Entrega "),f("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Data/Hora ")])],-1)),f("tbody",GK,[(R(!0),N(pe,null,Ce(l.value.details.orders,V=>(R(),N("tr",{key:V.orderId},[f("td",YK,U(V.orderId),1),f("td",QK,U(V.customerName),1),f("td",XK,U(e(V.totalValue)),1),f("td",JK,U(V.paymentMethod),1),f("td",ZK,U(V.deliveryType),1),f("td",eG,U(V.created_at),1)]))),128))])])])])):ne("",!0),(w=l.value.details)!=null&&w.byPaymentType&&Object.keys(l.value.details.byPaymentType).length>0?(R(),N("div",tG,[O[25]||(O[25]=f("h4",{class:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Vendas por tipo de pagamento:",-1)),f("ul",nG,[(R(!0),N(pe,null,Ce(l.value.details.byPaymentType,(V,Y)=>(R(),N("li",{key:Y},[G(U(Y)+": ",1),f("span",sG,U(e(V)),1)]))),128))])])):ne("",!0),(C=l.value.details)!=null&&C.byDeliveryType&&Object.keys(l.value.details.byDeliveryType).length>0?(R(),N("div",rG,[O[26]||(O[26]=f("h4",{class:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Vendas por tipo de entrega:",-1)),f("ul",iG,[(R(!0),N(pe,null,Ce(l.value.details.byDeliveryType,(V,Y)=>(R(),N("li",{key:Y},[G(U(Y)+": ",1),f("span",oG,U(e(V)),1)]))),128))])])):ne("",!0),n.value==="weekly"&&((k=l.value.details)!=null&&k.byDay)&&Object.keys(l.value.details.byDay).length>0?(R(),N("div",aG,[O[27]||(O[27]=f("h4",{class:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Vendas por Dia da Semana:",-1)),f("ul",lG,[(R(!0),N(pe,null,Ce(l.value.details.byDay,(V,Y)=>(R(),N("li",{key:Y},[G(U(Y)+": ",1),f("span",cG,U(e(V)),1)]))),128))])])):ne("",!0),n.value==="monthly"&&((A=l.value.details)!=null&&A.byDayOfMonth)&&Object.keys(l.value.details.byDayOfMonth).length>0?(R(),N("div",uG,[O[28]||(O[28]=f("h4",{class:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Vendas por Dia do Mês:",-1)),f("ul",dG,[(R(!0),N(pe,null,Ce(l.value.details.byDayOfMonth,(V,Y)=>(R(),N("li",{key:Y},[G(" Dia "+U(Y)+": ",1),f("span",hG,U(e(V)),1)]))),128))])])):ne("",!0),n.value==="yearly"&&((I=l.value.details)!=null&&I.byMonth)&&Object.keys(l.value.details.byMonth).length>0?(R(),N("div",fG,[O[29]||(O[29]=f("h4",{class:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Vendas por Mês:",-1)),f("ul",pG,[(R(!0),N(pe,null,Ce(l.value.details.byMonth,(V,Y)=>(R(),N("li",{key:Y},[G(U(Y)+": ",1),f("span",gG,U(e(V)),1)]))),128))])])):ne("",!0)])):ne("",!0)])]}),_:1}))}},ui=N2({history:d2("/"),routes:[{path:"/",name:"home",component:a$,meta:{enterActiveClass:"animate__animated animate__fadeIn animate__faster",leaveActiveClass:"animate__animated animate__fadeOut animate__faster"}},{path:"/carrinho",name:"cart",component:k$,meta:{enterActiveClass:"animate__animated animate__fadeIn animate__faster",leaveActiveClass:"animate__animated animate__fadeOut animate__faster"}},{path:"/produto/:slug",name:"productDetail",component:t6,meta:{enterActiveClass:"animate__animated animate__fadeIn animate__faster",leaveActiveClass:"animate__animated animate__fadeOut animate__faster"}},{path:"/favoritos",name:"favritos",component:a6,meta:{enterActiveClass:"animate__animated animate__fadeIn animate__faster",leaveActiveClass:"animate__animated animate__fadeOut animate__faster"}},{path:"/perfil",name:"perfil",component:b6,meta:{enterActiveClass:"animate__animated animate__fadeIn animate__faster",leaveActiveClass:"animate__animated animate__fadeOut animate__faster"}},{path:"/checkout",name:"checkout",component:nF,meta:{enterActiveClass:"animate__animated animate__fadeIn animate__faster",leaveActiveClass:"animate__animated animate__fadeOut animate__faster"}},{path:"/monte-sua-pizza",name:"buildPiza",component:DF,meta:{enterActiveClass:"animate__animated animate__fadeIn animate__faster",leaveActiveClass:"animate__animated animate__fadeOut animate__faster"}},{path:"/configuracoes",name:"settings",component:KF,meta:{enterActiveClass:"animate__animated animate__fadeIn animate__faster",leaveActiveClass:"animate__animated animate__fadeOut animate__faster"}},{path:"/admin/login",name:"admin-login",component:pj,meta:{requiresAuth:!1,publicRoute:!0}},{path:"/admin",name:"admin-dashboard",component:W9,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/orders",name:"admin-orders",component:LB,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/products",name:"admin-products",component:V8,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/categories",name:"admin-categories",component:k7,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/whatsapp-qr",name:"whatsapp-qr",component:z7,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/settings",name:"admin-settings",component:rj,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/manage-users",name:"admin-manager-users",component:jj,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/reports",name:"AdminSalesReports",component:mG,meta:{requiresAuth:!0,requiresAdmin:!0}}]});ui.beforeEach(async(t,e,n)=>{const s=Rd();!s.isAuthenticated&&!s.loading&&await s.initializeAuth();const r=t.matched.some(c=>c.meta.requiresAuth),i=t.matched.some(c=>c.meta.requiresAdmin),o=t.matched.some(c=>c.meta.publicRoute),a=s.isAuthenticated,l=s.isAdmin;r&&!a?(console.log("Acesso negado: Rota requer autenticação, mas usuário não está autenticado."),n({name:"admin-login"})):i&&!l?(console.log("Acesso negado: Rota requer privilégios de admin, mas usuário não é admin. Redirecionando para home."),n({name:"home"})):o&&a?(console.log("Redirecionando: Usuário autenticado tentando acessar página de login."),n({name:"admin-dashboard"})):(console.log("Acesso permitido."),n())});function yG(t){return typeof t!="number"?"R$ 0,00":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2,maximumFractionDigits:2}).format(t)}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("firebase-messaging-sw.js").then(t=>{console.log("Service Worker registrado com sucesso:",t)}).catch(t=>{console.error("Falha no registro do Service Worker:",t)})});const Ld=IA(W2);Ld.config.globalProperties.$formatPrice=yG;Ld.use(CA());Ld.use(ui);Ld.mount("#app");
