var aI=Object.defineProperty;var lI=(t,e,n)=>e in t?aI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var be=(t,e,n)=>lI(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();/**
* @vue/shared v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function up(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const lt={},Xi=[],cs=()=>{},cI=()=>!1,Uu=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),dp=t=>t.startsWith("onUpdate:"),Ft=Object.assign,hp=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},uI=Object.prototype.hasOwnProperty,nt=(t,e)=>uI.call(t,e),Te=Array.isArray,Ji=t=>vl(t)==="[object Map]",xo=t=>vl(t)==="[object Set]",Jm=t=>vl(t)==="[object Date]",Le=t=>typeof t=="function",bt=t=>typeof t=="string",Gn=t=>typeof t=="symbol",ct=t=>t!==null&&typeof t=="object",Pb=t=>(ct(t)||Le(t))&&Le(t.then)&&Le(t.catch),Rb=Object.prototype.toString,vl=t=>Rb.call(t),dI=t=>vl(t).slice(8,-1),Ob=t=>vl(t)==="[object Object]",fp=t=>bt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,ba=up(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Bu=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},hI=/-(\w)/g,Fn=Bu(t=>t.replace(hI,(e,n)=>n?n.toUpperCase():"")),fI=/\B([A-Z])/g,Mr=Bu(t=>t.replace(fI,"-$1").toLowerCase()),ju=Bu(t=>t.charAt(0).toUpperCase()+t.slice(1)),rh=Bu(t=>t?`on${ju(t)}`:""),_r=(t,e)=>!Object.is(t,e),Ic=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Db=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},Qc=t=>{const e=parseFloat(t);return isNaN(e)?t:e},pI=t=>{const e=bt(t)?Number(t):NaN;return isNaN(e)?t:e};let Zm;const zu=()=>Zm||(Zm=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function wo(t){if(Te(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=bt(s)?vI(s):wo(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(bt(t)||ct(t))return t}const gI=/;(?![^(]*\))/g,mI=/:([^]+)/,yI=/\/\*[^]*?\*\//g;function vI(t){const e={};return t.replace(yI,"").split(gI).forEach(n=>{if(n){const s=n.split(mI);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function ce(t){let e="";if(bt(t))e=t;else if(Te(t))for(let n=0;n<t.length;n++){const s=ce(t[n]);s&&(e+=s+" ")}else if(ct(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const _I="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",bI=up(_I);function Mb(t){return!!t||t===""}function xI(t,e){if(t.length!==e.length)return!1;let n=!0;for(let s=0;n&&s<t.length;s++)n=pi(t[s],e[s]);return n}function pi(t,e){if(t===e)return!0;let n=Jm(t),s=Jm(e);if(n||s)return n&&s?t.getTime()===e.getTime():!1;if(n=Gn(t),s=Gn(e),n||s)return t===e;if(n=Te(t),s=Te(e),n||s)return n&&s?xI(t,e):!1;if(n=ct(t),s=ct(e),n||s){if(!n||!s)return!1;const r=Object.keys(t).length,i=Object.keys(e).length;if(r!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!pi(t[o],e[o]))return!1}}return String(t)===String(e)}function pp(t,e){return t.findIndex(n=>pi(n,e))}const Nb=t=>!!(t&&t.__v_isRef===!0),B=t=>bt(t)?t:t==null?"":Te(t)||ct(t)&&(t.toString===Rb||!Le(t.toString))?Nb(t)?B(t.value):JSON.stringify(t,Lb,2):String(t),Lb=(t,e)=>Nb(e)?Lb(t,e.value):Ji(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r],i)=>(n[ih(s,i)+" =>"]=r,n),{})}:xo(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>ih(n))}:Gn(e)?ih(e):ct(e)&&!Te(e)&&!Ob(e)?String(e):e,ih=(t,e="")=>{var n;return Gn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let tn;class Vb{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=tn,!e&&tn&&(this.index=(tn.scopes||(tn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=tn;try{return tn=this,e()}finally{tn=n}}}on(){++this._on===1&&(this.prevScope=tn,tn=this)}off(){this._on>0&&--this._on===0&&(tn=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function $b(t){return new Vb(t)}function Fb(){return tn}function wI(t,e=!1){tn&&tn.cleanups.push(t)}let ut;const oh=new WeakSet;class Ub{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,tn&&tn.active&&tn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,oh.has(this)&&(oh.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||jb(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,e0(this),zb(this);const e=ut,n=Wn;ut=this,Wn=!0;try{return this.fn()}finally{Hb(this),ut=e,Wn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)yp(e);this.deps=this.depsTail=void 0,e0(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?oh.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){nf(this)&&this.run()}get dirty(){return nf(this)}}let Bb=0,xa,wa;function jb(t,e=!1){if(t.flags|=8,e){t.next=wa,wa=t;return}t.next=xa,xa=t}function gp(){Bb++}function mp(){if(--Bb>0)return;if(wa){let e=wa;for(wa=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;xa;){let e=xa;for(xa=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function zb(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Hb(t){let e,n=t.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),yp(s),EI(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}t.deps=e,t.depsTail=n}function nf(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(qb(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function qb(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Ua)||(t.globalVersion=Ua,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!nf(t))))return;t.flags|=2;const e=t.dep,n=ut,s=Wn;ut=t,Wn=!0;try{zb(t);const r=t.fn(t._value);(e.version===0||_r(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{ut=n,Wn=s,Hb(t),t.flags&=-3}}function yp(t,e=!1){const{dep:n,prevSub:s,nextSub:r}=t;if(s&&(s.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)yp(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function EI(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Wn=!0;const Wb=[];function Bs(){Wb.push(Wn),Wn=!1}function js(){const t=Wb.pop();Wn=t===void 0?!0:t}function e0(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=ut;ut=void 0;try{e()}finally{ut=n}}}let Ua=0;class TI{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class vp{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!ut||!Wn||ut===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==ut)n=this.activeLink=new TI(ut,this),ut.deps?(n.prevDep=ut.depsTail,ut.depsTail.nextDep=n,ut.depsTail=n):ut.deps=ut.depsTail=n,Kb(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=ut.depsTail,n.nextDep=void 0,ut.depsTail.nextDep=n,ut.depsTail=n,ut.deps===n&&(ut.deps=s)}return n}trigger(e){this.version++,Ua++,this.notify(e)}notify(e){gp();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{mp()}}}function Kb(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)Kb(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Xc=new WeakMap,ai=Symbol(""),sf=Symbol(""),Ba=Symbol("");function sn(t,e,n){if(Wn&&ut){let s=Xc.get(t);s||Xc.set(t,s=new Map);let r=s.get(n);r||(s.set(n,r=new vp),r.map=s,r.key=n),r.track()}}function Cs(t,e,n,s,r,i){const o=Xc.get(t);if(!o){Ua++;return}const a=l=>{l&&l.trigger()};if(gp(),e==="clear")o.forEach(a);else{const l=Te(t),c=l&&fp(n);if(l&&n==="length"){const u=Number(s);o.forEach((h,f)=>{(f==="length"||f===Ba||!Gn(f)&&f>=u)&&a(h)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(Ba)),e){case"add":l?c&&a(o.get("length")):(a(o.get(ai)),Ji(t)&&a(o.get(sf)));break;case"delete":l||(a(o.get(ai)),Ji(t)&&a(o.get(sf)));break;case"set":Ji(t)&&a(o.get(ai));break}}mp()}function kI(t,e){const n=Xc.get(t);return n&&n.get(e)}function Ui(t){const e=ze(t);return e===t?e:(sn(e,"iterate",Ba),Ln(t)?e:e.map(qt))}function Hu(t){return sn(t=ze(t),"iterate",Ba),t}const II={__proto__:null,[Symbol.iterator](){return ah(this,Symbol.iterator,qt)},concat(...t){return Ui(this).concat(...t.map(e=>Te(e)?Ui(e):e))},entries(){return ah(this,"entries",t=>(t[1]=qt(t[1]),t))},every(t,e){return bs(this,"every",t,e,void 0,arguments)},filter(t,e){return bs(this,"filter",t,e,n=>n.map(qt),arguments)},find(t,e){return bs(this,"find",t,e,qt,arguments)},findIndex(t,e){return bs(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return bs(this,"findLast",t,e,qt,arguments)},findLastIndex(t,e){return bs(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return bs(this,"forEach",t,e,void 0,arguments)},includes(...t){return lh(this,"includes",t)},indexOf(...t){return lh(this,"indexOf",t)},join(t){return Ui(this).join(t)},lastIndexOf(...t){return lh(this,"lastIndexOf",t)},map(t,e){return bs(this,"map",t,e,void 0,arguments)},pop(){return Xo(this,"pop")},push(...t){return Xo(this,"push",t)},reduce(t,...e){return t0(this,"reduce",t,e)},reduceRight(t,...e){return t0(this,"reduceRight",t,e)},shift(){return Xo(this,"shift")},some(t,e){return bs(this,"some",t,e,void 0,arguments)},splice(...t){return Xo(this,"splice",t)},toReversed(){return Ui(this).toReversed()},toSorted(t){return Ui(this).toSorted(t)},toSpliced(...t){return Ui(this).toSpliced(...t)},unshift(...t){return Xo(this,"unshift",t)},values(){return ah(this,"values",qt)}};function ah(t,e,n){const s=Hu(t),r=s[e]();return s!==t&&!Ln(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.value&&(i.value=n(i.value)),i}),r}const SI=Array.prototype;function bs(t,e,n,s,r,i){const o=Hu(t),a=o!==t&&!Ln(t),l=o[e];if(l!==SI[e]){const h=l.apply(t,i);return a?qt(h):h}let c=n;o!==t&&(a?c=function(h,f){return n.call(this,qt(h),f,t)}:n.length>2&&(c=function(h,f){return n.call(this,h,f,t)}));const u=l.call(o,c,s);return a&&r?r(u):u}function t0(t,e,n,s){const r=Hu(t);let i=n;return r!==t&&(Ln(t)?n.length>3&&(i=function(o,a,l){return n.call(this,o,a,l,t)}):i=function(o,a,l){return n.call(this,o,qt(a),l,t)}),r[e](i,...s)}function lh(t,e,n){const s=ze(t);sn(s,"iterate",Ba);const r=s[e](...n);return(r===-1||r===!1)&&_l(n[0])?(n[0]=ze(n[0]),s[e](...n)):r}function Xo(t,e,n=[]){Bs(),gp();const s=ze(t)[e].apply(t,n);return mp(),js(),s}const AI=up("__proto__,__v_isRef,__isVue"),Gb=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Gn));function CI(t){Gn(t)||(t=String(t));const e=ze(this);return sn(e,"has",t),e.hasOwnProperty(t)}class Yb{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?FI:Zb:i?Jb:Xb).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=Te(e);if(!r){let l;if(o&&(l=II[n]))return l;if(n==="hasOwnProperty")return CI}const a=Reflect.get(e,n,dt(e)?e:s);return(Gn(n)?Gb.has(n):AI(n))||(r||sn(e,"get",n),i)?a:dt(a)?o&&fp(n)?a:a.value:ct(a)?r?tx(a):Eo(a):a}}class Qb extends Yb{constructor(e=!1){super(!1,e)}set(e,n,s,r){let i=e[n];if(!this._isShallow){const l=kr(i);if(!Ln(s)&&!kr(s)&&(i=ze(i),s=ze(s)),!Te(e)&&dt(i)&&!dt(s))return l?!1:(i.value=s,!0)}const o=Te(e)&&fp(n)?Number(n)<e.length:nt(e,n),a=Reflect.set(e,n,s,dt(e)?e:r);return e===ze(r)&&(o?_r(s,i)&&Cs(e,"set",n,s):Cs(e,"add",n,s)),a}deleteProperty(e,n){const s=nt(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&s&&Cs(e,"delete",n,void 0),r}has(e,n){const s=Reflect.has(e,n);return(!Gn(n)||!Gb.has(n))&&sn(e,"has",n),s}ownKeys(e){return sn(e,"iterate",Te(e)?"length":ai),Reflect.ownKeys(e)}}class PI extends Yb{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const RI=new Qb,OI=new PI,DI=new Qb(!0);const rf=t=>t,Jl=t=>Reflect.getPrototypeOf(t);function MI(t,e,n){return function(...s){const r=this.__v_raw,i=ze(r),o=Ji(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=r[t](...s),u=n?rf:e?Jc:qt;return!e&&sn(i,"iterate",l?sf:ai),{next(){const{value:h,done:f}=c.next();return f?{value:h,done:f}:{value:a?[u(h[0]),u(h[1])]:u(h),done:f}},[Symbol.iterator](){return this}}}}function Zl(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function NI(t,e){const n={get(r){const i=this.__v_raw,o=ze(i),a=ze(r);t||(_r(r,a)&&sn(o,"get",r),sn(o,"get",a));const{has:l}=Jl(o),c=e?rf:t?Jc:qt;if(l.call(o,r))return c(i.get(r));if(l.call(o,a))return c(i.get(a));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!t&&sn(ze(r),"iterate",ai),Reflect.get(r,"size",r)},has(r){const i=this.__v_raw,o=ze(i),a=ze(r);return t||(_r(r,a)&&sn(o,"has",r),sn(o,"has",a)),r===a?i.has(r):i.has(r)||i.has(a)},forEach(r,i){const o=this,a=o.__v_raw,l=ze(a),c=e?rf:t?Jc:qt;return!t&&sn(l,"iterate",ai),a.forEach((u,h)=>r.call(i,c(u),c(h),o))}};return Ft(n,t?{add:Zl("add"),set:Zl("set"),delete:Zl("delete"),clear:Zl("clear")}:{add(r){!e&&!Ln(r)&&!kr(r)&&(r=ze(r));const i=ze(this);return Jl(i).has.call(i,r)||(i.add(r),Cs(i,"add",r,r)),this},set(r,i){!e&&!Ln(i)&&!kr(i)&&(i=ze(i));const o=ze(this),{has:a,get:l}=Jl(o);let c=a.call(o,r);c||(r=ze(r),c=a.call(o,r));const u=l.call(o,r);return o.set(r,i),c?_r(i,u)&&Cs(o,"set",r,i):Cs(o,"add",r,i),this},delete(r){const i=ze(this),{has:o,get:a}=Jl(i);let l=o.call(i,r);l||(r=ze(r),l=o.call(i,r)),a&&a.call(i,r);const c=i.delete(r);return l&&Cs(i,"delete",r,void 0),c},clear(){const r=ze(this),i=r.size!==0,o=r.clear();return i&&Cs(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=MI(r,t,e)}),n}function _p(t,e){const n=NI(t,e);return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(nt(n,r)&&r in s?n:s,r,i)}const LI={get:_p(!1,!1)},VI={get:_p(!1,!0)},$I={get:_p(!0,!1)};const Xb=new WeakMap,Jb=new WeakMap,Zb=new WeakMap,FI=new WeakMap;function UI(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function BI(t){return t.__v_skip||!Object.isExtensible(t)?0:UI(dI(t))}function Eo(t){return kr(t)?t:bp(t,!1,RI,LI,Xb)}function ex(t){return bp(t,!1,DI,VI,Jb)}function tx(t){return bp(t,!0,OI,$I,Zb)}function bp(t,e,n,s,r){if(!ct(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=BI(t);if(i===0)return t;const o=r.get(t);if(o)return o;const a=new Proxy(t,i===2?s:n);return r.set(t,a),a}function br(t){return kr(t)?br(t.__v_raw):!!(t&&t.__v_isReactive)}function kr(t){return!!(t&&t.__v_isReadonly)}function Ln(t){return!!(t&&t.__v_isShallow)}function _l(t){return t?!!t.__v_raw:!1}function ze(t){const e=t&&t.__v_raw;return e?ze(e):t}function xp(t){return!nt(t,"__v_skip")&&Object.isExtensible(t)&&Db(t,"__v_skip",!0),t}const qt=t=>ct(t)?Eo(t):t,Jc=t=>ct(t)?tx(t):t;function dt(t){return t?t.__v_isRef===!0:!1}function j(t){return nx(t,!1)}function wp(t){return nx(t,!0)}function nx(t,e){return dt(t)?t:new jI(t,e)}class jI{constructor(e,n){this.dep=new vp,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:ze(e),this._value=n?e:qt(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||Ln(e)||kr(e);e=s?e:ze(e),_r(e,n)&&(this._rawValue=e,this._value=s?e:qt(e),this.dep.trigger())}}function te(t){return dt(t)?t.value:t}const zI={get:(t,e,n)=>e==="__v_raw"?t:te(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return dt(r)&&!dt(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function sx(t){return br(t)?t:new Proxy(t,zI)}function HI(t){const e=Te(t)?new Array(t.length):{};for(const n in t)e[n]=WI(t,n);return e}class qI{constructor(e,n,s){this._object=e,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return kI(ze(this._object),this._key)}}function WI(t,e,n){const s=t[e];return dt(s)?s:new qI(t,e,n)}class KI{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new vp(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ua-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&ut!==this)return jb(this,!0),!0}get value(){const e=this.dep.track();return qb(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function GI(t,e,n=!1){let s,r;return Le(t)?s=t:(s=t.get,r=t.set),new KI(s,r,n)}const ec={},Zc=new WeakMap;let Xr;function YI(t,e=!1,n=Xr){if(n){let s=Zc.get(n);s||Zc.set(n,s=[]),s.push(t)}}function QI(t,e,n=lt){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:a,call:l}=n,c=L=>r?L:Ln(L)||r===!1||r===0?Ps(L,1):Ps(L);let u,h,f,g,v=!1,y=!1;if(dt(t)?(h=()=>t.value,v=Ln(t)):br(t)?(h=()=>c(t),v=!0):Te(t)?(y=!0,v=t.some(L=>br(L)||Ln(L)),h=()=>t.map(L=>{if(dt(L))return L.value;if(br(L))return c(L);if(Le(L))return l?l(L,2):L()})):Le(t)?e?h=l?()=>l(t,2):t:h=()=>{if(f){Bs();try{f()}finally{js()}}const L=Xr;Xr=u;try{return l?l(t,3,[g]):t(g)}finally{Xr=L}}:h=cs,e&&r){const L=h,M=r===!0?1/0:r;h=()=>Ps(L(),M)}const _=Fb(),w=()=>{u.stop(),_&&_.active&&hp(_.effects,u)};if(i&&e){const L=e;e=(...M)=>{L(...M),w()}}let I=y?new Array(t.length).fill(ec):ec;const O=L=>{if(!(!(u.flags&1)||!u.dirty&&!L))if(e){const M=u.run();if(r||v||(y?M.some(($,T)=>_r($,I[T])):_r(M,I))){f&&f();const $=Xr;Xr=u;try{const T=[M,I===ec?void 0:y&&I[0]===ec?[]:I,g];I=M,l?l(e,3,T):e(...T)}finally{Xr=$}}}else u.run()};return a&&a(O),u=new Ub(h),u.scheduler=o?()=>o(O,!1):O,g=L=>YI(L,!1,u),f=u.onStop=()=>{const L=Zc.get(u);if(L){if(l)l(L,4);else for(const M of L)M();Zc.delete(u)}},e?s?O(!0):I=u.run():o?o(O.bind(null,!0),!0):u.run(),w.pause=u.pause.bind(u),w.resume=u.resume.bind(u),w.stop=w,w}function Ps(t,e=1/0,n){if(e<=0||!ct(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,dt(t))Ps(t.value,e,n);else if(Te(t))for(let s=0;s<t.length;s++)Ps(t[s],e,n);else if(xo(t)||Ji(t))t.forEach(s=>{Ps(s,e,n)});else if(Ob(t)){for(const s in t)Ps(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&Ps(t[s],e,n)}return t}/**
* @vue/runtime-core v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function bl(t,e,n,s){try{return s?t(...s):t()}catch(r){qu(r,e,n)}}function Yn(t,e,n,s){if(Le(t)){const r=bl(t,e,n,s);return r&&Pb(r)&&r.catch(i=>{qu(i,e,n)}),r}if(Te(t)){const r=[];for(let i=0;i<t.length;i++)r.push(Yn(t[i],e,n,s));return r}}function qu(t,e,n,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||lt;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const u=a.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](t,l,c)===!1)return}a=a.parent}if(i){Bs(),bl(i,null,10,[t,l,c]),js();return}}XI(t,n,r,s,o)}function XI(t,e,n,s=!0,r=!1){if(r)throw t;console.error(t)}const pn=[];let is=-1;const Zi=[];let ar=null,qi=0;const rx=Promise.resolve();let eu=null;function Cn(t){const e=eu||rx;return t?e.then(this?t.bind(this):t):e}function JI(t){let e=is+1,n=pn.length;for(;e<n;){const s=e+n>>>1,r=pn[s],i=ja(r);i<t||i===t&&r.flags&2?e=s+1:n=s}return e}function Ep(t){if(!(t.flags&1)){const e=ja(t),n=pn[pn.length-1];!n||!(t.flags&2)&&e>=ja(n)?pn.push(t):pn.splice(JI(e),0,t),t.flags|=1,ix()}}function ix(){eu||(eu=rx.then(ax))}function ZI(t){Te(t)?Zi.push(...t):ar&&t.id===-1?ar.splice(qi+1,0,t):t.flags&1||(Zi.push(t),t.flags|=1),ix()}function n0(t,e,n=is+1){for(;n<pn.length;n++){const s=pn[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;pn.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function ox(t){if(Zi.length){const e=[...new Set(Zi)].sort((n,s)=>ja(n)-ja(s));if(Zi.length=0,ar){ar.push(...e);return}for(ar=e,qi=0;qi<ar.length;qi++){const n=ar[qi];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}ar=null,qi=0}}const ja=t=>t.id==null?t.flags&2?-1:1/0:t.id;function ax(t){try{for(is=0;is<pn.length;is++){const e=pn[is];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),bl(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;is<pn.length;is++){const e=pn[is];e&&(e.flags&=-2)}is=-1,pn.length=0,ox(),eu=null,(pn.length||Zi.length)&&ax()}}let Ot=null,lx=null;function tu(t){const e=Ot;return Ot=t,lx=t&&t.type.__scopeId||null,e}function pe(t,e=Ot,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&f0(-1);const i=tu(e);let o;try{o=t(...r)}finally{tu(i),s._d&&f0(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Ie(t,e){if(Ot===null)return t;const n=Qu(Ot),s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,a,l=lt]=e[r];i&&(Le(i)&&(i={mounted:i,updated:i}),i.deep&&Ps(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Hr(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let l=a.dir[s];l&&(Bs(),Yn(l,n,8,[t.el,a,t,e]),js())}}const eS=Symbol("_vte"),cx=t=>t.__isTeleport,lr=Symbol("_leaveCb"),tc=Symbol("_enterCb");function tS(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return mt(()=>{t.isMounted=!0}),yx(()=>{t.isUnmounting=!0}),t}const On=[Function,Array],ux={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:On,onEnter:On,onAfterEnter:On,onEnterCancelled:On,onBeforeLeave:On,onLeave:On,onAfterLeave:On,onLeaveCancelled:On,onBeforeAppear:On,onAppear:On,onAfterAppear:On,onAppearCancelled:On},dx=t=>{const e=t.subTree;return e.component?dx(e.component):e},nS={name:"BaseTransition",props:ux,setup(t,{slots:e}){const n=Ux(),s=tS();return()=>{const r=e.default&&px(e.default(),!0);if(!r||!r.length)return;const i=hx(r),o=ze(t),{mode:a}=o;if(s.isLeaving)return ch(i);const l=s0(i);if(!l)return ch(i);let c=of(l,o,s,n,h=>c=h);l.type!==on&&za(l,c);let u=n.subTree&&s0(n.subTree);if(u&&u.type!==on&&!ti(l,u)&&dx(n).type!==on){let h=of(u,o,s,n);if(za(u,h),a==="out-in"&&l.type!==on)return s.isLeaving=!0,h.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete h.afterLeave,u=void 0},ch(i);a==="in-out"&&l.type!==on?h.delayLeave=(f,g,v)=>{const y=fx(s,u);y[String(u.key)]=u,f[lr]=()=>{g(),f[lr]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{v(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return i}}};function hx(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==on){e=n;break}}return e}const sS=nS;function fx(t,e){const{leavingVNodes:n}=t;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function of(t,e,n,s,r){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:h,onBeforeLeave:f,onLeave:g,onAfterLeave:v,onLeaveCancelled:y,onBeforeAppear:_,onAppear:w,onAfterAppear:I,onAppearCancelled:O}=e,L=String(t.key),M=fx(n,t),$=(E,A)=>{E&&Yn(E,s,9,A)},T=(E,A)=>{const k=A[1];$(E,A),Te(E)?E.every(S=>S.length<=1)&&k():E.length<=1&&k()},b={mode:o,persisted:a,beforeEnter(E){let A=l;if(!n.isMounted)if(i)A=_||l;else return;E[lr]&&E[lr](!0);const k=M[L];k&&ti(t,k)&&k.el[lr]&&k.el[lr](),$(A,[E])},enter(E){let A=c,k=u,S=h;if(!n.isMounted)if(i)A=w||c,k=I||u,S=O||h;else return;let R=!1;const me=E[tc]=Ee=>{R||(R=!0,Ee?$(S,[E]):$(k,[E]),b.delayedLeave&&b.delayedLeave(),E[tc]=void 0)};A?T(A,[E,me]):me()},leave(E,A){const k=String(t.key);if(E[tc]&&E[tc](!0),n.isUnmounting)return A();$(f,[E]);let S=!1;const R=E[lr]=me=>{S||(S=!0,A(),me?$(y,[E]):$(v,[E]),E[lr]=void 0,M[k]===t&&delete M[k])};M[k]=t,g?T(g,[E,R]):R()},clone(E){const A=of(E,e,n,s,r);return r&&r(A),A}};return b}function ch(t){if(Wu(t))return t=zs(t),t.children=null,t}function s0(t){if(!Wu(t))return cx(t.type)&&t.children?hx(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Le(n.default))return n.default()}}function za(t,e){t.shapeFlag&6&&t.component?(t.transition=e,za(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function px(t,e=!1,n){let s=[],r=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===ve?(o.patchFlag&128&&r++,s=s.concat(px(o.children,e,a))):(e||o.type!==on)&&s.push(a!=null?zs(o,{key:a}):o)}if(r>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function Nr(t,e){return Le(t)?Ft({name:t.name},e,{setup:t}):t}function rS(){const t=Ux();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function gx(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function nu(t,e,n,s,r=!1){if(Te(t)){t.forEach((v,y)=>nu(v,e&&(Te(e)?e[y]:e),n,s,r));return}if(eo(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&nu(t,e,n,s.component.subTree);return}const i=s.shapeFlag&4?Qu(s.component):s.el,o=r?null:i,{i:a,r:l}=t,c=e&&e.r,u=a.refs===lt?a.refs={}:a.refs,h=a.setupState,f=ze(h),g=h===lt?()=>!1:v=>nt(f,v);if(c!=null&&c!==l&&(bt(c)?(u[c]=null,g(c)&&(h[c]=null)):dt(c)&&(c.value=null)),Le(l))bl(l,a,12,[o,u]);else{const v=bt(l),y=dt(l);if(v||y){const _=()=>{if(t.f){const w=v?g(l)?h[l]:u[l]:l.value;r?Te(w)&&hp(w,i):Te(w)?w.includes(i)||w.push(i):v?(u[l]=[i],g(l)&&(h[l]=u[l])):(l.value=[i],t.k&&(u[t.k]=l.value))}else v?(u[l]=o,g(l)&&(h[l]=o)):y&&(l.value=o,t.k&&(u[t.k]=o))};o?(_.id=-1,wn(_,n)):_()}}}zu().requestIdleCallback;zu().cancelIdleCallback;const eo=t=>!!t.type.__asyncLoader,Wu=t=>t.type.__isKeepAlive;function iS(t,e){mx(t,"a",e)}function oS(t,e){mx(t,"da",e)}function mx(t,e,n=Vt){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(Ku(e,s,n),n){let r=n.parent;for(;r&&r.parent;)Wu(r.parent.vnode)&&aS(s,e,n,r),r=r.parent}}function aS(t,e,n,s){const r=Ku(e,t,s,!0);Si(()=>{hp(s[e],r)},n)}function Ku(t,e,n=Vt,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Bs();const a=wl(n),l=Yn(e,n,t,o);return a(),js(),l});return s?r.unshift(i):r.push(i),i}}const Ys=t=>(e,n=Vt)=>{(!Wa||t==="sp")&&Ku(t,(...s)=>e(...s),n)},lS=Ys("bm"),mt=Ys("m"),cS=Ys("bu"),uS=Ys("u"),yx=Ys("bum"),Si=Ys("um"),dS=Ys("sp"),hS=Ys("rtg"),fS=Ys("rtc");function pS(t,e=Vt){Ku("ec",t,e)}const vx="components";function To(t,e){return bx(vx,t,!0,e)||t}const _x=Symbol.for("v-ndc");function gS(t){return bt(t)?bx(vx,t,!1)||t:t||_x}function bx(t,e,n=!0,s=!1){const r=Ot||Vt;if(r){const i=r.type;{const a=nA(i,!1);if(a&&(a===e||a===Fn(e)||a===ju(Fn(e))))return i}const o=r0(r[t]||i[t],e)||r0(r.appContext[t],e);return!o&&s?i:o}}function r0(t,e){return t&&(t[e]||t[Fn(e)]||t[ju(Fn(e))])}function Me(t,e,n,s){let r;const i=n,o=Te(t);if(o||bt(t)){const a=o&&br(t);let l=!1,c=!1;a&&(l=!Ln(t),c=kr(t),t=Hu(t)),r=new Array(t.length);for(let u=0,h=t.length;u<h;u++)r[u]=e(l?c?Jc(qt(t[u])):qt(t[u]):t[u],u,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let a=0;a<t;a++)r[a]=e(a+1,a,void 0,i)}else if(ct(t))if(t[Symbol.iterator])r=Array.from(t,(a,l)=>e(a,l,void 0,i));else{const a=Object.keys(t);r=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];r[l]=e(t[u],u,l,i)}}else r=[];return r}function Tp(t,e,n={},s,r){if(Ot.ce||Ot.parent&&eo(Ot.parent)&&Ot.parent.ce)return P(),Ye(ve,null,[re("slot",n,s)],64);let i=t[e];i&&i._c&&(i._d=!1),P();const o=i&&xx(i(n)),a=n.key||o&&o.key,l=Ye(ve,{key:(a&&!Gn(a)?a:`_${e}`)+""},o||[],o&&t._===1?64:-2);return!r&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),i&&i._c&&(i._d=!0),l}function xx(t){return t.some(e=>qa(e)?!(e.type===on||e.type===ve&&!xx(e.children)):!0)?t:null}const af=t=>t?Bx(t)?Qu(t):af(t.parent):null,Ea=Ft(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>af(t.parent),$root:t=>af(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Ex(t),$forceUpdate:t=>t.f||(t.f=()=>{Ep(t.update)}),$nextTick:t=>t.n||(t.n=Cn.bind(t.proxy)),$watch:t=>VS.bind(t)}),uh=(t,e)=>t!==lt&&!t.__isScriptSetup&&nt(t,e),mS={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const g=o[e];if(g!==void 0)switch(g){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(uh(s,e))return o[e]=1,s[e];if(r!==lt&&nt(r,e))return o[e]=2,r[e];if((c=t.propsOptions[0])&&nt(c,e))return o[e]=3,i[e];if(n!==lt&&nt(n,e))return o[e]=4,n[e];lf&&(o[e]=0)}}const u=Ea[e];let h,f;if(u)return e==="$attrs"&&sn(t.attrs,"get",""),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==lt&&nt(n,e))return o[e]=4,n[e];if(f=l.config.globalProperties,nt(f,e))return f[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return uh(r,e)?(r[e]=n,!0):s!==lt&&nt(s,e)?(s[e]=n,!0):nt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,propsOptions:i}},o){let a;return!!n[o]||t!==lt&&nt(t,o)||uh(e,o)||(a=i[0])&&nt(a,o)||nt(s,o)||nt(Ea,o)||nt(r.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:nt(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function i0(t){return Te(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let lf=!0;function yS(t){const e=Ex(t),n=t.proxy,s=t.ctx;lf=!1,e.beforeCreate&&o0(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:f,beforeUpdate:g,updated:v,activated:y,deactivated:_,beforeDestroy:w,beforeUnmount:I,destroyed:O,unmounted:L,render:M,renderTracked:$,renderTriggered:T,errorCaptured:b,serverPrefetch:E,expose:A,inheritAttrs:k,components:S,directives:R,filters:me}=e;if(c&&vS(c,s,null),o)for(const he in o){const Pe=o[he];Le(Pe)&&(s[he]=Pe.bind(n))}if(r){const he=r.call(n,n);ct(he)&&(t.data=Eo(he))}if(lf=!0,i)for(const he in i){const Pe=i[he],Qe=Le(Pe)?Pe.bind(n,n):Le(Pe.get)?Pe.get.bind(n,n):cs,xt=!Le(Pe)&&Le(Pe.set)?Pe.set.bind(n):cs,At=ye({get:Qe,set:xt});Object.defineProperty(s,he,{enumerable:!0,configurable:!0,get:()=>At.value,set:Ze=>At.value=Ze})}if(a)for(const he in a)wx(a[he],s,n,he);if(l){const he=Le(l)?l.call(n):l;Reflect.ownKeys(he).forEach(Pe=>{Vs(Pe,he[Pe])})}u&&o0(u,t,"c");function we(he,Pe){Te(Pe)?Pe.forEach(Qe=>he(Qe.bind(n))):Pe&&he(Pe.bind(n))}if(we(lS,h),we(mt,f),we(cS,g),we(uS,v),we(iS,y),we(oS,_),we(pS,b),we(fS,$),we(hS,T),we(yx,I),we(Si,L),we(dS,E),Te(A))if(A.length){const he=t.exposed||(t.exposed={});A.forEach(Pe=>{Object.defineProperty(he,Pe,{get:()=>n[Pe],set:Qe=>n[Pe]=Qe})})}else t.exposed||(t.exposed={});M&&t.render===cs&&(t.render=M),k!=null&&(t.inheritAttrs=k),S&&(t.components=S),R&&(t.directives=R),E&&gx(t)}function vS(t,e,n=cs){Te(t)&&(t=cf(t));for(const s in t){const r=t[s];let i;ct(r)?"default"in r?i=$t(r.from||s,r.default,!0):i=$t(r.from||s):i=$t(r),dt(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function o0(t,e,n){Yn(Te(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function wx(t,e,n,s){let r=s.includes(".")?Nx(n,s):()=>n[s];if(bt(t)){const i=e[t];Le(i)&&kt(r,i)}else if(Le(t))kt(r,t.bind(n));else if(ct(t))if(Te(t))t.forEach(i=>wx(i,e,n,s));else{const i=Le(t.handler)?t.handler.bind(n):e[t.handler];Le(i)&&kt(r,i,t)}}function Ex(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!r.length&&!n&&!s?l=e:(l={},r.length&&r.forEach(c=>su(l,c,o,!0)),su(l,e,o)),ct(e)&&i.set(e,l),l}function su(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&su(t,i,n,!0),r&&r.forEach(o=>su(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const a=_S[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const _S={data:a0,props:l0,emits:l0,methods:aa,computed:aa,beforeCreate:fn,created:fn,beforeMount:fn,mounted:fn,beforeUpdate:fn,updated:fn,beforeDestroy:fn,beforeUnmount:fn,destroyed:fn,unmounted:fn,activated:fn,deactivated:fn,errorCaptured:fn,serverPrefetch:fn,components:aa,directives:aa,watch:xS,provide:a0,inject:bS};function a0(t,e){return e?t?function(){return Ft(Le(t)?t.call(this,this):t,Le(e)?e.call(this,this):e)}:e:t}function bS(t,e){return aa(cf(t),cf(e))}function cf(t){if(Te(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function fn(t,e){return t?[...new Set([].concat(t,e))]:e}function aa(t,e){return t?Ft(Object.create(null),t,e):e}function l0(t,e){return t?Te(t)&&Te(e)?[...new Set([...t,...e])]:Ft(Object.create(null),i0(t),i0(e??{})):e}function xS(t,e){if(!t)return e;if(!e)return t;const n=Ft(Object.create(null),t);for(const s in e)n[s]=fn(t[s],e[s]);return n}function Tx(){return{app:null,config:{isNativeTag:cI,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let wS=0;function ES(t,e){return function(s,r=null){Le(s)||(s=Ft({},s)),r!=null&&!ct(r)&&(r=null);const i=Tx(),o=new WeakSet,a=[];let l=!1;const c=i.app={_uid:wS++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:zx,get config(){return i.config},set config(u){},use(u,...h){return o.has(u)||(u&&Le(u.install)?(o.add(u),u.install(c,...h)):Le(u)&&(o.add(u),u(c,...h))),c},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),c},component(u,h){return h?(i.components[u]=h,c):i.components[u]},directive(u,h){return h?(i.directives[u]=h,c):i.directives[u]},mount(u,h,f){if(!l){const g=c._ceVNode||re(s,r);return g.appContext=i,f===!0?f="svg":f===!1&&(f=void 0),t(g,u,f),l=!0,c._container=u,u.__vue_app__=c,Qu(g.component)}},onUnmount(u){a.push(u)},unmount(){l&&(Yn(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(u,h){return i.provides[u]=h,c},runWithContext(u){const h=li;li=c;try{return u()}finally{li=h}}};return c}}let li=null;function Vs(t,e){if(Vt){let n=Vt.provides;const s=Vt.parent&&Vt.parent.provides;s===n&&(n=Vt.provides=Object.create(s)),n[t]=e}}function $t(t,e,n=!1){const s=Vt||Ot;if(s||li){let r=li?li._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return n&&Le(e)?e.call(s&&s.proxy):e}}function TS(){return!!(Vt||Ot||li)}const kx={},Ix=()=>Object.create(kx),Sx=t=>Object.getPrototypeOf(t)===kx;function kS(t,e,n,s=!1){const r={},i=Ix();t.propsDefaults=Object.create(null),Ax(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:ex(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function IS(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,a=ze(r),[l]=t.propsOptions;let c=!1;if((s||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let h=0;h<u.length;h++){let f=u[h];if(Gu(t.emitsOptions,f))continue;const g=e[f];if(l)if(nt(i,f))g!==i[f]&&(i[f]=g,c=!0);else{const v=Fn(f);r[v]=uf(l,a,v,g,t,!1)}else g!==i[f]&&(i[f]=g,c=!0)}}}else{Ax(t,e,r,i)&&(c=!0);let u;for(const h in a)(!e||!nt(e,h)&&((u=Mr(h))===h||!nt(e,u)))&&(l?n&&(n[h]!==void 0||n[u]!==void 0)&&(r[h]=uf(l,a,h,void 0,t,!0)):delete r[h]);if(i!==a)for(const h in i)(!e||!nt(e,h))&&(delete i[h],c=!0)}c&&Cs(t.attrs,"set","")}function Ax(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(ba(l))continue;const c=e[l];let u;r&&nt(r,u=Fn(l))?!i||!i.includes(u)?n[u]=c:(a||(a={}))[u]=c:Gu(t.emitsOptions,l)||(!(l in s)||c!==s[l])&&(s[l]=c,o=!0)}if(i){const l=ze(n),c=a||lt;for(let u=0;u<i.length;u++){const h=i[u];n[h]=uf(r,l,h,c[h],t,!nt(c,h))}}return o}function uf(t,e,n,s,r,i){const o=t[n];if(o!=null){const a=nt(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Le(l)){const{propsDefaults:c}=r;if(n in c)s=c[n];else{const u=wl(r);s=c[n]=l.call(null,e),u()}}else s=l;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===Mr(n))&&(s=!0))}return s}const SS=new WeakMap;function Cx(t,e,n=!1){const s=n?SS:e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},a=[];let l=!1;if(!Le(t)){const u=h=>{l=!0;const[f,g]=Cx(h,e,!0);Ft(o,f),g&&a.push(...g)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!l)return ct(t)&&s.set(t,Xi),Xi;if(Te(i))for(let u=0;u<i.length;u++){const h=Fn(i[u]);c0(h)&&(o[h]=lt)}else if(i)for(const u in i){const h=Fn(u);if(c0(h)){const f=i[u],g=o[h]=Te(f)||Le(f)?{type:f}:Ft({},f),v=g.type;let y=!1,_=!0;if(Te(v))for(let w=0;w<v.length;++w){const I=v[w],O=Le(I)&&I.name;if(O==="Boolean"){y=!0;break}else O==="String"&&(_=!1)}else y=Le(v)&&v.name==="Boolean";g[0]=y,g[1]=_,(y||nt(g,"default"))&&a.push(h)}}const c=[o,a];return ct(t)&&s.set(t,c),c}function c0(t){return t[0]!=="$"&&!ba(t)}const kp=t=>t[0]==="_"||t==="$stable",Ip=t=>Te(t)?t.map(ls):[ls(t)],AS=(t,e,n)=>{if(e._n)return e;const s=pe((...r)=>Ip(e(...r)),n);return s._c=!1,s},Px=(t,e,n)=>{const s=t._ctx;for(const r in t){if(kp(r))continue;const i=t[r];if(Le(i))e[r]=AS(r,i,s);else if(i!=null){const o=Ip(i);e[r]=()=>o}}},Rx=(t,e)=>{const n=Ip(e);t.slots.default=()=>n},Ox=(t,e,n)=>{for(const s in e)(n||!kp(s))&&(t[s]=e[s])},CS=(t,e,n)=>{const s=t.slots=Ix();if(t.vnode.shapeFlag&32){const r=e._;r?(Ox(s,e,n),n&&Db(s,"_",r,!0)):Px(e,s)}else e&&Rx(t,e)},PS=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=lt;if(s.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:Ox(r,e,n):(i=!e.$stable,Px(e,r)),o=e}else e&&(Rx(t,e),o={default:1});if(i)for(const a in r)!kp(a)&&o[a]==null&&delete r[a]},wn=HS;function RS(t){return OS(t)}function OS(t,e){const n=zu();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:f,setScopeId:g=cs,insertStaticContent:v}=t,y=(N,V,F,W=null,Y=null,K=null,de=void 0,oe=null,ie=!!V.dynamicChildren)=>{if(N===V)return;N&&!ti(N,V)&&(W=z(N),Ze(N,Y,K,!0),N=null),V.patchFlag===-2&&(ie=!1,V.dynamicChildren=null);const{type:Z,ref:ke,shapeFlag:ue}=V;switch(Z){case Yu:_(N,V,F,W);break;case on:w(N,V,F,W);break;case Sc:N==null&&I(V,F,W,de);break;case ve:S(N,V,F,W,Y,K,de,oe,ie);break;default:ue&1?M(N,V,F,W,Y,K,de,oe,ie):ue&6?R(N,V,F,W,Y,K,de,oe,ie):(ue&64||ue&128)&&Z.process(N,V,F,W,Y,K,de,oe,ie,fe)}ke!=null&&Y&&nu(ke,N&&N.ref,K,V||N,!V)},_=(N,V,F,W)=>{if(N==null)s(V.el=a(V.children),F,W);else{const Y=V.el=N.el;V.children!==N.children&&c(Y,V.children)}},w=(N,V,F,W)=>{N==null?s(V.el=l(V.children||""),F,W):V.el=N.el},I=(N,V,F,W)=>{[N.el,N.anchor]=v(N.children,V,F,W,N.el,N.anchor)},O=({el:N,anchor:V},F,W)=>{let Y;for(;N&&N!==V;)Y=f(N),s(N,F,W),N=Y;s(V,F,W)},L=({el:N,anchor:V})=>{let F;for(;N&&N!==V;)F=f(N),r(N),N=F;r(V)},M=(N,V,F,W,Y,K,de,oe,ie)=>{V.type==="svg"?de="svg":V.type==="math"&&(de="mathml"),N==null?$(V,F,W,Y,K,de,oe,ie):E(N,V,Y,K,de,oe,ie)},$=(N,V,F,W,Y,K,de,oe)=>{let ie,Z;const{props:ke,shapeFlag:ue,transition:xe,dirs:De}=N;if(ie=N.el=o(N.type,K,ke&&ke.is,ke),ue&8?u(ie,N.children):ue&16&&b(N.children,ie,null,W,Y,dh(N,K),de,oe),De&&Hr(N,null,W,"created"),T(ie,N,N.scopeId,de,W),ke){for(const $e in ke)$e!=="value"&&!ba($e)&&i(ie,$e,null,ke[$e],K,W);"value"in ke&&i(ie,"value",null,ke.value,K),(Z=ke.onVnodeBeforeMount)&&es(Z,W,N)}De&&Hr(N,null,W,"beforeMount");const Ce=DS(Y,xe);Ce&&xe.beforeEnter(ie),s(ie,V,F),((Z=ke&&ke.onVnodeMounted)||Ce||De)&&wn(()=>{Z&&es(Z,W,N),Ce&&xe.enter(ie),De&&Hr(N,null,W,"mounted")},Y)},T=(N,V,F,W,Y)=>{if(F&&g(N,F),W)for(let K=0;K<W.length;K++)g(N,W[K]);if(Y){let K=Y.subTree;if(V===K||Vx(K.type)&&(K.ssContent===V||K.ssFallback===V)){const de=Y.vnode;T(N,de,de.scopeId,de.slotScopeIds,Y.parent)}}},b=(N,V,F,W,Y,K,de,oe,ie=0)=>{for(let Z=ie;Z<N.length;Z++){const ke=N[Z]=oe?cr(N[Z]):ls(N[Z]);y(null,ke,V,F,W,Y,K,de,oe)}},E=(N,V,F,W,Y,K,de)=>{const oe=V.el=N.el;let{patchFlag:ie,dynamicChildren:Z,dirs:ke}=V;ie|=N.patchFlag&16;const ue=N.props||lt,xe=V.props||lt;let De;if(F&&qr(F,!1),(De=xe.onVnodeBeforeUpdate)&&es(De,F,V,N),ke&&Hr(V,N,F,"beforeUpdate"),F&&qr(F,!0),(ue.innerHTML&&xe.innerHTML==null||ue.textContent&&xe.textContent==null)&&u(oe,""),Z?A(N.dynamicChildren,Z,oe,F,W,dh(V,Y),K):de||Pe(N,V,oe,null,F,W,dh(V,Y),K,!1),ie>0){if(ie&16)k(oe,ue,xe,F,Y);else if(ie&2&&ue.class!==xe.class&&i(oe,"class",null,xe.class,Y),ie&4&&i(oe,"style",ue.style,xe.style,Y),ie&8){const Ce=V.dynamicProps;for(let $e=0;$e<Ce.length;$e++){const Ke=Ce[$e],Yt=ue[Ke],Ut=xe[Ke];(Ut!==Yt||Ke==="value")&&i(oe,Ke,Yt,Ut,Y,F)}}ie&1&&N.children!==V.children&&u(oe,V.children)}else!de&&Z==null&&k(oe,ue,xe,F,Y);((De=xe.onVnodeUpdated)||ke)&&wn(()=>{De&&es(De,F,V,N),ke&&Hr(V,N,F,"updated")},W)},A=(N,V,F,W,Y,K,de)=>{for(let oe=0;oe<V.length;oe++){const ie=N[oe],Z=V[oe],ke=ie.el&&(ie.type===ve||!ti(ie,Z)||ie.shapeFlag&198)?h(ie.el):F;y(ie,Z,ke,null,W,Y,K,de,!0)}},k=(N,V,F,W,Y)=>{if(V!==F){if(V!==lt)for(const K in V)!ba(K)&&!(K in F)&&i(N,K,V[K],null,Y,W);for(const K in F){if(ba(K))continue;const de=F[K],oe=V[K];de!==oe&&K!=="value"&&i(N,K,oe,de,Y,W)}"value"in F&&i(N,"value",V.value,F.value,Y)}},S=(N,V,F,W,Y,K,de,oe,ie)=>{const Z=V.el=N?N.el:a(""),ke=V.anchor=N?N.anchor:a("");let{patchFlag:ue,dynamicChildren:xe,slotScopeIds:De}=V;De&&(oe=oe?oe.concat(De):De),N==null?(s(Z,F,W),s(ke,F,W),b(V.children||[],F,ke,Y,K,de,oe,ie)):ue>0&&ue&64&&xe&&N.dynamicChildren?(A(N.dynamicChildren,xe,F,Y,K,de,oe),(V.key!=null||Y&&V===Y.subTree)&&Dx(N,V,!0)):Pe(N,V,F,ke,Y,K,de,oe,ie)},R=(N,V,F,W,Y,K,de,oe,ie)=>{V.slotScopeIds=oe,N==null?V.shapeFlag&512?Y.ctx.activate(V,F,W,de,ie):me(V,F,W,Y,K,de,ie):Ee(N,V,ie)},me=(N,V,F,W,Y,K,de)=>{const oe=N.component=XS(N,W,Y);if(Wu(N)&&(oe.ctx.renderer=fe),JS(oe,!1,de),oe.asyncDep){if(Y&&Y.registerDep(oe,we,de),!N.el){const ie=oe.subTree=re(on);w(null,ie,V,F)}}else we(oe,N,V,F,Y,K,de)},Ee=(N,V,F)=>{const W=V.component=N.component;if(jS(N,V,F))if(W.asyncDep&&!W.asyncResolved){he(W,V,F);return}else W.next=V,W.update();else V.el=N.el,W.vnode=V},we=(N,V,F,W,Y,K,de)=>{const oe=()=>{if(N.isMounted){let{next:ue,bu:xe,u:De,parent:Ce,vnode:$e}=N;{const Qt=Mx(N);if(Qt){ue&&(ue.el=$e.el,he(N,ue,de)),Qt.asyncDep.then(()=>{N.isUnmounted||oe()});return}}let Ke=ue,Yt;qr(N,!1),ue?(ue.el=$e.el,he(N,ue,de)):ue=$e,xe&&Ic(xe),(Yt=ue.props&&ue.props.onVnodeBeforeUpdate)&&es(Yt,Ce,ue,$e),qr(N,!0);const Ut=d0(N),Pn=N.subTree;N.subTree=Ut,y(Pn,Ut,h(Pn.el),z(Pn),N,Y,K),ue.el=Ut.el,Ke===null&&zS(N,Ut.el),De&&wn(De,Y),(Yt=ue.props&&ue.props.onVnodeUpdated)&&wn(()=>es(Yt,Ce,ue,$e),Y)}else{let ue;const{el:xe,props:De}=V,{bm:Ce,m:$e,parent:Ke,root:Yt,type:Ut}=N,Pn=eo(V);qr(N,!1),Ce&&Ic(Ce),!Pn&&(ue=De&&De.onVnodeBeforeMount)&&es(ue,Ke,V),qr(N,!0);{Yt.ce&&Yt.ce._injectChildStyle(Ut);const Qt=N.subTree=d0(N);y(null,Qt,F,W,N,Y,K),V.el=Qt.el}if($e&&wn($e,Y),!Pn&&(ue=De&&De.onVnodeMounted)){const Qt=V;wn(()=>es(ue,Ke,Qt),Y)}(V.shapeFlag&256||Ke&&eo(Ke.vnode)&&Ke.vnode.shapeFlag&256)&&N.a&&wn(N.a,Y),N.isMounted=!0,V=F=W=null}};N.scope.on();const ie=N.effect=new Ub(oe);N.scope.off();const Z=N.update=ie.run.bind(ie),ke=N.job=ie.runIfDirty.bind(ie);ke.i=N,ke.id=N.uid,ie.scheduler=()=>Ep(ke),qr(N,!0),Z()},he=(N,V,F)=>{V.component=N;const W=N.vnode.props;N.vnode=V,N.next=null,IS(N,V.props,W,F),PS(N,V.children,F),Bs(),n0(N),js()},Pe=(N,V,F,W,Y,K,de,oe,ie=!1)=>{const Z=N&&N.children,ke=N?N.shapeFlag:0,ue=V.children,{patchFlag:xe,shapeFlag:De}=V;if(xe>0){if(xe&128){xt(Z,ue,F,W,Y,K,de,oe,ie);return}else if(xe&256){Qe(Z,ue,F,W,Y,K,de,oe,ie);return}}De&8?(ke&16&&Be(Z,Y,K),ue!==Z&&u(F,ue)):ke&16?De&16?xt(Z,ue,F,W,Y,K,de,oe,ie):Be(Z,Y,K,!0):(ke&8&&u(F,""),De&16&&b(ue,F,W,Y,K,de,oe,ie))},Qe=(N,V,F,W,Y,K,de,oe,ie)=>{N=N||Xi,V=V||Xi;const Z=N.length,ke=V.length,ue=Math.min(Z,ke);let xe;for(xe=0;xe<ue;xe++){const De=V[xe]=ie?cr(V[xe]):ls(V[xe]);y(N[xe],De,F,null,Y,K,de,oe,ie)}Z>ke?Be(N,Y,K,!0,!1,ue):b(V,F,W,Y,K,de,oe,ie,ue)},xt=(N,V,F,W,Y,K,de,oe,ie)=>{let Z=0;const ke=V.length;let ue=N.length-1,xe=ke-1;for(;Z<=ue&&Z<=xe;){const De=N[Z],Ce=V[Z]=ie?cr(V[Z]):ls(V[Z]);if(ti(De,Ce))y(De,Ce,F,null,Y,K,de,oe,ie);else break;Z++}for(;Z<=ue&&Z<=xe;){const De=N[ue],Ce=V[xe]=ie?cr(V[xe]):ls(V[xe]);if(ti(De,Ce))y(De,Ce,F,null,Y,K,de,oe,ie);else break;ue--,xe--}if(Z>ue){if(Z<=xe){const De=xe+1,Ce=De<ke?V[De].el:W;for(;Z<=xe;)y(null,V[Z]=ie?cr(V[Z]):ls(V[Z]),F,Ce,Y,K,de,oe,ie),Z++}}else if(Z>xe)for(;Z<=ue;)Ze(N[Z],Y,K,!0),Z++;else{const De=Z,Ce=Z,$e=new Map;for(Z=Ce;Z<=xe;Z++){const Bt=V[Z]=ie?cr(V[Z]):ls(V[Z]);Bt.key!=null&&$e.set(Bt.key,Z)}let Ke,Yt=0;const Ut=xe-Ce+1;let Pn=!1,Qt=0;const Xs=new Array(Ut);for(Z=0;Z<Ut;Z++)Xs[Z]=0;for(Z=De;Z<=ue;Z++){const Bt=N[Z];if(Yt>=Ut){Ze(Bt,Y,K,!0);continue}let Rn;if(Bt.key!=null)Rn=$e.get(Bt.key);else for(Ke=Ce;Ke<=xe;Ke++)if(Xs[Ke-Ce]===0&&ti(Bt,V[Ke])){Rn=Ke;break}Rn===void 0?Ze(Bt,Y,K,!0):(Xs[Rn-Ce]=Z+1,Rn>=Qt?Qt=Rn:Pn=!0,y(Bt,V[Rn],F,null,Y,K,de,oe,ie),Yt++)}const $o=Pn?MS(Xs):Xi;for(Ke=$o.length-1,Z=Ut-1;Z>=0;Z--){const Bt=Ce+Z,Rn=V[Bt],Ll=Bt+1<ke?V[Bt+1].el:W;Xs[Z]===0?y(null,Rn,F,Ll,Y,K,de,oe,ie):Pn&&(Ke<0||Z!==$o[Ke]?At(Rn,F,Ll,2):Ke--)}}},At=(N,V,F,W,Y=null)=>{const{el:K,type:de,transition:oe,children:ie,shapeFlag:Z}=N;if(Z&6){At(N.component.subTree,V,F,W);return}if(Z&128){N.suspense.move(V,F,W);return}if(Z&64){de.move(N,V,F,fe);return}if(de===ve){s(K,V,F);for(let ue=0;ue<ie.length;ue++)At(ie[ue],V,F,W);s(N.anchor,V,F);return}if(de===Sc){O(N,V,F);return}if(W!==2&&Z&1&&oe)if(W===0)oe.beforeEnter(K),s(K,V,F),wn(()=>oe.enter(K),Y);else{const{leave:ue,delayLeave:xe,afterLeave:De}=oe,Ce=()=>{N.ctx.isUnmounted?r(K):s(K,V,F)},$e=()=>{ue(K,()=>{Ce(),De&&De()})};xe?xe(K,Ce,$e):$e()}else s(K,V,F)},Ze=(N,V,F,W=!1,Y=!1)=>{const{type:K,props:de,ref:oe,children:ie,dynamicChildren:Z,shapeFlag:ke,patchFlag:ue,dirs:xe,cacheIndex:De}=N;if(ue===-2&&(Y=!1),oe!=null&&(Bs(),nu(oe,null,F,N,!0),js()),De!=null&&(V.renderCache[De]=void 0),ke&256){V.ctx.deactivate(N);return}const Ce=ke&1&&xe,$e=!eo(N);let Ke;if($e&&(Ke=de&&de.onVnodeBeforeUnmount)&&es(Ke,V,N),ke&6)Ae(N.component,F,W);else{if(ke&128){N.suspense.unmount(F,W);return}Ce&&Hr(N,null,V,"beforeUnmount"),ke&64?N.type.remove(N,V,F,fe,W):Z&&!Z.hasOnce&&(K!==ve||ue>0&&ue&64)?Be(Z,V,F,!1,!0):(K===ve&&ue&384||!Y&&ke&16)&&Be(ie,V,F),W&&ne(N)}($e&&(Ke=de&&de.onVnodeUnmounted)||Ce)&&wn(()=>{Ke&&es(Ke,V,N),Ce&&Hr(N,null,V,"unmounted")},F)},ne=N=>{const{type:V,el:F,anchor:W,transition:Y}=N;if(V===ve){le(F,W);return}if(V===Sc){L(N);return}const K=()=>{r(F),Y&&!Y.persisted&&Y.afterLeave&&Y.afterLeave()};if(N.shapeFlag&1&&Y&&!Y.persisted){const{leave:de,delayLeave:oe}=Y,ie=()=>de(F,K);oe?oe(N.el,K,ie):ie()}else K()},le=(N,V)=>{let F;for(;N!==V;)F=f(N),r(N),N=F;r(V)},Ae=(N,V,F)=>{const{bum:W,scope:Y,job:K,subTree:de,um:oe,m:ie,a:Z,parent:ke,slots:{__:ue}}=N;u0(ie),u0(Z),W&&Ic(W),ke&&Te(ue)&&ue.forEach(xe=>{ke.renderCache[xe]=void 0}),Y.stop(),K&&(K.flags|=8,Ze(de,N,V,F)),oe&&wn(oe,V),wn(()=>{N.isUnmounted=!0},V),V&&V.pendingBranch&&!V.isUnmounted&&N.asyncDep&&!N.asyncResolved&&N.suspenseId===V.pendingId&&(V.deps--,V.deps===0&&V.resolve())},Be=(N,V,F,W=!1,Y=!1,K=0)=>{for(let de=K;de<N.length;de++)Ze(N[de],V,F,W,Y)},z=N=>{if(N.shapeFlag&6)return z(N.component.subTree);if(N.shapeFlag&128)return N.suspense.next();const V=f(N.anchor||N.el),F=V&&V[eS];return F?f(F):V};let X=!1;const se=(N,V,F)=>{N==null?V._vnode&&Ze(V._vnode,null,null,!0):y(V._vnode||null,N,V,null,null,null,F),V._vnode=N,X||(X=!0,n0(),ox(),X=!1)},fe={p:y,um:Ze,m:At,r:ne,mt:me,mc:b,pc:Pe,pbc:A,n:z,o:t};return{render:se,hydrate:void 0,createApp:ES(se)}}function dh({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function qr({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function DS(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Dx(t,e,n=!1){const s=t.children,r=e.children;if(Te(s)&&Te(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=cr(r[i]),a.el=o.el),!n&&a.patchFlag!==-2&&Dx(o,a)),a.type===Yu&&(a.el=o.el),a.type===on&&!a.el&&(a.el=o.el)}}function MS(t){const e=t.slice(),n=[0];let s,r,i,o,a;const l=t.length;for(s=0;s<l;s++){const c=t[s];if(c!==0){if(r=n[n.length-1],t[r]<c){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<c?i=a+1:o=a;c<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function Mx(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Mx(e)}function u0(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const NS=Symbol.for("v-scx"),LS=()=>$t(NS);function xl(t,e){return Sp(t,null,e)}function kt(t,e,n){return Sp(t,e,n)}function Sp(t,e,n=lt){const{immediate:s,deep:r,flush:i,once:o}=n,a=Ft({},n),l=e&&s||!e&&i!=="post";let c;if(Wa){if(i==="sync"){const g=LS();c=g.__watcherHandles||(g.__watcherHandles=[])}else if(!l){const g=()=>{};return g.stop=cs,g.resume=cs,g.pause=cs,g}}const u=Vt;a.call=(g,v,y)=>Yn(g,u,v,y);let h=!1;i==="post"?a.scheduler=g=>{wn(g,u&&u.suspense)}:i!=="sync"&&(h=!0,a.scheduler=(g,v)=>{v?g():Ep(g)}),a.augmentJob=g=>{e&&(g.flags|=4),h&&(g.flags|=2,u&&(g.id=u.uid,g.i=u))};const f=QI(t,e,a);return Wa&&(c?c.push(f):l&&f()),f}function VS(t,e,n){const s=this.proxy,r=bt(t)?t.includes(".")?Nx(s,t):()=>s[t]:t.bind(s,s);let i;Le(e)?i=e:(i=e.handler,n=e);const o=wl(this),a=Sp(r,i.bind(s),n);return o(),a}function Nx(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const $S=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Fn(e)}Modifiers`]||t[`${Mr(e)}Modifiers`];function FS(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||lt;let r=n;const i=e.startsWith("update:"),o=i&&$S(s,e.slice(7));o&&(o.trim&&(r=n.map(u=>bt(u)?u.trim():u)),o.number&&(r=n.map(Qc)));let a,l=s[a=rh(e)]||s[a=rh(Fn(e))];!l&&i&&(l=s[a=rh(Mr(e))]),l&&Yn(l,t,6,r);const c=s[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Yn(c,t,6,r)}}function Lx(t,e,n=!1){const s=e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},a=!1;if(!Le(t)){const l=c=>{const u=Lx(c,e,!0);u&&(a=!0,Ft(o,u))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(ct(t)&&s.set(t,null),null):(Te(i)?i.forEach(l=>o[l]=null):Ft(o,i),ct(t)&&s.set(t,o),o)}function Gu(t,e){return!t||!Uu(e)?!1:(e=e.slice(2).replace(/Once$/,""),nt(t,e[0].toLowerCase()+e.slice(1))||nt(t,Mr(e))||nt(t,e))}function d0(t){const{type:e,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:h,data:f,setupState:g,ctx:v,inheritAttrs:y}=t,_=tu(t);let w,I;try{if(n.shapeFlag&4){const L=r||s,M=L;w=ls(c.call(M,L,u,h,g,f,v)),I=a}else{const L=e;w=ls(L.length>1?L(h,{attrs:a,slots:o,emit:l}):L(h,null)),I=e.props?a:US(a)}}catch(L){Ta.length=0,qu(L,t,1),w=re(on)}let O=w;if(I&&y!==!1){const L=Object.keys(I),{shapeFlag:M}=O;L.length&&M&7&&(i&&L.some(dp)&&(I=BS(I,i)),O=zs(O,I,!1,!0))}return n.dirs&&(O=zs(O,null,!1,!0),O.dirs=O.dirs?O.dirs.concat(n.dirs):n.dirs),n.transition&&za(O,n.transition),w=O,tu(_),w}const US=t=>{let e;for(const n in t)(n==="class"||n==="style"||Uu(n))&&((e||(e={}))[n]=t[n]);return e},BS=(t,e)=>{const n={};for(const s in t)(!dp(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function jS(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:a,patchFlag:l}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?h0(s,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const f=u[h];if(o[f]!==s[f]&&!Gu(c,f))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?h0(s,o,c):!0:!!o;return!1}function h0(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!Gu(n,i))return!0}return!1}function zS({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const Vx=t=>t.__isSuspense;function HS(t,e){e&&e.pendingBranch?Te(t)?e.effects.push(...t):e.effects.push(t):ZI(t)}const ve=Symbol.for("v-fgt"),Yu=Symbol.for("v-txt"),on=Symbol.for("v-cmt"),Sc=Symbol.for("v-stc"),Ta=[];let Sn=null;function P(t=!1){Ta.push(Sn=t?null:[])}function qS(){Ta.pop(),Sn=Ta[Ta.length-1]||null}let Ha=1;function f0(t,e=!1){Ha+=t,t<0&&Sn&&e&&(Sn.hasOnce=!0)}function $x(t){return t.dynamicChildren=Ha>0?Sn||Xi:null,qS(),Ha>0&&Sn&&Sn.push(t),t}function D(t,e,n,s,r,i){return $x(p(t,e,n,s,r,i,!0))}function Ye(t,e,n,s,r){return $x(re(t,e,n,s,r,!0))}function qa(t){return t?t.__v_isVNode===!0:!1}function ti(t,e){return t.type===e.type&&t.key===e.key}const Fx=({key:t})=>t??null,Ac=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?bt(t)||dt(t)||Le(t)?{i:Ot,r:t,k:e,f:!!n}:t:null);function p(t,e=null,n=null,s=0,r=null,i=t===ve?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Fx(e),ref:e&&Ac(e),scopeId:lx,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Ot};return a?(Ap(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=bt(n)?8:16),Ha>0&&!o&&Sn&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Sn.push(l),l}const re=WS;function WS(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===_x)&&(t=on),qa(t)){const a=zs(t,e,!0);return n&&Ap(a,n),Ha>0&&!i&&Sn&&(a.shapeFlag&6?Sn[Sn.indexOf(t)]=a:Sn.push(a)),a.patchFlag=-2,a}if(sA(t)&&(t=t.__vccOpts),e){e=KS(e);let{class:a,style:l}=e;a&&!bt(a)&&(e.class=ce(a)),ct(l)&&(_l(l)&&!Te(l)&&(l=Ft({},l)),e.style=wo(l))}const o=bt(t)?1:Vx(t)?128:cx(t)?64:ct(t)?4:Le(t)?2:0;return p(t,e,n,s,r,o,i,!0)}function KS(t){return t?_l(t)||Sx(t)?Ft({},t):t:null}function zs(t,e,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:a,transition:l}=t,c=e?GS(r||{},e):r,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&Fx(c),ref:e&&e.ref?n&&i?Te(i)?i.concat(Ac(e)):[i,Ac(e)]:Ac(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==ve?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&zs(t.ssContent),ssFallback:t.ssFallback&&zs(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&s&&za(u,l.clone(u)),u}function ee(t=" ",e=0){return re(Yu,null,t,e)}function ru(t,e){const n=re(Sc,null,t);return n.staticCount=e,n}function J(t="",e=!1){return e?(P(),Ye(on,null,t)):re(on,null,t)}function ls(t){return t==null||typeof t=="boolean"?re(on):Te(t)?re(ve,null,t.slice()):qa(t)?cr(t):re(Yu,null,String(t))}function cr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:zs(t)}function Ap(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(Te(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),Ap(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!Sx(e)?e._ctx=Ot:r===3&&Ot&&(Ot.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Le(e)?(e={default:e,_ctx:Ot},n=32):(e=String(e),s&64?(n=16,e=[ee(e)]):n=8);t.children=e,t.shapeFlag|=n}function GS(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=ce([e.class,s.class]));else if(r==="style")e.style=wo([e.style,s.style]);else if(Uu(r)){const i=e[r],o=s[r];o&&i!==o&&!(Te(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function es(t,e,n,s=null){Yn(t,e,7,[n,s])}const YS=Tx();let QS=0;function XS(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||YS,i={uid:QS++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Vb(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Cx(s,r),emitsOptions:Lx(s,r),emit:null,emitted:null,propsDefaults:lt,inheritAttrs:s.inheritAttrs,ctx:lt,data:lt,props:lt,attrs:lt,slots:lt,refs:lt,setupState:lt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=FS.bind(null,i),t.ce&&t.ce(i),i}let Vt=null;const Ux=()=>Vt||Ot;let iu,df;{const t=zu(),e=(n,s)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};iu=e("__VUE_INSTANCE_SETTERS__",n=>Vt=n),df=e("__VUE_SSR_SETTERS__",n=>Wa=n)}const wl=t=>{const e=Vt;return iu(t),t.scope.on(),()=>{t.scope.off(),iu(e)}},p0=()=>{Vt&&Vt.scope.off(),iu(null)};function Bx(t){return t.vnode.shapeFlag&4}let Wa=!1;function JS(t,e=!1,n=!1){e&&df(e);const{props:s,children:r}=t.vnode,i=Bx(t);kS(t,s,i,e),CS(t,r,n||e);const o=i?ZS(t,e):void 0;return e&&df(!1),o}function ZS(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,mS);const{setup:s}=n;if(s){Bs();const r=t.setupContext=s.length>1?tA(t):null,i=wl(t),o=bl(s,t,0,[t.props,r]),a=Pb(o);if(js(),i(),(a||t.sp)&&!eo(t)&&gx(t),a){if(o.then(p0,p0),e)return o.then(l=>{g0(t,l)}).catch(l=>{qu(l,t,0)});t.asyncDep=o}else g0(t,o)}else jx(t)}function g0(t,e,n){Le(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ct(e)&&(t.setupState=sx(e)),jx(t)}function jx(t,e,n){const s=t.type;t.render||(t.render=s.render||cs);{const r=wl(t);Bs();try{yS(t)}finally{js(),r()}}}const eA={get(t,e){return sn(t,"get",""),t[e]}};function tA(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,eA),slots:t.slots,emit:t.emit,expose:e}}function Qu(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(sx(xp(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Ea)return Ea[n](t)},has(e,n){return n in e||n in Ea}})):t.proxy}function nA(t,e=!0){return Le(t)?t.displayName||t.name:t.name||e&&t.__name}function sA(t){return Le(t)&&"__vccOpts"in t}const ye=(t,e)=>GI(t,e,Wa);function gi(t,e,n){const s=arguments.length;return s===2?ct(e)&&!Te(e)?qa(e)?re(t,null,[e]):re(t,e):re(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&qa(n)&&(n=[n]),re(t,e,n))}const zx="3.5.16";/**
* @vue/runtime-dom v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let hf;const m0=typeof window<"u"&&window.trustedTypes;if(m0)try{hf=m0.createPolicy("vue",{createHTML:t=>t})}catch{}const Hx=hf?t=>hf.createHTML(t):t=>t,rA="http://www.w3.org/2000/svg",iA="http://www.w3.org/1998/Math/MathML",Is=typeof document<"u"?document:null,y0=Is&&Is.createElement("template"),oA={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e==="svg"?Is.createElementNS(rA,t):e==="mathml"?Is.createElementNS(iA,t):n?Is.createElement(t,{is:n}):Is.createElement(t);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>Is.createTextNode(t),createComment:t=>Is.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Is.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{y0.innerHTML=Hx(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const a=y0.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},tr="transition",Jo="animation",Ka=Symbol("_vtc"),qx={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},aA=Ft({},ux,qx),lA=t=>(t.displayName="Transition",t.props=aA,t),ko=lA((t,{slots:e})=>gi(sS,cA(t),e)),Wr=(t,e=[])=>{Te(t)?t.forEach(n=>n(...e)):t&&t(...e)},v0=t=>t?Te(t)?t.some(e=>e.length>1):t.length>1:!1;function cA(t){const e={};for(const S in t)S in qx||(e[S]=t[S]);if(t.css===!1)return e;const{name:n="v",type:s,duration:r,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:g=`${n}-leave-to`}=t,v=uA(r),y=v&&v[0],_=v&&v[1],{onBeforeEnter:w,onEnter:I,onEnterCancelled:O,onLeave:L,onLeaveCancelled:M,onBeforeAppear:$=w,onAppear:T=I,onAppearCancelled:b=O}=e,E=(S,R,me,Ee)=>{S._enterCancelled=Ee,Kr(S,R?u:a),Kr(S,R?c:o),me&&me()},A=(S,R)=>{S._isLeaving=!1,Kr(S,h),Kr(S,g),Kr(S,f),R&&R()},k=S=>(R,me)=>{const Ee=S?T:I,we=()=>E(R,S,me);Wr(Ee,[R,we]),_0(()=>{Kr(R,S?l:i),xs(R,S?u:a),v0(Ee)||b0(R,s,y,we)})};return Ft(e,{onBeforeEnter(S){Wr(w,[S]),xs(S,i),xs(S,o)},onBeforeAppear(S){Wr($,[S]),xs(S,l),xs(S,c)},onEnter:k(!1),onAppear:k(!0),onLeave(S,R){S._isLeaving=!0;const me=()=>A(S,R);xs(S,h),S._enterCancelled?(xs(S,f),E0()):(E0(),xs(S,f)),_0(()=>{S._isLeaving&&(Kr(S,h),xs(S,g),v0(L)||b0(S,s,_,me))}),Wr(L,[S,me])},onEnterCancelled(S){E(S,!1,void 0,!0),Wr(O,[S])},onAppearCancelled(S){E(S,!0,void 0,!0),Wr(b,[S])},onLeaveCancelled(S){A(S),Wr(M,[S])}})}function uA(t){if(t==null)return null;if(ct(t))return[hh(t.enter),hh(t.leave)];{const e=hh(t);return[e,e]}}function hh(t){return pI(t)}function xs(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Ka]||(t[Ka]=new Set)).add(e)}function Kr(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.remove(s));const n=t[Ka];n&&(n.delete(e),n.size||(t[Ka]=void 0))}function _0(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let dA=0;function b0(t,e,n,s){const r=t._endId=++dA,i=()=>{r===t._endId&&s()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:a,propCount:l}=hA(t,e);if(!o)return s();const c=o+"end";let u=0;const h=()=>{t.removeEventListener(c,f),i()},f=g=>{g.target===t&&++u>=l&&h()};setTimeout(()=>{u<l&&h()},a+1),t.addEventListener(c,f)}function hA(t,e){const n=window.getComputedStyle(t),s=v=>(n[v]||"").split(", "),r=s(`${tr}Delay`),i=s(`${tr}Duration`),o=x0(r,i),a=s(`${Jo}Delay`),l=s(`${Jo}Duration`),c=x0(a,l);let u=null,h=0,f=0;e===tr?o>0&&(u=tr,h=o,f=i.length):e===Jo?c>0&&(u=Jo,h=c,f=l.length):(h=Math.max(o,c),u=h>0?o>c?tr:Jo:null,f=u?u===tr?i.length:l.length:0);const g=u===tr&&/\b(transform|all)(,|$)/.test(s(`${tr}Property`).toString());return{type:u,timeout:h,propCount:f,hasTransform:g}}function x0(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,s)=>w0(n)+w0(t[s])))}function w0(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function E0(){return document.body.offsetHeight}function fA(t,e,n){const s=t[Ka];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const ou=Symbol("_vod"),Wx=Symbol("_vsh"),pA={beforeMount(t,{value:e},{transition:n}){t[ou]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Zo(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:s}){!e!=!n&&(s?e?(s.beforeEnter(t),Zo(t,!0),s.enter(t)):s.leave(t,()=>{Zo(t,!1)}):Zo(t,e))},beforeUnmount(t,{value:e}){Zo(t,e)}};function Zo(t,e){t.style.display=e?t[ou]:"none",t[Wx]=!e}const gA=Symbol(""),mA=/(^|;)\s*display\s*:/;function yA(t,e,n){const s=t.style,r=bt(n);let i=!1;if(n&&!r){if(e)if(bt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Cc(s,a,"")}else for(const o in e)n[o]==null&&Cc(s,o,"");for(const o in n)o==="display"&&(i=!0),Cc(s,o,n[o])}else if(r){if(e!==n){const o=s[gA];o&&(n+=";"+o),s.cssText=n,i=mA.test(n)}}else e&&t.removeAttribute("style");ou in t&&(t[ou]=i?s.display:"",t[Wx]&&(s.display="none"))}const T0=/\s*!important$/;function Cc(t,e,n){if(Te(n))n.forEach(s=>Cc(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=vA(t,e);T0.test(n)?t.setProperty(Mr(s),n.replace(T0,""),"important"):t[s]=n}}const k0=["Webkit","Moz","ms"],fh={};function vA(t,e){const n=fh[e];if(n)return n;let s=Fn(e);if(s!=="filter"&&s in t)return fh[e]=s;s=ju(s);for(let r=0;r<k0.length;r++){const i=k0[r]+s;if(i in t)return fh[e]=i}return e}const I0="http://www.w3.org/1999/xlink";function S0(t,e,n,s,r,i=bI(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(I0,e.slice(6,e.length)):t.setAttributeNS(I0,e,n):n==null||i&&!Mb(n)?t.removeAttribute(e):t.setAttribute(e,i?"":Gn(n)?String(n):n)}function A0(t,e,n,s,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Hx(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=Mb(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(r||e)}function Rs(t,e,n,s){t.addEventListener(e,n,s)}function _A(t,e,n,s){t.removeEventListener(e,n,s)}const C0=Symbol("_vei");function bA(t,e,n,s,r=null){const i=t[C0]||(t[C0]={}),o=i[e];if(s&&o)o.value=s;else{const[a,l]=xA(e);if(s){const c=i[e]=TA(s,r);Rs(t,a,c,l)}else o&&(_A(t,a,o,l),i[e]=void 0)}}const P0=/(?:Once|Passive|Capture)$/;function xA(t){let e;if(P0.test(t)){e={};let s;for(;s=t.match(P0);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Mr(t.slice(2)),e]}let ph=0;const wA=Promise.resolve(),EA=()=>ph||(wA.then(()=>ph=0),ph=Date.now());function TA(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Yn(kA(s,n.value),e,5,[s])};return n.value=t,n.attached=EA(),n}function kA(t,e){if(Te(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const R0=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,IA=(t,e,n,s,r,i)=>{const o=r==="svg";e==="class"?fA(t,s,o):e==="style"?yA(t,n,s):Uu(e)?dp(e)||bA(t,e,n,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):SA(t,e,s,o))?(A0(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&S0(t,e,s,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!bt(s))?A0(t,Fn(e),s,i,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),S0(t,e,s,o))};function SA(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&R0(e)&&Le(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return R0(e)&&bt(n)?!1:e in t}const Ir=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Te(e)?n=>Ic(e,n):e};function AA(t){t.target.composing=!0}function O0(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Vn=Symbol("_assign"),st={created(t,{modifiers:{lazy:e,trim:n,number:s}},r){t[Vn]=Ir(r);const i=s||r.props&&r.props.type==="number";Rs(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),i&&(a=Qc(a)),t[Vn](a)}),n&&Rs(t,"change",()=>{t.value=t.value.trim()}),e||(Rs(t,"compositionstart",AA),Rs(t,"compositionend",O0),Rs(t,"change",O0))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:s,trim:r,number:i}},o){if(t[Vn]=Ir(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?Qc(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(s&&e===n||r&&t.value.trim()===l)||(t.value=l))}},au={deep:!0,created(t,e,n){t[Vn]=Ir(n),Rs(t,"change",()=>{const s=t._modelValue,r=lo(t),i=t.checked,o=t[Vn];if(Te(s)){const a=pp(s,r),l=a!==-1;if(i&&!l)o(s.concat(r));else if(!i&&l){const c=[...s];c.splice(a,1),o(c)}}else if(xo(s)){const a=new Set(s);i?a.add(r):a.delete(r),o(a)}else o(Kx(t,i))})},mounted:D0,beforeUpdate(t,e,n){t[Vn]=Ir(n),D0(t,e,n)}};function D0(t,{value:e,oldValue:n},s){t._modelValue=e;let r;if(Te(e))r=pp(e,s.props.value)>-1;else if(xo(e))r=e.has(s.props.value);else{if(e===n)return;r=pi(e,Kx(t,!0))}t.checked!==r&&(t.checked=r)}const Os={created(t,{value:e},n){t.checked=pi(e,n.props.value),t[Vn]=Ir(n),Rs(t,"change",()=>{t[Vn](lo(t))})},beforeUpdate(t,{value:e,oldValue:n},s){t[Vn]=Ir(s),e!==n&&(t.checked=pi(e,s.props.value))}},us={deep:!0,created(t,{value:e,modifiers:{number:n}},s){const r=xo(e);Rs(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?Qc(lo(o)):lo(o));t[Vn](t.multiple?r?new Set(i):i:i[0]),t._assigning=!0,Cn(()=>{t._assigning=!1})}),t[Vn]=Ir(s)},mounted(t,{value:e}){M0(t,e)},beforeUpdate(t,e,n){t[Vn]=Ir(n)},updated(t,{value:e}){t._assigning||M0(t,e)}};function M0(t,e){const n=t.multiple,s=Te(e);if(!(n&&!s&&!xo(e))){for(let r=0,i=t.options.length;r<i;r++){const o=t.options[r],a=lo(o);if(n)if(s){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=pp(e,a)>-1}else o.selected=e.has(a);else if(pi(lo(o),e)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function lo(t){return"_value"in t?t._value:t.value}function Kx(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const CA=["ctrl","shift","alt","meta"],PA={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>CA.some(n=>t[`${n}Key`]&&!e.includes(n))},Mn=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=(r,...i)=>{for(let o=0;o<e.length;o++){const a=PA[e[o]];if(a&&a(r,e))return}return t(r,...i)})},RA={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},gh=(t,e)=>{const n=t._withKeys||(t._withKeys={}),s=e.join(".");return n[s]||(n[s]=r=>{if(!("key"in r))return;const i=Mr(r.key);if(e.some(o=>o===i||RA[o]===i))return t(r)})},OA=Ft({patchProp:IA},oA);let N0;function DA(){return N0||(N0=RS(OA))}const MA=(...t)=>{const e=DA().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=LA(s);if(!r)return;const i=e._component;!Le(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,NA(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function NA(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function LA(t){return bt(t)?document.querySelector(t):t}/*!
 * pinia v3.0.2
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Gx;const Xu=t=>Gx=t,Yx=Symbol();function ff(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var ka;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(ka||(ka={}));function VA(){const t=$b(!0),e=t.run(()=>j({}));let n=[],s=[];const r=xp({install(i){Xu(r),r._a=i,i.provide(Yx,r),i.config.globalProperties.$pinia=r,s.forEach(o=>n.push(o)),s=[]},use(i){return this._a?n.push(i):s.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return r}const Qx=()=>{};function L0(t,e,n,s=Qx){t.push(e);const r=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),s())};return!n&&Fb()&&wI(r),r}function Bi(t,...e){t.slice().forEach(n=>{n(...e)})}const $A=t=>t(),V0=Symbol(),mh=Symbol();function pf(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,s)=>t.set(s,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const s=e[n],r=t[n];ff(r)&&ff(s)&&t.hasOwnProperty(n)&&!dt(s)&&!br(s)?t[n]=pf(r,s):t[n]=s}return t}const FA=Symbol();function UA(t){return!ff(t)||!Object.prototype.hasOwnProperty.call(t,FA)}const{assign:ir}=Object;function BA(t){return!!(dt(t)&&t.effect)}function jA(t,e,n,s){const{state:r,actions:i,getters:o}=e,a=n.state.value[t];let l;function c(){a||(n.state.value[t]=r?r():{});const u=HI(n.state.value[t]);return ir(u,i,Object.keys(o||{}).reduce((h,f)=>(h[f]=xp(ye(()=>{Xu(n);const g=n._s.get(t);return o[f].call(g,g)})),h),{}))}return l=Xx(t,c,e,n,s,!0),l}function Xx(t,e,n={},s,r,i){let o;const a=ir({actions:{}},n),l={deep:!0};let c,u,h=[],f=[],g;const v=s.state.value[t];!i&&!v&&(s.state.value[t]={}),j({});let y;function _(b){let E;c=u=!1,typeof b=="function"?(b(s.state.value[t]),E={type:ka.patchFunction,storeId:t,events:g}):(pf(s.state.value[t],b),E={type:ka.patchObject,payload:b,storeId:t,events:g});const A=y=Symbol();Cn().then(()=>{y===A&&(c=!0)}),u=!0,Bi(h,E,s.state.value[t])}const w=i?function(){const{state:E}=n,A=E?E():{};this.$patch(k=>{ir(k,A)})}:Qx;function I(){o.stop(),h=[],f=[],s._s.delete(t)}const O=(b,E="")=>{if(V0 in b)return b[mh]=E,b;const A=function(){Xu(s);const k=Array.from(arguments),S=[],R=[];function me(he){S.push(he)}function Ee(he){R.push(he)}Bi(f,{args:k,name:A[mh],store:M,after:me,onError:Ee});let we;try{we=b.apply(this&&this.$id===t?this:M,k)}catch(he){throw Bi(R,he),he}return we instanceof Promise?we.then(he=>(Bi(S,he),he)).catch(he=>(Bi(R,he),Promise.reject(he))):(Bi(S,we),we)};return A[V0]=!0,A[mh]=E,A},L={_p:s,$id:t,$onAction:L0.bind(null,f),$patch:_,$reset:w,$subscribe(b,E={}){const A=L0(h,b,E.detached,()=>k()),k=o.run(()=>kt(()=>s.state.value[t],S=>{(E.flush==="sync"?u:c)&&b({storeId:t,type:ka.direct,events:g},S)},ir({},l,E)));return A},$dispose:I},M=Eo(L);s._s.set(t,M);const T=(s._a&&s._a.runWithContext||$A)(()=>s._e.run(()=>(o=$b()).run(()=>e({action:O}))));for(const b in T){const E=T[b];if(dt(E)&&!BA(E)||br(E))i||(v&&UA(E)&&(dt(E)?E.value=v[b]:pf(E,v[b])),s.state.value[t][b]=E);else if(typeof E=="function"){const A=O(E,b);T[b]=A,a.actions[b]=E}}return ir(M,T),ir(ze(M),T),Object.defineProperty(M,"$state",{get:()=>s.state.value[t],set:b=>{_(E=>{ir(E,b)})}}),s._p.forEach(b=>{ir(M,o.run(()=>b({store:M,app:s._a,pinia:s,options:a})))}),v&&i&&n.hydrate&&n.hydrate(M.$state,v),c=!0,u=!0,M}/*! #__NO_SIDE_EFFECTS__ */function Ju(t,e,n){let s;const r=typeof e=="function";s=r?n:e;function i(o,a){const l=TS();return o=o||(l?$t(Yx,null):null),o&&Xu(o),o=Gx,o._s.has(t)||(r?Xx(t,e,s,o):jA(t,s,o)),o._s.get(t)}return i.$id=t,i}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Wi=typeof document<"u";function Jx(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function zA(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Jx(t.default)}const tt=Object.assign;function yh(t,e){const n={};for(const s in e){const r=e[s];n[s]=Qn(r)?r.map(t):t(r)}return n}const Ia=()=>{},Qn=Array.isArray,Zx=/#/g,HA=/&/g,qA=/\//g,WA=/=/g,KA=/\?/g,ew=/\+/g,GA=/%5B/g,YA=/%5D/g,tw=/%5E/g,QA=/%60/g,nw=/%7B/g,XA=/%7C/g,sw=/%7D/g,JA=/%20/g;function Cp(t){return encodeURI(""+t).replace(XA,"|").replace(GA,"[").replace(YA,"]")}function ZA(t){return Cp(t).replace(nw,"{").replace(sw,"}").replace(tw,"^")}function gf(t){return Cp(t).replace(ew,"%2B").replace(JA,"+").replace(Zx,"%23").replace(HA,"%26").replace(QA,"`").replace(nw,"{").replace(sw,"}").replace(tw,"^")}function eC(t){return gf(t).replace(WA,"%3D")}function tC(t){return Cp(t).replace(Zx,"%23").replace(KA,"%3F")}function nC(t){return t==null?"":tC(t).replace(qA,"%2F")}function Ga(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const sC=/\/$/,rC=t=>t.replace(sC,"");function vh(t,e,n="/"){let s,r={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(s=e.slice(0,l),i=e.slice(l+1,a>-1?a:e.length),r=t(i)),a>-1&&(s=s||e.slice(0,a),o=e.slice(a,e.length)),s=lC(s??e,n),{fullPath:s+(i&&"?")+i+o,path:s,query:r,hash:Ga(o)}}function iC(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function $0(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function oC(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&co(e.matched[s],n.matched[r])&&rw(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function co(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function rw(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!aC(t[n],e[n]))return!1;return!0}function aC(t,e){return Qn(t)?F0(t,e):Qn(e)?F0(e,t):t===e}function F0(t,e){return Qn(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function lC(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const nr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Ya;(function(t){t.pop="pop",t.push="push"})(Ya||(Ya={}));var Sa;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Sa||(Sa={}));function cC(t){if(!t)if(Wi){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),rC(t)}const uC=/^[^#]+#/;function dC(t,e){return t.replace(uC,"#")+e}function hC(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const Zu=()=>({left:window.scrollX,top:window.scrollY});function fC(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=hC(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function U0(t,e){return(history.state?history.state.position-e:-1)+t}const mf=new Map;function pC(t,e){mf.set(t,e)}function gC(t){const e=mf.get(t);return mf.delete(t),e}let mC=()=>location.protocol+"//"+location.host;function iw(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let a=r.includes(t.slice(i))?t.slice(i).length:1,l=r.slice(a);return l[0]!=="/"&&(l="/"+l),$0(l,"")}return $0(n,t)+s+r}function yC(t,e,n,s){let r=[],i=[],o=null;const a=({state:f})=>{const g=iw(t,location),v=n.value,y=e.value;let _=0;if(f){if(n.value=g,e.value=f,o&&o===v){o=null;return}_=y?f.position-y.position:0}else s(g);r.forEach(w=>{w(n.value,v,{delta:_,type:Ya.pop,direction:_?_>0?Sa.forward:Sa.back:Sa.unknown})})};function l(){o=n.value}function c(f){r.push(f);const g=()=>{const v=r.indexOf(f);v>-1&&r.splice(v,1)};return i.push(g),g}function u(){const{history:f}=window;f.state&&f.replaceState(tt({},f.state,{scroll:Zu()}),"")}function h(){for(const f of i)f();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:h}}function B0(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?Zu():null}}function vC(t){const{history:e,location:n}=window,s={value:iw(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,c,u){const h=t.indexOf("#"),f=h>-1?(n.host&&document.querySelector("base")?t:t.slice(h))+l:mC()+t+l;try{e[u?"replaceState":"pushState"](c,"",f),r.value=c}catch(g){console.error(g),n[u?"replace":"assign"](f)}}function o(l,c){const u=tt({},e.state,B0(r.value.back,l,r.value.forward,!0),c,{position:r.value.position});i(l,u,!0),s.value=l}function a(l,c){const u=tt({},r.value,e.state,{forward:l,scroll:Zu()});i(u.current,u,!0);const h=tt({},B0(s.value,l,null),{position:u.position+1},c);i(l,h,!1),s.value=l}return{location:s,state:r,push:a,replace:o}}function _C(t){t=cC(t);const e=vC(t),n=yC(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=tt({location:"",base:t,go:s,createHref:dC.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function bC(t){return typeof t=="string"||t&&typeof t=="object"}function ow(t){return typeof t=="string"||typeof t=="symbol"}const aw=Symbol("");var j0;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(j0||(j0={}));function uo(t,e){return tt(new Error,{type:t,[aw]:!0},e)}function ws(t,e){return t instanceof Error&&aw in t&&(e==null||!!(t.type&e))}const z0="[^/]+?",xC={sensitive:!1,strict:!1,start:!0,end:!0},wC=/[.+*?^${}()[\]/\\]/g;function EC(t,e){const n=tt({},xC,e),s=[];let r=n.start?"^":"";const i=[];for(const c of t){const u=c.length?[]:[90];n.strict&&!c.length&&(r+="/");for(let h=0;h<c.length;h++){const f=c[h];let g=40+(n.sensitive?.25:0);if(f.type===0)h||(r+="/"),r+=f.value.replace(wC,"\\$&"),g+=40;else if(f.type===1){const{value:v,repeatable:y,optional:_,regexp:w}=f;i.push({name:v,repeatable:y,optional:_});const I=w||z0;if(I!==z0){g+=10;try{new RegExp(`(${I})`)}catch(L){throw new Error(`Invalid custom RegExp for param "${v}" (${I}): `+L.message)}}let O=y?`((?:${I})(?:/(?:${I}))*)`:`(${I})`;h||(O=_&&c.length<2?`(?:/${O})`:"/"+O),_&&(O+="?"),r+=O,g+=20,_&&(g+=-8),y&&(g+=-20),I===".*"&&(g+=-50)}u.push(g)}s.push(u)}if(n.strict&&n.end){const c=s.length-1;s[c][s[c].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function a(c){const u=c.match(o),h={};if(!u)return null;for(let f=1;f<u.length;f++){const g=u[f]||"",v=i[f-1];h[v.name]=g&&v.repeatable?g.split("/"):g}return h}function l(c){let u="",h=!1;for(const f of t){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const g of f)if(g.type===0)u+=g.value;else if(g.type===1){const{value:v,repeatable:y,optional:_}=g,w=v in c?c[v]:"";if(Qn(w)&&!y)throw new Error(`Provided param "${v}" is an array but it is not repeatable (* or + modifiers)`);const I=Qn(w)?w.join("/"):w;if(!I)if(_)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${v}"`);u+=I}}return u||"/"}return{re:o,score:s,keys:i,parse:a,stringify:l}}function TC(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function lw(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=TC(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(H0(s))return 1;if(H0(r))return-1}return r.length-s.length}function H0(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const kC={type:0,value:""},IC=/[a-zA-Z0-9_]/;function SC(t){if(!t)return[[]];if(t==="/")return[[kC]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(g){throw new Error(`ERR (${n})/"${c}": ${g}`)}let n=0,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let a=0,l,c="",u="";function h(){c&&(n===0?i.push({type:0,value:c}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:l==="/"?(c&&h(),o()):l===":"?(h(),n=1):f();break;case 4:f(),n=s;break;case 1:l==="("?n=2:IC.test(l)?f():(h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),h(),o(),r}function AC(t,e,n){const s=EC(SC(t.path),n),r=tt(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function CC(t,e){const n=[],s=new Map;e=G0({strict:!1,end:!0,sensitive:!1},e);function r(h){return s.get(h)}function i(h,f,g){const v=!g,y=W0(h);y.aliasOf=g&&g.record;const _=G0(e,h),w=[y];if("alias"in h){const L=typeof h.alias=="string"?[h.alias]:h.alias;for(const M of L)w.push(W0(tt({},y,{components:g?g.record.components:y.components,path:M,aliasOf:g?g.record:y})))}let I,O;for(const L of w){const{path:M}=L;if(f&&M[0]!=="/"){const $=f.record.path,T=$[$.length-1]==="/"?"":"/";L.path=f.record.path+(M&&T+M)}if(I=AC(L,f,_),g?g.alias.push(I):(O=O||I,O!==I&&O.alias.push(I),v&&h.name&&!K0(I)&&o(h.name)),cw(I)&&l(I),y.children){const $=y.children;for(let T=0;T<$.length;T++)i($[T],I,g&&g.children[T])}g=g||I}return O?()=>{o(O)}:Ia}function o(h){if(ow(h)){const f=s.get(h);f&&(s.delete(h),n.splice(n.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=n.indexOf(h);f>-1&&(n.splice(f,1),h.record.name&&s.delete(h.record.name),h.children.forEach(o),h.alias.forEach(o))}}function a(){return n}function l(h){const f=OC(h,n);n.splice(f,0,h),h.record.name&&!K0(h)&&s.set(h.record.name,h)}function c(h,f){let g,v={},y,_;if("name"in h&&h.name){if(g=s.get(h.name),!g)throw uo(1,{location:h});_=g.record.name,v=tt(q0(f.params,g.keys.filter(O=>!O.optional).concat(g.parent?g.parent.keys.filter(O=>O.optional):[]).map(O=>O.name)),h.params&&q0(h.params,g.keys.map(O=>O.name))),y=g.stringify(v)}else if(h.path!=null)y=h.path,g=n.find(O=>O.re.test(y)),g&&(v=g.parse(y),_=g.record.name);else{if(g=f.name?s.get(f.name):n.find(O=>O.re.test(f.path)),!g)throw uo(1,{location:h,currentLocation:f});_=g.record.name,v=tt({},f.params,h.params),y=g.stringify(v)}const w=[];let I=g;for(;I;)w.unshift(I.record),I=I.parent;return{name:_,path:y,params:v,matched:w,meta:RC(w)}}t.forEach(h=>i(h));function u(){n.length=0,s.clear()}return{addRoute:i,resolve:c,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:r}}function q0(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function W0(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:PC(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function PC(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function K0(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function RC(t){return t.reduce((e,n)=>tt(e,n.meta),{})}function G0(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}function OC(t,e){let n=0,s=e.length;for(;n!==s;){const i=n+s>>1;lw(t,e[i])<0?s=i:n=i+1}const r=DC(t);return r&&(s=e.lastIndexOf(r,s-1)),s}function DC(t){let e=t;for(;e=e.parent;)if(cw(e)&&lw(t,e)===0)return e}function cw({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function MC(t){const e={};if(t===""||t==="?")return e;const s=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<s.length;++r){const i=s[r].replace(ew," "),o=i.indexOf("="),a=Ga(o<0?i:i.slice(0,o)),l=o<0?null:Ga(i.slice(o+1));if(a in e){let c=e[a];Qn(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function Y0(t){let e="";for(let n in t){const s=t[n];if(n=eC(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(Qn(s)?s.map(i=>i&&gf(i)):[s&&gf(s)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function NC(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=Qn(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const LC=Symbol(""),Q0=Symbol(""),ed=Symbol(""),Pp=Symbol(""),yf=Symbol("");function ea(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function ur(t,e,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((a,l)=>{const c=f=>{f===!1?l(uo(4,{from:n,to:e})):f instanceof Error?l(f):bC(f)?l(uo(2,{from:e,to:f})):(o&&s.enterCallbacks[r]===o&&typeof f=="function"&&o.push(f),a())},u=i(()=>t.call(s&&s.instances[r],e,n,c));let h=Promise.resolve(u);t.length<3&&(h=h.then(c)),h.catch(f=>l(f))})}function _h(t,e,n,s,r=i=>i()){const i=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(Jx(l)){const u=(l.__vccOpts||l)[e];u&&i.push(ur(u,n,s,o,a,r))}else{let c=l();i.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const h=zA(u)?u.default:u;o.mods[a]=u,o.components[a]=h;const g=(h.__vccOpts||h)[e];return g&&ur(g,n,s,o,a,r)()}))}}return i}function X0(t){const e=$t(ed),n=$t(Pp),s=ye(()=>{const l=te(t.to);return e.resolve(l)}),r=ye(()=>{const{matched:l}=s.value,{length:c}=l,u=l[c-1],h=n.matched;if(!u||!h.length)return-1;const f=h.findIndex(co.bind(null,u));if(f>-1)return f;const g=J0(l[c-2]);return c>1&&J0(u)===g&&h[h.length-1].path!==g?h.findIndex(co.bind(null,l[c-2])):f}),i=ye(()=>r.value>-1&&BC(n.params,s.value.params)),o=ye(()=>r.value>-1&&r.value===n.matched.length-1&&rw(n.params,s.value.params));function a(l={}){if(UC(l)){const c=e[te(t.replace)?"replace":"push"](te(t.to)).catch(Ia);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:s,href:ye(()=>s.value.href),isActive:i,isExactActive:o,navigate:a}}function VC(t){return t.length===1?t[0]:t}const $C=Nr({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:X0,setup(t,{slots:e}){const n=Eo(X0(t)),{options:s}=$t(ed),r=ye(()=>({[Z0(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[Z0(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&VC(e.default(n));return t.custom?i:gi("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),FC=$C;function UC(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function BC(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!Qn(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function J0(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Z0=(t,e,n)=>t??e??n,jC=Nr({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=$t(yf),r=ye(()=>t.route||s.value),i=$t(Q0,0),o=ye(()=>{let c=te(i);const{matched:u}=r.value;let h;for(;(h=u[c])&&!h.components;)c++;return c}),a=ye(()=>r.value.matched[o.value]);Vs(Q0,ye(()=>o.value+1)),Vs(LC,a),Vs(yf,r);const l=j();return kt(()=>[l.value,a.value,t.name],([c,u,h],[f,g,v])=>{u&&(u.instances[h]=c,g&&g!==u&&c&&c===f&&(u.leaveGuards.size||(u.leaveGuards=g.leaveGuards),u.updateGuards.size||(u.updateGuards=g.updateGuards))),c&&u&&(!g||!co(u,g)||!f)&&(u.enterCallbacks[h]||[]).forEach(y=>y(c))},{flush:"post"}),()=>{const c=r.value,u=t.name,h=a.value,f=h&&h.components[u];if(!f)return ey(n.default,{Component:f,route:c});const g=h.props[u],v=g?g===!0?c.params:typeof g=="function"?g(c):g:null,_=gi(f,tt({},v,e,{onVnodeUnmounted:w=>{w.component.isUnmounted&&(h.instances[u]=null)},ref:l}));return ey(n.default,{Component:_,route:c})||_}}});function ey(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const uw=jC;function zC(t){const e=CC(t.routes,t),n=t.parseQuery||MC,s=t.stringifyQuery||Y0,r=t.history,i=ea(),o=ea(),a=ea(),l=wp(nr);let c=nr;Wi&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=yh.bind(null,z=>""+z),h=yh.bind(null,nC),f=yh.bind(null,Ga);function g(z,X){let se,fe;return ow(z)?(se=e.getRecordMatcher(z),fe=X):fe=z,e.addRoute(fe,se)}function v(z){const X=e.getRecordMatcher(z);X&&e.removeRoute(X)}function y(){return e.getRoutes().map(z=>z.record)}function _(z){return!!e.getRecordMatcher(z)}function w(z,X){if(X=tt({},X||l.value),typeof z=="string"){const F=vh(n,z,X.path),W=e.resolve({path:F.path},X),Y=r.createHref(F.fullPath);return tt(F,W,{params:f(W.params),hash:Ga(F.hash),redirectedFrom:void 0,href:Y})}let se;if(z.path!=null)se=tt({},z,{path:vh(n,z.path,X.path).path});else{const F=tt({},z.params);for(const W in F)F[W]==null&&delete F[W];se=tt({},z,{params:h(F)}),X.params=h(X.params)}const fe=e.resolve(se,X),We=z.hash||"";fe.params=u(f(fe.params));const N=iC(s,tt({},z,{hash:ZA(We),path:fe.path})),V=r.createHref(N);return tt({fullPath:N,hash:We,query:s===Y0?NC(z.query):z.query||{}},fe,{redirectedFrom:void 0,href:V})}function I(z){return typeof z=="string"?vh(n,z,l.value.path):tt({},z)}function O(z,X){if(c!==z)return uo(8,{from:X,to:z})}function L(z){return T(z)}function M(z){return L(tt(I(z),{replace:!0}))}function $(z){const X=z.matched[z.matched.length-1];if(X&&X.redirect){const{redirect:se}=X;let fe=typeof se=="function"?se(z):se;return typeof fe=="string"&&(fe=fe.includes("?")||fe.includes("#")?fe=I(fe):{path:fe},fe.params={}),tt({query:z.query,hash:z.hash,params:fe.path!=null?{}:z.params},fe)}}function T(z,X){const se=c=w(z),fe=l.value,We=z.state,N=z.force,V=z.replace===!0,F=$(se);if(F)return T(tt(I(F),{state:typeof F=="object"?tt({},We,F.state):We,force:N,replace:V}),X||se);const W=se;W.redirectedFrom=X;let Y;return!N&&oC(s,fe,se)&&(Y=uo(16,{to:W,from:fe}),At(fe,fe,!0,!1)),(Y?Promise.resolve(Y):A(W,fe)).catch(K=>ws(K)?ws(K,2)?K:xt(K):Pe(K,W,fe)).then(K=>{if(K){if(ws(K,2))return T(tt({replace:V},I(K.to),{state:typeof K.to=="object"?tt({},We,K.to.state):We,force:N}),X||W)}else K=S(W,fe,!0,V,We);return k(W,fe,K),K})}function b(z,X){const se=O(z,X);return se?Promise.reject(se):Promise.resolve()}function E(z){const X=le.values().next().value;return X&&typeof X.runWithContext=="function"?X.runWithContext(z):z()}function A(z,X){let se;const[fe,We,N]=HC(z,X);se=_h(fe.reverse(),"beforeRouteLeave",z,X);for(const F of fe)F.leaveGuards.forEach(W=>{se.push(ur(W,z,X))});const V=b.bind(null,z,X);return se.push(V),Be(se).then(()=>{se=[];for(const F of i.list())se.push(ur(F,z,X));return se.push(V),Be(se)}).then(()=>{se=_h(We,"beforeRouteUpdate",z,X);for(const F of We)F.updateGuards.forEach(W=>{se.push(ur(W,z,X))});return se.push(V),Be(se)}).then(()=>{se=[];for(const F of N)if(F.beforeEnter)if(Qn(F.beforeEnter))for(const W of F.beforeEnter)se.push(ur(W,z,X));else se.push(ur(F.beforeEnter,z,X));return se.push(V),Be(se)}).then(()=>(z.matched.forEach(F=>F.enterCallbacks={}),se=_h(N,"beforeRouteEnter",z,X,E),se.push(V),Be(se))).then(()=>{se=[];for(const F of o.list())se.push(ur(F,z,X));return se.push(V),Be(se)}).catch(F=>ws(F,8)?F:Promise.reject(F))}function k(z,X,se){a.list().forEach(fe=>E(()=>fe(z,X,se)))}function S(z,X,se,fe,We){const N=O(z,X);if(N)return N;const V=X===nr,F=Wi?history.state:{};se&&(fe||V?r.replace(z.fullPath,tt({scroll:V&&F&&F.scroll},We)):r.push(z.fullPath,We)),l.value=z,At(z,X,se,V),xt()}let R;function me(){R||(R=r.listen((z,X,se)=>{if(!Ae.listening)return;const fe=w(z),We=$(fe);if(We){T(tt(We,{replace:!0,force:!0}),fe).catch(Ia);return}c=fe;const N=l.value;Wi&&pC(U0(N.fullPath,se.delta),Zu()),A(fe,N).catch(V=>ws(V,12)?V:ws(V,2)?(T(tt(I(V.to),{force:!0}),fe).then(F=>{ws(F,20)&&!se.delta&&se.type===Ya.pop&&r.go(-1,!1)}).catch(Ia),Promise.reject()):(se.delta&&r.go(-se.delta,!1),Pe(V,fe,N))).then(V=>{V=V||S(fe,N,!1),V&&(se.delta&&!ws(V,8)?r.go(-se.delta,!1):se.type===Ya.pop&&ws(V,20)&&r.go(-1,!1)),k(fe,N,V)}).catch(Ia)}))}let Ee=ea(),we=ea(),he;function Pe(z,X,se){xt(z);const fe=we.list();return fe.length?fe.forEach(We=>We(z,X,se)):console.error(z),Promise.reject(z)}function Qe(){return he&&l.value!==nr?Promise.resolve():new Promise((z,X)=>{Ee.add([z,X])})}function xt(z){return he||(he=!z,me(),Ee.list().forEach(([X,se])=>z?se(z):X()),Ee.reset()),z}function At(z,X,se,fe){const{scrollBehavior:We}=t;if(!Wi||!We)return Promise.resolve();const N=!se&&gC(U0(z.fullPath,0))||(fe||!se)&&history.state&&history.state.scroll||null;return Cn().then(()=>We(z,X,N)).then(V=>V&&fC(V)).catch(V=>Pe(V,z,X))}const Ze=z=>r.go(z);let ne;const le=new Set,Ae={currentRoute:l,listening:!0,addRoute:g,removeRoute:v,clearRoutes:e.clearRoutes,hasRoute:_,getRoutes:y,resolve:w,options:t,push:L,replace:M,go:Ze,back:()=>Ze(-1),forward:()=>Ze(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:we.add,isReady:Qe,install(z){const X=this;z.component("RouterLink",FC),z.component("RouterView",uw),z.config.globalProperties.$router=X,Object.defineProperty(z.config.globalProperties,"$route",{enumerable:!0,get:()=>te(l)}),Wi&&!ne&&l.value===nr&&(ne=!0,L(r.location).catch(We=>{}));const se={};for(const We in nr)Object.defineProperty(se,We,{get:()=>l.value[We],enumerable:!0});z.provide(ed,X),z.provide(Pp,ex(se)),z.provide(yf,l);const fe=z.unmount;le.add(z),z.unmount=function(){le.delete(z),le.size<1&&(c=nr,R&&R(),R=null,l.value=nr,ne=!1,he=!1),fe()}}};function Be(z){return z.reduce((X,se)=>X.then(()=>E(se)),Promise.resolve())}return Ae}function HC(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(c=>co(c,a))?s.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>co(c,l))||r.push(l))}return[n,s,r]}function Rp(){return $t(ed)}function dw(t){return $t(Pp)}const Aa=Ju("toast",{state:()=>({toast:{show:!1,title:"",message:"",type:"info",timeoutId:null}}),actions:{showToast(t,e,n="info",s=3e3){this.toast.timeoutId&&clearTimeout(this.toast.timeoutId),this.toast.show=!0,this.toast.title=t,this.toast.message=e,this.toast.type=n,this.toast.timeoutId=setTimeout(()=>{this.hideToast()},s)},hideToast(){this.toast.show=!1,this.toast.title="",this.toast.message="",this.toast.type="info",this.toast.timeoutId&&(clearTimeout(this.toast.timeoutId),this.toast.timeoutId=null)}}}),Gt=(t,e)=>{const n=t.__vccOpts||t;for(const[s,r]of e)n[s]=r;return n},qC={class:"flex items-center"},WC={class:"mr-2"},KC={key:0,class:"fas fa-check-circle"},GC={key:1,class:"fas fa-times-circle"},YC={key:2,class:"fas fa-info-circle"},QC={class:"font-semibold"},XC={class:"text-sm"},JC={__name:"ToastNotification",setup(t){const e=Aa(),n=ye(()=>e.toast);return(s,r)=>n.value.show?(P(),D("div",{key:0,class:ce(["fixed bottom-4 right-4 p-4 rounded-lg shadow-lg text-white max-w-xs z-[1000]",n.value.type==="success"?"bg-green-500":n.value.type==="error"?"bg-red-500":"bg-blue-500"]),role:"alert"},[p("div",qC,[p("div",WC,[n.value.type==="success"?(P(),D("i",KC)):n.value.type==="error"?(P(),D("i",GC)):(P(),D("i",YC))]),p("div",null,[p("p",QC,B(n.value.title),1),p("p",XC,B(n.value.message),1)]),p("button",{onClick:r[0]||(r[0]=i=>te(e).hideToast()),class:"ml-auto text-white opacity-75 hover:opacity-100"},"  ")])],2)):J("",!0)}},ZC=Gt(JC,[["__scopeId","data-v-12732203"]]),e2={__name:"App",setup(t){return(e,n)=>(P(),D(ve,null,[re(te(uw),null,{default:pe(({Component:s,route:r})=>[re(ko,{"enter-active-class":r.meta.enterActiveClass,"leave-active-class":r.meta.leaveActiveClass},{default:pe(()=>[(P(),Ye(gS(s)))]),_:2},1032,["enter-active-class","leave-active-class"])]),_:1}),re(ZC)],64))}},Io=Ju("cart",()=>{const t=j(JSON.parse(localStorage.getItem("cart_items")||"[]"));function e(o){if(!o||!o.id){console.warn("Tentativa de adicionar item invlido:",o);return}const a=t.value.find(l=>l.id===o.id&&l.size===o.size&&r(l.extras,o.extras));a?a.quantity+=o.quantity:t.value.push({...o,subtotal:o.price+o.extras.reduce((l,c)=>l+c.price,0)})}function n(o){console.log("Removendo item:",o);const a=t.value.findIndex(l=>l.id===o.id&&l.size===o.size&&r(l.extras,o.extras));a!==-1?(t.value.splice(a,1),console.log("Item removido com sucesso!")):console.warn("Item para remover no encontrado.")}function s(){t.value=[]}function r(o,a){if(o.length!==a.length)return!1;const l=[...o].sort((u,h)=>u.name.localeCompare(h.name)),c=[...a].sort((u,h)=>u.name.localeCompare(h.name));return l.every((u,h)=>u.name===c[h].name&&u.price===c[h].price)}const i=ye(()=>t.value.reduce((o,a)=>o+(a.price+a.extras.reduce((l,c)=>l+c.price,0))*a.quantity,0));return kt(t,o=>{localStorage.setItem("cart_items",JSON.stringify(o))},{deep:!0}),{items:t,addItem:e,removeItem:n,clearCart:s,total:i}}),t2={class:"md:translate-20 transition-all -translate-y-2 fixed bottom-0 left-2 right-2 rounded-full bg-gray-200/30 border-t border-gray-200/50 dark:bg-gray-900/30 dark:border-gray-700 shadow-md z-50 backdrop-blur-md"},n2={class:"flex justify-around p-3 text-gray-700 dark:text-gray-300 relative"},s2={__name:"MenuMobile",setup(t){const e=dw(),n=j(!1),s=o=>e.path===o,r=Io(),i=ye(()=>r.items.length);return kt(i,(o,a)=>{o>a&&(n.value=!0,setTimeout(()=>{n.value=!1},500))}),(o,a)=>{const l=To("RouterLink");return P(),D("div",t2,[p("nav",n2,[re(l,{to:"/",class:ce(["flex flex-col items-center",{"text-indigo-500 dark:text-emerald-400":s("/")}])},{default:pe(()=>a[0]||(a[0]=[p("i",{class:"fas fa-home text-sm"},null,-1),p("span",{class:"text-xs mt-1"},"Incio",-1)])),_:1,__:[0]},8,["class"]),re(l,{to:"/carrinho",class:ce(["flex flex-col items-center relative",{"text-indigo-500 dark:text-emerald-400":s("/carrinho")}])},{default:pe(()=>[a[1]||(a[1]=p("i",{class:"fas fa-shopping-cart text-sm"},null,-1)),a[2]||(a[2]=p("span",{class:"text-xs mt-1"},"Carrinho",-1)),i.value>0?(P(),D("span",{key:0,class:ce(["absolute -top-2 -right-2 bg-red-500 text-white text-[10px] rounded-full px-1.5 py-0.5 font-semibold",n.value?"animate-bounce":""])},B(i.value),3)):J("",!0)]),_:1,__:[1,2]},8,["class"]),re(l,{to:"/favoritos",class:ce(["flex flex-col items-center",{"text-indigo-500 dark:text-emerald-400":s("/favoritos")}])},{default:pe(()=>a[3]||(a[3]=[p("i",{class:"fas fa-heart text-sm"},null,-1),p("span",{class:"text-xs mt-1"},"Favoritos",-1)])),_:1,__:[3]},8,["class"]),re(l,{to:"/perfil",class:ce(["flex flex-col items-center",{"text-indigo-500 dark:text-emerald-400":s("/perfil")}])},{default:pe(()=>a[4]||(a[4]=[p("i",{class:"fas fa-user text-sm"},null,-1),p("span",{class:"text-xs mt-1"},"Perfil",-1)])),_:1,__:[4]},8,["class"])])])}}},hw="/assets/logo-BsbHNySU.png",r2={key:0,class:"absolute top-0 border-gray-100 border-2 -right-0 bg-red-600 text-white rounded-full text-xs w-5 h-5 flex items-center justify-center"},ty={__name:"IconCart",props:{cartCount:{type:Number,default:0}},setup(t){return(e,n)=>{const s=To("router-link");return P(),Ye(s,{to:"/carrinho",class:"relative text-md p-2"},{default:pe(()=>[n[0]||(n[0]=p("i",{class:"fa-solid fa-cart-shopping text-gray-600 dark:text-gray-300 hover:cursor-pointer"},null,-1)),t.cartCount?(P(),D("span",r2,B(t.cartCount),1)):J("",!0)]),_:1,__:[0]})}}},i2={class:"relative inline-block w-11 h-5 ml-4"},o2=["checked"],a2={for:"theme-switch",class:"absolute top-0 left-0 w-5 h-5 bg-white dark:bg-gray-200 rounded-full border border-gray-300 dark:border-gray-600 shadow-sm transition-transform duration-300 peer-checked:translate-x-6 peer-checked:border-blue-600 dark:peer-checked:border-blue-600 cursor-pointer flex items-center justify-center"},l2={key:0,class:"fa-solid fa-moon text-yellow-500 text-xs"},c2={key:1,class:"fa-solid fa-sun text-orange-400 text-xs"},fw={__name:"ThemeToggle",setup(t){const e=j(!1),n=r=>{e.value=r,r?(document.documentElement.classList.add("dark"),document.documentElement.classList.remove("light"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),document.documentElement.classList.add("light"),localStorage.setItem("theme","light"))},s=r=>{const i=!e.value,o=document.createElement("div");o.classList.add("theme-ripple-effect");let a,l;if(r&&r.clientX&&r.clientY)a=r.clientX,l=r.clientY;else{const u=document.getElementById("theme-switch");if(u){const h=u.getBoundingClientRect();a=h.left+h.width/2,l=h.top+h.height/2}else a=window.innerWidth/2,l=window.innerHeight/2}const c=i?"#fff":"#1a202c";o.style.position="fixed",o.style.top="0",o.style.left="0",o.style.width="100vw",o.style.height="100vh",o.style.zIndex="9999",o.style.pointerEvents="none",o.style.backgroundImage=`radial-gradient(circle at ${a}px ${l}px, transparent 25%, ${c} 25.5%)`,o.style.backgroundSize="100% 100%",o.style.backgroundRepeat="no-repeat",o.style.transition="background-size 1s ease-out",document.body.appendChild(o),o.offsetWidth,requestAnimationFrame(()=>{o.style.backgroundSize="400% 400%"}),n(i),o.addEventListener("transitionend",u=>{u.propertyName==="background-size"&&o.remove()},{once:!0})};return mt(()=>{const r=localStorage.getItem("theme");n(r?r==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches)}),(r,i)=>(P(),D("div",i2,[p("input",{checked:e.value,onChange:s,id:"theme-switch",type:"checkbox",class:"peer appearance-none w-11 h-5 rounded-full cursor-pointer transition-colors duration-300 bg-gray-300 dark:bg-gray-700 checked:bg-blue-600 dark:checked:bg-blue-600"},null,40,o2),p("label",a2,[e.value?(P(),D("i",l2)):(P(),D("i",c2))]),i[0]||(i[0]=p("span",{class:"sr-only"},"Toggle Theme",-1))]))}};function pw(t,e){return function(){return t.apply(e,arguments)}}const{toString:u2}=Object.prototype,{getPrototypeOf:Op}=Object,{iterator:td,toStringTag:gw}=Symbol,nd=(t=>e=>{const n=u2.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Zn=t=>(t=t.toLowerCase(),e=>nd(e)===t),sd=t=>e=>typeof e===t,{isArray:So}=Array,Qa=sd("undefined");function d2(t){return t!==null&&!Qa(t)&&t.constructor!==null&&!Qa(t.constructor)&&vn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const mw=Zn("ArrayBuffer");function h2(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&mw(t.buffer),e}const f2=sd("string"),vn=sd("function"),yw=sd("number"),rd=t=>t!==null&&typeof t=="object",p2=t=>t===!0||t===!1,Pc=t=>{if(nd(t)!=="object")return!1;const e=Op(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(gw in t)&&!(td in t)},g2=Zn("Date"),m2=Zn("File"),y2=Zn("Blob"),v2=Zn("FileList"),_2=t=>rd(t)&&vn(t.pipe),b2=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||vn(t.append)&&((e=nd(t))==="formdata"||e==="object"&&vn(t.toString)&&t.toString()==="[object FormData]"))},x2=Zn("URLSearchParams"),[w2,E2,T2,k2]=["ReadableStream","Request","Response","Headers"].map(Zn),I2=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function El(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let s,r;if(typeof t!="object"&&(t=[t]),So(t))for(s=0,r=t.length;s<r;s++)e.call(null,t[s],s,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(s=0;s<o;s++)a=i[s],e.call(null,t[a],a,t)}}function vw(t,e){e=e.toLowerCase();const n=Object.keys(t);let s=n.length,r;for(;s-- >0;)if(r=n[s],e===r.toLowerCase())return r;return null}const ni=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,_w=t=>!Qa(t)&&t!==ni;function vf(){const{caseless:t}=_w(this)&&this||{},e={},n=(s,r)=>{const i=t&&vw(e,r)||r;Pc(e[i])&&Pc(s)?e[i]=vf(e[i],s):Pc(s)?e[i]=vf({},s):So(s)?e[i]=s.slice():e[i]=s};for(let s=0,r=arguments.length;s<r;s++)arguments[s]&&El(arguments[s],n);return e}const S2=(t,e,n,{allOwnKeys:s}={})=>(El(e,(r,i)=>{n&&vn(r)?t[i]=pw(r,n):t[i]=r},{allOwnKeys:s}),t),A2=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),C2=(t,e,n,s)=>{t.prototype=Object.create(e.prototype,s),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},P2=(t,e,n,s)=>{let r,i,o;const a={};if(e=e||{},t==null)return e;do{for(r=Object.getOwnPropertyNames(t),i=r.length;i-- >0;)o=r[i],(!s||s(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&Op(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},R2=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const s=t.indexOf(e,n);return s!==-1&&s===n},O2=t=>{if(!t)return null;if(So(t))return t;let e=t.length;if(!yw(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},D2=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Op(Uint8Array)),M2=(t,e)=>{const s=(t&&t[td]).call(t);let r;for(;(r=s.next())&&!r.done;){const i=r.value;e.call(t,i[0],i[1])}},N2=(t,e)=>{let n;const s=[];for(;(n=t.exec(e))!==null;)s.push(n);return s},L2=Zn("HTMLFormElement"),V2=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,r){return s.toUpperCase()+r}),ny=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),$2=Zn("RegExp"),bw=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),s={};El(n,(r,i)=>{let o;(o=e(r,i,t))!==!1&&(s[i]=o||r)}),Object.defineProperties(t,s)},F2=t=>{bw(t,(e,n)=>{if(vn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=t[n];if(vn(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},U2=(t,e)=>{const n={},s=r=>{r.forEach(i=>{n[i]=!0})};return So(t)?s(t):s(String(t).split(e)),n},B2=()=>{},j2=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function z2(t){return!!(t&&vn(t.append)&&t[gw]==="FormData"&&t[td])}const H2=t=>{const e=new Array(10),n=(s,r)=>{if(rd(s)){if(e.indexOf(s)>=0)return;if(!("toJSON"in s)){e[r]=s;const i=So(s)?[]:{};return El(s,(o,a)=>{const l=n(o,r+1);!Qa(l)&&(i[a]=l)}),e[r]=void 0,i}}return s};return n(t,0)},q2=Zn("AsyncFunction"),W2=t=>t&&(rd(t)||vn(t))&&vn(t.then)&&vn(t.catch),xw=((t,e)=>t?setImmediate:e?((n,s)=>(ni.addEventListener("message",({source:r,data:i})=>{r===ni&&i===n&&s.length&&s.shift()()},!1),r=>{s.push(r),ni.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",vn(ni.postMessage)),K2=typeof queueMicrotask<"u"?queueMicrotask.bind(ni):typeof process<"u"&&process.nextTick||xw,G2=t=>t!=null&&vn(t[td]),H={isArray:So,isArrayBuffer:mw,isBuffer:d2,isFormData:b2,isArrayBufferView:h2,isString:f2,isNumber:yw,isBoolean:p2,isObject:rd,isPlainObject:Pc,isReadableStream:w2,isRequest:E2,isResponse:T2,isHeaders:k2,isUndefined:Qa,isDate:g2,isFile:m2,isBlob:y2,isRegExp:$2,isFunction:vn,isStream:_2,isURLSearchParams:x2,isTypedArray:D2,isFileList:v2,forEach:El,merge:vf,extend:S2,trim:I2,stripBOM:A2,inherits:C2,toFlatObject:P2,kindOf:nd,kindOfTest:Zn,endsWith:R2,toArray:O2,forEachEntry:M2,matchAll:N2,isHTMLForm:L2,hasOwnProperty:ny,hasOwnProp:ny,reduceDescriptors:bw,freezeMethods:F2,toObjectSet:U2,toCamelCase:V2,noop:B2,toFiniteNumber:j2,findKey:vw,global:ni,isContextDefined:_w,isSpecCompliantForm:z2,toJSONObject:H2,isAsyncFn:q2,isThenable:W2,setImmediate:xw,asap:K2,isIterable:G2};function Fe(t,e,n,s,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),s&&(this.request=s),r&&(this.response=r,this.status=r.status?r.status:null)}H.inherits(Fe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:H.toJSONObject(this.config),code:this.code,status:this.status}}});const ww=Fe.prototype,Ew={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Ew[t]={value:t}});Object.defineProperties(Fe,Ew);Object.defineProperty(ww,"isAxiosError",{value:!0});Fe.from=(t,e,n,s,r,i)=>{const o=Object.create(ww);return H.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),Fe.call(o,t.message,e,n,s,r),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const Y2=null;function _f(t){return H.isPlainObject(t)||H.isArray(t)}function Tw(t){return H.endsWith(t,"[]")?t.slice(0,-2):t}function sy(t,e,n){return t?t.concat(e).map(function(r,i){return r=Tw(r),!n&&i?"["+r+"]":r}).join(n?".":""):e}function Q2(t){return H.isArray(t)&&!t.some(_f)}const X2=H.toFlatObject(H,{},null,function(e){return/^is[A-Z]/.test(e)});function id(t,e,n){if(!H.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=H.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,_){return!H.isUndefined(_[y])});const s=n.metaTokens,r=n.visitor||u,i=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&H.isSpecCompliantForm(e);if(!H.isFunction(r))throw new TypeError("visitor must be a function");function c(v){if(v===null)return"";if(H.isDate(v))return v.toISOString();if(!l&&H.isBlob(v))throw new Fe("Blob is not supported. Use a Buffer instead.");return H.isArrayBuffer(v)||H.isTypedArray(v)?l&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function u(v,y,_){let w=v;if(v&&!_&&typeof v=="object"){if(H.endsWith(y,"{}"))y=s?y:y.slice(0,-2),v=JSON.stringify(v);else if(H.isArray(v)&&Q2(v)||(H.isFileList(v)||H.endsWith(y,"[]"))&&(w=H.toArray(v)))return y=Tw(y),w.forEach(function(O,L){!(H.isUndefined(O)||O===null)&&e.append(o===!0?sy([y],L,i):o===null?y:y+"[]",c(O))}),!1}return _f(v)?!0:(e.append(sy(_,y,i),c(v)),!1)}const h=[],f=Object.assign(X2,{defaultVisitor:u,convertValue:c,isVisitable:_f});function g(v,y){if(!H.isUndefined(v)){if(h.indexOf(v)!==-1)throw Error("Circular reference detected in "+y.join("."));h.push(v),H.forEach(v,function(w,I){(!(H.isUndefined(w)||w===null)&&r.call(e,w,H.isString(I)?I.trim():I,y,f))===!0&&g(w,y?y.concat(I):[I])}),h.pop()}}if(!H.isObject(t))throw new TypeError("data must be an object");return g(t),e}function ry(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function Dp(t,e){this._pairs=[],t&&id(t,this,e)}const kw=Dp.prototype;kw.append=function(e,n){this._pairs.push([e,n])};kw.toString=function(e){const n=e?function(s){return e.call(this,s,ry)}:ry;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function J2(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Iw(t,e,n){if(!e)return t;const s=n&&n.encode||J2;H.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let i;if(r?i=r(e,n):i=H.isURLSearchParams(e)?e.toString():new Dp(e,n).toString(s),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class iy{constructor(){this.handlers=[]}use(e,n,s){return this.handlers.push({fulfilled:e,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){H.forEach(this.handlers,function(s){s!==null&&e(s)})}}const Sw={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Z2=typeof URLSearchParams<"u"?URLSearchParams:Dp,eP=typeof FormData<"u"?FormData:null,tP=typeof Blob<"u"?Blob:null,nP={isBrowser:!0,classes:{URLSearchParams:Z2,FormData:eP,Blob:tP},protocols:["http","https","file","blob","url","data"]},Mp=typeof window<"u"&&typeof document<"u",bf=typeof navigator=="object"&&navigator||void 0,sP=Mp&&(!bf||["ReactNative","NativeScript","NS"].indexOf(bf.product)<0),rP=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",iP=Mp&&window.location.href||"http://localhost",oP=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Mp,hasStandardBrowserEnv:sP,hasStandardBrowserWebWorkerEnv:rP,navigator:bf,origin:iP},Symbol.toStringTag,{value:"Module"})),an={...oP,...nP};function aP(t,e){return id(t,new an.classes.URLSearchParams,Object.assign({visitor:function(n,s,r,i){return an.isNode&&H.isBuffer(n)?(this.append(s,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function lP(t){return H.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function cP(t){const e={},n=Object.keys(t);let s;const r=n.length;let i;for(s=0;s<r;s++)i=n[s],e[i]=t[i];return e}function Aw(t){function e(n,s,r,i){let o=n[i++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=i>=n.length;return o=!o&&H.isArray(r)?r.length:o,l?(H.hasOwnProp(r,o)?r[o]=[r[o],s]:r[o]=s,!a):((!r[o]||!H.isObject(r[o]))&&(r[o]=[]),e(n,s,r[o],i)&&H.isArray(r[o])&&(r[o]=cP(r[o])),!a)}if(H.isFormData(t)&&H.isFunction(t.entries)){const n={};return H.forEachEntry(t,(s,r)=>{e(lP(s),r,n,0)}),n}return null}function uP(t,e,n){if(H.isString(t))try{return(e||JSON.parse)(t),H.trim(t)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(t)}const Tl={transitional:Sw,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const s=n.getContentType()||"",r=s.indexOf("application/json")>-1,i=H.isObject(e);if(i&&H.isHTMLForm(e)&&(e=new FormData(e)),H.isFormData(e))return r?JSON.stringify(Aw(e)):e;if(H.isArrayBuffer(e)||H.isBuffer(e)||H.isStream(e)||H.isFile(e)||H.isBlob(e)||H.isReadableStream(e))return e;if(H.isArrayBufferView(e))return e.buffer;if(H.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return aP(e,this.formSerializer).toString();if((a=H.isFileList(e))||s.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return id(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||r?(n.setContentType("application/json",!1),uP(e)):e}],transformResponse:[function(e){const n=this.transitional||Tl.transitional,s=n&&n.forcedJSONParsing,r=this.responseType==="json";if(H.isResponse(e)||H.isReadableStream(e))return e;if(e&&H.isString(e)&&(s&&!this.responseType||r)){const o=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?Fe.from(a,Fe.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:an.classes.FormData,Blob:an.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};H.forEach(["delete","get","head","post","put","patch"],t=>{Tl.headers[t]={}});const dP=H.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),hP=t=>{const e={};let n,s,r;return t&&t.split(`
`).forEach(function(o){r=o.indexOf(":"),n=o.substring(0,r).trim().toLowerCase(),s=o.substring(r+1).trim(),!(!n||e[n]&&dP[n])&&(n==="set-cookie"?e[n]?e[n].push(s):e[n]=[s]:e[n]=e[n]?e[n]+", "+s:s)}),e},oy=Symbol("internals");function ta(t){return t&&String(t).trim().toLowerCase()}function Rc(t){return t===!1||t==null?t:H.isArray(t)?t.map(Rc):String(t)}function fP(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(t);)e[s[1]]=s[2];return e}const pP=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function bh(t,e,n,s,r){if(H.isFunction(s))return s.call(this,e,n);if(r&&(e=n),!!H.isString(e)){if(H.isString(s))return e.indexOf(s)!==-1;if(H.isRegExp(s))return s.test(e)}}function gP(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,s)=>n.toUpperCase()+s)}function mP(t,e){const n=H.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(t,s+n,{value:function(r,i,o){return this[s].call(this,e,r,i,o)},configurable:!0})})}let _n=class{constructor(e){e&&this.set(e)}set(e,n,s){const r=this;function i(a,l,c){const u=ta(l);if(!u)throw new Error("header name must be a non-empty string");const h=H.findKey(r,u);(!h||r[h]===void 0||c===!0||c===void 0&&r[h]!==!1)&&(r[h||l]=Rc(a))}const o=(a,l)=>H.forEach(a,(c,u)=>i(c,u,l));if(H.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(H.isString(e)&&(e=e.trim())&&!pP(e))o(hP(e),n);else if(H.isObject(e)&&H.isIterable(e)){let a={},l,c;for(const u of e){if(!H.isArray(u))throw TypeError("Object iterator must return a key-value pair");a[c=u[0]]=(l=a[c])?H.isArray(l)?[...l,u[1]]:[l,u[1]]:u[1]}o(a,n)}else e!=null&&i(n,e,s);return this}get(e,n){if(e=ta(e),e){const s=H.findKey(this,e);if(s){const r=this[s];if(!n)return r;if(n===!0)return fP(r);if(H.isFunction(n))return n.call(this,r,s);if(H.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=ta(e),e){const s=H.findKey(this,e);return!!(s&&this[s]!==void 0&&(!n||bh(this,this[s],s,n)))}return!1}delete(e,n){const s=this;let r=!1;function i(o){if(o=ta(o),o){const a=H.findKey(s,o);a&&(!n||bh(s,s[a],a,n))&&(delete s[a],r=!0)}}return H.isArray(e)?e.forEach(i):i(e),r}clear(e){const n=Object.keys(this);let s=n.length,r=!1;for(;s--;){const i=n[s];(!e||bh(this,this[i],i,e,!0))&&(delete this[i],r=!0)}return r}normalize(e){const n=this,s={};return H.forEach(this,(r,i)=>{const o=H.findKey(s,i);if(o){n[o]=Rc(r),delete n[i];return}const a=e?gP(i):String(i).trim();a!==i&&delete n[i],n[a]=Rc(r),s[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return H.forEach(this,(s,r)=>{s!=null&&s!==!1&&(n[r]=e&&H.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const s=new this(e);return n.forEach(r=>s.set(r)),s}static accessor(e){const s=(this[oy]=this[oy]={accessors:{}}).accessors,r=this.prototype;function i(o){const a=ta(o);s[a]||(mP(r,o),s[a]=!0)}return H.isArray(e)?e.forEach(i):i(e),this}};_n.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);H.reduceDescriptors(_n.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(s){this[n]=s}}});H.freezeMethods(_n);function xh(t,e){const n=this||Tl,s=e||n,r=_n.from(s.headers);let i=s.data;return H.forEach(t,function(a){i=a.call(n,i,r.normalize(),e?e.status:void 0)}),r.normalize(),i}function Cw(t){return!!(t&&t.__CANCEL__)}function Ao(t,e,n){Fe.call(this,t??"canceled",Fe.ERR_CANCELED,e,n),this.name="CanceledError"}H.inherits(Ao,Fe,{__CANCEL__:!0});function Pw(t,e,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?t(n):e(new Fe("Request failed with status code "+n.status,[Fe.ERR_BAD_REQUEST,Fe.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function yP(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function vP(t,e){t=t||10;const n=new Array(t),s=new Array(t);let r=0,i=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=s[i];o||(o=c),n[r]=l,s[r]=c;let h=i,f=0;for(;h!==r;)f+=n[h++],h=h%t;if(r=(r+1)%t,r===i&&(i=(i+1)%t),c-o<e)return;const g=u&&c-u;return g?Math.round(f*1e3/g):void 0}}function _P(t,e){let n=0,s=1e3/e,r,i;const o=(c,u=Date.now())=>{n=u,r=null,i&&(clearTimeout(i),i=null),t.apply(null,c)};return[(...c)=>{const u=Date.now(),h=u-n;h>=s?o(c,u):(r=c,i||(i=setTimeout(()=>{i=null,o(r)},s-h)))},()=>r&&o(r)]}const lu=(t,e,n=3)=>{let s=0;const r=vP(50,250);return _P(i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,l=o-s,c=r(l),u=o<=a;s=o;const h={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-o)/c:void 0,event:i,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(h)},n)},ay=(t,e)=>{const n=t!=null;return[s=>e[0]({lengthComputable:n,total:t,loaded:s}),e[1]]},ly=t=>(...e)=>H.asap(()=>t(...e)),bP=an.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,an.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(an.origin),an.navigator&&/(msie|trident)/i.test(an.navigator.userAgent)):()=>!0,xP=an.hasStandardBrowserEnv?{write(t,e,n,s,r,i){const o=[t+"="+encodeURIComponent(e)];H.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),H.isString(s)&&o.push("path="+s),H.isString(r)&&o.push("domain="+r),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function wP(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function EP(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Rw(t,e,n){let s=!wP(e);return t&&(s||n==!1)?EP(t,e):e}const cy=t=>t instanceof _n?{...t}:t;function mi(t,e){e=e||{};const n={};function s(c,u,h,f){return H.isPlainObject(c)&&H.isPlainObject(u)?H.merge.call({caseless:f},c,u):H.isPlainObject(u)?H.merge({},u):H.isArray(u)?u.slice():u}function r(c,u,h,f){if(H.isUndefined(u)){if(!H.isUndefined(c))return s(void 0,c,h,f)}else return s(c,u,h,f)}function i(c,u){if(!H.isUndefined(u))return s(void 0,u)}function o(c,u){if(H.isUndefined(u)){if(!H.isUndefined(c))return s(void 0,c)}else return s(void 0,u)}function a(c,u,h){if(h in e)return s(c,u);if(h in t)return s(void 0,c)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u,h)=>r(cy(c),cy(u),h,!0)};return H.forEach(Object.keys(Object.assign({},t,e)),function(u){const h=l[u]||r,f=h(t[u],e[u],u);H.isUndefined(f)&&h!==a||(n[u]=f)}),n}const Ow=t=>{const e=mi({},t);let{data:n,withXSRFToken:s,xsrfHeaderName:r,xsrfCookieName:i,headers:o,auth:a}=e;e.headers=o=_n.from(o),e.url=Iw(Rw(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(H.isFormData(n)){if(an.hasStandardBrowserEnv||an.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...u]=l?l.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...u].join("; "))}}if(an.hasStandardBrowserEnv&&(s&&H.isFunction(s)&&(s=s(e)),s||s!==!1&&bP(e.url))){const c=r&&i&&xP.read(i);c&&o.set(r,c)}return e},TP=typeof XMLHttpRequest<"u",kP=TP&&function(t){return new Promise(function(n,s){const r=Ow(t);let i=r.data;const o=_n.from(r.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=r,u,h,f,g,v;function y(){g&&g(),v&&v(),r.cancelToken&&r.cancelToken.unsubscribe(u),r.signal&&r.signal.removeEventListener("abort",u)}let _=new XMLHttpRequest;_.open(r.method.toUpperCase(),r.url,!0),_.timeout=r.timeout;function w(){if(!_)return;const O=_n.from("getAllResponseHeaders"in _&&_.getAllResponseHeaders()),M={data:!a||a==="text"||a==="json"?_.responseText:_.response,status:_.status,statusText:_.statusText,headers:O,config:t,request:_};Pw(function(T){n(T),y()},function(T){s(T),y()},M),_=null}"onloadend"in _?_.onloadend=w:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(w)},_.onabort=function(){_&&(s(new Fe("Request aborted",Fe.ECONNABORTED,t,_)),_=null)},_.onerror=function(){s(new Fe("Network Error",Fe.ERR_NETWORK,t,_)),_=null},_.ontimeout=function(){let L=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const M=r.transitional||Sw;r.timeoutErrorMessage&&(L=r.timeoutErrorMessage),s(new Fe(L,M.clarifyTimeoutError?Fe.ETIMEDOUT:Fe.ECONNABORTED,t,_)),_=null},i===void 0&&o.setContentType(null),"setRequestHeader"in _&&H.forEach(o.toJSON(),function(L,M){_.setRequestHeader(M,L)}),H.isUndefined(r.withCredentials)||(_.withCredentials=!!r.withCredentials),a&&a!=="json"&&(_.responseType=r.responseType),c&&([f,v]=lu(c,!0),_.addEventListener("progress",f)),l&&_.upload&&([h,g]=lu(l),_.upload.addEventListener("progress",h),_.upload.addEventListener("loadend",g)),(r.cancelToken||r.signal)&&(u=O=>{_&&(s(!O||O.type?new Ao(null,t,_):O),_.abort(),_=null)},r.cancelToken&&r.cancelToken.subscribe(u),r.signal&&(r.signal.aborted?u():r.signal.addEventListener("abort",u)));const I=yP(r.url);if(I&&an.protocols.indexOf(I)===-1){s(new Fe("Unsupported protocol "+I+":",Fe.ERR_BAD_REQUEST,t));return}_.send(i||null)})},IP=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let s=new AbortController,r;const i=function(c){if(!r){r=!0,a();const u=c instanceof Error?c:this.reason;s.abort(u instanceof Fe?u:new Ao(u instanceof Error?u.message:u))}};let o=e&&setTimeout(()=>{o=null,i(new Fe(`timeout ${e} of ms exceeded`,Fe.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(i):c.removeEventListener("abort",i)}),t=null)};t.forEach(c=>c.addEventListener("abort",i));const{signal:l}=s;return l.unsubscribe=()=>H.asap(a),l}},SP=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let s=0,r;for(;s<n;)r=s+e,yield t.slice(s,r),s=r},AP=async function*(t,e){for await(const n of CP(t))yield*SP(n,e)},CP=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:s}=await e.read();if(n)break;yield s}}finally{await e.cancel()}},uy=(t,e,n,s)=>{const r=AP(t,e);let i=0,o,a=l=>{o||(o=!0,s&&s(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await r.next();if(c){a(),l.close();return}let h=u.byteLength;if(n){let f=i+=h;n(f)}l.enqueue(new Uint8Array(u))}catch(c){throw a(c),c}},cancel(l){return a(l),r.return()}},{highWaterMark:2})},od=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Dw=od&&typeof ReadableStream=="function",PP=od&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Mw=(t,...e)=>{try{return!!t(...e)}catch{return!1}},RP=Dw&&Mw(()=>{let t=!1;const e=new Request(an.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),dy=64*1024,xf=Dw&&Mw(()=>H.isReadableStream(new Response("").body)),cu={stream:xf&&(t=>t.body)};od&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!cu[e]&&(cu[e]=H.isFunction(t[e])?n=>n[e]():(n,s)=>{throw new Fe(`Response type '${e}' is not supported`,Fe.ERR_NOT_SUPPORT,s)})})})(new Response);const OP=async t=>{if(t==null)return 0;if(H.isBlob(t))return t.size;if(H.isSpecCompliantForm(t))return(await new Request(an.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(H.isArrayBufferView(t)||H.isArrayBuffer(t))return t.byteLength;if(H.isURLSearchParams(t)&&(t=t+""),H.isString(t))return(await PP(t)).byteLength},DP=async(t,e)=>{const n=H.toFiniteNumber(t.getContentLength());return n??OP(e)},MP=od&&(async t=>{let{url:e,method:n,data:s,signal:r,cancelToken:i,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:h="same-origin",fetchOptions:f}=Ow(t);c=c?(c+"").toLowerCase():"text";let g=IP([r,i&&i.toAbortSignal()],o),v;const y=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let _;try{if(l&&RP&&n!=="get"&&n!=="head"&&(_=await DP(u,s))!==0){let M=new Request(e,{method:"POST",body:s,duplex:"half"}),$;if(H.isFormData(s)&&($=M.headers.get("content-type"))&&u.setContentType($),M.body){const[T,b]=ay(_,lu(ly(l)));s=uy(M.body,dy,T,b)}}H.isString(h)||(h=h?"include":"omit");const w="credentials"in Request.prototype;v=new Request(e,{...f,signal:g,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:s,duplex:"half",credentials:w?h:void 0});let I=await fetch(v);const O=xf&&(c==="stream"||c==="response");if(xf&&(a||O&&y)){const M={};["status","statusText","headers"].forEach(E=>{M[E]=I[E]});const $=H.toFiniteNumber(I.headers.get("content-length")),[T,b]=a&&ay($,lu(ly(a),!0))||[];I=new Response(uy(I.body,dy,T,()=>{b&&b(),y&&y()}),M)}c=c||"text";let L=await cu[H.findKey(cu,c)||"text"](I,t);return!O&&y&&y(),await new Promise((M,$)=>{Pw(M,$,{data:L,headers:_n.from(I.headers),status:I.status,statusText:I.statusText,config:t,request:v})})}catch(w){throw y&&y(),w&&w.name==="TypeError"&&/Load failed|fetch/i.test(w.message)?Object.assign(new Fe("Network Error",Fe.ERR_NETWORK,t,v),{cause:w.cause||w}):Fe.from(w,w&&w.code,t,v)}}),wf={http:Y2,xhr:kP,fetch:MP};H.forEach(wf,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const hy=t=>`- ${t}`,NP=t=>H.isFunction(t)||t===null||t===!1,Nw={getAdapter:t=>{t=H.isArray(t)?t:[t];const{length:e}=t;let n,s;const r={};for(let i=0;i<e;i++){n=t[i];let o;if(s=n,!NP(n)&&(s=wf[(o=String(n)).toLowerCase()],s===void 0))throw new Fe(`Unknown adapter '${o}'`);if(s)break;r[o||"#"+i]=s}if(!s){const i=Object.entries(r).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(hy).join(`
`):" "+hy(i[0]):"as no adapter specified";throw new Fe("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return s},adapters:wf};function wh(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ao(null,t)}function fy(t){return wh(t),t.headers=_n.from(t.headers),t.data=xh.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Nw.getAdapter(t.adapter||Tl.adapter)(t).then(function(s){return wh(t),s.data=xh.call(t,t.transformResponse,s),s.headers=_n.from(s.headers),s},function(s){return Cw(s)||(wh(t),s&&s.response&&(s.response.data=xh.call(t,t.transformResponse,s.response),s.response.headers=_n.from(s.response.headers))),Promise.reject(s)})}const Lw="1.9.0",ad={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{ad[t]=function(s){return typeof s===t||"a"+(e<1?"n ":" ")+t}});const py={};ad.transitional=function(e,n,s){function r(i,o){return"[Axios v"+Lw+"] Transitional option '"+i+"'"+o+(s?". "+s:"")}return(i,o,a)=>{if(e===!1)throw new Fe(r(o," has been removed"+(n?" in "+n:"")),Fe.ERR_DEPRECATED);return n&&!py[o]&&(py[o]=!0,console.warn(r(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,a):!0}};ad.spelling=function(e){return(n,s)=>(console.warn(`${s} is likely a misspelling of ${e}`),!0)};function LP(t,e,n){if(typeof t!="object")throw new Fe("options must be an object",Fe.ERR_BAD_OPTION_VALUE);const s=Object.keys(t);let r=s.length;for(;r-- >0;){const i=s[r],o=e[i];if(o){const a=t[i],l=a===void 0||o(a,i,t);if(l!==!0)throw new Fe("option "+i+" must be "+l,Fe.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Fe("Unknown option "+i,Fe.ERR_BAD_OPTION)}}const Oc={assertOptions:LP,validators:ad},ts=Oc.validators;let ci=class{constructor(e){this.defaults=e||{},this.interceptors={request:new iy,response:new iy}}async request(e,n){try{return await this._request(e,n)}catch(s){if(s instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const i=r.stack?r.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=mi(this.defaults,n);const{transitional:s,paramsSerializer:r,headers:i}=n;s!==void 0&&Oc.assertOptions(s,{silentJSONParsing:ts.transitional(ts.boolean),forcedJSONParsing:ts.transitional(ts.boolean),clarifyTimeoutError:ts.transitional(ts.boolean)},!1),r!=null&&(H.isFunction(r)?n.paramsSerializer={serialize:r}:Oc.assertOptions(r,{encode:ts.function,serialize:ts.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Oc.assertOptions(n,{baseUrl:ts.spelling("baseURL"),withXsrfToken:ts.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&H.merge(i.common,i[n.method]);i&&H.forEach(["delete","get","head","post","put","patch","common"],v=>{delete i[v]}),n.headers=_n.concat(o,i);const a=[];let l=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(n)===!1||(l=l&&y.synchronous,a.unshift(y.fulfilled,y.rejected))});const c=[];this.interceptors.response.forEach(function(y){c.push(y.fulfilled,y.rejected)});let u,h=0,f;if(!l){const v=[fy.bind(this),void 0];for(v.unshift.apply(v,a),v.push.apply(v,c),f=v.length,u=Promise.resolve(n);h<f;)u=u.then(v[h++],v[h++]);return u}f=a.length;let g=n;for(h=0;h<f;){const v=a[h++],y=a[h++];try{g=v(g)}catch(_){y.call(this,_);break}}try{u=fy.call(this,g)}catch(v){return Promise.reject(v)}for(h=0,f=c.length;h<f;)u=u.then(c[h++],c[h++]);return u}getUri(e){e=mi(this.defaults,e);const n=Rw(e.baseURL,e.url,e.allowAbsoluteUrls);return Iw(n,e.params,e.paramsSerializer)}};H.forEach(["delete","get","head","options"],function(e){ci.prototype[e]=function(n,s){return this.request(mi(s||{},{method:e,url:n,data:(s||{}).data}))}});H.forEach(["post","put","patch"],function(e){function n(s){return function(i,o,a){return this.request(mi(a||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}ci.prototype[e]=n(),ci.prototype[e+"Form"]=n(!0)});let VP=class Vw{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const s=this;this.promise.then(r=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](r);s._listeners=null}),this.promise.then=r=>{let i;const o=new Promise(a=>{s.subscribe(a),i=a}).then(r);return o.cancel=function(){s.unsubscribe(i)},o},e(function(i,o,a){s.reason||(s.reason=new Ao(i,o,a),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=s=>{e.abort(s)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new Vw(function(r){e=r}),cancel:e}}};function $P(t){return function(n){return t.apply(null,n)}}function FP(t){return H.isObject(t)&&t.isAxiosError===!0}const Ef={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ef).forEach(([t,e])=>{Ef[e]=t});function $w(t){const e=new ci(t),n=pw(ci.prototype.request,e);return H.extend(n,ci.prototype,e,{allOwnKeys:!0}),H.extend(n,e,null,{allOwnKeys:!0}),n.create=function(r){return $w(mi(t,r))},n}const It=$w(Tl);It.Axios=ci;It.CanceledError=Ao;It.CancelToken=VP;It.isCancel=Cw;It.VERSION=Lw;It.toFormData=id;It.AxiosError=Fe;It.Cancel=It.CanceledError;It.all=function(e){return Promise.all(e)};It.spread=$P;It.isAxiosError=FP;It.mergeConfig=mi;It.AxiosHeaders=_n;It.formToJSON=t=>Aw(H.isHTMLForm(t)?new FormData(t):t);It.getAdapter=Nw.getAdapter;It.HttpStatusCode=Ef;It.default=It;const{Axios:HK,AxiosError:qK,CanceledError:WK,isCancel:KK,CancelToken:GK,VERSION:YK,all:QK,Cancel:XK,isAxiosError:JK,spread:ZK,toFormData:eG,AxiosHeaders:tG,HttpStatusCode:nG,formToJSON:sG,getAdapter:rG,mergeConfig:iG}=It,UP=()=>{};var gy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},BP=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(l>>10)),e[s++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Uw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,c=l?t[r+2]:0,u=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(f=64)),s.push(n[u],n[h],n[f],n[g])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Fw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):BP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const h=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||a==null||c==null||h==null)throw new jP;const f=i<<2|a>>4;if(s.push(f),c!==64){const g=a<<4&240|c>>2;if(s.push(g),h!==64){const v=c<<6&192|h;s.push(v)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class jP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zP=function(t){const e=Fw(t);return Uw.encodeByteArray(e,!0)},uu=function(t){return zP(t).replace(/\./g,"")},Bw=function(t){try{return Uw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qP=()=>HP().__FIREBASE_DEFAULTS__,WP=()=>{if(typeof process>"u"||typeof gy>"u")return;const t=gy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},KP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Bw(t[1]);return e&&JSON.parse(e)},ld=()=>{try{return UP()||qP()||WP()||KP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},jw=t=>{var e,n;return(n=(e=ld())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},GP=t=>{const e=jw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},zw=()=>{var t;return(t=ld())===null||t===void 0?void 0:t.config},Hw=t=>{var e;return(e=ld())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kl(t){return t.endsWith(".cloudworkstations.dev")}async function qw(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[uu(JSON.stringify(n)),uu(JSON.stringify(o)),""].join(".")}const Ca={};function XP(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ca))Ca[e]?t.emulator.push(e):t.prod.push(e);return t}function JP(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let my=!1;function Ww(t,e){if(typeof window>"u"||typeof document>"u"||!kl(window.location.host)||Ca[t]===e||Ca[t]||my)return;Ca[t]=e;function n(f){return`__firebase__banner__${f}`}const s="__firebase__banner",i=XP().prod.length>0;function o(){const f=document.getElementById(s);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,g){f.setAttribute("width","24"),f.setAttribute("id",g),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{my=!0,o()},f}function u(f,g){f.setAttribute("id",g),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=JP(s),g=n("text"),v=document.getElementById(g)||document.createElement("span"),y=n("learnmore"),_=document.getElementById(y)||document.createElement("a"),w=n("preprendIcon"),I=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const O=f.element;a(O),u(_,y);const L=c();l(I,w),O.append(I,v,_,L),document.body.appendChild(O)}i?(v.innerText="Preview backend disconnected.",I.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(I.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ZP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dn())}function eR(){var t;const e=(t=ld())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function tR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function nR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function sR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rR(){const t=dn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function iR(){return!eR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Kw(){try{return typeof indexedDB=="object"}catch{return!1}}function Gw(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var i;e(((i=r.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function oR(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR="FirebaseError";class ys extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=aR,Object.setPrototypeOf(this,ys.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ai.prototype.create)}}class Ai{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?lR(i,s):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new ys(r,a,s)}}function lR(t,e){return t.replace(cR,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const cR=/\{\$([^}]+)}/g;function uR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function yi(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(yy(i)&&yy(o)){if(!yi(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function yy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Il(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function la(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[r,i]=s.split("=");e[decodeURIComponent(r)]=decodeURIComponent(i)}}),e}function ca(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function dR(t,e){const n=new hR(t,e);return n.subscribe.bind(n)}class hR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");fR(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=Eh),r.error===void 0&&(r.error=Eh),r.complete===void 0&&(r.complete=Eh);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Eh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(t){return t&&t._delegate?t._delegate:t}class Xn{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new YP;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mR(e))try{this.getOrInitializeService({instanceIdentifier:Jr})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=Jr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Jr){return this.instances.has(e)}getOptions(e=Jr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);s===a&&o.resolve(r)}return r}onInit(e,n){var s;const r=this.normalizeInstanceIdentifier(n),i=(s=this.onInitCallbacks.get(r))!==null&&s!==void 0?s:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:gR(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Jr){return this.component?this.component.multipleInstances?e:Jr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function gR(t){return t===Jr?void 0:t}function mR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new pR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(He||(He={}));const vR={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},_R=He.INFO,bR={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},xR=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=bR[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Np{constructor(e){this.name=e,this._logLevel=_R,this._logHandler=xR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}}const wR=(t,e)=>e.some(n=>t instanceof n);let vy,_y;function ER(){return vy||(vy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TR(){return _y||(_y=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Yw=new WeakMap,Tf=new WeakMap,Qw=new WeakMap,Th=new WeakMap,Lp=new WeakMap;function kR(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n($s(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Yw.set(n,t)}).catch(()=>{}),Lp.set(e,t),e}function IR(t){if(Tf.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Tf.set(t,e)}let kf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Tf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Qw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $s(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function SR(t){kf=t(kf)}function AR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(kh(this),e,...n);return Qw.set(s,e.sort?e.sort():[e]),$s(s)}:TR().includes(t)?function(...e){return t.apply(kh(this),e),$s(Yw.get(this))}:function(...e){return $s(t.apply(kh(this),e))}}function CR(t){return typeof t=="function"?AR(t):(t instanceof IDBTransaction&&IR(t),wR(t,ER())?new Proxy(t,kf):t)}function $s(t){if(t instanceof IDBRequest)return kR(t);if(Th.has(t))return Th.get(t);const e=CR(t);return e!==t&&(Th.set(t,e),Lp.set(e,t)),e}const kh=t=>Lp.get(t);function cd(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),a=$s(o);return s&&o.addEventListener("upgradeneeded",l=>{s($s(o.result),l.oldVersion,l.newVersion,$s(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}function Ih(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",s=>e(s.oldVersion,s)),$s(n).then(()=>{})}const PR=["get","getKey","getAll","getAllKeys","count"],RR=["put","add","delete","clear"],Sh=new Map;function by(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Sh.get(e))return Sh.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=RR.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||PR.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return s&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),r&&l.done]))[0]};return Sh.set(e,i),i}SR(t=>({...t,get:(e,n,s)=>by(e,n)||t.get(e,n,s),has:(e,n)=>!!by(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(DR(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function DR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const If="@firebase/app",xy="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs=new Np("@firebase/app"),MR="@firebase/app-compat",NR="@firebase/analytics-compat",LR="@firebase/analytics",VR="@firebase/app-check-compat",$R="@firebase/app-check",FR="@firebase/auth",UR="@firebase/auth-compat",BR="@firebase/database",jR="@firebase/data-connect",zR="@firebase/database-compat",HR="@firebase/functions",qR="@firebase/functions-compat",WR="@firebase/installations",KR="@firebase/installations-compat",GR="@firebase/messaging",YR="@firebase/messaging-compat",QR="@firebase/performance",XR="@firebase/performance-compat",JR="@firebase/remote-config",ZR="@firebase/remote-config-compat",eO="@firebase/storage",tO="@firebase/storage-compat",nO="@firebase/firestore",sO="@firebase/ai",rO="@firebase/firestore-compat",iO="firebase",oO="11.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf="[DEFAULT]",aO={[If]:"fire-core",[MR]:"fire-core-compat",[LR]:"fire-analytics",[NR]:"fire-analytics-compat",[$R]:"fire-app-check",[VR]:"fire-app-check-compat",[FR]:"fire-auth",[UR]:"fire-auth-compat",[BR]:"fire-rtdb",[jR]:"fire-data-connect",[zR]:"fire-rtdb-compat",[HR]:"fire-fn",[qR]:"fire-fn-compat",[WR]:"fire-iid",[KR]:"fire-iid-compat",[GR]:"fire-fcm",[YR]:"fire-fcm-compat",[QR]:"fire-perf",[XR]:"fire-perf-compat",[JR]:"fire-rc",[ZR]:"fire-rc-compat",[eO]:"fire-gcs",[tO]:"fire-gcs-compat",[nO]:"fire-fst",[rO]:"fire-fst-compat",[sO]:"fire-vertex","fire-js":"fire-js",[iO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const du=new Map,lO=new Map,Af=new Map;function wy(t,e){try{t.container.addComponent(e)}catch(n){Hs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function gs(t){const e=t.name;if(Af.has(e))return Hs.debug(`There were multiple attempts to register component ${e}.`),!1;Af.set(e,t);for(const n of du.values())wy(n,t);for(const n of lO.values())wy(n,t);return!0}function Co(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function kn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xr=new Ai("app","Firebase",cO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Xn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po=oO;function ud(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Sf,automaticDataCollectionEnabled:!0},e),r=s.name;if(typeof r!="string"||!r)throw xr.create("bad-app-name",{appName:String(r)});if(n||(n=zw()),!n)throw xr.create("no-options");const i=du.get(r);if(i){if(yi(n,i.options)&&yi(s,i.config))return i;throw xr.create("duplicate-app",{appName:r})}const o=new yR(r);for(const l of Af.values())o.addComponent(l);const a=new uO(n,s,o);return du.set(r,a),a}function Vp(t=Sf){const e=du.get(t);if(!e&&t===Sf&&zw())return ud();if(!e)throw xr.create("no-app",{appName:t});return e}function $n(t,e,n){var s;let r=(s=aO[t])!==null&&s!==void 0?s:t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hs.warn(a.join(" "));return}gs(new Xn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO="firebase-heartbeat-database",hO=1,Xa="firebase-heartbeat-store";let Ah=null;function Xw(){return Ah||(Ah=cd(dO,hO,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Xa)}catch(n){console.warn(n)}}}}).catch(t=>{throw xr.create("idb-open",{originalErrorMessage:t.message})})),Ah}async function fO(t){try{const n=(await Xw()).transaction(Xa),s=await n.objectStore(Xa).get(Jw(t));return await n.done,s}catch(e){if(e instanceof ys)Hs.warn(e.message);else{const n=xr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Hs.warn(n.message)}}}async function Ey(t,e){try{const s=(await Xw()).transaction(Xa,"readwrite");await s.objectStore(Xa).put(e,Jw(t)),await s.done}catch(n){if(n instanceof ys)Hs.warn(n.message);else{const s=xr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Hs.warn(s.message)}}}function Jw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pO=1024,gO=30;class mO{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new vO(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Ty();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats.length>gO){const o=_O(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Hs.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ty(),{heartbeatsToSend:s,unsentEntries:r}=yO(this._heartbeatsCache.heartbeats),i=uu(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Hs.warn(n),""}}}function Ty(){return new Date().toISOString().substring(0,10)}function yO(t,e=pO){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),ky(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),ky(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class vO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Kw()?Gw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await fO(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Ey(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Ey(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function ky(t){return uu(JSON.stringify({version:2,heartbeats:t})).length}function _O(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bO(t){gs(new Xn("platform-logger",e=>new OR(e),"PRIVATE")),gs(new Xn("heartbeat",e=>new mO(e),"PRIVATE")),$n(If,xy,t),$n(If,xy,"esm2017"),$n("fire-js","")}bO("");var xO="firebase",wO="11.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$n(xO,wO,"app");const Zw="@firebase/installations",$p="0.6.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1=1e4,t1=`w:${$p}`,n1="FIS_v2",EO="https://firebaseinstallations.googleapis.com/v1",TO=60*60*1e3,kO="installations",IO="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},vi=new Ai(kO,IO,SO);function s1(t){return t instanceof ys&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r1({projectId:t}){return`${EO}/projects/${t}/installations`}function i1(t){return{token:t.token,requestStatus:2,expiresIn:CO(t.expiresIn),creationTime:Date.now()}}async function o1(t,e){const s=(await e.json()).error;return vi.create("request-failed",{requestName:t,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function a1({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function AO(t,{refreshToken:e}){const n=a1(t);return n.append("Authorization",PO(e)),n}async function l1(t){const e=await t();return e.status>=500&&e.status<600?t():e}function CO(t){return Number(t.replace("s","000"))}function PO(t){return`${n1} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RO({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const s=r1(t),r=a1(t),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&r.append("x-firebase-client",c)}const o={fid:n,authVersion:n1,appId:t.appId,sdkVersion:t1},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await l1(()=>fetch(s,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:i1(c.authToken)}}else throw await o1("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OO(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO=/^[cdef][\w-]{21}$/,Cf="";function MO(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=NO(t);return DO.test(n)?n:Cf}catch{return Cf}}function NO(t){return OO(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dd(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1=new Map;function d1(t,e){const n=dd(t);h1(n,e),LO(n,e)}function h1(t,e){const n=u1.get(t);if(n)for(const s of n)s(e)}function LO(t,e){const n=VO();n&&n.postMessage({key:t,fid:e}),$O()}let si=null;function VO(){return!si&&"BroadcastChannel"in self&&(si=new BroadcastChannel("[Firebase] FID Change"),si.onmessage=t=>{h1(t.data.key,t.data.fid)}),si}function $O(){u1.size===0&&si&&(si.close(),si=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO="firebase-installations-database",UO=1,_i="firebase-installations-store";let Ch=null;function Fp(){return Ch||(Ch=cd(FO,UO,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(_i)}}})),Ch}async function hu(t,e){const n=dd(t),r=(await Fp()).transaction(_i,"readwrite"),i=r.objectStore(_i),o=await i.get(n);return await i.put(e,n),await r.done,(!o||o.fid!==e.fid)&&d1(t,e.fid),e}async function f1(t){const e=dd(t),s=(await Fp()).transaction(_i,"readwrite");await s.objectStore(_i).delete(e),await s.done}async function hd(t,e){const n=dd(t),r=(await Fp()).transaction(_i,"readwrite"),i=r.objectStore(_i),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await r.done,a&&(!o||o.fid!==a.fid)&&d1(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Up(t){let e;const n=await hd(t.appConfig,s=>{const r=BO(s),i=jO(t,r);return e=i.registrationPromise,i.installationEntry});return n.fid===Cf?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function BO(t){const e=t||{fid:MO(),registrationStatus:0};return p1(e)}function jO(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(vi.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=zO(t,n);return{installationEntry:n,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:HO(t)}:{installationEntry:e}}async function zO(t,e){try{const n=await RO(t,e);return hu(t.appConfig,n)}catch(n){throw s1(n)&&n.customData.serverCode===409?await f1(t.appConfig):await hu(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function HO(t){let e=await Iy(t.appConfig);for(;e.registrationStatus===1;)await c1(100),e=await Iy(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:s}=await Up(t);return s||n}return e}function Iy(t){return hd(t,e=>{if(!e)throw vi.create("installation-not-found");return p1(e)})}function p1(t){return qO(t)?{fid:t.fid,registrationStatus:0}:t}function qO(t){return t.registrationStatus===1&&t.registrationTime+e1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WO({appConfig:t,heartbeatServiceProvider:e},n){const s=KO(t,n),r=AO(t,n),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&r.append("x-firebase-client",c)}const o={installation:{sdkVersion:t1,appId:t.appId}},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await l1(()=>fetch(s,a));if(l.ok){const c=await l.json();return i1(c)}else throw await o1("Generate Auth Token",l)}function KO(t,{fid:e}){return`${r1(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bp(t,e=!1){let n;const s=await hd(t.appConfig,i=>{if(!g1(i))throw vi.create("not-registered");const o=i.authToken;if(!e&&QO(o))return i;if(o.requestStatus===1)return n=GO(t,e),i;{if(!navigator.onLine)throw vi.create("app-offline");const a=JO(i);return n=YO(t,a),a}});return n?await n:s.authToken}async function GO(t,e){let n=await Sy(t.appConfig);for(;n.authToken.requestStatus===1;)await c1(100),n=await Sy(t.appConfig);const s=n.authToken;return s.requestStatus===0?Bp(t,e):s}function Sy(t){return hd(t,e=>{if(!g1(e))throw vi.create("not-registered");const n=e.authToken;return ZO(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function YO(t,e){try{const n=await WO(t,e),s=Object.assign(Object.assign({},e),{authToken:n});return await hu(t.appConfig,s),n}catch(n){if(s1(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await f1(t.appConfig);else{const s=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await hu(t.appConfig,s)}throw n}}function g1(t){return t!==void 0&&t.registrationStatus===2}function QO(t){return t.requestStatus===2&&!XO(t)}function XO(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+TO}function JO(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function ZO(t){return t.requestStatus===1&&t.requestTime+e1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eD(t){const e=t,{installationEntry:n,registrationPromise:s}=await Up(e);return s?s.catch(console.error):Bp(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tD(t,e=!1){const n=t;return await nD(n),(await Bp(n,e)).token}async function nD(t){const{registrationPromise:e}=await Up(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sD(t){if(!t||!t.options)throw Ph("App Configuration");if(!t.name)throw Ph("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Ph(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Ph(t){return vi.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1="installations",rD="installations-internal",iD=t=>{const e=t.getProvider("app").getImmediate(),n=sD(e),s=Co(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},oD=t=>{const e=t.getProvider("app").getImmediate(),n=Co(e,m1).getImmediate();return{getId:()=>eD(n),getToken:r=>tD(n,r)}};function aD(){gs(new Xn(m1,iD,"PUBLIC")),gs(new Xn(rD,oD,"PRIVATE"))}aD();$n(Zw,$p);$n(Zw,$p,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD="/firebase-messaging-sw.js",cD="/firebase-cloud-messaging-push-scope",y1="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",uD="https://fcmregistrations.googleapis.com/v1",v1="google.c.a.c_id",dD="google.c.a.c_l",hD="google.c.a.ts",fD="google.c.a.e",Ay=1e4;var Cy;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(Cy||(Cy={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Ja;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(Ja||(Ja={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function pD(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),s=atob(n),r=new Uint8Array(s.length);for(let i=0;i<s.length;++i)r[i]=s.charCodeAt(i);return r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rh="fcm_token_details_db",gD=5,Py="fcm_token_object_Store";async function mD(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(i=>i.name).includes(Rh))return null;let e=null;return(await cd(Rh,gD,{upgrade:async(s,r,i,o)=>{var a;if(r<2||!s.objectStoreNames.contains(Py))return;const l=o.objectStore(Py),c=await l.index("fcmSenderId").get(t);if(await l.clear(),!!c){if(r===2){const u=c;if(!u.auth||!u.p256dh||!u.endpoint)return;e={token:u.fcmToken,createTime:(a=u.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:u.auth,p256dh:u.p256dh,endpoint:u.endpoint,swScope:u.swScope,vapidKey:typeof u.vapidKey=="string"?u.vapidKey:Ss(u.vapidKey)}}}else if(r===3){const u=c;e={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:Ss(u.auth),p256dh:Ss(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:Ss(u.vapidKey)}}}else if(r===4){const u=c;e={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:Ss(u.auth),p256dh:Ss(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:Ss(u.vapidKey)}}}}}})).close(),await Ih(Rh),await Ih("fcm_vapid_details_db"),await Ih("undefined"),yD(e)?e:null}function yD(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD="firebase-messaging-database",_D=1,Za="firebase-messaging-store";let Oh=null;function _1(){return Oh||(Oh=cd(vD,_D,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Za)}}})),Oh}async function bD(t){const e=b1(t),s=await(await _1()).transaction(Za).objectStore(Za).get(e);if(s)return s;{const r=await mD(t.appConfig.senderId);if(r)return await jp(t,r),r}}async function jp(t,e){const n=b1(t),r=(await _1()).transaction(Za,"readwrite");return await r.objectStore(Za).put(e,n),await r.done,e}function b1({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},un=new Ai("messaging","Messaging",xD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wD(t,e){const n=await Hp(t),s=x1(e),r={method:"POST",headers:n,body:JSON.stringify(s)};let i;try{i=await(await fetch(zp(t.appConfig),r)).json()}catch(o){throw un.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(i.error){const o=i.error.message;throw un.create("token-subscribe-failed",{errorInfo:o})}if(!i.token)throw un.create("token-subscribe-no-token");return i.token}async function ED(t,e){const n=await Hp(t),s=x1(e.subscriptionOptions),r={method:"PATCH",headers:n,body:JSON.stringify(s)};let i;try{i=await(await fetch(`${zp(t.appConfig)}/${e.token}`,r)).json()}catch(o){throw un.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(i.error){const o=i.error.message;throw un.create("token-update-failed",{errorInfo:o})}if(!i.token)throw un.create("token-update-no-token");return i.token}async function TD(t,e){const s={method:"DELETE",headers:await Hp(t)};try{const i=await(await fetch(`${zp(t.appConfig)}/${e}`,s)).json();if(i.error){const o=i.error.message;throw un.create("token-unsubscribe-failed",{errorInfo:o})}}catch(r){throw un.create("token-unsubscribe-failed",{errorInfo:r==null?void 0:r.toString()})}}function zp({projectId:t}){return`${uD}/projects/${t}/registrations`}async function Hp({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function x1({p256dh:t,auth:e,endpoint:n,vapidKey:s}){const r={web:{endpoint:n,auth:e,p256dh:t}};return s!==y1&&(r.web.applicationPubKey=s),r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD=7*24*60*60*1e3;async function ID(t){const e=await AD(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Ss(e.getKey("auth")),p256dh:Ss(e.getKey("p256dh"))},s=await bD(t.firebaseDependencies);if(s){if(CD(s.subscriptionOptions,n))return Date.now()>=s.createTime+kD?SD(t,{token:s.token,createTime:Date.now(),subscriptionOptions:n}):s.token;try{await TD(t.firebaseDependencies,s.token)}catch(r){console.warn(r)}return Ry(t.firebaseDependencies,n)}else return Ry(t.firebaseDependencies,n)}async function SD(t,e){try{const n=await ED(t.firebaseDependencies,e),s=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await jp(t.firebaseDependencies,s),n}catch(n){throw n}}async function Ry(t,e){const s={token:await wD(t,e),createTime:Date.now(),subscriptionOptions:e};return await jp(t,s),s.token}async function AD(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:pD(e)})}function CD(t,e){const n=e.vapidKey===t.vapidKey,s=e.endpoint===t.endpoint,r=e.auth===t.auth,i=e.p256dh===t.p256dh;return n&&s&&r&&i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return PD(e,t),RD(e,t),OD(e,t),e}function PD(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const s=e.notification.body;s&&(t.notification.body=s);const r=e.notification.image;r&&(t.notification.image=r);const i=e.notification.icon;i&&(t.notification.icon=i)}function RD(t,e){e.data&&(t.data=e.data)}function OD(t,e){var n,s,r,i,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const a=(r=(s=e.fcmOptions)===null||s===void 0?void 0:s.link)!==null&&r!==void 0?r:(i=e.notification)===null||i===void 0?void 0:i.click_action;a&&(t.fcmOptions.link=a);const l=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;l&&(t.fcmOptions.analyticsLabel=l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DD(t){return typeof t=="object"&&!!t&&v1 in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MD(t){if(!t||!t.options)throw Dh("App Configuration Object");if(!t.name)throw Dh("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const s of e)if(!n[s])throw Dh(s);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function Dh(t){return un.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e,n,s){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=MD(e);this.firebaseDependencies={app:e,appConfig:r,installations:n,analyticsProvider:s}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LD(t){try{t.swRegistration=await navigator.serviceWorker.register(lD,{scope:cD}),t.swRegistration.update().catch(()=>{}),await VD(t.swRegistration)}catch(e){throw un.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}async function VD(t){return new Promise((e,n)=>{const s=setTimeout(()=>n(new Error(`Service worker not registered after ${Ay} ms`)),Ay),r=t.installing||t.waiting;t.active?(clearTimeout(s),e()):r?r.onstatechange=i=>{var o;((o=i.target)===null||o===void 0?void 0:o.state)==="activated"&&(r.onstatechange=null,clearTimeout(s),e())}:(clearTimeout(s),n(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $D(t,e){if(!e&&!t.swRegistration&&await LD(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw un.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FD(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=y1)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w1(t,e){if(!navigator)throw un.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw un.create("permission-blocked");return await FD(t,e==null?void 0:e.vapidKey),await $D(t,e==null?void 0:e.serviceWorkerRegistration),ID(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UD(t,e,n){const s=BD(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(s,{message_id:n[v1],message_name:n[dD],message_time:n[hD],message_device_time:Math.floor(Date.now()/1e3)})}function BD(t){switch(t){case Ja.NOTIFICATION_CLICKED:return"notification_open";case Ja.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jD(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Ja.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(Oy(n)):t.onMessageHandler.next(Oy(n)));const s=n.data;DD(s)&&s[fD]==="1"&&await UD(t,n.messageType,s)}const Dy="@firebase/messaging",My="0.12.21";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zD=t=>{const e=new ND(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>jD(e,n)),e},HD=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:s=>w1(e,s)}};function qD(){gs(new Xn("messaging",zD,"PUBLIC")),gs(new Xn("messaging-internal",HD,"PRIVATE")),$n(Dy,My),$n(Dy,My,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E1(){try{await Gw()}catch{return!1}return typeof window<"u"&&Kw()&&oR()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WD(t,e){if(!navigator)throw un.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KD(t=Vp()){return E1().then(e=>{if(!e)throw un.create("unsupported-browser")},e=>{throw un.create("indexed-db-unsupported")}),Co(St(t),"messaging").getImmediate()}async function GD(t,e){return t=St(t),w1(t,e)}function YD(t,e){return t=St(t),WD(t,e)}qD();function qp(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n}function T1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const QD=T1,k1=new Ai("auth","Firebase",T1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fu=new Np("@firebase/auth");function XD(t,...e){fu.logLevel<=He.WARN&&fu.warn(`Auth (${Po}): ${t}`,...e)}function Dc(t,...e){fu.logLevel<=He.ERROR&&fu.error(`Auth (${Po}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(t,...e){throw Kp(t,...e)}function Kn(t,...e){return Kp(t,...e)}function Wp(t,e,n){const s=Object.assign(Object.assign({},QD()),{[e]:n});return new Ai("auth","Firebase",s).create(e,{appName:t.name})}function Fs(t){return Wp(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function JD(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Un(t,"argument-error"),Wp(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Kp(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return k1.create(t,...e)}function Re(t,e,...n){if(!t)throw Kp(e,...n)}function Ms(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Dc(e),new Error(e)}function qs(t,e){t||Ms(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function ZD(){return Ny()==="http:"||Ny()==="https:"}function Ny(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ZD()||nR()||"connection"in navigator)?navigator.onLine:!0}function tM(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e,n){this.shortDelay=e,this.longDelay=n,qs(n>e,"Short delay should be less than long delay!"),this.isMobile=ZP()||sR()}get(){return eM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gp(t,e){qs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ms("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ms("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ms("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],rM=new Sl(3e4,6e4);function Lr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Vr(t,e,n,s,r={}){return S1(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const a=Il(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return tR()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&kl(t.emulatorConfig.host)&&(c.credentials="include"),I1.fetch()(await A1(t,t.config.apiHost,n,a),c)})}async function S1(t,e,n){t._canInitEmulator=!1;const s=Object.assign(Object.assign({},nM),e);try{const r=new oM(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw nc(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw nc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw nc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw nc(t,"user-disabled",o);const u=s[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Wp(t,u,c);Un(t,u)}}catch(r){if(r instanceof ys)throw r;Un(t,"network-request-failed",{message:String(r)})}}async function Al(t,e,n,s,r={}){const i=await Vr(t,e,n,s,r);return"mfaPendingCredential"in i&&Un(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function A1(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?Gp(t.config,r):`${t.config.apiScheme}://${r}`;return sM.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function iM(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class oM{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Kn(this.auth,"network-request-failed")),rM.get())})}}function nc(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=Kn(t,e,s);return r.customData._tokenResponse=n,r}function Ly(t){return t!==void 0&&t.enterprise!==void 0}class aM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return iM(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function lM(t,e){return Vr(t,"GET","/v2/recaptchaConfig",Lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cM(t,e){return Vr(t,"POST","/v1/accounts:delete",e)}async function pu(t,e){return Vr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function uM(t,e=!1){const n=St(t),s=await n.getIdToken(e),r=Yp(s);Re(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:r,token:s,authTime:Pa(Mh(r.auth_time)),issuedAtTime:Pa(Mh(r.iat)),expirationTime:Pa(Mh(r.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Mh(t){return Number(t)*1e3}function Yp(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Dc("JWT malformed, contained fewer than 3 sections"),null;try{const r=Bw(n);return r?JSON.parse(r):(Dc("Failed to decode base64 JWT payload"),null)}catch(r){return Dc("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Vy(t){const e=Yp(t);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function el(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof ys&&dM(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function dM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pa(this.lastLoginAt),this.creationTime=Pa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gu(t){var e;const n=t.auth,s=await t.getIdToken(),r=await el(t,pu(n,{idToken:s}));Re(r==null?void 0:r.users.length,n,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?C1(i.providerUserInfo):[],a=pM(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Rf(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function fM(t){const e=St(t);await gu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function pM(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function C1(t){return t.map(e=>{var{providerId:n}=e,s=qp(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gM(t,e){const n=await S1(t,{},async()=>{const s=Il({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await A1(t,r,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",I1.fetch()(o,{method:"POST",headers:a,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function mM(t,e){return Vr(t,"POST","/v2/accounts:revokeToken",Lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Vy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const n=Vy(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await gM(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new to;return s&&(Re(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(Re(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(Re(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new to,this.toJSON())}_performRefresh(){return Ms("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(t,e){Re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Hn{constructor(e){var{uid:n,auth:s,stsTokenManager:r}=e,i=qp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new hM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Rf(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await el(this,this.stsTokenManager.getToken(this.auth,e));return Re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return uM(this,e)}reload(){return fM(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Hn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await gu(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kn(this.auth.app))return Promise.reject(Fs(this.auth));const e=await this.getIdToken();return await el(this,cM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,r,i,o,a,l,c,u;const h=(s=n.displayName)!==null&&s!==void 0?s:void 0,f=(r=n.email)!==null&&r!==void 0?r:void 0,g=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,v=(o=n.photoURL)!==null&&o!==void 0?o:void 0,y=(a=n.tenantId)!==null&&a!==void 0?a:void 0,_=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,w=(c=n.createdAt)!==null&&c!==void 0?c:void 0,I=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:O,emailVerified:L,isAnonymous:M,providerData:$,stsTokenManager:T}=n;Re(O&&T,e,"internal-error");const b=to.fromJSON(this.name,T);Re(typeof O=="string",e,"internal-error"),sr(h,e.name),sr(f,e.name),Re(typeof L=="boolean",e,"internal-error"),Re(typeof M=="boolean",e,"internal-error"),sr(g,e.name),sr(v,e.name),sr(y,e.name),sr(_,e.name),sr(w,e.name),sr(I,e.name);const E=new Hn({uid:O,auth:e,email:f,emailVerified:L,displayName:h,isAnonymous:M,photoURL:v,phoneNumber:g,tenantId:y,stsTokenManager:b,createdAt:w,lastLoginAt:I});return $&&Array.isArray($)&&(E.providerData=$.map(A=>Object.assign({},A))),_&&(E._redirectEventId=_),E}static async _fromIdTokenResponse(e,n,s=!1){const r=new to;r.updateFromServerResponse(n);const i=new Hn({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await gu(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];Re(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?C1(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(i!=null&&i.length),a=new to;a.updateFromIdToken(s);const l=new Hn({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Rf(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y=new Map;function Ns(t){qs(t instanceof Function,"Expected a class definition");let e=$y.get(t);return e?(qs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,$y.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}P1.type="NONE";const Fy=P1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mc(t,e,n){return`firebase:${t}:${e}:${n}`}class no{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=Mc(this.userKey,r.apiKey,i),this.fullPersistenceKey=Mc("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await pu(this.auth,{idToken:e}).catch(()=>{});return n?Hn._fromGetAccountInfoResponse(this.auth,n,e):null}return Hn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new no(Ns(Fy),e,s);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=r[0]||Ns(Fy);const o=Mc(s,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){let h;if(typeof u=="string"){const f=await pu(e,{idToken:u}).catch(()=>{});if(!f)break;h=await Hn._fromGetAccountInfoResponse(e,f,u)}else h=Hn._fromJSON(e,u);c!==i&&(a=h),i=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new no(i,e,s):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new no(i,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(M1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(R1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(L1(e))return"Blackberry";if(V1(e))return"Webos";if(O1(e))return"Safari";if((e.includes("chrome/")||D1(e))&&!e.includes("edge/"))return"Chrome";if(N1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function R1(t=dn()){return/firefox\//i.test(t)}function O1(t=dn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function D1(t=dn()){return/crios\//i.test(t)}function M1(t=dn()){return/iemobile/i.test(t)}function N1(t=dn()){return/android/i.test(t)}function L1(t=dn()){return/blackberry/i.test(t)}function V1(t=dn()){return/webos/i.test(t)}function Qp(t=dn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function yM(t=dn()){var e;return Qp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function vM(){return rR()&&document.documentMode===10}function $1(t=dn()){return Qp(t)||N1(t)||V1(t)||L1(t)||/windows phone/i.test(t)||M1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(t,e=[]){let n;switch(t){case"Browser":n=Uy(dn());break;case"Worker":n=`${Uy(dn())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Po}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bM(t,e={}){return Vr(t,"GET","/v2/passwordPolicy",Lr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xM=6;class wM{constructor(e){var n,s,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:xM,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,r,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(s=l.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new By(this),this.idTokenSubscription=new By(this),this.beforeStateQueue=new _M(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=k1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ns(n)),this._initializationPromise=this.queue(async()=>{var s,r,i;if(!this._deleted&&(this.persistenceManager=await no.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await pu(this,{idToken:e}),s=await Hn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(kn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let r=s,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await gu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=tM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(kn(this.app))return Promise.reject(Fs(this));const n=e?St(e):null;return n&&Re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return kn(this.app)?Promise.reject(Fs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return kn(this.app)?Promise.reject(Fs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ns(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await bM(this),n=new wM(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ai("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await mM(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ns(e)||this._popupRedirectResolver;Re(n,this,"argument-error"),this.redirectPersistenceManager=await no.create(this,[Ns(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,s,r);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=F1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;if(kn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&XD(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function $r(t){return St(t)}class By{constructor(e){this.auth=e,this.observer=null,this.addObserver=dR(n=>this.observer=n)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function TM(t){fd=t}function U1(t){return fd.loadJS(t)}function kM(){return fd.recaptchaEnterpriseScript}function IM(){return fd.gapiScript}function SM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class AM{constructor(){this.enterprise=new CM}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class CM{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const PM="recaptcha-enterprise",B1="NO_RECAPTCHA";class RM{constructor(e){this.type=PM,this.auth=$r(e)}async verify(e="verify",n=!1){async function s(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{lM(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new aM(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function r(i,o,a){const l=window.grecaptcha;Ly(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(B1)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new AM().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{s(this.auth).then(a=>{if(!n&&Ly(window.grecaptcha))r(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=kM();l.length!==0&&(l+=a),U1(l).then(()=>{r(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function jy(t,e,n,s=!1,r=!1){const i=new RM(t);let o;if(r)o=B1;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return s?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function zy(t,e,n,s,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await jy(t,e,n,n==="getOobCode");return s(t,o)}else return s(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await jy(t,e,n,n==="getOobCode");return s(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OM(t,e){const n=Co(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(yi(i,e??{}))return r;Un(r,"already-initialized")}return n.initialize({options:e})}function DM(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(Ns);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function MM(t,e,n){const s=$r(t);Re(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=j1(e),{host:o,port:a}=NM(e),l=a===null?"":`:${a}`,c={url:`${i}//${o}${l}/`},u=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){Re(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Re(yi(c,s.config.emulator)&&yi(u,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=c,s.emulatorConfig=u,s.settings.appVerificationDisabledForTesting=!0,kl(o)?(qw(`${i}//${o}${l}`),Ww("Auth",!0)):LM()}function j1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function NM(t){const e=j1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:Hy(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:Hy(o)}}}function Hy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function LM(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ms("not implemented")}_getIdTokenResponse(e){return Ms("not implemented")}_linkToIdToken(e,n){return Ms("not implemented")}_getReauthenticationResolver(e){return Ms("not implemented")}}async function VM(t,e){return Vr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $M(t,e){return Al(t,"POST","/v1/accounts:signInWithPassword",Lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FM(t,e){return Al(t,"POST","/v1/accounts:signInWithEmailLink",Lr(t,e))}async function UM(t,e){return Al(t,"POST","/v1/accounts:signInWithEmailLink",Lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl extends Xp{constructor(e,n,s,r=null){super("password",s),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new tl(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new tl(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zy(e,n,"signInWithPassword",$M);case"emailLink":return FM(e,{email:this._email,oobCode:this._password});default:Un(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zy(e,s,"signUpPassword",VM);case"emailLink":return UM(e,{idToken:n,email:this._email,oobCode:this._password});default:Un(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function so(t,e){return Al(t,"POST","/v1/accounts:signInWithIdp",Lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM="http://localhost";class bi extends Xp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new bi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Un("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r}=n,i=qp(n,["providerId","signInMethod"]);if(!s||!r)return null;const o=new bi(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return so(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,so(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,so(e,n)}buildRequest(){const e={requestUri:BM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Il(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jM(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function zM(t){const e=la(ca(t)).link,n=e?la(ca(e)).deep_link_id:null,s=la(ca(t)).deep_link_id;return(s?la(ca(s)).link:null)||s||n||e||t}class Jp{constructor(e){var n,s,r,i,o,a;const l=la(ca(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(s=l.oobCode)!==null&&s!==void 0?s:null,h=jM((r=l.mode)!==null&&r!==void 0?r:null);Re(c&&u&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=u,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=zM(e);try{return new Jp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(){this.providerId=Ro.PROVIDER_ID}static credential(e,n){return tl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Jp.parseLink(n);return Re(s,"argument-error"),tl._fromEmailAndCode(e,s.code,s.tenantId)}}Ro.PROVIDER_ID="password";Ro.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ro.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl extends Zp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr extends Cl{constructor(){super("facebook.com")}static credential(e){return bi._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hr.credential(e.oauthAccessToken)}catch{return null}}}hr.FACEBOOK_SIGN_IN_METHOD="facebook.com";hr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds extends Cl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return bi._fromParams({providerId:Ds.PROVIDER_ID,signInMethod:Ds.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ds.credentialFromTaggedObject(e)}static credentialFromError(e){return Ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Ds.credential(n,s)}catch{return null}}}Ds.GOOGLE_SIGN_IN_METHOD="google.com";Ds.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends Cl{constructor(){super("github.com")}static credential(e){return bi._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fr.credential(e.oauthAccessToken)}catch{return null}}}fr.GITHUB_SIGN_IN_METHOD="github.com";fr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends Cl{constructor(){super("twitter.com")}static credential(e,n){return bi._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return pr.credential(n,s)}catch{return null}}}pr.TWITTER_SIGN_IN_METHOD="twitter.com";pr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await Hn._fromIdTokenResponse(e,s,r),o=qy(s);return new xi({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=qy(s);return new xi({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function qy(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu extends ys{constructor(e,n,s,r){var i;super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,mu.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new mu(e,n,s,r)}}function z1(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?mu._fromErrorAndOperation(t,i,e,s):i})}async function HM(t,e,n=!1){const s=await el(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return xi._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qM(t,e,n=!1){const{auth:s}=t;if(kn(s.app))return Promise.reject(Fs(s));const r="reauthenticate";try{const i=await el(t,z1(s,r,e,t),n);Re(i.idToken,s,"internal-error");const o=Yp(i.idToken);Re(o,s,"internal-error");const{sub:a}=o;return Re(t.uid===a,s,"user-mismatch"),xi._forOperation(t,r,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Un(s,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H1(t,e,n=!1){if(kn(t.app))return Promise.reject(Fs(t));const s="signIn",r=await z1(t,s,e),i=await xi._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}async function WM(t,e){return H1($r(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KM(t,e){return Al(t,"POST","/v1/accounts:signInWithCustomToken",Lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nh(t,e){if(kn(t.app))return Promise.reject(Fs(t));const n=$r(t),s=await KM(n,{token:e,returnSecureToken:!0}),r=await xi._fromIdTokenResponse(n,"signIn",s);return await n._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GM(t){const e=$r(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function YM(t,e,n){return kn(t.app)?Promise.reject(Fs(t)):WM(St(t),Ro.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&GM(t),s})}function QM(t,e,n,s){return St(t).onIdTokenChanged(e,n,s)}function XM(t,e,n){return St(t).beforeAuthStateChanged(e,n)}function JM(t){return St(t).signOut()}const yu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(yu,"1"),this.storage.removeItem(yu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZM=1e3,eN=10;class W1 extends q1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);vM()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,eN):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},ZM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}W1.type="LOCAL";const tN=W1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1 extends q1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}K1.type="SESSION";const G1=K1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nN(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new pd(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await nN(a);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}pd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=eg("",20);r.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(f.data.response);break;default:clearTimeout(u),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(){return window}function rN(t){ds().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(){return typeof ds().WorkerGlobalScope<"u"&&typeof ds().importScripts=="function"}async function iN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function oN(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function aN(){return Y1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1="firebaseLocalStorageDb",lN=1,vu="firebaseLocalStorage",X1="fbase_key";class Pl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function gd(t,e){return t.transaction([vu],e?"readwrite":"readonly").objectStore(vu)}function cN(){const t=indexedDB.deleteDatabase(Q1);return new Pl(t).toPromise()}function Of(){const t=indexedDB.open(Q1,lN);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(vu,{keyPath:X1})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(vu)?e(s):(s.close(),await cN(),e(await Of()))})})}async function Wy(t,e,n){const s=gd(t,!0).put({[X1]:e,value:n});return new Pl(s).toPromise()}async function uN(t,e){const n=gd(t,!1).get(e),s=await new Pl(n).toPromise();return s===void 0?null:s.value}function Ky(t,e){const n=gd(t,!0).delete(e);return new Pl(n).toPromise()}const dN=800,hN=3;class J1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Of(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>hN)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Y1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pd._getInstance(aN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await iN(),!this.activeServiceWorker)return;this.sender=new sN(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||oN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Of();return await Wy(e,yu,"1"),await Ky(e,yu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Wy(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>uN(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ky(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=gd(r,!1).getAll();return new Pl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}J1.type="LOCAL";const fN=J1;new Sl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z1(t,e){return e?Ns(e):(Re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg extends Xp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return so(e,this._buildIdpRequest())}_linkToIdToken(e,n){return so(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return so(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function pN(t){return H1(t.auth,new tg(t),t.bypassAuthState)}function gN(t){const{auth:e,user:n}=t;return Re(n,e,"internal-error"),qM(n,new tg(t),t.bypassAuthState)}async function mN(t){const{auth:e,user:n}=t;return Re(n,e,"internal-error"),HM(n,new tg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pN;case"linkViaPopup":case"linkViaRedirect":return mN;case"reauthViaPopup":case"reauthViaRedirect":return gN;default:Un(this.auth,"internal-error")}}resolve(e){qs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN=new Sl(2e3,1e4);async function vN(t,e,n){if(kn(t.app))return Promise.reject(Kn(t,"operation-not-supported-in-this-environment"));const s=$r(t);JD(t,e,Zp);const r=Z1(s,n);return new ri(s,"signInViaPopup",e,r).executeNotNull()}class ri extends eE{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,ri.currentPopupAction&&ri.currentPopupAction.cancel(),ri.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){qs(this.filter.length===1,"Popup operations only handle one event");const e=eg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Kn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Kn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ri.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Kn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,yN.get())};e()}}ri.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N="pendingRedirect",Nc=new Map;class bN extends eE{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Nc.get(this.auth._key());if(!e){try{const s=await xN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Nc.set(this.auth._key(),e)}return this.bypassAuthState||Nc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function xN(t,e){const n=TN(e),s=EN(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function wN(t,e){Nc.set(t._key(),e)}function EN(t){return Ns(t._redirectPersistence)}function TN(t){return Mc(_N,t.config.apiKey,t.name)}async function kN(t,e,n=!1){if(kn(t.app))return Promise.reject(Fs(t));const s=$r(t),r=Z1(s,e),o=await new bN(s,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN=10*60*1e3;class SN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!AN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!tE(e)){const r=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(Kn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=IN&&this.cachedEventUids.clear(),this.cachedEventUids.has(Gy(e))}saveEventToCache(e){this.cachedEventUids.add(Gy(e)),this.lastProcessedEventTime=Date.now()}}function Gy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function tE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function AN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CN(t,e={}){return Vr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,RN=/^https?/;async function ON(t){if(t.config.emulator)return;const{authorizedDomains:e}=await CN(t);for(const n of e)try{if(DN(n))return}catch{}Un(t,"unauthorized-domain")}function DN(t){const e=Pf(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!RN.test(n))return!1;if(PN.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN=new Sl(3e4,6e4);function Yy(){const t=ds().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function NN(t){return new Promise((e,n)=>{var s,r,i;function o(){Yy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Yy(),n(Kn(t,"network-request-failed"))},timeout:MN.get()})}if(!((r=(s=ds().gapi)===null||s===void 0?void 0:s.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((i=ds().gapi)===null||i===void 0)&&i.load)o();else{const a=SM("iframefcb");return ds()[a]=()=>{gapi.load?o():n(Kn(t,"network-request-failed"))},U1(`${IM()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Lc=null,e})}let Lc=null;function LN(t){return Lc=Lc||NN(t),Lc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN=new Sl(5e3,15e3),$N="__/auth/iframe",FN="emulator/auth/iframe",UN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},BN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jN(t){const e=t.config;Re(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Gp(e,FN):`https://${t.config.authDomain}/${$N}`,s={apiKey:e.apiKey,appName:t.name,v:Po},r=BN.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${Il(s).slice(1)}`}async function zN(t){const e=await LN(t),n=ds().gapi;return Re(n,t,"internal-error"),e.open({where:document.body,url:jN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:UN,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=Kn(t,"network-request-failed"),a=ds().setTimeout(()=>{i(o)},VN.get());function l(){ds().clearTimeout(a),r(s)}s.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qN=500,WN=600,KN="_blank",GN="http://localhost";class Qy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function YN(t,e,n,s=qN,r=WN){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const l=Object.assign(Object.assign({},HN),{width:s.toString(),height:r.toString(),top:i,left:o}),c=dn().toLowerCase();n&&(a=D1(c)?KN:n),R1(c)&&(e=e||GN,l.scrollbars="yes");const u=Object.entries(l).reduce((f,[g,v])=>`${f}${g}=${v},`,"");if(yM(c)&&a!=="_self")return QN(e||"",a),new Qy(null);const h=window.open(e||"",a,u);Re(h,t,"popup-blocked");try{h.focus()}catch{}return new Qy(h)}function QN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN="__/auth/handler",JN="emulator/auth/handler",ZN=encodeURIComponent("fac");async function Xy(t,e,n,s,r,i){Re(t.config.authDomain,t,"auth-domain-config-required"),Re(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Po,eventId:r};if(e instanceof Zp){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",uR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries({}))o[u]=h}if(e instanceof Cl){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${ZN}=${encodeURIComponent(l)}`:"";return`${e4(t)}?${Il(a).slice(1)}${c}`}function e4({config:t}){return t.emulator?Gp(t,JN):`https://${t.authDomain}/${XN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lh="webStorageSupport";class t4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=G1,this._completeRedirectFn=kN,this._overrideRedirectResult=wN}async _openPopup(e,n,s,r){var i;qs((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Xy(e,n,s,Pf(),r);return YN(e,o,eg())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await Xy(e,n,s,Pf(),r);return rN(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(qs(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await zN(e),s=new SN(e);return n.register("authEvent",r=>(Re(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Lh,{type:Lh},r=>{var i;const o=(i=r==null?void 0:r[0])===null||i===void 0?void 0:i[Lh];o!==void 0&&n(!!o),Un(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ON(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return $1()||O1()||Qp()}}const n4=t4;var Jy="@firebase/auth",Zy="1.10.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r4(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function i4(t){gs(new Xn("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;Re(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:F1(t)},c=new EM(s,r,i,l);return DM(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),gs(new Xn("auth-internal",e=>{const n=$r(e.getProvider("auth").getImmediate());return(s=>new s4(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),$n(Jy,Zy,r4(t)),$n(Jy,Zy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4=5*60,a4=Hw("authIdTokenMaxAge")||o4;let ev=null;const l4=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>a4)return;const r=n==null?void 0:n.token;ev!==r&&(ev=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function ng(t=Vp()){const e=Co(t,"auth");if(e.isInitialized())return e.getImmediate();const n=OM(t,{popupRedirectResolver:n4,persistence:[fN,tN,G1]}),s=Hw("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=l4(i.toString());XM(n,o,()=>o(n.currentUser)),QM(n,a=>o(a))}}const r=jw("auth");return r&&MM(n,`http://${r}`),n}function c4(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}TM({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=Kn("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",c4().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});i4("Browser");var tv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wr,nE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,b){function E(){}E.prototype=b.prototype,T.D=b.prototype,T.prototype=new E,T.prototype.constructor=T,T.C=function(A,k,S){for(var R=Array(arguments.length-2),me=2;me<arguments.length;me++)R[me-2]=arguments[me];return b.prototype[k].apply(A,R)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(T,b,E){E||(E=0);var A=Array(16);if(typeof b=="string")for(var k=0;16>k;++k)A[k]=b.charCodeAt(E++)|b.charCodeAt(E++)<<8|b.charCodeAt(E++)<<16|b.charCodeAt(E++)<<24;else for(k=0;16>k;++k)A[k]=b[E++]|b[E++]<<8|b[E++]<<16|b[E++]<<24;b=T.g[0],E=T.g[1],k=T.g[2];var S=T.g[3],R=b+(S^E&(k^S))+A[0]+3614090360&4294967295;b=E+(R<<7&4294967295|R>>>25),R=S+(k^b&(E^k))+A[1]+3905402710&4294967295,S=b+(R<<12&4294967295|R>>>20),R=k+(E^S&(b^E))+A[2]+606105819&4294967295,k=S+(R<<17&4294967295|R>>>15),R=E+(b^k&(S^b))+A[3]+3250441966&4294967295,E=k+(R<<22&4294967295|R>>>10),R=b+(S^E&(k^S))+A[4]+4118548399&4294967295,b=E+(R<<7&4294967295|R>>>25),R=S+(k^b&(E^k))+A[5]+1200080426&4294967295,S=b+(R<<12&4294967295|R>>>20),R=k+(E^S&(b^E))+A[6]+2821735955&4294967295,k=S+(R<<17&4294967295|R>>>15),R=E+(b^k&(S^b))+A[7]+4249261313&4294967295,E=k+(R<<22&4294967295|R>>>10),R=b+(S^E&(k^S))+A[8]+1770035416&4294967295,b=E+(R<<7&4294967295|R>>>25),R=S+(k^b&(E^k))+A[9]+2336552879&4294967295,S=b+(R<<12&4294967295|R>>>20),R=k+(E^S&(b^E))+A[10]+4294925233&4294967295,k=S+(R<<17&4294967295|R>>>15),R=E+(b^k&(S^b))+A[11]+2304563134&4294967295,E=k+(R<<22&4294967295|R>>>10),R=b+(S^E&(k^S))+A[12]+1804603682&4294967295,b=E+(R<<7&4294967295|R>>>25),R=S+(k^b&(E^k))+A[13]+4254626195&4294967295,S=b+(R<<12&4294967295|R>>>20),R=k+(E^S&(b^E))+A[14]+2792965006&4294967295,k=S+(R<<17&4294967295|R>>>15),R=E+(b^k&(S^b))+A[15]+1236535329&4294967295,E=k+(R<<22&4294967295|R>>>10),R=b+(k^S&(E^k))+A[1]+4129170786&4294967295,b=E+(R<<5&4294967295|R>>>27),R=S+(E^k&(b^E))+A[6]+3225465664&4294967295,S=b+(R<<9&4294967295|R>>>23),R=k+(b^E&(S^b))+A[11]+643717713&4294967295,k=S+(R<<14&4294967295|R>>>18),R=E+(S^b&(k^S))+A[0]+3921069994&4294967295,E=k+(R<<20&4294967295|R>>>12),R=b+(k^S&(E^k))+A[5]+3593408605&4294967295,b=E+(R<<5&4294967295|R>>>27),R=S+(E^k&(b^E))+A[10]+38016083&4294967295,S=b+(R<<9&4294967295|R>>>23),R=k+(b^E&(S^b))+A[15]+3634488961&4294967295,k=S+(R<<14&4294967295|R>>>18),R=E+(S^b&(k^S))+A[4]+3889429448&4294967295,E=k+(R<<20&4294967295|R>>>12),R=b+(k^S&(E^k))+A[9]+568446438&4294967295,b=E+(R<<5&4294967295|R>>>27),R=S+(E^k&(b^E))+A[14]+3275163606&4294967295,S=b+(R<<9&4294967295|R>>>23),R=k+(b^E&(S^b))+A[3]+4107603335&4294967295,k=S+(R<<14&4294967295|R>>>18),R=E+(S^b&(k^S))+A[8]+1163531501&4294967295,E=k+(R<<20&4294967295|R>>>12),R=b+(k^S&(E^k))+A[13]+2850285829&4294967295,b=E+(R<<5&4294967295|R>>>27),R=S+(E^k&(b^E))+A[2]+4243563512&4294967295,S=b+(R<<9&4294967295|R>>>23),R=k+(b^E&(S^b))+A[7]+1735328473&4294967295,k=S+(R<<14&4294967295|R>>>18),R=E+(S^b&(k^S))+A[12]+2368359562&4294967295,E=k+(R<<20&4294967295|R>>>12),R=b+(E^k^S)+A[5]+4294588738&4294967295,b=E+(R<<4&4294967295|R>>>28),R=S+(b^E^k)+A[8]+2272392833&4294967295,S=b+(R<<11&4294967295|R>>>21),R=k+(S^b^E)+A[11]+1839030562&4294967295,k=S+(R<<16&4294967295|R>>>16),R=E+(k^S^b)+A[14]+4259657740&4294967295,E=k+(R<<23&4294967295|R>>>9),R=b+(E^k^S)+A[1]+2763975236&4294967295,b=E+(R<<4&4294967295|R>>>28),R=S+(b^E^k)+A[4]+1272893353&4294967295,S=b+(R<<11&4294967295|R>>>21),R=k+(S^b^E)+A[7]+4139469664&4294967295,k=S+(R<<16&4294967295|R>>>16),R=E+(k^S^b)+A[10]+3200236656&4294967295,E=k+(R<<23&4294967295|R>>>9),R=b+(E^k^S)+A[13]+681279174&4294967295,b=E+(R<<4&4294967295|R>>>28),R=S+(b^E^k)+A[0]+3936430074&4294967295,S=b+(R<<11&4294967295|R>>>21),R=k+(S^b^E)+A[3]+3572445317&4294967295,k=S+(R<<16&4294967295|R>>>16),R=E+(k^S^b)+A[6]+76029189&4294967295,E=k+(R<<23&4294967295|R>>>9),R=b+(E^k^S)+A[9]+3654602809&4294967295,b=E+(R<<4&4294967295|R>>>28),R=S+(b^E^k)+A[12]+3873151461&4294967295,S=b+(R<<11&4294967295|R>>>21),R=k+(S^b^E)+A[15]+530742520&4294967295,k=S+(R<<16&4294967295|R>>>16),R=E+(k^S^b)+A[2]+3299628645&4294967295,E=k+(R<<23&4294967295|R>>>9),R=b+(k^(E|~S))+A[0]+4096336452&4294967295,b=E+(R<<6&4294967295|R>>>26),R=S+(E^(b|~k))+A[7]+1126891415&4294967295,S=b+(R<<10&4294967295|R>>>22),R=k+(b^(S|~E))+A[14]+2878612391&4294967295,k=S+(R<<15&4294967295|R>>>17),R=E+(S^(k|~b))+A[5]+4237533241&4294967295,E=k+(R<<21&4294967295|R>>>11),R=b+(k^(E|~S))+A[12]+1700485571&4294967295,b=E+(R<<6&4294967295|R>>>26),R=S+(E^(b|~k))+A[3]+2399980690&4294967295,S=b+(R<<10&4294967295|R>>>22),R=k+(b^(S|~E))+A[10]+4293915773&4294967295,k=S+(R<<15&4294967295|R>>>17),R=E+(S^(k|~b))+A[1]+2240044497&4294967295,E=k+(R<<21&4294967295|R>>>11),R=b+(k^(E|~S))+A[8]+1873313359&4294967295,b=E+(R<<6&4294967295|R>>>26),R=S+(E^(b|~k))+A[15]+4264355552&4294967295,S=b+(R<<10&4294967295|R>>>22),R=k+(b^(S|~E))+A[6]+2734768916&4294967295,k=S+(R<<15&4294967295|R>>>17),R=E+(S^(k|~b))+A[13]+1309151649&4294967295,E=k+(R<<21&4294967295|R>>>11),R=b+(k^(E|~S))+A[4]+4149444226&4294967295,b=E+(R<<6&4294967295|R>>>26),R=S+(E^(b|~k))+A[11]+3174756917&4294967295,S=b+(R<<10&4294967295|R>>>22),R=k+(b^(S|~E))+A[2]+718787259&4294967295,k=S+(R<<15&4294967295|R>>>17),R=E+(S^(k|~b))+A[9]+3951481745&4294967295,T.g[0]=T.g[0]+b&4294967295,T.g[1]=T.g[1]+(k+(R<<21&4294967295|R>>>11))&4294967295,T.g[2]=T.g[2]+k&4294967295,T.g[3]=T.g[3]+S&4294967295}s.prototype.u=function(T,b){b===void 0&&(b=T.length);for(var E=b-this.blockSize,A=this.B,k=this.h,S=0;S<b;){if(k==0)for(;S<=E;)r(this,T,S),S+=this.blockSize;if(typeof T=="string"){for(;S<b;)if(A[k++]=T.charCodeAt(S++),k==this.blockSize){r(this,A),k=0;break}}else for(;S<b;)if(A[k++]=T[S++],k==this.blockSize){r(this,A),k=0;break}}this.h=k,this.o+=b},s.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var b=1;b<T.length-8;++b)T[b]=0;var E=8*this.o;for(b=T.length-8;b<T.length;++b)T[b]=E&255,E/=256;for(this.u(T),T=Array(16),b=E=0;4>b;++b)for(var A=0;32>A;A+=8)T[E++]=this.g[b]>>>A&255;return T};function i(T,b){var E=a;return Object.prototype.hasOwnProperty.call(E,T)?E[T]:E[T]=b(T)}function o(T,b){this.h=b;for(var E=[],A=!0,k=T.length-1;0<=k;k--){var S=T[k]|0;A&&S==b||(E[k]=S,A=!1)}this.g=E}var a={};function l(T){return-128<=T&&128>T?i(T,function(b){return new o([b|0],0>b?-1:0)}):new o([T|0],0>T?-1:0)}function c(T){if(isNaN(T)||!isFinite(T))return h;if(0>T)return _(c(-T));for(var b=[],E=1,A=0;T>=E;A++)b[A]=T/E|0,E*=4294967296;return new o(b,0)}function u(T,b){if(T.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(T.charAt(0)=="-")return _(u(T.substring(1),b));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=c(Math.pow(b,8)),A=h,k=0;k<T.length;k+=8){var S=Math.min(8,T.length-k),R=parseInt(T.substring(k,k+S),b);8>S?(S=c(Math.pow(b,S)),A=A.j(S).add(c(R))):(A=A.j(E),A=A.add(c(R)))}return A}var h=l(0),f=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(y(this))return-_(this).m();for(var T=0,b=1,E=0;E<this.g.length;E++){var A=this.i(E);T+=(0<=A?A:4294967296+A)*b,b*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(v(this))return"0";if(y(this))return"-"+_(this).toString(T);for(var b=c(Math.pow(T,6)),E=this,A="";;){var k=L(E,b).g;E=w(E,k.j(b));var S=((0<E.g.length?E.g[0]:E.h)>>>0).toString(T);if(E=k,v(E))return S+A;for(;6>S.length;)S="0"+S;A=S+A}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function v(T){if(T.h!=0)return!1;for(var b=0;b<T.g.length;b++)if(T.g[b]!=0)return!1;return!0}function y(T){return T.h==-1}t.l=function(T){return T=w(this,T),y(T)?-1:v(T)?0:1};function _(T){for(var b=T.g.length,E=[],A=0;A<b;A++)E[A]=~T.g[A];return new o(E,~T.h).add(f)}t.abs=function(){return y(this)?_(this):this},t.add=function(T){for(var b=Math.max(this.g.length,T.g.length),E=[],A=0,k=0;k<=b;k++){var S=A+(this.i(k)&65535)+(T.i(k)&65535),R=(S>>>16)+(this.i(k)>>>16)+(T.i(k)>>>16);A=R>>>16,S&=65535,R&=65535,E[k]=R<<16|S}return new o(E,E[E.length-1]&-2147483648?-1:0)};function w(T,b){return T.add(_(b))}t.j=function(T){if(v(this)||v(T))return h;if(y(this))return y(T)?_(this).j(_(T)):_(_(this).j(T));if(y(T))return _(this.j(_(T)));if(0>this.l(g)&&0>T.l(g))return c(this.m()*T.m());for(var b=this.g.length+T.g.length,E=[],A=0;A<2*b;A++)E[A]=0;for(A=0;A<this.g.length;A++)for(var k=0;k<T.g.length;k++){var S=this.i(A)>>>16,R=this.i(A)&65535,me=T.i(k)>>>16,Ee=T.i(k)&65535;E[2*A+2*k]+=R*Ee,I(E,2*A+2*k),E[2*A+2*k+1]+=S*Ee,I(E,2*A+2*k+1),E[2*A+2*k+1]+=R*me,I(E,2*A+2*k+1),E[2*A+2*k+2]+=S*me,I(E,2*A+2*k+2)}for(A=0;A<b;A++)E[A]=E[2*A+1]<<16|E[2*A];for(A=b;A<2*b;A++)E[A]=0;return new o(E,0)};function I(T,b){for(;(T[b]&65535)!=T[b];)T[b+1]+=T[b]>>>16,T[b]&=65535,b++}function O(T,b){this.g=T,this.h=b}function L(T,b){if(v(b))throw Error("division by zero");if(v(T))return new O(h,h);if(y(T))return b=L(_(T),b),new O(_(b.g),_(b.h));if(y(b))return b=L(T,_(b)),new O(_(b.g),b.h);if(30<T.g.length){if(y(T)||y(b))throw Error("slowDivide_ only works with positive integers.");for(var E=f,A=b;0>=A.l(T);)E=M(E),A=M(A);var k=$(E,1),S=$(A,1);for(A=$(A,2),E=$(E,2);!v(A);){var R=S.add(A);0>=R.l(T)&&(k=k.add(E),S=R),A=$(A,1),E=$(E,1)}return b=w(T,k.j(b)),new O(k,b)}for(k=h;0<=T.l(b);){for(E=Math.max(1,Math.floor(T.m()/b.m())),A=Math.ceil(Math.log(E)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),S=c(E),R=S.j(b);y(R)||0<R.l(T);)E-=A,S=c(E),R=S.j(b);v(S)&&(S=f),k=k.add(S),T=w(T,R)}return new O(k,T)}t.A=function(T){return L(this,T).h},t.and=function(T){for(var b=Math.max(this.g.length,T.g.length),E=[],A=0;A<b;A++)E[A]=this.i(A)&T.i(A);return new o(E,this.h&T.h)},t.or=function(T){for(var b=Math.max(this.g.length,T.g.length),E=[],A=0;A<b;A++)E[A]=this.i(A)|T.i(A);return new o(E,this.h|T.h)},t.xor=function(T){for(var b=Math.max(this.g.length,T.g.length),E=[],A=0;A<b;A++)E[A]=this.i(A)^T.i(A);return new o(E,this.h^T.h)};function M(T){for(var b=T.g.length+1,E=[],A=0;A<b;A++)E[A]=T.i(A)<<1|T.i(A-1)>>>31;return new o(E,T.h)}function $(T,b){var E=b>>5;b%=32;for(var A=T.g.length-E,k=[],S=0;S<A;S++)k[S]=0<b?T.i(S+E)>>>b|T.i(S+E+1)<<32-b:T.i(S+E);return new o(k,T.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,nE=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,wr=o}).apply(typeof tv<"u"?tv:typeof self<"u"?self:typeof window<"u"?window:{});var sc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sE,ua,rE,Vc,Df,iE,oE,aE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,m,x){return d==Array.prototype||d==Object.prototype||(d[m]=x.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof sc=="object"&&sc];for(var m=0;m<d.length;++m){var x=d[m];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var s=n(this);function r(d,m){if(m)e:{var x=s;d=d.split(".");for(var C=0;C<d.length-1;C++){var U=d[C];if(!(U in x))break e;x=x[U]}d=d[d.length-1],C=x[d],m=m(C),m!=C&&m!=null&&e(x,d,{configurable:!0,writable:!0,value:m})}}function i(d,m){d instanceof String&&(d+="");var x=0,C=!1,U={next:function(){if(!C&&x<d.length){var q=x++;return{value:m(q,d[q]),done:!1}}return C=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}r("Array.prototype.values",function(d){return d||function(){return i(this,function(m,x){return x})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(d){var m=typeof d;return m=m!="object"?m:d?Array.isArray(d)?"array":m:"null",m=="array"||m=="object"&&typeof d.length=="number"}function c(d){var m=typeof d;return m=="object"&&d!=null||m=="function"}function u(d,m,x){return d.call.apply(d.bind,arguments)}function h(d,m,x){if(!d)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,C),d.apply(m,U)}}return function(){return d.apply(m,arguments)}}function f(d,m,x){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:h,f.apply(null,arguments)}function g(d,m){var x=Array.prototype.slice.call(arguments,1);return function(){var C=x.slice();return C.push.apply(C,arguments),d.apply(this,C)}}function v(d,m){function x(){}x.prototype=m.prototype,d.aa=m.prototype,d.prototype=new x,d.prototype.constructor=d,d.Qb=function(C,U,q){for(var ae=Array(arguments.length-2),at=2;at<arguments.length;at++)ae[at-2]=arguments[at];return m.prototype[U].apply(C,ae)}}function y(d){const m=d.length;if(0<m){const x=Array(m);for(let C=0;C<m;C++)x[C]=d[C];return x}return[]}function _(d,m){for(let x=1;x<arguments.length;x++){const C=arguments[x];if(l(C)){const U=d.length||0,q=C.length||0;d.length=U+q;for(let ae=0;ae<q;ae++)d[U+ae]=C[ae]}else d.push(C)}}class w{constructor(m,x){this.i=m,this.j=x,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function I(d){return/^[\s\xa0]*$/.test(d)}function O(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function L(d){return L[" "](d),d}L[" "]=function(){};var M=O().indexOf("Gecko")!=-1&&!(O().toLowerCase().indexOf("webkit")!=-1&&O().indexOf("Edge")==-1)&&!(O().indexOf("Trident")!=-1||O().indexOf("MSIE")!=-1)&&O().indexOf("Edge")==-1;function $(d,m,x){for(const C in d)m.call(x,d[C],C,d)}function T(d,m){for(const x in d)m.call(void 0,d[x],x,d)}function b(d){const m={};for(const x in d)m[x]=d[x];return m}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(d,m){let x,C;for(let U=1;U<arguments.length;U++){C=arguments[U];for(x in C)d[x]=C[x];for(let q=0;q<E.length;q++)x=E[q],Object.prototype.hasOwnProperty.call(C,x)&&(d[x]=C[x])}}function k(d){var m=1;d=d.split(":");const x=[];for(;0<m&&d.length;)x.push(d.shift()),m--;return d.length&&x.push(d.join(":")),x}function S(d){a.setTimeout(()=>{throw d},0)}function R(){var d=Qe;let m=null;return d.g&&(m=d.g,d.g=d.g.next,d.g||(d.h=null),m.next=null),m}class me{constructor(){this.h=this.g=null}add(m,x){const C=Ee.get();C.set(m,x),this.h?this.h.next=C:this.g=C,this.h=C}}var Ee=new w(()=>new we,d=>d.reset());class we{constructor(){this.next=this.g=this.h=null}set(m,x){this.h=m,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let he,Pe=!1,Qe=new me,xt=()=>{const d=a.Promise.resolve(void 0);he=()=>{d.then(At)}};var At=()=>{for(var d;d=R();){try{d.h.call(d.g)}catch(x){S(x)}var m=Ee;m.j(d),100>m.h&&(m.h++,d.next=m.g,m.g=d)}Pe=!1};function Ze(){this.s=this.s,this.C=this.C}Ze.prototype.s=!1,Ze.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ze.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ne(d,m){this.type=d,this.g=this.target=m,this.defaultPrevented=!1}ne.prototype.h=function(){this.defaultPrevented=!0};var le=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,m=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const x=()=>{};a.addEventListener("test",x,m),a.removeEventListener("test",x,m)}catch{}return d}();function Ae(d,m){if(ne.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var x=this.type=d.type,C=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=m,m=d.relatedTarget){if(M){e:{try{L(m.nodeName);var U=!0;break e}catch{}U=!1}U||(m=null)}}else x=="mouseover"?m=d.fromElement:x=="mouseout"&&(m=d.toElement);this.relatedTarget=m,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Be[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Ae.aa.h.call(this)}}v(Ae,ne);var Be={2:"touch",3:"pen",4:"mouse"};Ae.prototype.h=function(){Ae.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var z="closure_listenable_"+(1e6*Math.random()|0),X=0;function se(d,m,x,C,U){this.listener=d,this.proxy=null,this.src=m,this.type=x,this.capture=!!C,this.ha=U,this.key=++X,this.da=this.fa=!1}function fe(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function We(d){this.src=d,this.g={},this.h=0}We.prototype.add=function(d,m,x,C,U){var q=d.toString();d=this.g[q],d||(d=this.g[q]=[],this.h++);var ae=V(d,m,C,U);return-1<ae?(m=d[ae],x||(m.fa=!1)):(m=new se(m,this.src,q,!!C,U),m.fa=x,d.push(m)),m};function N(d,m){var x=m.type;if(x in d.g){var C=d.g[x],U=Array.prototype.indexOf.call(C,m,void 0),q;(q=0<=U)&&Array.prototype.splice.call(C,U,1),q&&(fe(m),d.g[x].length==0&&(delete d.g[x],d.h--))}}function V(d,m,x,C){for(var U=0;U<d.length;++U){var q=d[U];if(!q.da&&q.listener==m&&q.capture==!!x&&q.ha==C)return U}return-1}var F="closure_lm_"+(1e6*Math.random()|0),W={};function Y(d,m,x,C,U){if(Array.isArray(m)){for(var q=0;q<m.length;q++)Y(d,m[q],x,C,U);return null}return x=De(x),d&&d[z]?d.K(m,x,c(C)?!!C.capture:!1,U):K(d,m,x,!1,C,U)}function K(d,m,x,C,U,q){if(!m)throw Error("Invalid event type");var ae=c(U)?!!U.capture:!!U,at=ue(d);if(at||(d[F]=at=new We(d)),x=at.add(m,x,C,ae,q),x.proxy)return x;if(C=de(),x.proxy=C,C.src=d,C.listener=x,d.addEventListener)le||(U=ae),U===void 0&&(U=!1),d.addEventListener(m.toString(),C,U);else if(d.attachEvent)d.attachEvent(Z(m.toString()),C);else if(d.addListener&&d.removeListener)d.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return x}function de(){function d(x){return m.call(d.src,d.listener,x)}const m=ke;return d}function oe(d,m,x,C,U){if(Array.isArray(m))for(var q=0;q<m.length;q++)oe(d,m[q],x,C,U);else C=c(C)?!!C.capture:!!C,x=De(x),d&&d[z]?(d=d.i,m=String(m).toString(),m in d.g&&(q=d.g[m],x=V(q,x,C,U),-1<x&&(fe(q[x]),Array.prototype.splice.call(q,x,1),q.length==0&&(delete d.g[m],d.h--)))):d&&(d=ue(d))&&(m=d.g[m.toString()],d=-1,m&&(d=V(m,x,C,U)),(x=-1<d?m[d]:null)&&ie(x))}function ie(d){if(typeof d!="number"&&d&&!d.da){var m=d.src;if(m&&m[z])N(m.i,d);else{var x=d.type,C=d.proxy;m.removeEventListener?m.removeEventListener(x,C,d.capture):m.detachEvent?m.detachEvent(Z(x),C):m.addListener&&m.removeListener&&m.removeListener(C),(x=ue(m))?(N(x,d),x.h==0&&(x.src=null,m[F]=null)):fe(d)}}}function Z(d){return d in W?W[d]:W[d]="on"+d}function ke(d,m){if(d.da)d=!0;else{m=new Ae(m,this);var x=d.listener,C=d.ha||d.src;d.fa&&ie(d),d=x.call(C,m)}return d}function ue(d){return d=d[F],d instanceof We?d:null}var xe="__closure_events_fn_"+(1e9*Math.random()>>>0);function De(d){return typeof d=="function"?d:(d[xe]||(d[xe]=function(m){return d.handleEvent(m)}),d[xe])}function Ce(){Ze.call(this),this.i=new We(this),this.M=this,this.F=null}v(Ce,Ze),Ce.prototype[z]=!0,Ce.prototype.removeEventListener=function(d,m,x,C){oe(this,d,m,x,C)};function $e(d,m){var x,C=d.F;if(C)for(x=[];C;C=C.F)x.push(C);if(d=d.M,C=m.type||m,typeof m=="string")m=new ne(m,d);else if(m instanceof ne)m.target=m.target||d;else{var U=m;m=new ne(C,d),A(m,U)}if(U=!0,x)for(var q=x.length-1;0<=q;q--){var ae=m.g=x[q];U=Ke(ae,C,!0,m)&&U}if(ae=m.g=d,U=Ke(ae,C,!0,m)&&U,U=Ke(ae,C,!1,m)&&U,x)for(q=0;q<x.length;q++)ae=m.g=x[q],U=Ke(ae,C,!1,m)&&U}Ce.prototype.N=function(){if(Ce.aa.N.call(this),this.i){var d=this.i,m;for(m in d.g){for(var x=d.g[m],C=0;C<x.length;C++)fe(x[C]);delete d.g[m],d.h--}}this.F=null},Ce.prototype.K=function(d,m,x,C){return this.i.add(String(d),m,!1,x,C)},Ce.prototype.L=function(d,m,x,C){return this.i.add(String(d),m,!0,x,C)};function Ke(d,m,x,C){if(m=d.i.g[String(m)],!m)return!0;m=m.concat();for(var U=!0,q=0;q<m.length;++q){var ae=m[q];if(ae&&!ae.da&&ae.capture==x){var at=ae.listener,jt=ae.ha||ae.src;ae.fa&&N(d.i,ae),U=at.call(jt,C)!==!1&&U}}return U&&!C.defaultPrevented}function Yt(d,m,x){if(typeof d=="function")x&&(d=f(d,x));else if(d&&typeof d.handleEvent=="function")d=f(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:a.setTimeout(d,m||0)}function Ut(d){d.g=Yt(()=>{d.g=null,d.i&&(d.i=!1,Ut(d))},d.l);const m=d.h;d.h=null,d.m.apply(null,m)}class Pn extends Ze{constructor(m,x){super(),this.m=m,this.l=x,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Ut(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qt(d){Ze.call(this),this.h=d,this.g={}}v(Qt,Ze);var Xs=[];function $o(d){$(d.g,function(m,x){this.g.hasOwnProperty(x)&&ie(m)},d),d.g={}}Qt.prototype.N=function(){Qt.aa.N.call(this),$o(this)},Qt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bt=a.JSON.stringify,Rn=a.JSON.parse,Ll=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function zd(){}zd.prototype.h=null;function am(d){return d.h||(d.h=d.i())}function lm(){}var Fo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Hd(){ne.call(this,"d")}v(Hd,ne);function qd(){ne.call(this,"c")}v(qd,ne);var Ur={},cm=null;function Vl(){return cm=cm||new Ce}Ur.La="serverreachability";function um(d){ne.call(this,Ur.La,d)}v(um,ne);function Uo(d){const m=Vl();$e(m,new um(m))}Ur.STAT_EVENT="statevent";function dm(d,m){ne.call(this,Ur.STAT_EVENT,d),this.stat=m}v(dm,ne);function hn(d){const m=Vl();$e(m,new dm(m,d))}Ur.Ma="timingevent";function hm(d,m){ne.call(this,Ur.Ma,d),this.size=m}v(hm,ne);function Bo(d,m){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},m)}function jo(){this.g=!0}jo.prototype.xa=function(){this.g=!1};function $k(d,m,x,C,U,q){d.info(function(){if(d.g)if(q)for(var ae="",at=q.split("&"),jt=0;jt<at.length;jt++){var et=at[jt].split("=");if(1<et.length){var Xt=et[0];et=et[1];var Jt=Xt.split("_");ae=2<=Jt.length&&Jt[1]=="type"?ae+(Xt+"="+et+"&"):ae+(Xt+"=redacted&")}}else ae=null;else ae=q;return"XMLHTTP REQ ("+C+") [attempt "+U+"]: "+m+`
`+x+`
`+ae})}function Fk(d,m,x,C,U,q,ae){d.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+U+"]: "+m+`
`+x+`
`+q+" "+ae})}function Li(d,m,x,C){d.info(function(){return"XMLHTTP TEXT ("+m+"): "+Bk(d,x)+(C?" "+C:"")})}function Uk(d,m){d.info(function(){return"TIMEOUT: "+m})}jo.prototype.info=function(){};function Bk(d,m){if(!d.g)return m;if(!m)return null;try{var x=JSON.parse(m);if(x){for(d=0;d<x.length;d++)if(Array.isArray(x[d])){var C=x[d];if(!(2>C.length)){var U=C[1];if(Array.isArray(U)&&!(1>U.length)){var q=U[0];if(q!="noop"&&q!="stop"&&q!="close")for(var ae=1;ae<U.length;ae++)U[ae]=""}}}}return Bt(x)}catch{return m}}var $l={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},fm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Wd;function Fl(){}v(Fl,zd),Fl.prototype.g=function(){return new XMLHttpRequest},Fl.prototype.i=function(){return{}},Wd=new Fl;function Js(d,m,x,C){this.j=d,this.i=m,this.l=x,this.R=C||1,this.U=new Qt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pm}function pm(){this.i=null,this.g="",this.h=!1}var gm={},Kd={};function Gd(d,m,x){d.L=1,d.v=zl(vs(m)),d.m=x,d.P=!0,mm(d,null)}function mm(d,m){d.F=Date.now(),Ul(d),d.A=vs(d.v);var x=d.A,C=d.R;Array.isArray(C)||(C=[String(C)]),Pm(x.i,"t",C),d.C=0,x=d.j.J,d.h=new pm,d.g=Gm(d.j,x?m:null,!d.m),0<d.O&&(d.M=new Pn(f(d.Y,d,d.g),d.O)),m=d.U,x=d.g,C=d.ca;var U="readystatechange";Array.isArray(U)||(U&&(Xs[0]=U.toString()),U=Xs);for(var q=0;q<U.length;q++){var ae=Y(x,U[q],C||m.handleEvent,!1,m.h||m);if(!ae)break;m.g[ae.key]=ae}m=d.H?b(d.H):{},d.m?(d.u||(d.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,m)):(d.u="GET",d.g.ea(d.A,d.u,null,m)),Uo(),$k(d.i,d.u,d.A,d.l,d.R,d.m)}Js.prototype.ca=function(d){d=d.target;const m=this.M;m&&_s(d)==3?m.j():this.Y(d)},Js.prototype.Y=function(d){try{if(d==this.g)e:{const Jt=_s(this.g);var m=this.g.Ba();const Fi=this.g.Z();if(!(3>Jt)&&(Jt!=3||this.g&&(this.h.h||this.g.oa()||Vm(this.g)))){this.J||Jt!=4||m==7||(m==8||0>=Fi?Uo(3):Uo(2)),Yd(this);var x=this.g.Z();this.X=x;t:if(ym(this)){var C=Vm(this.g);d="";var U=C.length,q=_s(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Br(this),zo(this);var ae="";break t}this.h.i=new a.TextDecoder}for(m=0;m<U;m++)this.h.h=!0,d+=this.h.i.decode(C[m],{stream:!(q&&m==U-1)});C.length=0,this.h.g+=d,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=x==200,Fk(this.i,this.u,this.A,this.l,this.R,Jt,x),this.o){if(this.T&&!this.K){t:{if(this.g){var at,jt=this.g;if((at=jt.g?jt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(at)){var et=at;break t}}et=null}if(x=et)Li(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qd(this,x);else{this.o=!1,this.s=3,hn(12),Br(this),zo(this);break e}}if(this.P){x=!0;let zn;for(;!this.J&&this.C<ae.length;)if(zn=jk(this,ae),zn==Kd){Jt==4&&(this.s=4,hn(14),x=!1),Li(this.i,this.l,null,"[Incomplete Response]");break}else if(zn==gm){this.s=4,hn(15),Li(this.i,this.l,ae,"[Invalid Chunk]"),x=!1;break}else Li(this.i,this.l,zn,null),Qd(this,zn);if(ym(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Jt!=4||ae.length!=0||this.h.h||(this.s=1,hn(16),x=!1),this.o=this.o&&x,!x)Li(this.i,this.l,ae,"[Invalid Chunked Response]"),Br(this),zo(this);else if(0<ae.length&&!this.W){this.W=!0;var Xt=this.j;Xt.g==this&&Xt.ba&&!Xt.M&&(Xt.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),nh(Xt),Xt.M=!0,hn(11))}}else Li(this.i,this.l,ae,null),Qd(this,ae);Jt==4&&Br(this),this.o&&!this.J&&(Jt==4?Hm(this.j,this):(this.o=!1,Ul(this)))}else iI(this.g),x==400&&0<ae.indexOf("Unknown SID")?(this.s=3,hn(12)):(this.s=0,hn(13)),Br(this),zo(this)}}}catch{}finally{}};function ym(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function jk(d,m){var x=d.C,C=m.indexOf(`
`,x);return C==-1?Kd:(x=Number(m.substring(x,C)),isNaN(x)?gm:(C+=1,C+x>m.length?Kd:(m=m.slice(C,C+x),d.C=C+x,m)))}Js.prototype.cancel=function(){this.J=!0,Br(this)};function Ul(d){d.S=Date.now()+d.I,vm(d,d.I)}function vm(d,m){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Bo(f(d.ba,d),m)}function Yd(d){d.B&&(a.clearTimeout(d.B),d.B=null)}Js.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(Uk(this.i,this.A),this.L!=2&&(Uo(),hn(17)),Br(this),this.s=2,zo(this)):vm(this,this.S-d)};function zo(d){d.j.G==0||d.J||Hm(d.j,d)}function Br(d){Yd(d);var m=d.M;m&&typeof m.ma=="function"&&m.ma(),d.M=null,$o(d.U),d.g&&(m=d.g,d.g=null,m.abort(),m.ma())}function Qd(d,m){try{var x=d.j;if(x.G!=0&&(x.g==d||Xd(x.h,d))){if(!d.K&&Xd(x.h,d)&&x.G==3){try{var C=x.Da.g.parse(m)}catch{C=null}if(Array.isArray(C)&&C.length==3){var U=C;if(U[0]==0){e:if(!x.u){if(x.g)if(x.g.F+3e3<d.F)Yl(x),Kl(x);else break e;th(x),hn(18)}}else x.za=U[1],0<x.za-x.T&&37500>U[2]&&x.F&&x.v==0&&!x.C&&(x.C=Bo(f(x.Za,x),6e3));if(1>=xm(x.h)&&x.ca){try{x.ca()}catch{}x.ca=void 0}}else zr(x,11)}else if((d.K||x.g==d)&&Yl(x),!I(m))for(U=x.Da.g.parse(m),m=0;m<U.length;m++){let et=U[m];if(x.T=et[0],et=et[1],x.G==2)if(et[0]=="c"){x.K=et[1],x.ia=et[2];const Xt=et[3];Xt!=null&&(x.la=Xt,x.j.info("VER="+x.la));const Jt=et[4];Jt!=null&&(x.Aa=Jt,x.j.info("SVER="+x.Aa));const Fi=et[5];Fi!=null&&typeof Fi=="number"&&0<Fi&&(C=1.5*Fi,x.L=C,x.j.info("backChannelRequestTimeoutMs_="+C)),C=x;const zn=d.g;if(zn){const Xl=zn.g?zn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xl){var q=C.h;q.g||Xl.indexOf("spdy")==-1&&Xl.indexOf("quic")==-1&&Xl.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(Jd(q,q.h),q.h=null))}if(C.D){const sh=zn.g?zn.g.getResponseHeader("X-HTTP-Session-Id"):null;sh&&(C.ya=sh,ht(C.I,C.D,sh))}}x.G=3,x.l&&x.l.ua(),x.ba&&(x.R=Date.now()-d.F,x.j.info("Handshake RTT: "+x.R+"ms")),C=x;var ae=d;if(C.qa=Km(C,C.J?C.ia:null,C.W),ae.K){wm(C.h,ae);var at=ae,jt=C.L;jt&&(at.I=jt),at.B&&(Yd(at),Ul(at)),C.g=ae}else jm(C);0<x.i.length&&Gl(x)}else et[0]!="stop"&&et[0]!="close"||zr(x,7);else x.G==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?zr(x,7):eh(x):et[0]!="noop"&&x.l&&x.l.ta(et),x.v=0)}}Uo(4)}catch{}}var zk=class{constructor(d,m){this.g=d,this.map=m}};function _m(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function bm(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function xm(d){return d.h?1:d.g?d.g.size:0}function Xd(d,m){return d.h?d.h==m:d.g?d.g.has(m):!1}function Jd(d,m){d.g?d.g.add(m):d.h=m}function wm(d,m){d.h&&d.h==m?d.h=null:d.g&&d.g.has(m)&&d.g.delete(m)}_m.prototype.cancel=function(){if(this.i=Em(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Em(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let m=d.i;for(const x of d.g.values())m=m.concat(x.D);return m}return y(d.i)}function Hk(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(l(d)){for(var m=[],x=d.length,C=0;C<x;C++)m.push(d[C]);return m}m=[],x=0;for(C in d)m[x++]=d[C];return m}function qk(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(l(d)||typeof d=="string"){var m=[];d=d.length;for(var x=0;x<d;x++)m.push(x);return m}m=[],x=0;for(const C in d)m[x++]=C;return m}}}function Tm(d,m){if(d.forEach&&typeof d.forEach=="function")d.forEach(m,void 0);else if(l(d)||typeof d=="string")Array.prototype.forEach.call(d,m,void 0);else for(var x=qk(d),C=Hk(d),U=C.length,q=0;q<U;q++)m.call(void 0,C[q],x&&x[q],d)}var km=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wk(d,m){if(d){d=d.split("&");for(var x=0;x<d.length;x++){var C=d[x].indexOf("="),U=null;if(0<=C){var q=d[x].substring(0,C);U=d[x].substring(C+1)}else q=d[x];m(q,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function jr(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof jr){this.h=d.h,Bl(this,d.j),this.o=d.o,this.g=d.g,jl(this,d.s),this.l=d.l;var m=d.i,x=new Wo;x.i=m.i,m.g&&(x.g=new Map(m.g),x.h=m.h),Im(this,x),this.m=d.m}else d&&(m=String(d).match(km))?(this.h=!1,Bl(this,m[1]||"",!0),this.o=Ho(m[2]||""),this.g=Ho(m[3]||"",!0),jl(this,m[4]),this.l=Ho(m[5]||"",!0),Im(this,m[6]||"",!0),this.m=Ho(m[7]||"")):(this.h=!1,this.i=new Wo(null,this.h))}jr.prototype.toString=function(){var d=[],m=this.j;m&&d.push(qo(m,Sm,!0),":");var x=this.g;return(x||m=="file")&&(d.push("//"),(m=this.o)&&d.push(qo(m,Sm,!0),"@"),d.push(encodeURIComponent(String(x)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.s,x!=null&&d.push(":",String(x))),(x=this.l)&&(this.g&&x.charAt(0)!="/"&&d.push("/"),d.push(qo(x,x.charAt(0)=="/"?Yk:Gk,!0))),(x=this.i.toString())&&d.push("?",x),(x=this.m)&&d.push("#",qo(x,Xk)),d.join("")};function vs(d){return new jr(d)}function Bl(d,m,x){d.j=x?Ho(m,!0):m,d.j&&(d.j=d.j.replace(/:$/,""))}function jl(d,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);d.s=m}else d.s=null}function Im(d,m,x){m instanceof Wo?(d.i=m,Jk(d.i,d.h)):(x||(m=qo(m,Qk)),d.i=new Wo(m,d.h))}function ht(d,m,x){d.i.set(m,x)}function zl(d){return ht(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Ho(d,m){return d?m?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function qo(d,m,x){return typeof d=="string"?(d=encodeURI(d).replace(m,Kk),x&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Kk(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Sm=/[#\/\?@]/g,Gk=/[#\?:]/g,Yk=/[#\?]/g,Qk=/[#\?@]/g,Xk=/#/g;function Wo(d,m){this.h=this.g=null,this.i=d||null,this.j=!!m}function Zs(d){d.g||(d.g=new Map,d.h=0,d.i&&Wk(d.i,function(m,x){d.add(decodeURIComponent(m.replace(/\+/g," ")),x)}))}t=Wo.prototype,t.add=function(d,m){Zs(this),this.i=null,d=Vi(this,d);var x=this.g.get(d);return x||this.g.set(d,x=[]),x.push(m),this.h+=1,this};function Am(d,m){Zs(d),m=Vi(d,m),d.g.has(m)&&(d.i=null,d.h-=d.g.get(m).length,d.g.delete(m))}function Cm(d,m){return Zs(d),m=Vi(d,m),d.g.has(m)}t.forEach=function(d,m){Zs(this),this.g.forEach(function(x,C){x.forEach(function(U){d.call(m,U,C,this)},this)},this)},t.na=function(){Zs(this);const d=Array.from(this.g.values()),m=Array.from(this.g.keys()),x=[];for(let C=0;C<m.length;C++){const U=d[C];for(let q=0;q<U.length;q++)x.push(m[C])}return x},t.V=function(d){Zs(this);let m=[];if(typeof d=="string")Cm(this,d)&&(m=m.concat(this.g.get(Vi(this,d))));else{d=Array.from(this.g.values());for(let x=0;x<d.length;x++)m=m.concat(d[x])}return m},t.set=function(d,m){return Zs(this),this.i=null,d=Vi(this,d),Cm(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[m]),this.h+=1,this},t.get=function(d,m){return d?(d=this.V(d),0<d.length?String(d[0]):m):m};function Pm(d,m,x){Am(d,m),0<x.length&&(d.i=null,d.g.set(Vi(d,m),y(x)),d.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],m=Array.from(this.g.keys());for(var x=0;x<m.length;x++){var C=m[x];const q=encodeURIComponent(String(C)),ae=this.V(C);for(C=0;C<ae.length;C++){var U=q;ae[C]!==""&&(U+="="+encodeURIComponent(String(ae[C]))),d.push(U)}}return this.i=d.join("&")};function Vi(d,m){return m=String(m),d.j&&(m=m.toLowerCase()),m}function Jk(d,m){m&&!d.j&&(Zs(d),d.i=null,d.g.forEach(function(x,C){var U=C.toLowerCase();C!=U&&(Am(this,C),Pm(this,U,x))},d)),d.j=m}function Zk(d,m){const x=new jo;if(a.Image){const C=new Image;C.onload=g(er,x,"TestLoadImage: loaded",!0,m,C),C.onerror=g(er,x,"TestLoadImage: error",!1,m,C),C.onabort=g(er,x,"TestLoadImage: abort",!1,m,C),C.ontimeout=g(er,x,"TestLoadImage: timeout",!1,m,C),a.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=d}else m(!1)}function eI(d,m){const x=new jo,C=new AbortController,U=setTimeout(()=>{C.abort(),er(x,"TestPingServer: timeout",!1,m)},1e4);fetch(d,{signal:C.signal}).then(q=>{clearTimeout(U),q.ok?er(x,"TestPingServer: ok",!0,m):er(x,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(U),er(x,"TestPingServer: error",!1,m)})}function er(d,m,x,C,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),C(x)}catch{}}function tI(){this.g=new Ll}function nI(d,m,x){const C=x||"";try{Tm(d,function(U,q){let ae=U;c(U)&&(ae=Bt(U)),m.push(C+q+"="+encodeURIComponent(ae))})}catch(U){throw m.push(C+"type="+encodeURIComponent("_badmap")),U}}function Hl(d){this.l=d.Ub||null,this.j=d.eb||!1}v(Hl,zd),Hl.prototype.g=function(){return new ql(this.l,this.j)},Hl.prototype.i=function(d){return function(){return d}}({});function ql(d,m){Ce.call(this),this.D=d,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(ql,Ce),t=ql.prototype,t.open=function(d,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=m,this.readyState=1,Go(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(m.body=d),(this.D||a).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ko(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Go(this)),this.g&&(this.readyState=3,Go(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Rm(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Rm(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var m=d.value?d.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!d.done}))&&(this.response=this.responseText+=m)}d.done?Ko(this):Go(this),this.readyState==3&&Rm(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,Ko(this))},t.Qa=function(d){this.g&&(this.response=d,Ko(this))},t.ga=function(){this.g&&Ko(this)};function Ko(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Go(d)}t.setRequestHeader=function(d,m){this.u.append(d,m)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],m=this.h.entries();for(var x=m.next();!x.done;)x=x.value,d.push(x[0]+": "+x[1]),x=m.next();return d.join(`\r
`)};function Go(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(ql.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Om(d){let m="";return $(d,function(x,C){m+=C,m+=":",m+=x,m+=`\r
`}),m}function Zd(d,m,x){e:{for(C in x){var C=!1;break e}C=!0}C||(x=Om(x),typeof d=="string"?x!=null&&encodeURIComponent(String(x)):ht(d,m,x))}function yt(d){Ce.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(yt,Ce);var sI=/^https?$/i,rI=["POST","PUT"];t=yt.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,m,x,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);m=m?m.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Wd.g(),this.v=this.o?am(this.o):am(Wd),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(m,String(d),!0),this.B=!1}catch(q){Dm(this,q);return}if(d=x||"",x=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var U in C)x.set(U,C[U]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const q of C.keys())x.set(q,C.get(q));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(x.keys()).find(q=>q.toLowerCase()=="content-type"),U=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(rI,m,void 0))||C||U||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,ae]of x)this.g.setRequestHeader(q,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Lm(this),this.u=!0,this.g.send(d),this.u=!1}catch(q){Dm(this,q)}};function Dm(d,m){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=m,d.m=5,Mm(d),Wl(d)}function Mm(d){d.A||(d.A=!0,$e(d,"complete"),$e(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,$e(this,"complete"),$e(this,"abort"),Wl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wl(this,!0)),yt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Nm(this):this.bb())},t.bb=function(){Nm(this)};function Nm(d){if(d.h&&typeof o<"u"&&(!d.v[1]||_s(d)!=4||d.Z()!=2)){if(d.u&&_s(d)==4)Yt(d.Ea,0,d);else if($e(d,"readystatechange"),_s(d)==4){d.h=!1;try{const ae=d.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var x;if(!(x=m)){var C;if(C=ae===0){var U=String(d.D).match(km)[1]||null;!U&&a.self&&a.self.location&&(U=a.self.location.protocol.slice(0,-1)),C=!sI.test(U?U.toLowerCase():"")}x=C}if(x)$e(d,"complete"),$e(d,"success");else{d.m=6;try{var q=2<_s(d)?d.g.statusText:""}catch{q=""}d.l=q+" ["+d.Z()+"]",Mm(d)}}finally{Wl(d)}}}}function Wl(d,m){if(d.g){Lm(d);const x=d.g,C=d.v[0]?()=>{}:null;d.g=null,d.v=null,m||$e(d,"ready");try{x.onreadystatechange=C}catch{}}}function Lm(d){d.I&&(a.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function _s(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<_s(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var m=this.g.responseText;return d&&m.indexOf(d)==0&&(m=m.substring(d.length)),Rn(m)}};function Vm(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function iI(d){const m={};d=(d.g&&2<=_s(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<d.length;C++){if(I(d[C]))continue;var x=k(d[C]);const U=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const q=m[U]||[];m[U]=q,q.push(x)}T(m,function(C){return C.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Yo(d,m,x){return x&&x.internalChannelParams&&x.internalChannelParams[d]||m}function $m(d){this.Aa=0,this.i=[],this.j=new jo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Yo("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Yo("baseRetryDelayMs",5e3,d),this.cb=Yo("retryDelaySeedMs",1e4,d),this.Wa=Yo("forwardChannelMaxRetries",2,d),this.wa=Yo("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new _m(d&&d.concurrentRequestLimit),this.Da=new tI,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=$m.prototype,t.la=8,t.G=1,t.connect=function(d,m,x,C){hn(0),this.W=d,this.H=m||{},x&&C!==void 0&&(this.H.OSID=x,this.H.OAID=C),this.F=this.X,this.I=Km(this,null,this.W),Gl(this)};function eh(d){if(Fm(d),d.G==3){var m=d.U++,x=vs(d.I);if(ht(x,"SID",d.K),ht(x,"RID",m),ht(x,"TYPE","terminate"),Qo(d,x),m=new Js(d,d.j,m),m.L=2,m.v=zl(vs(x)),x=!1,a.navigator&&a.navigator.sendBeacon)try{x=a.navigator.sendBeacon(m.v.toString(),"")}catch{}!x&&a.Image&&(new Image().src=m.v,x=!0),x||(m.g=Gm(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Ul(m)}Wm(d)}function Kl(d){d.g&&(nh(d),d.g.cancel(),d.g=null)}function Fm(d){Kl(d),d.u&&(a.clearTimeout(d.u),d.u=null),Yl(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function Gl(d){if(!bm(d.h)&&!d.s){d.s=!0;var m=d.Ga;he||xt(),Pe||(he(),Pe=!0),Qe.add(m,d),d.B=0}}function oI(d,m){return xm(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=m.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Bo(f(d.Ga,d,m),qm(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const U=new Js(this,this.j,d);let q=this.o;if(this.S&&(q?(q=b(q),A(q,this.S)):q=this.S),this.m!==null||this.O||(U.H=q,q=null),this.P)e:{for(var m=0,x=0;x<this.i.length;x++){t:{var C=this.i[x];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(m+=C,4096<m){m=x;break e}if(m===4096||x===this.i.length-1){m=x+1;break e}}m=1e3}else m=1e3;m=Bm(this,U,m),x=vs(this.I),ht(x,"RID",d),ht(x,"CVER",22),this.D&&ht(x,"X-HTTP-Session-Id",this.D),Qo(this,x),q&&(this.O?m="headers="+encodeURIComponent(String(Om(q)))+"&"+m:this.m&&Zd(x,this.m,q)),Jd(this.h,U),this.Ua&&ht(x,"TYPE","init"),this.P?(ht(x,"$req",m),ht(x,"SID","null"),U.T=!0,Gd(U,x,null)):Gd(U,x,m),this.G=2}}else this.G==3&&(d?Um(this,d):this.i.length==0||bm(this.h)||Um(this))};function Um(d,m){var x;m?x=m.l:x=d.U++;const C=vs(d.I);ht(C,"SID",d.K),ht(C,"RID",x),ht(C,"AID",d.T),Qo(d,C),d.m&&d.o&&Zd(C,d.m,d.o),x=new Js(d,d.j,x,d.B+1),d.m===null&&(x.H=d.o),m&&(d.i=m.D.concat(d.i)),m=Bm(d,x,1e3),x.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Jd(d.h,x),Gd(x,C,m)}function Qo(d,m){d.H&&$(d.H,function(x,C){ht(m,C,x)}),d.l&&Tm({},function(x,C){ht(m,C,x)})}function Bm(d,m,x){x=Math.min(d.i.length,x);var C=d.l?f(d.l.Na,d.l,d):null;e:{var U=d.i;let q=-1;for(;;){const ae=["count="+x];q==-1?0<x?(q=U[0].g,ae.push("ofs="+q)):q=0:ae.push("ofs="+q);let at=!0;for(let jt=0;jt<x;jt++){let et=U[jt].g;const Xt=U[jt].map;if(et-=q,0>et)q=Math.max(0,U[jt].g-100),at=!1;else try{nI(Xt,ae,"req"+et+"_")}catch{C&&C(Xt)}}if(at){C=ae.join("&");break e}}}return d=d.i.splice(0,x),m.D=d,C}function jm(d){if(!d.g&&!d.u){d.Y=1;var m=d.Fa;he||xt(),Pe||(he(),Pe=!0),Qe.add(m,d),d.v=0}}function th(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Bo(f(d.Fa,d),qm(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,zm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Bo(f(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,hn(10),Kl(this),zm(this))};function nh(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function zm(d){d.g=new Js(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var m=vs(d.qa);ht(m,"RID","rpc"),ht(m,"SID",d.K),ht(m,"AID",d.T),ht(m,"CI",d.F?"0":"1"),!d.F&&d.ja&&ht(m,"TO",d.ja),ht(m,"TYPE","xmlhttp"),Qo(d,m),d.m&&d.o&&Zd(m,d.m,d.o),d.L&&(d.g.I=d.L);var x=d.g;d=d.ia,x.L=1,x.v=zl(vs(m)),x.m=null,x.P=!0,mm(x,d)}t.Za=function(){this.C!=null&&(this.C=null,Kl(this),th(this),hn(19))};function Yl(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function Hm(d,m){var x=null;if(d.g==m){Yl(d),nh(d),d.g=null;var C=2}else if(Xd(d.h,m))x=m.D,wm(d.h,m),C=1;else return;if(d.G!=0){if(m.o)if(C==1){x=m.m?m.m.length:0,m=Date.now()-m.F;var U=d.B;C=Vl(),$e(C,new hm(C,x)),Gl(d)}else jm(d);else if(U=m.s,U==3||U==0&&0<m.X||!(C==1&&oI(d,m)||C==2&&th(d)))switch(x&&0<x.length&&(m=d.h,m.i=m.i.concat(x)),U){case 1:zr(d,5);break;case 4:zr(d,10);break;case 3:zr(d,6);break;default:zr(d,2)}}}function qm(d,m){let x=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(x*=2),x*m}function zr(d,m){if(d.j.info("Error code "+m),m==2){var x=f(d.fb,d),C=d.Xa;const U=!C;C=new jr(C||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Bl(C,"https"),zl(C),U?Zk(C.toString(),x):eI(C.toString(),x)}else hn(2);d.G=0,d.l&&d.l.sa(m),Wm(d),Fm(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),hn(2)):(this.j.info("Failed to ping google.com"),hn(1))};function Wm(d){if(d.G=0,d.ka=[],d.l){const m=Em(d.h);(m.length!=0||d.i.length!=0)&&(_(d.ka,m),_(d.ka,d.i),d.h.i.length=0,y(d.i),d.i.length=0),d.l.ra()}}function Km(d,m,x){var C=x instanceof jr?vs(x):new jr(x);if(C.g!="")m&&(C.g=m+"."+C.g),jl(C,C.s);else{var U=a.location;C=U.protocol,m=m?m+"."+U.hostname:U.hostname,U=+U.port;var q=new jr(null);C&&Bl(q,C),m&&(q.g=m),U&&jl(q,U),x&&(q.l=x),C=q}return x=d.D,m=d.ya,x&&m&&ht(C,x,m),ht(C,"VER",d.la),Qo(d,C),C}function Gm(d,m,x){if(m&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=d.Ca&&!d.pa?new yt(new Hl({eb:x})):new yt(d.pa),m.Ha(d.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ym(){}t=Ym.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ql(){}Ql.prototype.g=function(d,m){return new xn(d,m)};function xn(d,m){Ce.call(this),this.g=new $m(m),this.l=d,this.h=m&&m.messageUrlParams||null,d=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(d?d["X-WebChannel-Content-Type"]=m.messageContentType:d={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(d?d["X-WebChannel-Client-Profile"]=m.va:d={"X-WebChannel-Client-Profile":m.va}),this.g.S=d,(d=m&&m.Sb)&&!I(d)&&(this.g.m=d),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!I(m)&&(this.g.D=m,d=this.h,d!==null&&m in d&&(d=this.h,m in d&&delete d[m])),this.j=new $i(this)}v(xn,Ce),xn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xn.prototype.close=function(){eh(this.g)},xn.prototype.o=function(d){var m=this.g;if(typeof d=="string"){var x={};x.__data__=d,d=x}else this.u&&(x={},x.__data__=Bt(d),d=x);m.i.push(new zk(m.Ya++,d)),m.G==3&&Gl(m)},xn.prototype.N=function(){this.g.l=null,delete this.j,eh(this.g),delete this.g,xn.aa.N.call(this)};function Qm(d){Hd.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var m=d.__sm__;if(m){e:{for(const x in m){d=x;break e}d=void 0}(this.i=d)&&(d=this.i,m=m!==null&&d in m?m[d]:void 0),this.data=m}else this.data=d}v(Qm,Hd);function Xm(){qd.call(this),this.status=1}v(Xm,qd);function $i(d){this.g=d}v($i,Ym),$i.prototype.ua=function(){$e(this.g,"a")},$i.prototype.ta=function(d){$e(this.g,new Qm(d))},$i.prototype.sa=function(d){$e(this.g,new Xm)},$i.prototype.ra=function(){$e(this.g,"b")},Ql.prototype.createWebChannel=Ql.prototype.g,xn.prototype.send=xn.prototype.o,xn.prototype.open=xn.prototype.m,xn.prototype.close=xn.prototype.close,aE=function(){return new Ql},oE=function(){return Vl()},iE=Ur,Df={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$l.NO_ERROR=0,$l.TIMEOUT=8,$l.HTTP_ERROR=6,Vc=$l,fm.COMPLETE="complete",rE=fm,lm.EventType=Fo,Fo.OPEN="a",Fo.CLOSE="b",Fo.ERROR="c",Fo.MESSAGE="d",Ce.prototype.listen=Ce.prototype.K,ua=lm,yt.prototype.listenOnce=yt.prototype.L,yt.prototype.getLastError=yt.prototype.Ka,yt.prototype.getLastErrorCode=yt.prototype.Ba,yt.prototype.getStatus=yt.prototype.Z,yt.prototype.getResponseJson=yt.prototype.Oa,yt.prototype.getResponseText=yt.prototype.oa,yt.prototype.send=yt.prototype.ea,yt.prototype.setWithCredentials=yt.prototype.Ha,sE=yt}).apply(typeof sc<"u"?sc:typeof self<"u"?self:typeof window<"u"?window:{});const nv="@firebase/firestore",sv="4.7.16";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oo="11.8.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi=new Np("@firebase/firestore");function Ki(){return wi.logLevel}function ge(t,...e){if(wi.logLevel<=He.DEBUG){const n=e.map(sg);wi.debug(`Firestore (${Oo}): ${t}`,...n)}}function Ws(t,...e){if(wi.logLevel<=He.ERROR){const n=e.map(sg);wi.error(`Firestore (${Oo}): ${t}`,...n)}}function ho(t,...e){if(wi.logLevel<=He.WARN){const n=e.map(sg);wi.warn(`Firestore (${Oo}): ${t}`,...n)}}function sg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oe(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,lE(t,s,n)}function lE(t,e,n){let s=`FIRESTORE (${Oo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Ws(s),new Error(s)}function it(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||lE(e,r,s)}function Ve(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends ys{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class u4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(nn.UNAUTHENTICATED))}shutdown(){}}class d4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class h4{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){it(this.o===void 0,42304);let s=this.i;const r=l=>this.i!==s?(s=this.i,n(l)):Promise.resolve();let i=new ui;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ui,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ui)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(it(typeof s.accessToken=="string",31837,{l:s}),new cE(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return it(e===null||typeof e=="string",2055,{h:e}),new nn(e)}}class f4{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class p4{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new f4(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(nn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class rv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class g4{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,kn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){it(this.o===void 0,3512);const s=i=>{i.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,ge("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new rv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(it(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new rv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m4(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=m4(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function Ue(t,e){return t<e?-1:t>e?1:0}function Mf(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=t.codePointAt(n),r=e.codePointAt(n);if(s!==r){if(s<128&&r<128)return Ue(s,r);{const i=uE(),o=y4(i.encode(iv(t,n)),i.encode(iv(e,n)));return o!==0?o:Ue(s,r)}}n+=s>65535?2:1}return Ue(t.length,e.length)}function iv(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function y4(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Ue(t[n],e[n]);return Ue(t.length,e.length)}function fo(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov=-62135596800,av=1e6;class Mt{static now(){return Mt.fromMillis(Date.now())}static fromDate(e){return Mt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*av);return new Mt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new _e(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new _e(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<ov)throw new _e(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/av}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-ov;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new Mt(0,0))}static max(){return new Ne(new Mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv="__name__";class as{constructor(e,n,s){n===void 0?n=0:n>e.length&&Oe(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Oe(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return as.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof as?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=as.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return Ue(e.length,n.length)}static compareSegments(e,n){const s=as.isNumericId(e),r=as.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?as.extractNumericId(e).compare(as.extractNumericId(n)):Mf(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return wr.fromString(e.substring(4,e.length-2))}}class pt extends as{construct(e,n,s){return new pt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new _e(Q.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new pt(n)}static emptyPath(){return new pt([])}}const v4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wt extends as{construct(e,n,s){return new Wt(e,n,s)}static isValidIdentifier(e){return v4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===lv}static keyField(){return new Wt([lv])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new _e(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new _e(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new _e(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(s+=a,r++):(i(),r++)}if(i(),o)throw new _e(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wt(n)}static emptyPath(){return new Wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(pt.fromString(e))}static fromName(e){return new Se(pt.fromString(e).popFirst(5))}static empty(){return new Se(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return pt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new pt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl=-1;function _4(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=Ne.fromTimestamp(s===1e9?new Mt(n+1,0):new Mt(n,s));return new Sr(r,Se.empty(),e)}function b4(t){return new Sr(t.readTime,t.key,nl)}class Sr{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Sr(Ne.min(),Se.empty(),nl)}static max(){return new Sr(Ne.max(),Se.empty(),nl)}}function x4(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Se.comparator(t.documentKey,e.documentKey),n!==0?n:Ue(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class E4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Do(t){if(t.code!==Q.FAILED_PRECONDITION||t.message!==w4)throw t;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Oe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new G((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof G?n:G.resolve(n)}catch(n){return G.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):G.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):G.reject(n)}static resolve(e){return new G((n,s)=>{n(e)})}static reject(e){return new G((n,s)=>{s(e)})}static waitFor(e){return new G((n,s)=>{let r=0,i=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++i,o&&i===r&&n()},l=>s(l))}),o=!0,i===r&&n()})}static or(e){let n=G.resolve(!1);for(const s of e)n=n.next(r=>r?G.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new G((s,r)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===i&&s(o)},u=>r(u))}})}static doWhile(e,n){return new G((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}function T4(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Mo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>n.writeSequenceNumber(s))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}md.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg=-1;function yd(t){return t==null}function _u(t){return t===0&&1/t==-1/0}function k4(t){return typeof t=="number"&&Number.isInteger(t)&&!_u(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE="";function I4(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=cv(e)),e=S4(t.get(n),e);return cv(e)}function S4(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case hE:n+="";break;default:n+=i}}return n}function cv(t){return t+hE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Fr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function fE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,n){this.comparator=e,this.root=n||Ht.EMPTY}insert(e,n){return new gt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ht.BLACK,null,null))}remove(e){return new gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ht.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rc(this.root,e,this.comparator,!1)}getReverseIterator(){return new rc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rc(this.root,e,this.comparator,!0)}}class rc{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ht{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??Ht.RED,this.left=r??Ht.EMPTY,this.right=i??Ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new Ht(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Ht.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Oe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Oe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Oe(27949);return e+(this.isRed()?0:1)}}Ht.EMPTY=null,Ht.RED=!0,Ht.BLACK=!1;Ht.EMPTY=new class{constructor(){this.size=0}get key(){throw Oe(57766)}get value(){throw Oe(16141)}get color(){throw Oe(16727)}get left(){throw Oe(29726)}get right(){throw Oe(36894)}copy(e,n,s,r,i){return this}insert(e,n,s){return new Ht(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new dv(this.data.getIterator())}getIteratorFrom(e){return new dv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Nt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Nt(this.comparator);return n.data=e,n}}class dv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this.fields=e,e.sort(Wt.comparator)}static empty(){return new qn([])}unionWith(e){let n=new Nt(Wt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new qn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return fo(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new pE("Invalid base64 string: "+i):i}}(e);return new Kt(n)}static fromUint8Array(e){const n=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new Kt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kt.EMPTY_BYTE_STRING=new Kt("");const A4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ar(t){if(it(!!t,39018),typeof t=="string"){let e=0;const n=A4.exec(t);if(it(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:wt(t.seconds),nanos:wt(t.nanos)}}function wt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Cr(t){return typeof t=="string"?Kt.fromBase64String(t):Kt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE="server_timestamp",mE="__type__",yE="__previous_value__",vE="__local_write_time__";function ig(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[mE])===null||n===void 0?void 0:n.stringValue)===gE}function vd(t){const e=t.mapValue.fields[yE];return ig(e)?vd(e):e}function sl(t){const e=Ar(t.mapValue.fields[vE].timestampValue);return new Mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(e,n,s,r,i,o,a,l,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=u}}const bu="(default)";class rl{constructor(e,n){this.projectId=e,this.database=n||bu}static empty(){return new rl("","")}get isDefaultDatabase(){return this.database===bu}isEqual(e){return e instanceof rl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E="__type__",P4="__max__",ic={mapValue:{}},bE="__vector__",xu="value";function Pr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ig(t)?4:O4(t)?9007199254740991:R4(t)?10:11:Oe(28295,{value:t})}function ms(t,e){if(t===e)return!0;const n=Pr(t);if(n!==Pr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return sl(t).isEqual(sl(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Ar(r.timestampValue),a=Ar(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return Cr(r.bytesValue).isEqual(Cr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return wt(r.geoPointValue.latitude)===wt(i.geoPointValue.latitude)&&wt(r.geoPointValue.longitude)===wt(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return wt(r.integerValue)===wt(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=wt(r.doubleValue),a=wt(i.doubleValue);return o===a?_u(o)===_u(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return fo(t.arrayValue.values||[],e.arrayValue.values||[],ms);case 10:case 11:return function(r,i){const o=r.mapValue.fields||{},a=i.mapValue.fields||{};if(uv(o)!==uv(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ms(o[l],a[l])))return!1;return!0}(t,e);default:return Oe(52216,{left:t})}}function il(t,e){return(t.values||[]).find(n=>ms(n,e))!==void 0}function po(t,e){if(t===e)return 0;const n=Pr(t),s=Pr(e);if(n!==s)return Ue(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ue(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=wt(i.integerValue||i.doubleValue),l=wt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return hv(t.timestampValue,e.timestampValue);case 4:return hv(sl(t),sl(e));case 5:return Mf(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Cr(i),l=Cr(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=Ue(a[c],l[c]);if(u!==0)return u}return Ue(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Ue(wt(i.latitude),wt(o.latitude));return a!==0?a:Ue(wt(i.longitude),wt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return fv(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,c,u;const h=i.fields||{},f=o.fields||{},g=(a=h[xu])===null||a===void 0?void 0:a.arrayValue,v=(l=f[xu])===null||l===void 0?void 0:l.arrayValue,y=Ue(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((u=v==null?void 0:v.values)===null||u===void 0?void 0:u.length)||0);return y!==0?y:fv(g,v)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===ic.mapValue&&o===ic.mapValue)return 0;if(i===ic.mapValue)return 1;if(o===ic.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const f=Mf(l[h],u[h]);if(f!==0)return f;const g=po(a[l[h]],c[u[h]]);if(g!==0)return g}return Ue(l.length,u.length)}(t.mapValue,e.mapValue);default:throw Oe(23264,{Pe:n})}}function hv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ue(t,e);const n=Ar(t),s=Ar(e),r=Ue(n.seconds,s.seconds);return r!==0?r:Ue(n.nanos,s.nanos)}function fv(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=po(n[r],s[r]);if(i)return i}return Ue(n.length,s.length)}function go(t){return Nf(t)}function Nf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=Ar(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Cr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Se.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=Nf(i);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${Nf(n.fields[o])}`;return r+"}"}(t.mapValue):Oe(61005,{value:t})}function $c(t){switch(Pr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=vd(t);return e?16+$c(e):16;case 5:return 2*t.stringValue.length;case 6:return Cr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((r,i)=>r+$c(i),0)}(t.arrayValue);case 10:case 11:return function(s){let r=0;return Fr(s.fields,(i,o)=>{r+=i.length+$c(o)}),r}(t.mapValue);default:throw Oe(13486,{value:t})}}function pv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Lf(t){return!!t&&"integerValue"in t}function og(t){return!!t&&"arrayValue"in t}function gv(t){return!!t&&"nullValue"in t}function mv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Fc(t){return!!t&&"mapValue"in t}function R4(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[_E])===null||n===void 0?void 0:n.stringValue)===bE}function Ra(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Fr(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Ra(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ra(t.arrayValue.values[n]);return e}return Object.assign({},t)}function O4(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===P4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.value=e}static empty(){return new In({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Fc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ra(n)}setAll(e){let n=Wt.emptyPath(),s={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,s,r),s={},r=[],n=a.popLast()}o?s[a.lastSegment()]=Ra(o):r.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());Fc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ms(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];Fc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){Fr(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new In(Ra(this.value))}}function xE(t){const e=[];return Fr(t.fields,(n,s)=>{const r=new Wt([n]);if(Fc(s)){const i=xE(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new qn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e,n,s,r,i,o,a){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new rn(e,0,Ne.min(),Ne.min(),Ne.min(),In.empty(),0)}static newFoundDocument(e,n,s,r){return new rn(e,1,n,Ne.min(),s,r,0)}static newNoDocument(e,n){return new rn(e,2,n,Ne.min(),Ne.min(),In.empty(),0)}static newUnknownDocument(e,n){return new rn(e,3,n,Ne.min(),Ne.min(),In.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=In.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=In.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof rn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,n){this.position=e,this.inclusive=n}}function yv(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=Se.comparator(Se.fromName(o.referenceValue),n.key):s=po(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function vv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ms(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,n="asc"){this.field=e,this.dir=n}}function D4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{}class Pt extends wE{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new N4(e,n,s):n==="array-contains"?new $4(e,s):n==="in"?new F4(e,s):n==="not-in"?new U4(e,s):n==="array-contains-any"?new B4(e,s):new Pt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new L4(e,s):new V4(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(po(n,this.value)):n!==null&&Pr(this.value)===Pr(n)&&this.matchesComparison(po(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Oe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jn extends wE{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new Jn(e,n)}matches(e){return EE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function EE(t){return t.op==="and"}function TE(t){return M4(t)&&EE(t)}function M4(t){for(const e of t.filters)if(e instanceof Jn)return!1;return!0}function Vf(t){if(t instanceof Pt)return t.field.canonicalString()+t.op.toString()+go(t.value);if(TE(t))return t.filters.map(e=>Vf(e)).join(",");{const e=t.filters.map(n=>Vf(n)).join(",");return`${t.op}(${e})`}}function kE(t,e){return t instanceof Pt?function(s,r){return r instanceof Pt&&s.op===r.op&&s.field.isEqual(r.field)&&ms(s.value,r.value)}(t,e):t instanceof Jn?function(s,r){return r instanceof Jn&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((i,o,a)=>i&&kE(o,r.filters[a]),!0):!1}(t,e):void Oe(19439)}function IE(t){return t instanceof Pt?function(n){return`${n.field.canonicalString()} ${n.op} ${go(n.value)}`}(t):t instanceof Jn?function(n){return n.op.toString()+" {"+n.getFilters().map(IE).join(" ,")+"}"}(t):"Filter"}class N4 extends Pt{constructor(e,n,s){super(e,n,s),this.key=Se.fromName(s.referenceValue)}matches(e){const n=Se.comparator(e.key,this.key);return this.matchesComparison(n)}}class L4 extends Pt{constructor(e,n){super(e,"in",n),this.keys=SE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class V4 extends Pt{constructor(e,n){super(e,"not-in",n),this.keys=SE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function SE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>Se.fromName(s.referenceValue))}class $4 extends Pt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return og(n)&&il(n.arrayValue,this.value)}}class F4 extends Pt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&il(this.value.arrayValue,n)}}class U4 extends Pt{constructor(e,n){super(e,"not-in",n)}matches(e){if(il(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!il(this.value.arrayValue,n)}}class B4 extends Pt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!og(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>il(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e,n=null,s=[],r=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.Ie=null}}function _v(t,e=null,n=[],s=[],r=null,i=null,o=null){return new j4(t,e,n,s,r,i,o)}function ag(t){const e=Ve(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>Vf(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),yd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>go(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>go(s)).join(",")),e.Ie=n}return e.Ie}function lg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!D4(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!kE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!vv(t.startAt,e.startAt)&&vv(t.endAt,e.endAt)}function $f(t){return Se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e,n=null,s=[],r=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function z4(t,e,n,s,r,i,o,a){return new No(t,e,n,s,r,i,o,a)}function cg(t){return new No(t)}function bv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function AE(t){return t.collectionGroup!==null}function Oa(t){const e=Ve(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ee.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Nt(Wt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ee.push(new ol(i,s))}),n.has(Wt.keyField().canonicalString())||e.Ee.push(new ol(Wt.keyField(),s))}return e.Ee}function hs(t){const e=Ve(t);return e.de||(e.de=H4(e,Oa(t))),e.de}function H4(t,e){if(t.limitType==="F")return _v(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new ol(r.field,i)});const n=t.endAt?new wu(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new wu(t.startAt.position,t.startAt.inclusive):null;return _v(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function Ff(t,e){const n=t.filters.concat([e]);return new No(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Uf(t,e,n){return new No(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function _d(t,e){return lg(hs(t),hs(e))&&t.limitType===e.limitType}function CE(t){return`${ag(hs(t))}|lt:${t.limitType}`}function Gi(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(r=>IE(r)).join(", ")}]`),yd(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(r=>go(r)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(r=>go(r)).join(",")),`Target(${s})`}(hs(t))}; limitType=${t.limitType})`}function bd(t,e){return e.isFoundDocument()&&function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):Se.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(t,e)&&function(s,r){for(const i of Oa(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(s,r){return!(s.startAt&&!function(o,a,l){const c=yv(o,a,l);return o.inclusive?c<=0:c<0}(s.startAt,Oa(s),r)||s.endAt&&!function(o,a,l){const c=yv(o,a,l);return o.inclusive?c>=0:c>0}(s.endAt,Oa(s),r))}(t,e)}function q4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function PE(t){return(e,n)=>{let s=!1;for(const r of Oa(t)){const i=W4(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function W4(t,e,n){const s=t.field.isKeyField()?Se.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?po(l,c):Oe(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return Oe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Fr(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return fE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K4=new gt(Se.comparator);function Ks(){return K4}const RE=new gt(Se.comparator);function da(...t){let e=RE;for(const n of t)e=e.insert(n.key,n);return e}function OE(t){let e=RE;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function ii(){return Da()}function DE(){return Da()}function Da(){return new Ci(t=>t.toString(),(t,e)=>t.isEqual(e))}const G4=new gt(Se.comparator),Y4=new Nt(Se.comparator);function qe(...t){let e=Y4;for(const n of t)e=e.add(n);return e}const Q4=new Nt(Ue);function X4(){return Q4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ug(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_u(e)?"-0":e}}function ME(t){return{integerValue:""+t}}function J4(t,e){return k4(e)?ME(e):ug(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(){this._=void 0}}function Z4(t,e,n){return t instanceof Eu?function(r,i){const o={fields:{[mE]:{stringValue:gE},[vE]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&ig(i)&&(i=vd(i)),i&&(o.fields[yE]=i),{mapValue:o}}(n,e):t instanceof al?LE(t,e):t instanceof ll?VE(t,e):function(r,i){const o=NE(r,i),a=xv(o)+xv(r.Re);return Lf(o)&&Lf(r.Re)?ME(a):ug(r.serializer,a)}(t,e)}function eL(t,e,n){return t instanceof al?LE(t,e):t instanceof ll?VE(t,e):n}function NE(t,e){return t instanceof Tu?function(s){return Lf(s)||function(i){return!!i&&"doubleValue"in i}(s)}(e)?e:{integerValue:0}:null}class Eu extends xd{}class al extends xd{constructor(e){super(),this.elements=e}}function LE(t,e){const n=$E(e);for(const s of t.elements)n.some(r=>ms(r,s))||n.push(s);return{arrayValue:{values:n}}}class ll extends xd{constructor(e){super(),this.elements=e}}function VE(t,e){let n=$E(e);for(const s of t.elements)n=n.filter(r=>!ms(r,s));return{arrayValue:{values:n}}}class Tu extends xd{constructor(e,n){super(),this.serializer=e,this.Re=n}}function xv(t){return wt(t.integerValue||t.doubleValue)}function $E(t){return og(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function tL(t,e){return t.field.isEqual(e.field)&&function(s,r){return s instanceof al&&r instanceof al||s instanceof ll&&r instanceof ll?fo(s.elements,r.elements,ms):s instanceof Tu&&r instanceof Tu?ms(s.Re,r.Re):s instanceof Eu&&r instanceof Eu}(t.transform,e.transform)}class nL{constructor(e,n){this.version=e,this.transformResults=n}}class Us{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Us}static exists(e){return new Us(void 0,e)}static updateTime(e){return new Us(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Uc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class wd{}function FE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new BE(t.key,Us.none()):new Ed(t.key,t.data,Us.none());{const n=t.data,s=In.empty();let r=new Nt(Wt.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new Pi(t.key,s,new qn(r.toArray()),Us.none())}}function sL(t,e,n){t instanceof Ed?function(r,i,o){const a=r.value.clone(),l=Ev(r.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Pi?function(r,i,o){if(!Uc(r.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Ev(r.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(UE(r)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ma(t,e,n,s){return t instanceof Ed?function(i,o,a,l){if(!Uc(i.precondition,o))return a;const c=i.value.clone(),u=Tv(i.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,s):t instanceof Pi?function(i,o,a,l){if(!Uc(i.precondition,o))return a;const c=Tv(i.fieldTransforms,l,o),u=o.data;return u.setAll(UE(i)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,s):function(i,o,a){return Uc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function rL(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=NE(s.transform,r||null);i!=null&&(n===null&&(n=In.empty()),n.set(s.field,i))}return n||null}function wv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&fo(s,r,(i,o)=>tL(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ed extends wd{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Pi extends wd{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function UE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function Ev(t,e,n){const s=new Map;it(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,a=e.data.field(i.field);s.set(i.field,eL(o,a,n[r]))}return s}function Tv(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,Z4(i,o,e))}return s}class BE extends wd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iL extends wd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&sL(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Ma(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Ma(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=DE();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(r.key)?null:a;const l=FE(o,a);l!==null&&s.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(Ne.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),qe())}isEqual(e){return this.batchId===e.batchId&&fo(this.mutations,e.mutations,(n,s)=>wv(n,s))&&fo(this.baseMutations,e.baseMutations,(n,s)=>wv(n,s))}}class dg{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){it(e.mutations.length===s.length,58842,{fe:e.mutations.length,ge:s.length});let r=function(){return G4}();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new dg(e,n,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct,Ge;function cL(t){switch(t){case Q.OK:return Oe(64938);case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0;default:return Oe(15467,{code:t})}}function jE(t){if(t===void 0)return Ws("GRPC error has no .code"),Q.UNKNOWN;switch(t){case Ct.OK:return Q.OK;case Ct.CANCELLED:return Q.CANCELLED;case Ct.UNKNOWN:return Q.UNKNOWN;case Ct.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case Ct.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case Ct.INTERNAL:return Q.INTERNAL;case Ct.UNAVAILABLE:return Q.UNAVAILABLE;case Ct.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case Ct.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case Ct.NOT_FOUND:return Q.NOT_FOUND;case Ct.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case Ct.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case Ct.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case Ct.ABORTED:return Q.ABORTED;case Ct.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case Ct.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case Ct.DATA_LOSS:return Q.DATA_LOSS;default:return Oe(39323,{code:t})}}(Ge=Ct||(Ct={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uL=new wr([4294967295,4294967295],0);function kv(t){const e=uE().encode(t),n=new nE;return n.update(e),new Uint8Array(n.digest())}function Iv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new wr([n,s],0),new wr([r,i],0)]}class hg{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new ha(`Invalid padding: ${n}`);if(s<0)throw new ha(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new ha(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new ha(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=wr.fromNumber(this.pe)}we(e,n,s){let r=e.add(n.multiply(wr.fromNumber(s)));return r.compare(uL)===1&&(r=new wr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ye).toNumber()}Se(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=kv(e),[s,r]=Iv(n);for(let i=0;i<this.hashCount;i++){const o=this.we(s,r,i);if(!this.Se(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new hg(i,r,n);return s.forEach(a=>o.insert(a)),o}insert(e){if(this.pe===0)return;const n=kv(e),[s,r]=Iv(n);for(let i=0;i<this.hashCount;i++){const o=this.we(s,r,i);this.be(o)}}be(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class ha extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,Rl.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Td(Ne.min(),r,new gt(Ue),Ks(),qe())}}class Rl{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Rl(s,n,qe(),qe(),qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,n,s,r){this.De=e,this.removedTargetIds=n,this.key=s,this.ve=r}}class zE{constructor(e,n){this.targetId=e,this.Ce=n}}class HE{constructor(e,n,s=Kt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class Sv{constructor(){this.Fe=0,this.Me=Av(),this.xe=Kt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=qe(),n=qe(),s=qe();return this.Me.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:Oe(38017,{changeType:i})}}),new Rl(this.xe,this.Oe,e,n,s)}Qe(){this.Ne=!1,this.Me=Av()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,it(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class dL{constructor(e){this.ze=e,this.je=new Map,this.He=Ks(),this.Je=oc(),this.Ye=oc(),this.Ze=new gt(Ue)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const s=this.rt(n);switch(e.state){case 0:this.it(n)&&s.ke(e.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(e.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(n);break;case 3:this.it(n)&&(s.Ge(),s.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),s.ke(e.resumeToken));break;default:Oe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((s,r)=>{this.it(r)&&n(r)})}ot(e){const n=e.targetId,s=e.Ce.count,r=this._t(n);if(r){const i=r.target;if($f(i))if(s===0){const o=new Se(i.path);this.tt(n,o,rn.newNoDocument(o,Ne.min()))}else it(s===1,20013,{expectedCount:s});else{const o=this.ut(n);if(o!==s){const a=this.ct(e),l=a?this.lt(a,e,o):1;if(l!==0){this.st(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,c)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,a;try{o=Cr(s).toUint8Array()}catch(l){if(l instanceof pE)return ho("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new hg(o,r,i)}catch(l){return ho(l instanceof ha?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.pe===0?null:a}lt(e,n,s){return n.Ce.count===s-this.Tt(e,n.targetId)?0:2}Tt(e,n){const s=this.ze.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const o=this.ze.Pt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.tt(n,i,null),r++)}),r}It(e){const n=new Map;this.je.forEach((i,o)=>{const a=this._t(o);if(a){if(i.current&&$f(a.target)){const l=new Se(a.target.path);this.Et(l).has(o)||this.dt(o,l)||this.tt(o,l,rn.newNoDocument(l,e))}i.Le&&(n.set(o,i.qe()),i.Qe())}});let s=qe();this.Ye.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this._t(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(s=s.add(i))}),this.He.forEach((i,o)=>o.setReadTime(e));const r=new Td(e,n,this.Ze,this.He,s);return this.He=Ks(),this.Je=oc(),this.Ye=oc(),this.Ze=new gt(Ue),r}et(e,n){if(!this.it(e))return;const s=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,s),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,s){if(!this.it(e))return;const r=this.rt(e);this.dt(e,n)?r.$e(n,1):r.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),s&&(this.He=this.He.insert(n,s))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new Sv,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Nt(Ue),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Nt(Ue),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||ge("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Sv),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function oc(){return new gt(Se.comparator)}function Av(){return new gt(Se.comparator)}const hL={asc:"ASCENDING",desc:"DESCENDING"},fL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pL={and:"AND",or:"OR"};class gL{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Bf(t,e){return t.useProto3Json||yd(e)?e:{value:e}}function ku(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function mL(t,e){return ku(t,e.toTimestamp())}function fs(t){return it(!!t,49232),Ne.fromTimestamp(function(n){const s=Ar(n);return new Mt(s.seconds,s.nanos)}(t))}function fg(t,e){return jf(t,e).canonicalString()}function jf(t,e){const n=function(r){return new pt(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function WE(t){const e=pt.fromString(t);return it(XE(e),10190,{key:e.toString()}),e}function zf(t,e){return fg(t.databaseId,e.path)}function Vh(t,e){const n=WE(e);if(n.get(1)!==t.databaseId.projectId)throw new _e(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new _e(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Se(GE(n))}function KE(t,e){return fg(t.databaseId,e)}function yL(t){const e=WE(t);return e.length===4?pt.emptyPath():GE(e)}function Hf(t){return new pt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function GE(t){return it(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Cv(t,e,n){return{name:zf(t,e),fields:n.value.mapValue.fields}}function vL(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Oe(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(it(u===void 0||typeof u=="string",58123),Kt.fromBase64String(u||"")):(it(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),Kt.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?Q.UNKNOWN:jE(c.code);return new _e(u,c.message||"")}(o);n=new HE(s,r,i,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=Vh(t,s.document.name),i=fs(s.document.updateTime),o=s.document.createTime?fs(s.document.createTime):Ne.min(),a=new In({mapValue:{fields:s.document.fields}}),l=rn.newFoundDocument(r,i,o,a),c=s.targetIds||[],u=s.removedTargetIds||[];n=new Bc(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=Vh(t,s.document),i=s.readTime?fs(s.readTime):Ne.min(),o=rn.newNoDocument(r,i),a=s.removedTargetIds||[];n=new Bc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=Vh(t,s.document),i=s.removedTargetIds||[];n=new Bc([],i,r,null)}else{if(!("filter"in e))return Oe(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new lL(r,i),a=s.targetId;n=new zE(a,o)}}return n}function _L(t,e){let n;if(e instanceof Ed)n={update:Cv(t,e.key,e.value)};else if(e instanceof BE)n={delete:zf(t,e.key)};else if(e instanceof Pi)n={update:Cv(t,e.key,e.data),updateMask:AL(e.fieldMask)};else{if(!(e instanceof iL))return Oe(16599,{ft:e.type});n={verify:zf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(i,o){const a=o.transform;if(a instanceof Eu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof al)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ll)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Tu)return{fieldPath:o.field.canonicalString(),increment:a.Re};throw Oe(20930,{transform:o.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:mL(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Oe(27497)}(t,e.precondition)),n}function bL(t,e){return t&&t.length>0?(it(e!==void 0,14353),t.map(n=>function(r,i){let o=r.updateTime?fs(r.updateTime):fs(i);return o.isEqual(Ne.min())&&(o=fs(i)),new nL(o,r.transformResults||[])}(n,e))):[]}function xL(t,e){return{documents:[KE(t,e.path)]}}function wL(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=KE(t,r);const i=function(c){if(c.length!==0)return QE(Jn.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(u=>function(f){return{field:Yi(f.field),direction:kL(f.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Bf(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{gt:n,parent:r}}function EL(t){let e=yL(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){it(s===1,65062);const u=n.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let i=[];n.where&&(i=function(h){const f=YE(h);return f instanceof Jn&&TE(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(v){return new ol(Qi(v.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,yd(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,g=h.values||[];return new wu(g,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const f=!h.before,g=h.values||[];return new wu(g,f)}(n.endAt)),z4(e,r,o,i,a,"F",l,c)}function TL(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Oe(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function YE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Qi(n.unaryFilter.field);return Pt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=Qi(n.unaryFilter.field);return Pt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Qi(n.unaryFilter.field);return Pt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Qi(n.unaryFilter.field);return Pt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Oe(61313);default:return Oe(60726)}}(t):t.fieldFilter!==void 0?function(n){return Pt.create(Qi(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Oe(58110);default:return Oe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Jn.create(n.compositeFilter.filters.map(s=>YE(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Oe(1026)}}(n.compositeFilter.op))}(t):Oe(30097,{filter:t})}function kL(t){return hL[t]}function IL(t){return fL[t]}function SL(t){return pL[t]}function Yi(t){return{fieldPath:t.canonicalString()}}function Qi(t){return Wt.fromServerFormat(t.fieldPath)}function QE(t){return t instanceof Pt?function(n){if(n.op==="=="){if(mv(n.value))return{unaryFilter:{field:Yi(n.field),op:"IS_NAN"}};if(gv(n.value))return{unaryFilter:{field:Yi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(mv(n.value))return{unaryFilter:{field:Yi(n.field),op:"IS_NOT_NAN"}};if(gv(n.value))return{unaryFilter:{field:Yi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yi(n.field),op:IL(n.op),value:n.value}}}(t):t instanceof Jn?function(n){const s=n.getFilters().map(r=>QE(r));return s.length===1?s[0]:{compositeFilter:{op:SL(n.op),filters:s}}}(t):Oe(54877,{filter:t})}function AL(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function XE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,n,s,r,i=Ne.min(),o=Ne.min(),a=Kt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new gr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new gr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{constructor(e){this.wt=e}}function PL(t){const e=EL({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Uf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(){this.Cn=new OL}addToCollectionParentIndex(e,n){return this.Cn.add(n),G.resolve()}getCollectionParents(e,n){return G.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return G.resolve()}deleteFieldIndex(e,n){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,n){return G.resolve()}getDocumentsMatchingTarget(e,n){return G.resolve(null)}getIndexType(e,n){return G.resolve(0)}getFieldIndexes(e,n){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,n){return G.resolve(Sr.min())}getMinOffsetFromCollectionGroup(e,n){return G.resolve(Sr.min())}updateCollectionGroup(e,n,s){return G.resolve()}updateIndexEntries(e,n){return G.resolve()}}class OL{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new Nt(pt.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new Nt(pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},JE=41943040;class mn{static withCacheSize(e){return new mn(e,mn.DEFAULT_COLLECTION_PERCENTILE,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mn.DEFAULT_COLLECTION_PERCENTILE=10,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mn.DEFAULT=new mn(JE,mn.DEFAULT_COLLECTION_PERCENTILE,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mn.DISABLED=new mn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new mo(0)}static lr(){return new mo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv="LruGarbageCollector",DL=1048576;function Ov([t,e],[n,s]){const r=Ue(t,n);return r===0?Ue(e,s):r}class ML{constructor(e){this.Er=e,this.buffer=new Nt(Ov),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Ov(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class NL{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){ge(Rv,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Mo(n)?ge(Rv,"Ignoring IndexedDB error during garbage collection: ",n):await Do(n)}await this.mr(3e5)})}}class LL{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return G.resolve(md.le);const s=new ML(n);return this.gr.forEachTarget(e,r=>s.Rr(r.sequenceNumber)).next(()=>this.gr.yr(e,r=>s.Rr(r))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.gr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(Pv)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Pv):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let s,r,i,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),r=this.params.maximumSequenceNumbersToCollect):r=h,o=Date.now(),this.nthSequenceNumber(e,r))).next(h=>(s=h,a=Date.now(),this.removeTargets(e,s,n))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,s))).next(h=>(c=Date.now(),Ki()<=He.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:h})))}}function VL(t,e){return new LL(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(){this.changes=new Ci(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,rn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?G.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(s!==null&&Ma(s.mutation,r,qn.empty(),Mt.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,qe()).next(()=>s))}getLocalViewOfDocuments(e,n,s=qe()){const r=ii();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let o=da();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=ii();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,qe()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,s,r){let i=Ks();const o=Da(),a=function(){return Da()}();return n.forEach((l,c)=>{const u=s.get(c.key);r.has(c.key)&&(u===void 0||u.mutation instanceof Pi)?i=i.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),Ma(u.mutation,c,u.mutation.getFieldMask(),Mt.now())):o.set(c.key,qn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var h;return a.set(c,new FL(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const s=Da();let r=new gt((o,a)=>o-a),i=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=s.get(l)||qn.empty();u=a.applyToLocalView(c,u),s.set(l,u);const h=(r.get(a.batchId)||qe()).add(l);r=r.insert(a.batchId,h)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=DE();u.forEach(f=>{if(!i.has(f)){const g=FE(n.get(f),s.get(f));g!==null&&h.set(f,g),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return G.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,r){return function(o){return Se.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):AE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):G.resolve(ii());let a=nl,l=i;return o.next(c=>G.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(u)?G.resolve():this.remoteDocumentCache.getEntry(e,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,qe())).next(u=>({batchId:a,changes:OE(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Se(n)).next(s=>{let r=da();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=da();return this.indexManager.getCollectionParents(e,i).next(a=>G.forEach(a,l=>{const c=function(h,f){return new No(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,s,r).next(u=>{u.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r))).next(o=>{i.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,rn.newInvalidDocument(u)))});let a=da();return o.forEach((l,c)=>{const u=i.get(l);u!==void 0&&Ma(u.mutation,c,qn.empty(),Mt.now()),bd(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return G.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:fs(r.createTime)}}(n)),G.resolve()}getNamedQuery(e,n){return G.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(r){return{name:r.name,query:PL(r.bundledQuery),readTime:fs(r.readTime)}}(n)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL{constructor(){this.overlays=new gt(Se.comparator),this.Qr=new Map}getOverlay(e,n){return G.resolve(this.overlays.get(n))}getOverlays(e,n){const s=ii();return G.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.bt(e,n,i)}),G.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.Qr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.Qr.delete(s)),G.resolve()}getOverlaysForCollection(e,n,s){const r=ii(),i=n.length+1,o=new Se(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>s&&r.set(l.getKey(),l)}return G.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new gt((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>s){let u=i.get(c.largestBatchId);u===null&&(u=ii(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=ii(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=r)););return G.resolve(a)}bt(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.Qr.get(r.largestBatchId).delete(s.key);this.Qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new aL(n,s));let i=this.Qr.get(n);i===void 0&&(i=qe(),this.Qr.set(n,i)),this.Qr.set(n,i.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(){this.sessionToken=Kt.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(){this.$r=new Nt(Lt.Ur),this.Kr=new Nt(Lt.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const s=new Lt(e,n);this.$r=this.$r.add(s),this.Kr=this.Kr.add(s)}Gr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.zr(new Lt(e,n))}jr(e,n){e.forEach(s=>this.removeReference(s,n))}Hr(e){const n=new Se(new pt([])),s=new Lt(n,e),r=new Lt(n,e+1),i=[];return this.Kr.forEachInRange([s,r],o=>{this.zr(o),i.push(o.key)}),i}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new Se(new pt([])),s=new Lt(n,e),r=new Lt(n,e+1);let i=qe();return this.Kr.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Lt(e,0),s=this.$r.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Lt{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return Se.comparator(e.key,n.key)||Ue(e.Zr,n.Zr)}static Wr(e,n){return Ue(e.Zr,n.Zr)||Se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Nt(Lt.Ur)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new oL(i,n,s,r);this.mutationQueue.push(o);for(const a of r)this.Xr=this.Xr.add(new Lt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return G.resolve(o)}lookupMutationBatch(e,n){return G.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ti(s),i=r<0?0:r;return G.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?rg:this.nr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Lt(n,0),r=new Lt(n,Number.POSITIVE_INFINITY),i=[];return this.Xr.forEachInRange([s,r],o=>{const a=this.ei(o.Zr);i.push(a)}),G.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Nt(Ue);return n.forEach(r=>{const i=new Lt(r,0),o=new Lt(r,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([i,o],a=>{s=s.add(a.Zr)})}),G.resolve(this.ni(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;Se.isDocumentKey(i)||(i=i.child(""));const o=new Lt(new Se(i),0);let a=new Nt(Ue);return this.Xr.forEachWhile(l=>{const c=l.key.path;return!!s.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.Zr)),!0)},o),G.resolve(this.ni(a))}ni(e){const n=[];return e.forEach(s=>{const r=this.ei(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){it(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Xr;return G.forEach(n.mutations,r=>{const i=new Lt(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Xr=s})}sr(e){}containsKey(e,n){const s=new Lt(n,0),r=this.Xr.firstAfterOrEqual(s);return G.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qL{constructor(e){this.ii=e,this.docs=function(){return new gt(Se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ii(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return G.resolve(s?s.document.mutableCopy():rn.newInvalidDocument(n))}getEntries(e,n){let s=Ks();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():rn.newInvalidDocument(r))}),G.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=Ks();const o=n.path,a=new Se(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||x4(b4(u),s)<=0||(r.has(u.key)||bd(n,u))&&(i=i.insert(u.key,u.mutableCopy()))}return G.resolve(i)}getAllFromCollectionGroup(e,n,s,r){Oe(9500)}si(e,n){return G.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new WL(this)}getSize(e){return G.resolve(this.size)}}class WL extends $L{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Br.addEntry(e,r)):this.Br.removeEntry(s)}),G.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{constructor(e){this.persistence=e,this.oi=new Ci(n=>ag(n),lg),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this._i=0,this.ai=new pg,this.targetCount=0,this.ui=mo.cr()}forEachTarget(e,n){return this.oi.forEach((s,r)=>n(r)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this._i&&(this._i=n),G.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new mo(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,G.resolve()}updateTargetData(e,n){return this.Tr(n),G.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.oi.forEach((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.oi.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),G.waitFor(i).next(()=>r)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,n){const s=this.oi.get(n)||null;return G.resolve(s)}addMatchingKeys(e,n,s){return this.ai.Gr(n,s),G.resolve()}removeMatchingKeys(e,n,s){this.ai.jr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),G.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),G.resolve()}getMatchingKeysForTargetId(e,n){const s=this.ai.Yr(n);return G.resolve(s)}containsKey(e,n){return G.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(e,n){this.ci={},this.overlays={},this.li=new md(0),this.hi=!1,this.hi=!0,this.Pi=new zL,this.referenceDelegate=e(this),this.Ti=new KL(this),this.indexManager=new RL,this.remoteDocumentCache=function(r){return new qL(r)}(s=>this.referenceDelegate.Ii(s)),this.serializer=new CL(n),this.Ei=new BL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new jL,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ci[e.toKey()];return s||(s=new HL(n,this.referenceDelegate),this.ci[e.toKey()]=s),s}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,s){ge("MemoryPersistence","Starting transaction:",e);const r=new GL(this.li.next());return this.referenceDelegate.di(),s(r).next(i=>this.referenceDelegate.Ai(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ri(e,n){return G.or(Object.values(this.ci).map(s=>()=>s.containsKey(e,n)))}}class GL extends E4{constructor(e){super(),this.currentSequenceNumber=e}}class gg{constructor(e){this.persistence=e,this.Vi=new pg,this.mi=null}static fi(e){return new gg(e)}get gi(){if(this.mi)return this.mi;throw Oe(60996)}addReference(e,n,s){return this.Vi.addReference(s,n),this.gi.delete(s.toString()),G.resolve()}removeReference(e,n,s){return this.Vi.removeReference(s,n),this.gi.add(s.toString()),G.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),G.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(r=>this.gi.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.gi.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.gi,s=>{const r=Se.fromPath(s);return this.pi(e,r).next(i=>{i||n.removeEntry(r,Ne.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(s=>{s?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return G.or([()=>G.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class Iu{constructor(e,n){this.persistence=e,this.yi=new Ci(s=>I4(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=VL(this,n)}static fi(e,n){return new Iu(e,n)}di(){}Ai(e){return G.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.Sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}Sr(e){let n=0;return this.yr(e,s=>{n++}).next(()=>n)}yr(e,n){return G.forEach(this.yi,(s,r)=>this.Dr(e,s,r).next(i=>i?G.resolve():n(r)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.si(e,o=>this.Dr(e,o,n).next(a=>{a||(s++,i.removeEntry(o,Ne.min()))})).next(()=>i.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),G.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),G.resolve()}removeReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),G.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=$c(e.data.value)),n}Dr(e,n,s){return G.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.yi.get(n);return G.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.ds=s,this.As=r}static Rs(e,n){let s=qe(),r=qe();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new mg(e,n.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return iR()?8:T4(dn())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ws(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Ss(e,n,r,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new YL;return this.bs(e,n,o).next(a=>{if(i.result=a,this.fs)return this.Ds(e,n,o,a.size)})}).next(()=>i.result)}Ds(e,n,s,r){return s.documentReadCount<this.gs?(Ki()<=He.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",Gi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),G.resolve()):(Ki()<=He.DEBUG&&ge("QueryEngine","Query:",Gi(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.ps*r?(Ki()<=He.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",Gi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hs(n))):G.resolve())}ws(e,n){if(bv(n))return G.resolve(null);let s=hs(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Uf(n,null,"F"),s=hs(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=qe(...i);return this.ys.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,s).next(l=>{const c=this.vs(n,a);return this.Cs(n,c,o,l.readTime)?this.ws(e,Uf(n,null,"F")):this.Fs(e,c,n,l)}))})))}Ss(e,n,s,r){return bv(n)||r.isEqual(Ne.min())?G.resolve(null):this.ys.getDocuments(e,s).next(i=>{const o=this.vs(n,i);return this.Cs(n,o,s,r)?G.resolve(null):(Ki()<=He.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Gi(n)),this.Fs(e,o,n,_4(r,nl)).next(a=>a))})}vs(e,n){let s=new Nt(PE(e));return n.forEach((r,i)=>{bd(e,i)&&(s=s.add(i))}),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}bs(e,n,s){return Ki()<=He.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",Gi(n)),this.ys.getDocumentsMatchingQuery(e,n,Sr.min(),s)}Fs(e,n,s,r){return this.ys.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg="LocalStore",XL=3e8;class JL{constructor(e,n,s,r){this.persistence=e,this.Ms=n,this.serializer=r,this.xs=new gt(Ue),this.Os=new Ci(i=>ag(i),lg),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(s)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new UL(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function ZL(t,e,n,s){return new JL(t,e,n,s)}async function eT(t,e){const n=Ve(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Ls(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],a=[];let l=qe();for(const c of r){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(s,l).next(c=>({ks:c,removedBatchIds:o,addedBatchIds:a}))})})}function eV(t,e){const n=Ve(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Bs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const h=c.batch,f=h.keys();let g=G.resolve();return f.forEach(v=>{g=g.next(()=>u.getEntry(l,v)).next(y=>{const _=c.docVersions.get(v);it(_!==null,48541),y.version.compareTo(_)<0&&(h.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),u.addEntry(y)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(a){let l=qe();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function tT(t){const e=Ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function tV(t,e){const n=Ve(t),s=e.snapshotVersion;let r=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Bs.newChangeBuffer({trackRemovals:!0});r=n.xs;const a=[];e.targetChanges.forEach((u,h)=>{const f=r.get(h);if(!f)return;a.push(n.Ti.removeMatchingKeys(i,u.removedDocuments,h).next(()=>n.Ti.addMatchingKeys(i,u.addedDocuments,h)));let g=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(Kt.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):u.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(u.resumeToken,s)),r=r.insert(h,g),function(y,_,w){return y.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=XL?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(f,g,u)&&a.push(n.Ti.updateTargetData(i,g))});let l=Ks(),c=qe();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))}),a.push(nV(i,o,e.documentUpdates).next(u=>{l=u.qs,c=u.Qs})),!s.isEqual(Ne.min())){const u=n.Ti.getLastRemoteSnapshotVersion(i).next(h=>n.Ti.setTargetsMetadata(i,i.currentSequenceNumber,s));a.push(u)}return G.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.xs=r,i))}function nV(t,e,n){let s=qe(),r=qe();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=Ks();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(Ne.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ge(yg,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{qs:o,Qs:r}})}function sV(t,e){const n=Ve(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=rg),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function rV(t,e){const n=Ve(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Ti.getTargetData(s,e).next(i=>i?(r=i,G.resolve(r)):n.Ti.allocateTargetId(s).next(o=>(r=new gr(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Ti.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.xs.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.xs=n.xs.insert(s.targetId,s),n.Os.set(e,s.targetId)),s})}async function qf(t,e,n){const s=Ve(t),r=s.xs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Mo(o))throw o;ge(yg,`Failed to update sequence numbers for target ${e}: ${o}`)}s.xs=s.xs.remove(e),s.Os.delete(r.target)}function Dv(t,e,n){const s=Ve(t);let r=Ne.min(),i=qe();return s.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const h=Ve(l),f=h.Os.get(u);return f!==void 0?G.resolve(h.xs.get(f)):h.Ti.getTargetData(c,u)}(s,o,hs(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,s.Ti.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>s.Ms.getDocumentsMatchingQuery(o,e,n?r:Ne.min(),n?i:qe())).next(a=>(iV(s,q4(e),a),{documents:a,$s:i})))}function iV(t,e,n){let s=t.Ns.get(e)||Ne.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Ns.set(e,s)}class Mv{constructor(){this.activeTargetIds=X4()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class oV{constructor(){this.xo=new Mv,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,s){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Mv,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv="ConnectivityMonitor";class Lv{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){ge(Nv,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){ge(Nv,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ac=null;function Wf(){return ac===null?ac=function(){return 268435456+Math.round(2147483648*Math.random())}():ac++,"0x"+ac.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $h="RestConnection",lV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class cV{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${s}/databases/${r}`,this.Go=this.databaseId.database===bu?`project_id=${s}`:`project_id=${s}&database_id=${r}`}zo(e,n,s,r,i){const o=Wf(),a=this.jo(e,n.toUriEncodedString());ge($h,`Sending RPC '${e}' ${o}:`,a,s);const l={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(l,r,i);const{host:c}=new URL(a),u=kl(c);return this.Jo(e,a,l,s,u).then(h=>(ge($h,`Received RPC '${e}' ${o}: `,h),h),h=>{throw ho($h,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",s),h})}Yo(e,n,s,r,i,o){return this.zo(e,n,s,r,i)}Ho(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Oo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}jo(e,n){const s=lV[e];return`${this.Ko}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zt="WebChannelConnection";class dV extends cV{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=Wf();return new Promise((a,l)=>{const c=new sE;c.setWithCredentials(!0),c.listenOnce(rE.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Vc.NO_ERROR:const h=c.getResponseJson();ge(Zt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case Vc.TIMEOUT:ge(Zt,`RPC '${e}' ${o} timed out`),l(new _e(Q.DEADLINE_EXCEEDED,"Request time out"));break;case Vc.HTTP_ERROR:const f=c.getStatus();if(ge(Zt,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const v=g==null?void 0:g.error;if(v&&v.status&&v.message){const y=function(w){const I=w.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(I)>=0?I:Q.UNKNOWN}(v.status);l(new _e(y,v.message))}else l(new _e(Q.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new _e(Q.UNAVAILABLE,"Connection failed."));break;default:Oe(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{ge(Zt,`RPC '${e}' ${o} completed.`)}});const u=JSON.stringify(r);ge(Zt,`RPC '${e}' ${o} sending request:`,r),c.send(n,"POST",u,s,15)})}T_(e,n,s){const r=Wf(),i=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=aE(),a=oE(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Ho(l.initMessageHeaders,n,s),l.encodeInitMessageHeaders=!0;const u=i.join("");ge(Zt,`Creating RPC '${e}' stream ${r}: ${u}`,l);const h=o.createWebChannel(u,l);let f=!1,g=!1;const v=new uV({Zo:_=>{g?ge(Zt,`Not sending because RPC '${e}' stream ${r} is closed:`,_):(f||(ge(Zt,`Opening RPC '${e}' stream ${r} transport.`),h.open(),f=!0),ge(Zt,`RPC '${e}' stream ${r} sending:`,_),h.send(_))},Xo:()=>h.close()}),y=(_,w,I)=>{_.listen(w,O=>{try{I(O)}catch(L){setTimeout(()=>{throw L},0)}})};return y(h,ua.EventType.OPEN,()=>{g||(ge(Zt,`RPC '${e}' stream ${r} transport opened.`),v.__())}),y(h,ua.EventType.CLOSE,()=>{g||(g=!0,ge(Zt,`RPC '${e}' stream ${r} transport closed`),v.u_())}),y(h,ua.EventType.ERROR,_=>{g||(g=!0,ho(Zt,`RPC '${e}' stream ${r} transport errored. Name:`,_.name,"Message:",_.message),v.u_(new _e(Q.UNAVAILABLE,"The operation could not be completed")))}),y(h,ua.EventType.MESSAGE,_=>{var w;if(!g){const I=_.data[0];it(!!I,16349);const O=I,L=(O==null?void 0:O.error)||((w=O[0])===null||w===void 0?void 0:w.error);if(L){ge(Zt,`RPC '${e}' stream ${r} received error:`,L);const M=L.status;let $=function(E){const A=Ct[E];if(A!==void 0)return jE(A)}(M),T=L.message;$===void 0&&($=Q.INTERNAL,T="Unknown error status: "+M+" with message "+L.message),g=!0,v.u_(new _e($,T)),h.close()}else ge(Zt,`RPC '${e}' stream ${r} received:`,I),v.c_(I)}}),y(a,iE.STAT_EVENT,_=>{_.stat===Df.PROXY?ge(Zt,`RPC '${e}' stream ${r} detected buffering proxy`):_.stat===Df.NOPROXY&&ge(Zt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{v.a_()},0),v}}function Fh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(t){return new gL(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e,n,s=1e3,r=1.5,i=6e4){this.xi=e,this.timerId=n,this.I_=s,this.E_=r,this.d_=i,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(e){this.cancel();const n=Math.floor(this.A_+this.g_()),s=Math.max(0,Date.now()-this.V_),r=Math.max(0,n-s);r>0&&ge("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.A_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.R_=this.xi.enqueueAfterDelay(this.timerId,r,()=>(this.V_=Date.now(),e())),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){this.R_!==null&&(this.R_.skipDelay(),this.R_=null)}cancel(){this.R_!==null&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv="PersistentStream";class sT{constructor(e,n,s,r,i,o,a,l){this.xi=e,this.y_=s,this.w_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.S_=0,this.b_=null,this.D_=null,this.stream=null,this.v_=0,this.C_=new nT(e,n)}F_(){return this.state===1||this.state===5||this.M_()}M_(){return this.state===2||this.state===3}start(){this.v_=0,this.state!==4?this.auth():this.x_()}async stop(){this.F_()&&await this.close(0)}O_(){this.state=0,this.C_.reset()}N_(){this.M_()&&this.b_===null&&(this.b_=this.xi.enqueueAfterDelay(this.y_,6e4,()=>this.B_()))}L_(e){this.k_(),this.stream.send(e)}async B_(){if(this.M_())return this.close(0)}k_(){this.b_&&(this.b_.cancel(),this.b_=null)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}async close(e,n){this.k_(),this.q_(),this.C_.cancel(),this.S_++,e!==4?this.C_.reset():n&&n.code===Q.RESOURCE_EXHAUSTED?(Ws(n.toString()),Ws("Using maximum backoff delay to prevent overloading the backend."),this.C_.m_()):n&&n.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Q_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}Q_(){}auth(){this.state=1;const e=this.U_(this.S_),n=this.S_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.S_===n&&this.K_(s,r)},s=>{e(()=>{const r=new _e(Q.UNKNOWN,"Fetching auth token failed: "+s.message);return this.W_(r)})})}K_(e,n){const s=this.U_(this.S_);this.stream=this.G_(e,n),this.stream.e_(()=>{s(()=>this.listener.e_())}),this.stream.n_(()=>{s(()=>(this.state=2,this.D_=this.xi.enqueueAfterDelay(this.w_,1e4,()=>(this.M_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(r=>{s(()=>this.W_(r))}),this.stream.onMessage(r=>{s(()=>++this.v_==1?this.z_(r):this.onNext(r))})}x_(){this.state=5,this.C_.f_(async()=>{this.state=0,this.start()})}W_(e){return ge(Vv,`close with error: ${e}`),this.stream=null,this.close(4,e)}U_(e){return n=>{this.xi.enqueueAndForget(()=>this.S_===e?n():(ge(Vv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class hV extends sT{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}G_(e,n){return this.connection.T_("Listen",e,n)}z_(e){return this.onNext(e)}onNext(e){this.C_.reset();const n=vL(this.serializer,e),s=function(i){if(!("targetChange"in i))return Ne.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Ne.min():o.readTime?fs(o.readTime):Ne.min()}(e);return this.listener.j_(n,s)}H_(e){const n={};n.database=Hf(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=$f(l)?{documents:xL(i,l)}:{query:wL(i,l).gt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=qE(i,o.resumeToken);const c=Bf(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Ne.min())>0){a.readTime=ku(i,o.snapshotVersion.toTimestamp());const c=Bf(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const s=TL(this.serializer,e);s&&(n.labels=s),this.L_(n)}J_(e){const n={};n.database=Hf(this.serializer),n.removeTarget=e,this.L_(n)}}class fV extends sT{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get Y_(){return this.v_>0}start(){this.lastStreamToken=void 0,super.start()}Q_(){this.Y_&&this.Z_([])}G_(e,n){return this.connection.T_("Write",e,n)}z_(e){return it(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,it(!e.writeResults||e.writeResults.length===0,55816),this.listener.X_()}onNext(e){it(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.C_.reset();const n=bL(e.writeResults,e.commitTime),s=fs(e.commitTime);return this.listener.ea(s,n)}ta(){const e={};e.database=Hf(this.serializer),this.L_(e)}Z_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>_L(this.serializer,s))};this.L_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{}class gV extends pV{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.na=!1}ra(){if(this.na)throw new _e(Q.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,s,r){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.zo(e,jf(n,s),r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new _e(Q.UNKNOWN,i.toString())})}Yo(e,n,s,r,i){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Yo(e,jf(n,s),r,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new _e(Q.UNKNOWN,o.toString())})}terminate(){this.na=!0,this.connection.terminate()}}class mV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){this.ia===0&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve())))}ca(e){this.state==="Online"?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.aa("Offline")))}set(e){this.la(),this.ia=0,e==="Online"&&(this.oa=!1),this.aa(e)}aa(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ua(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.oa?(Ws(n),this.oa=!1):ge("OnlineStateTracker",n)}la(){this.sa!==null&&(this.sa.cancel(),this.sa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei="RemoteStore";class yV{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=i,this.Ea.No(o=>{s.enqueueAndForget(async()=>{Ri(this)&&(ge(Ei,"Restarting streams for network reachability change."),await async function(l){const c=Ve(l);c.Ta.add(4),await Ol(c),c.da.set("Unknown"),c.Ta.delete(4),await Id(c)}(this))})}),this.da=new mV(s,r)}}async function Id(t){if(Ri(t))for(const e of t.Ia)await e(!0)}async function Ol(t){for(const e of t.Ia)await e(!1)}function rT(t,e){const n=Ve(t);n.Pa.has(e.targetId)||(n.Pa.set(e.targetId,e),xg(n)?bg(n):Lo(n).M_()&&_g(n,e))}function vg(t,e){const n=Ve(t),s=Lo(n);n.Pa.delete(e),s.M_()&&iT(n,e),n.Pa.size===0&&(s.M_()?s.N_():Ri(n)&&n.da.set("Unknown"))}function _g(t,e){if(t.Aa.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Lo(t).H_(e)}function iT(t,e){t.Aa.Ke(e),Lo(t).J_(e)}function bg(t){t.Aa=new dL({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Pa.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),Lo(t).start(),t.da._a()}function xg(t){return Ri(t)&&!Lo(t).F_()&&t.Pa.size>0}function Ri(t){return Ve(t).Ta.size===0}function oT(t){t.Aa=void 0}async function vV(t){t.da.set("Online")}async function _V(t){t.Pa.forEach((e,n)=>{_g(t,e)})}async function bV(t,e){oT(t),xg(t)?(t.da.ca(e),bg(t)):t.da.set("Unknown")}async function xV(t,e,n){if(t.da.set("Online"),e instanceof HE&&e.state===2&&e.cause)try{await async function(r,i){const o=i.cause;for(const a of i.targetIds)r.Pa.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.Pa.delete(a),r.Aa.removeTarget(a))}(t,e)}catch(s){ge(Ei,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Su(t,s)}else if(e instanceof Bc?t.Aa.Xe(e):e instanceof zE?t.Aa.ot(e):t.Aa.nt(e),!n.isEqual(Ne.min()))try{const s=await tT(t.localStore);n.compareTo(s)>=0&&await function(i,o){const a=i.Aa.It(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.Pa.get(c);u&&i.Pa.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=i.Pa.get(l);if(!u)return;i.Pa.set(l,u.withResumeToken(Kt.EMPTY_BYTE_STRING,u.snapshotVersion)),iT(i,l);const h=new gr(u.target,l,c,u.sequenceNumber);_g(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(s){ge(Ei,"Failed to raise snapshot:",s),await Su(t,s)}}async function Su(t,e,n){if(!Mo(e))throw e;t.Ta.add(1),await Ol(t),t.da.set("Offline"),n||(n=()=>tT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ge(Ei,"Retrying IndexedDB access"),await n(),t.Ta.delete(1),await Id(t)})}function aT(t,e){return e().catch(n=>Su(t,n,e))}async function Sd(t){const e=Ve(t),n=Rr(e);let s=e.ha.length>0?e.ha[e.ha.length-1].batchId:rg;for(;wV(e);)try{const r=await sV(e.localStore,s);if(r===null){e.ha.length===0&&n.N_();break}s=r.batchId,EV(e,r)}catch(r){await Su(e,r)}lT(e)&&cT(e)}function wV(t){return Ri(t)&&t.ha.length<10}function EV(t,e){t.ha.push(e);const n=Rr(t);n.M_()&&n.Y_&&n.Z_(e.mutations)}function lT(t){return Ri(t)&&!Rr(t).F_()&&t.ha.length>0}function cT(t){Rr(t).start()}async function TV(t){Rr(t).ta()}async function kV(t){const e=Rr(t);for(const n of t.ha)e.Z_(n.mutations)}async function IV(t,e,n){const s=t.ha.shift(),r=dg.from(s,e,n);await aT(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Sd(t)}async function SV(t,e){e&&Rr(t).Y_&&await async function(s,r){if(function(o){return cL(o)&&o!==Q.ABORTED}(r.code)){const i=s.ha.shift();Rr(s).O_(),await aT(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r)),await Sd(s)}}(t,e),lT(t)&&cT(t)}async function $v(t,e){const n=Ve(t);n.asyncQueue.verifyOperationInProgress(),ge(Ei,"RemoteStore received new credentials");const s=Ri(n);n.Ta.add(3),await Ol(n),s&&n.da.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ta.delete(3),await Id(n)}async function AV(t,e){const n=Ve(t);e?(n.Ta.delete(2),await Id(n)):e||(n.Ta.add(2),await Ol(n),n.da.set("Unknown"))}function Lo(t){return t.Ra||(t.Ra=function(n,s,r){const i=Ve(n);return i.ra(),new hV(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{e_:vV.bind(null,t),n_:_V.bind(null,t),i_:bV.bind(null,t),j_:xV.bind(null,t)}),t.Ia.push(async e=>{e?(t.Ra.O_(),xg(t)?bg(t):t.da.set("Unknown")):(await t.Ra.stop(),oT(t))})),t.Ra}function Rr(t){return t.Va||(t.Va=function(n,s,r){const i=Ve(n);return i.ra(),new fV(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:TV.bind(null,t),i_:SV.bind(null,t),X_:kV.bind(null,t),ea:IV.bind(null,t)}),t.Ia.push(async e=>{e?(t.Va.O_(),await Sd(t)):(await t.Va.stop(),t.ha.length>0&&(ge(Ei,`Stopping write stream with ${t.ha.length} pending writes`),t.ha=[]))})),t.Va}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new ui,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,a=new wg(e,n,o,r,i);return a.start(s),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Eg(t,e){if(Ws("AsyncQueue",`${e}: ${t}`),Mo(t))return new _e(Q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{static emptySet(e){return new ro(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Se.comparator(n.key,s.key):(n,s)=>Se.comparator(n.key,s.key),this.keyedMap=da(),this.sortedSet=new gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ro)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new ro;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(){this.ma=new gt(Se.comparator)}track(e){const n=e.doc.key,s=this.ma.get(n);s?e.type!==0&&s.type===3?this.ma=this.ma.insert(n,e):e.type===3&&s.type!==1?this.ma=this.ma.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ma=this.ma.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ma=this.ma.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ma=this.ma.remove(n):e.type===1&&s.type===2?this.ma=this.ma.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ma=this.ma.insert(n,{type:2,doc:e.doc}):Oe(63341,{Vt:e,fa:s}):this.ma=this.ma.insert(n,e)}ga(){const e=[];return this.ma.inorderTraversal((n,s)=>{e.push(s)}),e}}class yo{constructor(e,n,s,r,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new yo(e,n,ro.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_d(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{constructor(){this.pa=void 0,this.ya=[]}wa(){return this.ya.some(e=>e.Sa())}}class PV{constructor(){this.queries=Uv(),this.onlineState="Unknown",this.ba=new Set}terminate(){(function(n,s){const r=Ve(n),i=r.queries;r.queries=Uv(),i.forEach((o,a)=>{for(const l of a.ya)l.onError(s)})})(this,new _e(Q.ABORTED,"Firestore shutting down"))}}function Uv(){return new Ci(t=>CE(t),_d)}async function RV(t,e){const n=Ve(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.wa()&&e.Sa()&&(s=2):(i=new CV,s=e.Sa()?0:1);try{switch(s){case 0:i.pa=await n.onListen(r,!0);break;case 1:i.pa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=Eg(o,`Initialization of query '${Gi(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.ya.push(e),e.Da(n.onlineState),i.pa&&e.va(i.pa)&&Tg(n)}async function OV(t,e){const n=Ve(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.ya.indexOf(e);o>=0&&(i.ya.splice(o,1),i.ya.length===0?r=e.Sa()?0:1:!i.wa()&&e.Sa()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function DV(t,e){const n=Ve(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const a of o.ya)a.va(r)&&(s=!0);o.pa=r}}s&&Tg(n)}function MV(t,e,n){const s=Ve(t),r=s.queries.get(e);if(r)for(const i of r.ya)i.onError(n);s.queries.delete(e)}function Tg(t){t.ba.forEach(e=>{e.next()})}var Kf,Bv;(Bv=Kf||(Kf={})).Ca="default",Bv.Cache="cache";class NV{constructor(e,n,s){this.query=e,this.Fa=n,this.Ma=!1,this.xa=null,this.onlineState="Unknown",this.options=s||{}}va(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new yo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Ma?this.Oa(e)&&(this.Fa.next(e),n=!0):this.Na(e,this.onlineState)&&(this.Ba(e),n=!0),this.xa=e,n}onError(e){this.Fa.error(e)}Da(e){this.onlineState=e;let n=!1;return this.xa&&!this.Ma&&this.Na(this.xa,e)&&(this.Ba(this.xa),n=!0),n}Na(e,n){if(!e.fromCache||!this.Sa())return!0;const s=n!=="Offline";return(!this.options.La||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Oa(e){if(e.docChanges.length>0)return!0;const n=this.xa&&this.xa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Ba(e){e=yo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Ma=!0,this.Fa.next(e)}Sa(){return this.options.source!==Kf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e){this.key=e}}class dT{constructor(e){this.key=e}}class LV{constructor(e,n){this.query=e,this.Ga=n,this.za=null,this.hasCachedResults=!1,this.current=!1,this.ja=qe(),this.mutatedKeys=qe(),this.Ha=PE(e),this.Ja=new ro(this.Ha)}get Ya(){return this.Ga}Za(e,n){const s=n?n.Xa:new Fv,r=n?n.Ja:this.Ja;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,h)=>{const f=r.get(u),g=bd(this.query,h)?h:null,v=!!f&&this.mutatedKeys.has(f.key),y=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let _=!1;f&&g?f.data.isEqual(g.data)?v!==y&&(s.track({type:3,doc:g}),_=!0):this.eu(f,g)||(s.track({type:2,doc:g}),_=!0,(l&&this.Ha(g,l)>0||c&&this.Ha(g,c)<0)&&(a=!0)):!f&&g?(s.track({type:0,doc:g}),_=!0):f&&!g&&(s.track({type:1,doc:f}),_=!0,(l||c)&&(a=!0)),_&&(g?(o=o.add(g),i=y?i.add(u):i.delete(u)):(o=o.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),i=i.delete(u.key),s.track({type:1,doc:u})}return{Ja:o,Xa:s,Cs:a,mutatedKeys:i}}eu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.Ja;this.Ja=e.Ja,this.mutatedKeys=e.mutatedKeys;const o=e.Xa.ga();o.sort((u,h)=>function(g,v){const y=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Oe(20277,{Vt:_})}};return y(g)-y(v)}(u.type,h.type)||this.Ha(u.doc,h.doc)),this.tu(s),r=r!=null&&r;const a=n&&!r?this.nu():[],l=this.ja.size===0&&this.current&&!r?1:0,c=l!==this.za;return this.za=l,o.length!==0||c?{snapshot:new yo(this.query,e.Ja,i,o,e.mutatedKeys,l===0,c,!1,!!s&&s.resumeToken.approximateByteSize()>0),ru:a}:{ru:a}}Da(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ja:this.Ja,Xa:new Fv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ru:[]}}iu(e){return!this.Ga.has(e)&&!!this.Ja.has(e)&&!this.Ja.get(e).hasLocalMutations}tu(e){e&&(e.addedDocuments.forEach(n=>this.Ga=this.Ga.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ga=this.Ga.delete(n)),this.current=e.current)}nu(){if(!this.current)return[];const e=this.ja;this.ja=qe(),this.Ja.forEach(s=>{this.iu(s.key)&&(this.ja=this.ja.add(s.key))});const n=[];return e.forEach(s=>{this.ja.has(s)||n.push(new dT(s))}),this.ja.forEach(s=>{e.has(s)||n.push(new uT(s))}),n}su(e){this.Ga=e.$s,this.ja=qe();const n=this.Za(e.documents);return this.applyChanges(n,!0)}ou(){return yo.fromInitialDocuments(this.query,this.Ja,this.mutatedKeys,this.za===0,this.hasCachedResults)}}const kg="SyncEngine";class VV{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class $V{constructor(e){this.key=e,this._u=!1}}class FV{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.au={},this.uu=new Ci(a=>CE(a),_d),this.cu=new Map,this.lu=new Set,this.hu=new gt(Se.comparator),this.Pu=new Map,this.Tu=new pg,this.Iu={},this.Eu=new Map,this.du=mo.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return this.Au===!0}}async function UV(t,e,n=!0){const s=yT(t);let r;const i=s.uu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.ou()):r=await hT(s,e,n,!0),r}async function BV(t,e){const n=yT(t);await hT(n,e,!0,!1)}async function hT(t,e,n,s){const r=await rV(t.localStore,hs(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return s&&(a=await jV(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&rT(t.remoteStore,r),a}async function jV(t,e,n,s,r){t.Ru=(h,f,g)=>async function(y,_,w,I){let O=_.view.Za(w);O.Cs&&(O=await Dv(y.localStore,_.query,!1).then(({documents:T})=>_.view.Za(T,O)));const L=I&&I.targetChanges.get(_.targetId),M=I&&I.targetMismatches.get(_.targetId)!=null,$=_.view.applyChanges(O,y.isPrimaryClient,L,M);return zv(y,_.targetId,$.ru),$.snapshot}(t,h,f,g);const i=await Dv(t.localStore,e,!0),o=new LV(e,i.$s),a=o.Za(i.documents),l=Rl.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),c=o.applyChanges(a,t.isPrimaryClient,l);zv(t,n,c.ru);const u=new VV(e,n,o);return t.uu.set(e,u),t.cu.has(n)?t.cu.get(n).push(e):t.cu.set(n,[e]),c.snapshot}async function zV(t,e,n){const s=Ve(t),r=s.uu.get(e),i=s.cu.get(r.targetId);if(i.length>1)return s.cu.set(r.targetId,i.filter(o=>!_d(o,e))),void s.uu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await qf(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&vg(s.remoteStore,r.targetId),Gf(s,r.targetId)}).catch(Do)):(Gf(s,r.targetId),await qf(s.localStore,r.targetId,!0))}async function HV(t,e){const n=Ve(t),s=n.uu.get(e),r=n.cu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),vg(n.remoteStore,s.targetId))}async function qV(t,e,n){const s=JV(t);try{const r=await function(o,a){const l=Ve(o),c=Mt.now(),u=a.reduce((g,v)=>g.add(v.key),qe());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let v=Ks(),y=qe();return l.Bs.getEntries(g,u).next(_=>{v=_,v.forEach((w,I)=>{I.isValidDocument()||(y=y.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,v)).next(_=>{h=_;const w=[];for(const I of a){const O=rL(I,h.get(I.key).overlayedDocument);O!=null&&w.push(new Pi(I.key,O,xE(O.value.mapValue),Us.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,w,a)}).next(_=>{f=_;const w=_.applyToLocalDocumentSet(h,y);return l.documentOverlayCache.saveOverlays(g,_.batchId,w)})}).then(()=>({batchId:f.batchId,changes:OE(h)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let c=o.Iu[o.currentUser.toKey()];c||(c=new gt(Ue)),c=c.insert(a,l),o.Iu[o.currentUser.toKey()]=c}(s,r.batchId,n),await Dl(s,r.changes),await Sd(s.remoteStore)}catch(r){const i=Eg(r,"Failed to persist write");n.reject(i)}}async function fT(t,e){const n=Ve(t);try{const s=await tV(n.localStore,e);e.targetChanges.forEach((r,i)=>{const o=n.Pu.get(i);o&&(it(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o._u=!0:r.modifiedDocuments.size>0?it(o._u,14607):r.removedDocuments.size>0&&(it(o._u,42227),o._u=!1))}),await Dl(n,s,e)}catch(s){await Do(s)}}function jv(t,e,n){const s=Ve(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.uu.forEach((i,o)=>{const a=o.view.Da(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=Ve(o);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(const f of h.ya)f.Da(a)&&(c=!0)}),c&&Tg(l)}(s.eventManager,e),r.length&&s.au.j_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function WV(t,e,n){const s=Ve(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Pu.get(e),i=r&&r.key;if(i){let o=new gt(Se.comparator);o=o.insert(i,rn.newNoDocument(i,Ne.min()));const a=qe().add(i),l=new Td(Ne.min(),new Map,new gt(Ue),o,a);await fT(s,l),s.hu=s.hu.remove(i),s.Pu.delete(e),Ig(s)}else await qf(s.localStore,e,!1).then(()=>Gf(s,e,n)).catch(Do)}async function KV(t,e){const n=Ve(t),s=e.batch.batchId;try{const r=await eV(n.localStore,e);gT(n,s,null),pT(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Dl(n,r)}catch(r){await Do(r)}}async function GV(t,e,n){const s=Ve(t);try{const r=await function(o,a){const l=Ve(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(it(h!==null,37113),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(s.localStore,e);gT(s,e,n),pT(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Dl(s,r)}catch(r){await Do(r)}}function pT(t,e){(t.Eu.get(e)||[]).forEach(n=>{n.resolve()}),t.Eu.delete(e)}function gT(t,e,n){const s=Ve(t);let r=s.Iu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Iu[s.currentUser.toKey()]=r}}function Gf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.cu.get(e))t.uu.delete(s),n&&t.au.Vu(s,n);t.cu.delete(e),t.isPrimaryClient&&t.Tu.Hr(e).forEach(s=>{t.Tu.containsKey(s)||mT(t,s)})}function mT(t,e){t.lu.delete(e.path.canonicalString());const n=t.hu.get(e);n!==null&&(vg(t.remoteStore,n),t.hu=t.hu.remove(e),t.Pu.delete(n),Ig(t))}function zv(t,e,n){for(const s of n)s instanceof uT?(t.Tu.addReference(s.key,e),YV(t,s)):s instanceof dT?(ge(kg,"Document no longer in limbo: "+s.key),t.Tu.removeReference(s.key,e),t.Tu.containsKey(s.key)||mT(t,s.key)):Oe(19791,{mu:s})}function YV(t,e){const n=e.key,s=n.path.canonicalString();t.hu.get(n)||t.lu.has(s)||(ge(kg,"New document in limbo: "+n),t.lu.add(s),Ig(t))}function Ig(t){for(;t.lu.size>0&&t.hu.size<t.maxConcurrentLimboResolutions;){const e=t.lu.values().next().value;t.lu.delete(e);const n=new Se(pt.fromString(e)),s=t.du.next();t.Pu.set(s,new $V(n)),t.hu=t.hu.insert(n,s),rT(t.remoteStore,new gr(hs(cg(n.path)),s,"TargetPurposeLimboResolution",md.le))}}async function Dl(t,e,n){const s=Ve(t),r=[],i=[],o=[];s.uu.isEmpty()||(s.uu.forEach((a,l)=>{o.push(s.Ru(l,e,n).then(c=>{var u;if((c||n)&&s.isPrimaryClient){const h=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;s.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){r.push(c);const h=mg.Rs(l.targetId,c);i.push(h)}}))}),await Promise.all(o),s.au.j_(r),await async function(l,c){const u=Ve(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>G.forEach(c,f=>G.forEach(f.ds,g=>u.persistence.referenceDelegate.addReference(h,f.targetId,g)).next(()=>G.forEach(f.As,g=>u.persistence.referenceDelegate.removeReference(h,f.targetId,g)))))}catch(h){if(!Mo(h))throw h;ge(yg,"Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const g=u.xs.get(f),v=g.snapshotVersion,y=g.withLastLimboFreeSnapshotVersion(v);u.xs=u.xs.insert(f,y)}}}(s.localStore,i))}async function QV(t,e){const n=Ve(t);if(!n.currentUser.isEqual(e)){ge(kg,"User change. New user:",e.toKey());const s=await eT(n.localStore,e);n.currentUser=e,function(i,o){i.Eu.forEach(a=>{a.forEach(l=>{l.reject(new _e(Q.CANCELLED,o))})}),i.Eu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Dl(n,s.ks)}}function XV(t,e){const n=Ve(t),s=n.Pu.get(e);if(s&&s._u)return qe().add(s.key);{let r=qe();const i=n.cu.get(e);if(!i)return r;for(const o of i){const a=n.uu.get(o);r=r.unionWith(a.view.Ya)}return r}}function yT(t){const e=Ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=fT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=XV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WV.bind(null,e),e.au.j_=DV.bind(null,e.eventManager),e.au.Vu=MV.bind(null,e.eventManager),e}function JV(t){const e=Ve(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=KV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=GV.bind(null,e),e}class Au{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=kd(e.databaseInfo.databaseId),this.sharedClientState=this.pu(e),this.persistence=this.yu(e),await this.persistence.start(),this.localStore=this.wu(e),this.gcScheduler=this.Su(e,this.localStore),this.indexBackfillerScheduler=this.bu(e,this.localStore)}Su(e,n){return null}bu(e,n){return null}wu(e){return ZL(this.persistence,new QL,e.initialUser,this.serializer)}yu(e){return new ZE(gg.fi,this.serializer)}pu(e){return new oV}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Au.provider={build:()=>new Au};class ZV extends Au{constructor(e){super(),this.cacheSizeBytes=e}Su(e,n){it(this.persistence.referenceDelegate instanceof Iu,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new NL(s,e.asyncQueue,n)}yu(e){const n=this.cacheSizeBytes!==void 0?mn.withCacheSize(this.cacheSizeBytes):mn.DEFAULT;return new ZE(s=>Iu.fi(s,n),this.serializer)}}class Yf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>jv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=QV.bind(null,this.syncEngine),await AV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new PV}()}createDatastore(e){const n=kd(e.databaseInfo.databaseId),s=function(i){return new dV(i)}(e.databaseInfo);return function(i,o,a,l){return new gV(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,r,i,o,a){return new yV(s,r,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>jv(this.syncEngine,n,0),function(){return Lv.C()?new Lv:new aV}())}createSyncEngine(e,n){return function(r,i,o,a,l,c,u){const h=new FV(r,i,o,a,l,c);return u&&(h.Au=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const i=Ve(r);ge(Ei,"RemoteStore shutting down."),i.Ta.add(5),await Ol(i),i.Ea.shutdown(),i.da.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Yf.provider={build:()=>new Yf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e${constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.vu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.vu(this.observer.error,e):Ws("Uncaught Error in snapshot listener:",e.toString()))}Cu(){this.muted=!0}vu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or="FirestoreClient";class t${constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=nn.UNAUTHENTICATED,this.clientId=dE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async o=>{ge(Or,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(ge(Or,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ui;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Eg(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Uh(t,e){t.asyncQueue.verifyOperationInProgress(),ge(Or,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await eT(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Hv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await n$(t);ge(Or,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>$v(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,r)=>$v(e.remoteStore,r)),t._onlineComponents=e}async function n$(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ge(Or,"Using user provided OfflineComponentProvider");try{await Uh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===Q.FAILED_PRECONDITION||r.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;ho("Error using user provided cache. Falling back to memory cache: "+n),await Uh(t,new Au)}}else ge(Or,"Using default OfflineComponentProvider"),await Uh(t,new ZV(void 0));return t._offlineComponents}async function vT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ge(Or,"Using user provided OnlineComponentProvider"),await Hv(t,t._uninitializedComponentsProvider._online)):(ge(Or,"Using default OnlineComponentProvider"),await Hv(t,new Yf))),t._onlineComponents}function s$(t){return vT(t).then(e=>e.syncEngine)}async function qv(t){const e=await vT(t),n=e.eventManager;return n.onListen=UV.bind(null,e.syncEngine),n.onUnlisten=zV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=BV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=HV.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bT(t,e,n){if(!n)throw new _e(Q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function r$(t,e,n,s){if(e===!0&&s===!0)throw new _e(Q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Kv(t){if(!Se.isDocumentKey(t))throw new _e(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Gv(t){if(Se.isDocumentKey(t))throw new _e(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ad(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Oe(12329,{type:typeof t})}function io(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new _e(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ad(t);throw new _e(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT="firestore.googleapis.com",Yv=!0;class Qv{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new _e(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=xT,this.ssl=Yv}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Yv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=JE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<DL)throw new _e(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}r$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_T((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new _e(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new _e(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new _e(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Cd{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new u4;switch(s.type){case"firstParty":return new p4(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new _e(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=Wv.get(n);s&&(ge("ComponentProvider","Removing Datastore"),Wv.delete(n),s.terminate())}(this),Promise.resolve()}}function i$(t,e,n,s={}){var r;t=io(t,Cd);const i=kl(e),o=t._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),l=`${e}:${n}`;i&&(qw(`https://${l}`),Ww("Firestore",!0)),o.host!==xT&&o.host!==l&&ho("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},o),{host:l,ssl:i,emulatorOptions:s});if(!yi(c,a)&&(t._setSettings(c),s.mockUserToken)){let u,h;if(typeof s.mockUserToken=="string")u=s.mockUserToken,h=nn.MOCK_USER;else{u=QP(s.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const f=s.mockUserToken.sub||s.mockUserToken.user_id;if(!f)throw new _e(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new nn(f)}t._authCredentials=new d4(new cE(u,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Oi(this.firestore,e,this._query)}}class bn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Er(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bn(this.firestore,e,this._key)}}class Er extends Oi{constructor(e,n,s){super(e,n,cg(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bn(this.firestore,null,new Se(e))}withConverter(e){return new Er(this.firestore,e,this._path)}}function o$(t,e,...n){if(t=St(t),bT("collection","path",e),t instanceof Cd){const s=pt.fromString(e,...n);return Gv(s),new Er(t,null,s)}{if(!(t instanceof bn||t instanceof Er))throw new _e(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(pt.fromString(e,...n));return Gv(s),new Er(t.firestore,null,s)}}function a$(t,e,...n){if(t=St(t),arguments.length===1&&(e=dE.newId()),bT("doc","path",e),t instanceof Cd){const s=pt.fromString(e,...n);return Kv(s),new bn(t,null,new Se(s))}{if(!(t instanceof bn||t instanceof Er))throw new _e(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(pt.fromString(e,...n));return Kv(s),new bn(t.firestore,t instanceof Er?t.converter:null,new Se(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv="AsyncQueue";class Jv{constructor(e=Promise.resolve()){this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new nT(this,"async_queue_retry"),this.ec=()=>{const s=Fh();s&&ge(Xv,"Visibility state changed to "+s.visibilityState),this.C_.p_()},this.tc=e;const n=Fh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nc(),this.rc(e)}enterRestrictedMode(e){if(!this.ju){this.ju=!0,this.Zu=e||!1;const n=Fh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ec)}}enqueue(e){if(this.nc(),this.ju)return new Promise(()=>{});const n=new ui;return this.rc(()=>this.ju&&this.Zu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.zu.push(e),this.sc()))}async sc(){if(this.zu.length!==0){try{await this.zu[0](),this.zu.shift(),this.C_.reset()}catch(e){if(!Mo(e))throw e;ge(Xv,"Operation failed with retryable error: "+e)}this.zu.length>0&&this.C_.f_(()=>this.sc())}}rc(e){const n=this.tc.then(()=>(this.Yu=!0,e().catch(s=>{throw this.Ju=s,this.Yu=!1,Ws("INTERNAL UNHANDLED ERROR: ",Zv(s)),s}).then(s=>(this.Yu=!1,s))));return this.tc=n,n}enqueueAfterDelay(e,n,s){this.nc(),this.Xu.indexOf(e)>-1&&(n=0);const r=wg.createAndSchedule(this,e,n,s,i=>this.oc(i));return this.Hu.push(r),r}nc(){this.Ju&&Oe(47125,{_c:Zv(this.Ju)})}verifyOperationInProgress(){}async ac(){let e;do e=this.tc,await e;while(e!==this.tc)}uc(e){for(const n of this.Hu)if(n.timerId===e)return!0;return!1}cc(e){return this.ac().then(()=>{this.Hu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Hu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ac()})}lc(e){this.Xu.push(e)}oc(e){const n=this.Hu.indexOf(e);this.Hu.splice(n,1)}}function Zv(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e_(t){return function(n,s){if(typeof n!="object"||n===null)return!1;const r=n;for(const i of s)if(i in r&&typeof r[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Cu extends Cd{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new Jv,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Jv(e),this._firestoreClient=void 0,await e}}}function wT(t,e){const n=typeof t=="object"?t:Vp(),s=typeof t=="string"?t:bu,r=Co(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=GP("firestore");i&&i$(r,...i)}return r}function ET(t){if(t._terminated)throw new _e(Q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||l$(t),t._firestoreClient}function l$(t){var e,n,s;const r=t._freezeSettings(),i=function(a,l,c,u){return new C4(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,_T(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=r.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new t$(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vo(Kt.fromBase64String(e))}catch(n){throw new _e(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new vo(Kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new _e(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new _e(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new _e(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c$=/^__.*__$/;class TT{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Pi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function kT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Oe(40011,{hc:t})}}class Pg{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Pc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get hc(){return this.settings.hc}Tc(e){return new Pg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ic(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Tc({path:s,Ec:!1});return r.dc(e),r}Ac(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Tc({path:s,Ec:!1});return r.Pc(),r}Rc(e){return this.Tc({path:void 0,Ec:!0})}Vc(e){return Pu(e,this.settings.methodName,this.settings.mc||!1,this.path,this.settings.fc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Pc(){if(this.path)for(let e=0;e<this.path.length;e++)this.dc(this.path.get(e))}dc(e){if(e.length===0)throw this.Vc("Document fields must not be empty");if(kT(this.hc)&&c$.test(e))throw this.Vc('Document fields cannot begin and end with "__"')}}class u${constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||kd(e)}gc(e,n,s,r=!1){return new Pg({hc:e,methodName:n,fc:s,path:Wt.emptyPath(),Ec:!1,mc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function IT(t){const e=t._freezeSettings(),n=kd(t._databaseId);return new u$(t._databaseId,!!e.ignoreUndefinedProperties,n)}class Rd extends Sg{_toFieldTransform(e){if(e.hc!==2)throw e.hc===1?e.Vc(`${this._methodName}() can only appear at the top level of your update data`):e.Vc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Rd}}function d$(t,e,n,s){const r=t.gc(1,e,n);AT("Data must be an object, but it was:",r,s);const i=[],o=In.empty();Fr(s,(l,c)=>{const u=Rg(e,l,n);c=St(c);const h=r.Ac(u);if(c instanceof Rd)i.push(u);else{const f=Ml(c,h);f!=null&&(i.push(u),o.set(u,f))}});const a=new qn(i);return new TT(o,a,r.fieldTransforms)}function h$(t,e,n,s,r,i){const o=t.gc(1,e,n),a=[t_(e,s,n)],l=[r];if(i.length%2!=0)throw new _e(Q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)a.push(t_(e,i[f])),l.push(i[f+1]);const c=[],u=In.empty();for(let f=a.length-1;f>=0;--f)if(!m$(c,a[f])){const g=a[f];let v=l[f];v=St(v);const y=o.Ac(g);if(v instanceof Rd)c.push(g);else{const _=Ml(v,y);_!=null&&(c.push(g),u.set(g,_))}}const h=new qn(c);return new TT(u,h,o.fieldTransforms)}function f$(t,e,n,s=!1){return Ml(n,t.gc(s?4:3,e))}function Ml(t,e){if(ST(t=St(t)))return AT("Unsupported field value:",e,t),p$(t,e);if(t instanceof Sg)return function(s,r){if(!kT(r.hc))throw r.Vc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Vc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Ec&&e.hc!==4)throw e.Vc("Nested arrays are not supported");return function(s,r){const i=[];let o=0;for(const a of s){let l=Ml(a,r.Rc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(s,r){if((s=St(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return J4(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=Mt.fromDate(s);return{timestampValue:ku(r.serializer,i)}}if(s instanceof Mt){const i=new Mt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:ku(r.serializer,i)}}if(s instanceof Ag)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof vo)return{bytesValue:qE(r.serializer,s._byteString)};if(s instanceof bn){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.Vc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:fg(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof Cg)return function(o,a){return{mapValue:{fields:{[_E]:{stringValue:bE},[xu]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Vc("VectorValues must only contain numeric values.");return ug(a.serializer,c)})}}}}}}(s,r);throw r.Vc(`Unsupported field value: ${Ad(s)}`)}(t,e)}function p$(t,e){const n={};return fE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fr(t,(s,r)=>{const i=Ml(r,e.Ic(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function ST(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Mt||t instanceof Ag||t instanceof vo||t instanceof bn||t instanceof Sg||t instanceof Cg)}function AT(t,e,n){if(!ST(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const s=Ad(n);throw s==="an object"?e.Vc(t+" a custom object"):e.Vc(t+" "+s)}}function t_(t,e,n){if((e=St(e))instanceof Pd)return e._internalPath;if(typeof e=="string")return Rg(t,e);throw Pu("Field path arguments must be of type string or ",t,!1,void 0,n)}const g$=new RegExp("[~\\*/\\[\\]]");function Rg(t,e,n){if(e.search(g$)>=0)throw Pu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Pd(...e.split("."))._internalPath}catch{throw Pu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Pu(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${s}`),o&&(l+=` in document ${r}`),l+=")"),new _e(Q.INVALID_ARGUMENT,a+t+l)}function m$(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new bn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new y$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Og("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class y$ extends CT{data(){return super.data()}}function Og(t,e){return typeof e=="string"?Rg(t,e):e instanceof Pd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v$(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new _e(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dg{}class PT extends Dg{}function _$(t,e,...n){let s=[];e instanceof Dg&&s.push(e),s=s.concat(n),function(i){const o=i.filter(l=>l instanceof Ng).length,a=i.filter(l=>l instanceof Mg).length;if(o>1||o>0&&a>0)throw new _e(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const r of s)t=r._apply(t);return t}class Mg extends PT{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Mg(e,n,s)}_apply(e){const n=this._parse(e);return RT(e._query,n),new Oi(e.firestore,e.converter,Ff(e._query,n))}_parse(e){const n=IT(e.firestore);return function(i,o,a,l,c,u,h){let f;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new _e(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){s_(h,u);const v=[];for(const y of h)v.push(n_(l,i,y));f={arrayValue:{values:v}}}else f=n_(l,i,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||s_(h,u),f=f$(a,o,h,u==="in"||u==="not-in");return Pt.create(c,u,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Ng extends Dg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ng(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:Jn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,i){let o=r;const a=i.getFlattenedFilters();for(const l of a)RT(o,l),o=Ff(o,l)}(e._query,n),new Oi(e.firestore,e.converter,Ff(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Lg extends PT{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Lg(e,n)}_apply(e){const n=function(r,i,o){if(r.startAt!==null)throw new _e(Q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new _e(Q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ol(i,o)}(e._query,this._field,this._direction);return new Oi(e.firestore,e.converter,function(r,i){const o=r.explicitOrderBy.concat([i]);return new No(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function b$(t,e="asc"){const n=e,s=Og("orderBy",t);return Lg._create(s,n)}function n_(t,e,n){if(typeof(n=St(n))=="string"){if(n==="")throw new _e(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!AE(e)&&n.indexOf("/")!==-1)throw new _e(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(pt.fromString(n));if(!Se.isDocumentKey(s))throw new _e(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return pv(t,new Se(s))}if(n instanceof bn)return pv(t,n._key);throw new _e(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ad(n)}.`)}function s_(t,e){if(!Array.isArray(t)||t.length===0)throw new _e(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function RT(t,e){const n=function(r,i){for(const o of r)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new _e(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new _e(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class x${convertValue(e,n="none"){switch(Pr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Cr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Oe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Fr(e,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertVectorValue(e){var n,s,r;const i=(r=(s=(n=e.fields)===null||n===void 0?void 0:n[xu].arrayValue)===null||s===void 0?void 0:s.values)===null||r===void 0?void 0:r.map(o=>wt(o.doubleValue));return new Cg(i)}convertGeoPoint(e){return new Ag(wt(e.latitude),wt(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=vd(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(sl(e));default:return null}}convertTimestamp(e){const n=Ar(e);return new Mt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=pt.fromString(e);it(XE(s),9688,{name:e});const r=new rl(s.get(1),s.get(3)),i=new Se(s.popFirst(5));return r.isEqual(n)||Ws(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class OT extends CT{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new jc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Og("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class jc extends OT{data(e={}){return super.data(e)}}class w${constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new fa(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new jc(this._firestore,this._userDataWriter,s.key,s,new fa(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new _e(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const l=new jc(r._firestore,r._userDataWriter,a.doc.key,a.doc,new fa(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new jc(r._firestore,r._userDataWriter,a.doc.key,a.doc,new fa(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:E$(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function E$(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Oe(61501,{type:t})}}class DT extends x${constructor(e){super(),this.firestore=e}convertBytes(e){return new vo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new bn(this.firestore,null,n)}}function T$(t,e,n,...s){t=io(t,bn);const r=io(t.firestore,Cu),i=IT(r);let o;return o=typeof(e=St(e))=="string"||e instanceof Pd?h$(i,"updateDoc",t._key,e,n,s):d$(i,"updateDoc",t._key,e),I$(r,[o.toMutation(t._key,Us.exists(!0))])}function k$(t,...e){var n,s,r;t=St(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||e_(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(e_(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(s=h.error)===null||s===void 0?void 0:s.bind(h),e[o+2]=(r=h.complete)===null||r===void 0?void 0:r.bind(h)}let l,c,u;if(t instanceof bn)c=io(t.firestore,Cu),u=cg(t._key.path),l={next:h=>{e[o]&&e[o](S$(c,t,h))},error:e[o+1],complete:e[o+2]};else{const h=io(t,Oi);c=io(h.firestore,Cu),u=h._query;const f=new DT(c);l={next:g=>{e[o]&&e[o](new w$(c,f,h,g))},error:e[o+1],complete:e[o+2]},v$(t._query)}return function(f,g,v,y){const _=new e$(y),w=new NV(g,_,v);return f.asyncQueue.enqueueAndForget(async()=>RV(await qv(f),w)),()=>{_.Cu(),f.asyncQueue.enqueueAndForget(async()=>OV(await qv(f),w))}}(ET(c),u,a,l)}function I$(t,e){return function(s,r){const i=new ui;return s.asyncQueue.enqueueAndForget(async()=>qV(await s$(s),r,i)),i.promise}(ET(t),e)}function S$(t,e,n){const s=n.docs.get(e._key),r=new DT(t);return new OT(t,r,e._key,s,new fa(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){Oo=r})(Po),gs(new Xn("firestore",(s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),a=new Cu(new h4(s.getProvider("auth-internal")),new g4(o,s.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new _e(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rl(c.options.projectId,u)}(o,r),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),$n(nv,sv,e),$n(nv,sv,"esm2017")})();const A$={apiKey:"AIzaSyCqcgvxcgWwG4LmYkSL66x4GYi1KLxuHts",authDomain:"chat-bot-pizzaria.firebaseapp.com",projectId:"chat-bot-pizzaria",storageBucket:"chat-bot-pizzaria.firebasestorage.app",messagingSenderId:"1090893949199",appId:"1:1090893949199:web:cc9724c44f5ef76ea9f67a",measurementId:"G-TQ6E8YLYHD"},Od=ud(A$),En=ng(Od);wT(Od);const C$=new Ds;console.log("Firebase inicializado com sucesso");let Bh=null;async function Dd(){return await E1()?(Bh||(Bh=KD(Od),console.log("Firebase Messaging suportado e inicializado.")),Bh):(console.warn("Firebase Messaging NO suportado neste navegador."),null)}async function Ru(t){const e=await Dd();if(!e)return console.warn("No foi possvel obter a instncia de Messaging. Abortando solicitao de token."),null;try{if(await Notification.requestPermission()==="granted"){console.log("Permisso de notificao concedida.");const s=await GD(e,{vapidKey:"BIs0n17mt2gj5vBTzyM5znHMDOgI6lcOiGanKQW2SiPlFcgmSvLpBu-d0txnoNKLivhbsUD0iwHHSBQk_LNgQ0A"});return s?(console.log("FCM Registration Token:",s),await Xe.post("/fcm/save-token",{userId:t,fcmToken:s}),console.log("Token enviado para o backend com sucesso."),s):(console.warn("Nenhum token de registro de FCM disponvel."),null)}else return console.warn("Permisso de notificao negada."),null}catch(n){return console.error("Erro ao obter token de notificao:",n),null}}async function MT(){const t=await Dd();t?YD(t,e=>{var n;if(console.log("Mensagem recebida em primeiro plano:",e),"Notification"in window&&Notification.permission==="granted"){const s=new Notification(e.notification.title,{body:e.notification.body,icon:e.notification.icon||"/favicon.ico",badge:"/favicon.ico",tag:((n=e.data)==null?void 0:n.orderId)||"general",requireInteraction:!0,actions:[{action:"view",title:"Ver Pedido"},{action:"close",title:"Fechar"}]});s.onclick=function(){var r;window.focus(),(r=e.data)!=null&&r.orderId&&console.log("Abrindo pedido:",e.data.orderId),s.close()}}else alert(`Notificao: ${e.notification.title} - ${e.notification.body}`)}):console.warn("No foi possvel configurar notificaes em primeiro plano: Messaging no suportado.")}const Xe=It.create({baseURL:"https://lemming-crucial-smoothly.ngrok-free.app/api",timeout:1e4,headers:{"ngrok-skip-browser-warning":"true"}});Xe.interceptors.request.use(async t=>{const e=t.url.includes("/admin/"),n=t.url.includes("/delivery-men/"),s=t.url.includes("/auth/");if((e||n)&&En.currentUser)try{const r=await En.currentUser.getIdToken(!0);t.headers.Authorization=`Bearer ${r}`,console.log("httpClient: ID Token anexado  requisio admin/delivery-men.")}catch(r){console.error("httpClient: Erro ao obter ID Token para requisio admin/delivery-men:",r),delete t.headers.Authorization}else!e&&!n&&!s&&delete t.headers.Authorization;return t},t=>Promise.reject(t));Xe.interceptors.response.use(t=>t,async t=>{var n,s;const e=(n=t.response)==null?void 0:n.status;return e===401||e===403?(console.warn("Sesso expirada ou acesso negado. Redirecionando para login admin."),localStorage.removeItem("adminAuthToken"),localStorage.removeItem("adminUser"),En.currentUser&&await En.signOut(),fi.currentRoute.value.path!=="/admin/login"&&fi.push("/admin/login")):console.error("Erro na requisio:",((s=t.response)==null?void 0:s.data)||t.message),Promise.reject(t)});const r_="cached_categories",i_="categories_last_updated",P$=60*60*1e3;function R$(t,e,n=j([])){const s=j(!1),r=()=>s.value=!s.value,i=j([]),o=j([]),a=j({}),l=(f,g)=>{const v=new Set;g.forEach(O=>{var L;(L=O.categoryIds)==null||L.forEach(M=>v.add(M))});const y=f.filter(O=>v.has(O.id)),_=new Set(y.map(O=>O.id)),w=[],I={};f.filter(O=>!O.parent_id).forEach(O=>{let L=!1;_.has(O.id)&&(L=!0);const $=f.filter(T=>T.parent_id===O.id).filter(T=>_.has(T.id));$.length>0&&(L=!0),L&&(w.push(O),I[O.id]=$)}),o.value=w,a.value=I},c=async()=>{try{const{data:f}=await Xe.get("/categories");localStorage.setItem(r_,JSON.stringify(f)),localStorage.setItem(i_,Date.now().toString()),i.value=f,l(f,n.value)}catch(f){console.error("Erro ao carregar categorias:",f)}},u=(f,g=!1)=>{setTimeout(()=>s.value=!1,100),f&&g&&[...(a.value[f]||[]).map(y=>y.id)]},h=f=>!e||!e.value?!1:f.some(g=>e.value.includes(g));return mt(()=>{const f=localStorage.getItem(r_),g=localStorage.getItem(i_);if(f&&g&&Date.now()-parseInt(g,10)<P$)try{const y=JSON.parse(f);i.value=y,l(y,n.value)}catch(y){console.warn("Cache de categorias corrompido. Recarregando...",y),c()}else c()}),kt(n,f=>{i.value.length>0&&f&&f.length>0?l(i.value,f):i.value.length>0&&(!f||f.length===0)&&(o.value=[],a.value={})},{deep:!0}),{open:s,toggleMenu:r,parentCategories:o,childCategories:a,selectCategory:u,isSelected:h}}const NT=Symbol("selectedCategoryIds"),LT=Symbol("filterProductsByCategory"),VT=Symbol("allProducts"),O$={class:"bg-red-400 fixed top-0 w-full z-50"},D$={class:"relative px-4 hidden md:block"},M$={class:"container mx-auto flex justify-between items-center"},N$={class:"space-x-6 text-white flex"},L$=["onClick"],V$={key:0,class:"fa-solid fa-chevron-down fa-2xs pt-3 ml-1 group-hover:rotate-180 group-hover:text-yellow-300 transition duration-200 ease-in-out"},$$={key:1,class:"absolute bg-white p-3 w-52 top-12 transform scale-0 group-hover:scale-100 transition duration-150 ease-in-out origin-top shadow-lg rounded-md"},F$=["onClick"],U$={class:"flex space-x-2"},B$={class:"py-2 px-4 bg-gray-50 dark:bg-gray-800 flex justify-between items-center md:hidden w-screen"},j$={key:1},z$={type:"button",name:"mobile-menu",class:"p-2 text-gray-600 dark:text-gray-300 text-sm relative"},H$={class:"flex flex-col w-48 items-start"},q$=["onClick"],W$={key:0,class:"ml-3"},K$=["onClick"],G$={key:3,class:"dark:text-white ml-4 truncate flex justify-center items-center title-font p-2"},Y$={key:4,src:hw,alt:"Pizzaria da Nonna",class:"object-contain h-10 w-full"},Q$={class:"flex-none"},X$={__name:"NewHader",props:{title:{type:String,required:!1,default:"Pizzaria da Nonna"},showBackButton:{type:Boolean,default:!1}},setup(t){const e=j(!1),n=()=>{e.value=!e.value,console.log("Menu mobile is:",e.value)},s=Io(),r=ye(()=>s.items.length),i=$t(NT,j(null)),o=$t(LT,()=>{console.warn("filterByCategory function not provided to NewHeader.")}),a=$t(VT,j([])),{parentCategories:l,childCategories:c,isSelected:u}=R$(null,i,a),h=(v,y=!1)=>{let _=null;if(v)if(y){const w=c.value[v]||[];_=[v,...w.map(I=>I.id)]}else _=[v];o(_)},f=(v,y=!1)=>{h(v,y),n()};function g(){window.history.back()}return(v,y)=>(P(),D("header",O$,[p("nav",D$,[p("div",M$,[y[4]||(y[4]=p("div",{class:"text-white text-2xl font-bold"},"Pizzaria da Nonna",-1)),p("ul",N$,[p("li",{onClick:y[0]||(y[0]=_=>h(null)),class:"py-4"},[p("span",{class:ce(["cursor-pointer whitespace-nowrap",te(i)===null||te(i)&&te(i).length===0?"text-yellow-300":""])},y[2]||(y[2]=[p("i",{class:"fa fa-list"},null,-1),ee(" Todas")]),2)]),(P(!0),D(ve,null,Me(te(l),_=>{var w,I,O;return P(),D("li",{class:"group flex relative py-4",key:_.id},[p("span",{onClick:L=>h(_.id,!0),class:ce(["cursor-pointer whitespace-nowrap ",te(u)([_.id,...((w=te(c)[_.id])==null?void 0:w.map(L=>L.id))||[]])?"text-yellow-300":"group-hover:text-yellow-300"])},[p("i",{class:ce(_.icon)},null,2),ee(" "+B(_.name),1)],10,L$),((I=te(c)[_.id])==null?void 0:I.length)>0?(P(),D("i",V$)):J("",!0),((O=te(c)[_.id])==null?void 0:O.length)>0?(P(),D("ul",$$,[(P(!0),D(ve,null,Me(te(c)[_.id],L=>{var M;return P(),D("li",{key:L.id,onClick:$=>h(L.id),class:ce(["cursor-pointer p-1 whitespace-nowrap rounded-md text-gray-600 hover:text-red-400 hover:bg-gray-300",(M=te(i))!=null&&M.includes(L.id)?"text-red-400 font-bold bg-gray-200":"text-gray-600 hover:text-red-400 hover:bg-gray-300"])},[p("span",null,[p("i",{class:ce(L.icon)},null,2),ee(" "+B(L.name),1)])],10,F$)}),128))])):J("",!0)])}),128)),y[3]||(y[3]=p("li",{class:"py-4"},[p("a",{href:"#contact",class:"hover:text-yellow-300"},"Contato")],-1))]),p("div",U$,[re(ty,{"cart-count":r.value},null,8,["cart-count"])])])]),p("div",B$,[t.showBackButton?(P(),D("button",{key:0,type:"button",name:"goback",onClick:Mn(g,["prevent"]),class:"flex-none"},y[5]||(y[5]=[p("i",{class:"fa fa-arrow-left text-gray-400 dark:text-gray-200 text-md"},null,-1)]))):(P(),D("div",j$,[p("button",z$,[p("i",{onClick:n,class:ce(["h-4 fas text-sm",[e.value?"fa-xmark":"fa-bars"]])},null,2),p("div",{class:ce(["absolute group-hover:translate-x-2 transition-all duration-200 ease-in-out z-50 p-2 dark:bg-gray-700 rounded-md -top-2 -left-5 h-screen flex flex-col space-y-2",[e.value?"translate-x-0 bg-white":"-translate-x-full"]])},[p("div",{class:"flex-row-reverse flex h-4 w-full"},[p("i",{onClick:n,class:"fas text-xl fa-xmark"})]),p("ul",H$,[p("li",{onClick:y[1]||(y[1]=_=>f(null)),class:ce(["flex space-x-2 items-center w-full p-2 text-sm hover:bg-gray-400/30 hover:rounded-md cursor-pointer whitespace-nowrap",[te(i)===null||te(i)&&te(i).length===0?"text-red-400 bg-gray-400/30 rounded-md":""]])},y[6]||(y[6]=[p("i",{class:"fa fa-list"},null,-1),ee(),p("span",null,"Ver tudo",-1)]),2),(P(!0),D(ve,null,Me(te(l),_=>{var w,I;return P(),D("li",{key:_.id,class:ce(["flex flex-col w-full mt-1 whitespace-nowrap group",["cursor-pointer whitespace-nowrap ",te(u)([_.id,...((w=te(c)[_.id])==null?void 0:w.map(O=>O.id))||[]])?"text-red-400 group-hover:bg-pink-400":"group-hover:text-red-400"]])},[p("span",{class:"flex space-x-1 items-center w-full p-2 text-sm hover:bg-gray-400/30 hover:rounded-md cursor-pointer whitespace-nowrap",onClick:O=>f(_.id,!0)},[p("i",{class:ce(["text-xs text-gray-400",_.icon])},null,2),p("span",null,B(_.name),1)],8,q$),((I=te(c)[_.id])==null?void 0:I.length)>0?(P(),D("ul",W$,[(P(!0),D(ve,null,Me(te(c)[_.id],O=>{var L;return P(),D("li",{class:ce(["cursor-pointer p-2 whitespace-nowrap rounded-md flex justify-start mb-1 w-full",(L=te(i))!=null&&L.includes(O.id)?"text-red-400  bg-gray-400/30":"text-gray-600 dark:text-gray-100 hover:text-red-400 hover:bg-gray-400/30 "]),key:O.id,onClick:M=>f(O.id)},[p("span",null,[p("i",{class:ce(["text-xs text-gray-400",O.icon])},null,2),ee(" "+B(O.name),1)])],10,K$)}),128))])):J("",!0)],2)}),128))])],2)])])),e.value?(P(),D("div",{key:2,onClick:n,class:"bg-black/50 backdrop-blur-sm w-screen h-screen z-20 top-0 left-0 absolute"})):J("",!0),t.showBackButton?(P(),D("span",G$,B(t.title),1)):(P(),D("img",Y$)),p("div",Q$,[re(ty,{"cart-count":r.value},null,8,["cart-count"])])])]))}},J$=Gt(X$,[["__scopeId","data-v-d090641f"]]),Z$={class:"py-4 h-auto pb-16 md:pb-0 pt-20 m-auto"},Di={__name:"AppLayout",props:{isHeaderVisible:{type:Boolean,default:!0},title:{type:String,default:"Pizzaria da Nonna"},topNavVisible:{type:Boolean,default:!1},topNavTitle:{type:String,default:"Pizzaria da Nonna"},showBackButton:{type:Boolean,default:!0},mobileMenuVisible:{type:Boolean,default:!0}},setup(t){const e=t;return(n,s)=>(P(),D("div",null,[re(J$,{title:t.topNavTitle,showBackButton:t.showBackButton},null,8,["title","showBackButton"]),p("main",Z$,[Tp(n.$slots,"default")]),e.mobileMenuVisible?(P(),Ye(s2,{key:0})):J("",!0)]))}},$T=Ju("favorite",()=>{const t=j(JSON.parse(localStorage.getItem("favorites")||"[]"));function e(i){const o=t.value.findIndex(a=>a.id===i.id);o!==-1?t.value.splice(o,1):t.value.push(i)}function n(i){return t.value.some(o=>o.id===i)}function s(){t.value=[]}kt(t,i=>{localStorage.setItem("favorites",JSON.stringify(i))},{deep:!0});const r=ye(()=>t.value.length);return{favorites:t,toggleFavorite:e,isFavorite:n,clearFavorites:s,count:r}}),e3={__name:"IconFavorite",props:{product:{type:Object}},setup(t){const e=$T(),n=t,s=()=>{n.product?e.toggleFavorite(n.product):console.warn("Tentativa de adicionar/remover favorito sem um produto.")},r=()=>n.product&&e.isFavorite(n.product.id);return(i,o)=>(P(),D("button",{onClick:s,class:"rounded-full h-6 w-6 border border-gray-400/50"},[p("i",{class:ce([r()?"fas fa-heart text-red-500 animate__animated animate__heartBeat":"fas fa-heart text-gray-400","hover:text-red-500 hover:animate-pulse"])},null,2)]))}},t3={class:"flex items-baseline gap-[2px] text-amber-300 text-[11px]"},n3=["onMouseover","onClick"],s3={key:2,class:"dark:text-gray-200 text-gray-500"},r3={key:3,class:"ml-2 text-sm text-gray-500"},i3={key:4,class:"ml-2 text-sm text-red-500"},jh="voted_products",o3={__name:"Rating",props:{productId:{type:String,required:!0},rating:{type:Number,required:!0,default:0},showTextRating:{type:Boolean,required:!1,default:!1},ratingText:{type:Number,required:!1,default:0}},setup(t){const e=t,n=j(e.rating),s=j(0),r=j(!1),i=j(!1),o=j(null);ye(()=>Math.floor(n.value)),ye(()=>n.value%1>=.5);const a=()=>{const u=JSON.parse(localStorage.getItem(jh)||"[]");r.value=u.includes(e.productId)},l=()=>{let u=JSON.parse(localStorage.getItem(jh)||"[]");u.includes(e.productId)||(u.push(e.productId),localStorage.setItem(jh,JSON.stringify(u))),r.value=!0},c=async u=>{var h,f;if(!(r.value||i.value)){i.value=!0,o.value=null;try{const g=await Xe.put(`/products/${e.productId}/rate`,{stars:u});n.value=g.data.rating,l(),console.log("Voto registrado com sucesso:",g.data)}catch(g){console.error("Erro ao votar:",g),o.value=((f=(h=g.response)==null?void 0:h.data)==null?void 0:f.error)||"Erro ao registrar voto."}finally{i.value=!1}}};return mt(()=>{a(),e.ratingText===0&&e.rating>0?n.value=e.rating:e.ratingText>0&&(n.value=e.ratingText)}),(u,h)=>(P(),D("div",t3,[!r.value&&!i.value?(P(),D(ve,{key:0},Me(5,f=>p("i",{key:f,class:ce(["fas fa-star cursor-pointer transition-colors duration-200",f<=s.value?"text-amber-500":"text-amber-300"]),onMouseover:g=>s.value=f,onMouseleave:h[0]||(h[0]=g=>s.value=0),onClick:g=>c(f)},null,42,n3)),64)):(P(),D(ve,{key:1},Me(5,f=>p("i",{key:f,class:ce({"fas fa-star":f<=n.value,"fas fa-star-half-alt":f===Math.floor(n.value)+1&&n.value%1>=.5,"far fa-star text-gray-400 dark:text-gray-500":f>n.value})},null,2)),64)),t.showTextRating?(P(),D("span",s3," ("+B(Number(n.value).toFixed(1))+")",1)):J("",!0),i.value?(P(),D("span",r3,"Votando...")):J("",!0),o.value?(P(),D("span",i3,B(o.value),1)):J("",!0)]))}},FT=Gt(o3,[["__scopeId","data-v-941aface"]]),a3={class:"rounded-[8px] p-2 shadow flex flex-col justify-between bg-white dark:bg-gray-800 gap-4 border border-gray-200 dark:border-gray-700"},l3={class:"font-semibold dark:text-gray-200 truncate"},c3={class:"flex justify-between items-center"},u3={class:"flex flex-row justify-between items-baseline"},d3={class:"text-sm font-medium text-gray-800 dark:text-white"},UT={__name:"ProductCard",props:{product:{type:Object,required:!0,default:()=>({name:"Sem nome",price:[0],image:null})}},setup(t){return(e,n)=>{const s=To("router-link");return P(),D("div",a3,[re(s,{to:"/produto/"+t.product.slug},{default:pe(()=>[p("div",{class:ce(["h-32 rounded-md bg-cover bg-center shadow-md hover:shadow-lg object-contain",{"bg-emerald-500 dark:bg-amber-400":!t.product.img}]),style:wo({backgroundImage:t.product.img?`url(${t.product.img})`:"none"})},null,6)]),_:1},8,["to"]),p("span",l3,B(t.product.name||"Produto sem nome"),1),p("div",c3,[re(FT,{"product-id":t.product.id,rating:t.product.rating,"show-text-rating":!0,"rating-text":t.product.rating},null,8,["product-id","rating","rating-text"]),re(e3,{product:t.product},null,8,["product"])]),n[1]||(n[1]=p("div",{class:"hidden"},null,-1)),p("div",u3,[p("span",d3,B(e.$formatPrice(t.product.price[0])),1),re(s,{to:"/produto/"+t.product.slug,class:"bg-gray-900 px-3 py-1 rounded-md shadow-md dark:shadow-gray-800 shadow-gray-400 cursor-pointer hover:bg-gray-950"},{default:pe(()=>n[0]||(n[0]=[p("i",{class:"fa fa-cart-plus text-white"},null,-1)])),_:1,__:[0]},8,["to"])])])}}},h3={},f3={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"};function p3(t,e){return P(),D("div",f3,[(P(),D(ve,null,Me(6,n=>p("div",{key:n,class:"animate-pulse bg-white dark:bg-gray-800 p-4 rounded-xl shadow-md"},e[0]||(e[0]=[p("div",{class:"w-full h-40 bg-gray-300 dark:bg-gray-700 rounded mb-4"},null,-1),p("div",{class:"h-5 bg-gray-300 dark:bg-gray-700 rounded w-3/4 mb-2"},null,-1),p("div",{class:"h-4 bg-gray-300 dark:bg-gray-700 rounded w-1/2"},null,-1)]))),64))])}const g3=Gt(h3,[["render",p3]]),o_="cached_products",a_="products_last_updated",m3=60*60*1e3;function y3(){const t=j([]),e=j(!0),n=j(null),s=j(""),r=j("name_asc"),i=ye(()=>{let l=[...t.value];if(n.value&&(l=l.filter(c=>{var u;return(u=c.categoryIds)==null?void 0:u.some(h=>n.value.includes(h))})),s.value.trim()!==""){const c=s.value.toLowerCase();l=l.filter(u=>{var h;return(h=u.name)==null?void 0:h.toLowerCase().includes(c)})}switch(r.value){case"name_asc":l.sort((c,u)=>c.name.localeCompare(u.name));break;case"name_desc":l.sort((c,u)=>u.name.localeCompare(c.name));break;case"price_asc":l.sort((c,u)=>(c.price??0)-(u.price??0));break;case"price_desc":l.sort((c,u)=>(u.price??0)-(c.price??0));break}return l}),o=l=>{n.value=l},a=async()=>{try{const{data:l}=await Xe.get("/products");localStorage.setItem(o_,JSON.stringify(l)),localStorage.setItem(a_,Date.now().toString()),t.value=l}catch(l){console.error("Erro ao buscar produtos:",l)}finally{e.value=!1}};return mt(async()=>{const l=localStorage.getItem(o_),c=localStorage.getItem(a_);if(l&&c&&Date.now()-parseInt(c,10)<m3)try{t.value=JSON.parse(l),e.value=!1}catch{await a()}else await a()}),{products:t,filteredProducts:i,loading:e,selectedCategoryIds:n,searchTerm:s,sortOption:r,filterByCategory:o}}var l_;let v3=Symbol("headlessui.useid"),_3=0;const Vg=(l_=rS)!=null?l_:function(){return $t(v3,()=>`${++_3}`)()};function Et(t){var e;if(t==null||t.value==null)return null;let n=(e=t.value.$el)!=null?e:t.value;return n instanceof Node?n:null}function Md(t,e,...n){if(t in e){let r=e[t];return typeof r=="function"?r(...n):r}let s=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(r=>`"${r}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,Md),s}var b3=Object.defineProperty,x3=(t,e,n)=>e in t?b3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,c_=(t,e,n)=>(x3(t,typeof e!="symbol"?e+"":e,n),n);let w3=class{constructor(){c_(this,"current",this.detect()),c_(this,"currentId",0)}set(e){this.current!==e&&(this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}},$g=new w3;function Fg(t){if($g.isServer)return null;if(t instanceof Node)return t.ownerDocument;if(t!=null&&t.hasOwnProperty("value")){let e=Et(t);if(e)return e.ownerDocument}return document}let Qf=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var Xf=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t))(Xf||{}),E3=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(E3||{}),T3=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(T3||{});function BT(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(Qf)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var Ug=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(Ug||{});function Bg(t,e=0){var n;return t===((n=Fg(t))==null?void 0:n.body)?!1:Md(e,{0(){return t.matches(Qf)},1(){let s=t;for(;s!==null;){if(s.matches(Qf))return!0;s=s.parentElement}return!1}})}function jT(t){let e=Fg(t);Cn(()=>{e&&!Bg(e.activeElement,0)&&I3(t)})}var k3=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(k3||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function I3(t){t==null||t.focus({preventScroll:!0})}let S3=["textarea","input"].join(",");function A3(t){var e,n;return(n=(e=t==null?void 0:t.matches)==null?void 0:e.call(t,S3))!=null?n:!1}function zT(t,e=n=>n){return t.slice().sort((n,s)=>{let r=e(n),i=e(s);if(r===null||i===null)return 0;let o=r.compareDocumentPosition(i);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function C3(t,e){return P3(BT(),e,{relativeTo:t})}function P3(t,e,{sorted:n=!0,relativeTo:s=null,skipElements:r=[]}={}){var i;let o=(i=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t==null?void 0:t.ownerDocument)!=null?i:document,a=Array.isArray(t)?n?zT(t):t:BT(t);r.length>0&&a.length>1&&(a=a.filter(v=>!r.includes(v))),s=s??o.activeElement;let l=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,a.indexOf(s))-1;if(e&4)return Math.max(0,a.indexOf(s))+1;if(e&8)return a.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=e&32?{preventScroll:!0}:{},h=0,f=a.length,g;do{if(h>=f||h+f<=0)return 0;let v=c+h;if(e&16)v=(v+f)%f;else{if(v<0)return 3;if(v>=f)return 1}g=a[v],g==null||g.focus(u),h+=l}while(g!==o.activeElement);return e&6&&A3(g)&&g.select(),2}function R3(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function O3(){return/Android/gi.test(window.navigator.userAgent)}function D3(){return R3()||O3()}function lc(t,e,n){$g.isServer||xl(s=>{document.addEventListener(t,e,n),s(()=>document.removeEventListener(t,e,n))})}function M3(t,e,n){$g.isServer||xl(s=>{window.addEventListener(t,e,n),s(()=>window.removeEventListener(t,e,n))})}function N3(t,e,n=ye(()=>!0)){function s(i,o){if(!n.value||i.defaultPrevented)return;let a=o(i);if(a===null||!a.getRootNode().contains(a))return;let l=function c(u){return typeof u=="function"?c(u()):Array.isArray(u)||u instanceof Set?u:[u]}(t);for(let c of l){if(c===null)continue;let u=c instanceof HTMLElement?c:Et(c);if(u!=null&&u.contains(a)||i.composed&&i.composedPath().includes(u))return}return!Bg(a,Ug.Loose)&&a.tabIndex!==-1&&i.preventDefault(),e(i,a)}let r=j(null);lc("pointerdown",i=>{var o,a;n.value&&(r.value=((a=(o=i.composedPath)==null?void 0:o.call(i))==null?void 0:a[0])||i.target)},!0),lc("mousedown",i=>{var o,a;n.value&&(r.value=((a=(o=i.composedPath)==null?void 0:o.call(i))==null?void 0:a[0])||i.target)},!0),lc("click",i=>{D3()||r.value&&(s(i,()=>r.value),r.value=null)},!0),lc("touchend",i=>s(i,()=>i.target instanceof HTMLElement?i.target:null),!0),M3("blur",i=>s(i,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function u_(t,e){if(t)return t;let n=e??"button";if(typeof n=="string"&&n.toLowerCase()==="button")return"button"}function L3(t,e){let n=j(u_(t.value.type,t.value.as));return mt(()=>{n.value=u_(t.value.type,t.value.as)}),xl(()=>{var s;n.value||Et(e)&&Et(e)instanceof HTMLButtonElement&&!((s=Et(e))!=null&&s.hasAttribute("type"))&&(n.value="button")}),n}function d_(t){return[t.screenX,t.screenY]}function V3(){let t=j([-1,-1]);return{wasMoved(e){let n=d_(e);return t.value[0]===n[0]&&t.value[1]===n[1]?!1:(t.value=n,!0)},update(e){t.value=d_(e)}}}function $3({container:t,accept:e,walk:n,enabled:s}){xl(()=>{let r=t.value;if(!r||s!==void 0&&!s.value)return;let i=Fg(t);if(!i)return;let o=Object.assign(l=>e(l),{acceptNode:e}),a=i.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,o,!1);for(;a.nextNode();)n(a.currentNode)})}var Jf=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(Jf||{}),F3=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(F3||{});function Nd({visible:t=!0,features:e=0,ourProps:n,theirProps:s,...r}){var i;let o=qT(s,n),a=Object.assign(r,{props:o});if(t||e&2&&o.static)return zh(a);if(e&1){let l=(i=o.unmount)==null||i?0:1;return Md(l,{0(){return null},1(){return zh({...r,props:{...o,hidden:!0,style:{display:"none"}}})}})}return zh(a)}function zh({props:t,attrs:e,slots:n,slot:s,name:r}){var i,o;let{as:a,...l}=U3(t,["unmount","static"]),c=(i=n.default)==null?void 0:i.call(n,s),u={};if(s){let h=!1,f=[];for(let[g,v]of Object.entries(s))typeof v=="boolean"&&(h=!0),v===!0&&f.push(g);h&&(u["data-headlessui-state"]=f.join(" "))}if(a==="template"){if(c=HT(c??[]),Object.keys(l).length>0||Object.keys(e).length>0){let[h,...f]=c??[];if(!B3(h)||f.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${r} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(l).concat(Object.keys(e)).map(y=>y.trim()).filter((y,_,w)=>w.indexOf(y)===_).sort((y,_)=>y.localeCompare(_)).map(y=>`  - ${y}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(y=>`  - ${y}`).join(`
`)].join(`
`));let g=qT((o=h.props)!=null?o:{},l,u),v=zs(h,g,!0);for(let y in g)y.startsWith("on")&&(v.props||(v.props={}),v.props[y]=g[y]);return v}return Array.isArray(c)&&c.length===1?c[0]:c}return gi(a,Object.assign({},l,u),{default:()=>c})}function HT(t){return t.flatMap(e=>e.type===ve?HT(e.children):[e])}function qT(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let s of t)for(let r in s)r.startsWith("on")&&typeof s[r]=="function"?(n[r]!=null||(n[r]=[]),n[r].push(s[r])):e[r]=s[r];if(e.disabled||e["aria-disabled"])return Object.assign(e,Object.fromEntries(Object.keys(n).map(s=>[s,void 0])));for(let s in n)Object.assign(e,{[s](r,...i){let o=n[s];for(let a of o){if(r instanceof Event&&r.defaultPrevented)return;a(r,...i)}}});return e}function U3(t,e=[]){let n=Object.assign({},t);for(let s of e)s in n&&delete n[s];return n}function B3(t){return t==null?!1:typeof t.type=="string"||typeof t.type=="object"||typeof t.type=="function"}let WT=Symbol("Context");var cl=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(cl||{});function j3(){return $t(WT,null)}function z3(t){Vs(WT,t)}var zt=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(zt||{});function H3(t){throw new Error("Unexpected object: "+t)}var An=(t=>(t[t.First=0]="First",t[t.Previous=1]="Previous",t[t.Next=2]="Next",t[t.Last=3]="Last",t[t.Specific=4]="Specific",t[t.Nothing=5]="Nothing",t))(An||{});function q3(t,e){let n=e.resolveItems();if(n.length<=0)return null;let s=e.resolveActiveIndex(),r=s??-1;switch(t.focus){case 0:{for(let i=0;i<n.length;++i)if(!e.resolveDisabled(n[i],i,n))return i;return s}case 1:{r===-1&&(r=n.length);for(let i=r-1;i>=0;--i)if(!e.resolveDisabled(n[i],i,n))return i;return s}case 2:{for(let i=r+1;i<n.length;++i)if(!e.resolveDisabled(n[i],i,n))return i;return s}case 3:{for(let i=n.length-1;i>=0;--i)if(!e.resolveDisabled(n[i],i,n))return i;return s}case 4:{for(let i=0;i<n.length;++i)if(e.resolveId(n[i],i,n)===t.id)return i;return s}case 5:return null;default:H3(t)}}let h_=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function f_(t){var e,n;let s=(e=t.innerText)!=null?e:"",r=t.cloneNode(!0);if(!(r instanceof HTMLElement))return s;let i=!1;for(let a of r.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))a.remove(),i=!0;let o=i?(n=r.innerText)!=null?n:"":s;return h_.test(o)&&(o=o.replace(h_,"")),o}function W3(t){let e=t.getAttribute("aria-label");if(typeof e=="string")return e.trim();let n=t.getAttribute("aria-labelledby");if(n){let s=n.split(" ").map(r=>{let i=document.getElementById(r);if(i){let o=i.getAttribute("aria-label");return typeof o=="string"?o.trim():f_(i).trim()}return null}).filter(Boolean);if(s.length>0)return s.join(", ")}return f_(t).trim()}function K3(t){let e=j(""),n=j("");return()=>{let s=Et(t);if(!s)return"";let r=s.innerText;if(e.value===r)return n.value;let i=W3(s).trim().toLowerCase();return e.value=r,n.value=i,i}}var G3=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(G3||{}),Y3=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(Y3||{});function Q3(t){requestAnimationFrame(()=>requestAnimationFrame(t))}let KT=Symbol("MenuContext");function Ld(t){let e=$t(KT,null);if(e===null){let n=new Error(`<${t} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Ld),n}return e}let X3=Nr({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(t,{slots:e,attrs:n}){let s=j(1),r=j(null),i=j(null),o=j([]),a=j(""),l=j(null),c=j(1);function u(f=g=>g){let g=l.value!==null?o.value[l.value]:null,v=zT(f(o.value.slice()),_=>Et(_.dataRef.domRef)),y=g?v.indexOf(g):null;return y===-1&&(y=null),{items:v,activeItemIndex:y}}let h={menuState:s,buttonRef:r,itemsRef:i,items:o,searchQuery:a,activeItemIndex:l,activationTrigger:c,closeMenu:()=>{s.value=1,l.value=null},openMenu:()=>s.value=0,goToItem(f,g,v){let y=u(),_=q3(f===An.Specific?{focus:An.Specific,id:g}:{focus:f},{resolveItems:()=>y.items,resolveActiveIndex:()=>y.activeItemIndex,resolveId:w=>w.id,resolveDisabled:w=>w.dataRef.disabled});a.value="",l.value=_,c.value=v??1,o.value=y.items},search(f){let g=a.value!==""?0:1;a.value+=f.toLowerCase();let v=(l.value!==null?o.value.slice(l.value+g).concat(o.value.slice(0,l.value+g)):o.value).find(_=>_.dataRef.textValue.startsWith(a.value)&&!_.dataRef.disabled),y=v?o.value.indexOf(v):-1;y===-1||y===l.value||(l.value=y,c.value=1)},clearSearch(){a.value=""},registerItem(f,g){let v=u(y=>[...y,{id:f,dataRef:g}]);o.value=v.items,l.value=v.activeItemIndex,c.value=1},unregisterItem(f){let g=u(v=>{let y=v.findIndex(_=>_.id===f);return y!==-1&&v.splice(y,1),v});o.value=g.items,l.value=g.activeItemIndex,c.value=1}};return N3([r,i],(f,g)=>{var v;h.closeMenu(),Bg(g,Ug.Loose)||(f.preventDefault(),(v=Et(r))==null||v.focus())},ye(()=>s.value===0)),Vs(KT,h),z3(ye(()=>Md(s.value,{0:cl.Open,1:cl.Closed}))),()=>{let f={open:s.value===0,close:h.closeMenu};return Nd({ourProps:{},theirProps:t,slot:f,slots:e,attrs:n,name:"Menu"})}}}),J3=Nr({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(t,{attrs:e,slots:n,expose:s}){var r;let i=(r=t.id)!=null?r:`headlessui-menu-button-${Vg()}`,o=Ld("MenuButton");s({el:o.buttonRef,$el:o.buttonRef});function a(h){switch(h.key){case zt.Space:case zt.Enter:case zt.ArrowDown:h.preventDefault(),h.stopPropagation(),o.openMenu(),Cn(()=>{var f;(f=Et(o.itemsRef))==null||f.focus({preventScroll:!0}),o.goToItem(An.First)});break;case zt.ArrowUp:h.preventDefault(),h.stopPropagation(),o.openMenu(),Cn(()=>{var f;(f=Et(o.itemsRef))==null||f.focus({preventScroll:!0}),o.goToItem(An.Last)});break}}function l(h){switch(h.key){case zt.Space:h.preventDefault();break}}function c(h){t.disabled||(o.menuState.value===0?(o.closeMenu(),Cn(()=>{var f;return(f=Et(o.buttonRef))==null?void 0:f.focus({preventScroll:!0})})):(h.preventDefault(),o.openMenu(),Q3(()=>{var f;return(f=Et(o.itemsRef))==null?void 0:f.focus({preventScroll:!0})})))}let u=L3(ye(()=>({as:t.as,type:e.type})),o.buttonRef);return()=>{var h;let f={open:o.menuState.value===0},{...g}=t,v={ref:o.buttonRef,id:i,type:u.value,"aria-haspopup":"menu","aria-controls":(h=Et(o.itemsRef))==null?void 0:h.id,"aria-expanded":o.menuState.value===0,onKeydown:a,onKeyup:l,onClick:c};return Nd({ourProps:v,theirProps:g,slot:f,attrs:e,slots:n,name:"MenuButton"})}}}),Z3=Nr({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(t,{attrs:e,slots:n,expose:s}){var r;let i=(r=t.id)!=null?r:`headlessui-menu-items-${Vg()}`,o=Ld("MenuItems"),a=j(null);s({el:o.itemsRef,$el:o.itemsRef}),$3({container:ye(()=>Et(o.itemsRef)),enabled:ye(()=>o.menuState.value===0),accept(f){return f.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:f.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(f){f.setAttribute("role","none")}});function l(f){var g;switch(a.value&&clearTimeout(a.value),f.key){case zt.Space:if(o.searchQuery.value!=="")return f.preventDefault(),f.stopPropagation(),o.search(f.key);case zt.Enter:if(f.preventDefault(),f.stopPropagation(),o.activeItemIndex.value!==null){let v=o.items.value[o.activeItemIndex.value];(g=Et(v.dataRef.domRef))==null||g.click()}o.closeMenu(),jT(Et(o.buttonRef));break;case zt.ArrowDown:return f.preventDefault(),f.stopPropagation(),o.goToItem(An.Next);case zt.ArrowUp:return f.preventDefault(),f.stopPropagation(),o.goToItem(An.Previous);case zt.Home:case zt.PageUp:return f.preventDefault(),f.stopPropagation(),o.goToItem(An.First);case zt.End:case zt.PageDown:return f.preventDefault(),f.stopPropagation(),o.goToItem(An.Last);case zt.Escape:f.preventDefault(),f.stopPropagation(),o.closeMenu(),Cn(()=>{var v;return(v=Et(o.buttonRef))==null?void 0:v.focus({preventScroll:!0})});break;case zt.Tab:f.preventDefault(),f.stopPropagation(),o.closeMenu(),Cn(()=>C3(Et(o.buttonRef),f.shiftKey?Xf.Previous:Xf.Next));break;default:f.key.length===1&&(o.search(f.key),a.value=setTimeout(()=>o.clearSearch(),350));break}}function c(f){switch(f.key){case zt.Space:f.preventDefault();break}}let u=j3(),h=ye(()=>u!==null?(u.value&cl.Open)===cl.Open:o.menuState.value===0);return()=>{var f,g;let v={open:o.menuState.value===0},{...y}=t,_={"aria-activedescendant":o.activeItemIndex.value===null||(f=o.items.value[o.activeItemIndex.value])==null?void 0:f.id,"aria-labelledby":(g=Et(o.buttonRef))==null?void 0:g.id,id:i,onKeydown:l,onKeyup:c,role:"menu",tabIndex:0,ref:o.itemsRef};return Nd({ourProps:_,theirProps:y,slot:v,attrs:e,slots:n,features:Jf.RenderStrategy|Jf.Static,visible:h.value,name:"MenuItems"})}}}),cc=Nr({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(t,{slots:e,attrs:n,expose:s}){var r;let i=(r=t.id)!=null?r:`headlessui-menu-item-${Vg()}`,o=Ld("MenuItem"),a=j(null);s({el:a,$el:a});let l=ye(()=>o.activeItemIndex.value!==null?o.items.value[o.activeItemIndex.value].id===i:!1),c=K3(a),u=ye(()=>({disabled:t.disabled,get textValue(){return c()},domRef:a}));mt(()=>o.registerItem(i,u)),Si(()=>o.unregisterItem(i)),xl(()=>{o.menuState.value===0&&l.value&&o.activationTrigger.value!==0&&Cn(()=>{var w,I;return(I=(w=Et(a))==null?void 0:w.scrollIntoView)==null?void 0:I.call(w,{block:"nearest"})})});function h(w){if(t.disabled)return w.preventDefault();o.closeMenu(),jT(Et(o.buttonRef))}function f(){if(t.disabled)return o.goToItem(An.Nothing);o.goToItem(An.Specific,i)}let g=V3();function v(w){g.update(w)}function y(w){g.wasMoved(w)&&(t.disabled||l.value||o.goToItem(An.Specific,i,0))}function _(w){g.wasMoved(w)&&(t.disabled||l.value&&o.goToItem(An.Nothing))}return()=>{let{disabled:w,...I}=t,O={active:l.value,disabled:w,close:o.closeMenu};return Nd({ourProps:{id:i,ref:a,role:"menuitem",tabIndex:w===!0?void 0:-1,"aria-disabled":w===!0?!0:void 0,onClick:h,onFocus:f,onPointerenter:v,onMouseenter:v,onPointermove:y,onMousemove:y,onPointerleave:_,onMouseleave:_},theirProps:{...n,...I},slot:O,attrs:n,slots:e,name:"MenuItem"})}}});const e5={class:"mx-auto max-w-7xl px-0 lg:px-8 relative"},t5={class:"flex items-center justify-end space-x-4 bg-white dark:bg-gray-900 pb-2 mt-2 pt-2 sticky top-14 px-2"},n5={class:"w-10 text-right"},s5={class:"px-1 py-1"},r5={for:"az"},i5=["active"],o5={for:"za"},a5=["active"],l5={class:"px-1 py-1"},c5={for:"minor_price"},u5=["active"],d5={for:"hight_price"},h5=["active"],f5={key:1,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2 mt-5"},p5={key:0,class:"col-span-6 flex items-center justify-center"},g5={__name:"ProdutListPage",setup(t){const{products:e,filteredProducts:n,loading:s,selectedCategoryIds:r,filterByCategory:i,sortOption:o,searchTerm:a}=y3();return Vs(NT,r),Vs(LT,i),Vs(VT,e),(l,c)=>(P(),Ye(Di,{"show-back-button":!1},{default:pe(()=>[p("div",e5,[p("div",t5,[c[10]||(c[10]=p("div",{class:"absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none"},[p("i",{class:"fa fa-search h-4 w-4 text-gray-400","aria-hidden":"true"})],-1)),Ie(p("input",{type:"text","onUpdate:modelValue":c[0]||(c[0]=u=>dt(a)?a.value=u:null),placeholder:"Buscar produtos...",name:"search",id:"search",class:"block w-full p-2 ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},null,512),[[st,te(a)]]),p("div",n5,[re(te(X3),{as:"div",class:"relative inline-block text-left group"},{default:pe(()=>[p("div",null,[re(te(J3),{class:"inline-flex space-x-1 w-full items-center bg-white dark:bg-gray-800 justify-center rounded-md shadow-md p-2 text-sm font-medium dark:text-white group-hover:bg-black/10 focus:outline-none focus-visible:ring-2 focus-visible:ring-white/75"},{default:pe(()=>c[5]||(c[5]=[p("i",{class:"fa-solid fa-arrow-up-wide-short"},null,-1)])),_:1,__:[5]})]),re(ko,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:pe(()=>[re(te(Z3),{class:"absolute right-0 mt-2 w-56 origin-top-right divide-y divide-gray-100 dark:divide-gray-900 rounded-md bg-white dark:bg-gray-800 shadow-lg ring-1 ring-black/5 focus:outline-none"},{default:pe(()=>[p("div",s5,[re(te(cc),null,{default:pe(({active:u,selected:h})=>[p("label",r5,[p("span",{class:ce([u?"bg-violet-500 text-white":"text-gray-900 dark:text-white","group flex w-full items-center rounded-md px-2 py-2 text-sm"])},[Ie(p("input",{type:"radio",name:"nama_az",id:"az",value:"name_asc",class:"hidden","onUpdate:modelValue":c[1]||(c[1]=f=>dt(o)?o.value=f:null)},null,512),[[Os,te(o)]]),p("i",{active:u,class:"mr-2 h-5 w-5 text-violet-400 fa fa-arrow-down-a-z","aria-hidden":"true"},null,8,i5),c[6]||(c[6]=ee(" Nome (A-Z) "))],2)])]),_:1}),re(te(cc),null,{default:pe(({active:u})=>[p("label",o5,[p("span",{class:ce([u?"bg-violet-500 text-white":"text-gray-900 dark:text-white","group flex w-full items-center rounded-md px-2 py-2 text-sm"])},[Ie(p("input",{type:"radio",name:"nama_za",id:"za",value:"name_desc",class:"hidden","onUpdate:modelValue":c[2]||(c[2]=h=>dt(o)?o.value=h:null)},null,512),[[Os,te(o)]]),p("i",{active:u,class:"mr-2 h-5 w-5 text-violet-400 fa fa-arrow-up-z-a","aria-hidden":"true"},null,8,a5),c[7]||(c[7]=ee(" Nome (Z-A) "))],2)])]),_:1})]),p("div",l5,[re(te(cc),null,{default:pe(({active:u})=>[p("label",c5,[Ie(p("input",{type:"radio",name:"minor_price",id:"minor_price",value:"price_asc",class:"hidden","onUpdate:modelValue":c[3]||(c[3]=h=>dt(o)?o.value=h:null)},null,512),[[Os,te(o)]]),p("span",{class:ce([u?"bg-violet-500 text-white":"text-gray-900 dark:text-white","group flex w-full items-center rounded-md px-2 py-2 text-sm"])},[p("i",{active:u,class:"mr-2 h-5 w-5 text-violet-400 fa fa-arrow-down-1-9","aria-hidden":"true"},null,8,u5),c[8]||(c[8]=ee(" Menor preo "))],2)])]),_:1}),re(te(cc),null,{default:pe(({active:u})=>[p("label",d5,[Ie(p("input",{type:"radio",name:"hight_price",id:"hight_price",value:"price_desc",class:"hidden","onUpdate:modelValue":c[4]||(c[4]=h=>dt(o)?o.value=h:null)},null,512),[[Os,te(o)]]),p("span",{class:ce([u?"bg-violet-500 text-white":"text-gray-900 dark:text-white","group flex w-full items-center rounded-md px-2 py-2 text-sm"])},[p("i",{active:u,class:"mr-2 h-5 w-5 text-violet-400 fa fa-arrow-up-9-1","aria-hidden":"true"},null,8,h5),c[9]||(c[9]=ee(" Maior preo "))],2)])]),_:1})])]),_:1})]),_:1})]),_:1})])]),te(s)?(P(),Ye(g3,{key:0})):(P(),D("div",f5,[(P(!0),D(ve,null,Me(te(n),u=>(P(),Ye(UT,{key:u.id,product:u},null,8,["product"]))),128)),te(n).length==0?(P(),D("div",p5," No h produtos para esta categoria ")):J("",!0)]))])]),_:1}))}},m5={class:"container mx-auto p-4"},y5={key:0,class:"text-gray-500 dark:text-gray-400"},v5={key:1,class:"grid grid-cols-1 gap-4"},_5={class:"flex-grow"},b5={key:0,class:"text-gray-500 dark:text-gray-400 text-sm"},x5={key:1,class:"text-gray-500 dark:text-gray-400 text-sm"},w5={class:"text-gray-500 dark:text-gray-400 text-xs"},E5={class:"flex items-center mt-2"},T5={class:"flex items-center border rounded-full shadow-lg dark:border-gray-700 border-gray-300"},k5=["onClick"],I5={class:"w-8 text-center text-gray-700 dark:text-gray-300"},S5=["onClick"],A5=["onClick"],C5={key:2,class:"mt-8 border-t pt-4 dark:border-gray-700 border-gray-300"},P5={class:"flex justify-between items-center dark:text-gray-200"},R5={class:"text-xl font-semibold"},O5={__name:"Cart",setup(t){const e=Io(),n=Rp(),s=ye(()=>e.items),r=ye(()=>e.items.length),i=ye(()=>e.total),o=g=>{e.removeItem(g)},a=(g,v)=>{if(v>=1){const y=e.items.findIndex(_=>_.id===g.id&&_.size===g.size&&f(_.extras,g.extras));if(y!==-1){const _=[...e.items];_[y].quantity=v,e.items=_}else console.warn("Item no encontrado no carrinho para atualizao:",g)}},l=g=>{g.quantity>1&&a(g,g.quantity-1)},c=g=>{a(g,g.quantity+1)},u=()=>{console.log("Finalizar Pedido!"),n.push("/checkout")},h=g=>{let v=g.id;return g.size&&(v+=`-${g.size}`),g.extras&&g.extras.length>0&&(v+=`-${g.extras.map(y=>y.name).join("-")}`),v},f=(g,v)=>{if(g.length!==v.length)return!1;const y=[...g].sort((w,I)=>w.name.localeCompare(I.name)),_=[...v].sort((w,I)=>w.name.localeCompare(I.name));return y.every((w,I)=>w.name===_[I].name&&w.price===_[I].price)};return(g,v)=>{const y=To("router-link");return P(),Ye(Di,{"is-header-visible":!1,"top-nav-visible":!0,"top-nav-title":"Carrinho"},{default:pe(()=>[p("div",m5,[r.value===0?(P(),D("div",y5," Seu carrinho est vazio. Adicione deliciosos itens ao seu pedido! ")):(P(),D("div",v5,[(P(!0),D(ve,null,Me(s.value,_=>(P(),D("div",{key:h(_),class:"flex items-top border rounded-md p-4 dark:bg-gray-800 dark:border-gray-700 border-gray-300"},[re(y,{to:"/produto/"+_.slug,class:"w-24 h-24 mr-2"},{default:pe(()=>[p("div",{class:ce(["w-16 h-16 rounded-md bg-cover bg-center shadow-md",{"bg-emerald-500 dark:bg-amber-400":!_.img}]),style:wo({backgroundImage:_.img?`url(${_.img})`:"none"})},null,6)]),_:2},1032,["to"]),p("div",_5,[re(y,{to:"/produto/"+_.slug,class:"font-semibold dark:text-gray-200 hover:underline"},{default:pe(()=>[ee(B(_.name||"Item sem nome"),1)]),_:2},1032,["to"]),_.size?(P(),D("div",b5," Tam: "+B(_.size),1)):J("",!0),_.extras&&_.extras.length>0?(P(),D("div",x5,[p("small",null," Extras: "+B(_.extras.map(w=>w.name).join(", ")),1)])):J("",!0),p("p",w5," Preo Unitrio: "+B(g.$formatPrice(_.price+_.extras.reduce((w,I)=>w+I.price,0))),1),p("div",E5,[v[2]||(v[2]=p("label",{for:"quantity",class:"mr-2 text-sm text-gray-700 dark:text-gray-300 sr-only"}," Quantidade: ",-1)),p("div",T5,[p("button",{onClick:w=>l(_),class:"px-2 py-1 text-gray-700 dark:text-gray-300 hover:bg-gray-300 rounded-l-full dark:hover:bg-gray-700 focus:outline-none"},v[0]||(v[0]=[p("i",{class:"fa fa-minus"},null,-1)]),8,k5),p("span",I5,B(_.quantity),1),p("button",{onClick:w=>c(_),class:"px-2 py-1 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-700 focus:outline-none rounded-r-full"},v[1]||(v[1]=[p("i",{class:"fa fa-plus"},null,-1)]),8,S5)])])]),p("button",{onClick:w=>o(_),class:"h-10 w-10 inline-flex items-center justify-center bg-transparent transition-all duration-300 cursor-pointer rounded-full hover:bg-red-500/20 text-red-500 relative group"},v[3]||(v[3]=[p("i",{class:"fa fa-trash"},null,-1),p("span",{class:"text-xs text-red-500 absolute -bottom-4 hidden group-hover:flex transition-all duration-300"},[p("small",null,"Excluir")],-1)]),8,A5)]))),128))])),r.value>0?(P(),D("div",C5,[p("div",P5,[v[4]||(v[4]=p("span",{class:"font-bold"},"Total do Pedido:",-1)),p("span",R5,B(g.$formatPrice(i.value)),1)]),p("button",{class:"bg-emerald-500 container hover:bg-emerald-600 text-white font-semibold py-2 px-4 rounded-md shadow-md mt-4",onClick:u}," Finalizar Pedido ")])):J("",!0)])]),_:1})}}},D5=Gt(O5,[["__scopeId","data-v-d7ffcfb0"]]),M5={},N5={class:"animate-pulse space-y-4 max-w-2xl mx-auto p-4"};function L5(t,e){return P(),D("div",N5,e[0]||(e[0]=[ru('<div class="w-full h-56 bg-gray-300 dark:bg-gray-700 rounded-2xl"></div><div class="h-6 bg-gray-300 dark:bg-gray-700 rounded w-3/4"></div><div class="h-4 bg-gray-300 dark:bg-gray-700 rounded w-full"></div><div class="h-4 bg-gray-300 dark:bg-gray-700 rounded w-5/6"></div><div class="h-10 bg-gray-300 dark:bg-gray-700 rounded w-36"></div><div class="space-y-2"><div class="h-4 bg-gray-300 dark:bg-gray-700 rounded w-1/2"></div><div class="flex gap-2"><div class="h-10 bg-gray-300 dark:bg-gray-700 rounded w-full"></div><div class="h-10 bg-gray-300 dark:bg-gray-700 rounded w-full"></div></div></div><div class="h-10 bg-gray-300 dark:bg-gray-700 rounded w-full"></div>',7)]))}const V5=Gt(M5,[["render",L5]]),$5={class:"p-4 max-w-2xl mx-auto"},F5={key:1},U5={class:"relative"},B5=["src"],j5={class:"flex items-center justify-between mb-4"},z5={class:"text-xl font-semibold"},H5={class:"text-green-600 font-bold text-lg"},q5={class:"text-gray-600 dark:text-gray-300 mb-6 leading-relaxed"},W5={class:"mb-6"},K5={class:"flex items-center gap-4 w-36"},G5={class:"text-xl font-medium w-8 text-center"},Y5={key:0,class:"mb-6"},Q5={class:"font-medium mb-2"},X5={class:"flex gap-2 flex-wrap"},J5=["onClick"],Z5={class:"font-semibold"},eF={class:"text-sm"},tF={key:1,class:"mb-6"},nF={class:"flex flex-wrap gap-2"},sF=["for"],rF=["id","value"],iF={class:"font-medium"},oF={class:"text-xs text-red-500"},aF={key:0,class:"m-4 fixed flex justify-center items-center space-x-2 top-4 transform bg-green-600 text-white px-4 py-2 rounded shadow-lg z-50 border-l-4 border-l-green-800"},lF="cached_products",cF={__name:"ProductDetail",setup(t){const e=dw(),n=Rp(),s=Io();ye(()=>s.items.length);const r=j(null),i=j([]),o=j(0),a=j([]),l=j(1),c=j(!0),u=j(!1);function h(){l.value<10&&l.value++}function f(){l.value>1&&l.value--}async function g(y){try{const{data:_}=await Xe.get(`/products/${y}`);r.value=_,i.value=_.extras||[]}catch(_){console.error("Erro ao carregar produto da API:",_),n.push("/")}finally{c.value=!1}}mt(async()=>{const y=localStorage.getItem(lF),_=y?JSON.parse(y):[],w=e.params.slug,I=_.find(O=>O.slug===w);I?(r.value=I,i.value=I.extras||[],c.value=!1,g(w)):await g(w)});function v(){var I,O;if(!r.value)return;const y=((I=r.value.price)==null?void 0:I[o.value])||0,_=a.value.reduce((L,M)=>L+M.price,0),w=(y+_)*l.value;s.addItem({id:r.value.id,name:r.value.name,quantity:l.value,size:(O=r.value.sizes)==null?void 0:O[o.value],price:y,extras:a.value,subtotal:w,img:r.value.img,slug:r.value.slug}),u.value=!0,setTimeout(()=>u.value=!1,3e3)}return(y,_)=>{var w;return P(),D("div",null,[re(Di,{"show-back-button":!0,"top-nav-title":(w=r.value)==null?void 0:w.name,"mobile-menu-visible":!1},{default:pe(()=>{var I,O,L,M,$,T,b;return[p("div",$5,[c.value?(P(),Ye(V5,{key:0})):(P(),D("div",F5,[p("div",U5,[r.value?(P(),Ye(FT,{key:0,"product-id":r.value.id,rating:r.value.rating||0,"show-text-rating":!0,"rating-text":r.value.rating||0,class:"mb-6 absolute bottom-0 right-5"},null,8,["product-id","rating","rating-text"])):J("",!0),p("img",{src:(I=r.value)==null?void 0:I.img,alt:"Imagem do produto",class:"w-full lg:h-60 object-cover mb-6 rounded-md shadow-lg"},null,8,B5)]),p("div",j5,[p("h1",z5,B((O=r.value)==null?void 0:O.name),1),p("span",H5,B(y.$formatPrice((M=(L=r.value)==null?void 0:L.price)==null?void 0:M[o.value])),1)]),p("p",q5,B(($=r.value)==null?void 0:$.description),1),p("div",W5,[_[1]||(_[1]=p("h4",{class:"font-medium mb-2"},"Quantidade",-1)),p("div",K5,[p("button",{onClick:f,class:"w-10 h-10 bg-gray-200 dark:bg-gray-800 rounded-md text-xl font-bold hover:bg-gray-300"}," - "),p("span",G5,B(l.value),1),p("button",{onClick:h,class:"w-10 h-10 bg-gray-200 dark:bg-gray-800 rounded-md text-xl font-bold hover:bg-gray-300"}," + ")])]),(b=(T=r.value)==null?void 0:T.sizes)!=null&&b.length?(P(),D("div",Y5,[p("h4",Q5," Tamanho"+B(r.value.sizes.length>1?"s":""),1),p("div",X5,[(P(!0),D(ve,null,Me(r.value.sizes,(E,A)=>{var k;return P(),D("div",{key:A,onClick:S=>o.value=A,class:ce(["cursor-pointer border rounded-md px-4 py-2 shadow-sm transition",o.value===A?"bg-red-600 text-white border-red-700":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600"])},[p("div",Z5,B(E),1),p("div",eF,B(y.$formatPrice((k=r.value.price)==null?void 0:k[A])),1)],10,J5)}),128))])])):J("",!0),i.value.length?(P(),D("div",tF,[_[2]||(_[2]=p("h4",{class:"font-medium mb-2"},"Adicionais",-1)),p("div",nF,[(P(!0),D(ve,null,Me(i.value,(E,A)=>(P(),D("label",{key:A,for:"extra-"+A,class:ce(["cursor-pointer border rounded-md px-4 py-2 flex flex-col items-center transition text-sm bg-white dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700",{"border-blue-600 dark:border-blue-400 text-blue-600 dark:text-blue-400":a.value.includes(E)}])},[Ie(p("input",{class:"hidden",type:"checkbox",id:"extra-"+A,value:E,"onUpdate:modelValue":_[0]||(_[0]=k=>a.value=k)},null,8,rF),[[au,a.value]]),p("span",iF,B(E.name),1),p("span",oF,B(y.$formatPrice(E.price)),1)],10,sF))),128))])])):J("",!0),p("button",{onClick:v,class:"w-full bg-red-600 text-white font-semibold py-3 rounded-lg hover:bg-red-700 transition-all duration-200"}," Adicionar ao Carrinho "),re(ko,{name:"fade"},{default:pe(()=>[u.value?(P(),D("div",aF,_[3]||(_[3]=[p("i",{class:"fa-regular fa-circle-check text-green-800","aria-hidden":"true"},null,-1),p("span",null,"Produto adicionado ao carrinho!",-1)]))):J("",!0)]),_:1})]))])]}),_:1},8,["top-nav-title"])])}}},uF={class:"container mx-auto p-4"},dF={class:"text-2xl font-semibold mb-4 dark:text-gray-200"},hF={key:0,class:"text-gray-500 dark:text-gray-400"},fF={key:1,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},pF={__name:"Favorites",setup(t){const e=$T(),n=ye(()=>e.favorites),s=ye(()=>n.value.length);return(r,i)=>(P(),Ye(Di,{"top-nav-visible":!0,"is-header-visible":!1,"top-nav-title":"Favoritos"},{default:pe(()=>[p("div",uF,[p("h2",dF," Meus Favoritos ("+B(s.value)+") ",1),s.value===0?(P(),D("div",hF," Sua lista de favoritos est vazia. Adicione produtos clicando no cone de corao! ")):(P(),D("div",fF,[(P(!0),D(ve,null,Me(n.value,o=>(P(),Ye(UT,{key:o.id,product:o},null,8,["product"]))),128))]))])]),_:1}))}},gF=Gt(pF,[["__scopeId","data-v-702433d7"]]),mF={class:"container mx-auto p-4 max-w-md bg-white shadow-lg rounded-lg mt-8"},yF={class:"mb-6"},vF={key:0,class:"w-5 h-5 text-green-700",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},_F={key:1,class:"w-5 h-5 text-red-700",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},bF={key:2,class:"w-5 h-5 text-blue-700 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},xF={class:"mb-6"},wF=["value"],EF={key:0,class:"text-green-600 text-xs mt-1"},TF=["disabled"],kF={key:0},IF={key:1},SF={key:2},AF={__name:"Profile",setup(t){const n=ud({apiKey:"AIzaSyCqcgvxcgWwG4LmYkSL66x4GYi1KLxuHts",authDomain:"chat-bot-pizzaria.firebaseapp.com",projectId:"chat-bot-pizzaria",storageBucket:"chat-bot-pizzaria.firebasestorage.app",messagingSenderId:"1090893949199",appId:"1:1090893949199:web:cc9724c44f5ef76ea9f67a",measurementId:"G-TQ6E8YLYHD"}),s=ng(n),r=j("Carregando status..."),i=j(null),o=j(!1),a=j(!1),l=j(!0),c=j("loading_user_id");s.onAuthStateChanged(g=>{if(g)c.value=g.uid,console.log("User ID from Firebase Auth:",c.value);else{let v=localStorage.getItem("guestUserId");v||(v=`guest_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,localStorage.setItem("guestUserId",v)),c.value=v,console.log("Guest User ID:",c.value)}});const u=ye(()=>r.value.includes("Concedida")?"bg-green-100 text-green-800":r.value.includes("Negada")?"bg-red-100 text-red-800":r.value.includes("Erro")||r.value.includes("no suportadas")?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"),h=async()=>{o.value=!0;try{const g=await Ru(c.value);g?(i.value=g,r.value="Permisso de notificao Concedida!"):r.value="Permisso de notificao Negada ou token no obtido."}catch(g){console.error("Erro geral ao lidar com a solicitao de notificao:",g),r.value=`Erro: ${g.message}`}finally{o.value=!1}},f=()=>{i.value&&navigator.clipboard.writeText(i.value).then(()=>{a.value=!0,setTimeout(()=>{a.value=!1},2e3)}).catch(g=>{console.error("Falha ao copiar o token:",g)})};return mt(async()=>{if(!await Dd()){l.value=!1,r.value="Notificaes no suportadas neste navegador.";return}if("serviceWorker"in navigator)try{const y=await navigator.serviceWorker.register("/firebase-messaging-sw.js");console.log("Service Worker registrado com sucesso:",y)}catch(y){console.error("Falha ao registrar o Service Worker:",y),r.value=`Erro ao registrar Service Worker: ${y.message}`,l.value=!1;return}else{r.value="Navegador no suporta Service Workers.",l.value=!1;return}MT();const v=Notification.permission;if(v==="granted"){r.value="Permisso de notificao Concedida.";try{const y=await Ru(c.value);y&&(i.value=y)}catch(y){console.error("Erro ao obter token na montagem:",y),r.value=`Erro ao obter token: ${y.message}`}}else v==="denied"?r.value="Permisso de notificao Negada.":r.value="Aguardando permisso..."}),(g,v)=>(P(),Ye(Di,{"top-nav-title":"Perfil - Configuraes de Notificao"},{default:pe(()=>[p("div",mF,[v[5]||(v[5]=p("h2",{class:"text-2xl font-bold text-gray-800 mb-6 text-center"},"Configuraes de Notificao",-1)),p("div",yF,[v[3]||(v[3]=p("p",{class:"text-gray-700 mb-2"},"Status das Notificaes:",-1)),p("div",{class:ce([u.value,"p-3 rounded-md text-sm font-medium flex items-center justify-between"])},[p("span",null,B(r.value),1),r.value.includes("Concedida")?(P(),D("svg",vF,v[0]||(v[0]=[p("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):r.value.includes("Negada")?(P(),D("svg",_F,v[1]||(v[1]=[p("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1)]))):(P(),D("svg",bF,v[2]||(v[2]=[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004 12c0 2.21.894 4.204 2.342 5.658M18 18v-5h-.582m-15.356-2A8.001 8.001 0 0020 12c0-2.21-.894-4.204-2.342-5.658"},null,-1)])))],2)]),p("div",xF,[v[4]||(v[4]=p("p",{class:"text-gray-700 mb-2"},"Seu Token FCM:",-1)),p("input",{type:"text",value:i.value||"Gerando...",readonly:"",class:"w-full p-2 border border-gray-300 rounded-md bg-gray-100 text-gray-600 text-sm font-mono",onClick:f},null,8,wF),a.value?(P(),D("p",EF,"Copiado!")):J("",!0)]),p("button",{onClick:h,disabled:o.value||!l.value,class:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md transition duration-300 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed"},[l.value?o.value?(P(),D("span",IF,"Permisso Solicitada")):(P(),D("span",SF,"Solicitar Permisso de Notificao")):(P(),D("span",kF,"Notificaes no suportadas"))],8,TF),v[6]||(v[6]=p("p",{class:"text-gray-500 text-xs mt-4 text-center"}," Ative as notificaes para receber atualizaes sobre seus pedidos e promoes. ",-1))])]),_:1}))}},CF={},PF={class:"border-b border-b-gray-300 dark:border-b-gray-800 mb-4"};function RF(t,e){return P(),D("div",PF)}const zc=Gt(CF,[["render",RF]]),OF={class:"container mx-auto p-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 lg:gap-8 gap-4 lg:-mt-20"},DF={class:"lg:col-span-2"},MF={key:0,class:"p-4 border border-gray-300 rounded-md mb-4 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-200"},NF={class:"text-gray-500 dark:text-gray-400"},LF={class:"text-gray-500 dark:text-gray-400"},VF={class:"text-gray-500 dark:text-gray-400"},$F={class:"text-gray-500 dark:text-gray-400"},FF={class:"p-4 border border-gray-300 rounded-md mb-4 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-200"},UF={key:0},BF={class:"mb-4"},jF={class:"mb-4"},zF={class:"mb-4"},HF={class:"mb-4"},qF={class:"mb-4"},WF={class:"flex justify-end gap-2"},KF={class:"mb-6"},GF={class:"flex items-center gap-4 text-gray-700 dark:text-gray-300 text-xs mb-2"},YF=["src","alt"],QF={class:"flex-3"},XF={class:"flex-1"},JF={class:"mb-4"},ZF={class:"space-x-4 flex items-center"},e6={class:"flex gap-2 mb-4"},t6=["value"],n6={class:"text-sm font-medium"},s6={key:1,class:"mb-4"},r6={class:"ml-4"},i6={key:0,class:"mt-4"},o6={class:"flex justify-between items-center dark:text-gray-200"},a6={class:"font-bold"},l6={key:0,class:"m-4 fixed flex justify-center items-center space-x-2 top-4 transform bg-green-600 text-white px-4 py-2 rounded shadow-lg z-50 border-l-4 border-l-green-800"},p_="customer_data",c6=5,u6={__name:"Checkout",setup(t){const e=Rp(),n=Io(),s=ye(()=>n.total),r=ye(()=>n.items),i=Eo({name:"",phone:"",deliveryType:"Entrega",address:"",reference:"",neighborhood:""}),o=ye(()=>Object.values(i).some(_=>_!=="")),a=j(!1),l=j("pix"),c=j("no"),u=j(0),h=j(""),f=[{value:"pix",label:"Pix",icon:"fa-brands fa-pix"},{value:"credit-card",label:"Carto",icon:"fa fa-credit-card"},{value:"cash",label:"Dinheiro",icon:"fa fa-money-bill-1-wave"}];function g(){const _=Date.now().toString().slice(-5),w=Math.floor(Math.random()*1e5).toString().padStart(5,"0");return`${_}${w}`}mt(()=>{const _=localStorage.getItem(p_);_&&Object.assign(i,JSON.parse(_))});function v(){localStorage.setItem(p_,JSON.stringify(i))}async function y(){if(n.items.length===0){alert("Seu carrinho est vazio. Adicione itens para finalizar o pedido.");return}const _=i.deliveryType==="Retirada"?0:c6,w=s.value,I=w+_,O={orderNumber:g(),customer:{...i},items:n.items,subtotal:w,tax:_,total:I,paymentMethod:l.value,deliveryType:i.deliveryType,needChange:c.value==="yes",changeAmount:l.value==="cash"&&c.value==="yes"?u.value:null,created_at:new Date().toISOString()},L=n.items.map(E=>{let A=`${E.quantity}x ${E.name}${E.size?` (${E.size})`:""} - R$ ${E.subtotal.toFixed(2).replace(".",",")}`;if(E.extras&&E.extras.length>0){const k=E.extras.map(S=>`${S.name} - R$ ${S.price.toFixed(2).replace(".",",")}`).join(" | ");A+=`
_Adicionais:_ ${k}`}return A}).join(`
`);let M=[`*Tipo:* ${O.deliveryType}`];O.deliveryType==="Entrega"?M.push("*Tempo de entrega:* 40 a 50min"):M.push("*Pronto para retirada em:* 20-30min");const $=`NOVO PEDIDO: #${O.orderNumber}

DADOS DO PEDIDO:
${L}

DADOS DA ENTREGA:
${M.join(`
`)}
*Cliente:* ${i.name}
*Telefone:* ${i.phone}
`+(O.deliveryType==="Entrega"?`*Endereo:* ${i.address}
`:"")+(O.deliveryType==="Entrega"&&i.reference?`*Ponto de referncia:* ${i.reference}
`:O.deliveryType==="Entrega"?`*Ponto de referncia:* nenhum
`:"")+(O.deliveryType==="Entrega"&&i.neighborhood?`*Bairro:* ${i.neighborhood}
`:"")+`
DADOS DO PAGAMENTO:
*Mtodo de pagamento:* ${O.paymentMethod?O.paymentMethod.toUpperCase():"N/A"}
*Subtotal:* R$ ${O.subtotal.toFixed(2).replace(".",",")}
`+(O.deliveryType==="Entrega"?`*Taxa de entrega:* R$ ${O.tax.toFixed(2).replace(".",",")}
`:"")+`*Total:* R$ ${O.total.toFixed(2).replace(".",",")}`,T="5571992477638",b=encodeURIComponent($);window.open(`https://wa.me/${T}?text=${b}`),await new Promise(E=>setTimeout(E,1e3)),h.value=O.orderNumber,v(),n.clearCart(),a.value=!1,setTimeout(()=>{h.value="",e.push("/")},3e3)}return(_,w)=>(P(),Ye(Di,{"top-nav-visible":!0,"top-nav-title":"Finalizar pedido","is-header-visible":!1},{default:pe(()=>[p("div",OF,[w[36]||(w[36]=p("ol",{"aria-label":"Breadcrumb",class:"lg:col-span-8 md:col-span-2 px-1 flex text-xs space-x-2 items-center text-gray-500 min-w-0 gap-2 whitespace-nowrap"},[p("li",{class:"text-xs/loose"},[p("a",{href:"",class:"flex items-center gap-2 align-middle leading-none transition-all"},[p("i",{class:"fa fa-home"}),ee(" Incio ")])]),p("i",{class:"fa fa-chevron-right text-gray-400"}),p("span",{class:"text-green-600"},"Finalizar pedido")],-1)),p("div",DF,[o.value&&!a.value?(P(),D("div",MF,[w[18]||(w[18]=p("h3",{class:"font-semibold mb-2 dark:text-gray-100"},"Dados do Cliente",-1)),p("div",null,[w[14]||(w[14]=p("span",{class:"font-semibold mr-2"},"Nome:",-1)),p("span",NF,B(i.name),1)]),p("div",null,[w[15]||(w[15]=p("span",{class:"font-semibold mr-2"},"Telefone:",-1)),p("span",LF,B(i.phone),1)]),p("div",null,[w[16]||(w[16]=p("span",{class:"font-semibold mr-2"},"Endereo:",-1)),p("span",VF,B(i.address),1)]),p("div",null,[w[17]||(w[17]=p("span",{class:"font-semibold mr-2"},"Ponto de referncia:",-1)),p("span",$F,B(i.reference),1)]),p("button",{onClick:w[0]||(w[0]=I=>a.value=!0),class:"mt-4 px-4 py-2 bg-blue-500 hover:bg-blue-700 text-white font-semibold rounded-md shadow focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-green-500"}," Alterar meus dados ")])):J("",!0)]),p("div",FF,[p("form",{onSubmit:Mn(y,["prevent"])},[!o.value||a.value?(P(),D("div",UF,[w[24]||(w[24]=p("h3",{class:"font-semibold mb-4 dark:text-gray-100"},"Dados do Cliente",-1)),p("div",BF,[w[19]||(w[19]=p("label",{for:"name",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"},"Nome:",-1)),Ie(p("input",{type:"text",id:"name","onUpdate:modelValue":w[1]||(w[1]=I=>i.name=I),required:"",class:"input"},null,512),[[st,i.name]])]),p("div",jF,[w[20]||(w[20]=p("label",{for:"phone",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"},"Telefone:",-1)),Ie(p("input",{type:"tel",id:"phone","onUpdate:modelValue":w[2]||(w[2]=I=>i.phone=I),required:"",class:"input"},null,512),[[st,i.phone]])]),p("div",zF,[w[21]||(w[21]=p("label",{for:"address",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"},"Endereo:",-1)),Ie(p("input",{type:"text",id:"address","onUpdate:modelValue":w[3]||(w[3]=I=>i.address=I),required:"",class:"input"},null,512),[[st,i.address]])]),p("div",HF,[w[22]||(w[22]=p("label",{for:"reference",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"},"Ponto de Referncia:",-1)),Ie(p("input",{id:"reference","onUpdate:modelValue":w[4]||(w[4]=I=>i.reference=I),class:"input"},null,512),[[st,i.reference]])]),p("div",qF,[w[23]||(w[23]=p("label",{for:"neighborhood",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"},"Bairro:",-1)),Ie(p("input",{id:"neighborhood","onUpdate:modelValue":w[5]||(w[5]=I=>i.neighborhood=I),class:"input"},null,512),[[st,i.neighborhood]])]),p("div",WF,[p("button",{type:"button",onClick:w[6]||(w[6]=I=>a.value=!1),class:"bg-gray-500 hover:bg-gray-600 text-white py-2 px-4 rounded-md shadow-md"}," Cancelar "),p("button",{type:"button",onClick:w[7]||(w[7]=()=>{a.value=!1,v()}),class:"bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-md shadow-md"}," Salvar ")])])):J("",!0),w[32]||(w[32]=p("h3",{class:"font-semibold mb-4 dark:text-gray-100 text-gray-700"}," Resumo do pedido ",-1)),p("div",KF,[(P(!0),D(ve,null,Me(r.value,I=>(P(),D("div",GF,[p("img",{src:I.img,alt:I.name,class:"h-10 w-10 rounded-md object-cover shadow-md"},null,8,YF),p("span",QF,B(I.name),1),p("span",XF,"x"+B(I.quantity),1),p("span",null,B(_.$formatPrice(I.subtotal)),1)]))),256))]),w[33]||(w[33]=p("div",{class:"space-y-2"},[p("label",{for:"coupon",class:"text-xs text-gray-700"},"Cdigo do cupom"),p("div",{class:"relative"},[p("input",{type:"text",name:"coupon",id:"coupon",class:"block w-full rounded-md py-3 ps-4 pe-12 text-gray-800 text-sm focus:ring-transparent border-gray-200 dark:bg-gray-50",placeholder:"Digite o cdigo",autocomplete:"off"}),p("button",{class:"absolute top-1/2 -translate-y-1/2 end-1 py-2 px-5 inline-block font-semibold tracking-wide border align-middle duration-500 text-sm text-center bg-gray-200 hover:bg-gray-300 border-gray-200 hover:border-gray-300 text-gray-900 rounded-md"}," Aplicar cupom ")])],-1)),re(zc),p("div",JF,[w[25]||(w[25]=p("span",{class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-4"}," Tipo de Entrega/Retirada: ",-1)),p("div",ZF,[p("div",null,[Ie(p("input",{type:"radio",id:"deliveryTypeDelivery",name:"deliveryTypeOptions",value:"Entrega","onUpdate:modelValue":w[8]||(w[8]=I=>i.deliveryType=I),class:"form-radio hidden"},null,512),[[Os,i.deliveryType]]),p("label",{for:"deliveryTypeDelivery",class:ce(["cursor-pointer px-4 py-2 rounded border text-sm font-medium transition",i.deliveryType==="Entrega"?"bg-indigo-600 text-white":"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 border-gray-300 dark:border-gray-600"])},"  Entrega ",2)]),p("div",null,[Ie(p("input",{type:"radio",id:"deliveryTypeRetirada",name:"deliveryTypeOptions",value:"Retirada","onUpdate:modelValue":w[9]||(w[9]=I=>i.deliveryType=I),class:"form-radio hidden"},null,512),[[Os,i.deliveryType]]),p("label",{for:"deliveryTypeRetirada",class:ce(["cursor-pointer px-4 py-2 rounded border text-sm font-medium transition",i.deliveryType==="Retirada"?"bg-indigo-600 text-white":"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 border-gray-300 dark:border-gray-600"])},"  Retirada ",2)])])]),re(zc),w[34]||(w[34]=p("h3",{class:"font-semibold mb-4 dark:text-gray-100 text-gray-700"},"Pagamento",-1)),p("div",e6,[(P(),D(ve,null,Me(f,I=>p("label",{key:I.value,class:"relative cursor-pointer"},[Ie(p("input",{type:"radio",name:"paymentMethod",value:I.value,"onUpdate:modelValue":w[10]||(w[10]=O=>l.value=O),class:"hidden"},null,8,t6),[[Os,l.value]]),p("div",{class:ce(["flex px-4 py-2 space-x-2 items-center justify-center border rounded-md shadow-md transition",l.value===I.value?"bg-green-600 text-white border-green-600":"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 border-gray-300 dark:border-gray-600"])},[p("i",{class:ce(I.icon)},null,2),p("div",n6,B(I.label),1)],2)])),64))]),l.value==="cash"?(P(),D("div",s6,[w[29]||(w[29]=p("label",{class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"},"Precisa de Troco?",-1)),p("label",null,[Ie(p("input",{type:"radio",value:"yes","onUpdate:modelValue":w[11]||(w[11]=I=>c.value=I),class:"mr-2"},null,512),[[Os,c.value]]),w[26]||(w[26]=ee(" Sim "))]),p("label",r6,[Ie(p("input",{type:"radio",value:"no","onUpdate:modelValue":w[12]||(w[12]=I=>c.value=I),class:"mr-2"},null,512),[[Os,c.value]]),w[27]||(w[27]=ee(" No "))]),c.value==="yes"?(P(),D("div",i6,[w[28]||(w[28]=p("label",{for:"changeAmount",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"},"Valor para Troco:",-1)),Ie(p("input",{type:"number",id:"changeAmount","onUpdate:modelValue":w[13]||(w[13]=I=>u.value=I),min:"0",class:"input"},null,512),[[st,u.value,void 0,{number:!0}]])])):J("",!0)])):J("",!0),re(zc),p("div",null,[p("div",o6,[w[30]||(w[30]=p("span",{class:"font-semibold"},"Total do Pedido:",-1)),p("span",a6,B(_.$formatPrice(s.value)),1)]),w[31]||(w[31]=p("button",{type:"submit",class:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg shadow-md mt-4 focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-green-500"}," Finalizar Pedido ",-1))])],32)]),re(ko,{name:"fade"},{default:pe(()=>[h.value?(P(),D("div",l6,[w[35]||(w[35]=p("i",{class:"fa-regular fa-circle-check text-green-800","aria-hidden":"true"},null,-1)),p("span",null,"Pedido realizado com sucesso! Nmero do Pedido: "+B(h.value),1)])):J("",!0)]),_:1})])]),_:1}))}},d6={class:"container mx-auto p-4"},h6={class:"mb-4"},f6=["value"],p6={key:0,class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},g6={class:"mb-4"},m6={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2"},y6=["value","disabled"],v6={key:0,class:"text-red-500 text-sm mt-1"},_6={key:1,class:"mt-2"},b6={class:"mr-2"},x6=["onUpdate:modelValue"],w6={key:0,value:"metade"},E6={class:"mb-4"},T6={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2"},k6=["value"],I6={class:"mb-4"},S6=["value"],A6={class:"mt-8 border-t pt-4 dark:border-gray-700"},C6={key:0},P6={key:1},R6={key:0},O6={key:1},D6={key:2},M6={key:0},N6={key:3},L6={class:"flex justify-between items-center mt-4 dark:text-gray-200"},V6={class:"text-xl font-bold"},$6=["disabled"],F6={key:4,class:"text-red-500 text-sm mt-1"},U6={__name:"BuildPizza",setup(t){const e=Io(),n=j([{name:"Mdia",maxSabor:2,price:25},{name:"Grande",maxSabor:4,price:35}]),s=j([{name:"Calabresa",price:10},{name:"Pepperoni",price:12},{name:"Margherita",price:9},{name:"Frango com Catupiry",price:11},{name:"Portuguesa",price:10},{name:"Quatro Queijos",price:13}]),r=j([{name:"Queijo Extra",price:5},{name:"Azeitonas",price:3},{name:"Bacon",price:6},{name:"Cebola Caramelizada",price:4}]),i=j([{name:"Catupiry",price:7},{name:"Cheddar",price:8},{name:"Chocolate",price:9}]),o=j(n.value[0]),a=j([]),l=j([]),c=j(null),u=j([]),h=ye(()=>o.value?o.value.maxSabor:0),f=y=>a.value.some(_=>_.name===y.name),g=ye(()=>{let y=o.value?o.value.price:0;return a.value.forEach((_,w)=>{y+=_.price/(u.value[w]==="metade"?2:1)}),l.value.forEach(_=>{y+=_.price}),c.value&&(y+=c.value.price),y}),v=()=>{if(a.value.length>=2&&a.value.length<=h.value){const y={id:"pizza-customizada-"+Date.now(),name:"Pizza Montada",size:o.value.name,sabores:a.value.map((_,w)=>({name:_.name,metade:u.value[w]})),adicionais:l.value.map(_=>_.name),borda:c.value?c.value.name:"Sem Borda",price:g.value,quantity:1};e.addItem(y),alert("Pizza personalizada adicionada ao carrinho!")}else alert(`Selecione de 2 a ${h.value} sabores para adicionar ao carrinho.`)};return(y,_)=>(P(),Ye(Di,{"top-nav-title":"Monte Sua Pizza"},{default:pe(()=>{var w;return[p("div",d6,[_[15]||(_[15]=p("h2",{class:"text-2xl font-semibold mb-6 dark:text-gray-200"},"Monte Sua Pizza",-1)),p("div",h6,[_[4]||(_[4]=p("label",{for:"pizza-size",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"}," Tamanho da Pizza: ",-1)),Ie(p("select",{id:"pizza-size","onUpdate:modelValue":_[0]||(_[0]=I=>o.value=I),class:"input"},[(P(!0),D(ve,null,Me(n.value,I=>(P(),D("option",{key:I.name,value:I},B(I.name)+" (Mx. "+B(I.maxSabor)+" sabores) - "+B(y.$formatPrice(I.price)),9,f6))),128))],512),[[us,o.value]]),o.value?(P(),D("p",p6," Voc pode escolher at "+B(o.value.maxSabor)+" sabores. ",1)):J("",!0)]),p("div",g6,[_[7]||(_[7]=p("h3",{class:"text-xl font-semibold mb-2 dark:text-gray-100"},"Sabores",-1)),p("div",m6,[(P(!0),D(ve,null,Me(s.value,I=>(P(),D("label",{key:I.name,class:"flex items-center"},[Ie(p("input",{type:"checkbox",value:I,"onUpdate:modelValue":_[1]||(_[1]=O=>a.value=O),disabled:a.value.length>=h.value&&!f(I),class:"mr-2"},null,8,y6),[[au,a.value]]),p("span",null,B(I.name)+" - "+B(y.$formatPrice(I.price)),1)]))),128))]),a.value.length>h.value?(P(),D("p",v6," Voc selecionou mais sabores do que o permitido para este tamanho. ")):J("",!0),a.value.length>1&&((w=o.value)==null?void 0:w.maxSabor)>1?(P(),D("div",_6,[_[6]||(_[6]=p("h4",{class:"font-semibold mb-1 dark:text-gray-100"},"Metades:",-1)),(P(!0),D(ve,null,Me(a.value,(I,O)=>(P(),D("div",{key:"metade-"+O,class:"flex items-center mb-1"},[p("span",b6,B(I.name)+":",1),Ie(p("select",{"onUpdate:modelValue":L=>u.value[O]=L,class:"input-sm"},[_[5]||(_[5]=p("option",{value:"inteira"},"Inteira",-1)),a.value.length===2?(P(),D("option",w6,"Metade")):J("",!0)],8,x6),[[us,u.value[O]]])]))),128))])):J("",!0)]),p("div",E6,[_[8]||(_[8]=p("h3",{class:"text-xl font-semibold mb-2 dark:text-gray-100"},"Adicionais",-1)),p("div",T6,[(P(!0),D(ve,null,Me(r.value,I=>(P(),D("label",{key:I.name,class:"flex items-center"},[Ie(p("input",{type:"checkbox",value:I,"onUpdate:modelValue":_[2]||(_[2]=O=>l.value=O),class:"mr-2"},null,8,k6),[[au,l.value]]),p("span",null,B(I.name)+" - "+B(y.$formatPrice(I.price)),1)]))),128))])]),p("div",I6,[_[10]||(_[10]=p("label",{for:"pizza-borda",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"}," Borda: ",-1)),Ie(p("select",{id:"pizza-borda","onUpdate:modelValue":_[3]||(_[3]=I=>c.value=I),class:"input"},[_[9]||(_[9]=p("option",{value:null},"Sem Borda",-1)),(P(!0),D(ve,null,Me(i.value,I=>(P(),D("option",{key:I.name,value:I},B(I.name)+" - "+B(y.$formatPrice(I.price)),9,S6))),128))],512),[[us,c.value]])]),p("div",A6,[_[14]||(_[14]=p("h3",{class:"text-xl font-semibold mb-2 dark:text-gray-100"},"Resumo:",-1)),o.value?(P(),D("p",C6," Tamanho: "+B(o.value.name)+" - "+B(y.$formatPrice(o.value.price)),1)):J("",!0),a.value.length>0?(P(),D("p",P6,[_[11]||(_[11]=ee(" Sabores: ")),(P(!0),D(ve,null,Me(a.value,(I,O)=>(P(),D("span",{key:I.name},[ee(B(I.name),1),u.value[O]==="metade"?(P(),D("span",R6," (Metade)")):J("",!0),O<a.value.length-1?(P(),D("span",O6," | ")):J("",!0),ee(" "+B(y.$formatPrice(I.price/(u.value[O]==="metade"?2:1))),1)]))),128))])):J("",!0),l.value.length>0?(P(),D("p",D6,[_[12]||(_[12]=ee(" Adicionais: ")),(P(!0),D(ve,null,Me(l.value,(I,O)=>(P(),D("span",{key:I.name},[ee(B(I.name)+" "+B(y.$formatPrice(I.price)),1),O<l.value.length-1?(P(),D("span",M6,", ")):J("",!0)]))),128))])):J("",!0),c.value?(P(),D("p",N6," Borda: "+B(c.value.name)+" - "+B(y.$formatPrice(c.value.price)),1)):J("",!0),p("div",L6,[_[13]||(_[13]=p("span",{class:"font-semibold"},"Preo Total:",-1)),p("span",V6,B(y.$formatPrice(g.value)),1)]),p("button",{onClick:v,disabled:a.value.length<2||a.value.length>h.value,class:"w-full bg-red-600 hover:bg-red-700 text-white font-semibold py-3 rounded-lg shadow-md mt-4 focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-green-500"}," Adicionar ao Carrinho ",8,$6),a.value.length<2||a.value.length>h.value?(P(),D("p",F6," Selecione de 2 a "+B(h.value)+" sabores para adicionar ao carrinho. ",1)):J("",!0)])])]}),_:1}))}},B6=Gt(U6,[["__scopeId","data-v-6c04b263"]]),j6={class:"container mx-auto p-4 max-w-md bg-white shadow-lg rounded-lg mt-8"},z6={class:"mb-6"},H6={key:0,class:"w-5 h-5 text-green-700",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},q6={key:1,class:"w-5 h-5 text-red-700",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},W6={key:2,class:"w-5 h-5 text-blue-700 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},K6={class:"mb-6"},G6=["value"],Y6={key:0,class:"text-green-600 text-xs mt-1"},Q6=["disabled"],X6={key:0},J6={key:1},Z6={key:2},eU={__name:"NotificationOptIn",setup(t){const n=ud({apiKey:"AIzaSyCqcgvxcgWwG4LmYkSL66x4GYi1KLxuHts",authDomain:"chat-bot-pizzaria.firebaseapp.com",projectId:"chat-bot-pizzaria",storageBucket:"chat-bot-pizzaria.firebasestorage.app",messagingSenderId:"1090893949199",appId:"1:1090893949199:web:cc9724c44f5ef76ea9f67a",measurementId:"G-TQ6E8YLYHD"}),s=ng(n),r=j("Carregando status..."),i=j(null),o=j(!1),a=j(!1),l=j(!0),c=j("loading_user_id");s.onAuthStateChanged(g=>{if(g)c.value=g.uid,console.log("User ID from Firebase Auth:",c.value);else{let v=localStorage.getItem("guestUserId");v||(v=`guest_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,localStorage.setItem("guestUserId",v)),c.value=v,console.log("Guest User ID:",c.value)}});const u=ye(()=>r.value.includes("Concedida")?"bg-green-100 text-green-800":r.value.includes("Negada")?"bg-red-100 text-red-800":r.value.includes("Erro")||r.value.includes("no suportadas")?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"),h=async()=>{o.value=!0;try{const g=await Ru(c.value);g?(i.value=g,r.value="Permisso de notificao Concedida!"):r.value="Permisso de notificao Negada ou token no obtido."}catch(g){console.error("Erro geral ao lidar com a solicitao de notificao:",g),r.value=`Erro: ${g.message}`}finally{o.value=!1}},f=()=>{i.value&&navigator.clipboard.writeText(i.value).then(()=>{a.value=!0,setTimeout(()=>{a.value=!1},2e3)}).catch(g=>{console.error("Falha ao copiar o token:",g)})};return mt(async()=>{if(!await Dd()){l.value=!1,r.value="Notificaes no suportadas neste navegador.";return}if("serviceWorker"in navigator)try{const y=await navigator.serviceWorker.register("/firebase-messaging-sw.js");console.log("Service Worker registrado com sucesso:",y)}catch(y){console.error("Falha ao registrar o Service Worker:",y),r.value=`Erro ao registrar Service Worker: ${y.message}`,l.value=!1;return}else{r.value="Navegador no suporta Service Workers.",l.value=!1;return}MT();const v=Notification.permission;if(v==="granted"){r.value="Permisso de notificao Concedida.";try{const y=await Ru(c.value);y&&(i.value=y)}catch(y){console.error("Erro ao obter token na montagem:",y),r.value=`Erro ao obter token: ${y.message}`}}else v==="denied"?r.value="Permisso de notificao Negada.":r.value="Aguardando permisso..."}),(g,v)=>(P(),D("div",j6,[v[5]||(v[5]=p("h2",{class:"text-2xl font-bold text-gray-800 mb-6 text-center"},"Configuraes de Notificao",-1)),p("div",z6,[v[3]||(v[3]=p("p",{class:"text-gray-700 mb-2"},"Status das Notificaes:",-1)),p("div",{class:ce([u.value,"p-3 rounded-md text-sm font-medium flex items-center justify-between"])},[p("span",null,B(r.value),1),r.value.includes("Concedida")?(P(),D("svg",H6,v[0]||(v[0]=[p("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):r.value.includes("Negada")?(P(),D("svg",q6,v[1]||(v[1]=[p("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1)]))):(P(),D("svg",W6,v[2]||(v[2]=[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004 12c0 2.21.894 4.204 2.342 5.658M18 18v-5h-.582m-15.356-2A8.001 8.001 0 0020 12c0-2.21-.894-4.204-2.342-5.658"},null,-1)])))],2)]),p("div",K6,[v[4]||(v[4]=p("p",{class:"text-gray-700 mb-2"},"Seu Token FCM:",-1)),p("input",{type:"text",value:i.value||"Gerando...",readonly:"",class:"w-full p-2 border border-gray-300 rounded-md bg-gray-100 text-gray-600 text-sm font-mono",onClick:f},null,8,G6),a.value?(P(),D("p",Y6,"Copiado!")):J("",!0)]),p("button",{onClick:h,disabled:o.value||!l.value,class:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md transition duration-300 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed"},[l.value?o.value?(P(),D("span",J6,"Permisso Solicitada")):(P(),D("span",Z6,"Solicitar Permisso de Notificao")):(P(),D("span",X6,"Notificaes no suportadas"))],8,Q6),v[6]||(v[6]=p("p",{class:"text-gray-500 text-xs mt-4 text-center"}," Ative as notificaes para receber atualizaes sobre seus pedidos e promoes. ",-1))]))}},tU=Gt(eU,[["__scopeId","data-v-422d1d2a"]]),Vd=Ju("auth",{state:()=>({user:JSON.parse(localStorage.getItem("adminUser"))||null,authToken:localStorage.getItem("adminAuthToken")||null,loading:!1,error:null}),getters:{isAuthenticated:t=>!!t.authToken&&!!t.user,isAdmin:t=>{var e;return((e=t.user)==null?void 0:e.isAdmin)||!1}},actions:{async _updateUserInfoFromFirebase(t){if(!t){this.user=null;return}const e=await t.getIdTokenResult(!0);this.user={uid:t.uid,email:t.email,displayName:t.displayName,isAdmin:e.claims.admin||!1},localStorage.setItem("adminUser",JSON.stringify(this.user)),console.log("Auth Store: User info updated from Firebase ID Token claims:",this.user)},async loginWithEmail(t,e){const n=Aa();this.loading=!0,this.error=null;try{const i=await(await YM(En,t,e)).user.getIdToken(),o=await Xe.post("/auth/login",{idToken:i});this.authToken=o.data.customToken,localStorage.setItem("adminAuthToken",this.authToken),await Nh(En,this.authToken),await this._updateUserInfoFromFirebase(En.currentUser),n.showToast("Sucesso!","Login realizado com sucesso.","success"),fi.push("/admin")}catch(s){console.error("Erro ao fazer login com e-mail:",s);let r="Erro ao fazer login. Tente novamente.";s.code==="auth/user-not-found"||s.code==="auth/wrong-password"||s.code==="auth/invalid-credential"||s.code==="auth/invalid-email"?r="Email ou senha invlidos.":s.response&&s.response.data&&s.response.data.error&&(r=s.response.data.error),this.error=r,n.showToast("Erro de Login",r,"error"),this.authToken=null,this.user=null,localStorage.removeItem("adminAuthToken"),localStorage.removeItem("adminUser")}finally{this.loading=!1}},async loginWithGoogle(){const t=Aa();this.loading=!0,this.error=null;try{const s=await(await vN(En,C$)).user.getIdToken(),r=await Xe.post("/auth/google",{idToken:s});this.authToken=r.data.customToken,localStorage.setItem("adminAuthToken",this.authToken),await Nh(En,this.authToken),await this._updateUserInfoFromFirebase(En.currentUser),t.showToast("Sucesso!","Login com Google realizado com sucesso.","success"),fi.push("/admin")}catch(e){console.error("Erro ao fazer login com Google:",e);let n="Erro ao fazer login com Google. Tente novamente.";e.response&&e.response.data&&e.response.data.error&&(n=e.response.data.error),this.error=n,t.showToast("Erro de Login",n,"error"),this.authToken=null,this.user=null,localStorage.removeItem("adminAuthToken"),localStorage.removeItem("adminUser")}finally{this.loading=!1}},async logout(){const t=Aa();this.loading=!0,this.error=null;try{await JM(En),this.authToken=null,this.user=null,localStorage.removeItem("adminAuthToken"),localStorage.removeItem("adminUser"),t.showToast("Logout","Voc foi desconectado.","info"),fi.push("/admin/login")}catch(e){console.error("Erro ao fazer logout:",e),this.error="Erro ao fazer logout.",t.showToast("Erro de Logout","No foi possvel desconectar.","error")}finally{this.loading=!1}},async initializeAuth(){const t=localStorage.getItem("adminAuthToken");if(t){this.authToken=t;try{await Nh(En,t),await this._updateUserInfoFromFirebase(En.currentUser),console.log("Auth Store: Inicializado com token e user do localStorage. isAdmin:",this.user.isAdmin)}catch(e){console.error("Erro ao re-autenticar com custom token:",e),this.authToken=null,this.user=null,localStorage.removeItem("adminAuthToken"),localStorage.removeItem("adminUser")}}else this.authToken=null,this.user=null,localStorage.removeItem("adminAuthToken"),localStorage.removeItem("adminUser"),console.log("Auth Store: Nenhum token/user no localStorage ou inconsistente. Limpando.")}}}),nU={class:"space-y-3 h-full flex flex-col justify-between"},sU={class:"flex-1 space-y-2"},rU={key:0,class:"tooltip"},iU={key:0,class:"tooltip"},oU={key:0,class:"tooltip"},aU={key:0,class:"tooltip"},lU={key:0,class:"tooltip"},cU={key:0,class:"tooltip"},uU={key:0,class:"tooltip"},dU={key:0,class:"tooltip"},hU={key:0,class:"absolute top-1 left-full ml-3 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-xl opacity-0 group-hover:opacity-100 transition-all duration-300 pointer-events-none whitespace-nowrap z-[9999] transform translate-x-2 group-hover:-translate-x-2"},fU={key:0,class:"fixed inset-0 bg-gray-800 p-6 z-50 md:hidden flex flex-col w-64 shadow-lg translate-x-0 transition-transform duration-300 ease-in-out"},pU={class:"space-y-3 flex-grow"},gU={__name:"Sidebar",props:{mobileMenuOpen:{type:Boolean,default:!1},shortMenu:{type:Boolean,default:!1}},emits:["toggle-mobile-menu","toggle-short-menu"],setup(t,{emit:e}){const n=e,s=()=>{n("toggle-mobile-menu")},r=()=>{n("toggle-short-menu")};return(i,o)=>{const a=To("RouterLink");return P(),D(ve,null,[p("nav",{class:ce([t.shortMenu?"w-18":"w-44","hidden md:block bg-sky-950 dark:bg-gray-800 shadow-lg fixed left-0 top-0 h-[calc(100vh)] transition-all duration-200 z-50"])},[p("div",nU,[o[17]||(o[17]=p("div",{class:"flex items-center justify-center bg-sky-900 text-gray-200 p-2 rounded-t-md"},"PN",-1)),p("div",sU,[re(a,{to:"/admin",class:"item__menu group"},{default:pe(()=>[o[1]||(o[1]=p("i",{class:"fa-duotone fa-chart-line fa-fw"},null,-1)),p("span",{class:ce(["grow text-sm text-ellipsis line-clamp-1 pr-1",t.shortMenu?"hidden":""])},"Dashboard",2),t.shortMenu?(P(),D("div",rU,o[0]||(o[0]=[p("i",{class:"arrow__tooltip"},null,-1),ee("Dashboard ")]))):J("",!0)]),_:1,__:[1]}),re(a,{to:"/admin/orders",class:"item__menu group"},{default:pe(()=>[o[3]||(o[3]=p("i",{class:"fa-duotone fa-book fa-fw","aria-hidden":"true"},null,-1)),p("span",{class:ce(["grow text-sm text-ellipsis line-clamp-1 pr-1",t.shortMenu?"hidden":""])},"Pedidos",2),t.shortMenu?(P(),D("div",iU,o[2]||(o[2]=[p("i",{class:"arrow__tooltip"},null,-1),ee("Pedidos ")]))):J("",!0)]),_:1,__:[3]}),re(a,{to:"/admin/products",class:"item__menu group"},{default:pe(()=>[o[5]||(o[5]=p("i",{class:"fa-duotone fa-box-open fa-fw","aria-hidden":"true"},null,-1)),p("span",{class:ce(["grow text-sm text-ellipsis line-clamp-1 pr-1",t.shortMenu?"hidden":""])},"Produtos",2),t.shortMenu?(P(),D("div",oU,o[4]||(o[4]=[p("i",{class:"arrow__tooltip"},null,-1),ee("Produtos ")]))):J("",!0)]),_:1,__:[5]}),re(a,{to:"/admin/categories",class:"item__menu group"},{default:pe(()=>[o[7]||(o[7]=p("i",{class:"fa-duotone fa-tags fa-fw","aria-hidden":"true"},null,-1)),p("span",{class:ce(["grow text-sm text-ellipsis line-clamp-1 pr-1",t.shortMenu?"hidden":""])},"Categorias",2),t.shortMenu?(P(),D("div",aU,o[6]||(o[6]=[p("i",{class:"arrow__tooltip"},null,-1),ee("Categorias ")]))):J("",!0)]),_:1,__:[7]}),re(a,{to:"/admin/whatsapp-qr",class:"item__menu group"},{default:pe(()=>[o[9]||(o[9]=p("i",{class:"fab fa-whatsapp fa-fw","aria-hidden":"true"},null,-1)),p("span",{class:ce(["grow text-sm text-ellipsis line-clamp-1 pr-1",t.shortMenu?"hidden":""])},"Whatsapp",2),t.shortMenu?(P(),D("div",lU,o[8]||(o[8]=[p("i",{class:"arrow__tooltip"},null,-1),ee("WhatsApp ")]))):J("",!0)]),_:1,__:[9]}),re(a,{to:"/admin/settings",class:"item__menu group"},{default:pe(()=>[o[11]||(o[11]=p("i",{class:"fa-duotone fa-tools fa-fw","aria-hidden":"true"},null,-1)),p("span",{class:ce(["grow text-sm text-ellipsis line-clamp-1 pr-1",t.shortMenu?"hidden":""])},"Configuraes",2),t.shortMenu?(P(),D("div",cU,o[10]||(o[10]=[p("i",{class:"arrow__tooltip"},null,-1),ee("Configuraes ")]))):J("",!0)]),_:1,__:[11]}),re(a,{to:"/admin/manage-users",class:"item__menu group"},{default:pe(()=>[o[13]||(o[13]=p("i",{class:"fa-duotone fa-users-gear fa-fw","aria-hidden":"true"},null,-1)),p("span",{class:ce(["grow text-sm text-ellipsis line-clamp-1 pr-1",t.shortMenu?"hidden":""])},"Usurios",2),t.shortMenu?(P(),D("div",uU,o[12]||(o[12]=[p("i",{class:"arrow__tooltip"},null,-1),ee("Usurios ")]))):J("",!0)]),_:1,__:[13]}),re(a,{to:"/admin/reports",class:"item__menu group"},{default:pe(()=>[o[15]||(o[15]=p("i",{class:"fa-duotone fa-chart-pie fa-fw","aria-hidden":"true"},null,-1)),p("span",{class:ce(["grow text-sm text-ellipsis line-clamp-1 pr-1",t.shortMenu?"hidden":""])},"Relatrios",2),t.shortMenu?(P(),D("div",dU,o[14]||(o[14]=[p("i",{class:"arrow__tooltip"},null,-1),ee("Relatrios ")]))):J("",!0)]),_:1,__:[15]})]),p("div",{class:"p-2 flex text-gray-300 relative cursor-pointer hover:text-white transition-colors group bg-sky-600 hover:bg-sky-700 h-10 space-x-2 justify-center items-center",onClick:r},[p("i",{class:ce([t.shortMenu?"fa-circle-arrow-right":"fa-circle-arrow-left","fa-light fa-fw"]),"aria-hidden":"true"},null,2),p("span",{class:ce(["grow text-sm text-ellipsis line-clamp-1 pr-1",t.shortMenu?"hidden":""])},"Recolher menu",2),t.shortMenu?(P(),D("div",hU,[ee(B(t.shortMenu?"Expandir menu":"Contrair menu")+" ",1),o[16]||(o[16]=p("div",{class:"absolute top-1/2 left-[2px] transform -translate-x-2 -translate-y-1/2 w-0 h-0 border-t-[6px] border-b-[6px] border-r-[6px] border-transparent border-r-gray-900"},null,-1))])):J("",!0)])])],2),re(ko,{name:"slide"},{default:pe(()=>[t.mobileMenuOpen?(P(),D("aside",fU,[p("div",{class:"flex justify-end mb-6"},[p("button",{onClick:s,class:"text-gray-500 dark:text-white text-3xl"},"  ")]),p("nav",pU,[re(a,{onClick:s,to:"/admin","active-class":"bg-gray-700 text-white",class:"flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-300 hover:bg-blue-50 dark:hover:bg-gray-700 transition-colors duration-200"},{default:pe(()=>o[18]||(o[18]=[p("i",{class:"fa-duotone fa-chart-line mr-3 text-lg"},null,-1),ee(" Dashboard ")])),_:1,__:[18]}),re(a,{onClick:s,to:"/admin/orders","active-class":"bg-gray-700 text-white",class:"flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-300 hover:bg-blue-50 dark:hover:bg-gray-700 transition-colors duration-200"},{default:pe(()=>o[19]||(o[19]=[p("i",{class:"fa-duotone fa-receipt mr-3 text-lg"},null,-1),ee(" Pedidos ")])),_:1,__:[19]}),re(a,{onClick:s,to:"/admin/products","active-class":"bg-gray-700 text-white",class:"flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-300 hover:bg-blue-50 dark:hover:bg-gray-700 transition-colors duration-200"},{default:pe(()=>o[20]||(o[20]=[p("i",{class:"fa-duotone fa-box-open mr-3 text-lg"},null,-1),ee(" Produtos ")])),_:1,__:[20]}),re(a,{onClick:s,to:"/admin/categories","active-class":"bg-gray-700 text-white",class:"flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-300 hover:bg-blue-50 dark:hover:bg-gray-700 transition-colors duration-200"},{default:pe(()=>o[21]||(o[21]=[p("i",{class:"fa-duotone fa-tags mr-3 text-lg"},null,-1),ee(" Categorias ")])),_:1,__:[21]}),re(a,{onClick:s,to:"/admin/whatsapp-qr","active-class":"bg-gray-700 text-white",class:"flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-300 hover:bg-blue-50 dark:hover:bg-gray-700 transition-colors duration-200"},{default:pe(()=>o[22]||(o[22]=[p("i",{class:"fab fa-whatsapp mr-3 text-lg"},null,-1),ee(" WhatsApp QR ")])),_:1,__:[22]}),re(a,{onClick:s,to:"/admin/settings","active-class":"bg-gray-700 text-white",class:"flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-300 hover:bg-blue-50 dark:hover:bg-gray-700 transition-colors duration-200"},{default:pe(()=>o[23]||(o[23]=[p("i",{class:"fa-duotone fa-tools mr-3 text-lg"},null,-1),ee(" Configuraes ")])),_:1,__:[23]}),re(zc,{class:"border-b-gray-900/30"}),re(a,{onClick:s,to:"/admin/manage-users","active-class":"bg-gray-700 text-white",class:"flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-300 hover:bg-blue-50 dark:hover:bg-gray-700 transition-colors duration-200"},{default:pe(()=>o[24]||(o[24]=[p("i",{class:"fa-duotone fa-users-gear mr-3 text-lg"},null,-1),ee(" Gerenciar Usurios ")])),_:1,__:[24]}),re(a,{onClick:s,to:"/admin/reports","active-class":"bg-gray-700 text-white",class:"flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-300 hover:bg-blue-50 dark:hover:bg-gray-700 transition-colors duration-200"},{default:pe(()=>o[25]||(o[25]=[p("i",{class:"fa-duotone fa-chart-pie mr-3 text-lg"},null,-1),ee(" Relatrios ")])),_:1,__:[25]})])])):J("",!0)]),_:1})],64)}}},mU=Gt(gU,[["__scopeId","data-v-42608a79"]]),yU={class:"grid min-h-screen bg-gray-200 dark:bg-gray-900 relative"},vU={class:"flex space-x-6"},_U={class:"flex items-center space-x-4 py-4 group relative"},bU={key:0,class:"text-gray-700 dark:text-gray-300 sm:block"},xU={class:"text-xs"},wU={__name:"AdminLayout",setup(t){const e=Vd(),n=j(!1),s=j(!1),r=j(!1),i=()=>{const h=localStorage.getItem("adminSidebarShortMenu");h!==null&&(r.value=JSON.parse(h))},o=h=>{localStorage.setItem("adminSidebarShortMenu",JSON.stringify(h))},a=()=>{s.value=!s.value},l=()=>{n.value=!n.value},c=()=>{r.value=!r.value,o(r.value)},u=()=>{n.value=!1};return kt(r,h=>{o(h)}),mt(()=>{e.initializeAuth(),i()}),(h,f)=>{var g;return P(),D("div",null,[p("div",yU,[p("header",{class:ce(["fixed top-0 lg:top-0.5 left-0 right-0 lg:right-2 z-50 bg-gray-100/30 backdrop-blur-xs dark:bg-gray-800/50 shadow pr-6 pl-4 md:pl-0 flex items-center justify-between h-14 rounded-2xl transform-all duration-300",r.value?"lg:left-25":"lg:left-56"])},[p("div",{class:"flex items-center"},[p("button",{onClick:l,class:"md:hidden text-gray-700 dark:text-white text-2xl mr-4"},f[2]||(f[2]=[p("i",{class:"fa-duotone fa-solid fa-bars-sort"},null,-1)])),f[3]||(f[3]=p("h1",{class:"text-md font-bold p-4 hidden md:flex transition-all duration-300 dark:text-gray-200"},[p("span",null,"Painel Admin")],-1))]),p("div",vU,[f[7]||(f[7]=ru('<div class="flex items-center space-x-8" data-v-cff4ece8><button class="text-gray-700 dark:text-white text-2xl cursor-pointer relative group" data-v-cff4ece8><span class="absolute top-0 -right-2 bg-orange-600 text-white text-xs rounded-full px-1 z-10" data-v-cff4ece8>3</span><i class="fa-duotone fa-bell" data-v-cff4ece8></i><div class="rounded-md text-xs z-20 px-2 py-1 bg-white dark:bg-gray-700 absolute -bottom-5 -left-1/2 shadow-md group-hover:flex hidden group-hover:translate-y-2 animate__animated animate__fadeIn" data-v-cff4ece8> Notificaes </div></button><button class="text-gray-700 dark:text-white text-2xl cursor-pointer relative group" data-v-cff4ece8><span class="absolute top-0 -right-2 bg-yellow-600 text-white text-xs rounded-full px-1 z-10" data-v-cff4ece8>3</span><i class="fa-duotone fa-envelope" data-v-cff4ece8></i><div class="rounded-md text-xs z-20 px-2 py-1 bg-white dark:bg-gray-700 absolute -bottom-5 -left-1/2 shadow-md group-hover:flex hidden group-hover:translate-y-2 animate__animated animate__fadeIn" data-v-cff4ece8> Mensagens </div></button><button class="text-gray-700 dark:text-white text-2xl cursor-pointer relative group" data-v-cff4ece8><i class="fa-duotone fa-cogs" data-v-cff4ece8></i><div class="rounded-md text-xs z-20 px-2 py-1 bg-white dark:bg-gray-700 absolute -bottom-5 -left-1/2 shadow-md group-hover:flex hidden group-hover:translate-y-2 animate__animated animate__fadeIn" data-v-cff4ece8> Configuraes </div></button></div>',1)),p("div",_U,[(g=te(e).user)!=null&&g.email?(P(),D("div",bU,[p("div",{onClick:a,class:"flex items-center cursor-pointer"},[f[4]||(f[4]=p("i",{class:"fa-duotone fa-user-circle mr-2 text-2xl dark:text-white"},null,-1)),p("span",xU,B(te(e).user.displayName),1)]),p("ul",{class:ce(["w-auto flex-col space-y-4 text-sm dark:text-gray-200 bg-gray-100 dark:bg-gray-800 absolute p-2 rounded-md shadow-lg top-8 -z-50 -right-1 opacity-0 -translate-y-full group-hover:flex group-hover:translate-y-5 group-hover:opacity-100 transition-all duration-200 border border-gray-200 dark:border-gray-800",[{"opacity-100 translate-y-5":s.value}]])},[f[6]||(f[6]=ru('<li class="flex items-center space-x-2 p-2 whitespace-nowrap cursor-pointer hover:bg-gray-200/90 dark:hover:bg-gray-400" data-v-cff4ece8><i class="fa-duotone fa-user" data-v-cff4ece8></i><span class="text-gray-600" data-v-cff4ece8>Perfil</span></li><li class="flex items-center space-x-2 p-2 whitespace-nowrap cursor-pointer hover:bg-gray-200/90 dark:hover:bg-gray-400" data-v-cff4ece8><i class="fa-duotone fa-cog" data-v-cff4ece8></i><span class="text-gray-600" data-v-cff4ece8>Configuraes</span></li><li class="flex items-center space-x-2 p-2 whitespace-nowrap cursor-pointer hover:bg-gray-200/90 dark:hover:bg-gray-400" data-v-cff4ece8><i class="fa-duotone fa-lock" data-v-cff4ece8></i><span class="text-gray-600" data-v-cff4ece8>Segurana</span></li>',3)),p("li",{onClick:f[0]||(f[0]=v=>te(e).logout()),class:"flex items-center space-x-2 p-2 whitespace-nowrap cursor-pointer text-red-600 hover:bg-gray-200/90 dark:hover:bg-gray-400"},f[5]||(f[5]=[p("i",{class:"fa-duotone fa-solid fa-right-from-bracket"},null,-1),p("span",null,"Sair",-1)]))],2)])):J("",!0)])])],2),re(mU,{"mobile-menu-open":n.value,"short-menu":r.value,onToggleMobileMenu:l,onToggleShortMenu:c},null,8,["mobile-menu-open","short-menu"]),p("main",{class:ce(["flex-1 mt-14 p-4 transition-all duration-300",r.value?"md:ml-22":"md:ml-52"]),onClick:f[1]||(f[1]=v=>s.value=!1)},[p("div",{class:ce(["transition-transform duration-300 ease-in-out",{"translate-x-0":!n.value,"translate-x-52 original-transform":n.value}]),onClick:Mn(u,["stop"])},[Tp(h.$slots,"default",{},void 0,!0)],2)],2)])])}}},Mi=Gt(wU,[["__scopeId","data-v-cff4ece8"]]),EU={class:"grid min-h-screen grid-cols-1 gap-0 md:grid-cols-3 lg:grid-cols-6 relative"},TU={class:"grid grid-col"},kU={__name:"AdminDashboard",setup(t){const e=j(!1),n=j(!0);function s(){e.value=!0}function r(){e.value=!1}const i=j({totalOrders:0,completedOrders:0,pendingOrders:0,totalRevenue:0,totalProducts:0,totalCategories:0,topSellingProducts:[],totalClients:0,totalOrders:0,newClientsLast30Days:0,mostActiveClients:[],deliveryOrders:0,pickupOrders:0,averageDeliveryFee:0,pixPayments:0,cardPayments:0,cashPayments:0});async function o(){var a;n.value=!0;try{const l=i.value;return i.value={completedOrders:l.data.completedOrders||980,pendingOrders:l.data.pendingOrders||150,totalRevenue:l.data.totalRevenue||75000.5,totalProducts:l.data.totalProducts||55,totalCategories:l.data.totalCategories||12,topSellingProducts:l.data.topSellingProducts||[{name:"Pizza de Calabresa",sales:120},{name:"Coca-Cola 2L",sales:90},{name:"Pizza de Chocolate",sales:75}],totalClients:l.data.totalClients||800,totalOrders:l.data.totalOrders||1234,newClientsLast30Days:l.data.newClientsLast30Days||45,mostActiveClients:l.data.mostActiveClients||[{name:"Ana Souza",orders:15},{name:"Carlos Lima",orders:12}],deliveryOrders:l.data.deliveryOrders||850,pickupOrders:l.data.pickupOrders||384,averageDeliveryFee:l.data.averageDeliveryFee||7.5,pixPayments:l.data.pixPayments||3e4,cardPayments:l.data.cardPayments||4e4,cashPayments:l.data.cashPayments||5000.5},console.log("Dados do dashboard carregados:",i.value),i.value}catch(l){console.error("Erro ao carregar dados do dashboard:",((a=l.response)==null?void 0:a.data)||l.message)}finally{n.value=!1}}return mt(()=>{o()}),(a,l)=>{const c=To("RouterLink");return P(),D("div",EU,[re(c,{to:"/admin/orders",class:"col-span-1 flex items-center justify-center bg-sky-400 text-white md:col-span-2 lg:col-span-5 cursor-pointer",onClick:r},{default:pe(()=>l[0]||(l[0]=[p("h3",null,"Gerenciar pedidos",-1)])),_:1,__:[0]}),p("div",TU,[re(c,{to:"/admin/categories",class:"flex flex-col items-center justify-center bg-orange-400 text-orange-800 cursor-pointer relative overflow-hiddn group before:absolute before:content-[''] before:-bottom-[20px] before:right-0 before:w-0 before:h-0 before:border-t-[60px] before:border-t-gray-400 before:border-b-[60px] before:border-b-transparent before:border-r-[100vw] before:border-r-transparent"},{default:pe(()=>l[1]||(l[1]=[p("span",null,"Gerenciar entregadores",-1),p("div",{class:"absolute -bottom-2 -right-2 z-50 text-green-800/60 -rotate-12 group-hover:bottom-0 group-hover:rotate-0 transition-all duration-200 ease-in"},[p("i",{class:"fa-duotone fa-truck fa-4x"})],-1)])),_:1,__:[1]}),re(c,{to:"/admin/products",class:"flex items-center justify-center bg-green-500 text-green-800 cursor-pointer relative overflow-hidden"},{default:pe(()=>l[2]||(l[2]=[ee(" Gerenciar produtos "),p("div",{class:"absolute -bottom-2 -right-2 z-50 text-green-800/60 -rotate-12"},[p("i",{class:"fa-duotone fa-box fa-4x"})],-1)])),_:1,__:[2]}),re(c,{to:"/admin/categories",class:"flex flex-col items-center justify-center bg-yellow-500 text-yellow-800 cursor-pointer overflow-hidden relative"},{default:pe(()=>l[3]||(l[3]=[ee(" Gerenciar categorias "),p("div",{class:"absolute -bottom-2 -right-2 z-50 text-green-800/60 -rotate-12"},[p("i",{class:"fa-duotone fa-list fa-4x"})],-1)])),_:1,__:[3]}),re(c,{to:"/admin/settings",class:"flex flex-col items-center justify-center bg-purple-400 text-white relative overflow-hidden"},{default:pe(()=>l[4]||(l[4]=[ee(" Configuraes "),p("div",{class:"absolute -bottom-2 -right-2 z-50 text-green-800/60 -rotate-12"},[p("i",{class:"fa-duotone fa-cogs fa-4x"})],-1)])),_:1,__:[4]})]),p("div",{onClick:s,class:"absolute top-2 left-2 flex h-10 w-10 cursor-pointer items-center justify-center bg-gray-100/60"},l[5]||(l[5]=[p("i",{class:"fa-duotone fa-solid fa-bars-sort"},null,-1)])),p("div",{class:ce([e.value?"translate-x-0":"-translate-x-full","absolute top-0 left-0 min-h-svh w-64 transform rounded-r-md bg-gray-200 p-4 shadow-lg duration-200 ease-in"])}," MENU ",2)])}}};function Tn(t){return typeof t!="number"?"R$ 0,00":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2,maximumFractionDigits:2}).format(t)}function Ti(t){if(!t)return"";let e=String(t).replace(/_/g," ");return e.charAt(0).toUpperCase()+e.slice(1)}function jg(t){if(!t)return"";if(t&&typeof t.toDate=="function")return t.toDate().toLocaleString("pt-BR");if(t instanceof Date)return t.toLocaleString("pt-BR");try{return new Date(t).toLocaleString("pt-BR")}catch{return""}}function Na(t){switch(t){case"bank_transfer":return"Pix";case"credit_card":return"Carto";case"debit_card":return"Carto de Dbito";case"cash":return"Dinheiro";default:return Ti(t)}}function GT(t){switch(t){case"paid":case"approved":return"Aprovado";case"pending":return"Pendente";case"failed":return"Falhou";case"refunded":return"Reembolsado";case"cancelled":return"Cancelado";default:return Ti(t)}}function dr(t){switch(t){case"em processamento":return"px-2 py-0.5 text-xs font-medium rounded-full bg-orange-50 text-orange-600 dark:bg-orange-500/15 dark:text-orange-500";case"recebido":return"px-2 py-0.5 text-xs font-medium rounded-full bg-yellow-50 text-yellow-600 dark:bg-yellow-500/15 dark:text-yellow-500";case"em_preparo":return"px-2 py-0.5 text-xs font-medium rounded-full bg-blue-50 text-blue-600 dark:bg-blue-500/15 dark:text-blue-500";case"finalizado":case"entregue":return"px-2 py-0.5 text-xs font-medium rounded-full bg-green-50 text-green-600 dark:bg-green-500/15 dark:text-green-500";case"a_caminho":case"assigned":return"px-2 py-0.5 text-xs font-medium rounded-full bg-purple-50 text-purple-600 dark:bg-purple-500/15 dark:text-purple-500";case"cancelled":case"cancelado":return"px-2 py-0.5 text-xs font-medium bg-red-50 text-red-600 dark:bg-red-500/15 dark:text-red-500";case"pending":return"px-2 py-0.5 text-xs font-medium rounded-full bg-gray-50 text-gray-600 dark:bg-gray-500/15 dark:text-gray-500";default:return"px-2 py-0.5 text-xs font-medium rounded-full bg-gray-50 text-gray-600 dark:bg-gray-500/15 dark:text-gray-500"}}function ns(t){return t?t&&typeof t.toDate=="function"?t.toDate().getTime():t&&typeof t._seconds<"u"?t._seconds*1e3:t instanceof Date?t.getTime():typeof t=="string"?new Date(t).getTime():typeof t=="number"?t>1e12?t:t*1e3:0:0}const IU={class:"flex-shrink-0 space-y-1 text-xs"},SU={class:"font-semibold"},AU={class:"font-light"},CU={class:"font-light"},PU={class:"flex items-center justify-between space-x-4"},RU={class:"font-light"},OU={class:"font-semibold hidden"},DU={class:"font-semibold"},MU={class:"font-light"},NU={key:0,class:"font-semibold"},LU={class:"font-light"},VU={key:1,class:"font-semibold text-orange-500"},$U={class:"flex items-center justify-center space-x-2 flex-col"},FU=["disabled"],UU=["disabled"],uc={__name:"OrderCard",props:{order:{type:Object,required:!0},newOrderIds:{type:Set,default:()=>new Set}},emits:["view-order","assign-order","complete-delivery"],setup(t,{emit:e}){const n=t,s=ye(()=>{if(n.newOrderIds.has(n.order.id))return"bg-green-50 dark:bg-green-900/20 border border-green-200/40 dark:border-green-700/40";switch(n.order.delivery_status||n.order.status){case"em_preparo":return"bg-blue-50 dark:bg-blue-900/20 border border-blue-200/40 dark:border-blue-700/40";case"a_caminho":return"bg-purple-50 dark:bg-purple-900/20 border border-purple-200/40 dark:border-purple-700/40";case"assigned":return"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200/40 dark:border-yellow-700/40";default:return"bg-gray-100 dark:bg-gray-800 border border-gray-200/40 dark:border-gray-700/40"}});return(r,i)=>(P(),D("div",{class:ce(["p-2 rounded-md border text-gray-800 dark:text-white text-sm flex items-end justify-between shadow-md cursor-pointer hover:shadow-lg transition-all duration-300",s.value]),onClick:i[2]||(i[2]=o=>r.$emit("view-order",t.order))},[p("div",IU,[p("p",SU,[i[3]||(i[3]=ee("Pedido: ")),p("span",AU,B(t.order.id),1)]),p("p",null,[i[4]||(i[4]=p("i",{class:"fa-solid fa-user"},null,-1)),i[5]||(i[5]=ee()),p("span",CU,B(t.order.client),1)]),p("div",PU,[p("div",null,[i[6]||(i[6]=p("i",{class:"fa-solid fa-money-bill-wave mr-2"},null,-1)),p("span",RU,B(te(Tn)(t.order.total)),1)]),p("div",null,"Pagamento: "+B(te(GT)(t.order.payment_status)),1)]),p("p",OU,[i[7]||(i[7]=ee("Status: ")),p("span",{class:ce(["font-light",te(dr)(t.order.status)])},B(te(Ti)(t.order.status)),3)]),p("p",DU,[i[8]||(i[8]=p("i",{class:"fa-solid fa-calendar-days"},null,-1)),i[9]||(i[9]=ee()),p("span",MU,B(te(jg)(t.order.created_at)),1)]),t.order.assigned_delivery_man_name?(P(),D("p",NU,[i[10]||(i[10]=ee("Entregador: ")),p("span",LU,B(t.order.assigned_delivery_man_name),1)])):(P(),D("p",VU,i[11]||(i[11]=[p("span",{class:"font-light"},"Sem entregador",-1)])))]),p("div",$U,[["pending","recebido","em processamento"].includes(t.order.delivery_status||t.order.status)?(P(),D("button",{key:0,onClick:i[0]||(i[0]=Mn(o=>r.$emit("assign-order",t.order),["stop"])),disabled:t.order.assigned_delivery_man_id!==null,class:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-full text-xs transition duration-300 ease-in-out focus:outline-none focus:shadow-outline disabled:opacity-50 disabled:cursor-not-allowed mb-1"}," Atribuir ",8,FU)):J("",!0),t.order.assigned_delivery_man_id&&t.order.delivery_status!=="delivered"?(P(),D("button",{key:1,onClick:i[1]||(i[1]=Mn(o=>r.$emit("complete-delivery",t.order),["stop"])),disabled:t.order.delivery_status==="delivered",class:"bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-full text-xs transition duration-300 ease-in-out focus:outline-none focus:shadow-outline disabled:opacity-50 disabled:cursor-not-allowed"}," Entregue ",8,UU)):J("",!0)])],2))}},BU={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg w-auto max-h-[95vh] overflow-y-auto p-6 relative custom-scrollbar",role:"dialog","aria-modal":"true"},jU={__name:"BaseModal",props:{open:{type:Boolean,default:!1}},emits:["update:open"],setup(t,{emit:e}){const n=e;function s(){n("update:open",!1)}return(r,i)=>t.open?(P(),D("div",{key:0,class:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50 p-4 dark:bg-gray-900/40 m-auto text-gray-900 dark:text-white",onClick:Mn(s,["self"])},[re(ko,{name:"custom-classes",appear:"","enter-active-class":"animate__animated animate__zoomIn animate__faster","leave-active-class":"animate__animated animate__bounceOutRight animate__faster"},{default:pe(()=>[Ie(p("div",BU,[Tp(r.$slots,"default",{},void 0,!0)],512),[[pA,t.open]])]),_:3})])):J("",!0)}},Gs=Gt(jU,[["__scopeId","data-v-ec6dc83f"]]),zU={class:"text-gray-900 dark:text-white relative p-4"},HU={class:"md:text-2xl font-bold mb-4 border-b border-gray-300 dark:border-gray-900 pb-2"},qU={class:"text-orange-500 italic font-normal"},WU={class:"grid grid-cols-1 md:grid-cols-2 gap-2 md:gap-4 text-gray-700 dark:text-gray-300 text-md"},KU={class:"col-span-full mt-4"},GU={key:0},YU={key:0},QU={key:1},XU={class:"col-span-full mt-4"},JU=["value"],ZU={key:0},e9={class:"text-sm space-y-1"},t9={class:"font-semibold"},n9={key:0,class:"text-xs text-gray-600 dark:text-gray-400"},s9={class:"mt-6 flex justify-end space-x-4 border-t border-gray-300 dark:border-gray-900 pt-4"},r9=["disabled"],i9={__name:"OrderDetailsModal",props:{open:{type:Boolean,required:!0},order:{type:Object,default:null},statusOptions:{type:Array,default:()=>[]},isUpdatingStatus:{type:Boolean,default:!1}},emits:["update:open","update-status","close"],setup(t,{emit:e}){const n=t,s=j("");return kt(()=>{var r;return(r=n.order)==null?void 0:r.status},r=>{r&&(s.value=r)},{immediate:!0}),(r,i)=>(P(),Ye(Gs,{open:t.open,"onUpdate:open":i[4]||(i[4]=o=>r.$emit("update:open",o))},{default:pe(()=>{var o,a,l,c,u,h,f,g,v,y,_,w,I,O,L,M,$,T,b,E,A,k;return[p("div",zU,[p("button",{onClick:i[0]||(i[0]=S=>r.$emit("close")),class:"absolute -top-3 -right-3 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white text-xl"},"  "),p("h3",HU,[i[5]||(i[5]=ee(" Detalhes do Pedido ")),p("span",qU,"#"+B((o=t.order)==null?void 0:o.id),1)]),p("div",WU,[p("div",null,[i[6]||(i[6]=p("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Cliente:",-1)),ee(" "+B((a=t.order)==null?void 0:a.client),1)]),p("div",null,[i[7]||(i[7]=p("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Telefone:",-1)),ee(" "+B(((l=t.order)==null?void 0:l.telefone)||((c=t.order)==null?void 0:c.phone)),1)]),p("div",null,[i[8]||(i[8]=p("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Total:",-1)),ee(" "+B(te(Tn)((u=t.order)==null?void 0:u.total)),1)]),p("div",null,[i[9]||(i[9]=p("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Subtotal:",-1)),ee(" "+B(te(Tn)((h=t.order)==null?void 0:h.subtotal)),1)]),p("div",null,[i[10]||(i[10]=p("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Taxa de Entrega:",-1)),ee(" "+B(te(Tn)(((f=t.order)==null?void 0:f.taxaEntrega)||((g=t.order)==null?void 0:g.fee))),1)]),p("div",null,[i[11]||(i[11]=p("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Tipo de Entrega:",-1)),ee(" "+B(((v=t.order)==null?void 0:v.tipoEntrega)||((y=t.order)==null?void 0:y.delivery_type)),1)]),p("div",null,[i[12]||(i[12]=p("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Mtodo de Pagamento:",-1)),ee(" "+B(te(Na)(((_=t.order)==null?void 0:_.metodoPagamento)||((w=t.order)==null?void 0:w.payment_method))),1)]),p("div",null,[i[13]||(i[13]=p("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Status do Pagamento:",-1)),ee(" "+B(te(GT)((I=t.order)==null?void 0:I.payment_status)),1)]),p("div",null,[i[14]||(i[14]=p("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Data do Pedido:",-1)),ee(" "+B(te(jg)((O=t.order)==null?void 0:O.created_at)),1)]),p("div",null,[i[15]||(i[15]=p("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Entregador:",-1)),ee(" "+B(((L=t.order)==null?void 0:L.assigned_delivery_man_name)||((M=t.order)!=null&&M.assigned_delivery_man_id?(($=t.order)==null?void 0:$.assigned_delivery_man_id.substring(0,8))+"...":"No atribudo")),1)]),p("div",null,[i[16]||(i[16]=p("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Status Entrega:",-1)),p("span",{class:ce(te(dr)((T=t.order)==null?void 0:T.delivery_status))},B(te(Ti)(((b=t.order)==null?void 0:b.delivery_status)||"pendente")),3)])]),p("div",KU,[i[17]||(i[17]=p("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Endereo:",-1)),(E=t.order)!=null&&E.address&&t.order.address.length>0?(P(),D("div",GU,[(P(!0),D(ve,null,Me(t.order.address,(S,R)=>(P(),D("p",{key:R},[ee(B(S.street)+", "+B(S.neighborhood)+" ",1),S.reference?(P(),D("span",YU," (Ref: "+B(S.reference)+")",1)):J("",!0)]))),128))])):(P(),D("div",QU,"Nenhum endereo fornecido."))]),p("div",XU,[i[18]||(i[18]=p("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Status do Pedido:",-1)),Ie(p("select",{"onUpdate:modelValue":i[1]||(i[1]=S=>s.value=S),class:"p-2 bg-gray-200 dark:bg-gray-700 border border-gray-400 dark:border-gray-600 rounded-md text-gray-800 dark:text-white focus:ring-blue-500 focus:border-blue-500 ml-2 mt-2"},[(P(!0),D(ve,null,Me(t.statusOptions,S=>(P(),D("option",{key:S,value:S},B(te(Ti)(S)),9,JU))),128))],512),[[us,s.value]])]),(A=t.order)!=null&&A.itens&&t.order.itens.length?(P(),D("div",ZU,[i[20]||(i[20]=p("h4",{class:"font-semibold mt-6 mb-2 text-gray-700 dark:text-gray-300 border-t border-gray-300 dark:border-gray-900 pt-4"}," Itens do Pedido: ",-1)),p("ul",e9,[(P(!0),D(ve,null,Me(t.order.itens,(S,R)=>{var me,Ee;return P(),D("li",{key:R,class:"text-gray-700 dark:text-gray-300"},[p("p",t9,B((me=S.item)==null?void 0:me.replaceAll("r$","R$")),1),S.adicionais?(P(),D("p",n9,[i[19]||(i[19]=p("span",{class:"italic"},"Adicionais:",-1)),ee(" "+B((Ee=S.adicionais)==null?void 0:Ee.replaceAll("r$","R$")),1)])):J("",!0)])}),128))])])):J("",!0),p("div",s9,[p("button",{onClick:i[2]||(i[2]=S=>{var R;return r.$emit("update-status",(R=t.order)==null?void 0:R.id,s.value)}),disabled:t.isUpdatingStatus||!((k=t.order)!=null&&k.id)||!s.value,class:"px-5 py-1 bg-green-600 hover:bg-green-700 disabled:bg-green-400 disabled:cursor-not-allowed text-white text-md rounded-md transition-colors duration-200"},B(t.isUpdatingStatus?"Salvando...":"Salvar"),9,r9),p("button",{onClick:i[3]||(i[3]=S=>r.$emit("close")),class:"px-5 py-1 bg-red-600 hover:bg-red-800 text-white text-md rounded-md transition-colors duration-200"}," Cancelar ")])])]}),_:1},8,["open"]))}},o9={class:"bg-white rounded-lg shadow-xl w-full max-w-md p-6"},a9={class:"text-2xl font-bold text-gray-800 mb-4"},l9={key:0},c9=["value"],u9={key:1,class:"text-red-600 text-center py-4"},d9={class:"flex justify-end mt-6 space-x-3"},h9=["disabled"],f9={key:2,class:"text-red-500 text-sm mt-4"},p9={__name:"AssignDeliveryModal",props:{open:{type:Boolean,required:!0},order:{type:Object,default:null},availableDeliveryMen:{type:Array,default:()=>[]},assignLoading:{type:Boolean,default:!1},assignError:{type:String,default:null}},emits:["update:open","assign-confirmed","close"],setup(t,{emit:e}){const n=t,s=j("");return kt(()=>n.open,r=>{r&&(s.value="")}),(r,i)=>(P(),Ye(Gs,{open:t.open,"onUpdate:open":i[3]||(i[3]=o=>r.$emit("update:open",o))},{default:pe(()=>{var o;return[p("div",o9,[p("h2",a9,"Atribuir Entregador ao Pedido "+B((o=t.order)==null?void 0:o.id),1),t.availableDeliveryMen.length?(P(),D("div",l9,[i[5]||(i[5]=p("label",{for:"deliveryManSelect",class:"block text-gray-700 text-sm font-bold mb-2"}," Selecione um Entregador Disponvel: ",-1)),Ie(p("select",{id:"deliveryManSelect","onUpdate:modelValue":i[0]||(i[0]=a=>s.value=a),class:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"},[i[4]||(i[4]=p("option",{value:""},"-- Selecione --",-1)),(P(!0),D(ve,null,Me(t.availableDeliveryMen,a=>(P(),D("option",{key:a.id,value:a.id},B(a.name)+" ("+B(a.vehicle_type?te(Ti)(a.vehicle_type):"N/A")+") ",9,c9))),128))],512),[[us,s.value]])])):(P(),D("div",u9," Nenhum entregador disponvel no momento. ")),p("div",d9,[p("button",{onClick:i[1]||(i[1]=a=>r.$emit("close")),class:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-full transition duration-300 ease-in-out"}," Cancelar "),p("button",{onClick:i[2]||(i[2]=a=>r.$emit("assign-confirmed",t.order.id,s.value)),disabled:!s.value||t.assignLoading,class:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300 ease-in-out focus:outline-none focus:shadow-outline disabled:opacity-50 disabled:cursor-not-allowed"},B(t.assignLoading?"Atribuindo...":"Atribuir Pedido"),9,h9)]),t.assignError?(P(),D("div",f9,B(t.assignError),1)):J("",!0)])]}),_:1},8,["open"]))}},g9={class:"bg-white rounded-lg shadow-xl w-full max-w-sm p-6 text-center"},m9={class:"text-gray-700 mb-6"},y9={class:"font-semibold"},v9={class:"flex justify-center space-x-3"},_9=["disabled"],b9={key:0,class:"text-red-500 text-sm mt-4"},x9={__name:"CompleteDeliveryModal",props:{open:{type:Boolean,required:!0},order:{type:Object,default:null},completeLoading:{type:Boolean,default:!1},completeError:{type:String,default:null}},emits:["update:open","complete-confirmed","close"],setup(t,{emit:e}){return(n,s)=>(P(),Ye(Gs,{open:t.open,"onUpdate:open":s[2]||(s[2]=r=>n.$emit("update:open",r))},{default:pe(()=>{var r;return[p("div",g9,[s[5]||(s[5]=p("h2",{class:"text-2xl font-bold text-gray-800 mb-4"},"Confirmar Entrega",-1)),p("p",m9,[s[3]||(s[3]=ee("Tem certeza que deseja marcar o pedido ")),p("span",y9,B((r=t.order)==null?void 0:r.id),1),s[4]||(s[4]=ee(" como entregue?"))]),p("div",v9,[p("button",{onClick:s[0]||(s[0]=i=>n.$emit("close")),class:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-full transition duration-300 ease-in-out"}," Cancelar "),p("button",{onClick:s[1]||(s[1]=i=>{var o,a;return n.$emit("complete-confirmed",(o=t.order)==null?void 0:o.assigned_delivery_man_id,(a=t.order)==null?void 0:a.id)}),disabled:t.completeLoading,class:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-full transition duration-300 ease-in-out focus:outline-none focus:shadow-outline disabled:opacity-50 disabled:cursor-not-allowed"},B(t.completeLoading?"Finalizando...":"Confirmar Entrega"),9,_9)]),t.completeError?(P(),D("div",b9,B(t.completeError),1)):J("",!0)])]}),_:1},8,["open"]))}},w9={class:"space-y-4 p-4 bg-white dark:bg-gray-800 rounded-lg shadow-xl"},E9={class:"flex items-center justify-between"},T9={class:"text-2xl font-bold text-gray-700 dark:text-white"},k9={class:"inline-flex items-center ml-2"},I9={class:"text-right"},S9={class:"text-sm text-gray-600 dark:text-gray-400"},A9={class:"font-semibold"},C9={class:"text-xs text-gray-500 dark:text-gray-500"},P9={key:0,class:"text-center py-8"},R9={key:1,class:"text-center py-8"},O9={key:2,class:"flex flex-col lg:flex-row gap-4"},D9={class:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-4 gap-x-4 flex-grow"},M9={class:"bg-green-700/10 rounded-lg"},N9={class:"p-2 text-white mb-4 border-b border-green-900/30 rounded-t-md bg-green-700 bg-linear from-green-800 via-green-700 to-green-500"},L9={class:"ml-2 px-2 py-1 text-xs rounded-full bg-green-200 text-green-800 dark:bg-green-800 dark:text-green-200"},V9={class:"space-y-4 max-h-[calc(100vh-250px)] overflow-y-auto pr-2"},$9={key:0,class:"text-center text-gray-500 dark:text-gray-400 py-4"},F9={class:"bg-sky-700/10 rounded-lg"},U9={class:"text-white rounded-t-md mb-4 border-b p-2 border-gray-300 dark:border-gray-700 bg-sky-700 bg-linear from-sky-800 via-sky-700 to-sky-500"},B9={class:"ml-2 px-2 py-1 text-xs rounded-full bg-blue-200 text-blue-800 dark:bg-blue-800 dark:text-blue-200"},j9={class:"space-y-4 max-h-[calc(100vh-250px)] overflow-y-auto pr-2"},z9={key:0,class:"text-center text-gray-500 dark:text-gray-400 py-4"},H9={class:"bg-purple-700/10 rounded-lg"},q9={class:"bg-purple-700 bg-linear from-purple-800 via-purple-700 to-purple-500 p-2 mb-4 rounded-t-md text-white"},W9={class:"ml-2 px-2 py-1 text-xs font-semibold rounded-full bg-purple-200 text-purple-800 dark:bg-purple-800 dark:text-purple-200"},K9={class:"space-y-4 max-h-[calc(100vh-250px)] overflow-y-auto pr-2"},G9={key:0,class:"text-center text-gray-500 dark:text-gray-400 py-4"},Y9={class:"lg:w-52 bg-gray-200 dark:bg-gray-900 p-4 rounded-lg flex-shrink-0"},Q9={class:"space-y-2"},X9={key:3,class:"mt-8"},J9={class:"text-xl font-bold text-gray-900 dark:text-white mb-4 border-b pb-2 border-gray-300 dark:border-gray-700"},Z9={class:"ml-2 px-2 py-1 text-xs font-semibold rounded-full bg-gray-200 text-gray-800 dark:bg-gray-900 inset-shadow-red-500 shaodw-md dark:text-gray-200"},eB={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},tB={key:4,class:"mt-8 text-center text-gray-500 dark:text-gray-400 py-4"},nB={key:5,class:"bg-red-100 dark:bg-red-900/20 border border-red-300 dark:border-red-700 text-red-700 dark:text-red-400 px-4 py-3 rounded relative"},sB={class:"block sm:inline"},rB={__name:"Orders",setup(t){const e=j([]),n=j(null),s=j(!1),r=j(!0),i=j(!1),o=j(""),a=j(""),l=j(!1),c=j(new Set),u=j([]),h=j(new Map),f=j(!1),g=j(!1),v=j(!1),y=j(null),_=j(!1),w=j(null),I=j(null),O=wT(Od);let L=null;const M=["recebido","em_preparo","a_caminho","entregue","cancelado","em processamento"],$=ye(()=>e.value.filter(ne=>["recebido","em processamento"].includes(ne.status)&&ne.payment_status!=="cancelled"&&ne.payment_status!=="pending").sort((ne,le)=>ns(le.created_at)-ns(ne.created_at))),T=ye(()=>e.value.filter(ne=>ne.status==="em_preparo").sort((ne,le)=>ns(le.created_at)-ns(ne.created_at))),b=ye(()=>e.value.filter(ne=>ne.status==="a_caminho").sort((ne,le)=>ns(le.created_at)-ns(ne.created_at))),E=ye(()=>e.value.filter(ne=>["entregue","cancelado"].includes(ne.status)).sort((ne,le)=>ns(le.created_at)-ns(ne.created_at))),A=ne=>{if(!ne||!ne.id){console.warn("Tentativa de visualizar pedido nulo ou sem ID."),o.value="Erro: Pedido sem ID vlido para visualizao.";return}n.value=JSON.parse(JSON.stringify(ne)),s.value=!0,c.value.has(ne.id)&&c.value.delete(ne.id)},k=ne=>{n.value=ne,f.value=!0},S=ne=>{n.value=ne,g.value=!0},R=()=>{n.value=null,s.value=!1,f.value=!1,g.value=!1,y.value=null,w.value=null,l.value=!1,o.value.includes("Erro ao atualizar pedido")&&(o.value="")},me=async(ne,le)=>{if(!ne||!le){console.warn("Dados incompletos para atualizar status."),o.value="Erro: ID do pedido ou novo status ausente.";return}l.value=!0,o.value="";try{const Ae=a$(O,"orders",ne);await T$(Ae,{status:le,updated_at:new Date});try{await Xe.put(`/orders/${ne}`,{status:le})}catch(Be){console.warn("Erro ao atualizar via API (Firestore foi atualizado):",Be)}he(`Status do pedido ${ne} atualizado para: ${Ti(le)}`),R()}catch(Ae){console.error("Erro ao atualizar status do pedido:",Ae),o.value=`Erro ao atualizar pedido: ${Ae.message}`}finally{l.value=!1}},Ee=async(ne,le)=>{var Ae,Be;if(!ne||!le){y.value="Por favor, selecione um pedido e um entregador.";return}v.value=!0,y.value=null;try{await Xe.post(`/delivery-men/${le}/assign-order`,{orderId:ne}),he("Pedido atribudo com sucesso!"),R()}catch(z){y.value="Falha ao atribuir pedido. "+(((Be=(Ae=z.response)==null?void 0:Ae.data)==null?void 0:Be.error)||z.message),console.error("Erro ao atribuir pedido:",z)}finally{v.value=!1}},we=async(ne,le)=>{var Ae,Be;if(!le||!ne){w.value="Nenhum pedido ou entregador selecionado para finalizar.";return}_.value=!0,w.value=null;try{await Xe.post(`/delivery-men/${ne}/complete-delivery`,{orderId:le}),he("Entrega finalizada com sucesso!"),R()}catch(z){w.value="Falha ao finalizar entrega. "+(((Be=(Ae=z.response)==null?void 0:Ae.data)==null?void 0:Be.error)||z.message),console.error("Erro ao finalizar entrega:",z)}finally{_.value=!1}},he=ne=>{I.value=ne,setTimeout(()=>{I.value=null},3e3)},Pe=async()=>{try{const ne=await Xe.get("/delivery-men");h.value.clear(),ne.data.forEach(le=>{h.value.set(le.id,le.name)})}catch(ne){console.error("Erro ao buscar todos os entregadores para o mapa:",ne)}},Qe=async()=>{try{const ne=await Xe.get("/delivery-men?available=true");u.value=ne.data}catch(ne){console.error("Erro ao buscar entregadores disponveis:",ne)}};function xt(){try{const ne=_$(o$(O,"orders"),b$("created_at","desc"));L=k$(ne,async le=>{const Ae=new Set(e.value.map(z=>z.id)),Be=[];for(const z of le.docChanges()){let X={id:z.doc.id,...z.doc.data()};if(X.assigned_delivery_man_id&&!X.assigned_delivery_man_name&&(X.assigned_delivery_man_name=h.value.get(X.assigned_delivery_man_id)||"Carregando...",X.assigned_delivery_man_name==="Carregando..."))try{const se=await Xe.get(`/delivery-men/${X.assigned_delivery_man_id}`);h.value.set(X.assigned_delivery_man_id,se.data.name),X.assigned_delivery_man_name=se.data.name}catch(se){console.error(`Falha ao buscar nome do entregador ${X.assigned_delivery_man_id}:`,se),X.assigned_delivery_man_name="Entregador desconhecido"}if(z.type==="added"){const se=["recebido","em processamento"].includes(X.status)&&X.payment_status!=="cancelled"&&X.payment_status!=="pending";if(!Ae.has(X.id))se&&(c.value.add(X.id),"Notification"in window&&Notification.permission==="granted"&&new Notification("Novo Pedido!",{body:`Pedido #${X.id} de ${X.client}`,icon:"/assets/image/old_nonna.png"})),Be.unshift(X);else{const fe=e.value.findIndex(We=>We.id===X.id);fe!==-1&&(e.value[fe]=X)}}else if(z.type==="modified"){const se=e.value.findIndex(fe=>fe.id===X.id);se!==-1&&(e.value[se]=X,["recebido","em processamento"].includes(X.status)&&X.payment_status!=="cancelled"&&X.payment_status!=="pending"?c.value.add(X.id):c.value.delete(X.id))}else if(z.type==="removed"){const se=e.value.findIndex(fe=>fe.id===X.id);se!==-1&&e.value.splice(se,1),c.value.delete(X.id)}}Be.length>0&&(e.value=[...Be,...e.value.filter(z=>!Be.some(X=>X.id===z.id))],e.value.sort((z,X)=>ns(X.created_at)-ns(z.created_at))),i.value=!0,o.value="",a.value=new Date().toLocaleTimeString(),r.value=!1,await Qe()},le=>{console.error("Erro no listener Firestore:",le),o.value=`Erro de conexo: ${le.message}`,i.value=!1,r.value=!1,setTimeout(()=>{i.value||At()},5e3)})}catch(ne){console.error("Erro ao configurar listener:",ne),o.value=`Erro ao conectar: ${ne.message}`,r.value=!1}}function At(){console.log("Tentando reconectar..."),o.value="",r.value=!0,L&&L(),xt()}async function Ze(){try{const ne=await Xe.get("/orders");e.value=Array.isArray(ne.data)?ne.data:[],console.log("Pedidos carregados via API como fallback"),e.value=await Promise.all(e.value.map(async le=>{if(le.assigned_delivery_man_id){let Ae=h.value.get(le.assigned_delivery_man_id);if(!Ae)try{Ae=(await Xe.get(`/delivery-men/${le.assigned_delivery_man_id}`)).data.name,h.value.set(le.assigned_delivery_man_id,Ae)}catch(Be){console.error(`Erro ao buscar nome do entregador ${le.assigned_delivery_man_id} no fallback API:`,Be),Ae="Entregador desconhecido"}le.assigned_delivery_man_name=Ae}return le}))}catch(ne){console.error("Erro ao carregar pedidos via API:",ne)}}return mt(async()=>{console.log("Iniciando conexo em tempo real com Firestore..."),"Notification"in window&&Notification.permission==="default"&&await Notification.requestPermission(),await Pe(),await Qe(),xt(),setTimeout(()=>{!i.value&&e.value.length===0&&(console.warn("Firestore no conectou, usando API como fallback"),Ze(),r.value=!1)},1e4)}),Si(()=>{L&&(L(),console.log("Listener Firestore removido"))}),(ne,le)=>(P(),D("div",null,[re(Mi,null,{default:pe(()=>[p("div",w9,[p("div",E9,[p("div",null,[p("h2",T9,[le[3]||(le[3]=ee(" Pedidos ")),p("span",k9,[p("div",{class:ce([i.value?"w-2 h-2 bg-green-500 rounded-full animate-pulse":"w-2 h-2 bg-red-500 rounded-full"])},null,2),p("span",{class:ce([i.value?"text-xs text-green-600 dark:text-green-400 ml-1":"text-xs text-red-600 dark:text-red-400 ml-1"])},B(i.value?"Tempo real":"Desconectado"),3)])]),le[4]||(le[4]=p("p",{class:"text-gray-600 dark:text-gray-400 text-xs font-normal italic"}," Gerencie todos os pedidos recebidos em tempo real. ",-1))]),p("div",I9,[p("p",S9,[le[5]||(le[5]=ee(" Total de pedidos: ")),p("span",A9,B(e.value.length),1)]),p("p",C9," ltima atualizao: "+B(a.value),1)])]),r.value?(P(),D("div",P9,le[6]||(le[6]=[p("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-400 dark:border-gray-600 mx-auto"},null,-1),p("p",{class:"text-gray-600 dark:text-gray-400 mt-4"},"Carregando pedidos...",-1)]))):e.value.length===0?(P(),D("div",R9,le[7]||(le[7]=[p("p",{class:"text-gray-600 dark:text-gray-400 text-lg"},"Nenhum pedido encontrado.",-1)]))):(P(),D("div",O9,[p("div",D9,[p("div",M9,[p("h3",N9,[le[8]||(le[8]=p("span",null,"Novos pedidos",-1)),p("span",L9,B($.value.length),1)]),p("div",V9,[(P(!0),D(ve,null,Me($.value,Ae=>(P(),Ye(uc,{key:Ae.id,order:Ae,newOrderIds:c.value,onViewOrder:A,onAssignOrder:k,onCompleteDelivery:S},null,8,["order","newOrderIds"]))),128)),$.value.length===0?(P(),D("p",$9,"Nenhum pedido novo.")):J("",!0)])]),p("div",F9,[p("h3",U9,[le[9]||(le[9]=ee(" Em preparo ")),p("span",B9,B(T.value.length),1)]),p("div",j9,[(P(!0),D(ve,null,Me(T.value,Ae=>(P(),Ye(uc,{key:Ae.id,order:Ae,newOrderIds:c.value,onViewOrder:A,onAssignOrder:k,onCompleteDelivery:S},null,8,["order","newOrderIds"]))),128)),T.value.length===0?(P(),D("p",z9,"Nenhum pedido em preparo.")):J("",!0)])]),p("div",H9,[p("h3",q9,[le[10]||(le[10]=ee(" A caminho ")),p("span",W9,B(b.value.length),1)]),p("div",K9,[(P(!0),D(ve,null,Me(b.value,Ae=>(P(),Ye(uc,{key:Ae.id,order:Ae,newOrderIds:c.value,onViewOrder:A,onAssignOrder:k,onCompleteDelivery:S},null,8,["order","newOrderIds"]))),128)),b.value.length===0?(P(),D("p",G9,"Nenhum pedido a caminho.")):J("",!0)])])]),p("div",Y9,[le[11]||(le[11]=p("h3",{class:"text-lg font-bold text-gray-900 dark:text-white mb-4 border-b pb-2 border-gray-300 dark:border-gray-700"}," Legenda",-1)),p("ul",Q9,[p("li",null,[p("span",{class:ce(te(dr)("recebido"))},"Recebido",2)]),p("li",null,[p("span",{class:ce(te(dr)("em processamento"))},"Em Processamento",2)]),p("li",null,[p("span",{class:ce(te(dr)("em_preparo"))},"Em Preparo",2)]),p("li",null,[p("span",{class:ce(te(dr)("a_caminho"))},"A Caminho",2)]),p("li",null,[p("span",{class:ce(te(dr)("entregue"))},"Entregue",2)]),p("li",null,[p("span",{class:ce(te(dr)("cancelado"))},"Cancelado",2)])])])])),E.value.length>0?(P(),D("div",X9,[p("h3",J9,[le[12]||(le[12]=ee(" Pedidos finalizados ")),p("span",Z9,B(E.value.length),1)]),p("div",eB,[(P(!0),D(ve,null,Me(E.value,Ae=>(P(),Ye(uc,{key:Ae.id,order:Ae,newOrderIds:c.value,onViewOrder:A,onAssignOrder:k,onCompleteDelivery:S},null,8,["order","newOrderIds"]))),128))])])):!r.value&&e.value.length>0?(P(),D("div",tB," Nenhum pedido finalizado. ")):J("",!0),o.value?(P(),D("div",nB,[le[13]||(le[13]=p("strong",{class:"font-bold"},"Erro de conexo!",-1)),p("span",sB,B(o.value),1),p("button",{onClick:At,class:"ml-2 underline hover:no-underline"}," Tentar reconectar ")])):J("",!0)])]),_:1}),re(i9,{open:s.value,order:n.value,statusOptions:M,isUpdatingStatus:l.value,"onUpdate:open":le[0]||(le[0]=Ae=>s.value=Ae),onUpdateStatus:me,onClose:R},null,8,["open","order","isUpdatingStatus"]),re(p9,{open:f.value,order:n.value,availableDeliveryMen:u.value,assignLoading:v.value,assignError:y.value,"onUpdate:open":le[1]||(le[1]=Ae=>f.value=Ae),onAssignConfirmed:Ee,onClose:R},null,8,["open","order","availableDeliveryMen","assignLoading","assignError"]),re(x9,{open:g.value,order:n.value,completeLoading:_.value,completeError:w.value,"onUpdate:open":le[2]||(le[2]=Ae=>g.value=Ae),onCompleteConfirmed:we,onClose:R},null,8,["open","order","completeLoading","completeError"]),I.value?(P(),D("div",{key:0,class:ce(["fixed bottom-4 right-4 bg-green-500 text-white px-6 py-3 rounded-full shadow-lg transition-all duration-300 ease-in-out transform",{"translate-x-0 opacity-100":I.value,"translate-x-full opacity-0":!I.value}])},B(I.value),3)):J("",!0)]))}},iB=["onClick"],oB=["onKeydown"],aB={key:0,class:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md shadow-lg max-h-60 overflow-y-auto custom-scrollbar"},lB={class:"py-1"},cB=["onClick","onMouseenter"],uB={key:0,class:"px-4 py-2 text-gray-500 dark:text-gray-400 italic"},dB={__name:"MultiSelectCategoryInput",props:{modelValue:{type:Array,default:()=>[]},categories:{type:Array,required:!0}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,s=e,r=j(""),i=j(!1),o=j(-1),a=j(null),l=ye(()=>n.categories.filter(M=>n.modelValue.includes(M.id)));ye(()=>l.value.map(M=>M.name).join(" x "));const c=ye(()=>{const M=r.value.toLowerCase();return n.categories.filter($=>$.name.toLowerCase().includes(M)&&!u($.id))});function u(M){return n.modelValue.includes(M)}function h(){i.value=!i.value,i.value&&(r.value="",o.value=-1)}function f(){i.value=!0,o.value=-1}function g(){i.value=!1,r.value=""}function v(){o.value=-1,i.value=!0}function y(M){if(!u(M)){const $=[...n.modelValue,M];s("update:modelValue",$)}r.value=""}function _(M){const $=n.modelValue.filter(T=>T!==M);s("update:modelValue",$),f()}function w(){if(c.value.length===0){o.value=-1;return}o.value=(o.value+1)%c.value.length}function I(){if(c.value.length===0){o.value=-1;return}o.value=(o.value-1+c.value.length)%c.value.length}function O(){o.value!==-1&&c.value[o.value]&&y(c.value[o.value].id)}function L(M){a.value&&!a.value.contains(M.target)&&g()}return mt(()=>{document.addEventListener("click",L)}),Si(()=>{document.removeEventListener("click",L)}),(M,$)=>(P(),D("div",{class:"relative",ref_key:"multiSelectContainer",ref:a},[p("div",{class:"w-full p-3 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md flex items-center flex-wrap gap-2 cursor-pointer min-h-[48px]",onClick:Mn(h,["stop"])},[$[1]||($[1]=p("span",{class:"text-gray-500 dark:text-gray-400"}," Selecione categorias... ",-1)),(P(!0),D(ve,null,Me(l.value,T=>(P(),D("div",{key:T.id,class:"flex items-center bg-blue-500 text-white text-xs px-2 py-1 rounded-full"},[ee(B(T.name)+" ",1),p("button",{onClick:Mn(b=>_(T.id),["stop"]),class:"ml-1 text-white hover:text-blue-100 focus:outline-none"},"  ",8,iB)]))),128)),Ie(p("input",{type:"text","onUpdate:modelValue":$[0]||($[0]=T=>r.value=T),onInput:v,onFocus:f,onKeydown:[gh(Mn(w,["prevent"]),["down"]),gh(Mn(I,["prevent"]),["up"]),gh(Mn(O,["prevent"]),["enter"])],placeholder:"Buscar categorias...",class:"flex-grow p-0 bg-transparent border-none focus:outline-none text-gray-900 dark:text-white",style:wo({width:r.value.length?r.value.length*8+20+"px":"150px"})},null,44,oB),[[st,r.value]])]),i.value?(P(),D("div",aB,[p("ul",lB,[(P(!0),D(ve,null,Me(c.value,(T,b)=>(P(),D("li",{key:T.id,onClick:E=>y(T.id),onMouseenter:E=>o.value=b,class:ce({"px-4 py-2 cursor-pointer hover:bg-blue-500 hover:text-white":!0,"bg-blue-500 text-white":o.value===b,"text-gray-900 dark:text-white":o.value!==b,"opacity-50 cursor-not-allowed":u(T.id)})},B(T.name),43,cB))),128)),c.value.length===0?(P(),D("li",uB," Nenhuma categoria encontrada. ")):J("",!0)])])):J("",!0)],512))}},hB=Gt(dB,[["__scopeId","data-v-a5c6d68f"]]),fB={class:"space-y-6 p-4 md:p-8 bg-white dark:bg-gray-900 rounded-lg shadow-xl"},pB={key:0,class:"text-center py-8"},gB={key:1,class:"text-center py-8"},mB={key:2,class:"overflow-x-auto mt-4 rounded-lg"},yB={class:"min-w-full table-auto bg-gray-100 dark:bg-gray-800"},vB={class:"text-gray-800 dark:text-gray-200 text-sm font-light"},_B={class:"py-2 px-2 text-left whitespace-nowrap hidden md:table-cell"},bB=["src","alt"],xB={class:"py-3 text-left whitespace-nowrap"},wB={key:0,class:"text-xs text-gray-600 dark:text-gray-400 mt-1"},EB={class:"py-3 text-left whitespace-pre-line"},TB={key:0},kB={key:0},IB={key:1},SB={key:1,class:"text-red-600 dark:text-red-400"},AB={class:"py-3 text-left"},CB={class:"py-3 text-right"},PB=["onClick"],RB=["onClick"],OB={class:"flex flex-col md:flex-row justify-between items-center mt-6 text-gray-900 dark:text-white p-4 bg-gray-100 dark:bg-gray-800 rounded-lg"},DB={class:"mb-4 md:mb-0"},MB={class:"flex items-center gap-2"},NB={class:"relative"},LB=["disabled"],VB={class:"px-2"},$B=["disabled"],FB={class:""},UB={class:"text-2xl font-bold mb-4 border-b border-gray-300 dark:border-gray-700 pb-2"},BB={key:0,class:"text-center py-4"},jB={key:1,class:"space-y-4"},zB={class:"border border-gray-300 dark:border-gray-700 p-3 rounded-md"},HB=["onUpdate:modelValue"],qB=["onUpdate:modelValue"],WB=["onClick"],KB=["onUpdate:modelValue"],GB=["onUpdate:modelValue"],YB=["onClick"],QB={class:"flex justify-end mt-6 gap-3 border-t border-gray-300 dark:border-gray-700 pt-4"},XB=["disabled"],JB=["disabled"],ZB={class:"text-lg mb-4"},e8={class:"text-red-600 dark:text-red-400"},t8={class:"mt-6 flex justify-end gap-3"},n8=["disabled"],s8=["disabled"],r8={__name:"Products",setup(t){const e=j([]),n=j([]),s=j(!1),r=j(!1),i=j(null),o=j(1),a=j(10),l=j(0),c=j(!0),u=j(!1),h=ye(()=>{const A=(o.value-1)*a.value;return Array.isArray(e.value)?e.value.slice(A,A+a.value):[]}),f=ye(()=>Math.ceil(l.value/a.value)),g=j({id:null,name:"",slug:"",description:"",img:"",sizes:[],price:[],extras:[],categoryIds:[]});function v(){g.value={id:null,name:"",slug:"",description:"",img:"",sizes:[],price:[],extras:[],categoryIds:[]}}kt(()=>g.value.name,A=>{g.value.slug=A.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")});function y(A=null){if(v(),A){const k=JSON.parse(JSON.stringify(A));for(g.value.id=k.id,g.value.name=k.name,g.value.slug=k.slug,g.value.description=k.description,g.value.img=k.img,g.value.extras=k.extras||[],g.value.categoryIds=k.categoryIds||[],g.value.price=Array.isArray(k.price)?k.price:[],g.value.sizes=Array.isArray(k.sizes)?k.sizes:[];g.value.sizes.length<g.value.price.length;)g.value.sizes.push("")}s.value=!0}function _(){g.value.sizes.push(""),g.value.price.push(0)}function w(A){g.value.sizes.splice(A,1),g.value.price.splice(A,1)}function I(){g.value.extras.push({name:"",price:0})}function O(A){g.value.extras.splice(A,1)}async function L(){var A;u.value=!0;try{const k={...g.value};k.price=k.price.map(S=>Number(S)).filter(S=>!isNaN(S)),k.extras=k.extras.map(S=>({...S,price:Number(S.price)})).filter(S=>S.name&&!isNaN(S.price)),k.sizes.length!==k.price.length?(k.sizes=[],console.warn("Nmero de tamanhos no corresponde ao nmero de preos. Enviando tamanhos vazios.")):k.sizes=k.sizes.filter((S,R)=>k.price[R]!==void 0),k.price.length===0&&(k.sizes=[]),k.id?(await Xe.put(`/products/${k.id}`,k),console.log(`Produto ${k.name} (ID: ${k.id}) atualizado com sucesso.`)):(await Xe.post("/products",k),console.log(`Novo produto '${k.name}' criado com sucesso.`)),s.value=!1,await b()}catch(k){console.error("Erro ao salvar produto:",((A=k.response)==null?void 0:A.data)||k.message)}finally{u.value=!1}}function M(A){i.value=A,r.value=!0}async function $(){var A;u.value=!0;try{i.value&&i.value.id&&(await Xe.delete(`/products/${i.value.id}`),console.log(`Produto '${i.value.name}' (ID: ${i.value.id}) excludo com sucesso.`),r.value=!1,i.value=null,await b())}catch(k){console.error("Erro ao excluir produto:",((A=k.response)==null?void 0:A.data)||k.message)}finally{u.value=!1}}function T(A){return!A||!Array.isArray(A)||n.value.length===0?"":A.map(k=>{var S;return(S=n.value.find(R=>R.id===k))==null?void 0:S.name}).filter(Boolean).join(", ")}async function b(){var A;c.value=!0;try{console.log("Tentando carregar produtos...");const k=await Xe.get("/products");console.log("Produtos recebidos da API:",k.data),e.value=Array.isArray(k.data)?k.data:[],l.value=e.value.length,f.value>0&&o.value>f.value?o.value=f.value:f.value===0&&(o.value=1),console.log(`Produtos carregados. Total: ${l.value}, Pgina: ${o.value}/${f.value}`)}catch(k){console.error("Erro ao carregar produtos:",((A=k.response)==null?void 0:A.data)||k.message)}finally{c.value=!1}}async function E(){var A;try{console.log("Tentando carregar categorias...");const k=await Xe.get("/categories");n.value=Array.isArray(k.data)?k.data:[],console.log("Categorias recebidas da API:",n.value.length)}catch(k){console.error("Erro ao carregar categorias:",((A=k.response)==null?void 0:A.data)||k.message)}}return kt(a,()=>{o.value=1}),mt(()=>{b(),E()}),(A,k)=>(P(),D("div",null,[re(Mi,null,{default:pe(()=>[p("div",fB,[k[26]||(k[26]=p("h2",{class:"text-3xl font-bold text-gray-900 dark:text-white"},"Produtos",-1)),k[27]||(k[27]=p("p",{class:"text-gray-600 dark:text-gray-400"},"Adicione, edite ou remova produtos do cardpio.",-1)),p("button",{onClick:k[0]||(k[0]=S=>y()),class:"px-5 py-2 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-md transition-colors duration-200"}," Novo Produto "),c.value?(P(),D("div",pB,k[17]||(k[17]=[p("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-400 dark:border-gray-600 mx-auto"},null,-1),p("p",{class:"text-gray-600 dark:text-gray-400 mt-4"},"Carregando produtos...",-1)]))):e.value.length===0&&!c.value?(P(),D("div",gB,k[18]||(k[18]=[p("p",{class:"text-gray-600 dark:text-gray-400 text-lg"},"Nenhum produto encontrado.",-1)]))):(P(),D("div",mB,[p("table",yB,[k[22]||(k[22]=p("thead",null,[p("tr",{class:"bg-gray-400 dark:bg-gray-700"},[p("th",{class:"py-3 px-2 text-left text-gray-700 dark:text-gray-300 uppercase text-sm leading-normal hidden md:block"}," img "),p("th",{class:"py-3 text-left text-gray-700 dark:text-gray-300 uppercase text-sm leading-normal"},"Nome "),p("th",{class:"py-3 text-left text-gray-700 dark:text-gray-300 uppercase text-sm leading-normal"},"Preos "),p("th",{class:"py-3 text-left text-gray-700 dark:text-gray-300 uppercase text-sm leading-normal"}," Categorias"),p("th",{class:"py-3 text-center text-gray-700 dark:text-gray-300 uppercase text-sm leading-normal"},"Aes ")])],-1)),p("tbody",vB,[(P(!0),D(ve,null,Me(h.value,S=>(P(),D("tr",{key:S.id,class:"border-b border-gray-300 dark:border-gray-700 hover:bg-gray-300 dark:hover:bg-gray-700 cursor-default transition-colors duration-300"},[p("td",_B,[p("img",{src:S.img,alt:S.name,class:"w-12 h-12 object-cover rounded-md shadow-sm border border-gray-300 dark:border-gray-700"},null,8,bB)]),p("td",xB,[ee(B(S.name)+" ",1),S.extras&&S.extras.length>0?(P(),D("div",wB,[k[19]||(k[19]=p("p",{class:"font-semibold"},"Adicionais:",-1)),(P(!0),D(ve,null,Me(S.extras,(R,me)=>(P(),D("div",{key:me},B(R.name)+" - "+B(A.$formatPrice(R.price)),1))),128))])):J("",!0)]),p("td",EB,[S.price&&Array.isArray(S.price)&&S.price.length>0?(P(),D("div",TB,[S.sizes&&Array.isArray(S.sizes)&&S.price.length===S.sizes.length?(P(),D("div",kB,[(P(!0),D(ve,null,Me(S.price,(R,me)=>(P(),D("div",{key:me},B(S.sizes[me])+" - "+B(A.$formatPrice(R)),1))),128))])):(P(),D("div",IB,[(P(!0),D(ve,null,Me(S.price,(R,me)=>(P(),D("div",{key:me},B(A.$formatPrice(R)),1))),128))]))])):(P(),D("div",SB,"Dados de preo ausentes ou invlidos."))]),p("td",AB,B(T(S.categoryIds)),1),p("td",CB,[p("button",{onClick:R=>y(S),title:"Editar Produto",class:"px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-l-md transition-colors duration-200"},k[20]||(k[20]=[p("i",{class:"fa-duotone fa-edit"},null,-1)]),8,PB),p("button",{onClick:R=>M(S),title:"Excluir Produto",class:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-r-md transition-colors duration-200"},k[21]||(k[21]=[p("i",{class:"fa-duotone fa-trash"},null,-1)]),8,RB)])]))),128))])]),p("div",OB,[p("span",DB,"Total de itens: "+B(l.value),1),p("div",MB,[k[25]||(k[25]=p("label",{for:"pageSize",class:"text-sm text-gray-700 dark:text-gray-300"},"Itens por pgina:",-1)),p("div",NB,[Ie(p("select",{id:"pageSize","onUpdate:modelValue":k[1]||(k[1]=S=>a.value=S),class:"appearance-none bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white border border-gray-400 dark:border-gray-600 rounded px-3 py-1 pr-8 focus:outline-none focus:ring-2 focus:ring-blue-500"},k[23]||(k[23]=[p("option",{value:3},"3",-1),p("option",{value:5},"5",-1),p("option",{value:10},"10",-1),p("option",{value:25},"25",-1)]),512),[[us,a.value,void 0,{number:!0}]]),k[24]||(k[24]=p("div",{class:"pointer-events-none absolute inset-y-0 right-2 flex items-center text-gray-800 dark:text-white"},"  ",-1))]),p("button",{onClick:k[2]||(k[2]=S=>o.value--),disabled:o.value===1,class:"px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"}," < Anterior ",8,LB),p("span",VB,"Pgina "+B(o.value)+" de "+B(f.value),1),p("button",{onClick:k[3]||(k[3]=S=>o.value++),disabled:o.value>=f.value,class:"px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"}," Prximo > ",8,$B)])])]))])]),_:1}),s.value?(P(),Ye(Gs,{key:0,open:s.value,"onUpdate:open":k[13]||(k[13]=S=>s.value=S)},{default:pe(()=>[p("div",FB,[p("button",{onClick:k[4]||(k[4]=S=>s.value=!1),class:"absolute top-3 right-3 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white text-xl"},"  "),p("h3",UB,B(g.value.id?"Editar":"Novo")+" Produto ",1),u.value?(P(),D("div",BB,k[28]||(k[28]=[p("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-400 dark:border-gray-600 mx-auto"},null,-1),p("p",{class:"text-gray-600 dark:text-gray-400 mt-2"},"Salvando...",-1)]))):(P(),D("div",jB,[Ie(p("input",{"onUpdate:modelValue":k[5]||(k[5]=S=>g.value.name=S),placeholder:"Nome do Produto",class:"w-full p-3 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[st,g.value.name]]),Ie(p("textarea",{"onUpdate:modelValue":k[6]||(k[6]=S=>g.value.description=S),placeholder:"Descrio do Produto",rows:"3",class:"w-full p-3 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[st,g.value.description]]),Ie(p("input",{"onUpdate:modelValue":k[7]||(k[7]=S=>g.value.img=S),placeholder:"URL da imagem (ex: https://exemplo.com/imagem.jpg)",class:"w-full p-3 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[st,g.value.img]]),p("div",null,[re(hB,{modelValue:g.value.categoryIds,"onUpdate:modelValue":k[8]||(k[8]=S=>g.value.categoryIds=S),categories:n.value,class:"w-full"},null,8,["modelValue","categories"]),k[29]||(k[29]=p("p",{class:"text-xs text-gray-600 dark:text-gray-400 mt-1"},"Segure Ctrl/Cmd para selecionar mltiplas.",-1))]),p("div",zB,[k[30]||(k[30]=p("p",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Preos e Tamanhos:",-1)),(P(!0),D(ve,null,Me(g.value.price,(S,R)=>(P(),D("div",{key:R,class:"flex items-center mb-2 gap-2"},[Ie(p("input",{"onUpdate:modelValue":me=>g.value.sizes[R]=me,placeholder:"Tamanho (Opcional)",class:"w-full p-2 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,8,HB),[[st,g.value.sizes[R]]]),Ie(p("input",{"onUpdate:modelValue":me=>g.value.price[R]=me,type:"number",step:"0.01",placeholder:"Preo",class:"w-24 p-2 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,8,qB),[[st,g.value.price[R],void 0,{number:!0}]]),p("button",{onClick:me=>w(R),class:"text-red-500 hover:text-red-400 text-xl transition-colors duration-200"},"  ",8,WB)]))),128)),p("button",{onClick:k[9]||(k[9]=S=>_()),class:"text-sm text-blue-600 dark:text-blue-400 hover:underline mt-2"}," + Adicionar Preo/Tamanho ")]),p("div",null,[k[31]||(k[31]=p("p",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Adicionais:",-1)),(P(!0),D(ve,null,Me(g.value.extras,(S,R)=>(P(),D("div",{key:R,class:"flex items-center gap-2 mb-2"},[Ie(p("input",{"onUpdate:modelValue":me=>S.name=me,placeholder:"Nome do Adicional",class:"flex-1 p-2 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,8,KB),[[st,S.name]]),Ie(p("input",{"onUpdate:modelValue":me=>S.price=me,type:"number",step:"0.01",placeholder:"Preo",class:"w-24 p-2 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,8,GB),[[st,S.price,void 0,{number:!0}]]),p("button",{onClick:me=>O(R),class:"text-red-500 hover:text-red-400 text-xl transition-colors duration-200"},"  ",8,YB)]))),128)),p("button",{onClick:k[10]||(k[10]=S=>I()),class:"text-sm text-blue-600 dark:text-blue-400 hover:underline mt-2"}," + Adicionar adicional ")]),p("div",QB,[p("button",{onClick:k[11]||(k[11]=S=>L()),disabled:u.value,class:"px-5 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Salvar ",8,XB),p("button",{onClick:k[12]||(k[12]=S=>s.value=!1),disabled:u.value,class:"px-5 py-2 bg-gray-600 hover:bg-gray-700 text-white font-semibold rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Cancelar ",8,JB)])]))])]),_:1},8,["open"])):J("",!0),r.value?(P(),Ye(Gs,{key:1,open:r.value,"onUpdate:open":k[16]||(k[16]=S=>r.value=S)},{default:pe(()=>{var S;return[p("button",{onClick:k[14]||(k[14]=R=>r.value=!1),class:"absolute top-3 right-3 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white text-xl"},"  "),p("p",ZB,[k[32]||(k[32]=ee(" Tem certeza que deseja excluir o produto ")),p("strong",e8,B((S=i.value)==null?void 0:S.name),1),k[33]||(k[33]=ee("? Esta ao  irreversvel. "))]),p("div",t8,[p("button",{onClick:$,disabled:u.value,class:"px-5 py-2 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Excluir ",8,n8),p("button",{onClick:k[15]||(k[15]=R=>r.value=!1),disabled:u.value,class:"px-5 py-2 bg-gray-600 hover:bg-gray-700 text-white font-semibold rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Cancelar ",8,s8)])]}),_:1},8,["open"])):J("",!0)]))}},i8=Gt(r8,[["__scopeId","data-v-743b3591"]]),o8={class:"mb-4"},a8={class:"grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 lg:grid-cols-7 gap-4 max-h-[calc(95vh-160px)] overflow-y-auto pr-2"},l8=["onClick","title"],c8={key:0,class:"col-span-full text-center text-gray-400 py-8"},u8={__name:"IconPickerModal",props:{open:{type:Boolean,default:!1}},emits:["update:open","icon-selected"],setup(t,{emit:e}){const n=t,s=e,r=j(n.open);kt(()=>n.open,u=>{r.value=u});const i=j(["fa-duotone fa-solid fa-pizza-slice","fa-duotone fa-solid fa-hamburger","fa-duotone fa-solid fa-ice-cream","fa-duotone fa-solid fa-mug-hot","fa-duotone fa-solid fa-coffee","fa-duotone fa-solid fa-beer","fa-duotone fa-solid fa-apple-alt","fa-duotone fa-solid fa-carrot","fa-duotone fa-solid fa-cheese","fa-duotone fa-solid fa-bread-slice","fa-duotone fa-solid fa-cookie-bite","fa-duotone fa-solid fa-egg","fa-duotone fa-solid fa-fish","fa-duotone fa-solid fa-hotdog","fa-duotone fa-solid fa-bacon","fa-duotone fa-solid fa-drumstick-bite","fa-duotone fa-solid fa-utensils","fa-duotone fa-solid fa-shopping-basket","fa-duotone fa-solid fa-star","fa-duotone fa-solid fa-heart","fa-duotone fa-solid fa-user","fa-duotone fa-solid fa-cog","fa-duotone fa-solid fa-home","fa-duotone fa-solid fa-info-circle","fa-duotone fa-solid fa-question-circle","fa-duotone fa-solid fa-exclamation-triangle","fa-duotone fa-solid fa-check-circle","fa-duotone fa-solid fa-times-circle","fa-duotone fa-solid fa-bell","fa-duotone fa-solid fa-envelope","fa-duotone fa-solid fa-map-marker-alt","fa-duotone fa-solid fa-phone","fa-duotone fa-solid fa-mobile-alt","fa-duotone fa-solid fa-credit-card","fa-duotone fa-solid fa-money-bill-alt","fa-duotone fa-solid fa-truck","fa-duotone fa-solid fa-motorcycle","fa-duotone fa-solid fa-car","fa-duotone fa-solid fa-store","fa-duotone fa-solid fa-calendar-alt","fa-duotone fa-solid fa-clock","fa-duotone fa-solid fa-fire","fa-duotone fa-solid fa-leaf","fa-duotone fa-solid fa-cloud","fa-duotone fa-solid fa-sun","fa-duotone fa-solid fa-moon","fa-duotone fa-solid fa-umbrella","fa-duotone fa-solid fa-gift","fa-duotone fa-solid fa-percent","fa-duotone fa-solid fa-tag","fa-duotone fa-solid fa-qrcode","fa-duotone fa-solid fa-wifi","fa-duotone fa-solid fa-lock","fa-duotone fa-solid fa-unlock","fa-duotone fa-solid fa-plus","fa-duotone fa-solid fa-minus","fa-duotone fa-solid fa-edit","fa-duotone fa-solid fa-trash","fa-duotone fa-solid fa-search","fa-duotone fa-solid fa-filter","fa-duotone fa-solid fa-sort","fa-duotone fa-solid fa-chart-line","fa-duotone fa-solid fa-receipt","fa-duotone fa-solid fa-box-open","fa-duotone fa-solid fa-tags","fa-duotone fa-solid fa-tools","fab fa-whatsapp","fa-duotone fa-solid fa-chart-bar","fa-duotone fa-solid fa-candy"]),o=j(""),a=ye(()=>{if(!o.value)return i.value;const u=o.value.toLowerCase();return i.value.filter(h=>h.toLowerCase().includes(u))});function l(u){s("icon-selected",u),c()}function c(){s("update:open",!1)}return(u,h)=>(P(),Ye(Gs,{open:r.value,"onUpdate:open":h[1]||(h[1]=f=>r.value=f)},{default:pe(()=>[p("button",{onClick:c,class:"absolute top-3 right-3 text-gray-400 hover:text-white text-xl"},"  "),h[2]||(h[2]=p("h3",{class:"text-2xl font-bold mb-4 border-b border-gray-700 pb-2"},"Escolher cone",-1)),p("div",o8,[Ie(p("input",{type:"text","onUpdate:modelValue":h[0]||(h[0]=f=>o.value=f),placeholder:"Buscar cone (ex: pizza, star, user)",class:"w-full p-3 dark:bg-gray-800 border dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[st,o.value]])]),p("div",a8,[(P(!0),D(ve,null,Me(a.value,f=>(P(),D("div",{key:f,onClick:g=>l(f),class:"flex flex-col items-center justify-center p-3 rounded-lg cursor-pointer hover:bg-gray-700 transition-colors duration-200 border border-gray-700",title:f.replace("fas fa-","").replace("fab fa-","")},[p("i",{class:ce([f,"text-3xl mb-2 text-blue-400"])},null,2)],8,l8))),128)),a.value.length===0?(P(),D("div",c8," Nenhum cone encontrado. ")):J("",!0)]),p("div",{class:"mt-6 flex justify-end border-t border-gray-700 pt-4"},[p("button",{onClick:c,class:"px-5 py-2 bg-gray-600 hover:bg-gray-700 text-white font-semibold rounded-md transition-colors duration-200"}," Fechar ")])]),_:1,__:[2]},8,["open"]))}},d8=Gt(u8,[["__scopeId","data-v-e7109440"]]),h8={class:"space-y-6 p-4 bg-white dark:bg-gray-900 rounded-lg shadow-xl"},f8={key:0,class:"text-center py-8"},p8={key:1,class:"text-center py-8"},g8={key:2,class:"overflow-x-auto mt-4 rounded-lg"},m8={class:"min-w-full table-auto bg-gray-100 dark:bg-gray-800"},y8={class:"text-gray-800 dark:text-gray-200 text-sm font-light"},v8={class:"py-3 px-6 text-left whitespace-nowrap flex flex-col"},_8={class:"italic text-gray-600 dark:text-gray-400"},b8={class:"py-3 px-6 text-left"},x8={class:"py-3 px-6 text-left"},w8=["title"],E8={class:"py-3 px-6 text-right"},T8=["onClick"],k8=["onClick"],I8={class:"flex flex-col md:flex-row justify-between items-center mt-6 text-gray-900 dark:text-white p-4 bg-gray-100 dark:bg-gray-800 rounded-lg"},S8={class:"mb-4 md:mb-0"},A8={class:"flex items-center gap-2"},C8={class:"relative"},P8=["disabled"],R8={class:"px-2"},O8=["disabled"],D8={class:"max-w-md text-gray-900 dark:text-white relative"},M8={class:"text-2xl font-bold mb-4 border-b border-gray-300 dark:border-gray-700 pb-2"},N8={key:0,class:"text-center py-4"},L8={key:1,class:"space-y-4"},V8=["value"],$8={class:"flex items-center gap-2 relative"},F8={class:"flex justify-end mt-6 gap-3 border-t border-gray-300 dark:border-gray-700 pt-4"},U8=["disabled"],B8=["disabled"],j8={class:"mb-4 flex flex-col items-center space-y-4"},z8={class:"text-red-600 dark:text-red-400"},H8={class:"mt-6 flex justify-end gap-3"},q8=["disabled"],W8=["disabled"],K8={__name:"Categories",setup(t){const e=j([]),n=j(!1),s=j(!1),r=j(!1),i=j(null),o=j(1),a=j(5),l=j(0),c=j(!0),u=j(!1),h=ye(()=>{const T=(o.value-1)*a.value;return e.value.slice(T,T+a.value)}),f=ye(()=>Math.ceil(l.value/a.value)),g=j({id:null,name:"",slug:"",parent_id:"",icon:""}),v=ye(()=>g.value.id?e.value.filter(T=>T.id!==g.value.id):e.value);function y(){g.value={id:null,name:"",slug:"",parent_id:"",icon:""}}kt(()=>g.value.name,T=>{g.value.slug=T.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")});function _(T=null){y(),T&&(g.value=JSON.parse(JSON.stringify(T))),n.value=!0}function w(T){g.value.icon=T,r.value=!1}async function I(){var T;u.value=!0;try{const b={...g.value};b.parent_id===""&&(b.parent_id=null),b.id?(await Xe.put(`/categories/${b.id}`,b),console.log(`Categoria ${b.id} atualizada com sucesso.`)):(await Xe.post("/categories",b),console.log("Nova categoria criada com sucesso.")),n.value=!1,await $()}catch(b){console.error("Erro ao salvar categoria:",((T=b.response)==null?void 0:T.data)||b.message)}finally{u.value=!1}}function O(T){i.value=T,s.value=!0}async function L(){var T;u.value=!0;try{i.value&&i.value.id&&(await Xe.delete(`/categories/${i.value.id}`),console.log(`Categoria ${i.value.id} excluda com sucesso.`),s.value=!1,await $())}catch(b){console.error("Erro ao excluir categoria:",((T=b.response)==null?void 0:T.data)||b.message)}finally{u.value=!1}}function M(T){if(!T)return"Nenhuma";const b=e.value.find(E=>E.id===T);return b?b.name:"Desconhecida"}async function $(){var T;c.value=!0;try{const b=await Xe.get("/categories");e.value=Array.isArray(b.data)?b.data:[],l.value=e.value.length,o.value>f.value&&f.value>0?o.value=f.value:f.value===0&&(o.value=1)}catch(b){console.error("Erro ao carregar categorias:",((T=b.response)==null?void 0:T.data)||b.message)}finally{c.value=!1}}return kt(a,()=>{o.value=1}),mt(()=>{$()}),(T,b)=>(P(),D("div",null,[re(Mi,null,{default:pe(()=>[p("div",h8,[b[25]||(b[25]=p("h2",{class:"text-3xl font-bold text-gray-900 dark:text-white"},[ee(" Categorias "),p("p",{class:"text-gray-600 dark:text-gray-400 text-sm font-normal"},"Adicione, edite ou remova categorias de produtos.")],-1)),p("button",{onClick:b[0]||(b[0]=E=>_()),class:"px-5 py-2 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-md transition-colors duration-200"}," Nova Categoria "),c.value?(P(),D("div",f8,b[17]||(b[17]=[p("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-400 dark:border-gray-600 mx-auto"},null,-1),p("p",{class:"text-gray-600 dark:text-gray-400 mt-4"},"Carregando categorias...",-1)]))):e.value.length===0?(P(),D("div",p8,b[18]||(b[18]=[p("p",{class:"text-gray-600 dark:text-gray-400 text-lg"},"Nenhuma categoria encontrada.",-1)]))):(P(),D("div",g8,[p("table",m8,[b[21]||(b[21]=p("thead",null,[p("tr",{class:"bg-gray-200 dark:bg-gray-700"},[p("th",{class:"py-3 px-6 text-left text-gray-700 dark:text-gray-300 uppercase text-sm leading-normal"},"Nome "),p("th",{class:"py-3 px-6 text-left text-gray-700 dark:text-gray-300 uppercase text-sm leading-normal"}," Categoria Pai"),p("th",{class:"py-3 px-6 text-left text-gray-700 dark:text-gray-300 uppercase text-sm leading-normal"},"cone "),p("th",{class:"py-3 px-6 text-right text-gray-700 dark:text-gray-300 uppercase text-sm leading-normal"},"Aes ")])],-1)),p("tbody",y8,[(P(!0),D(ve,null,Me(h.value,E=>(P(),D("tr",{key:E.id,class:"border-b border-gray-300 dark:border-gray-700 hover:bg-gray-200 dark:hover:bg-gray-700"},[p("td",v8,[p("span",null,B(E.name),1),p("small",_8,"/"+B(E.slug),1)]),p("td",b8,B(M(E.parent_id)),1),p("td",x8,[p("i",{class:ce([E.icon,"mr-2 text-blue-600 dark:text-blue-400"]),title:E.icon},null,10,w8)]),p("td",E8,[p("button",{onClick:A=>_(E),class:"px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-l-md transition-colors duration-200"},b[19]||(b[19]=[p("i",{class:"fa-duotone fa-edit","aria-label":"hidden"},null,-1)]),8,T8),p("button",{onClick:A=>O(E),class:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-r-md transition-colors duration-200"},b[20]||(b[20]=[p("i",{class:"fa-duotone fa-trash","aria-label":"hidden"},null,-1)]),8,k8)])]))),128))])]),p("div",I8,[p("span",S8,"Total de itens: "+B(l.value),1),p("div",A8,[b[24]||(b[24]=p("label",{for:"pageSize",class:"text-sm text-gray-700 dark:text-gray-300"},"Itens por pgina:",-1)),p("div",C8,[Ie(p("select",{id:"pageSize","onUpdate:modelValue":b[1]||(b[1]=E=>a.value=E),class:"appearance-none bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white border border-gray-400 dark:border-gray-600 rounded px-3 py-1 pr-8 focus:outline-none focus:ring-2 focus:ring-blue-500"},b[22]||(b[22]=[p("option",{value:3},"3",-1),p("option",{value:5},"5",-1),p("option",{value:10},"10",-1),p("option",{value:25},"25",-1)]),512),[[us,a.value,void 0,{number:!0}]]),b[23]||(b[23]=p("div",{class:"pointer-events-none absolute inset-y-0 right-2 flex items-center text-gray-800 dark:text-white"},"  ",-1))]),p("button",{onClick:b[2]||(b[2]=E=>o.value--),disabled:o.value===1,class:"px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"}," < Anterior ",8,P8),p("span",R8,"Pgina "+B(o.value)+" de "+B(f.value),1),p("button",{onClick:b[3]||(b[3]=E=>o.value++),disabled:o.value>=f.value,class:"px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"}," Prximo > ",8,O8)])])]))])]),_:1}),n.value?(P(),Ye(Gs,{key:0,open:n.value,"onUpdate:open":b[12]||(b[12]=E=>n.value=E)},{default:pe(()=>[p("div",D8,[p("button",{onClick:b[4]||(b[4]=E=>n.value=!1),class:"absolute top-3 right-3 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white text-xl"},"  "),p("h3",M8,B(g.value.id?"Editar":"Nova")+" Categoria ",1),u.value?(P(),D("div",N8,b[26]||(b[26]=[p("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-400 dark:border-gray-600 mx-auto"},null,-1),p("p",{class:"text-gray-600 dark:text-gray-400 mt-2"},"Salvando...",-1)]))):(P(),D("div",L8,[Ie(p("input",{"onUpdate:modelValue":b[5]||(b[5]=E=>g.value.name=E),placeholder:"Nome da Categoria",class:"w-full p-3 bg-gray-200 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[st,g.value.name]]),Ie(p("input",{"onUpdate:modelValue":b[6]||(b[6]=E=>g.value.slug=E),placeholder:"Slug (gerado automaticamente)",readonly:"",class:"w-full p-3 bg-gray-200 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md hidden focus:outline-none focus:ring-2 focus:ring-blue-500 cursor-not-allowed"},null,512),[[st,g.value.slug]]),p("div",null,[b[28]||(b[28]=p("label",{for:"parent-category-select",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Categoria Pai (Opcional):",-1)),Ie(p("select",{id:"parent-category-select","onUpdate:modelValue":b[7]||(b[7]=E=>g.value.parent_id=E),class:"w-full p-3 bg-gray-200 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"},[b[27]||(b[27]=p("option",{value:""},"Nenhuma (Categoria Principal)",-1)),(P(!0),D(ve,null,Me(v.value,E=>(P(),D("option",{key:E.id,value:E.id},B(E.name),9,V8))),128))],512),[[us,g.value.parent_id]])]),p("div",null,[b[30]||(b[30]=p("label",{for:"icon-input",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"cone:",-1)),p("div",$8,[Ie(p("input",{type:"text",id:"icon-input","onUpdate:modelValue":b[8]||(b[8]=E=>g.value.icon=E),placeholder:"Ex: fas fa-pizza-slice",class:"w-full p-3 bg-gray-200 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[st,g.value.icon]]),p("button",{onClick:b[9]||(b[9]=E=>r.value=!0),class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-md transition-colors duration-200 absolute right-0 top-0 h-full flex items-center"},[p("i",{class:ce(g.value.icon||"fas fa-search")},null,2),b[29]||(b[29]=p("span",{class:"ml-2 hidden sm:inline"},"Escolher",-1))])]),b[31]||(b[31]=p("p",{class:"text-xs text-gray-600 dark:text-gray-400 mt-1"},[ee('Use classes de cones como "fas fa-pizza-slice" '),p("a",{class:"text-blue-600 dark:text-blue-400 hover:underline",href:"https://fontawesome.com/icons",target:"_blank"},"(Font Awesome)"),ee(". ")],-1))]),p("div",F8,[p("button",{onClick:b[10]||(b[10]=E=>I()),disabled:u.value,class:"px-5 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Salvar ",8,U8),p("button",{onClick:b[11]||(b[11]=E=>n.value=!1),disabled:u.value,class:"px-5 py-2 bg-gray-600 hover:bg-gray-700 text-white font-semibold rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Cancelar ",8,B8)])]))])]),_:1},8,["open"])):J("",!0),s.value?(P(),Ye(Gs,{key:1,open:s.value,"onUpdate:open":b[15]||(b[15]=E=>s.value=E)},{default:pe(()=>{var E;return[p("button",{onClick:b[13]||(b[13]=A=>s.value=!1),class:"absolute top-3 right-3 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white text-xl mb-5"},"  "),p("div",j8,[b[34]||(b[34]=p("i",{class:"fa-duotone fa-solid fa-circle-exclamation text-6xl text-red-400"},null,-1)),p("span",null,[b[32]||(b[32]=ee(" Tem certeza que deseja excluir a categoria ")),p("strong",z8,B((E=i.value)==null?void 0:E.name),1),b[33]||(b[33]=ee("? "))]),b[35]||(b[35]=ee(" Esta ao  irreversvel. "))]),p("div",H8,[p("button",{onClick:L,disabled:u.value,class:"px-5 py-2 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Excluir ",8,q8),p("button",{onClick:b[14]||(b[14]=A=>s.value=!1),disabled:u.value,class:"px-5 py-2 bg-gray-600 hover:bg-gray-700 text-white font-semibold rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Cancelar ",8,W8)])]}),_:1},8,["open"])):J("",!0),r.value?(P(),Ye(d8,{key:2,open:r.value,"onUpdate:open":b[16]||(b[16]=E=>r.value=E),onIconSelected:w},null,8,["open"])):J("",!0)]))}},G8={class:"whatsapp-qr-container p-4 bg-white dark:bg-gray-800 rounded-lg shadow-md text-center"},Y8={key:0,class:"text-gray-600 dark:text-gray-400"},Q8={key:1},X8={class:"capitalize"},J8={key:0},Z8=["src"],ej={key:1,class:"text-red-500"},tj={key:1,class:"text-green-600 dark:text-green-400"},nj={key:2,class:"text-green-600 dark:text-green-400"},sj={key:3},rj={key:4,class:"text-red-600 dark:text-red-400"},ij={key:5,class:"text-gray-500 dark:text-gray-400"},oj=["disabled"],aj={key:0,class:"fas fa-spinner fa-spin mr-2"},lj=["disabled"],cj={key:0,class:"fas fa-spinner fa-spin mr-2"},uj={__name:"WhatsappQrCodeDisplay",setup(t){const e=j(null),n=j("loading"),s=j(!0),r=j(null),i=ye(()=>{switch(n.value){case"inchat":case"connected":return"text-green-600 dark:text-green-400";case"qr-code":return"text-orange-500";case"disconnected":case"closed":case"failed":return"text-red-600 dark:text-red-400";default:return"text-gray-500 dark:text-gray-400"}}),o=async()=>{s.value=!0;try{const l=await Xe.get("/whatsapp/status");n.value=l.data.status,e.value=l.data.qrCode}catch(l){console.error("Erro ao buscar status do QR Code:",l),n.value="failed",e.value=null}finally{s.value=!1}},a=async()=>{s.value=!0;try{const l=await Xe.post("/admin/start-bot");console.log(l),n.value=l.data.status,e.value=l.data.qrCode,setInterval(o,15e3)}catch(l){console.error("Erro ao iniciar o bot:",l),n.value="failed",e.value=null}finally{s.value=!1}};return mt(()=>{o()}),Si(()=>{r.value&&clearInterval(r.value)}),(l,c)=>(P(),Ye(Mi,null,{default:pe(()=>[p("div",G8,[c[10]||(c[10]=p("h2",{class:"text-xl font-semibold mb-4 dark:text-white"},"Status da Conexo do WhatsApp",-1)),s.value?(P(),D("div",Y8,c[0]||(c[0]=[p("i",{class:"fas fa-spinner fa-spin mr-2"},null,-1),ee(" Carregando status... ")]))):(P(),D("div",Q8,[p("p",{class:ce(["text-lg font-medium mb-2",i.value])},[c[1]||(c[1]=ee(" Status: ")),p("span",X8,B(n.value),1)],2),n.value==="qr-code"?(P(),D("div",J8,[c[2]||(c[2]=p("p",{class:"text-gray-700 dark:text-gray-300 mb-4"},"Escaneie o QR Code abaixo com seu celular para conectar o bot: ",-1)),e.value?(P(),D("img",{key:0,src:e.value,alt:"QR Code WhatsApp",class:"mx-auto w-64 h-64 border p-2 bg-white"},null,8,Z8)):(P(),D("p",ej,"QR Code no disponvel. Tente recarregar a pgina."))])):n.value==="connected"?(P(),D("div",tj,c[3]||(c[3]=[p("i",{class:"fas fa-check-circle mr-2"},null,-1),ee(" Bot conectado com sucesso! "),p("p",{class:"text-gray-700 dark:text-gray-300 mt-2"},"Voc pode fechar esta pgina.",-1)]))):n.value==="inchat"?(P(),D("div",nj,c[4]||(c[4]=[p("i",{class:"fas fa-check-circle mr-2"},null,-1),ee(" Bot conectado com sucesso! "),p("p",{class:"text-gray-700 dark:text-gray-300 mt-2"},"Voc pode fechar esta pgina.",-1)]))):n.value==="disconnected"||n.value==="closed"?(P(),D("div",sj,[c[5]||(c[5]=p("p",{class:"text-red-600 dark:text-red-400"},"Bot desconectado. Aguardando novo QR Code ou tentando reconectar. ",-1)),p("button",{onClick:o,class:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600"}," Tentar novamente ")])):n.value==="failed"?(P(),D("div",rj,[c[6]||(c[6]=p("p",null,"Falha ao iniciar o bot. Verifique os logs do backend.",-1)),p("button",{onClick:o,class:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600"}," Tentar novamente ")])):(P(),D("div",ij,[p("p",null,"Status: "+B(n.value),1)])),p("button",{onClick:o,disabled:s.value,class:"mt-6 px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition duration-200"},[s.value?(P(),D("i",aj)):J("",!0),c[7]||(c[7]=ee(" Atualizar Status "))],8,oj),n.value!=="inchat"||n.value!=="connected"?(P(),D("button",{key:6,onClick:a,disabled:s.value,class:"mt-4 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition duration-200"},[s.value?(P(),D("i",cj)):J("",!0),c[8]||(c[8]=p("i",{class:"fab fa-whatsapp"},null,-1)),c[9]||(c[9]=ee(" Iniciar Bot WhatsApp "))],8,lj)):J("",!0)]))])]),_:1}))}},dj=Gt(uj,[["__scopeId","data-v-df8282e2"]]),hj={class:"space-y-6"},fj={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},pj={class:"bg-gray-100 dark:bg-gray-800 p-6 rounded-lg shadow-md border border-gray-300 dark:border-gray-700"},gj={class:"space-y-4"},mj={class:"bg-gray-100 dark:bg-gray-800 p-6 rounded-lg shadow-md border border-gray-300 dark:border-gray-700"},yj={class:"space-y-4"},vj={class:"flex items-center"},_j={class:"bg-gray-100 dark:bg-gray-800 p-6 rounded-lg shadow-md border border-gray-300 dark:border-gray-700"},bj={class:"space-y-4"},xj={class:"text-xs text-gray-500 dark:text-gray-500 mt-1 flex items-center justify-between"},wj={class:"flex justify-end mt-6"},Ej=["disabled"],Tj={key:0},kj={key:1},Ij={__name:"AdminSettings",setup(t){const e=j({appName:"",contactEmail:"",whatsappNumber:"",notificationTopic:"geral_promocoes",enableOrderNotifications:!0}),n=j(!1),s=j(!0);async function r(){s.value=!0;try{const o=await Xe.get("/admin/settings");o.data&&(e.value={...e.value,...o.data})}catch(o){console.error("Erro ao carregar configuraes:",o)}finally{s.value=!1}}async function i(){n.value=!0;try{await Xe.post("/admin/settings",e.value),console.log("Configuraes salvas com sucesso!")}catch(o){console.error("Erro ao salvar configuraes:",o)}finally{n.value=!1}}return mt(()=>{r()}),(o,a)=>(P(),Ye(Mi,null,{default:pe(()=>[p("div",hj,[a[17]||(a[17]=p("h2",{class:"text-md md:text-2xl font-bold text-gray-900 dark:text-white"},[ee("Configuraes do Administrador "),p("p",{class:"text-gray-600 dark:text-gray-400 italic text-xs font-normal"},"Ajuste as configuraes gerais da sua plataforma.")],-1)),p("div",fj,[p("div",pj,[a[8]||(a[8]=p("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4 border-b border-gray-300 dark:border-gray-700 pb-2"}," Configuraes Gerais",-1)),p("div",gj,[p("div",null,[a[5]||(a[5]=p("label",{for:"appName",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Nome do Aplicativo:",-1)),Ie(p("input",{type:"text",id:"appName","onUpdate:modelValue":a[0]||(a[0]=l=>e.value.appName=l),class:"w-full p-3 bg-gray-200 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nome da Pizzaria"},null,512),[[st,e.value.appName]])]),p("div",null,[a[6]||(a[6]=p("label",{for:"contactEmail",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Email de Contato:",-1)),Ie(p("input",{type:"email",id:"contactEmail","onUpdate:modelValue":a[1]||(a[1]=l=>e.value.contactEmail=l),class:"w-full p-3 bg-gray-200 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"contato@pizzaria.com"},null,512),[[st,e.value.contactEmail]])]),p("div",null,[a[7]||(a[7]=p("label",{for:"whatsappNumber",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Nmero de WhatsApp (para pedidos):",-1)),Ie(p("input",{type:"text",id:"whatsappNumber","onUpdate:modelValue":a[2]||(a[2]=l=>e.value.whatsappNumber=l),class:"w-full p-3 bg-gray-200 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"+55 11 91234-5678"},null,512),[[st,e.value.whatsappNumber]])])])]),p("div",mj,[a[12]||(a[12]=p("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4 border-b border-gray-300 dark:border-gray-700 pb-2"}," Notificaes FCM",-1)),a[13]||(a[13]=p("p",{class:"text-gray-600 dark:text-gray-400 mb-4"},"Gerencie as configuraes de notificao push do Firebase Cloud Messaging.",-1)),p("div",yj,[p("div",null,[a[9]||(a[9]=p("label",{for:"notificationTopic",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Tpico Padro para Notificaes:",-1)),Ie(p("input",{type:"text",id:"notificationTopic","onUpdate:modelValue":a[3]||(a[3]=l=>e.value.notificationTopic=l),class:"w-full p-3 bg-gray-200 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"geral_promocoes"},null,512),[[st,e.value.notificationTopic]]),a[10]||(a[10]=p("p",{class:"text-xs text-gray-500 dark:text-gray-500 mt-1"},"Este tpico ser usado para enviar notificaes em massa.",-1))]),p("div",vj,[Ie(p("input",{type:"checkbox",id:"enableOrderNotifications","onUpdate:modelValue":a[4]||(a[4]=l=>e.value.enableOrderNotifications=l),class:"h-5 w-5 text-blue-600 bg-gray-200 dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500"},null,512),[[au,e.value.enableOrderNotifications]]),a[11]||(a[11]=p("label",{for:"enableOrderNotifications",class:"ml-2 block text-sm text-gray-700 dark:text-gray-300"}," Habilitar notificaes de atualizao de pedido ",-1))])])]),p("div",_j,[a[16]||(a[16]=p("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4 border-b border-gray-300 dark:border-gray-700 pb-2"}," Outros",-1)),p("div",bj,[p("p",xj,[a[14]||(a[14]=ee(" Tema Light/Dark ")),re(fw)]),a[15]||(a[15]=p("p",{class:"text-xs text-gray-500 dark:text-gray-500 mt-1 flex items-center justify-between"},[p("label",{for:"xota",class:"animate-xota"},"Ativar notificaes de pedidos"),p("input",{id:"xota",type:"checkbox",value:"anal69",class:"w-4 h-4 appearance-none dark:bg-gray-900 checked:bg-green-200 checked:rounded-full checked:outline-2 outline-2 rounded-full not-checked:outline-orange-800 checked:animate-rubberBand checked:outline-orange-500"})],-1))])])]),p("div",wj,[p("button",{onClick:i,disabled:n.value,class:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"},[n.value?(P(),D("span",Tj,"Salvando...")):(P(),D("span",kj,"Salvar Configuraes"))],8,Ej)])])]),_:1}))}},Sj={class:"min-h-screen flex items-center justify-center transition-colors duration-200 body"},Aj={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert"},Cj={class:"block sm:inline"},Pj=["disabled"],Rj={key:0,class:"flex items-center"},Oj={key:1},Dj=["disabled"],Mj={key:0,class:"flex items-center"},Nj={key:1},Lj={__name:"Login",setup(t){const e=Vd(),n=j(""),s=j(""),r=async()=>{await e.loginWithEmail(n.value,s.value)},i=async()=>{await e.loginWithGoogle()};return(o,a)=>(P(),D("div",Sj,[p("div",{class:ce(["p-8 rounded-lg w-full max-w-md h-screen md:h-auto morph",[te(e).error?"shadow-red-500/30":""]])},[re(fw),a[7]||(a[7]=p("img",{src:hw,alt:"Logo",class:"mx-auto mb-6 w-auto h-24"},null,-1)),te(e).error?(P(),D("div",Aj,[p("span",Cj,B(te(e).error),1)])):J("",!0),p("form",{onSubmit:Mn(r,["prevent"]),class:"space-y-4"},[p("div",null,[a[2]||(a[2]=p("label",{for:"email",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Email",-1)),Ie(p("input",{type:"email",id:"email","onUpdate:modelValue":a[0]||(a[0]=l=>n.value=l),required:"",class:ce(["mt-1 block w-full px-3 py-2 border  rounded-md shadow-sm focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white",te(e).error?"border-red-500":"border-gray-300 dark:border-gray-600"]),placeholder:"seu@email.com"},null,2),[[st,n.value]])]),p("div",null,[a[3]||(a[3]=p("label",{for:"password",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Senha",-1)),Ie(p("input",{type:"password",id:"password","onUpdate:modelValue":a[1]||(a[1]=l=>s.value=l),required:"",class:ce(["mt-1 block w-full px-3 py-2 border  rounded-md shadow-sm focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white",te(e).error?"border-red-500":"border-gray-300 dark:border-gray-600"]),placeholder:"********"},null,2),[[st,s.value]])]),p("button",{type:"submit",disabled:te(e).loading,class:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-amber-600 hover:bg-amber-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 dark:bg-amber-700 dark:hover:bg-amber-800 disabled:opacity-50 disabled:cursor-not-allowed"},[te(e).loading?(P(),D("span",Rj,a[4]||(a[4]=[p("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[p("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),p("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),ee(" Entrando... ")]))):(P(),D("span",Oj,"Entrar com Email"))],8,Pj)],32),a[8]||(a[8]=ru('<div class="relative my-6"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-gray-300 dark:border-gray-600"></div></div><div class="relative flex justify-center text-sm"><span class="px-2 bg-[#e0e0e0] dark:bg-gray-800 text-gray-500 dark:text-gray-400">Ou</span></div></div>',1)),p("div",null,[p("button",{onClick:i,disabled:te(e).loading,class:"w-full flex justify-center items-center py-2 px-4 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[a[6]||(a[6]=p("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google logo",class:"w-5 h-5 mr-2"},null,-1)),te(e).loading?(P(),D("span",Mj,a[5]||(a[5]=[p("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-gray-700 dark:text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[p("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),p("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),ee(" Entrando com Google... ")]))):(P(),D("span",Nj,"Entrar com Google"))],8,Dj)])],2)]))}},Vj={class:"space-y-6 p-4 md:p-4 bg-white dark:bg-gray-900 rounded-lg shadow-xl"},$j={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert"},Fj={key:1,class:"text-center py-8"},Uj={key:2,class:"text-center py-8"},Bj={key:3,class:"mt-4 dark:border-gray-700 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},jj={class:"font-semibold text-gray-800 dark:text-white"},zj={class:"text-sm text-gray-600 dark:text-gray-400 mb-2"},Hj={class:"text-left mb-4"},qj={class:"flex justify-end space-x-2"},Wj=["onClick"],Kj=["onClick"],Gj={class:"flex flex-col md:flex-row justify-between items-center mt-6 text-gray-900 dark:text-white p-4 bg-gray-100 dark:bg-gray-800 rounded-lg"},Yj={class:"mb-4 md:mb-0 text-sm md:text-base"},Qj={class:"flex flex-col md:flex-row items-center gap-4 w-full md:w-auto"},Xj={class:"flex items-center gap-2 mb-4 md:mb-0 w-full md:w-auto justify-center"},Jj={class:"relative"},Zj={"aria-label":"Page navigation",class:"w-full flex justify-center"},ez={class:"inline-flex -space-x-px text-sm rounded-md shadow-sm overflow-hidden"},tz={key:0,class:"flex items-center justify-center px-3 h-8 leading-tight text-gray-500 bg-white border border-gray-300 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400"},nz=["onClick"],sz={class:"bg-white dark:bg-gray-800 text-gray-900 dark:text-white p-6 rounded-lg shadow-xl relative"},rz={class:"text-lg mb-4"},iz={class:"mt-6 flex justify-end gap-3"},oz=["disabled"],az={key:0},lz={key:1},cz=["disabled"],uz={__name:"ManagerUsers",setup(t){const e=j([]),n=j(!0),s=j(!1),r=j(null),i=j(""),o=j(!1),a=j(1),l=j(2),c=j(0),u=Aa(),h=Vd(),f=ye(()=>{const M=(a.value-1)*l.value;return e.value.slice(M,M+l.value)}),g=ye(()=>Math.ceil(c.value/l.value)),v=ye(()=>{const M=[],T=Math.floor(2.5);if(g.value<=5)for(let b=1;b<=g.value;b++)M.push(b);else{M.push(1);let b=Math.max(2,a.value-T),E=Math.min(g.value-1,a.value+T);a.value-1<T&&(E=4),g.value-a.value<T&&(b=g.value-5+2),b>2&&M.push("...");for(let A=b;A<=E;A++)M.push(A);E<g.value-1&&M.push("..."),g.value>1&&!M.includes(g.value)&&M.push(g.value)}return[...new Set(M)]}),y=M=>{M==="..."||M<1||M>g.value||M===a.value||(a.value=M)},_=M=>M?"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-semibold dark:bg-green-700 dark:text-green-100":"bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs font-semibold dark:bg-red-700 dark:text-red-100";function w(M,$){r.value=M,i.value=$,s.value=!0}function I(){r.value=null,i.value="",s.value=!1}async function O(){var M,$,T;if(!(!r.value||!i.value)){o.value=!0;try{const b=i.value==="promote"?"/admin/manage-users/promote":"/admin/manage-users/demote",E=i.value==="promote"?"promovido":"rebaixado";await Xe.post(b,{email:r.value.email}),u.showToast("Sucesso!",`Usurio ${r.value.email} foi ${E} com sucesso. Ele precisar fazer login novamente.`,"success",5e3),I(),await L()}catch(b){console.error(`Erro ao ${i.value} usurio:`,((M=b.response)==null?void 0:M.data)||b.message),u.showToast("Erro",`No foi possvel ${i.value} o usurio: ${((T=($=b.response)==null?void 0:$.data)==null?void 0:T.error)||b.message}`,"error",5e3)}finally{o.value=!1}}}async function L(){var M,$,T;if(!h.isAuthenticated||!h.isAdmin){n.value=!1,console.warn("No autenticado ou no  admin. No carregando usurios.");return}n.value=!0;try{console.log("Tentando carregar usurios da API...");const b=await Xe.get("/admin/manage-users/users");console.log("Usurios recebidos:",b.data),e.value=b.data,c.value=e.value.length,a.value>g.value&&g.value>0?a.value=g.value:g.value===0&&(a.value=1)}catch(b){console.error("Erro ao carregar usurios:",((M=b.response)==null?void 0:M.data)||b.message),(($=b.response)==null?void 0:$.status)!==401&&((T=b.response)==null?void 0:T.status)!==403&&u.showToast("Erro","No foi possvel carregar os usurios.","error")}finally{n.value=!1}}return kt(l,()=>{a.value=1}),mt(async()=>{!h.isAuthenticated&&!h.loading&&(console.log("ManageUsers: onMounted - authStore no inicializado, chamando initializeAuth..."),await h.initializeAuth()),console.log("ManageUsers: onMounted - Chamando loadUsers..."),L()}),(M,$)=>(P(),D("div",null,[re(Mi,null,{default:pe(()=>[p("div",Vj,[$[10]||($[10]=p("h2",{class:"md:text-2xl font-semibold text-gray-700 dark:text-white"},[p("i",{class:"fa-duotone fa-users"}),ee(" Gerenciamento de usurios "),p("p",{class:"text-xs font-normal text-gray-600 dark:text-gray-400 text-nowrap"}," Visualize e gerencie as permisses de administrador dos usurios. ")],-1)),!te(h).isAuthenticated||!te(h).isAdmin?(P(),D("div",$j,$[4]||($[4]=[p("span",{class:"block sm:inline"},[ee("Voc no tem permisso para acessar esta rea ou sua sesso expirou."),p("br"),ee("Por favor, faa login como administrador.")],-1)]))):n.value?(P(),D("div",Fj,$[5]||($[5]=[p("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-400 dark:border-gray-600 mx-auto"},null,-1),p("p",{class:"text-gray-600 dark:text-gray-400 mt-4"},"Carregando usurios...",-1)]))):e.value.length===0?(P(),D("div",Uj,$[6]||($[6]=[p("p",{class:"text-gray-600 dark:text-gray-400 text-xs md:text-lg"},"Nenhum usurio encontrado.",-1)]))):(P(),D("div",Bj,[(P(!0),D(ve,null,Me(f.value,T=>(P(),D("div",{class:"rounded-lg shadow-md bg-white dark:bg-gray-800 p-4 border border-gray-300 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",key:T.uid},[p("p",jj,B(T.displayName||"Nome no informado"),1),p("p",zj,B(T.email),1),p("p",Hj,[p("span",{class:ce(_(T.isAdmin))},B(T.isAdmin?"Administrador":"Usurio Comum"),3)]),p("div",qj,[T.isAdmin?(P(),D("button",{key:1,onClick:b=>w(T,"demote"),class:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white rounded-md text-sm transition-colors duration-200"}," Rebaixar ",8,Kj)):(P(),D("button",{key:0,onClick:b=>w(T,"promote"),class:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded-md text-sm transition-colors duration-200"}," Promover ",8,Wj))])]))),128))])),p("div",Gj,[p("span",Yj,"Total de usurios: "+B(c.value),1),p("div",Qj,[p("div",Xj,[$[9]||($[9]=p("label",{for:"pageSize",class:"text-xs text-gray-700 dark:text-gray-300"},"Usurios por pgina:",-1)),p("div",Jj,[Ie(p("select",{id:"pageSize","onUpdate:modelValue":$[0]||($[0]=T=>l.value=T),class:"appearance-none bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white border border-gray-400 dark:border-gray-600 rounded px-3 py-1 pr-8 focus:outline-none focus:ring-2 focus:ring-blue-500"},$[7]||($[7]=[p("option",{value:5},"5",-1),p("option",{value:10},"10",-1),p("option",{value:25},"25",-1)]),512),[[us,l.value,void 0,{number:!0}]]),$[8]||($[8]=p("div",{class:"pointer-events-none absolute inset-y-0 right-2 flex items-center text-gray-800 dark:text-white"},"  ",-1))])]),p("nav",Zj,[p("ul",ez,[p("li",null,[p("a",{onClick:$[1]||($[1]=T=>y(a.value-1)),class:ce([{"opacity-50 cursor-not-allowed":a.value===1},"flex items-center justify-center px-3 h-8 ms-0 leading-tight text-gray-500 bg-white border border-e-0 border-gray-300 rounded-s-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white transition-colors duration-200"])}," Anterior ",2)]),(P(!0),D(ve,null,Me(v.value,(T,b)=>(P(),D("li",{key:b},[T==="..."?(P(),D("span",tz," ... ")):(P(),D("a",{key:1,onClick:E=>y(T),class:ce([{"text-blue-600 border-blue-300 bg-blue-50 hover:bg-blue-100 dark:border-gray-700 dark:bg-gray-700 dark:text-white":T===a.value,"text-gray-500 bg-white border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white":T!==a.value},"flex items-center justify-center px-3 h-8 leading-tight border transition-colors duration-200"])},B(T),11,nz))]))),128)),p("li",null,[p("a",{onClick:$[2]||($[2]=T=>y(a.value+1)),class:ce([{"opacity-50 cursor-not-allowed":a.value===g.value},"flex items-center justify-center px-3 h-8 leading-tight text-gray-500 bg-white border border-gray-300 rounded-e-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white transition-colors duration-200"])}," Prximo ",2)])])])])])])]),_:1}),re(Gs,{open:s.value,"onUpdate:open":$[3]||($[3]=T=>s.value=T)},{default:pe(()=>{var T;return[p("div",sz,[p("button",{onClick:I,class:"absolute top-3 right-3 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white text-xl"},"  "),p("p",rz,[ee(" Tem certeza que deseja "+B(i.value==="promote"?"promover":"rebaixar")+" o usurio ",1),p("strong",{class:ce(i.value==="promote"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400")},B((T=r.value)==null?void 0:T.email),3),$[11]||($[11]=ee("? "))]),$[12]||($[12]=p("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Esta ao exigir que o usurio faa login novamente para que as alteraes de permisso entrem em vigor. ",-1)),p("div",iz,[p("button",{onClick:O,disabled:o.value,class:ce([i.value==="promote"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700","px-5 py-2 text-white font-semibold rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"])},[o.value?(P(),D("span",az,"Processando...")):(P(),D("span",lz,B(i.value==="promote"?"Confirmar Promoo":"Confirmar Rebaixamento"),1))],10,oz),p("button",{onClick:I,disabled:o.value,class:"px-5 py-2 bg-gray-600 hover:bg-gray-700 text-white font-semibold rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Cancelar ",8,cz)])])]}),_:1},8,["open"])]))}};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Nl(t){return t+.5|0}const mr=(t,e,n)=>Math.max(Math.min(t,n),e);function pa(t){return mr(Nl(t*2.55),0,255)}function Tr(t){return mr(Nl(t*255),0,255)}function As(t){return mr(Nl(t/2.55)/100,0,1)}function g_(t){return mr(Nl(t*100),0,100)}const Dn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Zf=[..."0123456789ABCDEF"],dz=t=>Zf[t&15],hz=t=>Zf[(t&240)>>4]+Zf[t&15],dc=t=>(t&240)>>4===(t&15),fz=t=>dc(t.r)&&dc(t.g)&&dc(t.b)&&dc(t.a);function pz(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Dn[t[1]]*17,g:255&Dn[t[2]]*17,b:255&Dn[t[3]]*17,a:e===5?Dn[t[4]]*17:255}:(e===7||e===9)&&(n={r:Dn[t[1]]<<4|Dn[t[2]],g:Dn[t[3]]<<4|Dn[t[4]],b:Dn[t[5]]<<4|Dn[t[6]],a:e===9?Dn[t[7]]<<4|Dn[t[8]]:255})),n}const gz=(t,e)=>t<255?e(t):"";function mz(t){var e=fz(t)?dz:hz;return t?"#"+e(t.r)+e(t.g)+e(t.b)+gz(t.a,e):void 0}const yz=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function YT(t,e,n){const s=e*Math.min(n,1-n),r=(i,o=(i+t/30)%12)=>n-s*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function vz(t,e,n){const s=(r,i=(r+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[s(5),s(3),s(1)]}function _z(t,e,n){const s=YT(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)s[r]*=1-e-n,s[r]+=e;return s}function bz(t,e,n,s,r){return t===r?(e-n)/s+(e<n?6:0):e===r?(n-t)/s+2:(t-e)/s+4}function zg(t){const n=t.r/255,s=t.g/255,r=t.b/255,i=Math.max(n,s,r),o=Math.min(n,s,r),a=(i+o)/2;let l,c,u;return i!==o&&(u=i-o,c=a>.5?u/(2-i-o):u/(i+o),l=bz(n,s,r,u,i),l=l*60+.5),[l|0,c||0,a]}function Hg(t,e,n,s){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,s)).map(Tr)}function qg(t,e,n){return Hg(YT,t,e,n)}function xz(t,e,n){return Hg(_z,t,e,n)}function wz(t,e,n){return Hg(vz,t,e,n)}function QT(t){return(t%360+360)%360}function Ez(t){const e=yz.exec(t);let n=255,s;if(!e)return;e[5]!==s&&(n=e[6]?pa(+e[5]):Tr(+e[5]));const r=QT(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?s=xz(r,i,o):e[1]==="hsv"?s=wz(r,i,o):s=qg(r,i,o),{r:s[0],g:s[1],b:s[2],a:n}}function Tz(t,e){var n=zg(t);n[0]=QT(n[0]+e),n=qg(n),t.r=n[0],t.g=n[1],t.b=n[2]}function kz(t){if(!t)return;const e=zg(t),n=e[0],s=g_(e[1]),r=g_(e[2]);return t.a<255?`hsla(${n}, ${s}%, ${r}%, ${As(t.a)})`:`hsl(${n}, ${s}%, ${r}%)`}const m_={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},y_={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Iz(){const t={},e=Object.keys(y_),n=Object.keys(m_);let s,r,i,o,a;for(s=0;s<e.length;s++){for(o=a=e[s],r=0;r<n.length;r++)i=n[r],a=a.replace(i,m_[i]);i=parseInt(y_[o],16),t[a]=[i>>16&255,i>>8&255,i&255]}return t}let hc;function Sz(t){hc||(hc=Iz(),hc.transparent=[0,0,0,0]);const e=hc[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Az=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Cz(t){const e=Az.exec(t);let n=255,s,r,i;if(e){if(e[7]!==s){const o=+e[7];n=e[8]?pa(o):mr(o*255,0,255)}return s=+e[1],r=+e[3],i=+e[5],s=255&(e[2]?pa(s):mr(s,0,255)),r=255&(e[4]?pa(r):mr(r,0,255)),i=255&(e[6]?pa(i):mr(i,0,255)),{r:s,g:r,b:i,a:n}}}function Pz(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${As(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Hh=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,ji=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Rz(t,e,n){const s=ji(As(t.r)),r=ji(As(t.g)),i=ji(As(t.b));return{r:Tr(Hh(s+n*(ji(As(e.r))-s))),g:Tr(Hh(r+n*(ji(As(e.g))-r))),b:Tr(Hh(i+n*(ji(As(e.b))-i))),a:t.a+n*(e.a-t.a)}}function fc(t,e,n){if(t){let s=zg(t);s[e]=Math.max(0,Math.min(s[e]+s[e]*n,e===0?360:1)),s=qg(s),t.r=s[0],t.g=s[1],t.b=s[2]}}function XT(t,e){return t&&Object.assign(e||{},t)}function v_(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Tr(t[3]))):(e=XT(t,{r:0,g:0,b:0,a:1}),e.a=Tr(e.a)),e}function Oz(t){return t.charAt(0)==="r"?Cz(t):Ez(t)}class ul{constructor(e){if(e instanceof ul)return e;const n=typeof e;let s;n==="object"?s=v_(e):n==="string"&&(s=pz(e)||Sz(e)||Oz(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=XT(this._rgb);return e&&(e.a=As(e.a)),e}set rgb(e){this._rgb=v_(e)}rgbString(){return this._valid?Pz(this._rgb):void 0}hexString(){return this._valid?mz(this._rgb):void 0}hslString(){return this._valid?kz(this._rgb):void 0}mix(e,n){if(e){const s=this.rgb,r=e.rgb;let i;const o=n===i?.5:n,a=2*o-1,l=s.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;i=1-c,s.r=255&c*s.r+i*r.r+.5,s.g=255&c*s.g+i*r.g+.5,s.b=255&c*s.b+i*r.b+.5,s.a=o*s.a+(1-o)*r.a,this.rgb=s}return this}interpolate(e,n){return e&&(this._rgb=Rz(this._rgb,e._rgb,n)),this}clone(){return new ul(this.rgb)}alpha(e){return this._rgb.a=Tr(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Nl(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return fc(this._rgb,2,e),this}darken(e){return fc(this._rgb,2,-e),this}saturate(e){return fc(this._rgb,1,e),this}desaturate(e){return fc(this._rgb,1,-e),this}rotate(e){return Tz(this._rgb,e),this}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Es(){}const Dz=(()=>{let t=0;return()=>t++})();function rt(t){return t==null}function Rt(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Je(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Bn(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function ss(t,e){return Bn(t)?t:e}function je(t,e){return typeof t>"u"?e:t}const Mz=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,JT=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function ft(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function ot(t,e,n,s){let r,i,o;if(Rt(t))for(i=t.length,r=0;r<i;r++)e.call(n,t[r],r);else if(Je(t))for(o=Object.keys(t),i=o.length,r=0;r<i;r++)e.call(n,t[o[r]],o[r])}function Ou(t,e){let n,s,r,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,s=t.length;n<s;++n)if(r=t[n],i=e[n],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function Du(t){if(Rt(t))return t.map(Du);if(Je(t)){const e=Object.create(null),n=Object.keys(t),s=n.length;let r=0;for(;r<s;++r)e[n[r]]=Du(t[n[r]]);return e}return t}function ZT(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function Nz(t,e,n,s){if(!ZT(t))return;const r=e[t],i=n[t];Je(r)&&Je(i)?dl(r,i,s):e[t]=Du(i)}function dl(t,e,n){const s=Rt(e)?e:[e],r=s.length;if(!Je(t))return t;n=n||{};const i=n.merger||Nz;let o;for(let a=0;a<r;++a){if(o=s[a],!Je(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)i(l[c],t,o,n)}return t}function La(t,e){return dl(t,e,{merger:Lz})}function Lz(t,e,n){if(!ZT(t))return;const s=e[t],r=n[t];Je(s)&&Je(r)?La(s,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Du(r))}const __={"":t=>t,x:t=>t.x,y:t=>t.y};function Vz(t){const e=t.split("."),n=[];let s="";for(const r of e)s+=r,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function $z(t){const e=Vz(t);return n=>{for(const s of e){if(s==="")break;n=n&&n[s]}return n}}function ki(t,e){return(__[e]||(__[e]=$z(e)))(t)}function Wg(t){return t.charAt(0).toUpperCase()+t.slice(1)}const hl=t=>typeof t<"u",Dr=t=>typeof t=="function",b_=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function Fz(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const _t=Math.PI,vt=2*_t,Uz=vt+_t,Mu=Number.POSITIVE_INFINITY,Bz=_t/180,Dt=_t/2,Gr=_t/4,x_=_t*2/3,ek=Math.log10,ps=Math.sign;function Va(t,e,n){return Math.abs(t-e)<n}function w_(t){const e=Math.round(t);t=Va(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(ek(t))),s=t/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function jz(t){const e=[],n=Math.sqrt(t);let s;for(s=1;s<n;s++)t%s===0&&(e.push(s),e.push(t/s));return n===(n|0)&&e.push(n),e.sort((r,i)=>r-i).pop(),e}function zz(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function fl(t){return!zz(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function Hz(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function qz(t,e,n){let s,r,i;for(s=0,r=t.length;s<r;s++)i=t[s][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function Ls(t){return t*(_t/180)}function Wz(t){return t*(180/_t)}function E_(t){if(!Bn(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function tk(t,e){const n=e.x-t.x,s=e.y-t.y,r=Math.sqrt(n*n+s*s);let i=Math.atan2(s,n);return i<-.5*_t&&(i+=vt),{angle:i,distance:r}}function ep(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Kz(t,e){return(t-e+Uz)%vt-_t}function or(t){return(t%vt+vt)%vt}function pl(t,e,n,s){const r=or(t),i=or(e),o=or(n),a=or(i-r),l=or(o-r),c=or(r-i),u=or(r-o);return r===i||r===o||s&&i===o||a>l&&c<u}function ln(t,e,n){return Math.max(e,Math.min(n,t))}function Gz(t){return ln(t,-32768,32767)}function yr(t,e,n,s=1e-6){return t>=Math.min(e,n)-s&&t<=Math.max(e,n)+s}function Kg(t,e,n){n=n||(o=>t[o]<e);let s=t.length-1,r=0,i;for(;s-r>1;)i=r+s>>1,n(i)?r=i:s=i;return{lo:r,hi:s}}const oi=(t,e,n,s)=>Kg(t,n,s?r=>{const i=t[r][e];return i<n||i===n&&t[r+1][e]===n}:r=>t[r][e]<n),Yz=(t,e,n)=>Kg(t,n,s=>t[s][e]>=n);function Qz(t,e,n){let s=0,r=t.length;for(;s<r&&t[s]<e;)s++;for(;r>s&&t[r-1]>n;)r--;return s>0||r<t.length?t.slice(s,r):t}const nk=["push","pop","shift","splice","unshift"];function Xz(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),nk.forEach(n=>{const s="_onData"+Wg(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const o=r.apply(this,i);return t._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...i)}),o}})})}function T_(t,e){const n=t._chartjs;if(!n)return;const s=n.listeners,r=s.indexOf(e);r!==-1&&s.splice(r,1),!(s.length>0)&&(nk.forEach(i=>{delete t[i]}),delete t._chartjs)}function sk(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const rk=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function ik(t,e){let n=[],s=!1;return function(...r){n=r,s||(s=!0,rk.call(window,()=>{s=!1,t.apply(e,n)}))}}function Jz(t,e){let n;return function(...s){return e?(clearTimeout(n),n=setTimeout(t,e,s)):t.apply(this,s),e}}const Gg=t=>t==="start"?"left":t==="end"?"right":"center",en=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,Zz=(t,e,n,s)=>t===(s?"left":"right")?n:t==="center"?(e+n)/2:e;function e7(t,e,n){const s=e.length;let r=0,i=s;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:h,max:f,minDefined:g,maxDefined:v}=o.getUserBounds();if(g){if(r=Math.min(oi(l,u,h).lo,n?s:oi(e,u,o.getPixelForValue(h)).lo),c){const y=l.slice(0,r+1).reverse().findIndex(_=>!rt(_[a.axis]));r-=Math.max(0,y)}r=ln(r,0,s-1)}if(v){let y=Math.max(oi(l,o.axis,f,!0).hi+1,n?0:oi(e,u,o.getPixelForValue(f),!0).hi+1);if(c){const _=l.slice(y-1).findIndex(w=>!rt(w[a.axis]));y+=Math.max(0,_)}i=ln(y,r,s)-r}else i=s-r}return{start:r,count:i}}function t7(t){const{xScale:e,yScale:n,_scaleRanges:s}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!s)return t._scaleRanges=r,!0;const i=s.xmin!==e.min||s.xmax!==e.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,r),i}const pc=t=>t===0||t===1,k_=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*vt/n)),I_=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*vt/n)+1,$a={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Dt)+1,easeOutSine:t=>Math.sin(t*Dt),easeInOutSine:t=>-.5*(Math.cos(_t*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>pc(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>pc(t)?t:k_(t,.075,.3),easeOutElastic:t=>pc(t)?t:I_(t,.075,.3),easeInOutElastic(t){return pc(t)?t:t<.5?.5*k_(t*2,.1125,.45):.5+.5*I_(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-$a.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?$a.easeInBounce(t*2)*.5:$a.easeOutBounce(t*2-1)*.5+.5};function Yg(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function S_(t){return Yg(t)?t:new ul(t)}function qh(t){return Yg(t)?t:new ul(t).saturate(.5).darken(.1).hexString()}const n7=["x","y","borderWidth","radius","tension"],s7=["color","borderColor","backgroundColor"];function r7(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:s7},numbers:{type:"number",properties:n7}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function i7(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const A_=new Map;function o7(t,e){e=e||{};const n=t+JSON.stringify(e);let s=A_.get(n);return s||(s=new Intl.NumberFormat(t,e),A_.set(n,s)),s}function Qg(t,e,n){return o7(e,n).format(t)}const a7={values(t){return Rt(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const s=this.chart.options.locale;let r,i=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),i=l7(t,n)}const o=ek(Math.abs(i)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Qg(t,s,l)}};function l7(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var ok={formatters:a7};function c7(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ok.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Ii=Object.create(null),tp=Object.create(null);function Fa(t,e){if(!e)return t;const n=e.split(".");for(let s=0,r=n.length;s<r;++s){const i=n[s];t=t[i]||(t[i]=Object.create(null))}return t}function Wh(t,e,n){return typeof e=="string"?dl(Fa(t,e),n):dl(Fa(t,""),e)}class u7{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,r)=>qh(r.backgroundColor),this.hoverBorderColor=(s,r)=>qh(r.borderColor),this.hoverColor=(s,r)=>qh(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Wh(this,e,n)}get(e){return Fa(this,e)}describe(e,n){return Wh(tp,e,n)}override(e,n){return Wh(Ii,e,n)}route(e,n,s,r){const i=Fa(this,e),o=Fa(this,s),a="_"+n;Object.defineProperties(i,{[a]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[r];return Je(l)?Object.assign({},c,l):je(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Tt=new u7({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[r7,i7,c7]);function d7(t){return!t||rt(t.size)||rt(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function C_(t,e,n,s,r){let i=e[r];return i||(i=e[r]=t.measureText(r).width,n.push(r)),i>s&&(s=i),s}function Yr(t,e,n){const s=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*s)/s+r}function P_(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function np(t,e,n,s){ak(t,e,n,s,null)}function ak(t,e,n,s,r){let i,o,a,l,c,u,h,f;const g=e.pointStyle,v=e.rotation,y=e.radius;let _=(v||0)*Bz;if(g&&typeof g=="object"&&(i=g.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,s),t.rotate(_),t.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),t.restore();return}if(!(isNaN(y)||y<=0)){switch(t.beginPath(),g){default:r?t.ellipse(n,s,r/2,y,0,0,vt):t.arc(n,s,y,0,vt),t.closePath();break;case"triangle":u=r?r/2:y,t.moveTo(n+Math.sin(_)*u,s-Math.cos(_)*y),_+=x_,t.lineTo(n+Math.sin(_)*u,s-Math.cos(_)*y),_+=x_,t.lineTo(n+Math.sin(_)*u,s-Math.cos(_)*y),t.closePath();break;case"rectRounded":c=y*.516,l=y-c,o=Math.cos(_+Gr)*l,h=Math.cos(_+Gr)*(r?r/2-c:l),a=Math.sin(_+Gr)*l,f=Math.sin(_+Gr)*(r?r/2-c:l),t.arc(n-h,s-a,c,_-_t,_-Dt),t.arc(n+f,s-o,c,_-Dt,_),t.arc(n+h,s+a,c,_,_+Dt),t.arc(n-f,s+o,c,_+Dt,_+_t),t.closePath();break;case"rect":if(!v){l=Math.SQRT1_2*y,u=r?r/2:l,t.rect(n-u,s-l,2*u,2*l);break}_+=Gr;case"rectRot":h=Math.cos(_)*(r?r/2:y),o=Math.cos(_)*y,a=Math.sin(_)*y,f=Math.sin(_)*(r?r/2:y),t.moveTo(n-h,s-a),t.lineTo(n+f,s-o),t.lineTo(n+h,s+a),t.lineTo(n-f,s+o),t.closePath();break;case"crossRot":_+=Gr;case"cross":h=Math.cos(_)*(r?r/2:y),o=Math.cos(_)*y,a=Math.sin(_)*y,f=Math.sin(_)*(r?r/2:y),t.moveTo(n-h,s-a),t.lineTo(n+h,s+a),t.moveTo(n+f,s-o),t.lineTo(n-f,s+o);break;case"star":h=Math.cos(_)*(r?r/2:y),o=Math.cos(_)*y,a=Math.sin(_)*y,f=Math.sin(_)*(r?r/2:y),t.moveTo(n-h,s-a),t.lineTo(n+h,s+a),t.moveTo(n+f,s-o),t.lineTo(n-f,s+o),_+=Gr,h=Math.cos(_)*(r?r/2:y),o=Math.cos(_)*y,a=Math.sin(_)*y,f=Math.sin(_)*(r?r/2:y),t.moveTo(n-h,s-a),t.lineTo(n+h,s+a),t.moveTo(n+f,s-o),t.lineTo(n-f,s+o);break;case"line":o=r?r/2:Math.cos(_)*y,a=Math.sin(_)*y,t.moveTo(n-o,s-a),t.lineTo(n+o,s+a);break;case"dash":t.moveTo(n,s),t.lineTo(n+Math.cos(_)*(r?r/2:y),s+Math.sin(_)*y);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function gl(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Xg(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Jg(t){t.restore()}function h7(t,e,n,s,r){if(!e)return t.lineTo(n.x,n.y);if(r==="middle"){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else r==="after"!=!!s?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function f7(t,e,n,s){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function p7(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),rt(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function g7(t,e,n,s,r){if(r.strikethrough||r.underline){const i=t.measureText(s),o=e-i.actualBoundingBoxLeft,a=e+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function m7(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function ml(t,e,n,s,r,i={}){const o=Rt(e)?e:[e],a=i.strokeWidth>0&&i.strokeColor!=="";let l,c;for(t.save(),t.font=r.string,p7(t,i),l=0;l<o.length;++l)c=o[l],i.backdrop&&m7(t,i.backdrop),a&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),rt(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(c,n,s,i.maxWidth)),t.fillText(c,n,s,i.maxWidth),g7(t,n,s,c,i),s+=Number(r.lineHeight);t.restore()}function Nu(t,e){const{x:n,y:s,w:r,h:i,radius:o}=e;t.arc(n+o.topLeft,s+o.topLeft,o.topLeft,1.5*_t,_t,!0),t.lineTo(n,s+i-o.bottomLeft),t.arc(n+o.bottomLeft,s+i-o.bottomLeft,o.bottomLeft,_t,Dt,!0),t.lineTo(n+r-o.bottomRight,s+i),t.arc(n+r-o.bottomRight,s+i-o.bottomRight,o.bottomRight,Dt,0,!0),t.lineTo(n+r,s+o.topRight),t.arc(n+r-o.topRight,s+o.topRight,o.topRight,0,-Dt,!0),t.lineTo(n+o.topLeft,s)}const y7=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,v7=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function _7(t,e){const n=(""+t).match(y7);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const b7=t=>+t||0;function Zg(t,e){const n={},s=Je(e),r=s?Object.keys(e):e,i=Je(t)?s?o=>je(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)n[o]=b7(i(o));return n}function lk(t){return Zg(t,{top:"y",right:"x",bottom:"y",left:"x"})}function oo(t){return Zg(t,["topLeft","topRight","bottomLeft","bottomRight"])}function jn(t){const e=lk(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function cn(t,e){t=t||{},e=e||Tt.font;let n=je(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let s=je(t.style,e.style);s&&!(""+s).match(v7)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const r={family:je(t.family,e.family),lineHeight:_7(je(t.lineHeight,e.lineHeight),n),size:n,style:s,weight:je(t.weight,e.weight),string:""};return r.string=d7(r),r}function gc(t,e,n,s){let r,i,o;for(r=0,i=t.length;r<i;++r)if(o=t[r],o!==void 0&&o!==void 0)return o}function x7(t,e,n){const{min:s,max:r}=t,i=JT(e,(r-s)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(s,-Math.abs(i)),max:o(r,i)}}function Ni(t,e){return Object.assign(Object.create(t),e)}function em(t,e=[""],n,s,r=()=>t[0]){const i=n||t;typeof s>"u"&&(s=hk("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:s,_getTarget:r,override:a=>em([a,...t],e,i,s)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return uk(a,l,()=>C7(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return O_(a).includes(l)},ownKeys(a){return O_(a)},set(a,l,c){const u=a._storage||(a._storage=r());return a[l]=u[l]=c,delete a._keys,!0}})}function _o(t,e,n,s){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:ck(t,s),setContext:i=>_o(t,i,n,s),override:i=>_o(t.override(i),e,n,s)};return new Proxy(r,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,a){return uk(i,o,()=>E7(i,o,a))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,a){return t[o]=a,delete i[o],!0}})}function ck(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:s=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:s,isScriptable:Dr(n)?n:()=>n,isIndexable:Dr(s)?s:()=>s}}const w7=(t,e)=>t?t+Wg(e):e,tm=(t,e)=>Je(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function uk(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const s=n();return t[e]=s,s}function E7(t,e,n){const{_proxy:s,_context:r,_subProxy:i,_descriptors:o}=t;let a=s[e];return Dr(a)&&o.isScriptable(e)&&(a=T7(e,a,t,n)),Rt(a)&&a.length&&(a=k7(e,a,t,o.isIndexable)),tm(e,a)&&(a=_o(a,r,i&&i[e],o)),a}function T7(t,e,n,s){const{_proxy:r,_context:i,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(i,o||s);return a.delete(t),tm(t,l)&&(l=nm(r._scopes,r,t,l)),l}function k7(t,e,n,s){const{_proxy:r,_context:i,_subProxy:o,_descriptors:a}=n;if(typeof i.index<"u"&&s(t))return e[i.index%e.length];if(Je(e[0])){const l=e,c=r._scopes.filter(u=>u!==l);e=[];for(const u of l){const h=nm(c,r,t,u);e.push(_o(h,i,o&&o[t],a))}}return e}function dk(t,e,n){return Dr(t)?t(e,n):t}const I7=(t,e)=>t===!0?e:typeof t=="string"?ki(e,t):void 0;function S7(t,e,n,s,r){for(const i of e){const o=I7(n,i);if(o){t.add(o);const a=dk(o._fallback,n,r);if(typeof a<"u"&&a!==n&&a!==s)return a}else if(o===!1&&typeof s<"u"&&n!==s)return null}return!1}function nm(t,e,n,s){const r=e._rootScopes,i=dk(e._fallback,n,s),o=[...t,...r],a=new Set;a.add(s);let l=R_(a,o,n,i||n,s);return l===null||typeof i<"u"&&i!==n&&(l=R_(a,o,i,l,s),l===null)?!1:em(Array.from(a),[""],r,i,()=>A7(e,n,s))}function R_(t,e,n,s,r){for(;n;)n=S7(t,e,n,s,r);return n}function A7(t,e,n){const s=t._getTarget();e in s||(s[e]={});const r=s[e];return Rt(r)&&Je(n)?n:r||{}}function C7(t,e,n,s){let r;for(const i of e)if(r=hk(w7(i,t),n),typeof r<"u")return tm(t,r)?nm(n,s,t,r):r}function hk(t,e){for(const n of e){if(!n)continue;const s=n[t];if(typeof s<"u")return s}}function O_(t){let e=t._keys;return e||(e=t._keys=P7(t._scopes)),e}function P7(t){const e=new Set;for(const n of t)for(const s of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(s);return Array.from(e)}const R7=Number.EPSILON||1e-14,bo=(t,e)=>e<t.length&&!t[e].skip&&t[e],fk=t=>t==="x"?"y":"x";function O7(t,e,n,s){const r=t.skip?e:t,i=e,o=n.skip?e:n,a=ep(i,r),l=ep(o,i);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=s*c,f=s*u;return{previous:{x:i.x-h*(o.x-r.x),y:i.y-h*(o.y-r.y)},next:{x:i.x+f*(o.x-r.x),y:i.y+f*(o.y-r.y)}}}function D7(t,e,n){const s=t.length;let r,i,o,a,l,c=bo(t,0);for(let u=0;u<s-1;++u)if(l=c,c=bo(t,u+1),!(!l||!c)){if(Va(e[u],0,R7)){n[u]=n[u+1]=0;continue}r=n[u]/e[u],i=n[u+1]/e[u],a=Math.pow(r,2)+Math.pow(i,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=r*o*e[u],n[u+1]=i*o*e[u])}}function M7(t,e,n="x"){const s=fk(n),r=t.length;let i,o,a,l=bo(t,0);for(let c=0;c<r;++c){if(o=a,a=l,l=bo(t,c+1),!a)continue;const u=a[n],h=a[s];o&&(i=(u-o[n])/3,a[`cp1${n}`]=u-i,a[`cp1${s}`]=h-i*e[c]),l&&(i=(l[n]-u)/3,a[`cp2${n}`]=u+i,a[`cp2${s}`]=h+i*e[c])}}function N7(t,e="x"){const n=fk(e),s=t.length,r=Array(s).fill(0),i=Array(s);let o,a,l,c=bo(t,0);for(o=0;o<s;++o)if(a=l,l=c,c=bo(t,o+1),!!l){if(c){const u=c[e]-l[e];r[o]=u!==0?(c[n]-l[n])/u:0}i[o]=a?c?ps(r[o-1])!==ps(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}D7(t,r,i),M7(t,i,e)}function mc(t,e,n){return Math.max(Math.min(t,n),e)}function L7(t,e){let n,s,r,i,o,a=gl(t[0],e);for(n=0,s=t.length;n<s;++n)o=i,i=a,a=n<s-1&&gl(t[n+1],e),i&&(r=t[n],o&&(r.cp1x=mc(r.cp1x,e.left,e.right),r.cp1y=mc(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=mc(r.cp2x,e.left,e.right),r.cp2y=mc(r.cp2y,e.top,e.bottom)))}function V7(t,e,n,s,r){let i,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")N7(t,r);else{let c=s?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)a=t[i],l=O7(c,a,t[Math.min(i+1,o-(s?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&L7(t,n)}function sm(){return typeof window<"u"&&typeof document<"u"}function rm(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Lu(t,e,n){let s;return typeof t=="string"?(s=parseInt(t,10),t.indexOf("%")!==-1&&(s=s/100*e.parentNode[n])):s=t,s}const $d=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function $7(t,e){return $d(t).getPropertyValue(e)}const F7=["top","right","bottom","left"];function di(t,e,n){const s={};n=n?"-"+n:"";for(let r=0;r<4;r++){const i=F7[r];s[i]=parseFloat(t[e+"-"+i+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const U7=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function B7(t,e){const n=t.touches,s=n&&n.length?n[0]:t,{offsetX:r,offsetY:i}=s;let o=!1,a,l;if(U7(r,i,t.target))a=r,l=i;else{const c=e.getBoundingClientRect();a=s.clientX-c.left,l=s.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Zr(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:s}=e,r=$d(n),i=r.boxSizing==="border-box",o=di(r,"padding"),a=di(r,"border","width"),{x:l,y:c,box:u}=B7(t,n),h=o.left+(u&&a.left),f=o.top+(u&&a.top);let{width:g,height:v}=e;return i&&(g-=o.width+a.width,v-=o.height+a.height),{x:Math.round((l-h)/g*n.width/s),y:Math.round((c-f)/v*n.height/s)}}function j7(t,e,n){let s,r;if(e===void 0||n===void 0){const i=t&&rm(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const o=i.getBoundingClientRect(),a=$d(i),l=di(a,"border","width"),c=di(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,s=Lu(a.maxWidth,i,"clientWidth"),r=Lu(a.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:s||Mu,maxHeight:r||Mu}}const yc=t=>Math.round(t*10)/10;function z7(t,e,n,s){const r=$d(t),i=di(r,"margin"),o=Lu(r.maxWidth,t,"clientWidth")||Mu,a=Lu(r.maxHeight,t,"clientHeight")||Mu,l=j7(t,e,n);let{width:c,height:u}=l;if(r.boxSizing==="content-box"){const f=di(r,"border","width"),g=di(r,"padding");c-=g.width+f.width,u-=g.height+f.height}return c=Math.max(0,c-i.width),u=Math.max(0,s?c/s:u-i.height),c=yc(Math.min(c,o,l.maxWidth)),u=yc(Math.min(u,a,l.maxHeight)),c&&!u&&(u=yc(c/2)),(e!==void 0||n!==void 0)&&s&&l.height&&u>l.height&&(u=l.height,c=yc(Math.floor(u*s))),{width:c,height:u}}function D_(t,e,n){const s=e||1,r=Math.floor(t.height*s),i=Math.floor(t.width*s);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==s||o.height!==r||o.width!==i?(t.currentDevicePixelRatio=s,o.height=r,o.width=i,t.ctx.setTransform(s,0,0,s,0,0),!0):!1}const H7=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};sm()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function M_(t,e){const n=$7(t,e),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function ei(t,e,n,s){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function q7(t,e,n,s){return{x:t.x+n*(e.x-t.x),y:s==="middle"?n<.5?t.y:e.y:s==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function W7(t,e,n,s){const r={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=ei(t,r,n),a=ei(r,i,n),l=ei(i,e,n),c=ei(o,a,n),u=ei(a,l,n);return ei(c,u,n)}const K7=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},G7=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function ao(t,e,n){return t?K7(e,n):G7()}function pk(t,e){let n,s;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=s)}function gk(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function mk(t){return t==="angle"?{between:pl,compare:Kz,normalize:or}:{between:yr,compare:(e,n)=>e-n,normalize:e=>e}}function N_({start:t,end:e,count:n,loop:s,style:r}){return{start:t%n,end:e%n,loop:s&&(e-t+1)%n===0,style:r}}function Y7(t,e,n){const{property:s,start:r,end:i}=n,{between:o,normalize:a}=mk(s),l=e.length;let{start:c,end:u,loop:h}=t,f,g;if(h){for(c+=l,u+=l,f=0,g=l;f<g&&o(a(e[c%l][s]),r,i);++f)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:h,style:t.style}}function Q7(t,e,n){if(!n)return[t];const{property:s,start:r,end:i}=n,o=e.length,{compare:a,between:l,normalize:c}=mk(s),{start:u,end:h,loop:f,style:g}=Y7(t,e,n),v=[];let y=!1,_=null,w,I,O;const L=()=>l(r,O,w)&&a(r,O)!==0,M=()=>a(i,w)===0||l(i,O,w),$=()=>y||L(),T=()=>!y||M();for(let b=u,E=u;b<=h;++b)I=e[b%o],!I.skip&&(w=c(I[s]),w!==O&&(y=l(w,r,i),_===null&&$()&&(_=a(w,r)===0?b:E),_!==null&&T()&&(v.push(N_({start:_,end:b,loop:f,count:o,style:g})),_=null),E=b,O=w));return _!==null&&v.push(N_({start:_,end:h,loop:f,count:o,style:g})),v}function X7(t,e){const n=[],s=t.segments;for(let r=0;r<s.length;r++){const i=Q7(s[r],t.points,e);i.length&&n.push(...i)}return n}function J7(t,e,n,s){let r=0,i=e-1;if(n&&!s)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(i+=r);i>r&&t[i%e].skip;)i--;return i%=e,{start:r,end:i}}function Z7(t,e,n,s){const r=t.length,i=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%r];c.skip||c.stop?a.skip||(s=!1,i.push({start:e%r,end:(l-1)%r,loop:s}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&i.push({start:e%r,end:o%r,loop:s}),i}function eH(t,e){const n=t.points,s=t.options.spanGaps,r=n.length;if(!r)return[];const i=!!t._loop,{start:o,end:a}=J7(n,r,i,s);if(s===!0)return L_(t,[{start:o,end:a,loop:i}],n,e);const l=a<o?a+r:a,c=!!t._fullLoop&&o===0&&a===r-1;return L_(t,Z7(n,o,l,c),n,e)}function L_(t,e,n,s){return!s||!s.setContext||!n?e:tH(t,e,n,s)}function tH(t,e,n,s){const r=t._chart.getContext(),i=V_(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=i,h=e[0].start,f=h;function g(v,y,_,w){const I=a?-1:1;if(v!==y){for(v+=l;n[v%l].skip;)v-=I;for(;n[y%l].skip;)y+=I;v%l!==y%l&&(c.push({start:v%l,end:y%l,loop:_,style:w}),u=w,h=y%l)}}for(const v of e){h=a?h:v.start;let y=n[h%l],_;for(f=h+1;f<=v.end;f++){const w=n[f%l];_=V_(s.setContext(Ni(r,{type:"segment",p0:y,p1:w,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),nH(_,u)&&g(h,f-1,v.loop,u),y=w,u=_}h<f-1&&g(h,f-1,v.loop,u)}return c}function V_(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function nH(t,e){if(!e)return!1;const n=[],s=function(r,i){return Yg(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(t,s)!==JSON.stringify(e,s)}function vc(t,e,n){return t.options.clip?t[n]:e[n]}function sH(t,e){const{xScale:n,yScale:s}=t;return n&&s?{left:vc(n,e,"left"),right:vc(n,e,"right"),top:vc(s,e,"top"),bottom:vc(s,e,"bottom")}:e}function rH(t,e){const n=e._clip;if(n.disabled)return!1;const s=sH(e,t.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:s.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class iH{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,s,r){const i=n.listeners[r],o=n.duration;i.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(s-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=rk.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((s,r)=>{if(!s.running||!s.items.length)return;const i=s.items;let o=i.length-1,a=!1,l;for(;o>=0;--o)l=i[o],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(r.draw(),this._notify(r,s,e,"progress")),i.length||(s.running=!1,this._notify(r,s,e,"complete"),s.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let s=n.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,s)),s}listen(e,n,s){this._getAnims(e).listeners[n].push(s)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,r)=>Math.max(s,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const s=n.items;let r=s.length-1;for(;r>=0;--r)s[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Ts=new iH;const $_="transparent",oH={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const s=S_(t||$_),r=s.valid&&S_(e||$_);return r&&r.valid?r.mix(s,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class aH{constructor(e,n,s,r){const i=n[s];r=gc([e.to,r,i,e.from]);const o=gc([e.from,i,r]);this._active=!0,this._fn=e.fn||oH[e.type||typeof o],this._easing=$a[e.easing]||$a.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=s,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,s){if(this._active){this._notify(!1);const r=this._target[this._prop],i=s-this._start,o=this._duration-i;this._start=s,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=gc([e.to,n,r,e.from]),this._from=gc([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,s=this._duration,r=this._prop,i=this._from,o=this._loop,a=this._to;let l;if(this._active=i!==a&&(o||n<s),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=i;return}l=n/s%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(i,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,s)=>{e.push({res:n,rej:s})})}_notify(e){const n=e?"res":"rej",s=this._promises||[];for(let r=0;r<s.length;r++)s[r][n]()}}class yk{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Je(e))return;const n=Object.keys(Tt.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const i=e[r];if(!Je(i))return;const o={};for(const a of n)o[a]=i[a];(Rt(i.properties)&&i.properties||[r]).forEach(a=>{(a===r||!s.has(a))&&s.set(a,o)})})}_animateOptions(e,n){const s=n.options,r=cH(e,s);if(!r)return[];const i=this._createAnimations(r,s);return s.$shared&&lH(e.options.$animations,s).then(()=>{e.options=s},()=>{}),i}_createAnimations(e,n){const s=this._properties,r=[],i=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(e,n));continue}const u=n[c];let h=i[c];const f=s.get(c);if(h)if(f&&h.active()){h.update(f,u,a);continue}else h.cancel();if(!f||!f.duration){e[c]=u;continue}i[c]=h=new aH(f,e,c,u),r.push(h)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const s=this._createAnimations(e,n);if(s.length)return Ts.add(this._chart,s),!0}}function lH(t,e){const n=[],s=Object.keys(e);for(let r=0;r<s.length;r++){const i=t[s[r]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function cH(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function F_(t,e){const n=t&&t.options||{},s=n.reverse,r=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:s?i:r,end:s?r:i}}function uH(t,e,n){if(n===!1)return!1;const s=F_(t,n),r=F_(e,n);return{top:r.end,right:s.end,bottom:r.start,left:s.start}}function dH(t){let e,n,s,r;return Je(t)?(e=t.top,n=t.right,s=t.bottom,r=t.left):e=n=s=r=t,{top:e,right:n,bottom:s,left:r,disabled:t===!1}}function vk(t,e){const n=[],s=t._getSortedDatasetMetas(e);let r,i;for(r=0,i=s.length;r<i;++r)n.push(s[r].index);return n}function U_(t,e,n,s={}){const r=t.keys,i=s.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(u=!0,s.all)continue;break}c=t.values[l],Bn(c)&&(i||e===0||ps(e)===ps(c))&&(e+=c)}return!u&&!s.all?0:e}function hH(t,e){const{iScale:n,vScale:s}=e,r=n.axis==="x"?"x":"y",i=s.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[r]:u,[i]:t[u]};return a}function Kh(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function fH(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function pH(t){const{min:e,max:n,minDefined:s,maxDefined:r}=t.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function gH(t,e,n){const s=t[e]||(t[e]={});return s[n]||(s[n]={})}function B_(t,e,n,s){for(const r of e.getMatchingVisibleMetas(s).reverse()){const i=t[r.index];if(n&&i>0||!n&&i<0)return r.index}return null}function j_(t,e){const{chart:n,_cachedMeta:s}=t,r=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:a}=s,l=i.axis,c=o.axis,u=fH(i,o,s),h=e.length;let f;for(let g=0;g<h;++g){const v=e[g],{[l]:y,[c]:_}=v,w=v._stacks||(v._stacks={});f=w[c]=gH(r,u,y),f[a]=_,f._top=B_(f,o,!0,s.type),f._bottom=B_(f,o,!1,s.type);const I=f._visualValues||(f._visualValues={});I[a]=_}}function Gh(t,e){const n=t.scales;return Object.keys(n).filter(s=>n[s].axis===e).shift()}function mH(t,e){return Ni(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function yH(t,e,n){return Ni(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function na(t,e){const n=t.controller.index,s=t.vScale&&t.vScale.axis;if(s){e=e||t._parsed;for(const r of e){const i=r._stacks;if(!i||i[s]===void 0||i[s][n]===void 0)return;delete i[s][n],i[s]._visualValues!==void 0&&i[s]._visualValues[n]!==void 0&&delete i[s]._visualValues[n]}}}const Yh=t=>t==="reset"||t==="none",z_=(t,e)=>e?t:Object.assign({},t),vH=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:vk(n,!0),values:null};class hi{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Kh(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&na(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,s=this.getDataset(),r=(h,f,g,v)=>h==="x"?f:h==="r"?v:g,i=n.xAxisID=je(s.xAxisID,Gh(e,"x")),o=n.yAxisID=je(s.yAxisID,Gh(e,"y")),a=n.rAxisID=je(s.rAxisID,Gh(e,"r")),l=n.indexAxis,c=n.iAxisID=r(l,i,o,a),u=n.vAxisID=r(l,o,i,a);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&T_(this._data,this),e._stacked&&na(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),s=this._data;if(Je(n)){const r=this._cachedMeta;this._data=hH(n,r)}else if(s!==n){if(s){T_(s,this);const r=this._cachedMeta;na(r),r._parsed=[]}n&&Object.isExtensible(n)&&Xz(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,s=this.getDataset();let r=!1;this._dataCheck();const i=n._stacked;n._stacked=Kh(n.vScale,n),n.stack!==s.stack&&(r=!0,na(n),n.stack=s.stack),this._resyncElements(e),(r||i!==n._stacked)&&(j_(this,n._parsed),n._stacked=Kh(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:s,_data:r}=this,{iScale:i,_stacked:o}=s,a=i.axis;let l=e===0&&n===r.length?!0:s._sorted,c=e>0&&s._parsed[e-1],u,h,f;if(this._parsing===!1)s._parsed=r,s._sorted=!0,f=r;else{Rt(r[e])?f=this.parseArrayData(s,r,e,n):Je(r[e])?f=this.parseObjectData(s,r,e,n):f=this.parsePrimitiveData(s,r,e,n);const g=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<n;++u)s._parsed[u+e]=h=f[u],l&&(g()&&(l=!1),c=h);s._sorted=l}o&&j_(this,f)}parsePrimitiveData(e,n,s,r){const{iScale:i,vScale:o}=e,a=i.axis,l=o.axis,c=i.getLabels(),u=i===o,h=new Array(r);let f,g,v;for(f=0,g=r;f<g;++f)v=f+s,h[f]={[a]:u||i.parse(c[v],v),[l]:o.parse(n[v],v)};return h}parseArrayData(e,n,s,r){const{xScale:i,yScale:o}=e,a=new Array(r);let l,c,u,h;for(l=0,c=r;l<c;++l)u=l+s,h=n[u],a[l]={x:i.parse(h[0],u),y:o.parse(h[1],u)};return a}parseObjectData(e,n,s,r){const{xScale:i,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(r);let u,h,f,g;for(u=0,h=r;u<h;++u)f=u+s,g=n[f],c[u]={x:i.parse(ki(g,a),f),y:o.parse(ki(g,l),f)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,s){const r=this.chart,i=this._cachedMeta,o=n[e.axis],a={keys:vk(r,!0),values:n._stacks[e.axis]._visualValues};return U_(a,o,i.index,{mode:s})}updateRangeFromParsed(e,n,s,r){const i=s[n.axis];let o=i===null?NaN:i;const a=r&&s._stacks[n.axis];r&&a&&(r.values=a,o=U_(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const s=this._cachedMeta,r=s._parsed,i=s._sorted&&e===s.iScale,o=r.length,a=this._getOtherScale(e),l=vH(n,s,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=pH(a);let f,g;function v(){g=r[f];const y=g[a.axis];return!Bn(g[e.axis])||u>y||h<y}for(f=0;f<o&&!(!v()&&(this.updateRangeFromParsed(c,e,g,l),i));++f);if(i){for(f=o-1;f>=0;--f)if(!v()){this.updateRangeFromParsed(c,e,g,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,s=[];let r,i,o;for(r=0,i=n.length;r<i;++r)o=n[r][e.axis],Bn(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,s=n.iScale,r=n.vScale,i=this.getParsed(e);return{label:s?""+s.getLabelForValue(i[s.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=dH(je(this.options.clip,uH(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,s=this._cachedMeta,r=s.data||[],i=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,c=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(e,i,a,l),u=a;u<a+l;++u){const h=r[u];h.hidden||(h.active&&c?o.push(h):h.draw(e,i))}for(u=0;u<o.length;++u)o[u].draw(e,i)}getStyle(e,n){const s=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,n,s){const r=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=yH(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=mH(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=s,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",s){const r=n==="active",i=this._cachedDataOpts,o=e+"-"+n,a=i[o],l=this.enableOptionSharing&&hl(s);if(a)return z_(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),h=r?[`${e}Hover`,"hover",e,""]:[e,""],f=c.getOptionScopes(this.getDataset(),u),g=Object.keys(Tt.elements[e]),v=()=>this.getContext(s,r,n),y=c.resolveNamedOptions(f,g,v,h);return y.$shared&&(y.$shared=l,i[o]=Object.freeze(z_(y,l))),y}_resolveAnimations(e,n,s){const r=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,a=i[o];if(a)return a;let l;if(r.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,n),f=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(f,this.getContext(e,s,n))}const c=new yk(r,l&&l.animations);return l&&l._cacheable&&(i[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Yh(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const s=this.resolveDataElementOptions(e,n),r=this._sharedOptions,i=this.getSharedOptions(s),o=this.includeOptions(n,i)||i!==r;return this.updateSharedOptions(i,n,s),{sharedOptions:i,includeOptions:o}}updateElement(e,n,s,r){Yh(r)?Object.assign(e,s):this._resolveAnimations(n,r).update(e,s)}updateSharedOptions(e,n,s){e&&!Yh(n)&&this._resolveAnimations(void 0,n).update(e,s)}_setStyle(e,n,s,r){e.active=r;const i=this.getStyle(n,r);this._resolveAnimations(n,s,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,n,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,s=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const r=s.length,i=n.length,o=Math.min(i,r);o&&this.parse(0,o),i>r?this._insertElements(r,i-r,e):i<r&&this._removeElements(i,r-i)}_insertElements(e,n,s=!0){const r=this._cachedMeta,i=r.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(i),a=e;a<o;++a)i[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,n),s&&this.updateElements(i,e,n,"reset")}updateElements(e,n,s,r){}_removeElements(e,n){const s=this._cachedMeta;if(this._parsing){const r=s._parsed.splice(e,n);s._stacked&&na(s,r)}s.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,s,r]=e;this[n](s,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}be(hi,"defaults",{}),be(hi,"datasetElementType",null),be(hi,"dataElementType",null);function _H(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let s=[];for(let r=0,i=n.length;r<i;r++)s=s.concat(n[r].controller.getAllParsedValues(t));t._cache.$bar=sk(s.sort((r,i)=>r-i))}return t._cache.$bar}function bH(t){const e=t.iScale,n=_H(e,t.type);let s=e._length,r,i,o,a;const l=()=>{o===32767||o===-32768||(hl(a)&&(s=Math.min(s,Math.abs(o-a)||s)),a=o)};for(r=0,i=n.length;r<i;++r)o=e.getPixelForValue(n[r]),l();for(a=void 0,r=0,i=e.ticks.length;r<i;++r)o=e.getPixelForTick(r),l();return s}function xH(t,e,n,s){const r=n.barThickness;let i,o;return rt(r)?(i=e.min*n.categoryPercentage,o=n.barPercentage):(i=r*s,o=1),{chunk:i/s,ratio:o,start:e.pixels[t]-i/2}}function wH(t,e,n,s){const r=e.pixels,i=r[t];let o=t>0?r[t-1]:null,a=t<r.length-1?r[t+1]:null;const l=n.categoryPercentage;o===null&&(o=i-(a===null?e.end-e.start:a-i)),a===null&&(a=i+i-o);const c=i-(i-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/s,ratio:n.barPercentage,start:c}}function EH(t,e,n,s){const r=n.parse(t[0],s),i=n.parse(t[1],s),o=Math.min(r,i),a=Math.max(r,i);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:r,end:i,min:o,max:a}}function _k(t,e,n,s){return Rt(t)?EH(t,e,n,s):e[n.axis]=n.parse(t,s),e}function H_(t,e,n,s){const r=t.iScale,i=t.vScale,o=r.getLabels(),a=r===i,l=[];let c,u,h,f;for(c=n,u=n+s;c<u;++c)f=e[c],h={},h[r.axis]=a||r.parse(o[c],c),l.push(_k(f,h,i,c));return l}function Qh(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function TH(t,e,n){return t!==0?ps(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function kH(t){let e,n,s,r,i;return t.horizontal?(e=t.base>t.x,n="left",s="right"):(e=t.base<t.y,n="bottom",s="top"),e?(r="end",i="start"):(r="start",i="end"),{start:n,end:s,reverse:e,top:r,bottom:i}}function IH(t,e,n,s){let r=e.borderSkipped;const i={};if(!r){t.borderSkipped=i;return}if(r===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=kH(t);r==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===s?r=c:(n._bottom||0)===s?r=u:(i[q_(u,o,a,l)]=!0,r=c)),i[q_(r,o,a,l)]=!0,t.borderSkipped=i}function q_(t,e,n,s){return s?(t=SH(t,e,n),t=W_(t,n,e)):t=W_(t,e,n),t}function SH(t,e,n){return t===e?n:t===n?e:t}function W_(t,e,n){return t==="start"?e:t==="end"?n:t}function AH(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class Hc extends hi{parsePrimitiveData(e,n,s,r){return H_(e,n,s,r)}parseArrayData(e,n,s,r){return H_(e,n,s,r)}parseObjectData(e,n,s,r){const{iScale:i,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=i.axis==="x"?a:l,u=o.axis==="x"?a:l,h=[];let f,g,v,y;for(f=s,g=s+r;f<g;++f)y=n[f],v={},v[i.axis]=i.parse(ki(y,c),f),h.push(_k(ki(y,u),v,o,f));return h}updateRangeFromParsed(e,n,s,r){super.updateRangeFromParsed(e,n,s,r);const i=s._custom;i&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:s,vScale:r}=n,i=this.getParsed(e),o=i._custom,a=Qh(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+s.getLabelForValue(i[s.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,s,r){const i=r==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(n,r);for(let g=n;g<n+s;g++){const v=this.getParsed(g),y=i||rt(v[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(g),_=this._calculateBarIndexPixels(g,u),w=(v._stacks||{})[a.axis],I={horizontal:c,base:y.base,enableBorderRadius:!w||Qh(v._custom)||o===w._top||o===w._bottom,x:c?y.head:_.center,y:c?_.center:y.head,height:c?_.size:Math.abs(y.size),width:c?Math.abs(y.size):_.size};f&&(I.options=h||this.resolveDataElementOptions(g,e[g].active?"active":r));const O=I.options||e[g].options;IH(I,O,w,o),AH(I,O,u.ratio),this.updateElement(e[g],g,I,r)}}_getStacks(e,n){const{iScale:s}=this._cachedMeta,r=s.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),i=s.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[s.axis],c=u=>{const h=u._parsed.find(g=>g[s.axis]===l),f=h&&h[u.vScale.axis];if(rt(f)||isNaN(f))return!0};for(const u of r)if(!(n!==void 0&&c(u))&&((i===!1||o.indexOf(u.stack)===-1||i===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,s){const r=this._getStacks(e,s),i=n!==void 0?r.indexOf(n):-1;return i===-1?r.length-1:i}_getRuler(){const e=this.options,n=this._cachedMeta,s=n.iScale,r=[];let i,o;for(i=0,o=n.data.length;i<o;++i)r.push(s.getPixelForValue(this.getParsed(i)[s.axis],i));const a=e.barThickness;return{min:a||bH(n),pixels:r,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:s,index:r},options:{base:i,minBarLength:o}}=this,a=i||0,l=this.getParsed(e),c=l._custom,u=Qh(c);let h=l[n.axis],f=0,g=s?this.applyStack(n,l,s):h,v,y;g!==h&&(f=g-h,g=h),u&&(h=c.barStart,g=c.barEnd-c.barStart,h!==0&&ps(h)!==ps(c.barEnd)&&(f=0),f+=h);const _=!rt(i)&&!u?i:f;let w=n.getPixelForValue(_);if(this.chart.getDataVisibility(e)?v=n.getPixelForValue(f+g):v=w,y=v-w,Math.abs(y)<o){y=TH(y,n,a)*o,h===a&&(w-=y/2);const I=n.getPixelForDecimal(0),O=n.getPixelForDecimal(1),L=Math.min(I,O),M=Math.max(I,O);w=Math.max(Math.min(w,M),L),v=w+y,s&&!u&&(l._stacks[n.axis]._visualValues[r]=n.getValueForPixel(v)-n.getValueForPixel(w))}if(w===n.getPixelForValue(a)){const I=ps(y)*n.getLineWidthForValue(a)/2;w+=I,y-=I}return{size:y,base:w,head:v,center:v+y/2}}_calculateBarIndexPixels(e,n){const s=n.scale,r=this.options,i=r.skipNull,o=je(r.maxBarThickness,1/0);let a,l;if(n.grouped){const c=i?this._getStackCount(e):n.stackCount,u=r.barThickness==="flex"?wH(e,n,r,c):xH(e,n,r,c),h=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0);a=u.start+u.chunk*h+u.chunk/2,l=Math.min(o,u.chunk*u.ratio)}else a=s.getPixelForValue(this.getParsed(e)[s.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,s=e.data,r=s.length;let i=0;for(;i<r;++i)this.getParsed(i)[n.axis]!==null&&!s[i].hidden&&s[i].draw(this._ctx)}}be(Hc,"id","bar"),be(Hc,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),be(Hc,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function CH(t,e,n){let s=1,r=1,i=0,o=0;if(e<vt){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),h=Math.cos(l),f=Math.sin(l),g=(O,L,M)=>pl(O,a,l,!0)?1:Math.max(L,L*n,M,M*n),v=(O,L,M)=>pl(O,a,l,!0)?-1:Math.min(L,L*n,M,M*n),y=g(0,c,h),_=g(Dt,u,f),w=v(_t,c,h),I=v(_t+Dt,u,f);s=(y-w)/2,r=(_-I)/2,i=-(y+w)/2,o=-(_+I)/2}return{ratioX:s,ratioY:r,offsetX:i,offsetY:o}}class ga extends hi{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const s=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=s;else{let i=l=>+s[l];if(Je(s[e])){const{key:l="value"}=this._parsing;i=c=>+ki(s[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)r._parsed[o]=i(o)}}_getRotation(){return Ls(this.options.rotation-90)}_getCircumference(){return Ls(this.options.circumference)}_getRotationExtents(){let e=vt,n=-vt;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const r=this.chart.getDatasetMeta(s).controller,i=r._getRotation(),o=r._getCircumference();e=Math.min(e,i),n=Math.max(n,i+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:s}=n,r=this._cachedMeta,i=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,a=Math.max((Math.min(s.width,s.height)-o)/2,0),l=Math.min(Mz(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:g,offsetX:v,offsetY:y}=CH(h,u,l),_=(s.width-o)/f,w=(s.height-o)/g,I=Math.max(Math.min(_,w)/2,0),O=JT(this.options.radius,I),L=Math.max(O*l,0),M=(O-L)/this._getVisibleDatasetWeightTotal();this.offsetX=v*O,this.offsetY=y*O,r.total=this.calculateTotal(),this.outerRadius=O-M*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-M*c,0),this.updateElements(i,0,i.length,e)}_circumference(e,n){const s=this.options,r=this._cachedMeta,i=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*i/vt)}updateElements(e,n,s,r){const i=r==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,h=(a.top+a.bottom)/2,f=i&&c.animateScale,g=f?0:this.innerRadius,v=f?0:this.outerRadius,{sharedOptions:y,includeOptions:_}=this._getSharedOptions(n,r);let w=this._getRotation(),I;for(I=0;I<n;++I)w+=this._circumference(I,i);for(I=n;I<n+s;++I){const O=this._circumference(I,i),L=e[I],M={x:u+this.offsetX,y:h+this.offsetY,startAngle:w,endAngle:w+O,circumference:O,outerRadius:v,innerRadius:g};_&&(M.options=y||this.resolveDataElementOptions(I,L.active?"active":r)),w+=O,this.updateElement(L,I,M,r)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let s=0,r;for(r=0;r<n.length;r++){const i=e._parsed[r];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(r)&&!n[r].hidden&&(s+=Math.abs(i))}return s}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?vt*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,s=this.chart,r=s.data.labels||[],i=Qg(n._parsed[e],s.options.locale);return{label:r[e]||"",value:i}}getMaxBorderWidth(e){let n=0;const s=this.chart;let r,i,o,a,l;if(!e){for(r=0,i=s.data.datasets.length;r<i;++r)if(s.isDatasetVisible(r)){o=s.getDatasetMeta(r),e=o.data,a=o.controller;break}}if(!e)return 0;for(r=0,i=e.length;r<i;++r)l=a.resolveDataElementOptions(r),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let s=0,r=e.length;s<r;++s){const i=this.resolveDataElementOptions(s);n=Math.max(n,i.offset||0,i.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(e){return Math.max(je(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}be(ga,"id","doughnut"),be(ga,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),be(ga,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),be(ga,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:s,color:r}}=e.legend.options;return n.labels.map((i,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:i,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:r,lineWidth:l.borderWidth,pointStyle:s,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}});class qc extends hi{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:s,data:r=[],_dataset:i}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=e7(n,r,o);this._drawStart=a,this._drawCount=l,t7(n)&&(a=0,l=r.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!i._decimated,s.points=r;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(s,void 0,{animated:!o,options:c},e),this.updateElements(r,a,l,e)}updateElements(e,n,s,r){const i=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(n,r),f=o.axis,g=a.axis,{spanGaps:v,segment:y}=this.options,_=fl(v)?v:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||i||r==="none",I=n+s,O=e.length;let L=n>0&&this.getParsed(n-1);for(let M=0;M<O;++M){const $=e[M],T=w?$:{};if(M<n||M>=I){T.skip=!0;continue}const b=this.getParsed(M),E=rt(b[g]),A=T[f]=o.getPixelForValue(b[f],M),k=T[g]=i||E?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,b,l):b[g],M);T.skip=isNaN(A)||isNaN(k)||E,T.stop=M>0&&Math.abs(b[f]-L[f])>_,y&&(T.parsed=b,T.raw=c.data[M]),h&&(T.options=u||this.resolveDataElementOptions(M,$.active?"active":r)),w||this.updateElement($,M,T,r),L=b}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,s=n.options&&n.options.borderWidth||0,r=e.data||[];if(!r.length)return s;const i=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}be(qc,"id","line"),be(qc,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),be(qc,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class sp extends ga{}be(sp,"id","pie"),be(sp,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});function Qr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class im{constructor(e){be(this,"options");this.options=e||{}}static override(e){Object.assign(im.prototype,e)}init(){}formats(){return Qr()}parse(){return Qr()}format(){return Qr()}add(){return Qr()}diff(){return Qr()}startOf(){return Qr()}endOf(){return Qr()}}var PH={_date:im};function RH(t,e,n,s){const{controller:r,data:i,_sorted:o}=t,a=r._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&i.length){const c=a._reversePixels?Yz:oi;if(s){if(r._sharedOptions){const u=i[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const f=c(i,e,n-h),g=c(i,e,n+h);return{lo:f.lo,hi:g.hi}}}}else{const u=c(i,e,n);if(l){const{vScale:h}=r._cachedMeta,{_parsed:f}=t,g=f.slice(0,u.lo+1).reverse().findIndex(y=>!rt(y[h.axis]));u.lo-=Math.max(0,g);const v=f.slice(u.hi).findIndex(y=>!rt(y[h.axis]));u.hi+=Math.max(0,v)}return u}}return{lo:0,hi:i.length-1}}function Fd(t,e,n,s,r){const i=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=i.length;a<l;++a){const{index:c,data:u}=i[a],{lo:h,hi:f}=RH(i[a],e,o,r);for(let g=h;g<=f;++g){const v=u[g];v.skip||s(v,c,g)}}}function OH(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(s,r){const i=e?Math.abs(s.x-r.x):0,o=n?Math.abs(s.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function Xh(t,e,n,s,r){const i=[];return!r&&!t.isPointInArea(e)||Fd(t,n,e,function(a,l,c){!r&&!gl(a,t.chartArea,0)||a.inRange(e.x,e.y,s)&&i.push({element:a,datasetIndex:l,index:c})},!0),i}function DH(t,e,n,s){let r=[];function i(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],s),{angle:h}=tk(o,{x:e.x,y:e.y});pl(h,c,u)&&r.push({element:o,datasetIndex:a,index:l})}return Fd(t,n,e,i),r}function MH(t,e,n,s,r,i){let o=[];const a=OH(n);let l=Number.POSITIVE_INFINITY;function c(u,h,f){const g=u.inRange(e.x,e.y,r);if(s&&!g)return;const v=u.getCenterPoint(r);if(!(!!i||t.isPointInArea(v))&&!g)return;const _=a(e,v);_<l?(o=[{element:u,datasetIndex:h,index:f}],l=_):_===l&&o.push({element:u,datasetIndex:h,index:f})}return Fd(t,n,e,c),o}function Jh(t,e,n,s,r,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!s?DH(t,e,n,r):MH(t,e,n,s,r,i)}function K_(t,e,n,s,r){const i=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Fd(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],r)&&(i.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,r))}),s&&!a?[]:i}var NH={modes:{index(t,e,n,s){const r=Zr(e,t),i=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Xh(t,r,i,s,o):Jh(t,r,i,!1,s,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,s){const r=Zr(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Xh(t,r,i,s,o):Jh(t,r,i,!1,s,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,s){const r=Zr(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return Xh(t,r,i,s,o)},nearest(t,e,n,s){const r=Zr(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return Jh(t,r,i,n.intersect,s,o)},x(t,e,n,s){const r=Zr(e,t);return K_(t,r,"x",n.intersect,s)},y(t,e,n,s){const r=Zr(e,t);return K_(t,r,"y",n.intersect,s)}}};const bk=["left","top","right","bottom"];function sa(t,e){return t.filter(n=>n.pos===e)}function G_(t,e){return t.filter(n=>bk.indexOf(n.pos)===-1&&n.box.axis===e)}function ra(t,e){return t.sort((n,s)=>{const r=e?s:n,i=e?n:s;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function LH(t){const e=[];let n,s,r,i,o,a;for(n=0,s=(t||[]).length;n<s;++n)r=t[n],{position:i,options:{stack:o,stackWeight:a=1}}=r,e.push({index:n,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&i+o,stackWeight:a});return e}function VH(t){const e={};for(const n of t){const{stack:s,pos:r,stackWeight:i}=n;if(!s||!bk.includes(r))continue;const o=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function $H(t,e){const n=VH(t),{vBoxMaxWidth:s,hBoxMaxHeight:r}=e;let i,o,a;for(i=0,o=t.length;i<o;++i){a=t[i];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*s:l&&e.availableWidth,a.height=r):(a.width=s,a.height=u?u*r:l&&e.availableHeight)}return n}function FH(t){const e=LH(t),n=ra(e.filter(c=>c.box.fullSize),!0),s=ra(sa(e,"left"),!0),r=ra(sa(e,"right")),i=ra(sa(e,"top"),!0),o=ra(sa(e,"bottom")),a=G_(e,"x"),l=G_(e,"y");return{fullSize:n,leftAndTop:s.concat(i),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:sa(e,"chartArea"),vertical:s.concat(r).concat(l),horizontal:i.concat(o).concat(a)}}function Y_(t,e,n,s){return Math.max(t[n],e[n])+Math.max(t[s],e[s])}function xk(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function UH(t,e,n,s){const{pos:r,box:i}=n,o=t.maxPadding;if(!Je(r)){n.size&&(t[r]-=n.size);const h=s[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?i.height:i.width),n.size=h.size/h.count,t[r]+=n.size}i.getPadding&&xk(o,i.getPadding());const a=Math.max(0,e.outerWidth-Y_(o,t,"left","right")),l=Math.max(0,e.outerHeight-Y_(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function BH(t){const e=t.maxPadding;function n(s){const r=Math.max(e[s]-t[s],0);return t[s]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function jH(t,e){const n=e.maxPadding;function s(r){const i={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{i[o]=Math.max(e[o],n[o])}),i}return s(t?["left","right"]:["top","bottom"])}function ma(t,e,n,s){const r=[];let i,o,a,l,c,u;for(i=0,o=t.length,c=0;i<o;++i){a=t[i],l=a.box,l.update(a.width||e.w,a.height||e.h,jH(a.horizontal,e));const{same:h,other:f}=UH(e,n,a,s);c|=h&&r.length,u=u||f,l.fullSize||r.push(a)}return c&&ma(r,e,n,s)||u}function _c(t,e,n,s,r){t.top=n,t.left=e,t.right=e+s,t.bottom=n+r,t.width=s,t.height=r}function Q_(t,e,n,s){const r=n.padding;let{x:i,y:o}=e;for(const a of t){const l=a.box,c=s[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=e.w*u,f=c.size||l.height;hl(c.start)&&(o=c.start),l.fullSize?_c(l,r.left,o,n.outerWidth-r.right-r.left,f):_c(l,e.left+c.placed,o,h,f),c.start=o,c.placed+=h,o=l.bottom}else{const h=e.h*u,f=c.size||l.width;hl(c.start)&&(i=c.start),l.fullSize?_c(l,i,r.top,f,n.outerHeight-r.bottom-r.top):_c(l,i,e.top+c.placed,f,h),c.start=i,c.placed+=h,i=l.right}}e.x=i,e.y=o}var Nn={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,s){if(!t)return;const r=jn(t.options.layout.padding),i=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=FH(t.boxes),l=a.vertical,c=a.horizontal;ot(t.boxes,y=>{typeof y.beforeLayout=="function"&&y.beforeLayout()});const u=l.reduce((y,_)=>_.box.options&&_.box.options.display===!1?y:y+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/u,hBoxMaxHeight:o/2}),f=Object.assign({},r);xk(f,jn(s));const g=Object.assign({maxPadding:f,w:i,h:o,x:r.left,y:r.top},r),v=$H(l.concat(c),h);ma(a.fullSize,g,h,v),ma(l,g,h,v),ma(c,g,h,v)&&ma(l,g,h,v),BH(g),Q_(a.leftAndTop,g,h,v),g.x+=g.w,g.y+=g.h,Q_(a.rightAndBottom,g,h,v),t.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},ot(a.chartArea,y=>{const _=y.box;Object.assign(_,t.chartArea),_.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class wk{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,s){}removeEventListener(e,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,s,r){return n=Math.max(0,n||e.width),s=s||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):s)}}isAttached(e){return!0}updateConfig(e){}}class zH extends wk{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Wc="$chartjs",HH={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},X_=t=>t===null||t==="";function qH(t,e){const n=t.style,s=t.getAttribute("height"),r=t.getAttribute("width");if(t[Wc]={initial:{height:s,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",X_(r)){const i=M_(t,"width");i!==void 0&&(t.width=i)}if(X_(s))if(t.style.height==="")t.height=t.width/(e||2);else{const i=M_(t,"height");i!==void 0&&(t.height=i)}return t}const Ek=H7?{passive:!0}:!1;function WH(t,e,n){t&&t.addEventListener(e,n,Ek)}function KH(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,Ek)}function GH(t,e){const n=HH[t.type]||t.type,{x:s,y:r}=Zr(t,e);return{type:n,chart:e,native:t,x:s!==void 0?s:null,y:r!==void 0?r:null}}function Vu(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function YH(t,e,n){const s=t.canvas,r=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||Vu(a.addedNodes,s),o=o&&!Vu(a.removedNodes,s);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function QH(t,e,n){const s=t.canvas,r=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||Vu(a.removedNodes,s),o=o&&!Vu(a.addedNodes,s);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const yl=new Map;let J_=0;function Tk(){const t=window.devicePixelRatio;t!==J_&&(J_=t,yl.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function XH(t,e){yl.size||window.addEventListener("resize",Tk),yl.set(t,e)}function JH(t){yl.delete(t),yl.size||window.removeEventListener("resize",Tk)}function ZH(t,e,n){const s=t.canvas,r=s&&rm(s);if(!r)return;const i=ik((a,l)=>{const c=r.clientWidth;n(a,l),c<r.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||i(c,u)});return o.observe(r),XH(t,i),o}function Zh(t,e,n){n&&n.disconnect(),e==="resize"&&JH(t)}function eq(t,e,n){const s=t.canvas,r=ik(i=>{t.ctx!==null&&n(GH(i,t))},t);return WH(s,e,r),r}class tq extends wk{acquireContext(e,n){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(qH(e,n),s):null}releaseContext(e){const n=e.canvas;if(!n[Wc])return!1;const s=n[Wc].initial;["height","width"].forEach(i=>{const o=s[i];rt(o)?n.removeAttribute(i):n.setAttribute(i,o)});const r=s.style||{};return Object.keys(r).forEach(i=>{n.style[i]=r[i]}),n.width=n.width,delete n[Wc],!0}addEventListener(e,n,s){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),o={attach:YH,detach:QH,resize:ZH}[n]||eq;r[n]=o(e,n,s)}removeEventListener(e,n){const s=e.$proxies||(e.$proxies={}),r=s[n];if(!r)return;({attach:Zh,detach:Zh,resize:Zh}[n]||KH)(e,n,r),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,s,r){return z7(e,n,s,r)}isAttached(e){const n=e&&rm(e);return!!(n&&n.isConnected)}}function nq(t){return!sm()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?zH:tq}var kc;let Qs=(kc=class{constructor(){be(this,"x");be(this,"y");be(this,"active",!1);be(this,"options");be(this,"$animations")}tooltipPosition(e){const{x:n,y:s}=this.getProps(["x","y"],e);return{x:n,y:s}}hasValue(){return fl(this.x)&&fl(this.y)}getProps(e,n){const s=this.$animations;if(!n||!s)return this;const r={};return e.forEach(i=>{r[i]=s[i]&&s[i].active()?s[i]._to:this[i]}),r}},be(kc,"defaults",{}),be(kc,"defaultRoutes"),kc);function sq(t,e){const n=t.options.ticks,s=rq(t),r=Math.min(n.maxTicksLimit||s,s),i=n.major.enabled?oq(e):[],o=i.length,a=i[0],l=i[o-1],c=[];if(o>r)return aq(e,c,i,o/r),c;const u=iq(i,e,r);if(o>0){let h,f;const g=o>1?Math.round((l-a)/(o-1)):null;for(bc(e,c,u,rt(g)?0:a-g,a),h=0,f=o-1;h<f;h++)bc(e,c,u,i[h],i[h+1]);return bc(e,c,u,l,rt(g)?e.length:l+g),c}return bc(e,c,u),c}function rq(t){const e=t.options.offset,n=t._tickSize(),s=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(s,r))}function iq(t,e,n){const s=lq(t),r=e.length/n;if(!s)return Math.max(r,1);const i=jz(s);for(let o=0,a=i.length-1;o<a;o++){const l=i[o];if(l>r)return l}return Math.max(r,1)}function oq(t){const e=[];let n,s;for(n=0,s=t.length;n<s;n++)t[n].major&&e.push(n);return e}function aq(t,e,n,s){let r=0,i=n[0],o;for(s=Math.ceil(s),o=0;o<t.length;o++)o===i&&(e.push(t[o]),r++,i=n[r*s])}function bc(t,e,n,s,r){const i=je(s,0),o=Math.min(je(r,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),r&&(l=r-s,n=l/Math.floor(l/n)),u=i;u<0;)a++,u=Math.round(i+a*n);for(c=Math.max(i,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(i+a*n))}function lq(t){const e=t.length;let n,s;if(e<2)return!1;for(s=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==s)return!1;return s}const cq=t=>t==="left"?"right":t==="right"?"left":t,Z_=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,eb=(t,e)=>Math.min(e||t,t);function tb(t,e){const n=[],s=t.length/e,r=t.length;let i=0;for(;i<r;i+=s)n.push(t[Math.floor(i)]);return n}function uq(t,e,n){const s=t.ticks.length,r=Math.min(e,s-1),i=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(r),c;if(!(n&&(s===1?c=Math.max(l-i,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(r-1))/2,l+=r<e?c:-c,l<i-a||l>o+a)))return l}function dq(t,e){ot(t,n=>{const s=n.gc,r=s.length/2;let i;if(r>e){for(i=0;i<r;++i)delete n.data[s[i]];s.splice(0,r)}})}function ia(t){return t.drawTicks?t.tickLength:0}function nb(t,e){if(!t.display)return 0;const n=cn(t.font,e),s=jn(t.padding);return(Rt(t.text)?t.text.length:1)*n.lineHeight+s.height}function hq(t,e){return Ni(t,{scale:e,type:"scale"})}function fq(t,e,n){return Ni(t,{tick:n,index:e,type:"tick"})}function pq(t,e,n){let s=Gg(t);return(n&&e!=="right"||!n&&e==="right")&&(s=cq(s)),s}function gq(t,e,n,s){const{top:r,left:i,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let h=0,f,g,v;const y=o-r,_=a-i;if(t.isHorizontal()){if(g=en(s,i,a),Je(n)){const w=Object.keys(n)[0],I=n[w];v=u[w].getPixelForValue(I)+y-e}else n==="center"?v=(c.bottom+c.top)/2+y-e:v=Z_(t,n,e);f=a-i}else{if(Je(n)){const w=Object.keys(n)[0],I=n[w];g=u[w].getPixelForValue(I)-_+e}else n==="center"?g=(c.left+c.right)/2-_+e:g=Z_(t,n,e);v=en(s,o,r),h=n==="left"?-Dt:Dt}return{titleX:g,titleY:v,maxWidth:f,rotation:h}}class Vo extends Qs{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:s,_suggestedMax:r}=this;return e=ss(e,Number.POSITIVE_INFINITY),n=ss(n,Number.NEGATIVE_INFINITY),s=ss(s,Number.POSITIVE_INFINITY),r=ss(r,Number.NEGATIVE_INFINITY),{min:ss(e,s),max:ss(n,r),minDefined:Bn(e),maxDefined:Bn(n)}}getMinMax(e){let{min:n,max:s,minDefined:r,maxDefined:i}=this.getUserBounds(),o;if(r&&i)return{min:n,max:s};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),r||(n=Math.min(n,o.min)),i||(s=Math.max(s,o.max));return n=i&&n>s?s:n,s=r&&n>s?n:s,{min:ss(n,ss(s,n)),max:ss(s,ss(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ft(this.options.beforeUpdate,[this])}update(e,n,s){const{beginAtZero:r,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=x7(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?tb(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=sq(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,e=!e),this._startPixel=n,this._endPixel=s,this._reversePixels=e,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ft(this.options.afterUpdate,[this])}beforeSetDimensions(){ft(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ft(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ft(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ft(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let s,r,i;for(s=0,r=e.length;s<r;s++)i=e[s],i.label=ft(n.callback,[i.value,s,e],this)}afterTickToLabelConversion(){ft(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ft(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,s=eb(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,i=n.maxRotation;let o=r,a,l,c;if(!this._isVisible()||!n.display||r>=i||s<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),h=u.widest.width,f=u.highest.height,g=ln(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/s:g/(s-1),h+6>a&&(a=g/(s-(e.offset?.5:1)),l=this.maxHeight-ia(e.grid)-n.padding-nb(e.title,this.chart.options.font),c=Math.sqrt(h*h+f*f),o=Wz(Math.min(Math.asin(ln((u.highest.height+6)/a,-1,1)),Math.asin(ln(l/c,-1,1))-Math.asin(ln(f/c,-1,1)))),o=Math.max(r,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){ft(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ft(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:s,title:r,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=nb(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=ia(i)+l):(e.height=this.maxHeight,e.width=ia(i)+l),s.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:f}=this._getLabelSizes(),g=s.padding*2,v=Ls(this.labelRotation),y=Math.cos(v),_=Math.sin(v);if(a){const w=s.mirror?0:_*h.width+y*f.height;e.height=Math.min(this.maxHeight,e.height+w+g)}else{const w=s.mirror?0:y*h.width+_*f.height;e.width=Math.min(this.maxWidth,e.width+w+g)}this._calculatePadding(c,u,_,y)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,s,r){const{ticks:{align:i,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,g=0;l?c?(f=r*e.width,g=s*n.height):(f=s*e.height,g=r*n.width):i==="start"?g=n.width:i==="end"?f=e.width:i!=="inner"&&(f=e.width/2,g=n.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((g-h+o)*this.width/(this.width-h),0)}else{let u=n.height/2,h=e.height/2;i==="start"?(u=0,h=e.height):i==="end"&&(u=n.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ft(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,s;for(n=0,s=e.length;n<s;n++)rt(e[n].label)&&(e.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=tb(s,n)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,s){const{ctx:r,_longestTextCache:i}=this,o=[],a=[],l=Math.floor(n/eb(n,s));let c=0,u=0,h,f,g,v,y,_,w,I,O,L,M;for(h=0;h<n;h+=l){if(v=e[h].label,y=this._resolveTickFontOptions(h),r.font=_=y.string,w=i[_]=i[_]||{data:{},gc:[]},I=y.lineHeight,O=L=0,!rt(v)&&!Rt(v))O=C_(r,w.data,w.gc,O,v),L=I;else if(Rt(v))for(f=0,g=v.length;f<g;++f)M=v[f],!rt(M)&&!Rt(M)&&(O=C_(r,w.data,w.gc,O,M),L+=I);o.push(O),a.push(L),c=Math.max(O,c),u=Math.max(L,u)}dq(i,n);const $=o.indexOf(c),T=a.indexOf(u),b=E=>({width:o[E]||0,height:a[E]||0});return{first:b(0),last:b(n-1),widest:b($),highest:b(T),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return Gz(this._alignToPixels?Yr(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const s=n[e];return s.$context||(s.$context=fq(this.getContext(),e,s))}return this.$context||(this.$context=hq(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Ls(this.labelRotation),s=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,a=i?i.widest.width+o:0,l=i?i.highest.height+o:0;return this.isHorizontal()?l*s>a*r?a/s:l/r:l*r<a*s?l/s:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,s=this.chart,r=this.options,{grid:i,position:o,border:a}=r,l=i.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),f=ia(i),g=[],v=a.setContext(this.getContext()),y=v.display?v.width:0,_=y/2,w=function(we){return Yr(s,we,y)};let I,O,L,M,$,T,b,E,A,k,S,R;if(o==="top")I=w(this.bottom),T=this.bottom-f,E=I-_,k=w(e.top)+_,R=e.bottom;else if(o==="bottom")I=w(this.top),k=e.top,R=w(e.bottom)-_,T=I+_,E=this.top+f;else if(o==="left")I=w(this.right),$=this.right-f,b=I-_,A=w(e.left)+_,S=e.right;else if(o==="right")I=w(this.left),A=e.left,S=w(e.right)-_,$=I+_,b=this.left+f;else if(n==="x"){if(o==="center")I=w((e.top+e.bottom)/2+.5);else if(Je(o)){const we=Object.keys(o)[0],he=o[we];I=w(this.chart.scales[we].getPixelForValue(he))}k=e.top,R=e.bottom,T=I+_,E=T+f}else if(n==="y"){if(o==="center")I=w((e.left+e.right)/2);else if(Je(o)){const we=Object.keys(o)[0],he=o[we];I=w(this.chart.scales[we].getPixelForValue(he))}$=I-_,b=$-f,A=e.left,S=e.right}const me=je(r.ticks.maxTicksLimit,h),Ee=Math.max(1,Math.ceil(h/me));for(O=0;O<h;O+=Ee){const we=this.getContext(O),he=i.setContext(we),Pe=a.setContext(we),Qe=he.lineWidth,xt=he.color,At=Pe.dash||[],Ze=Pe.dashOffset,ne=he.tickWidth,le=he.tickColor,Ae=he.tickBorderDash||[],Be=he.tickBorderDashOffset;L=uq(this,O,l),L!==void 0&&(M=Yr(s,L,Qe),c?$=b=A=S=M:T=E=k=R=M,g.push({tx1:$,ty1:T,tx2:b,ty2:E,x1:A,y1:k,x2:S,y2:R,width:Qe,color:xt,borderDash:At,borderDashOffset:Ze,tickWidth:ne,tickColor:le,tickBorderDash:Ae,tickBorderDashOffset:Be}))}return this._ticksLength=h,this._borderValue=I,g}_computeLabelItems(e){const n=this.axis,s=this.options,{position:r,ticks:i}=s,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=i,f=ia(s.grid),g=f+u,v=h?-u:g,y=-Ls(this.labelRotation),_=[];let w,I,O,L,M,$,T,b,E,A,k,S,R="middle";if(r==="top")$=this.bottom-v,T=this._getXAxisLabelAlignment();else if(r==="bottom")$=this.top+v,T=this._getXAxisLabelAlignment();else if(r==="left"){const Ee=this._getYAxisLabelAlignment(f);T=Ee.textAlign,M=Ee.x}else if(r==="right"){const Ee=this._getYAxisLabelAlignment(f);T=Ee.textAlign,M=Ee.x}else if(n==="x"){if(r==="center")$=(e.top+e.bottom)/2+g;else if(Je(r)){const Ee=Object.keys(r)[0],we=r[Ee];$=this.chart.scales[Ee].getPixelForValue(we)+g}T=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")M=(e.left+e.right)/2-g;else if(Je(r)){const Ee=Object.keys(r)[0],we=r[Ee];M=this.chart.scales[Ee].getPixelForValue(we)}T=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?R="top":l==="end"&&(R="bottom"));const me=this._getLabelSizes();for(w=0,I=a.length;w<I;++w){O=a[w],L=O.label;const Ee=i.setContext(this.getContext(w));b=this.getPixelForTick(w)+i.labelOffset,E=this._resolveTickFontOptions(w),A=E.lineHeight,k=Rt(L)?L.length:1;const we=k/2,he=Ee.color,Pe=Ee.textStrokeColor,Qe=Ee.textStrokeWidth;let xt=T;o?(M=b,T==="inner"&&(w===I-1?xt=this.options.reverse?"left":"right":w===0?xt=this.options.reverse?"right":"left":xt="center"),r==="top"?c==="near"||y!==0?S=-k*A+A/2:c==="center"?S=-me.highest.height/2-we*A+A:S=-me.highest.height+A/2:c==="near"||y!==0?S=A/2:c==="center"?S=me.highest.height/2-we*A:S=me.highest.height-k*A,h&&(S*=-1),y!==0&&!Ee.showLabelBackdrop&&(M+=A/2*Math.sin(y))):($=b,S=(1-k)*A/2);let At;if(Ee.showLabelBackdrop){const Ze=jn(Ee.backdropPadding),ne=me.heights[w],le=me.widths[w];let Ae=S-Ze.top,Be=0-Ze.left;switch(R){case"middle":Ae-=ne/2;break;case"bottom":Ae-=ne;break}switch(T){case"center":Be-=le/2;break;case"right":Be-=le;break;case"inner":w===I-1?Be-=le:w>0&&(Be-=le/2);break}At={left:Be,top:Ae,width:le+Ze.width,height:ne+Ze.height,color:Ee.backdropColor}}_.push({label:L,font:E,textOffset:S,options:{rotation:y,color:he,strokeColor:Pe,strokeWidth:Qe,textAlign:xt,textBaseline:R,translation:[M,$],backdrop:At}})}return _}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Ls(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:s,mirror:r,padding:i}}=this.options,o=this._getLabelSizes(),a=e+i,l=o.widest.width;let c,u;return n==="left"?r?(u=this.right+i,s==="near"?c="left":s==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,s==="near"?c="right":s==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?r?(u=this.left+i,s==="near"?c="right":s==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,s==="near"?c="left":s==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:s,top:r,width:i,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(s,r,i,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(i=>i.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,s=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const a=(l,c,u)=>{!u.width||!u.color||(s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(c.x,c.y),s.stroke(),s.restore())};if(n.display)for(i=0,o=r.length;i<o;++i){const l=r[i];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:s,grid:r}}=this,i=s.setContext(this.getContext()),o=s.display?i.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,f;this.isHorizontal()?(c=Yr(e,this.left,o)-o/2,u=Yr(e,this.right,a)+a/2,h=f=l):(h=Yr(e,this.top,o)-o/2,f=Yr(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(c,h),n.lineTo(u,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,r=this._computeLabelArea();r&&Xg(s,r);const i=this.getLabelItems(e);for(const o of i){const a=o.options,l=o.font,c=o.label,u=o.textOffset;ml(s,c,0,u,l,a)}r&&Jg(s)}drawTitle(){const{ctx:e,options:{position:n,title:s,reverse:r}}=this;if(!s.display)return;const i=cn(s.font),o=jn(s.padding),a=s.align;let l=i.lineHeight/2;n==="bottom"||n==="center"||Je(n)?(l+=o.bottom,Rt(s.text)&&(l+=i.lineHeight*(s.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:h,rotation:f}=gq(this,l,n,a);ml(e,s.text,0,0,i,{color:s.color,maxWidth:h,rotation:f,textAlign:pq(a,n,r),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,s=je(e.grid&&e.grid.z,-1),r=je(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Vo.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:s,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",r=[];let i,o;for(i=0,o=n.length;i<o;++i){const a=n[i];a[s]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return cn(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class xc{constructor(e,n,s){this.type=e,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let s;vq(n)&&(s=this.register(n));const r=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,mq(e,o,s),this.override&&Tt.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,s=e.id,r=this.scope;s in n&&delete n[s],r&&s in Tt[r]&&(delete Tt[r][s],this.override&&delete Ii[s])}}function mq(t,e,n){const s=dl(Object.create(null),[n?Tt.get(n):{},Tt.get(e),t.defaults]);Tt.set(e,s),t.defaultRoutes&&yq(e,t.defaultRoutes),t.descriptors&&Tt.describe(e,t.descriptors)}function yq(t,e){Object.keys(e).forEach(n=>{const s=n.split("."),r=s.pop(),i=[t].concat(s).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Tt.route(i,r,l,a)})}function vq(t){return"id"in t&&"defaults"in t}class _q{constructor(){this.controllers=new xc(hi,"datasets",!0),this.elements=new xc(Qs,"elements"),this.plugins=new xc(Object,"plugins"),this.scales=new xc(Vo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,s){[...n].forEach(r=>{const i=s||this._getRegistryForType(r);s||i.isForType(r)||i===this.plugins&&r.id?this._exec(e,i,r):ot(r,o=>{const a=s||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,s){const r=Wg(e);ft(s["before"+r],[],s),n[e](s),ft(s["after"+r],[],s)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(e))return s}return this.plugins}_get(e,n,s){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return r}}var os=new _q;class bq{constructor(){this._init=[]}notify(e,n,s,r){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(i,e,n,s);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,s,r){r=r||{};for(const i of e){const o=i.plugin,a=o[s],l=[n,r,i.options];if(ft(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){rt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const s=e&&e.config,r=je(s.options&&s.options.plugins,{}),i=xq(s);return r===!1&&!n?[]:Eq(e,i,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],s=this._cache,r=(i,o)=>i.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,s),e,"stop"),this._notify(r(s,n),e,"start")}}function xq(t){const e={},n=[],s=Object.keys(os.plugins.items);for(let i=0;i<s.length;i++)n.push(os.getPlugin(s[i]));const r=t.plugins||[];for(let i=0;i<r.length;i++){const o=r[i];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function wq(t,e){return!e&&t===!1?null:t===!0?{}:t}function Eq(t,{plugins:e,localIds:n},s,r){const i=[],o=t.getContext();for(const a of e){const l=a.id,c=wq(s[l],r);c!==null&&i.push({plugin:a,options:Tq(t.config,{plugin:a,local:n[l]},c,o)})}return i}function Tq(t,{plugin:e,local:n},s,r){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(s,i);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function rp(t,e){const n=Tt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function kq(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function Iq(t,e){return t===e?"_index_":"_value_"}function sb(t){if(t==="x"||t==="y"||t==="r")return t}function Sq(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function ip(t,...e){if(sb(t))return t;for(const n of e){const s=n.axis||Sq(n.position)||t.length>1&&sb(t[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function rb(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function Aq(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(s=>s.xAxisID===t||s.yAxisID===t);if(n.length)return rb(t,"x",n[0])||rb(t,"y",n[0])}return{}}function Cq(t,e){const n=Ii[t.type]||{scales:{}},s=e.scales||{},r=rp(t.type,e),i=Object.create(null);return Object.keys(s).forEach(o=>{const a=s[o];if(!Je(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=ip(o,a,Aq(o,t),Tt.scales[a.type]),c=Iq(l,r),u=n.scales||{};i[o]=La(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||rp(a,e),u=(Ii[a]||{}).scales||{};Object.keys(u).forEach(h=>{const f=kq(h,l),g=o[f+"AxisID"]||f;i[g]=i[g]||Object.create(null),La(i[g],[{axis:f},s[g],u[h]])})}),Object.keys(i).forEach(o=>{const a=i[o];La(a,[Tt.scales[a.type],Tt.scale])}),i}function kk(t){const e=t.options||(t.options={});e.plugins=je(e.plugins,{}),e.scales=Cq(t,e)}function Ik(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function Pq(t){return t=t||{},t.data=Ik(t.data),kk(t),t}const ib=new Map,Sk=new Set;function wc(t,e){let n=ib.get(t);return n||(n=e(),ib.set(t,n),Sk.add(n)),n}const oa=(t,e,n)=>{const s=ki(e,n);s!==void 0&&t.add(s)};class Rq{constructor(e){this._config=Pq(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Ik(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),kk(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return wc(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return wc(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return wc(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,s=this.type;return wc(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const s=this._scopeCache;let r=s.get(e);return(!r||n)&&(r=new Map,s.set(e,r)),r}getOptionScopes(e,n,s){const{options:r,type:i}=this,o=this._cachedScopes(e,s),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(h=>oa(l,e,h))),u.forEach(h=>oa(l,r,h)),u.forEach(h=>oa(l,Ii[i]||{},h)),u.forEach(h=>oa(l,Tt,h)),u.forEach(h=>oa(l,tp,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Sk.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Ii[n]||{},Tt.datasets[n]||{},{type:n},Tt,tp]}resolveNamedOptions(e,n,s,r=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=ob(this._resolverCache,e,r);let l=o;if(Dq(o,n)){i.$shared=!1,s=Dr(s)?s():s;const c=this.createResolver(e,s,a);l=_o(o,s,c)}for(const c of n)i[c]=l[c];return i}createResolver(e,n,s=[""],r){const{resolver:i}=ob(this._resolverCache,e,s);return Je(n)?_o(i,n,void 0,r):i}}function ob(t,e,n){let s=t.get(e);s||(s=new Map,t.set(e,s));const r=n.join();let i=s.get(r);return i||(i={resolver:em(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},s.set(r,i)),i}const Oq=t=>Je(t)&&Object.getOwnPropertyNames(t).some(e=>Dr(t[e]));function Dq(t,e){const{isScriptable:n,isIndexable:s}=ck(t);for(const r of e){const i=n(r),o=s(r),a=(o||i)&&t[r];if(i&&(Dr(a)||Oq(a))||o&&Rt(a))return!0}return!1}var Mq="4.4.9";const Nq=["top","bottom","left","right","chartArea"];function ab(t,e){return t==="top"||t==="bottom"||Nq.indexOf(t)===-1&&e==="x"}function lb(t,e){return function(n,s){return n[t]===s[t]?n[e]-s[e]:n[t]-s[t]}}function cb(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),ft(n&&n.onComplete,[t],e)}function Lq(t){const e=t.chart,n=e.options.animation;ft(n&&n.onProgress,[t],e)}function Ak(t){return sm()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Kc={},ub=t=>{const e=Ak(t);return Object.values(Kc).filter(n=>n.canvas===e).pop()};function Vq(t,e,n){const s=Object.keys(t);for(const r of s){const i=+r;if(i>=e){const o=t[r];delete t[r],(n>0||i>e)&&(t[i+n]=o)}}}function $q(t,e,n,s){return!n||t.type==="mouseout"?null:s?e:t}var rr;let Ud=(rr=class{static register(...e){os.add(...e),db()}static unregister(...e){os.remove(...e),db()}constructor(e,n){const s=this.config=new Rq(n),r=Ak(e),i=ub(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||nq(r)),this.platform.updateConfig(s);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=Dz(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new bq,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Jz(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],Kc[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Ts.listen(this,"complete",cb),Ts.listen(this,"progress",Lq),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:s,height:r,_aspectRatio:i}=this;return rt(e)?n&&i?i:r?s/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return os}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():D_(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return P_(this.canvas,this.ctx),this}stop(){return Ts.stop(this),this}resize(e,n){Ts.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const s=this.options,r=this.canvas,i=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,n,i),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,D_(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),ft(s.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};ot(n,(s,r)=>{s.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,s=this.scales,r=Object.keys(s).reduce((o,a)=>(o[a]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const a=n[o],l=ip(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),ot(i,o=>{const a=o.options,l=a.id,c=ip(l,a),u=je(a.type,o.dtype);(a.position===void 0||ab(a.position,c)!==ab(o.dposition))&&(a.position=o.dposition),r[l]=!0;let h=null;if(l in s&&s[l].type===u)h=s[l];else{const f=os.getScale(u);h=new f({id:l,type:u,ctx:this.ctx,chart:this}),s[h.id]=h}h.init(a,e)}),ot(r,(o,a)=>{o||delete s[a]}),ot(s,o=>{Nn.configure(this,o,o.options),Nn.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,s=e.length;if(e.sort((r,i)=>r.index-i.index),s>n){for(let r=n;r<s;++r)this._destroyDatasetMeta(r);e.splice(n,s-n)}this._sortedMetasets=e.slice(0).sort(lb("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((s,r)=>{n.filter(i=>i===s._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let s,r;for(this._removeUnreferencedMetasets(),s=0,r=n.length;s<r;s++){const i=n[s];let o=this.getDatasetMeta(s);const a=i.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=a,o.indexAxis=i.indexAxis||rp(a,this.options),o.order=i.order||0,o.index=s,o.label=""+i.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const l=os.getController(a),{datasetElementType:c,dataElementType:u}=Tt.datasets[a];Object.assign(l,{dataElementType:os.getElement(u),datasetElementType:c&&os.getElement(c)}),o.controller=new l(this,s),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){ot(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),f=!r&&i.indexOf(h)===-1;h.buildOrUpdateElements(f),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),r||ot(i,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(lb("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){ot(this.scales,e=>{Nn.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!b_(n,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:r,count:i}of n){const o=s==="_removeElements"?-i:i;Vq(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=i=>new Set(e.filter(o=>o[0]===i).map((o,a)=>a+","+o.splice(1).join(","))),r=s(0);for(let i=1;i<n;i++)if(!b_(r,s(i)))return;return Array.from(r).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Nn.update(this,this.width,this.height,e);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],ot(this.boxes,r=>{s&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,i)=>{r._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,Dr(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const s=this.getDatasetMeta(e),r={meta:s,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(s.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ts.has(this)?this.attached&&!Ts.running(this)&&Ts.start(this):(this.draw(),cb({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,s=[];let r,i;for(r=0,i=n.length;r<i;++r){const o=n[r];(!e||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,s={meta:e,index:e.index,cancelable:!0},r=rH(this,e);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(r&&Xg(n,r),e.controller.draw(),r&&Jg(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return gl(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,s,r){const i=NH.modes[n];return typeof i=="function"?i(this,e,s,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],s=this._metasets;let r=s.filter(i=>i&&i._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},s.push(r)),r}getContext(){return this.$context||(this.$context=Ni(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(e,n){const s=this.getDatasetMeta(e);s.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,s){const r=s?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,r);hl(n)?(i.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),o.update(i,{visible:s}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Ts.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),P_(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Kc[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,s=(i,o)=>{n.addEventListener(this,i,o),e[i]=o},r=(i,o,a)=>{i.offsetX=o,i.offsetY=a,this._eventHandler(i)};ot(this.options.events,i=>s(i,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,s=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},r=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},i=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),s("resize",i),s("detach",o)};o=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),s("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){ot(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},ot(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,s){const r=s?"set":"remove";let i,o,a,l;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],s=e.map(({datasetIndex:i,index:o})=>{const a=this.getDatasetMeta(i);if(!a)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:a.data[o],index:o}});!Ou(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(e,n,s){return this._plugins.notify(this,e,n,s)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,s){const r=this.options.hover,i=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=i(n,e),a=s?e:i(e,n);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const s={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,r)===!1)return;const i=this._handleEvent(e,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,r),(i||s.changed)&&this.render(),this}_handleEvent(e,n,s){const{_active:r=[],options:i}=this,o=n,a=this._getActiveElements(e,r,s,o),l=Fz(e),c=$q(e,this._lastEvent,s,l);s&&(this._lastEvent=null,ft(i.onHover,[e,a,this],this),l&&ft(i.onClick,[e,a,this],this));const u=!Ou(a,r);return(u||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=c,u}_getActiveElements(e,n,s,r){if(e.type==="mouseout")return[];if(!s)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}},be(rr,"defaults",Tt),be(rr,"instances",Kc),be(rr,"overrides",Ii),be(rr,"registry",os),be(rr,"version",Mq),be(rr,"getChart",ub),rr);function db(){return ot(Ud.instances,t=>t._plugins.invalidate())}function Fq(t,e,n){const{startAngle:s,pixelMargin:r,x:i,y:o,outerRadius:a,innerRadius:l}=e;let c=r/a;t.beginPath(),t.arc(i,o,a,s-c,n+c),l>r?(c=r/l,t.arc(i,o,l,n+c,s-c,!0)):t.arc(i,o,r,n+Dt,s-Dt),t.closePath(),t.clip()}function Uq(t){return Zg(t,["outerStart","outerEnd","innerStart","innerEnd"])}function Bq(t,e,n,s){const r=Uq(t.options.borderRadius),i=(n-e)/2,o=Math.min(i,s*e/2),a=l=>{const c=(n-Math.min(i,l))*s/2;return ln(l,0,Math.min(i,c))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:ln(r.innerStart,0,o),innerEnd:ln(r.innerEnd,0,o)}}function zi(t,e,n,s){return{x:n+t*Math.cos(e),y:s+t*Math.sin(e)}}function $u(t,e,n,s,r,i){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,h=Math.max(e.outerRadius+s+n-c,0),f=u>0?u+s+n+c:0;let g=0;const v=r-l;if(s){const Ee=u>0?u-s:0,we=h>0?h-s:0,he=(Ee+we)/2,Pe=he!==0?v*he/(he+s):v;g=(v-Pe)/2}const y=Math.max(.001,v*h-n/_t)/h,_=(v-y)/2,w=l+_+g,I=r-_-g,{outerStart:O,outerEnd:L,innerStart:M,innerEnd:$}=Bq(e,f,h,I-w),T=h-O,b=h-L,E=w+O/T,A=I-L/b,k=f+M,S=f+$,R=w+M/k,me=I-$/S;if(t.beginPath(),i){const Ee=(E+A)/2;if(t.arc(o,a,h,E,Ee),t.arc(o,a,h,Ee,A),L>0){const Qe=zi(b,A,o,a);t.arc(Qe.x,Qe.y,L,A,I+Dt)}const we=zi(S,I,o,a);if(t.lineTo(we.x,we.y),$>0){const Qe=zi(S,me,o,a);t.arc(Qe.x,Qe.y,$,I+Dt,me+Math.PI)}const he=(I-$/f+(w+M/f))/2;if(t.arc(o,a,f,I-$/f,he,!0),t.arc(o,a,f,he,w+M/f,!0),M>0){const Qe=zi(k,R,o,a);t.arc(Qe.x,Qe.y,M,R+Math.PI,w-Dt)}const Pe=zi(T,w,o,a);if(t.lineTo(Pe.x,Pe.y),O>0){const Qe=zi(T,E,o,a);t.arc(Qe.x,Qe.y,O,w-Dt,E)}}else{t.moveTo(o,a);const Ee=Math.cos(E)*h+o,we=Math.sin(E)*h+a;t.lineTo(Ee,we);const he=Math.cos(A)*h+o,Pe=Math.sin(A)*h+a;t.lineTo(he,Pe)}t.closePath()}function jq(t,e,n,s,r){const{fullCircles:i,startAngle:o,circumference:a}=e;let l=e.endAngle;if(i){$u(t,e,n,s,l,r);for(let c=0;c<i;++c)t.fill();isNaN(a)||(l=o+(a%vt||vt))}return $u(t,e,n,s,l,r),t.fill(),l}function zq(t,e,n,s,r){const{fullCircles:i,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:f}=l,g=l.borderAlign==="inner";if(!c)return;t.setLineDash(h||[]),t.lineDashOffset=f,g?(t.lineWidth=c*2,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let v=e.endAngle;if(i){$u(t,e,n,s,v,r);for(let y=0;y<i;++y)t.stroke();isNaN(a)||(v=o+(a%vt||vt))}g&&Fq(t,e,v),i||($u(t,e,n,s,v,r),t.stroke())}class ya extends Qs{constructor(n){super();be(this,"circumference");be(this,"endAngle");be(this,"fullCircles");be(this,"innerRadius");be(this,"outerRadius");be(this,"pixelMargin");be(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,s,r){const i=this.getProps(["x","y"],r),{angle:o,distance:a}=tk(i,{x:n,y:s}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:h,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),g=(this.options.spacing+this.options.borderWidth)/2,v=je(f,c-l),y=pl(o,l,c)&&l!==c,_=v>=vt||y,w=yr(a,u+g,h+g);return _&&w}getCenterPoint(n){const{x:s,y:r,startAngle:i,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:u}=this.options,h=(i+o)/2,f=(a+l+u+c)/2;return{x:s+Math.cos(h)*f,y:r+Math.sin(h)*f}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:s,circumference:r}=this,i=(s.offset||0)/4,o=(s.spacing||0)/2,a=s.circular;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=r>vt?Math.floor(r/vt):0,r===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*i,Math.sin(l)*i);const c=1-Math.sin(Math.min(_t,r||0)),u=i*c;n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,jq(n,this,u,o,a),zq(n,this,u,o,a),n.restore()}}be(ya,"id","arc"),be(ya,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),be(ya,"defaultRoutes",{backgroundColor:"backgroundColor"}),be(ya,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function Ck(t,e,n=e){t.lineCap=je(n.borderCapStyle,e.borderCapStyle),t.setLineDash(je(n.borderDash,e.borderDash)),t.lineDashOffset=je(n.borderDashOffset,e.borderDashOffset),t.lineJoin=je(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=je(n.borderWidth,e.borderWidth),t.strokeStyle=je(n.borderColor,e.borderColor)}function Hq(t,e,n){t.lineTo(n.x,n.y)}function qq(t){return t.stepped?h7:t.tension||t.cubicInterpolationMode==="monotone"?f7:Hq}function Pk(t,e,n={}){const s=t.length,{start:r=0,end:i=s-1}=n,{start:o,end:a}=e,l=Math.max(r,o),c=Math.min(i,a),u=r<o&&i<o||r>a&&i>a;return{count:s,start:l,loop:e.loop,ilen:c<l&&!u?s+c-l:c-l}}function Wq(t,e,n,s){const{points:r,options:i}=e,{count:o,start:a,loop:l,ilen:c}=Pk(r,n,s),u=qq(i);let{move:h=!0,reverse:f}=s||{},g,v,y;for(g=0;g<=c;++g)v=r[(a+(f?c-g:g))%o],!v.skip&&(h?(t.moveTo(v.x,v.y),h=!1):u(t,y,v,f,i.stepped),y=v);return l&&(v=r[(a+(f?c:0))%o],u(t,y,v,f,i.stepped)),!!l}function Kq(t,e,n,s){const r=e.points,{count:i,start:o,ilen:a}=Pk(r,n,s),{move:l=!0,reverse:c}=s||{};let u=0,h=0,f,g,v,y,_,w;const I=L=>(o+(c?a-L:L))%i,O=()=>{y!==_&&(t.lineTo(u,_),t.lineTo(u,y),t.lineTo(u,w))};for(l&&(g=r[I(0)],t.moveTo(g.x,g.y)),f=0;f<=a;++f){if(g=r[I(f)],g.skip)continue;const L=g.x,M=g.y,$=L|0;$===v?(M<y?y=M:M>_&&(_=M),u=(h*u+L)/++h):(O(),t.lineTo(L,M),v=$,h=0,y=_=M),w=M}O()}function op(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?Kq:Wq}function Gq(t){return t.stepped?q7:t.tension||t.cubicInterpolationMode==="monotone"?W7:ei}function Yq(t,e,n,s){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,s)&&r.closePath()),Ck(t,e.options),t.stroke(r)}function Qq(t,e,n,s){const{segments:r,options:i}=e,o=op(e);for(const a of r)Ck(t,i,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+s-1})&&t.closePath(),t.stroke()}const Xq=typeof Path2D=="function";function Jq(t,e,n,s){Xq&&!e.options.segment?Yq(t,e,n,s):Qq(t,e,n,s)}class va extends Qs{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const r=s.spanGaps?this._loop:this._fullLoop;V7(this._points,s,e,r,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=eH(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,s=e.length;return s&&n[e[s-1].end]}interpolate(e,n){const s=this.options,r=e[n],i=this.points,o=X7(this,{property:n,start:r,end:r});if(!o.length)return;const a=[],l=Gq(s);let c,u;for(c=0,u=o.length;c<u;++c){const{start:h,end:f}=o[c],g=i[h],v=i[f];if(g===v){a.push(g);continue}const y=Math.abs((r-g[n])/(v[n]-g[n])),_=l(g,v,y,s.stepped);_[n]=e[n],a.push(_)}return a.length===1?a[0]:a}pathSegment(e,n,s){return op(this)(e,this,n,s)}path(e,n,s){const r=this.segments,i=op(this);let o=this._loop;n=n||0,s=s||this.points.length-n;for(const a of r)o&=i(e,this,a,{start:n,end:n+s-1});return!!o}draw(e,n,s,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),Jq(e,this,s,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}be(va,"id","line"),be(va,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),be(va,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),be(va,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function hb(t,e,n,s){const r=t.options,{[n]:i}=t.getProps([n],s);return Math.abs(e-i)<r.radius+r.hitRadius}class Gc extends Qs{constructor(n){super();be(this,"parsed");be(this,"skip");be(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,s,r){const i=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(n-o,2)+Math.pow(s-a,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(n,s){return hb(this,n,"x",s)}inYRange(n,s){return hb(this,n,"y",s)}getCenterPoint(n){const{x:s,y:r}=this.getProps(["x","y"],n);return{x:s,y:r}}size(n){n=n||this.options||{};let s=n.radius||0;s=Math.max(s,s&&n.hoverRadius||0);const r=s&&n.borderWidth||0;return(s+r)*2}draw(n,s){const r=this.options;this.skip||r.radius<.1||!gl(this,s,this.size(r)/2)||(n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.fillStyle=r.backgroundColor,np(n,r,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}be(Gc,"id","point"),be(Gc,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),be(Gc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function Rk(t,e){const{x:n,y:s,base:r,width:i,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,h;return t.horizontal?(h=o/2,a=Math.min(n,r),l=Math.max(n,r),c=s-h,u=s+h):(h=i/2,a=n-h,l=n+h,c=Math.min(s,r),u=Math.max(s,r)),{left:a,top:c,right:l,bottom:u}}function vr(t,e,n,s){return t?0:ln(e,n,s)}function Zq(t,e,n){const s=t.options.borderWidth,r=t.borderSkipped,i=lk(s);return{t:vr(r.top,i.top,0,n),r:vr(r.right,i.right,0,e),b:vr(r.bottom,i.bottom,0,n),l:vr(r.left,i.left,0,e)}}function eW(t,e,n){const{enableBorderRadius:s}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,i=oo(r),o=Math.min(e,n),a=t.borderSkipped,l=s||Je(r);return{topLeft:vr(!l||a.top||a.left,i.topLeft,0,o),topRight:vr(!l||a.top||a.right,i.topRight,0,o),bottomLeft:vr(!l||a.bottom||a.left,i.bottomLeft,0,o),bottomRight:vr(!l||a.bottom||a.right,i.bottomRight,0,o)}}function tW(t){const e=Rk(t),n=e.right-e.left,s=e.bottom-e.top,r=Zq(t,n/2,s/2),i=eW(t,n/2,s/2);return{outer:{x:e.left,y:e.top,w:n,h:s,radius:i},inner:{x:e.left+r.l,y:e.top+r.t,w:n-r.l-r.r,h:s-r.t-r.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,i.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(r.b,r.r))}}}}function ef(t,e,n,s){const r=e===null,i=n===null,a=t&&!(r&&i)&&Rk(t,s);return a&&(r||yr(e,a.left,a.right))&&(i||yr(n,a.top,a.bottom))}function nW(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function sW(t,e){t.rect(e.x,e.y,e.w,e.h)}function tf(t,e,n={}){const s=t.x!==n.x?-e:0,r=t.y!==n.y?-e:0,i=(t.x+t.w!==n.x+n.w?e:0)-s,o=(t.y+t.h!==n.y+n.h?e:0)-r;return{x:t.x+s,y:t.y+r,w:t.w+i,h:t.h+o,radius:t.radius}}class Yc extends Qs{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:s,backgroundColor:r}}=this,{inner:i,outer:o}=tW(this),a=nW(o.radius)?Nu:sW;e.save(),(o.w!==i.w||o.h!==i.h)&&(e.beginPath(),a(e,tf(o,n,i)),e.clip(),a(e,tf(i,-n,o)),e.fillStyle=s,e.fill("evenodd")),e.beginPath(),a(e,tf(i,n)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,n,s){return ef(this,e,n,s)}inXRange(e,n){return ef(this,e,null,n)}inYRange(e,n){return ef(this,null,e,n)}getCenterPoint(e){const{x:n,y:s,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(n+r)/2:n,y:i?s:(s+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}be(Yc,"id","bar"),be(Yc,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),be(Yc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const fb=(t,e)=>{let{boxHeight:n=e,boxWidth:s=e}=t;return t.usePointStyle&&(n=Math.min(n,e),s=t.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(e,n)}},rW=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class pb extends Qs{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,s){this.maxWidth=e,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=ft(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(s=>e.filter(s,this.chart.data))),e.sort&&(n=n.sort((s,r)=>e.sort(s,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,r=cn(s.font),i=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=fb(s,i);let c,u;n.font=r.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,i,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,s,r){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=r+a;let h=e;i.textAlign="left",i.textBaseline="middle";let f=-1,g=-u;return this.legendItems.forEach((v,y)=>{const _=s+n/2+i.measureText(v.text).width;(y===0||c[c.length-1]+_+2*a>o)&&(h+=u,c[c.length-(y>0?0:1)]=0,g+=u,f++),l[y]={left:0,top:g,row:f,width:_,height:r},c[c.length-1]+=_+a}),h}_fitCols(e,n,s,r){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let h=a,f=0,g=0,v=0,y=0;return this.legendItems.forEach((_,w)=>{const{itemWidth:I,itemHeight:O}=iW(s,n,i,_,r);w>0&&g+O+2*a>u&&(h+=f+a,c.push({width:f,height:g}),v+=f+a,y++,f=g=0),l[w]={left:v,top:g,col:y,width:I,height:O},f=Math.max(f,I),g+=O+a}),h+=f,c.push({width:f,height:g}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:r},rtl:i}}=this,o=ao(i,this.left,this.width);if(this.isHorizontal()){let a=0,l=en(s,this.left+r,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=en(s,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+e+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=en(s,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=en(s,this.top+e+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Xg(e,this),this._draw(),Jg(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:s,ctx:r}=this,{align:i,labels:o}=e,a=Tt.color,l=ao(e.rtl,this.left,this.width),c=cn(o.font),{padding:u}=o,h=c.size,f=h/2;let g;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:v,boxHeight:y,itemHeight:_}=fb(o,h),w=function($,T,b){if(isNaN(v)||v<=0||isNaN(y)||y<0)return;r.save();const E=je(b.lineWidth,1);if(r.fillStyle=je(b.fillStyle,a),r.lineCap=je(b.lineCap,"butt"),r.lineDashOffset=je(b.lineDashOffset,0),r.lineJoin=je(b.lineJoin,"miter"),r.lineWidth=E,r.strokeStyle=je(b.strokeStyle,a),r.setLineDash(je(b.lineDash,[])),o.usePointStyle){const A={radius:y*Math.SQRT2/2,pointStyle:b.pointStyle,rotation:b.rotation,borderWidth:E},k=l.xPlus($,v/2),S=T+f;ak(r,A,k,S,o.pointStyleWidth&&v)}else{const A=T+Math.max((h-y)/2,0),k=l.leftForLtr($,v),S=oo(b.borderRadius);r.beginPath(),Object.values(S).some(R=>R!==0)?Nu(r,{x:k,y:A,w:v,h:y,radius:S}):r.rect(k,A,v,y),r.fill(),E!==0&&r.stroke()}r.restore()},I=function($,T,b){ml(r,b.text,$,T+_/2,c,{strikethrough:b.hidden,textAlign:l.textAlign(b.textAlign)})},O=this.isHorizontal(),L=this._computeTitleHeight();O?g={x:en(i,this.left+u,this.right-s[0]),y:this.top+u+L,line:0}:g={x:this.left+u,y:en(i,this.top+L+u,this.bottom-n[0].height),line:0},pk(this.ctx,e.textDirection);const M=_+u;this.legendItems.forEach(($,T)=>{r.strokeStyle=$.fontColor,r.fillStyle=$.fontColor;const b=r.measureText($.text).width,E=l.textAlign($.textAlign||($.textAlign=o.textAlign)),A=v+f+b;let k=g.x,S=g.y;l.setWidth(this.width),O?T>0&&k+A+u>this.right&&(S=g.y+=M,g.line++,k=g.x=en(i,this.left+u,this.right-s[g.line])):T>0&&S+M>this.bottom&&(k=g.x=k+n[g.line].width+u,g.line++,S=g.y=en(i,this.top+L+u,this.bottom-n[g.line].height));const R=l.x(k);if(w(R,S,$),k=Zz(E,k+v+f,O?k+A:this.right,e.rtl),I(l.x(k),S,$),O)g.x+=A+u;else if(typeof $.text!="string"){const me=c.lineHeight;g.y+=Ok($,me)+u}else g.y+=M}),gk(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,s=cn(n.font),r=jn(n.padding);if(!n.display)return;const i=ao(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=s.size/2,c=r.top+l;let u,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+c,h=en(e.align,h,this.right-f);else{const v=this.columnSizes.reduce((y,_)=>Math.max(y,_.height),0);u=c+en(e.align,this.top,this.bottom-v-e.labels.padding-this._computeTitleHeight())}const g=en(a,h,h+f);o.textAlign=i.textAlign(Gg(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=s.string,ml(o,n.text,g,u,s)}_computeTitleHeight(){const e=this.options.title,n=cn(e.font),s=jn(e.padding);return e.display?n.lineHeight+s.height:0}_getLegendItemAt(e,n){let s,r,i;if(yr(e,this.left,this.right)&&yr(n,this.top,this.bottom)){for(i=this.legendHitBoxes,s=0;s<i.length;++s)if(r=i[s],yr(e,r.left,r.left+r.width)&&yr(n,r.top,r.top+r.height))return this.legendItems[s]}return null}handleEvent(e){const n=this.options;if(!lW(e.type,n))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,i=rW(r,s);r&&!i&&ft(n.onLeave,[e,r,this],this),this._hoveredItem=s,s&&!i&&ft(n.onHover,[e,s,this],this)}else s&&ft(n.onClick,[e,s,this],this)}}function iW(t,e,n,s,r){const i=oW(s,t,e,n),o=aW(r,s,e.lineHeight);return{itemWidth:i,itemHeight:o}}function oW(t,e,n,s){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((i,o)=>i.length>o.length?i:o)),e+n.size/2+s.measureText(r).width}function aW(t,e,n){let s=t;return typeof e.text!="string"&&(s=Ok(e,n)),s}function Ok(t,e){const n=t.text?t.text.length:0;return e*n}function lW(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var cW={id:"legend",_element:pb,start(t,e,n){const s=t.legend=new pb({ctx:t.ctx,options:n,chart:t});Nn.configure(t,s,n),Nn.addBox(t,s)},stop(t){Nn.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const s=t.legend;Nn.configure(t,s,n),s.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const s=e.datasetIndex,r=n.chart;r.isDatasetVisible(s)?(r.hide(s),e.hidden=!0):(r.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:r,color:i,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=jn(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:s||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Dk extends Qs{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const r=Rt(s.text)?s.text.length:1;this._padding=jn(s.padding);const i=r*cn(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:s,bottom:r,right:i,options:o}=this,a=o.align;let l=0,c,u,h;return this.isHorizontal()?(u=en(a,s,i),h=n+e,c=i-s):(o.position==="left"?(u=s+e,h=en(a,r,n),l=_t*-.5):(u=i-e,h=en(a,n,r),l=_t*.5),c=r-n),{titleX:u,titleY:h,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const s=cn(n.font),i=s.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(i);ml(e,n.text,0,0,s,{color:n.color,maxWidth:l,rotation:c,textAlign:Gg(n.align),textBaseline:"middle",translation:[o,a]})}}function uW(t,e){const n=new Dk({ctx:t.ctx,options:e,chart:t});Nn.configure(t,n,e),Nn.addBox(t,n),t.titleBlock=n}var dW={id:"title",_element:Dk,start(t,e,n){uW(t,n)},stop(t){const e=t.titleBlock;Nn.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const s=t.titleBlock;Nn.configure(t,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const _a={average(t){if(!t.length)return!1;let e,n,s=new Set,r=0,i=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();s.add(l.x),r+=l.y,++i}}return i===0||s.size===0?!1:{x:[...s].reduce((a,l)=>a+l)/s.size,y:r/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,s=e.y,r=Number.POSITIVE_INFINITY,i,o,a;for(i=0,o=t.length;i<o;++i){const l=t[i].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=ep(e,c);u<r&&(r=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,s=l.y}return{x:n,y:s}}};function rs(t,e){return e&&(Rt(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function ks(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function hW(t,e){const{element:n,datasetIndex:s,index:r}=e,i=t.getDatasetMeta(s).controller,{label:o,value:a}=i.getLabelAndValue(r);return{chart:t,label:o,parsed:i.getParsed(r),raw:t.data.datasets[s].data[r],formattedValue:a,dataset:i.getDataset(),dataIndex:r,datasetIndex:s,element:n}}function gb(t,e){const n=t.chart.ctx,{body:s,footer:r,title:i}=t,{boxWidth:o,boxHeight:a}=e,l=cn(e.bodyFont),c=cn(e.titleFont),u=cn(e.footerFont),h=i.length,f=r.length,g=s.length,v=jn(e.padding);let y=v.height,_=0,w=s.reduce((L,M)=>L+M.before.length+M.lines.length+M.after.length,0);if(w+=t.beforeBody.length+t.afterBody.length,h&&(y+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),w){const L=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;y+=g*L+(w-g)*l.lineHeight+(w-1)*e.bodySpacing}f&&(y+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let I=0;const O=function(L){_=Math.max(_,n.measureText(L).width+I)};return n.save(),n.font=c.string,ot(t.title,O),n.font=l.string,ot(t.beforeBody.concat(t.afterBody),O),I=e.displayColors?o+2+e.boxPadding:0,ot(s,L=>{ot(L.before,O),ot(L.lines,O),ot(L.after,O)}),I=0,n.font=u.string,ot(t.footer,O),n.restore(),_+=v.width,{width:_,height:y}}function fW(t,e){const{y:n,height:s}=e;return n<s/2?"top":n>t.height-s/2?"bottom":"center"}function pW(t,e,n,s){const{x:r,width:i}=s,o=n.caretSize+n.caretPadding;if(t==="left"&&r+i+o>e.width||t==="right"&&r-i-o<0)return!0}function gW(t,e,n,s){const{x:r,width:i}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return s==="center"?c=r<=(a+l)/2?"left":"right":r<=i/2?c="left":r>=o-i/2&&(c="right"),pW(c,t,e,n)&&(c="center"),c}function mb(t,e,n){const s=n.yAlign||e.yAlign||fW(t,n);return{xAlign:n.xAlign||e.xAlign||gW(t,e,n,s),yAlign:s}}function mW(t,e){let{x:n,width:s}=t;return e==="right"?n-=s:e==="center"&&(n-=s/2),n}function yW(t,e,n){let{y:s,height:r}=t;return e==="top"?s+=n:e==="bottom"?s-=r+n:s-=r/2,s}function yb(t,e,n,s){const{caretSize:r,caretPadding:i,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=r+i,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:g}=oo(o);let v=mW(e,a);const y=yW(e,l,c);return l==="center"?a==="left"?v+=c:a==="right"&&(v-=c):a==="left"?v-=Math.max(u,f)+r:a==="right"&&(v+=Math.max(h,g)+r),{x:ln(v,0,s.width-e.width),y:ln(y,0,s.height-e.height)}}function Ec(t,e,n){const s=jn(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-s.right:t.x+s.left}function vb(t){return rs([],ks(t))}function vW(t,e,n){return Ni(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function _b(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const Mk={beforeTitle:Es,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return n[e.dataIndex]}return""},afterTitle:Es,beforeBody:Es,beforeLabel:Es,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return rt(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Es,afterBody:Es,beforeFooter:Es,footer:Es,afterFooter:Es};function gn(t,e,n,s){const r=t[e].call(n,s);return typeof r>"u"?Mk[e].call(n,s):r}class ap extends Qs{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,s=this.options.setContext(this.getContext()),r=s.enabled&&n.options.animation&&s.animations,i=new yk(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=vW(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:s}=n,r=gn(s,"beforeTitle",this,e),i=gn(s,"title",this,e),o=gn(s,"afterTitle",this,e);let a=[];return a=rs(a,ks(r)),a=rs(a,ks(i)),a=rs(a,ks(o)),a}getBeforeBody(e,n){return vb(gn(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:s}=n,r=[];return ot(e,i=>{const o={before:[],lines:[],after:[]},a=_b(s,i);rs(o.before,ks(gn(a,"beforeLabel",this,i))),rs(o.lines,gn(a,"label",this,i)),rs(o.after,ks(gn(a,"afterLabel",this,i))),r.push(o)}),r}getAfterBody(e,n){return vb(gn(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:s}=n,r=gn(s,"beforeFooter",this,e),i=gn(s,"footer",this,e),o=gn(s,"afterFooter",this,e);let a=[];return a=rs(a,ks(r)),a=rs(a,ks(i)),a=rs(a,ks(o)),a}_createItems(e){const n=this._active,s=this.chart.data,r=[],i=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(hW(this.chart,n[l]));return e.filter&&(a=a.filter((u,h,f)=>e.filter(u,h,f,s))),e.itemSort&&(a=a.sort((u,h)=>e.itemSort(u,h,s))),ot(a,u=>{const h=_b(e.callbacks,u);r.push(gn(h,"labelColor",this,u)),i.push(gn(h,"labelPointStyle",this,u)),o.push(gn(h,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const s=this.options.setContext(this.getContext()),r=this._active;let i,o=[];if(!r.length)this.opacity!==0&&(i={opacity:0});else{const a=_a[s.position].call(this,r,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const l=this._size=gb(this,s),c=Object.assign({},a,l),u=mb(this.chart,s,c),h=yb(s,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,s,r){const i=this.getCaretPosition(e,s,r);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,s){const{xAlign:r,yAlign:i}=this,{caretSize:o,cornerRadius:a}=s,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=oo(a),{x:f,y:g}=e,{width:v,height:y}=n;let _,w,I,O,L,M;return i==="center"?(L=g+y/2,r==="left"?(_=f,w=_-o,O=L+o,M=L-o):(_=f+v,w=_+o,O=L-o,M=L+o),I=_):(r==="left"?w=f+Math.max(l,u)+o:r==="right"?w=f+v-Math.max(c,h)-o:w=this.caretX,i==="top"?(O=g,L=O-o,_=w-o,I=w+o):(O=g+y,L=O+o,_=w+o,I=w-o),M=O),{x1:_,x2:w,x3:I,y1:O,y2:L,y3:M}}drawTitle(e,n,s){const r=this.title,i=r.length;let o,a,l;if(i){const c=ao(s.rtl,this.x,this.width);for(e.x=Ec(this,s.titleAlign,s),n.textAlign=c.textAlign(s.titleAlign),n.textBaseline="middle",o=cn(s.titleFont),a=s.titleSpacing,n.fillStyle=s.titleColor,n.font=o.string,l=0;l<i;++l)n.fillText(r[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===i&&(e.y+=s.titleMarginBottom-a)}}_drawColorBox(e,n,s,r,i){const o=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:l,boxWidth:c}=i,u=cn(i.bodyFont),h=Ec(this,"left",i),f=r.x(h),g=l<u.lineHeight?(u.lineHeight-l)/2:0,v=n.y+g;if(i.usePointStyle){const y={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},_=r.leftForLtr(f,c)+c/2,w=v+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,np(e,y,_,w),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,np(e,y,_,w)}else{e.lineWidth=Je(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const y=r.leftForLtr(f,c),_=r.leftForLtr(r.xPlus(f,1),c-2),w=oo(o.borderRadius);Object.values(w).some(I=>I!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,Nu(e,{x:y,y:v,w:c,h:l,radius:w}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Nu(e,{x:_,y:v+1,w:c-2,h:l-2,radius:w}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(y,v,c,l),e.strokeRect(y,v,c,l),e.fillStyle=o.backgroundColor,e.fillRect(_,v+1,c-2,l-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,n,s){const{body:r}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=s,h=cn(s.bodyFont);let f=h.lineHeight,g=0;const v=ao(s.rtl,this.x,this.width),y=function(b){n.fillText(b,v.x(e.x+g),e.y+f/2),e.y+=f+i},_=v.textAlign(o);let w,I,O,L,M,$,T;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,e.x=Ec(this,_,s),n.fillStyle=s.bodyColor,ot(this.beforeBody,y),g=a&&_!=="right"?o==="center"?c/2+u:c+2+u:0,L=0,$=r.length;L<$;++L){for(w=r[L],I=this.labelTextColors[L],n.fillStyle=I,ot(w.before,y),O=w.lines,a&&O.length&&(this._drawColorBox(n,e,L,v,s),f=Math.max(h.lineHeight,l)),M=0,T=O.length;M<T;++M)y(O[M]),f=h.lineHeight;ot(w.after,y)}g=0,f=h.lineHeight,ot(this.afterBody,y),e.y-=i}drawFooter(e,n,s){const r=this.footer,i=r.length;let o,a;if(i){const l=ao(s.rtl,this.x,this.width);for(e.x=Ec(this,s.footerAlign,s),e.y+=s.footerMarginTop,n.textAlign=l.textAlign(s.footerAlign),n.textBaseline="middle",o=cn(s.footerFont),n.fillStyle=s.footerColor,n.font=o.string,a=0;a<i;++a)n.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+s.footerSpacing}}drawBackground(e,n,s,r){const{xAlign:i,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=s,{topLeft:h,topRight:f,bottomLeft:g,bottomRight:v}=oo(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+h,l),o==="top"&&this.drawCaret(e,n,s,r),n.lineTo(a+c-f,l),n.quadraticCurveTo(a+c,l,a+c,l+f),o==="center"&&i==="right"&&this.drawCaret(e,n,s,r),n.lineTo(a+c,l+u-v),n.quadraticCurveTo(a+c,l+u,a+c-v,l+u),o==="bottom"&&this.drawCaret(e,n,s,r),n.lineTo(a+g,l+u),n.quadraticCurveTo(a,l+u,a,l+u-g),o==="center"&&i==="left"&&this.drawCaret(e,n,s,r),n.lineTo(a,l+h),n.quadraticCurveTo(a,l,a+h,l),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,s=this.$animations,r=s&&s.x,i=s&&s.y;if(r||i){const o=_a[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=gb(this,e),l=Object.assign({},o,this._size),c=mb(n,e,l),u=yb(e,l,c,n);(r._to!==u.x||i._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=jn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=s,this.drawBackground(i,e,r,n),pk(e,n.textDirection),i.y+=o.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),gk(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const s=this._active,r=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),i=!Ou(s,r),o=this._positionChanged(r,n);(i||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],o=this._getActiveElements(e,i,n,s),a=this._positionChanged(o,e),l=n||!Ou(o,i)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,s,r){const i=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,s);return i.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:s,caretY:r,options:i}=this,o=_a[i.position].call(this,e,n);return o!==!1&&(s!==o.x||r!==o.y)}}be(ap,"positioners",_a);var _W={id:"tooltip",_element:ap,positioners:_a,afterInit(t,e,n){n&&(t.tooltip=new ap({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Mk},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const bW=(t,e,n,s)=>(typeof e=="string"?(n=t.push(e)-1,s.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function xW(t,e,n,s){const r=t.indexOf(e);if(r===-1)return bW(t,e,n,s);const i=t.lastIndexOf(e);return r!==i?n:r}const wW=(t,e)=>t===null?null:ln(Math.round(t),0,e);function bb(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class lp extends Vo{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:r,label:i}of n)s[r]===i&&s.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(rt(e))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===e?n:xW(s,e,je(n,e),this._addedLabels),wW(n,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:s,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),n||(r=this.getLabels().length-1)),this.min=s,this.max=r}buildTicks(){const e=this.min,n=this.max,s=this.options.offset,r=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=e;o<=n;o++)r.push({value:o});return r}getLabelForValue(e){return bb.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}be(lp,"id","category"),be(lp,"defaults",{ticks:{callback:bb}});function EW(t,e){const n=[],{bounds:r,step:i,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:f}=t,g=i||1,v=u-1,{min:y,max:_}=e,w=!rt(o),I=!rt(a),O=!rt(c),L=(_-y)/(h+1);let M=w_((_-y)/v/g)*g,$,T,b,E;if(M<1e-14&&!w&&!I)return[{value:y},{value:_}];E=Math.ceil(_/M)-Math.floor(y/M),E>v&&(M=w_(E*M/v/g)*g),rt(l)||($=Math.pow(10,l),M=Math.ceil(M*$)/$),r==="ticks"?(T=Math.floor(y/M)*M,b=Math.ceil(_/M)*M):(T=y,b=_),w&&I&&i&&Hz((a-o)/i,M/1e3)?(E=Math.round(Math.min((a-o)/M,u)),M=(a-o)/E,T=o,b=a):O?(T=w?o:T,b=I?a:b,E=c-1,M=(b-T)/E):(E=(b-T)/M,Va(E,Math.round(E),M/1e3)?E=Math.round(E):E=Math.ceil(E));const A=Math.max(E_(M),E_(T));$=Math.pow(10,rt(l)?A:l),T=Math.round(T*$)/$,b=Math.round(b*$)/$;let k=0;for(w&&(f&&T!==o?(n.push({value:o}),T<o&&k++,Va(Math.round((T+k*M)*$)/$,o,xb(o,L,t))&&k++):T<o&&k++);k<E;++k){const S=Math.round((T+k*M)*$)/$;if(I&&S>a)break;n.push({value:S})}return I&&f&&b!==a?n.length&&Va(n[n.length-1].value,a,xb(a,L,t))?n[n.length-1].value=a:n.push({value:a}):(!I||b===a)&&n.push({value:b}),n}function xb(t,e,{horizontal:n,minRotation:s}){const r=Ls(s),i=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class TW extends Vo{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return rt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:r,max:i}=this;const o=l=>r=n?r:l,a=l=>i=s?i:l;if(e){const l=ps(r),c=ps(i);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===i){let l=i===0?1:Math.abs(i*.05);a(i+l),e||o(r-l)}this.min=r,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=e,r;return s?(r=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const r={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=EW(r,i);return e.bounds==="ticks"&&qz(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const r=(s-n)/Math.max(e.length-1,1)/2;n-=r,s+=r}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(e){return Qg(e,this.chart.options.locale,this.options.ticks.format)}}class cp extends TW{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Bn(e)?e:0,this.max=Bn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,s=Ls(this.options.ticks.minRotation),r=(e?Math.sin(s):Math.cos(s))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}be(cp,"id","linear"),be(cp,"defaults",{ticks:{callback:ok.formatters.numeric}});const Bd={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},yn=Object.keys(Bd);function wb(t,e){return t-e}function Eb(t,e){if(rt(e))return null;const n=t._adapter,{parser:s,round:r,isoWeekday:i}=t._parseOpts;let o=e;return typeof s=="function"&&(o=s(o)),Bn(o)||(o=typeof s=="string"?n.parse(o,s):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(fl(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,r)),+o)}function Tb(t,e,n,s){const r=yn.length;for(let i=yn.indexOf(t);i<r-1;++i){const o=Bd[yn[i]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=s)return yn[i]}return yn[r-1]}function kW(t,e,n,s,r){for(let i=yn.length-1;i>=yn.indexOf(n);i--){const o=yn[i];if(Bd[o].common&&t._adapter.diff(r,s,o)>=e-1)return o}return yn[n?yn.indexOf(n):0]}function IW(t){for(let e=yn.indexOf(t)+1,n=yn.length;e<n;++e)if(Bd[yn[e]].common)return yn[e]}function kb(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:s,hi:r}=Kg(n,e),i=n[s]>=e?n[s]:n[r];t[i]=!0}}function SW(t,e,n,s){const r=t._adapter,i=+r.startOf(e[0].value,s),o=e[e.length-1].value;let a,l;for(a=i;a<=o;a=+r.add(a,1,s))l=n[a],l>=0&&(e[l].major=!0);return e}function Ib(t,e,n){const s=[],r={},i=e.length;let o,a;for(o=0;o<i;++o)a=e[o],r[a]=o,s.push({value:a,major:!1});return i===0||!n?s:SW(t,s,r,n)}class Fu extends Vo{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const s=e.time||(e.time={}),r=this._adapter=new PH._date(e.adapters.date);r.init(n),La(s.displayFormats,r.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:Eb(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,s=e.time.unit||"day";let{min:r,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(r=Math.min(r,c.min)),!a&&!isNaN(c.max)&&(i=Math.max(i,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=Bn(r)&&!isNaN(r)?r:+n.startOf(Date.now(),s),i=Bn(i)&&!isNaN(i)?i:+n.endOf(Date.now(),s)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],s=e[e.length-1]),{min:n,max:s}}buildTicks(){const e=this.options,n=e.time,s=e.ticks,r=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,o=this.max,a=Qz(r,i,o);return this._unit=n.unit||(s.autoSkip?Tb(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):kW(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:IW(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),Ib(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,s=0,r,i;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?s=i:s=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=ln(n,0,o),s=ln(s,0,o),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const e=this._adapter,n=this.min,s=this.max,r=this.options,i=r.time,o=i.unit||Tb(i.minUnit,n,s,this._getLabelCapacity(n)),a=je(r.ticks.stepSize,1),l=o==="week"?i.isoWeekday:!1,c=fl(l)||l===!0,u={};let h=n,f,g;if(c&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,c?"day":o),e.diff(s,n,o)>1e5*a)throw new Error(n+" and "+s+" are too far apart with stepSize of "+a+" "+o);const v=r.ticks.source==="data"&&this.getDataTimestamps();for(f=h,g=0;f<s;f=+e.add(f,a,o),g++)kb(u,f,v);return(f===s||r.bounds==="ticks"||g===1)&&kb(u,f,v),Object.keys(u).sort(wb).map(y=>+y)}getLabelForValue(e){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(e,s.tooltipFormat):n.format(e,s.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,i=this._unit,o=n||r[i];return this._adapter.format(e,o)}_tickFormatFunction(e,n,s,r){const i=this.options,o=i.ticks.callback;if(o)return ft(o,[e,n,s],this);const a=i.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],f=s[n],g=c&&h&&f&&f.major;return this._adapter.format(e,r||(g?h:u))}generateTickLabels(e){let n,s,r;for(n=0,s=e.length;n<s;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,s=this.ctx.measureText(e).width,r=Ls(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:s*i+a*o,h:s*o+a*i}}_getLabelCapacity(e){const n=this.options.time,s=n.displayFormats,r=s[n.unit]||s.millisecond,i=this._tickFormatFunction(e,0,Ib(this,[e],this._majorUnit),r),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,s;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,s=r.length;n<s;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,s;if(e.length)return e;const r=this.getLabels();for(n=0,s=r.length;n<s;++n)e.push(Eb(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return sk(e.sort(wb))}}be(Fu,"id","time"),be(Fu,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Tc(t,e,n){let s=0,r=t.length-1,i,o,a,l;n?(e>=t[s].pos&&e<=t[r].pos&&({lo:s,hi:r}=oi(t,"pos",e)),{pos:i,time:a}=t[s],{pos:o,time:l}=t[r]):(e>=t[s].time&&e<=t[r].time&&({lo:s,hi:r}=oi(t,"time",e)),{time:i,pos:a}=t[s],{time:o,pos:l}=t[r]);const c=o-i;return c?a+(l-a)*(e-i)/c:a}class Sb extends Fu{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Tc(n,this.min),this._tableRange=Tc(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:s}=this,r=[],i=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=s&&r.push(c);if(r.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(o=0,a=r.length;o<a;++o)u=r[o+1],l=r[o-1],c=r[o],Math.round((u+l)/2)!==c&&i.push({time:c,pos:o/(a-1)});return i}_generate(){const e=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((r,i)=>r-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?e=this.normalize(n.concat(s)):e=n.length?n:s,e=this._cache.all=e,e}getDecimalForValue(e){return(Tc(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return Tc(this._table,s*this._tableRange+this._minPos,!0)}}be(Sb,"id","timeseries"),be(Sb,"defaults",Fu.defaults);const Nk={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},AW={ariaLabel:{type:String},ariaDescribedby:{type:String}},CW={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...Nk,...AW},PW=zx[0]==="2"?(t,e)=>Object.assign(t,{attrs:e}):(t,e)=>Object.assign(t,e);function Hi(t){return _l(t)?ze(t):t}function RW(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t;return _l(e)?new Proxy(t,{}):t}function OW(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function Lk(t,e){t.labels=e}function Vk(t,e,n){const s=[];t.datasets=e.map(r=>{const i=t.datasets.find(o=>o[n]===r[n]);return!i||!r.data||s.includes(i)?{...r}:(s.push(i),Object.assign(i,r),i)})}function DW(t,e){const n={labels:[],datasets:[]};return Lk(n,t.labels),Vk(n,t.datasets,e),n}const MW=Nr({props:CW,setup(t,e){let{expose:n,slots:s}=e;const r=j(null),i=wp(null);n({chart:i});const o=()=>{if(!r.value)return;const{type:c,data:u,options:h,plugins:f,datasetIdKey:g}=t,v=DW(u,g),y=RW(v,u);i.value=new Ud(r.value,{type:c,data:y,options:{...h},plugins:f})},a=()=>{const c=ze(i.value);c&&(t.destroyDelay>0?setTimeout(()=>{c.destroy(),i.value=null},t.destroyDelay):(c.destroy(),i.value=null))},l=c=>{c.update(t.updateMode)};return mt(o),Si(a),kt([()=>t.options,()=>t.data],(c,u)=>{let[h,f]=c,[g,v]=u;const y=ze(i.value);if(!y)return;let _=!1;if(h){const w=Hi(h),I=Hi(g);w&&w!==I&&(OW(y,w),_=!0)}if(f){const w=Hi(f.labels),I=Hi(v.labels),O=Hi(f.datasets),L=Hi(v.datasets);w!==I&&(Lk(y.config.data,w),_=!0),O&&O!==L&&(Vk(y.config.data,O,t.datasetIdKey),_=!0)}_&&Cn(()=>{l(y)})},{deep:!0}),()=>gi("canvas",{role:"img",ariaLabel:t.ariaLabel,ariaDescribedby:t.ariaDescribedby,ref:r},[gi("p",{},[s.default?s.default():""])])}});function om(t,e){return Ud.register(e),Nr({props:Nk,setup(n,s){let{expose:r}=s;const i=wp(null),o=a=>{i.value=a==null?void 0:a.chart};return r({chart:i}),()=>gi(MW,PW({ref:o},{type:t,...n}))}})}const Ab=om("bar",Hc),Cb=om("line",qc),NW=om("pie",sp),LW={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"},VW={key:0,class:"bg-gray-100 dark:bg-gray-700 p-4 rounded-lg shadow-sm"},$W={class:"h-64"},FW={key:1,class:"bg-gray-100 dark:bg-gray-700 p-4 rounded-lg shadow-sm"},UW={class:"h-64"},BW={key:2,class:"mt-6 bg-gray-100 dark:bg-gray-700 p-4 rounded-lg shadow-sm"},jW={class:"h-64"},zW={key:3,class:"mt-6 bg-gray-100 dark:bg-gray-700 p-4 rounded-lg shadow-sm"},HW={class:"h-64"},qW={key:4,class:"mt-6 bg-gray-100 dark:bg-gray-700 p-4 rounded-lg shadow-sm"},WW={class:"h-64"},KW={__name:"SalesReportCharts",props:{reportData:{type:Object,default:null},selectedReportType:{type:String,required:!0},yearlyYear:{type:Number,default:new Date().getFullYear()}},setup(t){Ud.register(dW,_W,cW,Yc,lp,cp,ya,va,Gc);const e=t,n={responsive:!0,maintainAspectRatio:!1,plugins:{tooltip:{callbacks:{label:function(l){let c=l.dataset.label||"";return c&&(c+=": "),l.parsed.y!==null&&(c+=Tn(l.parsed.y)),c}}}},scales:{x:{ticks:{color:"#d1d5db"},grid:{color:"rgba(209, 213, 219, 0.1)"}},y:{ticks:{color:"#d1d5db",callback:function(l){return Tn(l)}},grid:{color:"rgba(209, 213, 219, 0.1)"}}}},s=ye(()=>{var f;if(!e.reportData||!((f=e.reportData.details)!=null&&f.byPaymentType))return{labels:[],datasets:[{data:[]}]};const c=Object.keys(e.reportData.details.byPaymentType).map(g=>Na(g)),u=Object.values(e.reportData.details.byPaymentType);return{labels:c,datasets:[{label:"Vendas",backgroundColor:["#F97316","#22C55E","#3B82F6","#EF4444","#8B5CF6","#EC4899"].slice(0,c.length),data:u}]}}),r=ye(()=>{var h;if(!e.reportData||!((h=e.reportData.details)!=null&&h.byDeliveryType))return{labels:[],datasets:[{data:[]}]};const l=Object.keys(e.reportData.details.byDeliveryType),c=Object.values(e.reportData.details.byDeliveryType);return{labels:l,datasets:[{label:"Vendas",backgroundColor:["#A855F7","#F43F5E","#10B981","#EAB308","#6366F1"].slice(0,l.length),data:c}]}}),i=ye(()=>{var h;if(!e.reportData||!((h=e.reportData.details)!=null&&h.byDay))return{labels:[],datasets:[{data:[]}]};const c=["Domingo","Segunda-feira","Tera-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sbado"].filter(f=>e.reportData.details.byDay[f]!==void 0),u=c.map(f=>e.reportData.details.byDay[f]);return{labels:c,datasets:[{label:"Vendas por dia",backgroundColor:"#F97316",borderColor:"#F97316",data:u}]}}),o=ye(()=>{var u;if(!e.reportData||!((u=e.reportData.details)!=null&&u.byDayOfMonth))return{labels:[],datasets:[{data:[]}]};const l=Object.keys(e.reportData.details.byDayOfMonth).sort((h,f)=>parseInt(h)-parseInt(f)),c=l.map(h=>e.reportData.details.byDayOfMonth[h]);return{labels:l.map(h=>`Dia ${h}`),datasets:[{label:"Vendas por dia do ms",backgroundColor:"rgba(59, 130, 246, 0.5)",borderColor:"#3B82F6",data:c,fill:!1,tension:.1}]}}),a=ye(()=>{var h;if(!e.reportData||!((h=e.reportData.details)!=null&&h.byMonth))return{labels:[],datasets:[{data:[]}]};const c=["janeiro","fevereiro","maro","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"].filter(f=>{const g=`${f.charAt(0).toUpperCase()+f.slice(1)} ${e.yearlyYear}`;return e.reportData.details.byMonth[g]!==void 0}).map(f=>f.charAt(0).toUpperCase()+f.slice(1)),u=c.map(f=>{const g=f.toLowerCase(),v=`${g.charAt(0).toUpperCase()+g.slice(1)} ${e.yearlyYear}`;return e.reportData.details.byMonth[v]});return{labels:c,datasets:[{label:"Vendas por ms",backgroundColor:"rgba(139, 92, 246, 0.5)",borderColor:"#8B5CF6",data:u,fill:!1,tension:.1}]}});return(l,c)=>(P(),D("div",LW,[s.value.labels.length>0?(P(),D("div",VW,[c[0]||(c[0]=p("h4",{class:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Vendas por tipo de pagamento",-1)),p("div",$W,[re(te(Ab),{data:s.value,options:n},null,8,["data"])])])):J("",!0),r.value.labels.length>0?(P(),D("div",FW,[c[1]||(c[1]=p("h4",{class:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Vendas por tipo de entrega",-1)),p("div",UW,[re(te(NW),{data:r.value,options:n},null,8,["data"])])])):J("",!0),t.selectedReportType==="weekly"&&i.value.labels.length>0?(P(),D("div",BW,[c[2]||(c[2]=p("h4",{class:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Vendas por dia da semana:",-1)),p("div",jW,[re(te(Ab),{data:i.value,options:n},null,8,["data"])])])):J("",!0),t.selectedReportType==="monthly"&&o.value.labels.length>0?(P(),D("div",zW,[c[3]||(c[3]=p("h4",{class:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Vendas por dia do ms:",-1)),p("div",HW,[re(te(Cb),{data:o.value,options:n},null,8,["data"])])])):J("",!0),t.selectedReportType==="yearly"&&a.value.labels.length>0?(P(),D("div",qW,[c[4]||(c[4]=p("h4",{class:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Vendas por ms:",-1)),p("div",WW,[re(te(Cb),{data:a.value,options:n},null,8,["data"])])])):J("",!0)]))}},GW={class:"p-6 bg-white dark:bg-gray-800 rounded-lg shadow-md"},YW={class:"mb-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},QW={key:0},XW={key:1},JW={key:2},ZW={key:3},eK={key:4},tK={class:"col-span-full md:col-span-1 flex items-end"},nK=["disabled"],sK={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert"},rK={class:"block sm:inline"},iK={key:1,class:"bg-blue-100 border border-blue-400 text-blue-700 px-4 py-3 rounded relative mb-4",role:"alert"},oK={key:2,class:"mt-8"},aK={class:"text-xl font-semibold text-gray-700 dark:text-gray-300 mb-4"},lK={class:"font-normal"},cK={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8"},uK={class:"bg-gray-100 dark:bg-gray-700 p-4 rounded-lg shadow-sm"},dK={class:"text-2xl font-bold text-orange-600 dark:text-orange-400"},hK={key:0,class:"bg-gray-100 dark:bg-gray-700 p-4 rounded-lg shadow-sm"},fK={class:"text-2xl font-bold text-blue-600 dark:text-blue-400"},pK={key:1},gK={class:"overflow-x-auto"},mK={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},yK={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},vK={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200"},_K={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200"},bK={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200"},xK={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200 capitalize"},wK={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200 capitalize"},EK={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200"},TK={key:2,class:"mt-6"},kK={class:"list-disc pl-5 text-gray-900 dark:text-gray-200"},IK={class:"font-medium"},SK={key:3,class:"mt-6"},AK={class:"list-disc pl-5 text-gray-900 dark:text-gray-200"},CK={class:"font-medium"},PK={key:4,class:"mt-6"},RK={class:"list-disc pl-5 text-gray-900 dark:text-gray-200"},OK={class:"font-medium"},DK={key:5,class:"mt-6"},MK={class:"list-disc pl-5 text-gray-900 dark:text-gray-200"},NK={class:"font-medium"},LK={key:6,class:"mt-6"},VK={class:"list-disc pl-5 text-gray-900 dark:text-gray-200"},$K={class:"font-medium"},FK={__name:"SalesReports",setup(t){const e=j("daily"),n=j(""),s=j(""),r=j(new Date().getFullYear()),i=j(new Date().getMonth()+1),o=j(new Date().getFullYear()),a=j(null),l=j(!1),c=j(null),u=j(!1),h=v=>{const y=new Date(v),_=y.getFullYear(),w=String(y.getMonth()+1).padStart(2,"0"),I=String(y.getDate()).padStart(2,"0");return`${_}-${w}-${I}`};mt(()=>{n.value=h(new Date);const v=new Date,y=new Date(v);y.setDate(v.getDate()-v.getDay()),s.value=h(y),g()}),kt(e,()=>{f()}),kt(a,v=>{v&&Object.keys(v).length>0?(u.value=!1,Cn(()=>{u.value=!0})):u.value=!1},{immediate:!0,deep:!0});const f=()=>{c.value=null,a.value=null,u.value=!1},g=async()=>{l.value=!0,c.value=null,a.value=null,u.value=!1;let v="",y={};try{switch(e.value){case"daily":if(!n.value)throw new Error("Por favor, selecione uma data para o relatrio dirio.");v="/admin/reports/sales/daily",y={date:n.value};break;case"weekly":v="/admin/reports/sales/weekly",s.value&&(y={startDate:s.value});break;case"monthly":if(!r.value||!i.value)throw new Error("Por favor, insira o ano e o ms para o relatrio mensal.");v="/admin/reports/sales/monthly",y={year:r.value,month:i.value};break;case"yearly":if(!o.value)throw new Error("Por favor, insira o ano para o relatrio anual.");v="/admin/reports/sales/yearly",y={year:o.value};break;default:throw new Error("Tipo de relatrio invlido selecionado.")}const _=await Xe.get(v,{params:y});a.value=_.data}catch(_){_.response&&_.response.data&&_.response.data.message?c.value=_.response.data.message:c.value=_.message||"Ocorreu um erro ao buscar o relatrio.",console.error("Erro ao buscar relatrio:",_)}finally{l.value=!1}};return(v,y)=>(P(),Ye(Mi,null,{default:pe(()=>{var _,w,I,O,L,M,$;return[p("div",GW,[y[25]||(y[25]=p("h2",{class:"text-2xl font-bold text-gray-800 dark:text-gray-200 mb-6"},"Relatrios de vendas",-1)),p("div",YW,[p("div",null,[y[7]||(y[7]=p("label",{for:"reportType",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Tipo de relatrio: ",-1)),Ie(p("select",{id:"reportType","onUpdate:modelValue":y[0]||(y[0]=T=>e.value=T),onChange:f,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm rounded-md dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600"},y[6]||(y[6]=[p("option",{value:"daily"},"Dirio",-1),p("option",{value:"weekly"},"Semanal",-1),p("option",{value:"monthly"},"Mensal",-1),p("option",{value:"yearly"},"Anual",-1)]),544),[[us,e.value]])]),e.value==="daily"?(P(),D("div",QW,[y[8]||(y[8]=p("label",{for:"dailyDate",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Selecione o dia: ",-1)),Ie(p("input",{type:"date",id:"dailyDate","onUpdate:modelValue":y[1]||(y[1]=T=>n.value=T),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm rounded-md dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600"},null,512),[[st,n.value]])])):J("",!0),e.value==="weekly"?(P(),D("div",XW,[y[9]||(y[9]=p("label",{for:"weeklyStartDate",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Data de incio da semana: ",-1)),Ie(p("input",{type:"date",id:"weeklyStartDate","onUpdate:modelValue":y[2]||(y[2]=T=>s.value=T),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm rounded-md dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600"},null,512),[[st,s.value]])])):J("",!0),e.value==="monthly"?(P(),D("div",JW,[y[10]||(y[10]=p("label",{for:"monthlyYear",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Ano:",-1)),Ie(p("input",{type:"number",id:"monthlyYear","onUpdate:modelValue":y[3]||(y[3]=T=>r.value=T),placeholder:"Ex: 2024",class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm rounded-md dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600"},null,512),[[st,r.value]])])):J("",!0),e.value==="monthly"?(P(),D("div",ZW,[y[11]||(y[11]=p("label",{for:"monthlyMonth",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Ms:",-1)),Ie(p("input",{type:"number",id:"monthlyMonth","onUpdate:modelValue":y[4]||(y[4]=T=>i.value=T),placeholder:"Ex: 6 (Junho)",min:"1",max:"12",class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm rounded-md dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600"},null,512),[[st,i.value]])])):J("",!0),e.value==="yearly"?(P(),D("div",eK,[y[12]||(y[12]=p("label",{for:"yearlyYear",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Ano:",-1)),Ie(p("input",{type:"number",id:"yearlyYear","onUpdate:modelValue":y[5]||(y[5]=T=>o.value=T),placeholder:"Ex: 2024",class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm rounded-md dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600"},null,512),[[st,o.value]])])):J("",!0),p("div",tK,[p("button",{onClick:g,disabled:l.value,class:"w-full bg-orange-600 hover:bg-orange-700 text-white font-bold py-2 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 disabled:opacity-50"},B(l.value?"Carregando...":"Gerar relatrio"),9,nK)])]),c.value?(P(),D("div",sK,[y[13]||(y[13]=p("strong",{class:"font-bold"},"Erro!",-1)),p("span",rK,B(c.value),1)])):J("",!0),!l.value&&a.value&&Object.keys(a.value).length===0?(P(),D("div",iK,y[14]||(y[14]=[p("strong",{class:"font-bold"},"Aviso!",-1),p("span",{class:"block sm:inline"}," Nenhum dado encontrado para o perodo selecionado.",-1)]))):J("",!0),a.value&&Object.keys(a.value).length>0&&!l.value?(P(),D("div",oK,[p("h3",aK,[y[15]||(y[15]=ee("Resumo do relatrio: ")),p("span",lK,B(a.value.period),1)]),p("div",cK,[p("div",uK,[y[16]||(y[16]=p("p",{class:"text-gray-600 dark:text-gray-400 text-sm"},"Vendas totais",-1)),p("p",dK,B(te(Tn)(a.value.totalSales)),1)]),a.value.salesCount!==void 0?(P(),D("div",hK,[y[17]||(y[17]=p("p",{class:"text-gray-600 dark:text-gray-400 text-sm"},"Quantidade de pedidos",-1)),p("p",fK,B(a.value.salesCount),1)])):J("",!0)]),u.value?(P(),Ye(KW,{key:0,reportData:a.value,selectedReportType:e.value,yearlyYear:o.value},null,8,["reportData","selectedReportType","yearlyYear"])):J("",!0),e.value==="daily"&&((w=(_=a.value.details)==null?void 0:_.orders)!=null&&w.length)?(P(),D("div",pK,[y[19]||(y[19]=p("h4",{class:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Pedidos detalhados:",-1)),p("div",gK,[p("table",mK,[y[18]||(y[18]=p("thead",{class:"bg-gray-50 dark:bg-gray-700"},[p("tr",null,[p("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," ID do pedido "),p("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Cliente "),p("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Valor Total "),p("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Pagamento "),p("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Entrega "),p("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Data/Hora ")])],-1)),p("tbody",yK,[(P(!0),D(ve,null,Me(a.value.details.orders,T=>(P(),D("tr",{key:T.orderId},[p("td",vK,B(T.orderId),1),p("td",_K,B(T.customerName),1),p("td",bK,B(te(Tn)(T.totalValue)),1),p("td",xK,B(te(Na)(T.paymentMethod)),1),p("td",wK,B(T.deliveryType),1),p("td",EK,B(te(jg)(T.created_at)),1)]))),128))])])])])):J("",!0),(I=a.value.details)!=null&&I.byPaymentType&&Object.keys(a.value.details.byPaymentType).length>0?(P(),D("div",TK,[y[20]||(y[20]=p("h4",{class:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Vendas por tipo de pagamento:",-1)),p("ul",kK,[(P(!0),D(ve,null,Me(a.value.details.byPaymentType,(T,b)=>(P(),D("li",{key:b},[ee(B(te(Na)(b))+": ",1),p("span",IK,B(te(Tn)(T)),1)]))),128))])])):J("",!0),(O=a.value.details)!=null&&O.byDeliveryType&&Object.keys(a.value.details.byDeliveryType).length>0?(P(),D("div",SK,[y[21]||(y[21]=p("h4",{class:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Vendas por tipo de entrega:",-1)),p("ul",AK,[(P(!0),D(ve,null,Me(a.value.details.byDeliveryType,(T,b)=>(P(),D("li",{key:b},[ee(B(te(Na)(b))+": ",1),p("span",CK,B(te(Tn)(T)),1)]))),128))])])):J("",!0),e.value==="weekly"&&((L=a.value.details)!=null&&L.byDay)&&Object.keys(a.value.details.byDay).length>0?(P(),D("div",PK,[y[22]||(y[22]=p("h4",{class:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Vendas por Dia da Semana:",-1)),p("ul",RK,[(P(!0),D(ve,null,Me(a.value.details.byDay,(T,b)=>(P(),D("li",{key:b},[ee(B(b)+": ",1),p("span",OK,B(te(Tn)(T)),1)]))),128))])])):J("",!0),e.value==="monthly"&&((M=a.value.details)!=null&&M.byDayOfMonth)&&Object.keys(a.value.details.byDayOfMonth).length>0?(P(),D("div",DK,[y[23]||(y[23]=p("h4",{class:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Vendas por dia do ms:",-1)),p("ul",MK,[(P(!0),D(ve,null,Me(a.value.details.byDayOfMonth,(T,b)=>(P(),D("li",{key:b},[ee(" Dia "+B(b)+": ",1),p("span",NK,B(te(Tn)(T)),1)]))),128))])])):J("",!0),e.value==="yearly"&&(($=a.value.details)!=null&&$.byMonth)&&Object.keys(a.value.details.byMonth).length>0?(P(),D("div",LK,[y[24]||(y[24]=p("h4",{class:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Vendas por ms:",-1)),p("ul",VK,[(P(!0),D(ve,null,Me(a.value.details.byMonth,(T,b)=>(P(),D("li",{key:b},[ee(B(b)+": ",1),p("span",$K,B(te(Tn)(T)),1)]))),128))])])):J("",!0)])):J("",!0)])]}),_:1}))}},fi=zC({history:_C("/"),routes:[{path:"/",name:"home",component:g5,meta:{enterActiveClass:"animate__animated animate__fadeIn animate__faster",leaveActiveClass:"animate__animated animate__fadeOut animate__faster"}},{path:"/carrinho",name:"cart",component:D5,meta:{enterActiveClass:"animate__animated animate__fadeIn animate__faster",leaveActiveClass:"animate__animated animate__fadeOut animate__faster"}},{path:"/produto/:slug",name:"productDetail",component:cF,meta:{enterActiveClass:"animate__animated animate__fadeIn animate__faster",leaveActiveClass:"animate__animated animate__fadeOut animate__faster"}},{path:"/favoritos",name:"favritos",component:gF,meta:{enterActiveClass:"animate__animated animate__fadeIn animate__faster",leaveActiveClass:"animate__animated animate__fadeOut animate__faster"}},{path:"/perfil",name:"perfil",component:AF,meta:{enterActiveClass:"animate__animated animate__fadeIn animate__faster",leaveActiveClass:"animate__animated animate__fadeOut animate__faster"}},{path:"/checkout",name:"checkout",component:u6,meta:{enterActiveClass:"animate__animated animate__fadeIn animate__faster",leaveActiveClass:"animate__animated animate__fadeOut animate__faster"}},{path:"/monte-sua-pizza",name:"buildPiza",component:B6,meta:{enterActiveClass:"animate__animated animate__fadeIn animate__faster",leaveActiveClass:"animate__animated animate__fadeOut animate__faster"}},{path:"/configuracoes",name:"settings",component:tU,meta:{enterActiveClass:"animate__animated animate__fadeIn animate__faster",leaveActiveClass:"animate__animated animate__fadeOut animate__faster"}},{path:"/admin/login",name:"admin-login",component:Lj,meta:{requiresAuth:!1,publicRoute:!0}},{path:"/admin",name:"admin-dashboard",component:kU,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/orders",name:"admin-orders",component:rB,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/products",name:"admin-products",component:i8,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/categories",name:"admin-categories",component:K8,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/whatsapp-qr",name:"whatsapp-qr",component:dj,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/settings",name:"admin-settings",component:Ij,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/manage-users",name:"admin-manager-users",component:uz,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/reports",name:"AdminSalesReports",component:FK,meta:{requiresAuth:!0,requiresAdmin:!0}}]});fi.beforeEach(async(t,e,n)=>{const s=Vd();!s.isAuthenticated&&!s.loading&&await s.initializeAuth();const r=t.matched.some(c=>c.meta.requiresAuth),i=t.matched.some(c=>c.meta.requiresAdmin),o=t.matched.some(c=>c.meta.publicRoute),a=s.isAuthenticated,l=s.isAdmin;r&&!a?(console.log("Acesso negado: Rota requer autenticao, mas usurio no est autenticado."),n({name:"admin-login"})):i&&!l?(console.log("Acesso negado: Rota requer privilgios de admin, mas usurio no  admin. Redirecionando para home."),n({name:"home"})):o&&a?(console.log("Redirecionando: Usurio autenticado tentando acessar pgina de login."),n({name:"admin-dashboard"})):(console.log("Acesso permitido."),n())});function UK(t){return typeof t!="number"?"R$ 0,00":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2,maximumFractionDigits:2}).format(t)}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("firebase-messaging-sw.js").then(t=>{console.log("Service Worker registrado com sucesso:",t)}).catch(t=>{console.error("Falha no registro do Service Worker:",t)})});const jd=MA(e2);jd.config.globalProperties.$formatPrice=UK;jd.use(VA());jd.use(fi);jd.mount("#app");
