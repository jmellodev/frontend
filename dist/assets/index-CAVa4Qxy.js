var lI=Object.defineProperty;var cI=(t,e,n)=>e in t?lI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ee=(t,e,n)=>cI(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();/**
* @vue/shared v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function hp(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const lt={},Ji=[],cs=()=>{},uI=()=>!1,Bu=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),fp=t=>t.startsWith("onUpdate:"),Ut=Object.assign,pp=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},dI=Object.prototype.hasOwnProperty,st=(t,e)=>dI.call(t,e),Se=Array.isArray,Zi=t=>bl(t)==="[object Map]",wo=t=>bl(t)==="[object Set]",e0=t=>bl(t)==="[object Date]",$e=t=>typeof t=="function",kt=t=>typeof t=="string",Gn=t=>typeof t=="symbol",ct=t=>t!==null&&typeof t=="object",R_=t=>(ct(t)||$e(t))&&$e(t.then)&&$e(t.catch),O_=Object.prototype.toString,bl=t=>O_.call(t),hI=t=>bl(t).slice(8,-1),D_=t=>bl(t)==="[object Object]",gp=t=>kt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,xa=hp(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ju=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},fI=/-(\w)/g,Fn=ju(t=>t.replace(fI,(e,n)=>n?n.toUpperCase():"")),pI=/\B([A-Z])/g,Mr=ju(t=>t.replace(pI,"-$1").toLowerCase()),zu=ju(t=>t.charAt(0).toUpperCase()+t.slice(1)),ih=ju(t=>t?`on${zu(t)}`:""),br=(t,e)=>!Object.is(t,e),Ac=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},M_=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},Xc=t=>{const e=parseFloat(t);return isNaN(e)?t:e},gI=t=>{const e=kt(t)?Number(t):NaN;return isNaN(e)?t:e};let t0;const Hu=()=>t0||(t0=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Eo(t){if(Se(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=kt(s)?bI(s):Eo(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(kt(t)||ct(t))return t}const mI=/;(?![^(]*\))/g,yI=/:([^]+)/,vI=/\/\*[^]*?\*\//g;function bI(t){const e={};return t.replace(vI,"").split(mI).forEach(n=>{if(n){const s=n.split(yI);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function le(t){let e="";if(kt(t))e=t;else if(Se(t))for(let n=0;n<t.length;n++){const s=le(t[n]);s&&(e+=s+" ")}else if(ct(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const _I="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",xI=hp(_I);function N_(t){return!!t||t===""}function wI(t,e){if(t.length!==e.length)return!1;let n=!0;for(let s=0;n&&s<t.length;s++)n=pi(t[s],e[s]);return n}function pi(t,e){if(t===e)return!0;let n=e0(t),s=e0(e);if(n||s)return n&&s?t.getTime()===e.getTime():!1;if(n=Gn(t),s=Gn(e),n||s)return t===e;if(n=Se(t),s=Se(e),n||s)return n&&s?wI(t,e):!1;if(n=ct(t),s=ct(e),n||s){if(!n||!s)return!1;const r=Object.keys(t).length,i=Object.keys(e).length;if(r!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!pi(t[o],e[o]))return!1}}return String(t)===String(e)}function mp(t,e){return t.findIndex(n=>pi(n,e))}const L_=t=>!!(t&&t.__v_isRef===!0),U=t=>kt(t)?t:t==null?"":Se(t)||ct(t)&&(t.toString===O_||!$e(t.toString))?L_(t)?U(t.value):JSON.stringify(t,V_,2):String(t),V_=(t,e)=>L_(e)?V_(t,e.value):Zi(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r],i)=>(n[oh(s,i)+" =>"]=r,n),{})}:wo(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>oh(n))}:Gn(e)?oh(e):ct(e)&&!Se(e)&&!D_(e)?String(e):e,oh=(t,e="")=>{var n;return Gn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let nn;class $_{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=nn,!e&&nn&&(this.index=(nn.scopes||(nn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=nn;try{return nn=this,e()}finally{nn=n}}}on(){++this._on===1&&(this.prevScope=nn,nn=this)}off(){this._on>0&&--this._on===0&&(nn=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function F_(t){return new $_(t)}function U_(){return nn}function EI(t,e=!1){nn&&nn.cleanups.push(t)}let ut;const ah=new WeakSet;class B_{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,nn&&nn.active&&nn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ah.has(this)&&(ah.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||z_(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,n0(this),H_(this);const e=ut,n=Wn;ut=this,Wn=!0;try{return this.fn()}finally{q_(this),ut=e,Wn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)bp(e);this.deps=this.depsTail=void 0,n0(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ah.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){rf(this)&&this.run()}get dirty(){return rf(this)}}let j_=0,wa,Ea;function z_(t,e=!1){if(t.flags|=8,e){t.next=Ea,Ea=t;return}t.next=wa,wa=t}function yp(){j_++}function vp(){if(--j_>0)return;if(Ea){let e=Ea;for(Ea=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;wa;){let e=wa;for(wa=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function H_(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function q_(t){let e,n=t.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),bp(s),kI(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}t.deps=e,t.depsTail=n}function rf(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(W_(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function W_(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Ba)||(t.globalVersion=Ba,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!rf(t))))return;t.flags|=2;const e=t.dep,n=ut,s=Wn;ut=t,Wn=!0;try{H_(t);const r=t.fn(t._value);(e.version===0||br(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{ut=n,Wn=s,q_(t),t.flags&=-3}}function bp(t,e=!1){const{dep:n,prevSub:s,nextSub:r}=t;if(s&&(s.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)bp(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function kI(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Wn=!0;const K_=[];function Bs(){K_.push(Wn),Wn=!1}function js(){const t=K_.pop();Wn=t===void 0?!0:t}function n0(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=ut;ut=void 0;try{e()}finally{ut=n}}}let Ba=0;class TI{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class _p{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!ut||!Wn||ut===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==ut)n=this.activeLink=new TI(ut,this),ut.deps?(n.prevDep=ut.depsTail,ut.depsTail.nextDep=n,ut.depsTail=n):ut.deps=ut.depsTail=n,G_(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=ut.depsTail,n.nextDep=void 0,ut.depsTail.nextDep=n,ut.depsTail=n,ut.deps===n&&(ut.deps=s)}return n}trigger(e){this.version++,Ba++,this.notify(e)}notify(e){yp();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{vp()}}}function G_(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)G_(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Jc=new WeakMap,ai=Symbol(""),of=Symbol(""),ja=Symbol("");function rn(t,e,n){if(Wn&&ut){let s=Jc.get(t);s||Jc.set(t,s=new Map);let r=s.get(n);r||(s.set(n,r=new _p),r.map=s,r.key=n),r.track()}}function Cs(t,e,n,s,r,i){const o=Jc.get(t);if(!o){Ba++;return}const a=l=>{l&&l.trigger()};if(yp(),e==="clear")o.forEach(a);else{const l=Se(t),c=l&&gp(n);if(l&&n==="length"){const u=Number(s);o.forEach((h,f)=>{(f==="length"||f===ja||!Gn(f)&&f>=u)&&a(h)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(ja)),e){case"add":l?c&&a(o.get("length")):(a(o.get(ai)),Zi(t)&&a(o.get(of)));break;case"delete":l||(a(o.get(ai)),Zi(t)&&a(o.get(of)));break;case"set":Zi(t)&&a(o.get(ai));break}}vp()}function II(t,e){const n=Jc.get(t);return n&&n.get(e)}function Bi(t){const e=qe(t);return e===t?e:(rn(e,"iterate",ja),Ln(t)?e:e.map(Wt))}function qu(t){return rn(t=qe(t),"iterate",ja),t}const SI={__proto__:null,[Symbol.iterator](){return lh(this,Symbol.iterator,Wt)},concat(...t){return Bi(this).concat(...t.map(e=>Se(e)?Bi(e):e))},entries(){return lh(this,"entries",t=>(t[1]=Wt(t[1]),t))},every(t,e){return _s(this,"every",t,e,void 0,arguments)},filter(t,e){return _s(this,"filter",t,e,n=>n.map(Wt),arguments)},find(t,e){return _s(this,"find",t,e,Wt,arguments)},findIndex(t,e){return _s(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return _s(this,"findLast",t,e,Wt,arguments)},findLastIndex(t,e){return _s(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return _s(this,"forEach",t,e,void 0,arguments)},includes(...t){return ch(this,"includes",t)},indexOf(...t){return ch(this,"indexOf",t)},join(t){return Bi(this).join(t)},lastIndexOf(...t){return ch(this,"lastIndexOf",t)},map(t,e){return _s(this,"map",t,e,void 0,arguments)},pop(){return Xo(this,"pop")},push(...t){return Xo(this,"push",t)},reduce(t,...e){return s0(this,"reduce",t,e)},reduceRight(t,...e){return s0(this,"reduceRight",t,e)},shift(){return Xo(this,"shift")},some(t,e){return _s(this,"some",t,e,void 0,arguments)},splice(...t){return Xo(this,"splice",t)},toReversed(){return Bi(this).toReversed()},toSorted(t){return Bi(this).toSorted(t)},toSpliced(...t){return Bi(this).toSpliced(...t)},unshift(...t){return Xo(this,"unshift",t)},values(){return lh(this,"values",Wt)}};function lh(t,e,n){const s=qu(t),r=s[e]();return s!==t&&!Ln(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.value&&(i.value=n(i.value)),i}),r}const AI=Array.prototype;function _s(t,e,n,s,r,i){const o=qu(t),a=o!==t&&!Ln(t),l=o[e];if(l!==AI[e]){const h=l.apply(t,i);return a?Wt(h):h}let c=n;o!==t&&(a?c=function(h,f){return n.call(this,Wt(h),f,t)}:n.length>2&&(c=function(h,f){return n.call(this,h,f,t)}));const u=l.call(o,c,s);return a&&r?r(u):u}function s0(t,e,n,s){const r=qu(t);let i=n;return r!==t&&(Ln(t)?n.length>3&&(i=function(o,a,l){return n.call(this,o,a,l,t)}):i=function(o,a,l){return n.call(this,o,Wt(a),l,t)}),r[e](i,...s)}function ch(t,e,n){const s=qe(t);rn(s,"iterate",ja);const r=s[e](...n);return(r===-1||r===!1)&&_l(n[0])?(n[0]=qe(n[0]),s[e](...n)):r}function Xo(t,e,n=[]){Bs(),yp();const s=qe(t)[e].apply(t,n);return vp(),js(),s}const CI=hp("__proto__,__v_isRef,__isVue"),Y_=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Gn));function PI(t){Gn(t)||(t=String(t));const e=qe(this);return rn(e,"has",t),e.hasOwnProperty(t)}class Q_{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?UI:ex:i?Z_:J_).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=Se(e);if(!r){let l;if(o&&(l=SI[n]))return l;if(n==="hasOwnProperty")return PI}const a=Reflect.get(e,n,dt(e)?e:s);return(Gn(n)?Y_.has(n):CI(n))||(r||rn(e,"get",n),i)?a:dt(a)?o&&gp(n)?a:a.value:ct(a)?r?nx(a):gi(a):a}}class X_ extends Q_{constructor(e=!1){super(!1,e)}set(e,n,s,r){let i=e[n];if(!this._isShallow){const l=Tr(i);if(!Ln(s)&&!Tr(s)&&(i=qe(i),s=qe(s)),!Se(e)&&dt(i)&&!dt(s))return l?!1:(i.value=s,!0)}const o=Se(e)&&gp(n)?Number(n)<e.length:st(e,n),a=Reflect.set(e,n,s,dt(e)?e:r);return e===qe(r)&&(o?br(s,i)&&Cs(e,"set",n,s):Cs(e,"add",n,s)),a}deleteProperty(e,n){const s=st(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&s&&Cs(e,"delete",n,void 0),r}has(e,n){const s=Reflect.has(e,n);return(!Gn(n)||!Y_.has(n))&&rn(e,"has",n),s}ownKeys(e){return rn(e,"iterate",Se(e)?"length":ai),Reflect.ownKeys(e)}}class RI extends Q_{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const OI=new X_,DI=new RI,MI=new X_(!0);const af=t=>t,Zl=t=>Reflect.getPrototypeOf(t);function NI(t,e,n){return function(...s){const r=this.__v_raw,i=qe(r),o=Zi(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=r[t](...s),u=n?af:e?Zc:Wt;return!e&&rn(i,"iterate",l?of:ai),{next(){const{value:h,done:f}=c.next();return f?{value:h,done:f}:{value:a?[u(h[0]),u(h[1])]:u(h),done:f}},[Symbol.iterator](){return this}}}}function ec(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function LI(t,e){const n={get(r){const i=this.__v_raw,o=qe(i),a=qe(r);t||(br(r,a)&&rn(o,"get",r),rn(o,"get",a));const{has:l}=Zl(o),c=e?af:t?Zc:Wt;if(l.call(o,r))return c(i.get(r));if(l.call(o,a))return c(i.get(a));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!t&&rn(qe(r),"iterate",ai),Reflect.get(r,"size",r)},has(r){const i=this.__v_raw,o=qe(i),a=qe(r);return t||(br(r,a)&&rn(o,"has",r),rn(o,"has",a)),r===a?i.has(r):i.has(r)||i.has(a)},forEach(r,i){const o=this,a=o.__v_raw,l=qe(a),c=e?af:t?Zc:Wt;return!t&&rn(l,"iterate",ai),a.forEach((u,h)=>r.call(i,c(u),c(h),o))}};return Ut(n,t?{add:ec("add"),set:ec("set"),delete:ec("delete"),clear:ec("clear")}:{add(r){!e&&!Ln(r)&&!Tr(r)&&(r=qe(r));const i=qe(this);return Zl(i).has.call(i,r)||(i.add(r),Cs(i,"add",r,r)),this},set(r,i){!e&&!Ln(i)&&!Tr(i)&&(i=qe(i));const o=qe(this),{has:a,get:l}=Zl(o);let c=a.call(o,r);c||(r=qe(r),c=a.call(o,r));const u=l.call(o,r);return o.set(r,i),c?br(i,u)&&Cs(o,"set",r,i):Cs(o,"add",r,i),this},delete(r){const i=qe(this),{has:o,get:a}=Zl(i);let l=o.call(i,r);l||(r=qe(r),l=o.call(i,r)),a&&a.call(i,r);const c=i.delete(r);return l&&Cs(i,"delete",r,void 0),c},clear(){const r=qe(this),i=r.size!==0,o=r.clear();return i&&Cs(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=NI(r,t,e)}),n}function xp(t,e){const n=LI(t,e);return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(st(n,r)&&r in s?n:s,r,i)}const VI={get:xp(!1,!1)},$I={get:xp(!1,!0)},FI={get:xp(!0,!1)};const J_=new WeakMap,Z_=new WeakMap,ex=new WeakMap,UI=new WeakMap;function BI(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function jI(t){return t.__v_skip||!Object.isExtensible(t)?0:BI(hI(t))}function gi(t){return Tr(t)?t:wp(t,!1,OI,VI,J_)}function tx(t){return wp(t,!1,MI,$I,Z_)}function nx(t){return wp(t,!0,DI,FI,ex)}function wp(t,e,n,s,r){if(!ct(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=jI(t);if(i===0)return t;const o=r.get(t);if(o)return o;const a=new Proxy(t,i===2?s:n);return r.set(t,a),a}function _r(t){return Tr(t)?_r(t.__v_raw):!!(t&&t.__v_isReactive)}function Tr(t){return!!(t&&t.__v_isReadonly)}function Ln(t){return!!(t&&t.__v_isShallow)}function _l(t){return t?!!t.__v_raw:!1}function qe(t){const e=t&&t.__v_raw;return e?qe(e):t}function Ep(t){return!st(t,"__v_skip")&&Object.isExtensible(t)&&M_(t,"__v_skip",!0),t}const Wt=t=>ct(t)?gi(t):t,Zc=t=>ct(t)?nx(t):t;function dt(t){return t?t.__v_isRef===!0:!1}function z(t){return sx(t,!1)}function kp(t){return sx(t,!0)}function sx(t,e){return dt(t)?t:new zI(t,e)}class zI{constructor(e,n){this.dep=new _p,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:qe(e),this._value=n?e:Wt(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||Ln(e)||Tr(e);e=s?e:qe(e),br(e,n)&&(this._rawValue=e,this._value=s?e:Wt(e),this.dep.trigger())}}function te(t){return dt(t)?t.value:t}const HI={get:(t,e,n)=>e==="__v_raw"?t:te(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return dt(r)&&!dt(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function rx(t){return _r(t)?t:new Proxy(t,HI)}function qI(t){const e=Se(t)?new Array(t.length):{};for(const n in t)e[n]=KI(t,n);return e}class WI{constructor(e,n,s){this._object=e,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return II(qe(this._object),this._key)}}function KI(t,e,n){const s=t[e];return dt(s)?s:new WI(t,e,n)}class GI{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new _p(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ba-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&ut!==this)return z_(this,!0),!0}get value(){const e=this.dep.track();return W_(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function YI(t,e,n=!1){let s,r;return $e(t)?s=t:(s=t.get,r=t.set),new GI(s,r,n)}const tc={},eu=new WeakMap;let Xr;function QI(t,e=!1,n=Xr){if(n){let s=eu.get(n);s||eu.set(n,s=[]),s.push(t)}}function XI(t,e,n=lt){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:a,call:l}=n,c=L=>r?L:Ln(L)||r===!1||r===0?Ps(L,1):Ps(L);let u,h,f,g,v=!1,m=!1;if(dt(t)?(h=()=>t.value,v=Ln(t)):_r(t)?(h=()=>c(t),v=!0):Se(t)?(m=!0,v=t.some(L=>_r(L)||Ln(L)),h=()=>t.map(L=>{if(dt(L))return L.value;if(_r(L))return c(L);if($e(L))return l?l(L,2):L()})):$e(t)?e?h=l?()=>l(t,2):t:h=()=>{if(f){Bs();try{f()}finally{js()}}const L=Xr;Xr=u;try{return l?l(t,3,[g]):t(g)}finally{Xr=L}}:h=cs,e&&r){const L=h,M=r===!0?1/0:r;h=()=>Ps(L(),M)}const b=U_(),I=()=>{u.stop(),b&&b.active&&pp(b.effects,u)};if(i&&e){const L=e;e=(...M)=>{L(...M),I()}}let T=m?new Array(t.length).fill(tc):tc;const D=L=>{if(!(!(u.flags&1)||!u.dirty&&!L))if(e){const M=u.run();if(r||v||(m?M.some(($,E)=>br($,T[E])):br(M,T))){f&&f();const $=Xr;Xr=u;try{const E=[M,T===tc?void 0:m&&T[0]===tc?[]:T,g];T=M,l?l(e,3,E):e(...E)}finally{Xr=$}}}else u.run()};return a&&a(D),u=new B_(h),u.scheduler=o?()=>o(D,!1):D,g=L=>QI(L,!1,u),f=u.onStop=()=>{const L=eu.get(u);if(L){if(l)l(L,4);else for(const M of L)M();eu.delete(u)}},e?s?D(!0):T=u.run():o?o(D.bind(null,!0),!0):u.run(),I.pause=u.pause.bind(u),I.resume=u.resume.bind(u),I.stop=I,I}function Ps(t,e=1/0,n){if(e<=0||!ct(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,dt(t))Ps(t.value,e,n);else if(Se(t))for(let s=0;s<t.length;s++)Ps(t[s],e,n);else if(wo(t)||Zi(t))t.forEach(s=>{Ps(s,e,n)});else if(D_(t)){for(const s in t)Ps(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&Ps(t[s],e,n)}return t}/**
* @vue/runtime-core v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function xl(t,e,n,s){try{return s?t(...s):t()}catch(r){Wu(r,e,n)}}function Yn(t,e,n,s){if($e(t)){const r=xl(t,e,n,s);return r&&R_(r)&&r.catch(i=>{Wu(i,e,n)}),r}if(Se(t)){const r=[];for(let i=0;i<t.length;i++)r.push(Yn(t[i],e,n,s));return r}}function Wu(t,e,n,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||lt;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const u=a.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](t,l,c)===!1)return}a=a.parent}if(i){Bs(),xl(i,null,10,[t,l,c]),js();return}}JI(t,n,r,s,o)}function JI(t,e,n,s=!0,r=!1){if(r)throw t;console.error(t)}const gn=[];let is=-1;const eo=[];let ar=null,Wi=0;const ix=Promise.resolve();let tu=null;function Pn(t){const e=tu||ix;return t?e.then(this?t.bind(this):t):e}function ZI(t){let e=is+1,n=gn.length;for(;e<n;){const s=e+n>>>1,r=gn[s],i=za(r);i<t||i===t&&r.flags&2?e=s+1:n=s}return e}function Tp(t){if(!(t.flags&1)){const e=za(t),n=gn[gn.length-1];!n||!(t.flags&2)&&e>=za(n)?gn.push(t):gn.splice(ZI(e),0,t),t.flags|=1,ox()}}function ox(){tu||(tu=ix.then(lx))}function eS(t){Se(t)?eo.push(...t):ar&&t.id===-1?ar.splice(Wi+1,0,t):t.flags&1||(eo.push(t),t.flags|=1),ox()}function r0(t,e,n=is+1){for(;n<gn.length;n++){const s=gn[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;gn.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function ax(t){if(eo.length){const e=[...new Set(eo)].sort((n,s)=>za(n)-za(s));if(eo.length=0,ar){ar.push(...e);return}for(ar=e,Wi=0;Wi<ar.length;Wi++){const n=ar[Wi];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}ar=null,Wi=0}}const za=t=>t.id==null?t.flags&2?-1:1/0:t.id;function lx(t){try{for(is=0;is<gn.length;is++){const e=gn[is];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),xl(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;is<gn.length;is++){const e=gn[is];e&&(e.flags&=-2)}is=-1,gn.length=0,ax(),tu=null,(gn.length||eo.length)&&lx()}}let Dt=null,cx=null;function nu(t){const e=Dt;return Dt=t,cx=t&&t.type.__scopeId||null,e}function ye(t,e=Dt,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&g0(-1);const i=nu(e);let o;try{o=t(...r)}finally{nu(i),s._d&&g0(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Ie(t,e){if(Dt===null)return t;const n=Xu(Dt),s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,a,l=lt]=e[r];i&&($e(i)&&(i={mounted:i,updated:i}),i.deep&&Ps(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Hr(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let l=a.dir[s];l&&(Bs(),Yn(l,n,8,[t.el,a,t,e]),js())}}const tS=Symbol("_vte"),ux=t=>t.__isTeleport,lr=Symbol("_leaveCb"),nc=Symbol("_enterCb");function nS(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return _t(()=>{t.isMounted=!0}),vx(()=>{t.isUnmounting=!0}),t}const Dn=[Function,Array],dx={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Dn,onEnter:Dn,onAfterEnter:Dn,onEnterCancelled:Dn,onBeforeLeave:Dn,onLeave:Dn,onAfterLeave:Dn,onLeaveCancelled:Dn,onBeforeAppear:Dn,onAppear:Dn,onAfterAppear:Dn,onAppearCancelled:Dn},hx=t=>{const e=t.subTree;return e.component?hx(e.component):e},sS={name:"BaseTransition",props:dx,setup(t,{slots:e}){const n=Bx(),s=nS();return()=>{const r=e.default&&gx(e.default(),!0);if(!r||!r.length)return;const i=fx(r),o=qe(t),{mode:a}=o;if(s.isLeaving)return uh(i);const l=i0(i);if(!l)return uh(i);let c=lf(l,o,s,n,h=>c=h);l.type!==an&&Ha(l,c);let u=n.subTree&&i0(n.subTree);if(u&&u.type!==an&&!ti(l,u)&&hx(n).type!==an){let h=lf(u,o,s,n);if(Ha(u,h),a==="out-in"&&l.type!==an)return s.isLeaving=!0,h.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete h.afterLeave,u=void 0},uh(i);a==="in-out"&&l.type!==an?h.delayLeave=(f,g,v)=>{const m=px(s,u);m[String(u.key)]=u,f[lr]=()=>{g(),f[lr]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{v(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return i}}};function fx(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==an){e=n;break}}return e}const rS=sS;function px(t,e){const{leavingVNodes:n}=t;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function lf(t,e,n,s,r){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:h,onBeforeLeave:f,onLeave:g,onAfterLeave:v,onLeaveCancelled:m,onBeforeAppear:b,onAppear:I,onAfterAppear:T,onAppearCancelled:D}=e,L=String(t.key),M=px(n,t),$=(w,A)=>{w&&Yn(w,s,9,A)},E=(w,A)=>{const k=A[1];$(w,A),Se(w)?w.every(S=>S.length<=1)&&k():w.length<=1&&k()},_={mode:o,persisted:a,beforeEnter(w){let A=l;if(!n.isMounted)if(i)A=b||l;else return;w[lr]&&w[lr](!0);const k=M[L];k&&ti(t,k)&&k.el[lr]&&k.el[lr](),$(A,[w])},enter(w){let A=c,k=u,S=h;if(!n.isMounted)if(i)A=I||c,k=T||u,S=D||h;else return;let R=!1;const me=w[nc]=Te=>{R||(R=!0,Te?$(S,[w]):$(k,[w]),_.delayedLeave&&_.delayedLeave(),w[nc]=void 0)};A?E(A,[w,me]):me()},leave(w,A){const k=String(t.key);if(w[nc]&&w[nc](!0),n.isUnmounting)return A();$(f,[w]);let S=!1;const R=w[lr]=me=>{S||(S=!0,A(),me?$(m,[w]):$(v,[w]),w[lr]=void 0,M[k]===t&&delete M[k])};M[k]=t,g?E(g,[w,R]):R()},clone(w){const A=lf(w,e,n,s,r);return r&&r(A),A}};return _}function uh(t){if(Ku(t))return t=zs(t),t.children=null,t}function i0(t){if(!Ku(t))return ux(t.type)&&t.children?fx(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&$e(n.default))return n.default()}}function Ha(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Ha(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function gx(t,e=!1,n){let s=[],r=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===xe?(o.patchFlag&128&&r++,s=s.concat(gx(o.children,e,a))):(e||o.type!==an)&&s.push(a!=null?zs(o,{key:a}):o)}if(r>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function Nr(t,e){return $e(t)?Ut({name:t.name},e,{setup:t}):t}function iS(){const t=Bx();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function mx(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function su(t,e,n,s,r=!1){if(Se(t)){t.forEach((v,m)=>su(v,e&&(Se(e)?e[m]:e),n,s,r));return}if(to(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&su(t,e,n,s.component.subTree);return}const i=s.shapeFlag&4?Xu(s.component):s.el,o=r?null:i,{i:a,r:l}=t,c=e&&e.r,u=a.refs===lt?a.refs={}:a.refs,h=a.setupState,f=qe(h),g=h===lt?()=>!1:v=>st(f,v);if(c!=null&&c!==l&&(kt(c)?(u[c]=null,g(c)&&(h[c]=null)):dt(c)&&(c.value=null)),$e(l))xl(l,a,12,[o,u]);else{const v=kt(l),m=dt(l);if(v||m){const b=()=>{if(t.f){const I=v?g(l)?h[l]:u[l]:l.value;r?Se(I)&&pp(I,i):Se(I)?I.includes(i)||I.push(i):v?(u[l]=[i],g(l)&&(h[l]=u[l])):(l.value=[i],t.k&&(u[t.k]=l.value))}else v?(u[l]=o,g(l)&&(h[l]=o)):m&&(l.value=o,t.k&&(u[t.k]=o))};o?(b.id=-1,En(b,n)):b()}}}Hu().requestIdleCallback;Hu().cancelIdleCallback;const to=t=>!!t.type.__asyncLoader,Ku=t=>t.type.__isKeepAlive;function oS(t,e){yx(t,"a",e)}function aS(t,e){yx(t,"da",e)}function yx(t,e,n=$t){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(Gu(e,s,n),n){let r=n.parent;for(;r&&r.parent;)Ku(r.parent.vnode)&&lS(s,e,n,r),r=r.parent}}function lS(t,e,n,s){const r=Gu(e,t,s,!0);Ai(()=>{pp(s[e],r)},n)}function Gu(t,e,n=$t,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Bs();const a=El(n),l=Yn(e,n,t,o);return a(),js(),l});return s?r.unshift(i):r.push(i),i}}const Ys=t=>(e,n=$t)=>{(!Ka||t==="sp")&&Gu(t,(...s)=>e(...s),n)},cS=Ys("bm"),_t=Ys("m"),uS=Ys("bu"),dS=Ys("u"),vx=Ys("bum"),Ai=Ys("um"),hS=Ys("sp"),fS=Ys("rtg"),pS=Ys("rtc");function gS(t,e=$t){Gu("ec",t,e)}const bx="components";function ko(t,e){return xx(bx,t,!0,e)||t}const _x=Symbol.for("v-ndc");function mS(t){return kt(t)?xx(bx,t,!1)||t:t||_x}function xx(t,e,n=!0,s=!1){const r=Dt||$t;if(r){const i=r.type;{const a=sA(i,!1);if(a&&(a===e||a===Fn(e)||a===zu(Fn(e))))return i}const o=o0(r[t]||i[t],e)||o0(r.appContext[t],e);return!o&&s?i:o}}function o0(t,e){return t&&(t[e]||t[Fn(e)]||t[zu(Fn(e))])}function Ne(t,e,n,s){let r;const i=n,o=Se(t);if(o||kt(t)){const a=o&&_r(t);let l=!1,c=!1;a&&(l=!Ln(t),c=Tr(t),t=qu(t)),r=new Array(t.length);for(let u=0,h=t.length;u<h;u++)r[u]=e(l?c?Zc(Wt(t[u])):Wt(t[u]):t[u],u,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let a=0;a<t;a++)r[a]=e(a+1,a,void 0,i)}else if(ct(t))if(t[Symbol.iterator])r=Array.from(t,(a,l)=>e(a,l,void 0,i));else{const a=Object.keys(t);r=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];r[l]=e(t[u],u,l,i)}}else r=[];return r}function Ip(t,e,n={},s,r){if(Dt.ce||Dt.parent&&to(Dt.parent)&&Dt.parent.ce)return C(),Je(xe,null,[ae("slot",n,s)],64);let i=t[e];i&&i._c&&(i._d=!1),C();const o=i&&wx(i(n)),a=n.key||o&&o.key,l=Je(xe,{key:(a&&!Gn(a)?a:`_${e}`)+""},o||[],o&&t._===1?64:-2);return!r&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),i&&i._c&&(i._d=!0),l}function wx(t){return t.some(e=>Wa(e)?!(e.type===an||e.type===xe&&!wx(e.children)):!0)?t:null}const cf=t=>t?jx(t)?Xu(t):cf(t.parent):null,ka=Ut(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>cf(t.parent),$root:t=>cf(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>kx(t),$forceUpdate:t=>t.f||(t.f=()=>{Tp(t.update)}),$nextTick:t=>t.n||(t.n=Pn.bind(t.proxy)),$watch:t=>$S.bind(t)}),dh=(t,e)=>t!==lt&&!t.__isScriptSetup&&st(t,e),yS={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const g=o[e];if(g!==void 0)switch(g){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(dh(s,e))return o[e]=1,s[e];if(r!==lt&&st(r,e))return o[e]=2,r[e];if((c=t.propsOptions[0])&&st(c,e))return o[e]=3,i[e];if(n!==lt&&st(n,e))return o[e]=4,n[e];uf&&(o[e]=0)}}const u=ka[e];let h,f;if(u)return e==="$attrs"&&rn(t.attrs,"get",""),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==lt&&st(n,e))return o[e]=4,n[e];if(f=l.config.globalProperties,st(f,e))return f[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return dh(r,e)?(r[e]=n,!0):s!==lt&&st(s,e)?(s[e]=n,!0):st(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,propsOptions:i}},o){let a;return!!n[o]||t!==lt&&st(t,o)||dh(e,o)||(a=i[0])&&st(a,o)||st(s,o)||st(ka,o)||st(r.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:st(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function a0(t){return Se(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let uf=!0;function vS(t){const e=kx(t),n=t.proxy,s=t.ctx;uf=!1,e.beforeCreate&&l0(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:f,beforeUpdate:g,updated:v,activated:m,deactivated:b,beforeDestroy:I,beforeUnmount:T,destroyed:D,unmounted:L,render:M,renderTracked:$,renderTriggered:E,errorCaptured:_,serverPrefetch:w,expose:A,inheritAttrs:k,components:S,directives:R,filters:me}=e;if(c&&bS(c,s,null),o)for(const F in o){const K=o[F];$e(K)&&(s[F]=K.bind(n))}if(r){const F=r.call(n,n);ct(F)&&(t.data=gi(F))}if(uf=!0,i)for(const F in i){const K=i[F],Re=$e(K)?K.bind(n,n):$e(K.get)?K.get.bind(n,n):cs,mt=!$e(K)&&$e(K.set)?K.set.bind(n):cs,gt=be({get:Re,set:mt});Object.defineProperty(s,F,{enumerable:!0,configurable:!0,get:()=>gt.value,set:Ve=>gt.value=Ve})}if(a)for(const F in a)Ex(a[F],s,n,F);if(l){const F=$e(l)?l.call(n):l;Reflect.ownKeys(F).forEach(K=>{Vs(K,F[K])})}u&&l0(u,t,"c");function se(F,K){Se(K)?K.forEach(Re=>F(Re.bind(n))):K&&F(K.bind(n))}if(se(cS,h),se(_t,f),se(uS,g),se(dS,v),se(oS,m),se(aS,b),se(gS,_),se(pS,$),se(fS,E),se(vx,T),se(Ai,L),se(hS,w),Se(A))if(A.length){const F=t.exposed||(t.exposed={});A.forEach(K=>{Object.defineProperty(F,K,{get:()=>n[K],set:Re=>n[K]=Re})})}else t.exposed||(t.exposed={});M&&t.render===cs&&(t.render=M),k!=null&&(t.inheritAttrs=k),S&&(t.components=S),R&&(t.directives=R),w&&mx(t)}function bS(t,e,n=cs){Se(t)&&(t=df(t));for(const s in t){const r=t[s];let i;ct(r)?"default"in r?i=Ft(r.from||s,r.default,!0):i=Ft(r.from||s):i=Ft(r),dt(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function l0(t,e,n){Yn(Se(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function Ex(t,e,n,s){let r=s.includes(".")?Lx(n,s):()=>n[s];if(kt(t)){const i=e[t];$e(i)&&vt(r,i)}else if($e(t))vt(r,t.bind(n));else if(ct(t))if(Se(t))t.forEach(i=>Ex(i,e,n,s));else{const i=$e(t.handler)?t.handler.bind(n):e[t.handler];$e(i)&&vt(r,i,t)}}function kx(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!r.length&&!n&&!s?l=e:(l={},r.length&&r.forEach(c=>ru(l,c,o,!0)),ru(l,e,o)),ct(e)&&i.set(e,l),l}function ru(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&ru(t,i,n,!0),r&&r.forEach(o=>ru(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const a=_S[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const _S={data:c0,props:u0,emits:u0,methods:aa,computed:aa,beforeCreate:pn,created:pn,beforeMount:pn,mounted:pn,beforeUpdate:pn,updated:pn,beforeDestroy:pn,beforeUnmount:pn,destroyed:pn,unmounted:pn,activated:pn,deactivated:pn,errorCaptured:pn,serverPrefetch:pn,components:aa,directives:aa,watch:wS,provide:c0,inject:xS};function c0(t,e){return e?t?function(){return Ut($e(t)?t.call(this,this):t,$e(e)?e.call(this,this):e)}:e:t}function xS(t,e){return aa(df(t),df(e))}function df(t){if(Se(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function pn(t,e){return t?[...new Set([].concat(t,e))]:e}function aa(t,e){return t?Ut(Object.create(null),t,e):e}function u0(t,e){return t?Se(t)&&Se(e)?[...new Set([...t,...e])]:Ut(Object.create(null),a0(t),a0(e??{})):e}function wS(t,e){if(!t)return e;if(!e)return t;const n=Ut(Object.create(null),t);for(const s in e)n[s]=pn(t[s],e[s]);return n}function Tx(){return{app:null,config:{isNativeTag:uI,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ES=0;function kS(t,e){return function(s,r=null){$e(s)||(s=Ut({},s)),r!=null&&!ct(r)&&(r=null);const i=Tx(),o=new WeakSet,a=[];let l=!1;const c=i.app={_uid:ES++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:Hx,get config(){return i.config},set config(u){},use(u,...h){return o.has(u)||(u&&$e(u.install)?(o.add(u),u.install(c,...h)):$e(u)&&(o.add(u),u(c,...h))),c},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),c},component(u,h){return h?(i.components[u]=h,c):i.components[u]},directive(u,h){return h?(i.directives[u]=h,c):i.directives[u]},mount(u,h,f){if(!l){const g=c._ceVNode||ae(s,r);return g.appContext=i,f===!0?f="svg":f===!1&&(f=void 0),t(g,u,f),l=!0,c._container=u,u.__vue_app__=c,Xu(g.component)}},onUnmount(u){a.push(u)},unmount(){l&&(Yn(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(u,h){return i.provides[u]=h,c},runWithContext(u){const h=li;li=c;try{return u()}finally{li=h}}};return c}}let li=null;function Vs(t,e){if($t){let n=$t.provides;const s=$t.parent&&$t.parent.provides;s===n&&(n=$t.provides=Object.create(s)),n[t]=e}}function Ft(t,e,n=!1){const s=$t||Dt;if(s||li){let r=li?li._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return n&&$e(e)?e.call(s&&s.proxy):e}}function TS(){return!!($t||Dt||li)}const Ix={},Sx=()=>Object.create(Ix),Ax=t=>Object.getPrototypeOf(t)===Ix;function IS(t,e,n,s=!1){const r={},i=Sx();t.propsDefaults=Object.create(null),Cx(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:tx(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function SS(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,a=qe(r),[l]=t.propsOptions;let c=!1;if((s||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let h=0;h<u.length;h++){let f=u[h];if(Yu(t.emitsOptions,f))continue;const g=e[f];if(l)if(st(i,f))g!==i[f]&&(i[f]=g,c=!0);else{const v=Fn(f);r[v]=hf(l,a,v,g,t,!1)}else g!==i[f]&&(i[f]=g,c=!0)}}}else{Cx(t,e,r,i)&&(c=!0);let u;for(const h in a)(!e||!st(e,h)&&((u=Mr(h))===h||!st(e,u)))&&(l?n&&(n[h]!==void 0||n[u]!==void 0)&&(r[h]=hf(l,a,h,void 0,t,!0)):delete r[h]);if(i!==a)for(const h in i)(!e||!st(e,h))&&(delete i[h],c=!0)}c&&Cs(t.attrs,"set","")}function Cx(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(xa(l))continue;const c=e[l];let u;r&&st(r,u=Fn(l))?!i||!i.includes(u)?n[u]=c:(a||(a={}))[u]=c:Yu(t.emitsOptions,l)||(!(l in s)||c!==s[l])&&(s[l]=c,o=!0)}if(i){const l=qe(n),c=a||lt;for(let u=0;u<i.length;u++){const h=i[u];n[h]=hf(r,l,h,c[h],t,!st(c,h))}}return o}function hf(t,e,n,s,r,i){const o=t[n];if(o!=null){const a=st(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&$e(l)){const{propsDefaults:c}=r;if(n in c)s=c[n];else{const u=El(r);s=c[n]=l.call(null,e),u()}}else s=l;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===Mr(n))&&(s=!0))}return s}const AS=new WeakMap;function Px(t,e,n=!1){const s=n?AS:e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},a=[];let l=!1;if(!$e(t)){const u=h=>{l=!0;const[f,g]=Px(h,e,!0);Ut(o,f),g&&a.push(...g)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!l)return ct(t)&&s.set(t,Ji),Ji;if(Se(i))for(let u=0;u<i.length;u++){const h=Fn(i[u]);d0(h)&&(o[h]=lt)}else if(i)for(const u in i){const h=Fn(u);if(d0(h)){const f=i[u],g=o[h]=Se(f)||$e(f)?{type:f}:Ut({},f),v=g.type;let m=!1,b=!0;if(Se(v))for(let I=0;I<v.length;++I){const T=v[I],D=$e(T)&&T.name;if(D==="Boolean"){m=!0;break}else D==="String"&&(b=!1)}else m=$e(v)&&v.name==="Boolean";g[0]=m,g[1]=b,(m||st(g,"default"))&&a.push(h)}}const c=[o,a];return ct(t)&&s.set(t,c),c}function d0(t){return t[0]!=="$"&&!xa(t)}const Sp=t=>t[0]==="_"||t==="$stable",Ap=t=>Se(t)?t.map(ls):[ls(t)],CS=(t,e,n)=>{if(e._n)return e;const s=ye((...r)=>Ap(e(...r)),n);return s._c=!1,s},Rx=(t,e,n)=>{const s=t._ctx;for(const r in t){if(Sp(r))continue;const i=t[r];if($e(i))e[r]=CS(r,i,s);else if(i!=null){const o=Ap(i);e[r]=()=>o}}},Ox=(t,e)=>{const n=Ap(e);t.slots.default=()=>n},Dx=(t,e,n)=>{for(const s in e)(n||!Sp(s))&&(t[s]=e[s])},PS=(t,e,n)=>{const s=t.slots=Sx();if(t.vnode.shapeFlag&32){const r=e._;r?(Dx(s,e,n),n&&M_(s,"_",r,!0)):Rx(e,s)}else e&&Ox(t,e)},RS=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=lt;if(s.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:Dx(r,e,n):(i=!e.$stable,Rx(e,r)),o=e}else e&&(Ox(t,e),o={default:1});if(i)for(const a in r)!Sp(a)&&o[a]==null&&delete r[a]},En=qS;function OS(t){return DS(t)}function DS(t,e){const n=Hu();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:f,setScopeId:g=cs,insertStaticContent:v}=t,m=(N,V,B,G=null,J=null,Y=null,pe=void 0,de=null,ce=!!V.dynamicChildren)=>{if(N===V)return;N&&!ti(N,V)&&(G=H(N),Ve(N,J,Y,!0),N=null),V.patchFlag===-2&&(ce=!1,V.dynamicChildren=null);const{type:re,ref:Ae,shapeFlag:fe}=V;switch(re){case Qu:b(N,V,B,G);break;case an:I(N,V,B,G);break;case Cc:N==null&&T(V,B,G,pe);break;case xe:S(N,V,B,G,J,Y,pe,de,ce);break;default:fe&1?M(N,V,B,G,J,Y,pe,de,ce):fe&6?R(N,V,B,G,J,Y,pe,de,ce):(fe&64||fe&128)&&re.process(N,V,B,G,J,Y,pe,de,ce,ge)}Ae!=null&&J&&su(Ae,N&&N.ref,Y,V||N,!V)},b=(N,V,B,G)=>{if(N==null)s(V.el=a(V.children),B,G);else{const J=V.el=N.el;V.children!==N.children&&c(J,V.children)}},I=(N,V,B,G)=>{N==null?s(V.el=l(V.children||""),B,G):V.el=N.el},T=(N,V,B,G)=>{[N.el,N.anchor]=v(N.children,V,B,G,N.el,N.anchor)},D=({el:N,anchor:V},B,G)=>{let J;for(;N&&N!==V;)J=f(N),s(N,B,G),N=J;s(V,B,G)},L=({el:N,anchor:V})=>{let B;for(;N&&N!==V;)B=f(N),r(N),N=B;r(V)},M=(N,V,B,G,J,Y,pe,de,ce)=>{V.type==="svg"?pe="svg":V.type==="math"&&(pe="mathml"),N==null?$(V,B,G,J,Y,pe,de,ce):w(N,V,J,Y,pe,de,ce)},$=(N,V,B,G,J,Y,pe,de)=>{let ce,re;const{props:Ae,shapeFlag:fe,transition:ke,dirs:Me}=N;if(ce=N.el=o(N.type,Y,Ae&&Ae.is,Ae),fe&8?u(ce,N.children):fe&16&&_(N.children,ce,null,G,J,hh(N,Y),pe,de),Me&&Hr(N,null,G,"created"),E(ce,N,N.scopeId,pe,G),Ae){for(const Ue in Ae)Ue!=="value"&&!xa(Ue)&&i(ce,Ue,null,Ae[Ue],Y,G);"value"in Ae&&i(ce,"value",null,Ae.value,Y),(re=Ae.onVnodeBeforeMount)&&es(re,G,N)}Me&&Hr(N,null,G,"beforeMount");const Pe=MS(J,ke);Pe&&ke.beforeEnter(ce),s(ce,V,B),((re=Ae&&Ae.onVnodeMounted)||Pe||Me)&&En(()=>{re&&es(re,G,N),Pe&&ke.enter(ce),Me&&Hr(N,null,G,"mounted")},J)},E=(N,V,B,G,J)=>{if(B&&g(N,B),G)for(let Y=0;Y<G.length;Y++)g(N,G[Y]);if(J){let Y=J.subTree;if(V===Y||$x(Y.type)&&(Y.ssContent===V||Y.ssFallback===V)){const pe=J.vnode;E(N,pe,pe.scopeId,pe.slotScopeIds,J.parent)}}},_=(N,V,B,G,J,Y,pe,de,ce=0)=>{for(let re=ce;re<N.length;re++){const Ae=N[re]=de?cr(N[re]):ls(N[re]);m(null,Ae,V,B,G,J,Y,pe,de)}},w=(N,V,B,G,J,Y,pe)=>{const de=V.el=N.el;let{patchFlag:ce,dynamicChildren:re,dirs:Ae}=V;ce|=N.patchFlag&16;const fe=N.props||lt,ke=V.props||lt;let Me;if(B&&qr(B,!1),(Me=ke.onVnodeBeforeUpdate)&&es(Me,B,V,N),Ae&&Hr(V,N,B,"beforeUpdate"),B&&qr(B,!0),(fe.innerHTML&&ke.innerHTML==null||fe.textContent&&ke.textContent==null)&&u(de,""),re?A(N.dynamicChildren,re,de,B,G,hh(V,J),Y):pe||K(N,V,de,null,B,G,hh(V,J),Y,!1),ce>0){if(ce&16)k(de,fe,ke,B,J);else if(ce&2&&fe.class!==ke.class&&i(de,"class",null,ke.class,J),ce&4&&i(de,"style",fe.style,ke.style,J),ce&8){const Pe=V.dynamicProps;for(let Ue=0;Ue<Pe.length;Ue++){const Qe=Pe[Ue],Qt=fe[Qe],Bt=ke[Qe];(Bt!==Qt||Qe==="value")&&i(de,Qe,Qt,Bt,J,B)}}ce&1&&N.children!==V.children&&u(de,V.children)}else!pe&&re==null&&k(de,fe,ke,B,J);((Me=ke.onVnodeUpdated)||Ae)&&En(()=>{Me&&es(Me,B,V,N),Ae&&Hr(V,N,B,"updated")},G)},A=(N,V,B,G,J,Y,pe)=>{for(let de=0;de<V.length;de++){const ce=N[de],re=V[de],Ae=ce.el&&(ce.type===xe||!ti(ce,re)||ce.shapeFlag&198)?h(ce.el):B;m(ce,re,Ae,null,G,J,Y,pe,!0)}},k=(N,V,B,G,J)=>{if(V!==B){if(V!==lt)for(const Y in V)!xa(Y)&&!(Y in B)&&i(N,Y,V[Y],null,J,G);for(const Y in B){if(xa(Y))continue;const pe=B[Y],de=V[Y];pe!==de&&Y!=="value"&&i(N,Y,de,pe,J,G)}"value"in B&&i(N,"value",V.value,B.value,J)}},S=(N,V,B,G,J,Y,pe,de,ce)=>{const re=V.el=N?N.el:a(""),Ae=V.anchor=N?N.anchor:a("");let{patchFlag:fe,dynamicChildren:ke,slotScopeIds:Me}=V;Me&&(de=de?de.concat(Me):Me),N==null?(s(re,B,G),s(Ae,B,G),_(V.children||[],B,Ae,J,Y,pe,de,ce)):fe>0&&fe&64&&ke&&N.dynamicChildren?(A(N.dynamicChildren,ke,B,J,Y,pe,de),(V.key!=null||J&&V===J.subTree)&&Mx(N,V,!0)):K(N,V,B,Ae,J,Y,pe,de,ce)},R=(N,V,B,G,J,Y,pe,de,ce)=>{V.slotScopeIds=de,N==null?V.shapeFlag&512?J.ctx.activate(V,B,G,pe,ce):me(V,B,G,J,Y,pe,ce):Te(N,V,ce)},me=(N,V,B,G,J,Y,pe)=>{const de=N.component=JS(N,G,J);if(Ku(N)&&(de.ctx.renderer=ge),ZS(de,!1,pe),de.asyncDep){if(J&&J.registerDep(de,se,pe),!N.el){const ce=de.subTree=ae(an);I(null,ce,V,B)}}else se(de,N,V,B,J,Y,pe)},Te=(N,V,B)=>{const G=V.component=N.component;if(zS(N,V,B))if(G.asyncDep&&!G.asyncResolved){F(G,V,B);return}else G.next=V,G.update();else V.el=N.el,G.vnode=V},se=(N,V,B,G,J,Y,pe)=>{const de=()=>{if(N.isMounted){let{next:fe,bu:ke,u:Me,parent:Pe,vnode:Ue}=N;{const Xt=Nx(N);if(Xt){fe&&(fe.el=Ue.el,F(N,fe,pe)),Xt.asyncDep.then(()=>{N.isUnmounted||de()});return}}let Qe=fe,Qt;qr(N,!1),fe?(fe.el=Ue.el,F(N,fe,pe)):fe=Ue,ke&&Ac(ke),(Qt=fe.props&&fe.props.onVnodeBeforeUpdate)&&es(Qt,Pe,fe,Ue),qr(N,!0);const Bt=f0(N),Rn=N.subTree;N.subTree=Bt,m(Rn,Bt,h(Rn.el),H(Rn),N,J,Y),fe.el=Bt.el,Qe===null&&HS(N,Bt.el),Me&&En(Me,J),(Qt=fe.props&&fe.props.onVnodeUpdated)&&En(()=>es(Qt,Pe,fe,Ue),J)}else{let fe;const{el:ke,props:Me}=V,{bm:Pe,m:Ue,parent:Qe,root:Qt,type:Bt}=N,Rn=to(V);qr(N,!1),Pe&&Ac(Pe),!Rn&&(fe=Me&&Me.onVnodeBeforeMount)&&es(fe,Qe,V),qr(N,!0);{Qt.ce&&Qt.ce._injectChildStyle(Bt);const Xt=N.subTree=f0(N);m(null,Xt,B,G,N,J,Y),V.el=Xt.el}if(Ue&&En(Ue,J),!Rn&&(fe=Me&&Me.onVnodeMounted)){const Xt=V;En(()=>es(fe,Qe,Xt),J)}(V.shapeFlag&256||Qe&&to(Qe.vnode)&&Qe.vnode.shapeFlag&256)&&N.a&&En(N.a,J),N.isMounted=!0,V=B=G=null}};N.scope.on();const ce=N.effect=new B_(de);N.scope.off();const re=N.update=ce.run.bind(ce),Ae=N.job=ce.runIfDirty.bind(ce);Ae.i=N,Ae.id=N.uid,ce.scheduler=()=>Tp(Ae),qr(N,!0),re()},F=(N,V,B)=>{V.component=N;const G=N.vnode.props;N.vnode=V,N.next=null,SS(N,V.props,G,B),RS(N,V.children,B),Bs(),r0(N),js()},K=(N,V,B,G,J,Y,pe,de,ce=!1)=>{const re=N&&N.children,Ae=N?N.shapeFlag:0,fe=V.children,{patchFlag:ke,shapeFlag:Me}=V;if(ke>0){if(ke&128){mt(re,fe,B,G,J,Y,pe,de,ce);return}else if(ke&256){Re(re,fe,B,G,J,Y,pe,de,ce);return}}Me&8?(Ae&16&&je(re,J,Y),fe!==re&&u(B,fe)):Ae&16?Me&16?mt(re,fe,B,G,J,Y,pe,de,ce):je(re,J,Y,!0):(Ae&8&&u(B,""),Me&16&&_(fe,B,G,J,Y,pe,de,ce))},Re=(N,V,B,G,J,Y,pe,de,ce)=>{N=N||Ji,V=V||Ji;const re=N.length,Ae=V.length,fe=Math.min(re,Ae);let ke;for(ke=0;ke<fe;ke++){const Me=V[ke]=ce?cr(V[ke]):ls(V[ke]);m(N[ke],Me,B,null,J,Y,pe,de,ce)}re>Ae?je(N,J,Y,!0,!1,fe):_(V,B,G,J,Y,pe,de,ce,fe)},mt=(N,V,B,G,J,Y,pe,de,ce)=>{let re=0;const Ae=V.length;let fe=N.length-1,ke=Ae-1;for(;re<=fe&&re<=ke;){const Me=N[re],Pe=V[re]=ce?cr(V[re]):ls(V[re]);if(ti(Me,Pe))m(Me,Pe,B,null,J,Y,pe,de,ce);else break;re++}for(;re<=fe&&re<=ke;){const Me=N[fe],Pe=V[ke]=ce?cr(V[ke]):ls(V[ke]);if(ti(Me,Pe))m(Me,Pe,B,null,J,Y,pe,de,ce);else break;fe--,ke--}if(re>fe){if(re<=ke){const Me=ke+1,Pe=Me<Ae?V[Me].el:G;for(;re<=ke;)m(null,V[re]=ce?cr(V[re]):ls(V[re]),B,Pe,J,Y,pe,de,ce),re++}}else if(re>ke)for(;re<=fe;)Ve(N[re],J,Y,!0),re++;else{const Me=re,Pe=re,Ue=new Map;for(re=Pe;re<=ke;re++){const jt=V[re]=ce?cr(V[re]):ls(V[re]);jt.key!=null&&Ue.set(jt.key,re)}let Qe,Qt=0;const Bt=ke-Pe+1;let Rn=!1,Xt=0;const Xs=new Array(Bt);for(re=0;re<Bt;re++)Xs[re]=0;for(re=Me;re<=fe;re++){const jt=N[re];if(Qt>=Bt){Ve(jt,J,Y,!0);continue}let On;if(jt.key!=null)On=Ue.get(jt.key);else for(Qe=Pe;Qe<=ke;Qe++)if(Xs[Qe-Pe]===0&&ti(jt,V[Qe])){On=Qe;break}On===void 0?Ve(jt,J,Y,!0):(Xs[On-Pe]=re+1,On>=Xt?Xt=On:Rn=!0,m(jt,V[On],B,null,J,Y,pe,de,ce),Qt++)}const $o=Rn?NS(Xs):Ji;for(Qe=$o.length-1,re=Bt-1;re>=0;re--){const jt=Pe+re,On=V[jt],Vl=jt+1<Ae?V[jt+1].el:G;Xs[re]===0?m(null,On,B,Vl,J,Y,pe,de,ce):Rn&&(Qe<0||re!==$o[Qe]?gt(On,B,Vl,2):Qe--)}}},gt=(N,V,B,G,J=null)=>{const{el:Y,type:pe,transition:de,children:ce,shapeFlag:re}=N;if(re&6){gt(N.component.subTree,V,B,G);return}if(re&128){N.suspense.move(V,B,G);return}if(re&64){pe.move(N,V,B,ge);return}if(pe===xe){s(Y,V,B);for(let fe=0;fe<ce.length;fe++)gt(ce[fe],V,B,G);s(N.anchor,V,B);return}if(pe===Cc){D(N,V,B);return}if(G!==2&&re&1&&de)if(G===0)de.beforeEnter(Y),s(Y,V,B),En(()=>de.enter(Y),J);else{const{leave:fe,delayLeave:ke,afterLeave:Me}=de,Pe=()=>{N.ctx.isUnmounted?r(Y):s(Y,V,B)},Ue=()=>{fe(Y,()=>{Pe(),Me&&Me()})};ke?ke(Y,Pe,Ue):Ue()}else s(Y,V,B)},Ve=(N,V,B,G=!1,J=!1)=>{const{type:Y,props:pe,ref:de,children:ce,dynamicChildren:re,shapeFlag:Ae,patchFlag:fe,dirs:ke,cacheIndex:Me}=N;if(fe===-2&&(J=!1),de!=null&&(Bs(),su(de,null,B,N,!0),js()),Me!=null&&(V.renderCache[Me]=void 0),Ae&256){V.ctx.deactivate(N);return}const Pe=Ae&1&&ke,Ue=!to(N);let Qe;if(Ue&&(Qe=pe&&pe.onVnodeBeforeUnmount)&&es(Qe,V,N),Ae&6)_e(N.component,B,G);else{if(Ae&128){N.suspense.unmount(B,G);return}Pe&&Hr(N,null,V,"beforeUnmount"),Ae&64?N.type.remove(N,V,B,ge,G):re&&!re.hasOnce&&(Y!==xe||fe>0&&fe&64)?je(re,V,B,!1,!0):(Y===xe&&fe&384||!J&&Ae&16)&&je(ce,V,B),G&&ie(N)}(Ue&&(Qe=pe&&pe.onVnodeUnmounted)||Pe)&&En(()=>{Qe&&es(Qe,V,N),Pe&&Hr(N,null,V,"unmounted")},B)},ie=N=>{const{type:V,el:B,anchor:G,transition:J}=N;if(V===xe){ue(B,G);return}if(V===Cc){L(N);return}const Y=()=>{r(B),J&&!J.persisted&&J.afterLeave&&J.afterLeave()};if(N.shapeFlag&1&&J&&!J.persisted){const{leave:pe,delayLeave:de}=J,ce=()=>pe(B,Y);de?de(N.el,Y,ce):ce()}else Y()},ue=(N,V)=>{let B;for(;N!==V;)B=f(N),r(N),N=B;r(V)},_e=(N,V,B)=>{const{bum:G,scope:J,job:Y,subTree:pe,um:de,m:ce,a:re,parent:Ae,slots:{__:fe}}=N;h0(ce),h0(re),G&&Ac(G),Ae&&Se(fe)&&fe.forEach(ke=>{Ae.renderCache[ke]=void 0}),J.stop(),Y&&(Y.flags|=8,Ve(pe,N,V,B)),de&&En(de,V),En(()=>{N.isUnmounted=!0},V),V&&V.pendingBranch&&!V.isUnmounted&&N.asyncDep&&!N.asyncResolved&&N.suspenseId===V.pendingId&&(V.deps--,V.deps===0&&V.resolve())},je=(N,V,B,G=!1,J=!1,Y=0)=>{for(let pe=Y;pe<N.length;pe++)Ve(N[pe],V,B,G,J)},H=N=>{if(N.shapeFlag&6)return H(N.component.subTree);if(N.shapeFlag&128)return N.suspense.next();const V=f(N.anchor||N.el),B=V&&V[tS];return B?f(B):V};let ee=!1;const oe=(N,V,B)=>{N==null?V._vnode&&Ve(V._vnode,null,null,!0):m(V._vnode||null,N,V,null,null,null,B),V._vnode=N,ee||(ee=!0,r0(),ax(),ee=!1)},ge={p:m,um:Ve,m:gt,r:ie,mt:me,mc:_,pc:K,pbc:A,n:H,o:t};return{render:oe,hydrate:void 0,createApp:kS(oe)}}function hh({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function qr({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function MS(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Mx(t,e,n=!1){const s=t.children,r=e.children;if(Se(s)&&Se(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=cr(r[i]),a.el=o.el),!n&&a.patchFlag!==-2&&Mx(o,a)),a.type===Qu&&(a.el=o.el),a.type===an&&!a.el&&(a.el=o.el)}}function NS(t){const e=t.slice(),n=[0];let s,r,i,o,a;const l=t.length;for(s=0;s<l;s++){const c=t[s];if(c!==0){if(r=n[n.length-1],t[r]<c){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<c?i=a+1:o=a;c<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function Nx(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Nx(e)}function h0(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const LS=Symbol.for("v-scx"),VS=()=>Ft(LS);function wl(t,e){return Cp(t,null,e)}function vt(t,e,n){return Cp(t,e,n)}function Cp(t,e,n=lt){const{immediate:s,deep:r,flush:i,once:o}=n,a=Ut({},n),l=e&&s||!e&&i!=="post";let c;if(Ka){if(i==="sync"){const g=VS();c=g.__watcherHandles||(g.__watcherHandles=[])}else if(!l){const g=()=>{};return g.stop=cs,g.resume=cs,g.pause=cs,g}}const u=$t;a.call=(g,v,m)=>Yn(g,u,v,m);let h=!1;i==="post"?a.scheduler=g=>{En(g,u&&u.suspense)}:i!=="sync"&&(h=!0,a.scheduler=(g,v)=>{v?g():Tp(g)}),a.augmentJob=g=>{e&&(g.flags|=4),h&&(g.flags|=2,u&&(g.id=u.uid,g.i=u))};const f=XI(t,e,a);return Ka&&(c?c.push(f):l&&f()),f}function $S(t,e,n){const s=this.proxy,r=kt(t)?t.includes(".")?Lx(s,t):()=>s[t]:t.bind(s,s);let i;$e(e)?i=e:(i=e.handler,n=e);const o=El(this),a=Cp(r,i.bind(s),n);return o(),a}function Lx(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const FS=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Fn(e)}Modifiers`]||t[`${Mr(e)}Modifiers`];function US(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||lt;let r=n;const i=e.startsWith("update:"),o=i&&FS(s,e.slice(7));o&&(o.trim&&(r=n.map(u=>kt(u)?u.trim():u)),o.number&&(r=n.map(Xc)));let a,l=s[a=ih(e)]||s[a=ih(Fn(e))];!l&&i&&(l=s[a=ih(Mr(e))]),l&&Yn(l,t,6,r);const c=s[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Yn(c,t,6,r)}}function Vx(t,e,n=!1){const s=e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},a=!1;if(!$e(t)){const l=c=>{const u=Vx(c,e,!0);u&&(a=!0,Ut(o,u))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(ct(t)&&s.set(t,null),null):(Se(i)?i.forEach(l=>o[l]=null):Ut(o,i),ct(t)&&s.set(t,o),o)}function Yu(t,e){return!t||!Bu(e)?!1:(e=e.slice(2).replace(/Once$/,""),st(t,e[0].toLowerCase()+e.slice(1))||st(t,Mr(e))||st(t,e))}function f0(t){const{type:e,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:h,data:f,setupState:g,ctx:v,inheritAttrs:m}=t,b=nu(t);let I,T;try{if(n.shapeFlag&4){const L=r||s,M=L;I=ls(c.call(M,L,u,h,g,f,v)),T=a}else{const L=e;I=ls(L.length>1?L(h,{attrs:a,slots:o,emit:l}):L(h,null)),T=e.props?a:BS(a)}}catch(L){Ta.length=0,Wu(L,t,1),I=ae(an)}let D=I;if(T&&m!==!1){const L=Object.keys(T),{shapeFlag:M}=D;L.length&&M&7&&(i&&L.some(fp)&&(T=jS(T,i)),D=zs(D,T,!1,!0))}return n.dirs&&(D=zs(D,null,!1,!0),D.dirs=D.dirs?D.dirs.concat(n.dirs):n.dirs),n.transition&&Ha(D,n.transition),I=D,nu(b),I}const BS=t=>{let e;for(const n in t)(n==="class"||n==="style"||Bu(n))&&((e||(e={}))[n]=t[n]);return e},jS=(t,e)=>{const n={};for(const s in t)(!fp(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function zS(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:a,patchFlag:l}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?p0(s,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const f=u[h];if(o[f]!==s[f]&&!Yu(c,f))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?p0(s,o,c):!0:!!o;return!1}function p0(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!Yu(n,i))return!0}return!1}function HS({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const $x=t=>t.__isSuspense;function qS(t,e){e&&e.pendingBranch?Se(t)?e.effects.push(...t):e.effects.push(t):eS(t)}const xe=Symbol.for("v-fgt"),Qu=Symbol.for("v-txt"),an=Symbol.for("v-cmt"),Cc=Symbol.for("v-stc"),Ta=[];let An=null;function C(t=!1){Ta.push(An=t?null:[])}function WS(){Ta.pop(),An=Ta[Ta.length-1]||null}let qa=1;function g0(t,e=!1){qa+=t,t<0&&An&&e&&(An.hasOnce=!0)}function Fx(t){return t.dynamicChildren=qa>0?An||Ji:null,WS(),qa>0&&An&&An.push(t),t}function O(t,e,n,s,r,i){return Fx(p(t,e,n,s,r,i,!0))}function Je(t,e,n,s,r){return Fx(ae(t,e,n,s,r,!0))}function Wa(t){return t?t.__v_isVNode===!0:!1}function ti(t,e){return t.type===e.type&&t.key===e.key}const Ux=({key:t})=>t??null,Pc=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?kt(t)||dt(t)||$e(t)?{i:Dt,r:t,k:e,f:!!n}:t:null);function p(t,e=null,n=null,s=0,r=null,i=t===xe?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Ux(e),ref:e&&Pc(e),scopeId:cx,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Dt};return a?(Pp(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=kt(n)?8:16),qa>0&&!o&&An&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&An.push(l),l}const ae=KS;function KS(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===_x)&&(t=an),Wa(t)){const a=zs(t,e,!0);return n&&Pp(a,n),qa>0&&!i&&An&&(a.shapeFlag&6?An[An.indexOf(t)]=a:An.push(a)),a.patchFlag=-2,a}if(rA(t)&&(t=t.__vccOpts),e){e=GS(e);let{class:a,style:l}=e;a&&!kt(a)&&(e.class=le(a)),ct(l)&&(_l(l)&&!Se(l)&&(l=Ut({},l)),e.style=Eo(l))}const o=kt(t)?1:$x(t)?128:ux(t)?64:ct(t)?4:$e(t)?2:0;return p(t,e,n,s,r,o,i,!0)}function GS(t){return t?_l(t)||Ax(t)?Ut({},t):t:null}function zs(t,e,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:a,transition:l}=t,c=e?YS(r||{},e):r,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&Ux(c),ref:e&&e.ref?n&&i?Se(i)?i.concat(Pc(e)):[i,Pc(e)]:Pc(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==xe?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&zs(t.ssContent),ssFallback:t.ssFallback&&zs(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&s&&Ha(u,l.clone(u)),u}function ne(t=" ",e=0){return ae(Qu,null,t,e)}function iu(t,e){const n=ae(Cc,null,t);return n.staticCount=e,n}function X(t="",e=!1){return e?(C(),Je(an,null,t)):ae(an,null,t)}function ls(t){return t==null||typeof t=="boolean"?ae(an):Se(t)?ae(xe,null,t.slice()):Wa(t)?cr(t):ae(Qu,null,String(t))}function cr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:zs(t)}function Pp(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(Se(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),Pp(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!Ax(e)?e._ctx=Dt:r===3&&Dt&&(Dt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else $e(e)?(e={default:e,_ctx:Dt},n=32):(e=String(e),s&64?(n=16,e=[ne(e)]):n=8);t.children=e,t.shapeFlag|=n}function YS(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=le([e.class,s.class]));else if(r==="style")e.style=Eo([e.style,s.style]);else if(Bu(r)){const i=e[r],o=s[r];o&&i!==o&&!(Se(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function es(t,e,n,s=null){Yn(t,e,7,[n,s])}const QS=Tx();let XS=0;function JS(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||QS,i={uid:XS++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new $_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Px(s,r),emitsOptions:Vx(s,r),emit:null,emitted:null,propsDefaults:lt,inheritAttrs:s.inheritAttrs,ctx:lt,data:lt,props:lt,attrs:lt,slots:lt,refs:lt,setupState:lt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=US.bind(null,i),t.ce&&t.ce(i),i}let $t=null;const Bx=()=>$t||Dt;let ou,ff;{const t=Hu(),e=(n,s)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};ou=e("__VUE_INSTANCE_SETTERS__",n=>$t=n),ff=e("__VUE_SSR_SETTERS__",n=>Ka=n)}const El=t=>{const e=$t;return ou(t),t.scope.on(),()=>{t.scope.off(),ou(e)}},m0=()=>{$t&&$t.scope.off(),ou(null)};function jx(t){return t.vnode.shapeFlag&4}let Ka=!1;function ZS(t,e=!1,n=!1){e&&ff(e);const{props:s,children:r}=t.vnode,i=jx(t);IS(t,s,i,e),PS(t,r,n||e);const o=i?eA(t,e):void 0;return e&&ff(!1),o}function eA(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,yS);const{setup:s}=n;if(s){Bs();const r=t.setupContext=s.length>1?nA(t):null,i=El(t),o=xl(s,t,0,[t.props,r]),a=R_(o);if(js(),i(),(a||t.sp)&&!to(t)&&mx(t),a){if(o.then(m0,m0),e)return o.then(l=>{y0(t,l)}).catch(l=>{Wu(l,t,0)});t.asyncDep=o}else y0(t,o)}else zx(t)}function y0(t,e,n){$e(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ct(e)&&(t.setupState=rx(e)),zx(t)}function zx(t,e,n){const s=t.type;t.render||(t.render=s.render||cs);{const r=El(t);Bs();try{vS(t)}finally{js(),r()}}}const tA={get(t,e){return rn(t,"get",""),t[e]}};function nA(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,tA),slots:t.slots,emit:t.emit,expose:e}}function Xu(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(rx(Ep(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in ka)return ka[n](t)},has(e,n){return n in e||n in ka}})):t.proxy}function sA(t,e=!0){return $e(t)?t.displayName||t.name:t.name||e&&t.__name}function rA(t){return $e(t)&&"__vccOpts"in t}const be=(t,e)=>YI(t,e,Ka);function mi(t,e,n){const s=arguments.length;return s===2?ct(e)&&!Se(e)?Wa(e)?ae(t,null,[e]):ae(t,e):ae(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Wa(n)&&(n=[n]),ae(t,e,n))}const Hx="3.5.16";/**
* @vue/runtime-dom v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let pf;const v0=typeof window<"u"&&window.trustedTypes;if(v0)try{pf=v0.createPolicy("vue",{createHTML:t=>t})}catch{}const qx=pf?t=>pf.createHTML(t):t=>t,iA="http://www.w3.org/2000/svg",oA="http://www.w3.org/1998/Math/MathML",Is=typeof document<"u"?document:null,b0=Is&&Is.createElement("template"),aA={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e==="svg"?Is.createElementNS(iA,t):e==="mathml"?Is.createElementNS(oA,t):n?Is.createElement(t,{is:n}):Is.createElement(t);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>Is.createTextNode(t),createComment:t=>Is.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Is.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{b0.innerHTML=qx(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const a=b0.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},tr="transition",Jo="animation",Ga=Symbol("_vtc"),Wx={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},lA=Ut({},dx,Wx),cA=t=>(t.displayName="Transition",t.props=lA,t),To=cA((t,{slots:e})=>mi(rS,uA(t),e)),Wr=(t,e=[])=>{Se(t)?t.forEach(n=>n(...e)):t&&t(...e)},_0=t=>t?Se(t)?t.some(e=>e.length>1):t.length>1:!1;function uA(t){const e={};for(const S in t)S in Wx||(e[S]=t[S]);if(t.css===!1)return e;const{name:n="v",type:s,duration:r,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:g=`${n}-leave-to`}=t,v=dA(r),m=v&&v[0],b=v&&v[1],{onBeforeEnter:I,onEnter:T,onEnterCancelled:D,onLeave:L,onLeaveCancelled:M,onBeforeAppear:$=I,onAppear:E=T,onAppearCancelled:_=D}=e,w=(S,R,me,Te)=>{S._enterCancelled=Te,Kr(S,R?u:a),Kr(S,R?c:o),me&&me()},A=(S,R)=>{S._isLeaving=!1,Kr(S,h),Kr(S,g),Kr(S,f),R&&R()},k=S=>(R,me)=>{const Te=S?E:T,se=()=>w(R,S,me);Wr(Te,[R,se]),x0(()=>{Kr(R,S?l:i),xs(R,S?u:a),_0(Te)||w0(R,s,m,se)})};return Ut(e,{onBeforeEnter(S){Wr(I,[S]),xs(S,i),xs(S,o)},onBeforeAppear(S){Wr($,[S]),xs(S,l),xs(S,c)},onEnter:k(!1),onAppear:k(!0),onLeave(S,R){S._isLeaving=!0;const me=()=>A(S,R);xs(S,h),S._enterCancelled?(xs(S,f),T0()):(T0(),xs(S,f)),x0(()=>{S._isLeaving&&(Kr(S,h),xs(S,g),_0(L)||w0(S,s,b,me))}),Wr(L,[S,me])},onEnterCancelled(S){w(S,!1,void 0,!0),Wr(D,[S])},onAppearCancelled(S){w(S,!0,void 0,!0),Wr(_,[S])},onLeaveCancelled(S){A(S),Wr(M,[S])}})}function dA(t){if(t==null)return null;if(ct(t))return[fh(t.enter),fh(t.leave)];{const e=fh(t);return[e,e]}}function fh(t){return gI(t)}function xs(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Ga]||(t[Ga]=new Set)).add(e)}function Kr(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.remove(s));const n=t[Ga];n&&(n.delete(e),n.size||(t[Ga]=void 0))}function x0(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let hA=0;function w0(t,e,n,s){const r=t._endId=++hA,i=()=>{r===t._endId&&s()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:a,propCount:l}=fA(t,e);if(!o)return s();const c=o+"end";let u=0;const h=()=>{t.removeEventListener(c,f),i()},f=g=>{g.target===t&&++u>=l&&h()};setTimeout(()=>{u<l&&h()},a+1),t.addEventListener(c,f)}function fA(t,e){const n=window.getComputedStyle(t),s=v=>(n[v]||"").split(", "),r=s(`${tr}Delay`),i=s(`${tr}Duration`),o=E0(r,i),a=s(`${Jo}Delay`),l=s(`${Jo}Duration`),c=E0(a,l);let u=null,h=0,f=0;e===tr?o>0&&(u=tr,h=o,f=i.length):e===Jo?c>0&&(u=Jo,h=c,f=l.length):(h=Math.max(o,c),u=h>0?o>c?tr:Jo:null,f=u?u===tr?i.length:l.length:0);const g=u===tr&&/\b(transform|all)(,|$)/.test(s(`${tr}Property`).toString());return{type:u,timeout:h,propCount:f,hasTransform:g}}function E0(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,s)=>k0(n)+k0(t[s])))}function k0(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function T0(){return document.body.offsetHeight}function pA(t,e,n){const s=t[Ga];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const au=Symbol("_vod"),Kx=Symbol("_vsh"),gA={beforeMount(t,{value:e},{transition:n}){t[au]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Zo(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:s}){!e!=!n&&(s?e?(s.beforeEnter(t),Zo(t,!0),s.enter(t)):s.leave(t,()=>{Zo(t,!1)}):Zo(t,e))},beforeUnmount(t,{value:e}){Zo(t,e)}};function Zo(t,e){t.style.display=e?t[au]:"none",t[Kx]=!e}const mA=Symbol(""),yA=/(^|;)\s*display\s*:/;function vA(t,e,n){const s=t.style,r=kt(n);let i=!1;if(n&&!r){if(e)if(kt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Rc(s,a,"")}else for(const o in e)n[o]==null&&Rc(s,o,"");for(const o in n)o==="display"&&(i=!0),Rc(s,o,n[o])}else if(r){if(e!==n){const o=s[mA];o&&(n+=";"+o),s.cssText=n,i=yA.test(n)}}else e&&t.removeAttribute("style");au in t&&(t[au]=i?s.display:"",t[Kx]&&(s.display="none"))}const I0=/\s*!important$/;function Rc(t,e,n){if(Se(n))n.forEach(s=>Rc(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=bA(t,e);I0.test(n)?t.setProperty(Mr(s),n.replace(I0,""),"important"):t[s]=n}}const S0=["Webkit","Moz","ms"],ph={};function bA(t,e){const n=ph[e];if(n)return n;let s=Fn(e);if(s!=="filter"&&s in t)return ph[e]=s;s=zu(s);for(let r=0;r<S0.length;r++){const i=S0[r]+s;if(i in t)return ph[e]=i}return e}const A0="http://www.w3.org/1999/xlink";function C0(t,e,n,s,r,i=xI(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(A0,e.slice(6,e.length)):t.setAttributeNS(A0,e,n):n==null||i&&!N_(n)?t.removeAttribute(e):t.setAttribute(e,i?"":Gn(n)?String(n):n)}function P0(t,e,n,s,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?qx(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=N_(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(r||e)}function Rs(t,e,n,s){t.addEventListener(e,n,s)}function _A(t,e,n,s){t.removeEventListener(e,n,s)}const R0=Symbol("_vei");function xA(t,e,n,s,r=null){const i=t[R0]||(t[R0]={}),o=i[e];if(s&&o)o.value=s;else{const[a,l]=wA(e);if(s){const c=i[e]=TA(s,r);Rs(t,a,c,l)}else o&&(_A(t,a,o,l),i[e]=void 0)}}const O0=/(?:Once|Passive|Capture)$/;function wA(t){let e;if(O0.test(t)){e={};let s;for(;s=t.match(O0);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Mr(t.slice(2)),e]}let gh=0;const EA=Promise.resolve(),kA=()=>gh||(EA.then(()=>gh=0),gh=Date.now());function TA(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Yn(IA(s,n.value),e,5,[s])};return n.value=t,n.attached=kA(),n}function IA(t,e){if(Se(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const D0=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,SA=(t,e,n,s,r,i)=>{const o=r==="svg";e==="class"?pA(t,s,o):e==="style"?vA(t,n,s):Bu(e)?fp(e)||xA(t,e,n,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):AA(t,e,s,o))?(P0(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&C0(t,e,s,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!kt(s))?P0(t,Fn(e),s,i,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),C0(t,e,s,o))};function AA(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&D0(e)&&$e(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return D0(e)&&kt(n)?!1:e in t}const Ir=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Se(e)?n=>Ac(e,n):e};function CA(t){t.target.composing=!0}function M0(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Vn=Symbol("_assign"),Ze={created(t,{modifiers:{lazy:e,trim:n,number:s}},r){t[Vn]=Ir(r);const i=s||r.props&&r.props.type==="number";Rs(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),i&&(a=Xc(a)),t[Vn](a)}),n&&Rs(t,"change",()=>{t.value=t.value.trim()}),e||(Rs(t,"compositionstart",CA),Rs(t,"compositionend",M0),Rs(t,"change",M0))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:s,trim:r,number:i}},o){if(t[Vn]=Ir(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?Xc(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(s&&e===n||r&&t.value.trim()===l)||(t.value=l))}},lu={deep:!0,created(t,e,n){t[Vn]=Ir(n),Rs(t,"change",()=>{const s=t._modelValue,r=co(t),i=t.checked,o=t[Vn];if(Se(s)){const a=mp(s,r),l=a!==-1;if(i&&!l)o(s.concat(r));else if(!i&&l){const c=[...s];c.splice(a,1),o(c)}}else if(wo(s)){const a=new Set(s);i?a.add(r):a.delete(r),o(a)}else o(Gx(t,i))})},mounted:N0,beforeUpdate(t,e,n){t[Vn]=Ir(n),N0(t,e,n)}};function N0(t,{value:e,oldValue:n},s){t._modelValue=e;let r;if(Se(e))r=mp(e,s.props.value)>-1;else if(wo(e))r=e.has(s.props.value);else{if(e===n)return;r=pi(e,Gx(t,!0))}t.checked!==r&&(t.checked=r)}const Os={created(t,{value:e},n){t.checked=pi(e,n.props.value),t[Vn]=Ir(n),Rs(t,"change",()=>{t[Vn](co(t))})},beforeUpdate(t,{value:e,oldValue:n},s){t[Vn]=Ir(s),e!==n&&(t.checked=pi(e,s.props.value))}},us={deep:!0,created(t,{value:e,modifiers:{number:n}},s){const r=wo(e);Rs(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?Xc(co(o)):co(o));t[Vn](t.multiple?r?new Set(i):i:i[0]),t._assigning=!0,Pn(()=>{t._assigning=!1})}),t[Vn]=Ir(s)},mounted(t,{value:e}){L0(t,e)},beforeUpdate(t,e,n){t[Vn]=Ir(n)},updated(t,{value:e}){t._assigning||L0(t,e)}};function L0(t,e){const n=t.multiple,s=Se(e);if(!(n&&!s&&!wo(e))){for(let r=0,i=t.options.length;r<i;r++){const o=t.options[r],a=co(o);if(n)if(s){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=mp(e,a)>-1}else o.selected=e.has(a);else if(pi(co(o),e)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function co(t){return"_value"in t?t._value:t.value}function Gx(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const PA=["ctrl","shift","alt","meta"],RA={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>PA.some(n=>t[`${n}Key`]&&!e.includes(n))},Tn=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=(r,...i)=>{for(let o=0;o<e.length;o++){const a=RA[e[o]];if(a&&a(r,e))return}return t(r,...i)})},OA={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},mh=(t,e)=>{const n=t._withKeys||(t._withKeys={}),s=e.join(".");return n[s]||(n[s]=r=>{if(!("key"in r))return;const i=Mr(r.key);if(e.some(o=>o===i||OA[o]===i))return t(r)})},DA=Ut({patchProp:SA},aA);let V0;function MA(){return V0||(V0=OS(DA))}const NA=(...t)=>{const e=MA().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=VA(s);if(!r)return;const i=e._component;!$e(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,LA(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function LA(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function VA(t){return kt(t)?document.querySelector(t):t}/*!
 * pinia v3.0.2
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Yx;const Ju=t=>Yx=t,Qx=Symbol();function gf(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Ia;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Ia||(Ia={}));function $A(){const t=F_(!0),e=t.run(()=>z({}));let n=[],s=[];const r=Ep({install(i){Ju(r),r._a=i,i.provide(Qx,r),i.config.globalProperties.$pinia=r,s.forEach(o=>n.push(o)),s=[]},use(i){return this._a?n.push(i):s.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return r}const Xx=()=>{};function $0(t,e,n,s=Xx){t.push(e);const r=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),s())};return!n&&U_()&&EI(r),r}function ji(t,...e){t.slice().forEach(n=>{n(...e)})}const FA=t=>t(),F0=Symbol(),yh=Symbol();function mf(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,s)=>t.set(s,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const s=e[n],r=t[n];gf(r)&&gf(s)&&t.hasOwnProperty(n)&&!dt(s)&&!_r(s)?t[n]=mf(r,s):t[n]=s}return t}const UA=Symbol();function BA(t){return!gf(t)||!Object.prototype.hasOwnProperty.call(t,UA)}const{assign:ir}=Object;function jA(t){return!!(dt(t)&&t.effect)}function zA(t,e,n,s){const{state:r,actions:i,getters:o}=e,a=n.state.value[t];let l;function c(){a||(n.state.value[t]=r?r():{});const u=qI(n.state.value[t]);return ir(u,i,Object.keys(o||{}).reduce((h,f)=>(h[f]=Ep(be(()=>{Ju(n);const g=n._s.get(t);return o[f].call(g,g)})),h),{}))}return l=Jx(t,c,e,n,s,!0),l}function Jx(t,e,n={},s,r,i){let o;const a=ir({actions:{}},n),l={deep:!0};let c,u,h=[],f=[],g;const v=s.state.value[t];!i&&!v&&(s.state.value[t]={}),z({});let m;function b(_){let w;c=u=!1,typeof _=="function"?(_(s.state.value[t]),w={type:Ia.patchFunction,storeId:t,events:g}):(mf(s.state.value[t],_),w={type:Ia.patchObject,payload:_,storeId:t,events:g});const A=m=Symbol();Pn().then(()=>{m===A&&(c=!0)}),u=!0,ji(h,w,s.state.value[t])}const I=i?function(){const{state:w}=n,A=w?w():{};this.$patch(k=>{ir(k,A)})}:Xx;function T(){o.stop(),h=[],f=[],s._s.delete(t)}const D=(_,w="")=>{if(F0 in _)return _[yh]=w,_;const A=function(){Ju(s);const k=Array.from(arguments),S=[],R=[];function me(F){S.push(F)}function Te(F){R.push(F)}ji(f,{args:k,name:A[yh],store:M,after:me,onError:Te});let se;try{se=_.apply(this&&this.$id===t?this:M,k)}catch(F){throw ji(R,F),F}return se instanceof Promise?se.then(F=>(ji(S,F),F)).catch(F=>(ji(R,F),Promise.reject(F))):(ji(S,se),se)};return A[F0]=!0,A[yh]=w,A},L={_p:s,$id:t,$onAction:$0.bind(null,f),$patch:b,$reset:I,$subscribe(_,w={}){const A=$0(h,_,w.detached,()=>k()),k=o.run(()=>vt(()=>s.state.value[t],S=>{(w.flush==="sync"?u:c)&&_({storeId:t,type:Ia.direct,events:g},S)},ir({},l,w)));return A},$dispose:T},M=gi(L);s._s.set(t,M);const E=(s._a&&s._a.runWithContext||FA)(()=>s._e.run(()=>(o=F_()).run(()=>e({action:D}))));for(const _ in E){const w=E[_];if(dt(w)&&!jA(w)||_r(w))i||(v&&BA(w)&&(dt(w)?w.value=v[_]:mf(w,v[_])),s.state.value[t][_]=w);else if(typeof w=="function"){const A=D(w,_);E[_]=A,a.actions[_]=w}}return ir(M,E),ir(qe(M),E),Object.defineProperty(M,"$state",{get:()=>s.state.value[t],set:_=>{b(w=>{ir(w,_)})}}),s._p.forEach(_=>{ir(M,o.run(()=>_({store:M,app:s._a,pinia:s,options:a})))}),v&&i&&n.hydrate&&n.hydrate(M.$state,v),c=!0,u=!0,M}/*! #__NO_SIDE_EFFECTS__ */function Zu(t,e,n){let s;const r=typeof e=="function";s=r?n:e;function i(o,a){const l=TS();return o=o||(l?Ft(Qx,null):null),o&&Ju(o),o=Yx,o._s.has(t)||(r?Jx(t,e,s,o):zA(t,s,o)),o._s.get(t)}return i.$id=t,i}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Ki=typeof document<"u";function Zx(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function HA(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Zx(t.default)}const nt=Object.assign;function vh(t,e){const n={};for(const s in e){const r=e[s];n[s]=Qn(r)?r.map(t):t(r)}return n}const Sa=()=>{},Qn=Array.isArray,ew=/#/g,qA=/&/g,WA=/\//g,KA=/=/g,GA=/\?/g,tw=/\+/g,YA=/%5B/g,QA=/%5D/g,nw=/%5E/g,XA=/%60/g,sw=/%7B/g,JA=/%7C/g,rw=/%7D/g,ZA=/%20/g;function Rp(t){return encodeURI(""+t).replace(JA,"|").replace(YA,"[").replace(QA,"]")}function eC(t){return Rp(t).replace(sw,"{").replace(rw,"}").replace(nw,"^")}function yf(t){return Rp(t).replace(tw,"%2B").replace(ZA,"+").replace(ew,"%23").replace(qA,"%26").replace(XA,"`").replace(sw,"{").replace(rw,"}").replace(nw,"^")}function tC(t){return yf(t).replace(KA,"%3D")}function nC(t){return Rp(t).replace(ew,"%23").replace(GA,"%3F")}function sC(t){return t==null?"":nC(t).replace(WA,"%2F")}function Ya(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const rC=/\/$/,iC=t=>t.replace(rC,"");function bh(t,e,n="/"){let s,r={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(s=e.slice(0,l),i=e.slice(l+1,a>-1?a:e.length),r=t(i)),a>-1&&(s=s||e.slice(0,a),o=e.slice(a,e.length)),s=cC(s??e,n),{fullPath:s+(i&&"?")+i+o,path:s,query:r,hash:Ya(o)}}function oC(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function U0(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function aC(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&uo(e.matched[s],n.matched[r])&&iw(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function uo(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function iw(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!lC(t[n],e[n]))return!1;return!0}function lC(t,e){return Qn(t)?B0(t,e):Qn(e)?B0(e,t):t===e}function B0(t,e){return Qn(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function cC(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const nr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Qa;(function(t){t.pop="pop",t.push="push"})(Qa||(Qa={}));var Aa;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Aa||(Aa={}));function uC(t){if(!t)if(Ki){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),iC(t)}const dC=/^[^#]+#/;function hC(t,e){return t.replace(dC,"#")+e}function fC(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const ed=()=>({left:window.scrollX,top:window.scrollY});function pC(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=fC(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function j0(t,e){return(history.state?history.state.position-e:-1)+t}const vf=new Map;function gC(t,e){vf.set(t,e)}function mC(t){const e=vf.get(t);return vf.delete(t),e}let yC=()=>location.protocol+"//"+location.host;function ow(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let a=r.includes(t.slice(i))?t.slice(i).length:1,l=r.slice(a);return l[0]!=="/"&&(l="/"+l),U0(l,"")}return U0(n,t)+s+r}function vC(t,e,n,s){let r=[],i=[],o=null;const a=({state:f})=>{const g=ow(t,location),v=n.value,m=e.value;let b=0;if(f){if(n.value=g,e.value=f,o&&o===v){o=null;return}b=m?f.position-m.position:0}else s(g);r.forEach(I=>{I(n.value,v,{delta:b,type:Qa.pop,direction:b?b>0?Aa.forward:Aa.back:Aa.unknown})})};function l(){o=n.value}function c(f){r.push(f);const g=()=>{const v=r.indexOf(f);v>-1&&r.splice(v,1)};return i.push(g),g}function u(){const{history:f}=window;f.state&&f.replaceState(nt({},f.state,{scroll:ed()}),"")}function h(){for(const f of i)f();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:h}}function z0(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?ed():null}}function bC(t){const{history:e,location:n}=window,s={value:ow(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,c,u){const h=t.indexOf("#"),f=h>-1?(n.host&&document.querySelector("base")?t:t.slice(h))+l:yC()+t+l;try{e[u?"replaceState":"pushState"](c,"",f),r.value=c}catch(g){console.error(g),n[u?"replace":"assign"](f)}}function o(l,c){const u=nt({},e.state,z0(r.value.back,l,r.value.forward,!0),c,{position:r.value.position});i(l,u,!0),s.value=l}function a(l,c){const u=nt({},r.value,e.state,{forward:l,scroll:ed()});i(u.current,u,!0);const h=nt({},z0(s.value,l,null),{position:u.position+1},c);i(l,h,!1),s.value=l}return{location:s,state:r,push:a,replace:o}}function _C(t){t=uC(t);const e=bC(t),n=vC(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=nt({location:"",base:t,go:s,createHref:hC.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function xC(t){return typeof t=="string"||t&&typeof t=="object"}function aw(t){return typeof t=="string"||typeof t=="symbol"}const lw=Symbol("");var H0;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(H0||(H0={}));function ho(t,e){return nt(new Error,{type:t,[lw]:!0},e)}function ws(t,e){return t instanceof Error&&lw in t&&(e==null||!!(t.type&e))}const q0="[^/]+?",wC={sensitive:!1,strict:!1,start:!0,end:!0},EC=/[.+*?^${}()[\]/\\]/g;function kC(t,e){const n=nt({},wC,e),s=[];let r=n.start?"^":"";const i=[];for(const c of t){const u=c.length?[]:[90];n.strict&&!c.length&&(r+="/");for(let h=0;h<c.length;h++){const f=c[h];let g=40+(n.sensitive?.25:0);if(f.type===0)h||(r+="/"),r+=f.value.replace(EC,"\\$&"),g+=40;else if(f.type===1){const{value:v,repeatable:m,optional:b,regexp:I}=f;i.push({name:v,repeatable:m,optional:b});const T=I||q0;if(T!==q0){g+=10;try{new RegExp(`(${T})`)}catch(L){throw new Error(`Invalid custom RegExp for param "${v}" (${T}): `+L.message)}}let D=m?`((?:${T})(?:/(?:${T}))*)`:`(${T})`;h||(D=b&&c.length<2?`(?:/${D})`:"/"+D),b&&(D+="?"),r+=D,g+=20,b&&(g+=-8),m&&(g+=-20),T===".*"&&(g+=-50)}u.push(g)}s.push(u)}if(n.strict&&n.end){const c=s.length-1;s[c][s[c].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function a(c){const u=c.match(o),h={};if(!u)return null;for(let f=1;f<u.length;f++){const g=u[f]||"",v=i[f-1];h[v.name]=g&&v.repeatable?g.split("/"):g}return h}function l(c){let u="",h=!1;for(const f of t){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const g of f)if(g.type===0)u+=g.value;else if(g.type===1){const{value:v,repeatable:m,optional:b}=g,I=v in c?c[v]:"";if(Qn(I)&&!m)throw new Error(`Provided param "${v}" is an array but it is not repeatable (* or + modifiers)`);const T=Qn(I)?I.join("/"):I;if(!T)if(b)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${v}"`);u+=T}}return u||"/"}return{re:o,score:s,keys:i,parse:a,stringify:l}}function TC(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function cw(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=TC(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(W0(s))return 1;if(W0(r))return-1}return r.length-s.length}function W0(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const IC={type:0,value:""},SC=/[a-zA-Z0-9_]/;function AC(t){if(!t)return[[]];if(t==="/")return[[IC]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(g){throw new Error(`ERR (${n})/"${c}": ${g}`)}let n=0,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let a=0,l,c="",u="";function h(){c&&(n===0?i.push({type:0,value:c}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:l==="/"?(c&&h(),o()):l===":"?(h(),n=1):f();break;case 4:f(),n=s;break;case 1:l==="("?n=2:SC.test(l)?f():(h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),h(),o(),r}function CC(t,e,n){const s=kC(AC(t.path),n),r=nt(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function PC(t,e){const n=[],s=new Map;e=Q0({strict:!1,end:!0,sensitive:!1},e);function r(h){return s.get(h)}function i(h,f,g){const v=!g,m=G0(h);m.aliasOf=g&&g.record;const b=Q0(e,h),I=[m];if("alias"in h){const L=typeof h.alias=="string"?[h.alias]:h.alias;for(const M of L)I.push(G0(nt({},m,{components:g?g.record.components:m.components,path:M,aliasOf:g?g.record:m})))}let T,D;for(const L of I){const{path:M}=L;if(f&&M[0]!=="/"){const $=f.record.path,E=$[$.length-1]==="/"?"":"/";L.path=f.record.path+(M&&E+M)}if(T=CC(L,f,b),g?g.alias.push(T):(D=D||T,D!==T&&D.alias.push(T),v&&h.name&&!Y0(T)&&o(h.name)),uw(T)&&l(T),m.children){const $=m.children;for(let E=0;E<$.length;E++)i($[E],T,g&&g.children[E])}g=g||T}return D?()=>{o(D)}:Sa}function o(h){if(aw(h)){const f=s.get(h);f&&(s.delete(h),n.splice(n.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=n.indexOf(h);f>-1&&(n.splice(f,1),h.record.name&&s.delete(h.record.name),h.children.forEach(o),h.alias.forEach(o))}}function a(){return n}function l(h){const f=DC(h,n);n.splice(f,0,h),h.record.name&&!Y0(h)&&s.set(h.record.name,h)}function c(h,f){let g,v={},m,b;if("name"in h&&h.name){if(g=s.get(h.name),!g)throw ho(1,{location:h});b=g.record.name,v=nt(K0(f.params,g.keys.filter(D=>!D.optional).concat(g.parent?g.parent.keys.filter(D=>D.optional):[]).map(D=>D.name)),h.params&&K0(h.params,g.keys.map(D=>D.name))),m=g.stringify(v)}else if(h.path!=null)m=h.path,g=n.find(D=>D.re.test(m)),g&&(v=g.parse(m),b=g.record.name);else{if(g=f.name?s.get(f.name):n.find(D=>D.re.test(f.path)),!g)throw ho(1,{location:h,currentLocation:f});b=g.record.name,v=nt({},f.params,h.params),m=g.stringify(v)}const I=[];let T=g;for(;T;)I.unshift(T.record),T=T.parent;return{name:b,path:m,params:v,matched:I,meta:OC(I)}}t.forEach(h=>i(h));function u(){n.length=0,s.clear()}return{addRoute:i,resolve:c,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:r}}function K0(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function G0(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:RC(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function RC(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function Y0(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function OC(t){return t.reduce((e,n)=>nt(e,n.meta),{})}function Q0(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}function DC(t,e){let n=0,s=e.length;for(;n!==s;){const i=n+s>>1;cw(t,e[i])<0?s=i:n=i+1}const r=MC(t);return r&&(s=e.lastIndexOf(r,s-1)),s}function MC(t){let e=t;for(;e=e.parent;)if(uw(e)&&cw(t,e)===0)return e}function uw({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function NC(t){const e={};if(t===""||t==="?")return e;const s=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<s.length;++r){const i=s[r].replace(tw," "),o=i.indexOf("="),a=Ya(o<0?i:i.slice(0,o)),l=o<0?null:Ya(i.slice(o+1));if(a in e){let c=e[a];Qn(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function X0(t){let e="";for(let n in t){const s=t[n];if(n=tC(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(Qn(s)?s.map(i=>i&&yf(i)):[s&&yf(s)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function LC(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=Qn(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const VC=Symbol(""),J0=Symbol(""),td=Symbol(""),Op=Symbol(""),bf=Symbol("");function ea(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function ur(t,e,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((a,l)=>{const c=f=>{f===!1?l(ho(4,{from:n,to:e})):f instanceof Error?l(f):xC(f)?l(ho(2,{from:e,to:f})):(o&&s.enterCallbacks[r]===o&&typeof f=="function"&&o.push(f),a())},u=i(()=>t.call(s&&s.instances[r],e,n,c));let h=Promise.resolve(u);t.length<3&&(h=h.then(c)),h.catch(f=>l(f))})}function _h(t,e,n,s,r=i=>i()){const i=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(Zx(l)){const u=(l.__vccOpts||l)[e];u&&i.push(ur(u,n,s,o,a,r))}else{let c=l();i.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const h=HA(u)?u.default:u;o.mods[a]=u,o.components[a]=h;const g=(h.__vccOpts||h)[e];return g&&ur(g,n,s,o,a,r)()}))}}return i}function Z0(t){const e=Ft(td),n=Ft(Op),s=be(()=>{const l=te(t.to);return e.resolve(l)}),r=be(()=>{const{matched:l}=s.value,{length:c}=l,u=l[c-1],h=n.matched;if(!u||!h.length)return-1;const f=h.findIndex(uo.bind(null,u));if(f>-1)return f;const g=ey(l[c-2]);return c>1&&ey(u)===g&&h[h.length-1].path!==g?h.findIndex(uo.bind(null,l[c-2])):f}),i=be(()=>r.value>-1&&jC(n.params,s.value.params)),o=be(()=>r.value>-1&&r.value===n.matched.length-1&&iw(n.params,s.value.params));function a(l={}){if(BC(l)){const c=e[te(t.replace)?"replace":"push"](te(t.to)).catch(Sa);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:s,href:be(()=>s.value.href),isActive:i,isExactActive:o,navigate:a}}function $C(t){return t.length===1?t[0]:t}const FC=Nr({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Z0,setup(t,{slots:e}){const n=gi(Z0(t)),{options:s}=Ft(td),r=be(()=>({[ty(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[ty(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&$C(e.default(n));return t.custom?i:mi("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),UC=FC;function BC(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function jC(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!Qn(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function ey(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const ty=(t,e,n)=>t??e??n,zC=Nr({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=Ft(bf),r=be(()=>t.route||s.value),i=Ft(J0,0),o=be(()=>{let c=te(i);const{matched:u}=r.value;let h;for(;(h=u[c])&&!h.components;)c++;return c}),a=be(()=>r.value.matched[o.value]);Vs(J0,be(()=>o.value+1)),Vs(VC,a),Vs(bf,r);const l=z();return vt(()=>[l.value,a.value,t.name],([c,u,h],[f,g,v])=>{u&&(u.instances[h]=c,g&&g!==u&&c&&c===f&&(u.leaveGuards.size||(u.leaveGuards=g.leaveGuards),u.updateGuards.size||(u.updateGuards=g.updateGuards))),c&&u&&(!g||!uo(u,g)||!f)&&(u.enterCallbacks[h]||[]).forEach(m=>m(c))},{flush:"post"}),()=>{const c=r.value,u=t.name,h=a.value,f=h&&h.components[u];if(!f)return ny(n.default,{Component:f,route:c});const g=h.props[u],v=g?g===!0?c.params:typeof g=="function"?g(c):g:null,b=mi(f,nt({},v,e,{onVnodeUnmounted:I=>{I.component.isUnmounted&&(h.instances[u]=null)},ref:l}));return ny(n.default,{Component:b,route:c})||b}}});function ny(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const dw=zC;function HC(t){const e=PC(t.routes,t),n=t.parseQuery||NC,s=t.stringifyQuery||X0,r=t.history,i=ea(),o=ea(),a=ea(),l=kp(nr);let c=nr;Ki&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=vh.bind(null,H=>""+H),h=vh.bind(null,sC),f=vh.bind(null,Ya);function g(H,ee){let oe,ge;return aw(H)?(oe=e.getRecordMatcher(H),ge=ee):ge=H,e.addRoute(ge,oe)}function v(H){const ee=e.getRecordMatcher(H);ee&&e.removeRoute(ee)}function m(){return e.getRoutes().map(H=>H.record)}function b(H){return!!e.getRecordMatcher(H)}function I(H,ee){if(ee=nt({},ee||l.value),typeof H=="string"){const B=bh(n,H,ee.path),G=e.resolve({path:B.path},ee),J=r.createHref(B.fullPath);return nt(B,G,{params:f(G.params),hash:Ya(B.hash),redirectedFrom:void 0,href:J})}let oe;if(H.path!=null)oe=nt({},H,{path:bh(n,H.path,ee.path).path});else{const B=nt({},H.params);for(const G in B)B[G]==null&&delete B[G];oe=nt({},H,{params:h(B)}),ee.params=h(ee.params)}const ge=e.resolve(oe,ee),Ye=H.hash||"";ge.params=u(f(ge.params));const N=oC(s,nt({},H,{hash:eC(Ye),path:ge.path})),V=r.createHref(N);return nt({fullPath:N,hash:Ye,query:s===X0?LC(H.query):H.query||{}},ge,{redirectedFrom:void 0,href:V})}function T(H){return typeof H=="string"?bh(n,H,l.value.path):nt({},H)}function D(H,ee){if(c!==H)return ho(8,{from:ee,to:H})}function L(H){return E(H)}function M(H){return L(nt(T(H),{replace:!0}))}function $(H){const ee=H.matched[H.matched.length-1];if(ee&&ee.redirect){const{redirect:oe}=ee;let ge=typeof oe=="function"?oe(H):oe;return typeof ge=="string"&&(ge=ge.includes("?")||ge.includes("#")?ge=T(ge):{path:ge},ge.params={}),nt({query:H.query,hash:H.hash,params:ge.path!=null?{}:H.params},ge)}}function E(H,ee){const oe=c=I(H),ge=l.value,Ye=H.state,N=H.force,V=H.replace===!0,B=$(oe);if(B)return E(nt(T(B),{state:typeof B=="object"?nt({},Ye,B.state):Ye,force:N,replace:V}),ee||oe);const G=oe;G.redirectedFrom=ee;let J;return!N&&aC(s,ge,oe)&&(J=ho(16,{to:G,from:ge}),gt(ge,ge,!0,!1)),(J?Promise.resolve(J):A(G,ge)).catch(Y=>ws(Y)?ws(Y,2)?Y:mt(Y):K(Y,G,ge)).then(Y=>{if(Y){if(ws(Y,2))return E(nt({replace:V},T(Y.to),{state:typeof Y.to=="object"?nt({},Ye,Y.to.state):Ye,force:N}),ee||G)}else Y=S(G,ge,!0,V,Ye);return k(G,ge,Y),Y})}function _(H,ee){const oe=D(H,ee);return oe?Promise.reject(oe):Promise.resolve()}function w(H){const ee=ue.values().next().value;return ee&&typeof ee.runWithContext=="function"?ee.runWithContext(H):H()}function A(H,ee){let oe;const[ge,Ye,N]=qC(H,ee);oe=_h(ge.reverse(),"beforeRouteLeave",H,ee);for(const B of ge)B.leaveGuards.forEach(G=>{oe.push(ur(G,H,ee))});const V=_.bind(null,H,ee);return oe.push(V),je(oe).then(()=>{oe=[];for(const B of i.list())oe.push(ur(B,H,ee));return oe.push(V),je(oe)}).then(()=>{oe=_h(Ye,"beforeRouteUpdate",H,ee);for(const B of Ye)B.updateGuards.forEach(G=>{oe.push(ur(G,H,ee))});return oe.push(V),je(oe)}).then(()=>{oe=[];for(const B of N)if(B.beforeEnter)if(Qn(B.beforeEnter))for(const G of B.beforeEnter)oe.push(ur(G,H,ee));else oe.push(ur(B.beforeEnter,H,ee));return oe.push(V),je(oe)}).then(()=>(H.matched.forEach(B=>B.enterCallbacks={}),oe=_h(N,"beforeRouteEnter",H,ee,w),oe.push(V),je(oe))).then(()=>{oe=[];for(const B of o.list())oe.push(ur(B,H,ee));return oe.push(V),je(oe)}).catch(B=>ws(B,8)?B:Promise.reject(B))}function k(H,ee,oe){a.list().forEach(ge=>w(()=>ge(H,ee,oe)))}function S(H,ee,oe,ge,Ye){const N=D(H,ee);if(N)return N;const V=ee===nr,B=Ki?history.state:{};oe&&(ge||V?r.replace(H.fullPath,nt({scroll:V&&B&&B.scroll},Ye)):r.push(H.fullPath,Ye)),l.value=H,gt(H,ee,oe,V),mt()}let R;function me(){R||(R=r.listen((H,ee,oe)=>{if(!_e.listening)return;const ge=I(H),Ye=$(ge);if(Ye){E(nt(Ye,{replace:!0,force:!0}),ge).catch(Sa);return}c=ge;const N=l.value;Ki&&gC(j0(N.fullPath,oe.delta),ed()),A(ge,N).catch(V=>ws(V,12)?V:ws(V,2)?(E(nt(T(V.to),{force:!0}),ge).then(B=>{ws(B,20)&&!oe.delta&&oe.type===Qa.pop&&r.go(-1,!1)}).catch(Sa),Promise.reject()):(oe.delta&&r.go(-oe.delta,!1),K(V,ge,N))).then(V=>{V=V||S(ge,N,!1),V&&(oe.delta&&!ws(V,8)?r.go(-oe.delta,!1):oe.type===Qa.pop&&ws(V,20)&&r.go(-1,!1)),k(ge,N,V)}).catch(Sa)}))}let Te=ea(),se=ea(),F;function K(H,ee,oe){mt(H);const ge=se.list();return ge.length?ge.forEach(Ye=>Ye(H,ee,oe)):console.error(H),Promise.reject(H)}function Re(){return F&&l.value!==nr?Promise.resolve():new Promise((H,ee)=>{Te.add([H,ee])})}function mt(H){return F||(F=!H,me(),Te.list().forEach(([ee,oe])=>H?oe(H):ee()),Te.reset()),H}function gt(H,ee,oe,ge){const{scrollBehavior:Ye}=t;if(!Ki||!Ye)return Promise.resolve();const N=!oe&&mC(j0(H.fullPath,0))||(ge||!oe)&&history.state&&history.state.scroll||null;return Pn().then(()=>Ye(H,ee,N)).then(V=>V&&pC(V)).catch(V=>K(V,H,ee))}const Ve=H=>r.go(H);let ie;const ue=new Set,_e={currentRoute:l,listening:!0,addRoute:g,removeRoute:v,clearRoutes:e.clearRoutes,hasRoute:b,getRoutes:m,resolve:I,options:t,push:L,replace:M,go:Ve,back:()=>Ve(-1),forward:()=>Ve(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:se.add,isReady:Re,install(H){const ee=this;H.component("RouterLink",UC),H.component("RouterView",dw),H.config.globalProperties.$router=ee,Object.defineProperty(H.config.globalProperties,"$route",{enumerable:!0,get:()=>te(l)}),Ki&&!ie&&l.value===nr&&(ie=!0,L(r.location).catch(Ye=>{}));const oe={};for(const Ye in nr)Object.defineProperty(oe,Ye,{get:()=>l.value[Ye],enumerable:!0});H.provide(td,ee),H.provide(Op,tx(oe)),H.provide(bf,l);const ge=H.unmount;ue.add(H),H.unmount=function(){ue.delete(H),ue.size<1&&(c=nr,R&&R(),R=null,l.value=nr,ie=!1,F=!1),ge()}}};function je(H){return H.reduce((ee,oe)=>ee.then(()=>w(oe)),Promise.resolve())}return _e}function qC(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(c=>uo(c,a))?s.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>uo(c,l))||r.push(l))}return[n,s,r]}function Dp(){return Ft(td)}function hw(t){return Ft(Op)}const Ca=Zu("toast",{state:()=>({toast:{show:!1,title:"",message:"",type:"info",timeoutId:null}}),actions:{showToast(t,e,n="info",s=3e3){this.toast.timeoutId&&clearTimeout(this.toast.timeoutId),this.toast.show=!0,this.toast.title=t,this.toast.message=e,this.toast.type=n,this.toast.timeoutId=setTimeout(()=>{this.hideToast()},s)},hideToast(){this.toast.show=!1,this.toast.title="",this.toast.message="",this.toast.type="info",this.toast.timeoutId&&(clearTimeout(this.toast.timeoutId),this.toast.timeoutId=null)}}}),Yt=(t,e)=>{const n=t.__vccOpts||t;for(const[s,r]of e)n[s]=r;return n},WC={class:"flex items-center"},KC={class:"mr-2"},GC={key:0,class:"fas fa-check-circle"},YC={key:1,class:"fas fa-times-circle"},QC={key:2,class:"fas fa-info-circle"},XC={class:"font-semibold"},JC={class:"text-sm"},ZC={__name:"ToastNotification",setup(t){const e=Ca(),n=be(()=>e.toast);return(s,r)=>n.value.show?(C(),O("div",{key:0,class:le(["fixed bottom-4 right-4 p-4 rounded-lg shadow-lg text-white max-w-xs z-[1000]",n.value.type==="success"?"bg-green-500":n.value.type==="error"?"bg-red-500":"bg-blue-500"]),role:"alert"},[p("div",WC,[p("div",KC,[n.value.type==="success"?(C(),O("i",GC)):n.value.type==="error"?(C(),O("i",YC)):(C(),O("i",QC))]),p("div",null,[p("p",XC,U(n.value.title),1),p("p",JC,U(n.value.message),1)]),p("button",{onClick:r[0]||(r[0]=i=>te(e).hideToast()),class:"ml-auto text-white opacity-75 hover:opacity-100"}," × ")])],2)):X("",!0)}},e2=Yt(ZC,[["__scopeId","data-v-12732203"]]),t2={__name:"App",setup(t){return(e,n)=>(C(),O(xe,null,[ae(te(dw),null,{default:ye(({Component:s,route:r})=>[ae(To,{"enter-active-class":r.meta.enterActiveClass,"leave-active-class":r.meta.leaveActiveClass},{default:ye(()=>[(C(),Je(mS(s)))]),_:2},1032,["enter-active-class","leave-active-class"])]),_:1}),ae(e2)],64))}},Io=Zu("cart",()=>{const t=z(JSON.parse(localStorage.getItem("cart_items")||"[]"));function e(o){if(!o||!o.id){console.warn("Tentativa de adicionar item inválido:",o);return}const a=t.value.find(l=>l.id===o.id&&l.size===o.size&&r(l.extras,o.extras));a?a.quantity+=o.quantity:t.value.push({...o,subtotal:o.price+o.extras.reduce((l,c)=>l+c.price,0)})}function n(o){console.log("Removendo item:",o);const a=t.value.findIndex(l=>l.id===o.id&&l.size===o.size&&r(l.extras,o.extras));a!==-1?(t.value.splice(a,1),console.log("Item removido com sucesso!")):console.warn("Item para remover não encontrado.")}function s(){t.value=[]}function r(o,a){if(o.length!==a.length)return!1;const l=[...o].sort((u,h)=>u.name.localeCompare(h.name)),c=[...a].sort((u,h)=>u.name.localeCompare(h.name));return l.every((u,h)=>u.name===c[h].name&&u.price===c[h].price)}const i=be(()=>t.value.reduce((o,a)=>o+(a.price+a.extras.reduce((l,c)=>l+c.price,0))*a.quantity,0));return vt(t,o=>{localStorage.setItem("cart_items",JSON.stringify(o))},{deep:!0}),{items:t,addItem:e,removeItem:n,clearCart:s,total:i}}),n2={class:"md:translate-20 transition-all -translate-y-2 fixed bottom-0 left-2 right-2 rounded-full bg-gray-200/30 border-t border-gray-200/50 dark:bg-gray-900/30 dark:border-gray-700 shadow-md z-50 backdrop-blur-md"},s2={class:"flex justify-around p-3 text-gray-700 dark:text-gray-300 relative"},r2={__name:"MenuMobile",setup(t){const e=hw(),n=z(!1),s=o=>e.path===o,r=Io(),i=be(()=>r.items.length);return vt(i,(o,a)=>{o>a&&(n.value=!0,setTimeout(()=>{n.value=!1},500))}),(o,a)=>{const l=ko("RouterLink");return C(),O("div",n2,[p("nav",s2,[ae(l,{to:"/",class:le(["flex flex-col items-center",{"text-indigo-500 dark:text-emerald-400":s("/")}])},{default:ye(()=>a[0]||(a[0]=[p("i",{class:"fas fa-home text-sm"},null,-1),p("span",{class:"text-xs mt-1"},"Início",-1)])),_:1,__:[0]},8,["class"]),ae(l,{to:"/carrinho",class:le(["flex flex-col items-center relative",{"text-indigo-500 dark:text-emerald-400":s("/carrinho")}])},{default:ye(()=>[a[1]||(a[1]=p("i",{class:"fas fa-shopping-cart text-sm"},null,-1)),a[2]||(a[2]=p("span",{class:"text-xs mt-1"},"Carrinho",-1)),i.value>0?(C(),O("span",{key:0,class:le(["absolute -top-2 -right-2 bg-red-500 text-white text-[10px] rounded-full px-1.5 py-0.5 font-semibold",n.value?"animate-bounce":""])},U(i.value),3)):X("",!0)]),_:1,__:[1,2]},8,["class"]),ae(l,{to:"/favoritos",class:le(["flex flex-col items-center",{"text-indigo-500 dark:text-emerald-400":s("/favoritos")}])},{default:ye(()=>a[3]||(a[3]=[p("i",{class:"fas fa-heart text-sm"},null,-1),p("span",{class:"text-xs mt-1"},"Favoritos",-1)])),_:1,__:[3]},8,["class"]),ae(l,{to:"/perfil",class:le(["flex flex-col items-center",{"text-indigo-500 dark:text-emerald-400":s("/perfil")}])},{default:ye(()=>a[4]||(a[4]=[p("i",{class:"fas fa-user text-sm"},null,-1),p("span",{class:"text-xs mt-1"},"Perfil",-1)])),_:1,__:[4]},8,["class"])])])}}},fw="/assets/logo-BsbHNySU.png",i2={key:0,class:"absolute top-0 border-gray-100 border-2 -right-0 bg-red-600 text-white rounded-full text-xs w-5 h-5 flex items-center justify-center"},sy={__name:"IconCart",props:{cartCount:{type:Number,default:0}},setup(t){return(e,n)=>{const s=ko("router-link");return C(),Je(s,{to:"/carrinho",class:"relative text-md p-2"},{default:ye(()=>[n[0]||(n[0]=p("i",{class:"fa-solid fa-cart-shopping text-gray-600 dark:text-gray-300 hover:cursor-pointer"},null,-1)),t.cartCount?(C(),O("span",i2,U(t.cartCount),1)):X("",!0)]),_:1,__:[0]})}}},o2={class:"relative inline-block w-11 h-5 ml-4"},a2=["checked"],l2={for:"theme-switch",class:"absolute top-0 left-0 w-5 h-5 bg-white dark:bg-gray-200 rounded-full border border-gray-300 dark:border-gray-600 shadow-sm transition-transform duration-300 peer-checked:translate-x-6 peer-checked:border-blue-600 dark:peer-checked:border-blue-600 cursor-pointer flex items-center justify-center"},c2={key:0,class:"fa-solid fa-moon text-yellow-500 text-xs"},u2={key:1,class:"fa-solid fa-sun text-orange-400 text-xs"},pw={__name:"ThemeToggle",setup(t){const e=z(!1),n=r=>{e.value=r,r?(document.documentElement.classList.add("dark"),document.documentElement.classList.remove("light"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),document.documentElement.classList.add("light"),localStorage.setItem("theme","light"))},s=r=>{const i=!e.value,o=document.createElement("div");o.classList.add("theme-ripple-effect");let a,l;if(r&&r.clientX&&r.clientY)a=r.clientX,l=r.clientY;else{const u=document.getElementById("theme-switch");if(u){const h=u.getBoundingClientRect();a=h.left+h.width/2,l=h.top+h.height/2}else a=window.innerWidth/2,l=window.innerHeight/2}const c=i?"#fff":"#1a202c";o.style.position="fixed",o.style.top="0",o.style.left="0",o.style.width="100vw",o.style.height="100vh",o.style.zIndex="9999",o.style.pointerEvents="none",o.style.backgroundImage=`radial-gradient(circle at ${a}px ${l}px, transparent 25%, ${c} 25.5%)`,o.style.backgroundSize="100% 100%",o.style.backgroundRepeat="no-repeat",o.style.transition="background-size 1s ease-out",document.body.appendChild(o),o.offsetWidth,requestAnimationFrame(()=>{o.style.backgroundSize="400% 400%"}),n(i),o.addEventListener("transitionend",u=>{u.propertyName==="background-size"&&o.remove()},{once:!0})};return _t(()=>{const r=localStorage.getItem("theme");n(r?r==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches)}),(r,i)=>(C(),O("div",o2,[p("input",{checked:e.value,onChange:s,id:"theme-switch",type:"checkbox",class:"peer appearance-none w-11 h-5 rounded-full cursor-pointer transition-colors duration-300 bg-gray-300 dark:bg-gray-700 checked:bg-blue-600 dark:checked:bg-blue-600"},null,40,a2),p("label",l2,[e.value?(C(),O("i",c2)):(C(),O("i",u2))]),i[0]||(i[0]=p("span",{class:"sr-only"},"Toggle Theme",-1))]))}};function gw(t,e){return function(){return t.apply(e,arguments)}}const{toString:d2}=Object.prototype,{getPrototypeOf:Mp}=Object,{iterator:nd,toStringTag:mw}=Symbol,sd=(t=>e=>{const n=d2.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Zn=t=>(t=t.toLowerCase(),e=>sd(e)===t),rd=t=>e=>typeof e===t,{isArray:So}=Array,Xa=rd("undefined");function h2(t){return t!==null&&!Xa(t)&&t.constructor!==null&&!Xa(t.constructor)&&bn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const yw=Zn("ArrayBuffer");function f2(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&yw(t.buffer),e}const p2=rd("string"),bn=rd("function"),vw=rd("number"),id=t=>t!==null&&typeof t=="object",g2=t=>t===!0||t===!1,Oc=t=>{if(sd(t)!=="object")return!1;const e=Mp(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(mw in t)&&!(nd in t)},m2=Zn("Date"),y2=Zn("File"),v2=Zn("Blob"),b2=Zn("FileList"),_2=t=>id(t)&&bn(t.pipe),x2=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||bn(t.append)&&((e=sd(t))==="formdata"||e==="object"&&bn(t.toString)&&t.toString()==="[object FormData]"))},w2=Zn("URLSearchParams"),[E2,k2,T2,I2]=["ReadableStream","Request","Response","Headers"].map(Zn),S2=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function kl(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let s,r;if(typeof t!="object"&&(t=[t]),So(t))for(s=0,r=t.length;s<r;s++)e.call(null,t[s],s,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(s=0;s<o;s++)a=i[s],e.call(null,t[a],a,t)}}function bw(t,e){e=e.toLowerCase();const n=Object.keys(t);let s=n.length,r;for(;s-- >0;)if(r=n[s],e===r.toLowerCase())return r;return null}const ni=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,_w=t=>!Xa(t)&&t!==ni;function _f(){const{caseless:t}=_w(this)&&this||{},e={},n=(s,r)=>{const i=t&&bw(e,r)||r;Oc(e[i])&&Oc(s)?e[i]=_f(e[i],s):Oc(s)?e[i]=_f({},s):So(s)?e[i]=s.slice():e[i]=s};for(let s=0,r=arguments.length;s<r;s++)arguments[s]&&kl(arguments[s],n);return e}const A2=(t,e,n,{allOwnKeys:s}={})=>(kl(e,(r,i)=>{n&&bn(r)?t[i]=gw(r,n):t[i]=r},{allOwnKeys:s}),t),C2=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),P2=(t,e,n,s)=>{t.prototype=Object.create(e.prototype,s),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},R2=(t,e,n,s)=>{let r,i,o;const a={};if(e=e||{},t==null)return e;do{for(r=Object.getOwnPropertyNames(t),i=r.length;i-- >0;)o=r[i],(!s||s(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&Mp(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},O2=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const s=t.indexOf(e,n);return s!==-1&&s===n},D2=t=>{if(!t)return null;if(So(t))return t;let e=t.length;if(!vw(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},M2=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Mp(Uint8Array)),N2=(t,e)=>{const s=(t&&t[nd]).call(t);let r;for(;(r=s.next())&&!r.done;){const i=r.value;e.call(t,i[0],i[1])}},L2=(t,e)=>{let n;const s=[];for(;(n=t.exec(e))!==null;)s.push(n);return s},V2=Zn("HTMLFormElement"),$2=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,r){return s.toUpperCase()+r}),ry=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),F2=Zn("RegExp"),xw=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),s={};kl(n,(r,i)=>{let o;(o=e(r,i,t))!==!1&&(s[i]=o||r)}),Object.defineProperties(t,s)},U2=t=>{xw(t,(e,n)=>{if(bn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=t[n];if(bn(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},B2=(t,e)=>{const n={},s=r=>{r.forEach(i=>{n[i]=!0})};return So(t)?s(t):s(String(t).split(e)),n},j2=()=>{},z2=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function H2(t){return!!(t&&bn(t.append)&&t[mw]==="FormData"&&t[nd])}const q2=t=>{const e=new Array(10),n=(s,r)=>{if(id(s)){if(e.indexOf(s)>=0)return;if(!("toJSON"in s)){e[r]=s;const i=So(s)?[]:{};return kl(s,(o,a)=>{const l=n(o,r+1);!Xa(l)&&(i[a]=l)}),e[r]=void 0,i}}return s};return n(t,0)},W2=Zn("AsyncFunction"),K2=t=>t&&(id(t)||bn(t))&&bn(t.then)&&bn(t.catch),ww=((t,e)=>t?setImmediate:e?((n,s)=>(ni.addEventListener("message",({source:r,data:i})=>{r===ni&&i===n&&s.length&&s.shift()()},!1),r=>{s.push(r),ni.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",bn(ni.postMessage)),G2=typeof queueMicrotask<"u"?queueMicrotask.bind(ni):typeof process<"u"&&process.nextTick||ww,Y2=t=>t!=null&&bn(t[nd]),q={isArray:So,isArrayBuffer:yw,isBuffer:h2,isFormData:x2,isArrayBufferView:f2,isString:p2,isNumber:vw,isBoolean:g2,isObject:id,isPlainObject:Oc,isReadableStream:E2,isRequest:k2,isResponse:T2,isHeaders:I2,isUndefined:Xa,isDate:m2,isFile:y2,isBlob:v2,isRegExp:F2,isFunction:bn,isStream:_2,isURLSearchParams:w2,isTypedArray:M2,isFileList:b2,forEach:kl,merge:_f,extend:A2,trim:S2,stripBOM:C2,inherits:P2,toFlatObject:R2,kindOf:sd,kindOfTest:Zn,endsWith:O2,toArray:D2,forEachEntry:N2,matchAll:L2,isHTMLForm:V2,hasOwnProperty:ry,hasOwnProp:ry,reduceDescriptors:xw,freezeMethods:U2,toObjectSet:B2,toCamelCase:$2,noop:j2,toFiniteNumber:z2,findKey:bw,global:ni,isContextDefined:_w,isSpecCompliantForm:H2,toJSONObject:q2,isAsyncFn:W2,isThenable:K2,setImmediate:ww,asap:G2,isIterable:Y2};function Be(t,e,n,s,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),s&&(this.request=s),r&&(this.response=r,this.status=r.status?r.status:null)}q.inherits(Be,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:q.toJSONObject(this.config),code:this.code,status:this.status}}});const Ew=Be.prototype,kw={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{kw[t]={value:t}});Object.defineProperties(Be,kw);Object.defineProperty(Ew,"isAxiosError",{value:!0});Be.from=(t,e,n,s,r,i)=>{const o=Object.create(Ew);return q.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),Be.call(o,t.message,e,n,s,r),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const Q2=null;function xf(t){return q.isPlainObject(t)||q.isArray(t)}function Tw(t){return q.endsWith(t,"[]")?t.slice(0,-2):t}function iy(t,e,n){return t?t.concat(e).map(function(r,i){return r=Tw(r),!n&&i?"["+r+"]":r}).join(n?".":""):e}function X2(t){return q.isArray(t)&&!t.some(xf)}const J2=q.toFlatObject(q,{},null,function(e){return/^is[A-Z]/.test(e)});function od(t,e,n){if(!q.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=q.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,b){return!q.isUndefined(b[m])});const s=n.metaTokens,r=n.visitor||u,i=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&q.isSpecCompliantForm(e);if(!q.isFunction(r))throw new TypeError("visitor must be a function");function c(v){if(v===null)return"";if(q.isDate(v))return v.toISOString();if(!l&&q.isBlob(v))throw new Be("Blob is not supported. Use a Buffer instead.");return q.isArrayBuffer(v)||q.isTypedArray(v)?l&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function u(v,m,b){let I=v;if(v&&!b&&typeof v=="object"){if(q.endsWith(m,"{}"))m=s?m:m.slice(0,-2),v=JSON.stringify(v);else if(q.isArray(v)&&X2(v)||(q.isFileList(v)||q.endsWith(m,"[]"))&&(I=q.toArray(v)))return m=Tw(m),I.forEach(function(D,L){!(q.isUndefined(D)||D===null)&&e.append(o===!0?iy([m],L,i):o===null?m:m+"[]",c(D))}),!1}return xf(v)?!0:(e.append(iy(b,m,i),c(v)),!1)}const h=[],f=Object.assign(J2,{defaultVisitor:u,convertValue:c,isVisitable:xf});function g(v,m){if(!q.isUndefined(v)){if(h.indexOf(v)!==-1)throw Error("Circular reference detected in "+m.join("."));h.push(v),q.forEach(v,function(I,T){(!(q.isUndefined(I)||I===null)&&r.call(e,I,q.isString(T)?T.trim():T,m,f))===!0&&g(I,m?m.concat(T):[T])}),h.pop()}}if(!q.isObject(t))throw new TypeError("data must be an object");return g(t),e}function oy(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function Np(t,e){this._pairs=[],t&&od(t,this,e)}const Iw=Np.prototype;Iw.append=function(e,n){this._pairs.push([e,n])};Iw.toString=function(e){const n=e?function(s){return e.call(this,s,oy)}:oy;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function Z2(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Sw(t,e,n){if(!e)return t;const s=n&&n.encode||Z2;q.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let i;if(r?i=r(e,n):i=q.isURLSearchParams(e)?e.toString():new Np(e,n).toString(s),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class ay{constructor(){this.handlers=[]}use(e,n,s){return this.handlers.push({fulfilled:e,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){q.forEach(this.handlers,function(s){s!==null&&e(s)})}}const Aw={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},eP=typeof URLSearchParams<"u"?URLSearchParams:Np,tP=typeof FormData<"u"?FormData:null,nP=typeof Blob<"u"?Blob:null,sP={isBrowser:!0,classes:{URLSearchParams:eP,FormData:tP,Blob:nP},protocols:["http","https","file","blob","url","data"]},Lp=typeof window<"u"&&typeof document<"u",wf=typeof navigator=="object"&&navigator||void 0,rP=Lp&&(!wf||["ReactNative","NativeScript","NS"].indexOf(wf.product)<0),iP=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",oP=Lp&&window.location.href||"http://localhost",aP=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Lp,hasStandardBrowserEnv:rP,hasStandardBrowserWebWorkerEnv:iP,navigator:wf,origin:oP},Symbol.toStringTag,{value:"Module"})),ln={...aP,...sP};function lP(t,e){return od(t,new ln.classes.URLSearchParams,Object.assign({visitor:function(n,s,r,i){return ln.isNode&&q.isBuffer(n)?(this.append(s,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function cP(t){return q.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function uP(t){const e={},n=Object.keys(t);let s;const r=n.length;let i;for(s=0;s<r;s++)i=n[s],e[i]=t[i];return e}function Cw(t){function e(n,s,r,i){let o=n[i++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=i>=n.length;return o=!o&&q.isArray(r)?r.length:o,l?(q.hasOwnProp(r,o)?r[o]=[r[o],s]:r[o]=s,!a):((!r[o]||!q.isObject(r[o]))&&(r[o]=[]),e(n,s,r[o],i)&&q.isArray(r[o])&&(r[o]=uP(r[o])),!a)}if(q.isFormData(t)&&q.isFunction(t.entries)){const n={};return q.forEachEntry(t,(s,r)=>{e(cP(s),r,n,0)}),n}return null}function dP(t,e,n){if(q.isString(t))try{return(e||JSON.parse)(t),q.trim(t)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(t)}const Tl={transitional:Aw,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const s=n.getContentType()||"",r=s.indexOf("application/json")>-1,i=q.isObject(e);if(i&&q.isHTMLForm(e)&&(e=new FormData(e)),q.isFormData(e))return r?JSON.stringify(Cw(e)):e;if(q.isArrayBuffer(e)||q.isBuffer(e)||q.isStream(e)||q.isFile(e)||q.isBlob(e)||q.isReadableStream(e))return e;if(q.isArrayBufferView(e))return e.buffer;if(q.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return lP(e,this.formSerializer).toString();if((a=q.isFileList(e))||s.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return od(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||r?(n.setContentType("application/json",!1),dP(e)):e}],transformResponse:[function(e){const n=this.transitional||Tl.transitional,s=n&&n.forcedJSONParsing,r=this.responseType==="json";if(q.isResponse(e)||q.isReadableStream(e))return e;if(e&&q.isString(e)&&(s&&!this.responseType||r)){const o=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?Be.from(a,Be.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ln.classes.FormData,Blob:ln.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};q.forEach(["delete","get","head","post","put","patch"],t=>{Tl.headers[t]={}});const hP=q.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),fP=t=>{const e={};let n,s,r;return t&&t.split(`
`).forEach(function(o){r=o.indexOf(":"),n=o.substring(0,r).trim().toLowerCase(),s=o.substring(r+1).trim(),!(!n||e[n]&&hP[n])&&(n==="set-cookie"?e[n]?e[n].push(s):e[n]=[s]:e[n]=e[n]?e[n]+", "+s:s)}),e},ly=Symbol("internals");function ta(t){return t&&String(t).trim().toLowerCase()}function Dc(t){return t===!1||t==null?t:q.isArray(t)?t.map(Dc):String(t)}function pP(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(t);)e[s[1]]=s[2];return e}const gP=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function xh(t,e,n,s,r){if(q.isFunction(s))return s.call(this,e,n);if(r&&(e=n),!!q.isString(e)){if(q.isString(s))return e.indexOf(s)!==-1;if(q.isRegExp(s))return s.test(e)}}function mP(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,s)=>n.toUpperCase()+s)}function yP(t,e){const n=q.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(t,s+n,{value:function(r,i,o){return this[s].call(this,e,r,i,o)},configurable:!0})})}let _n=class{constructor(e){e&&this.set(e)}set(e,n,s){const r=this;function i(a,l,c){const u=ta(l);if(!u)throw new Error("header name must be a non-empty string");const h=q.findKey(r,u);(!h||r[h]===void 0||c===!0||c===void 0&&r[h]!==!1)&&(r[h||l]=Dc(a))}const o=(a,l)=>q.forEach(a,(c,u)=>i(c,u,l));if(q.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(q.isString(e)&&(e=e.trim())&&!gP(e))o(fP(e),n);else if(q.isObject(e)&&q.isIterable(e)){let a={},l,c;for(const u of e){if(!q.isArray(u))throw TypeError("Object iterator must return a key-value pair");a[c=u[0]]=(l=a[c])?q.isArray(l)?[...l,u[1]]:[l,u[1]]:u[1]}o(a,n)}else e!=null&&i(n,e,s);return this}get(e,n){if(e=ta(e),e){const s=q.findKey(this,e);if(s){const r=this[s];if(!n)return r;if(n===!0)return pP(r);if(q.isFunction(n))return n.call(this,r,s);if(q.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=ta(e),e){const s=q.findKey(this,e);return!!(s&&this[s]!==void 0&&(!n||xh(this,this[s],s,n)))}return!1}delete(e,n){const s=this;let r=!1;function i(o){if(o=ta(o),o){const a=q.findKey(s,o);a&&(!n||xh(s,s[a],a,n))&&(delete s[a],r=!0)}}return q.isArray(e)?e.forEach(i):i(e),r}clear(e){const n=Object.keys(this);let s=n.length,r=!1;for(;s--;){const i=n[s];(!e||xh(this,this[i],i,e,!0))&&(delete this[i],r=!0)}return r}normalize(e){const n=this,s={};return q.forEach(this,(r,i)=>{const o=q.findKey(s,i);if(o){n[o]=Dc(r),delete n[i];return}const a=e?mP(i):String(i).trim();a!==i&&delete n[i],n[a]=Dc(r),s[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return q.forEach(this,(s,r)=>{s!=null&&s!==!1&&(n[r]=e&&q.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const s=new this(e);return n.forEach(r=>s.set(r)),s}static accessor(e){const s=(this[ly]=this[ly]={accessors:{}}).accessors,r=this.prototype;function i(o){const a=ta(o);s[a]||(yP(r,o),s[a]=!0)}return q.isArray(e)?e.forEach(i):i(e),this}};_n.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);q.reduceDescriptors(_n.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(s){this[n]=s}}});q.freezeMethods(_n);function wh(t,e){const n=this||Tl,s=e||n,r=_n.from(s.headers);let i=s.data;return q.forEach(t,function(a){i=a.call(n,i,r.normalize(),e?e.status:void 0)}),r.normalize(),i}function Pw(t){return!!(t&&t.__CANCEL__)}function Ao(t,e,n){Be.call(this,t??"canceled",Be.ERR_CANCELED,e,n),this.name="CanceledError"}q.inherits(Ao,Be,{__CANCEL__:!0});function Rw(t,e,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?t(n):e(new Be("Request failed with status code "+n.status,[Be.ERR_BAD_REQUEST,Be.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function vP(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function bP(t,e){t=t||10;const n=new Array(t),s=new Array(t);let r=0,i=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=s[i];o||(o=c),n[r]=l,s[r]=c;let h=i,f=0;for(;h!==r;)f+=n[h++],h=h%t;if(r=(r+1)%t,r===i&&(i=(i+1)%t),c-o<e)return;const g=u&&c-u;return g?Math.round(f*1e3/g):void 0}}function _P(t,e){let n=0,s=1e3/e,r,i;const o=(c,u=Date.now())=>{n=u,r=null,i&&(clearTimeout(i),i=null),t.apply(null,c)};return[(...c)=>{const u=Date.now(),h=u-n;h>=s?o(c,u):(r=c,i||(i=setTimeout(()=>{i=null,o(r)},s-h)))},()=>r&&o(r)]}const cu=(t,e,n=3)=>{let s=0;const r=bP(50,250);return _P(i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,l=o-s,c=r(l),u=o<=a;s=o;const h={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-o)/c:void 0,event:i,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(h)},n)},cy=(t,e)=>{const n=t!=null;return[s=>e[0]({lengthComputable:n,total:t,loaded:s}),e[1]]},uy=t=>(...e)=>q.asap(()=>t(...e)),xP=ln.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,ln.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(ln.origin),ln.navigator&&/(msie|trident)/i.test(ln.navigator.userAgent)):()=>!0,wP=ln.hasStandardBrowserEnv?{write(t,e,n,s,r,i){const o=[t+"="+encodeURIComponent(e)];q.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),q.isString(s)&&o.push("path="+s),q.isString(r)&&o.push("domain="+r),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function EP(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function kP(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Ow(t,e,n){let s=!EP(e);return t&&(s||n==!1)?kP(t,e):e}const dy=t=>t instanceof _n?{...t}:t;function yi(t,e){e=e||{};const n={};function s(c,u,h,f){return q.isPlainObject(c)&&q.isPlainObject(u)?q.merge.call({caseless:f},c,u):q.isPlainObject(u)?q.merge({},u):q.isArray(u)?u.slice():u}function r(c,u,h,f){if(q.isUndefined(u)){if(!q.isUndefined(c))return s(void 0,c,h,f)}else return s(c,u,h,f)}function i(c,u){if(!q.isUndefined(u))return s(void 0,u)}function o(c,u){if(q.isUndefined(u)){if(!q.isUndefined(c))return s(void 0,c)}else return s(void 0,u)}function a(c,u,h){if(h in e)return s(c,u);if(h in t)return s(void 0,c)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u,h)=>r(dy(c),dy(u),h,!0)};return q.forEach(Object.keys(Object.assign({},t,e)),function(u){const h=l[u]||r,f=h(t[u],e[u],u);q.isUndefined(f)&&h!==a||(n[u]=f)}),n}const Dw=t=>{const e=yi({},t);let{data:n,withXSRFToken:s,xsrfHeaderName:r,xsrfCookieName:i,headers:o,auth:a}=e;e.headers=o=_n.from(o),e.url=Sw(Ow(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(q.isFormData(n)){if(ln.hasStandardBrowserEnv||ln.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...u]=l?l.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...u].join("; "))}}if(ln.hasStandardBrowserEnv&&(s&&q.isFunction(s)&&(s=s(e)),s||s!==!1&&xP(e.url))){const c=r&&i&&wP.read(i);c&&o.set(r,c)}return e},TP=typeof XMLHttpRequest<"u",IP=TP&&function(t){return new Promise(function(n,s){const r=Dw(t);let i=r.data;const o=_n.from(r.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=r,u,h,f,g,v;function m(){g&&g(),v&&v(),r.cancelToken&&r.cancelToken.unsubscribe(u),r.signal&&r.signal.removeEventListener("abort",u)}let b=new XMLHttpRequest;b.open(r.method.toUpperCase(),r.url,!0),b.timeout=r.timeout;function I(){if(!b)return;const D=_n.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),M={data:!a||a==="text"||a==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:D,config:t,request:b};Rw(function(E){n(E),m()},function(E){s(E),m()},M),b=null}"onloadend"in b?b.onloadend=I:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(I)},b.onabort=function(){b&&(s(new Be("Request aborted",Be.ECONNABORTED,t,b)),b=null)},b.onerror=function(){s(new Be("Network Error",Be.ERR_NETWORK,t,b)),b=null},b.ontimeout=function(){let L=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const M=r.transitional||Aw;r.timeoutErrorMessage&&(L=r.timeoutErrorMessage),s(new Be(L,M.clarifyTimeoutError?Be.ETIMEDOUT:Be.ECONNABORTED,t,b)),b=null},i===void 0&&o.setContentType(null),"setRequestHeader"in b&&q.forEach(o.toJSON(),function(L,M){b.setRequestHeader(M,L)}),q.isUndefined(r.withCredentials)||(b.withCredentials=!!r.withCredentials),a&&a!=="json"&&(b.responseType=r.responseType),c&&([f,v]=cu(c,!0),b.addEventListener("progress",f)),l&&b.upload&&([h,g]=cu(l),b.upload.addEventListener("progress",h),b.upload.addEventListener("loadend",g)),(r.cancelToken||r.signal)&&(u=D=>{b&&(s(!D||D.type?new Ao(null,t,b):D),b.abort(),b=null)},r.cancelToken&&r.cancelToken.subscribe(u),r.signal&&(r.signal.aborted?u():r.signal.addEventListener("abort",u)));const T=vP(r.url);if(T&&ln.protocols.indexOf(T)===-1){s(new Be("Unsupported protocol "+T+":",Be.ERR_BAD_REQUEST,t));return}b.send(i||null)})},SP=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let s=new AbortController,r;const i=function(c){if(!r){r=!0,a();const u=c instanceof Error?c:this.reason;s.abort(u instanceof Be?u:new Ao(u instanceof Error?u.message:u))}};let o=e&&setTimeout(()=>{o=null,i(new Be(`timeout ${e} of ms exceeded`,Be.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(i):c.removeEventListener("abort",i)}),t=null)};t.forEach(c=>c.addEventListener("abort",i));const{signal:l}=s;return l.unsubscribe=()=>q.asap(a),l}},AP=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let s=0,r;for(;s<n;)r=s+e,yield t.slice(s,r),s=r},CP=async function*(t,e){for await(const n of PP(t))yield*AP(n,e)},PP=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:s}=await e.read();if(n)break;yield s}}finally{await e.cancel()}},hy=(t,e,n,s)=>{const r=CP(t,e);let i=0,o,a=l=>{o||(o=!0,s&&s(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await r.next();if(c){a(),l.close();return}let h=u.byteLength;if(n){let f=i+=h;n(f)}l.enqueue(new Uint8Array(u))}catch(c){throw a(c),c}},cancel(l){return a(l),r.return()}},{highWaterMark:2})},ad=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Mw=ad&&typeof ReadableStream=="function",RP=ad&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Nw=(t,...e)=>{try{return!!t(...e)}catch{return!1}},OP=Mw&&Nw(()=>{let t=!1;const e=new Request(ln.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),fy=64*1024,Ef=Mw&&Nw(()=>q.isReadableStream(new Response("").body)),uu={stream:Ef&&(t=>t.body)};ad&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!uu[e]&&(uu[e]=q.isFunction(t[e])?n=>n[e]():(n,s)=>{throw new Be(`Response type '${e}' is not supported`,Be.ERR_NOT_SUPPORT,s)})})})(new Response);const DP=async t=>{if(t==null)return 0;if(q.isBlob(t))return t.size;if(q.isSpecCompliantForm(t))return(await new Request(ln.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(q.isArrayBufferView(t)||q.isArrayBuffer(t))return t.byteLength;if(q.isURLSearchParams(t)&&(t=t+""),q.isString(t))return(await RP(t)).byteLength},MP=async(t,e)=>{const n=q.toFiniteNumber(t.getContentLength());return n??DP(e)},NP=ad&&(async t=>{let{url:e,method:n,data:s,signal:r,cancelToken:i,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:h="same-origin",fetchOptions:f}=Dw(t);c=c?(c+"").toLowerCase():"text";let g=SP([r,i&&i.toAbortSignal()],o),v;const m=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let b;try{if(l&&OP&&n!=="get"&&n!=="head"&&(b=await MP(u,s))!==0){let M=new Request(e,{method:"POST",body:s,duplex:"half"}),$;if(q.isFormData(s)&&($=M.headers.get("content-type"))&&u.setContentType($),M.body){const[E,_]=cy(b,cu(uy(l)));s=hy(M.body,fy,E,_)}}q.isString(h)||(h=h?"include":"omit");const I="credentials"in Request.prototype;v=new Request(e,{...f,signal:g,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:s,duplex:"half",credentials:I?h:void 0});let T=await fetch(v);const D=Ef&&(c==="stream"||c==="response");if(Ef&&(a||D&&m)){const M={};["status","statusText","headers"].forEach(w=>{M[w]=T[w]});const $=q.toFiniteNumber(T.headers.get("content-length")),[E,_]=a&&cy($,cu(uy(a),!0))||[];T=new Response(hy(T.body,fy,E,()=>{_&&_(),m&&m()}),M)}c=c||"text";let L=await uu[q.findKey(uu,c)||"text"](T,t);return!D&&m&&m(),await new Promise((M,$)=>{Rw(M,$,{data:L,headers:_n.from(T.headers),status:T.status,statusText:T.statusText,config:t,request:v})})}catch(I){throw m&&m(),I&&I.name==="TypeError"&&/Load failed|fetch/i.test(I.message)?Object.assign(new Be("Network Error",Be.ERR_NETWORK,t,v),{cause:I.cause||I}):Be.from(I,I&&I.code,t,v)}}),kf={http:Q2,xhr:IP,fetch:NP};q.forEach(kf,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const py=t=>`- ${t}`,LP=t=>q.isFunction(t)||t===null||t===!1,Lw={getAdapter:t=>{t=q.isArray(t)?t:[t];const{length:e}=t;let n,s;const r={};for(let i=0;i<e;i++){n=t[i];let o;if(s=n,!LP(n)&&(s=kf[(o=String(n)).toLowerCase()],s===void 0))throw new Be(`Unknown adapter '${o}'`);if(s)break;r[o||"#"+i]=s}if(!s){const i=Object.entries(r).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(py).join(`
`):" "+py(i[0]):"as no adapter specified";throw new Be("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return s},adapters:kf};function Eh(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ao(null,t)}function gy(t){return Eh(t),t.headers=_n.from(t.headers),t.data=wh.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Lw.getAdapter(t.adapter||Tl.adapter)(t).then(function(s){return Eh(t),s.data=wh.call(t,t.transformResponse,s),s.headers=_n.from(s.headers),s},function(s){return Pw(s)||(Eh(t),s&&s.response&&(s.response.data=wh.call(t,t.transformResponse,s.response),s.response.headers=_n.from(s.response.headers))),Promise.reject(s)})}const Vw="1.9.0",ld={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{ld[t]=function(s){return typeof s===t||"a"+(e<1?"n ":" ")+t}});const my={};ld.transitional=function(e,n,s){function r(i,o){return"[Axios v"+Vw+"] Transitional option '"+i+"'"+o+(s?". "+s:"")}return(i,o,a)=>{if(e===!1)throw new Be(r(o," has been removed"+(n?" in "+n:"")),Be.ERR_DEPRECATED);return n&&!my[o]&&(my[o]=!0,console.warn(r(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,a):!0}};ld.spelling=function(e){return(n,s)=>(console.warn(`${s} is likely a misspelling of ${e}`),!0)};function VP(t,e,n){if(typeof t!="object")throw new Be("options must be an object",Be.ERR_BAD_OPTION_VALUE);const s=Object.keys(t);let r=s.length;for(;r-- >0;){const i=s[r],o=e[i];if(o){const a=t[i],l=a===void 0||o(a,i,t);if(l!==!0)throw new Be("option "+i+" must be "+l,Be.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Be("Unknown option "+i,Be.ERR_BAD_OPTION)}}const Mc={assertOptions:VP,validators:ld},ts=Mc.validators;let ci=class{constructor(e){this.defaults=e||{},this.interceptors={request:new ay,response:new ay}}async request(e,n){try{return await this._request(e,n)}catch(s){if(s instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const i=r.stack?r.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=yi(this.defaults,n);const{transitional:s,paramsSerializer:r,headers:i}=n;s!==void 0&&Mc.assertOptions(s,{silentJSONParsing:ts.transitional(ts.boolean),forcedJSONParsing:ts.transitional(ts.boolean),clarifyTimeoutError:ts.transitional(ts.boolean)},!1),r!=null&&(q.isFunction(r)?n.paramsSerializer={serialize:r}:Mc.assertOptions(r,{encode:ts.function,serialize:ts.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Mc.assertOptions(n,{baseUrl:ts.spelling("baseURL"),withXsrfToken:ts.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&q.merge(i.common,i[n.method]);i&&q.forEach(["delete","get","head","post","put","patch","common"],v=>{delete i[v]}),n.headers=_n.concat(o,i);const a=[];let l=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(n)===!1||(l=l&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});const c=[];this.interceptors.response.forEach(function(m){c.push(m.fulfilled,m.rejected)});let u,h=0,f;if(!l){const v=[gy.bind(this),void 0];for(v.unshift.apply(v,a),v.push.apply(v,c),f=v.length,u=Promise.resolve(n);h<f;)u=u.then(v[h++],v[h++]);return u}f=a.length;let g=n;for(h=0;h<f;){const v=a[h++],m=a[h++];try{g=v(g)}catch(b){m.call(this,b);break}}try{u=gy.call(this,g)}catch(v){return Promise.reject(v)}for(h=0,f=c.length;h<f;)u=u.then(c[h++],c[h++]);return u}getUri(e){e=yi(this.defaults,e);const n=Ow(e.baseURL,e.url,e.allowAbsoluteUrls);return Sw(n,e.params,e.paramsSerializer)}};q.forEach(["delete","get","head","options"],function(e){ci.prototype[e]=function(n,s){return this.request(yi(s||{},{method:e,url:n,data:(s||{}).data}))}});q.forEach(["post","put","patch"],function(e){function n(s){return function(i,o,a){return this.request(yi(a||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}ci.prototype[e]=n(),ci.prototype[e+"Form"]=n(!0)});let $P=class $w{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const s=this;this.promise.then(r=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](r);s._listeners=null}),this.promise.then=r=>{let i;const o=new Promise(a=>{s.subscribe(a),i=a}).then(r);return o.cancel=function(){s.unsubscribe(i)},o},e(function(i,o,a){s.reason||(s.reason=new Ao(i,o,a),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=s=>{e.abort(s)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new $w(function(r){e=r}),cancel:e}}};function FP(t){return function(n){return t.apply(null,n)}}function UP(t){return q.isObject(t)&&t.isAxiosError===!0}const Tf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Tf).forEach(([t,e])=>{Tf[e]=t});function Fw(t){const e=new ci(t),n=gw(ci.prototype.request,e);return q.extend(n,ci.prototype,e,{allOwnKeys:!0}),q.extend(n,e,null,{allOwnKeys:!0}),n.create=function(r){return Fw(yi(t,r))},n}const At=Fw(Tl);At.Axios=ci;At.CanceledError=Ao;At.CancelToken=$P;At.isCancel=Pw;At.VERSION=Vw;At.toFormData=od;At.AxiosError=Be;At.Cancel=At.CanceledError;At.all=function(e){return Promise.all(e)};At.spread=FP;At.isAxiosError=UP;At.mergeConfig=yi;At.AxiosHeaders=_n;At.formToJSON=t=>Cw(q.isHTMLForm(t)?new FormData(t):t);At.getAdapter=Lw.getAdapter;At.HttpStatusCode=Tf;At.default=At;const{Axios:EG,AxiosError:kG,CanceledError:TG,isCancel:IG,CancelToken:SG,VERSION:AG,all:CG,Cancel:PG,isAxiosError:RG,spread:OG,toFormData:DG,AxiosHeaders:MG,HttpStatusCode:NG,formToJSON:LG,getAdapter:VG,mergeConfig:$G}=At,BP=()=>{};var yy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},jP=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(l>>10)),e[s++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Bw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,c=l?t[r+2]:0,u=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(f=64)),s.push(n[u],n[h],n[f],n[g])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Uw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):jP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const h=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||a==null||c==null||h==null)throw new zP;const f=i<<2|a>>4;if(s.push(f),c!==64){const g=a<<4&240|c>>2;if(s.push(g),h!==64){const v=c<<6&192|h;s.push(v)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class zP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const HP=function(t){const e=Uw(t);return Bw.encodeByteArray(e,!0)},du=function(t){return HP(t).replace(/\./g,"")},jw=function(t){try{return Bw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP=()=>qP().__FIREBASE_DEFAULTS__,KP=()=>{if(typeof process>"u"||typeof yy>"u")return;const t=yy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},GP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&jw(t[1]);return e&&JSON.parse(e)},cd=()=>{try{return BP()||WP()||KP()||GP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},zw=t=>{var e,n;return(n=(e=cd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},YP=t=>{const e=zw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Hw=()=>{var t;return(t=cd())===null||t===void 0?void 0:t.config},qw=t=>{var e;return(e=cd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Il(t){return t.endsWith(".cloudworkstations.dev")}async function Ww(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[du(JSON.stringify(n)),du(JSON.stringify(o)),""].join(".")}const Pa={};function JP(){const t={prod:[],emulator:[]};for(const e of Object.keys(Pa))Pa[e]?t.emulator.push(e):t.prod.push(e);return t}function ZP(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let vy=!1;function Kw(t,e){if(typeof window>"u"||typeof document>"u"||!Il(window.location.host)||Pa[t]===e||Pa[t]||vy)return;Pa[t]=e;function n(f){return`__firebase__banner__${f}`}const s="__firebase__banner",i=JP().prod.length>0;function o(){const f=document.getElementById(s);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,g){f.setAttribute("width","24"),f.setAttribute("id",g),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{vy=!0,o()},f}function u(f,g){f.setAttribute("id",g),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=ZP(s),g=n("text"),v=document.getElementById(g)||document.createElement("span"),m=n("learnmore"),b=document.getElementById(m)||document.createElement("a"),I=n("preprendIcon"),T=document.getElementById(I)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const D=f.element;a(D),u(b,m);const L=c();l(T,I),D.append(T,v,b,L),document.body.appendChild(D)}i?(v.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function eR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function tR(){var t;const e=(t=cd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function sR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function rR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function iR(){const t=hn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function oR(){return!tR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Gw(){try{return typeof indexedDB=="object"}catch{return!1}}function Yw(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var i;e(((i=r.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function aR(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR="FirebaseError";class ys extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=lR,Object.setPrototypeOf(this,ys.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ci.prototype.create)}}class Ci{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?cR(i,s):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new ys(r,a,s)}}function cR(t,e){return t.replace(uR,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const uR=/\{\$([^}]+)}/g;function dR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function vi(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(by(i)&&by(o)){if(!vi(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function by(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sl(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function la(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[r,i]=s.split("=");e[decodeURIComponent(r)]=decodeURIComponent(i)}}),e}function ca(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function hR(t,e){const n=new fR(t,e);return n.subscribe.bind(n)}class fR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");pR(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=kh),r.error===void 0&&(r.error=kh),r.complete===void 0&&(r.complete=kh);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function kh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(t){return t&&t._delegate?t._delegate:t}class Xn{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new QP;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(yR(e))try{this.getOrInitializeService({instanceIdentifier:Jr})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=Jr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Jr){return this.instances.has(e)}getOptions(e=Jr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);s===a&&o.resolve(r)}return r}onInit(e,n){var s;const r=this.normalizeInstanceIdentifier(n),i=(s=this.onInitCallbacks.get(r))!==null&&s!==void 0?s:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:mR(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Jr){return this.component?this.component.multipleInstances?e:Jr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mR(t){return t===Jr?void 0:t}function yR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new gR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(We||(We={}));const bR={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},_R=We.INFO,xR={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},wR=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=xR[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Vp{constructor(e){this.name=e,this._logLevel=_R,this._logHandler=wR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?bR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}}const ER=(t,e)=>e.some(n=>t instanceof n);let _y,xy;function kR(){return _y||(_y=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TR(){return xy||(xy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Qw=new WeakMap,If=new WeakMap,Xw=new WeakMap,Th=new WeakMap,$p=new WeakMap;function IR(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n($s(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Qw.set(n,t)}).catch(()=>{}),$p.set(e,t),e}function SR(t){if(If.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});If.set(t,e)}let Sf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return If.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Xw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $s(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function AR(t){Sf=t(Sf)}function CR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(Ih(this),e,...n);return Xw.set(s,e.sort?e.sort():[e]),$s(s)}:TR().includes(t)?function(...e){return t.apply(Ih(this),e),$s(Qw.get(this))}:function(...e){return $s(t.apply(Ih(this),e))}}function PR(t){return typeof t=="function"?CR(t):(t instanceof IDBTransaction&&SR(t),ER(t,kR())?new Proxy(t,Sf):t)}function $s(t){if(t instanceof IDBRequest)return IR(t);if(Th.has(t))return Th.get(t);const e=PR(t);return e!==t&&(Th.set(t,e),$p.set(e,t)),e}const Ih=t=>$p.get(t);function ud(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),a=$s(o);return s&&o.addEventListener("upgradeneeded",l=>{s($s(o.result),l.oldVersion,l.newVersion,$s(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}function Sh(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",s=>e(s.oldVersion,s)),$s(n).then(()=>{})}const RR=["get","getKey","getAll","getAllKeys","count"],OR=["put","add","delete","clear"],Ah=new Map;function wy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ah.get(e))return Ah.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=OR.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||RR.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return s&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),r&&l.done]))[0]};return Ah.set(e,i),i}AR(t=>({...t,get:(e,n,s)=>wy(e,n)||t.get(e,n,s),has:(e,n)=>!!wy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(MR(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function MR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Af="@firebase/app",Ey="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs=new Vp("@firebase/app"),NR="@firebase/app-compat",LR="@firebase/analytics-compat",VR="@firebase/analytics",$R="@firebase/app-check-compat",FR="@firebase/app-check",UR="@firebase/auth",BR="@firebase/auth-compat",jR="@firebase/database",zR="@firebase/data-connect",HR="@firebase/database-compat",qR="@firebase/functions",WR="@firebase/functions-compat",KR="@firebase/installations",GR="@firebase/installations-compat",YR="@firebase/messaging",QR="@firebase/messaging-compat",XR="@firebase/performance",JR="@firebase/performance-compat",ZR="@firebase/remote-config",eO="@firebase/remote-config-compat",tO="@firebase/storage",nO="@firebase/storage-compat",sO="@firebase/firestore",rO="@firebase/ai",iO="@firebase/firestore-compat",oO="firebase",aO="11.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cf="[DEFAULT]",lO={[Af]:"fire-core",[NR]:"fire-core-compat",[VR]:"fire-analytics",[LR]:"fire-analytics-compat",[FR]:"fire-app-check",[$R]:"fire-app-check-compat",[UR]:"fire-auth",[BR]:"fire-auth-compat",[jR]:"fire-rtdb",[zR]:"fire-data-connect",[HR]:"fire-rtdb-compat",[qR]:"fire-fn",[WR]:"fire-fn-compat",[KR]:"fire-iid",[GR]:"fire-iid-compat",[YR]:"fire-fcm",[QR]:"fire-fcm-compat",[XR]:"fire-perf",[JR]:"fire-perf-compat",[ZR]:"fire-rc",[eO]:"fire-rc-compat",[tO]:"fire-gcs",[nO]:"fire-gcs-compat",[sO]:"fire-fst",[iO]:"fire-fst-compat",[rO]:"fire-vertex","fire-js":"fire-js",[oO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hu=new Map,cO=new Map,Pf=new Map;function ky(t,e){try{t.container.addComponent(e)}catch(n){Hs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function gs(t){const e=t.name;if(Pf.has(e))return Hs.debug(`There were multiple attempts to register component ${e}.`),!1;Pf.set(e,t);for(const n of hu.values())ky(n,t);for(const n of cO.values())ky(n,t);return!0}function Co(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function In(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xr=new Ci("app","Firebase",uO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Xn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po=aO;function dd(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Cf,automaticDataCollectionEnabled:!0},e),r=s.name;if(typeof r!="string"||!r)throw xr.create("bad-app-name",{appName:String(r)});if(n||(n=Hw()),!n)throw xr.create("no-options");const i=hu.get(r);if(i){if(vi(n,i.options)&&vi(s,i.config))return i;throw xr.create("duplicate-app",{appName:r})}const o=new vR(r);for(const l of Pf.values())o.addComponent(l);const a=new dO(n,s,o);return hu.set(r,a),a}function Fp(t=Cf){const e=hu.get(t);if(!e&&t===Cf&&Hw())return dd();if(!e)throw xr.create("no-app",{appName:t});return e}function $n(t,e,n){var s;let r=(s=lO[t])!==null&&s!==void 0?s:t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hs.warn(a.join(" "));return}gs(new Xn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO="firebase-heartbeat-database",fO=1,Ja="firebase-heartbeat-store";let Ch=null;function Jw(){return Ch||(Ch=ud(hO,fO,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ja)}catch(n){console.warn(n)}}}}).catch(t=>{throw xr.create("idb-open",{originalErrorMessage:t.message})})),Ch}async function pO(t){try{const n=(await Jw()).transaction(Ja),s=await n.objectStore(Ja).get(Zw(t));return await n.done,s}catch(e){if(e instanceof ys)Hs.warn(e.message);else{const n=xr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Hs.warn(n.message)}}}async function Ty(t,e){try{const s=(await Jw()).transaction(Ja,"readwrite");await s.objectStore(Ja).put(e,Zw(t)),await s.done}catch(n){if(n instanceof ys)Hs.warn(n.message);else{const s=xr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Hs.warn(s.message)}}}function Zw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gO=1024,mO=30;class yO{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new bO(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Iy();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats.length>mO){const o=_O(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Hs.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Iy(),{heartbeatsToSend:s,unsentEntries:r}=vO(this._heartbeatsCache.heartbeats),i=du(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Hs.warn(n),""}}}function Iy(){return new Date().toISOString().substring(0,10)}function vO(t,e=gO){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),Sy(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Sy(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class bO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Gw()?Yw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await pO(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Ty(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Ty(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Sy(t){return du(JSON.stringify({version:2,heartbeats:t})).length}function _O(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xO(t){gs(new Xn("platform-logger",e=>new DR(e),"PRIVATE")),gs(new Xn("heartbeat",e=>new yO(e),"PRIVATE")),$n(Af,Ey,t),$n(Af,Ey,"esm2017"),$n("fire-js","")}xO("");var wO="firebase",EO="11.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$n(wO,EO,"app");const e1="@firebase/installations",Up="0.6.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1=1e4,n1=`w:${Up}`,s1="FIS_v2",kO="https://firebaseinstallations.googleapis.com/v1",TO=60*60*1e3,IO="installations",SO="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},bi=new Ci(IO,SO,AO);function r1(t){return t instanceof ys&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i1({projectId:t}){return`${kO}/projects/${t}/installations`}function o1(t){return{token:t.token,requestStatus:2,expiresIn:PO(t.expiresIn),creationTime:Date.now()}}async function a1(t,e){const s=(await e.json()).error;return bi.create("request-failed",{requestName:t,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function l1({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function CO(t,{refreshToken:e}){const n=l1(t);return n.append("Authorization",RO(e)),n}async function c1(t){const e=await t();return e.status>=500&&e.status<600?t():e}function PO(t){return Number(t.replace("s","000"))}function RO(t){return`${s1} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OO({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const s=i1(t),r=l1(t),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&r.append("x-firebase-client",c)}const o={fid:n,authVersion:s1,appId:t.appId,sdkVersion:n1},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await c1(()=>fetch(s,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:o1(c.authToken)}}else throw await a1("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DO(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO=/^[cdef][\w-]{21}$/,Rf="";function NO(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=LO(t);return MO.test(n)?n:Rf}catch{return Rf}}function LO(t){return DO(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hd(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1=new Map;function h1(t,e){const n=hd(t);f1(n,e),VO(n,e)}function f1(t,e){const n=d1.get(t);if(n)for(const s of n)s(e)}function VO(t,e){const n=$O();n&&n.postMessage({key:t,fid:e}),FO()}let si=null;function $O(){return!si&&"BroadcastChannel"in self&&(si=new BroadcastChannel("[Firebase] FID Change"),si.onmessage=t=>{f1(t.data.key,t.data.fid)}),si}function FO(){d1.size===0&&si&&(si.close(),si=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UO="firebase-installations-database",BO=1,_i="firebase-installations-store";let Ph=null;function Bp(){return Ph||(Ph=ud(UO,BO,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(_i)}}})),Ph}async function fu(t,e){const n=hd(t),r=(await Bp()).transaction(_i,"readwrite"),i=r.objectStore(_i),o=await i.get(n);return await i.put(e,n),await r.done,(!o||o.fid!==e.fid)&&h1(t,e.fid),e}async function p1(t){const e=hd(t),s=(await Bp()).transaction(_i,"readwrite");await s.objectStore(_i).delete(e),await s.done}async function fd(t,e){const n=hd(t),r=(await Bp()).transaction(_i,"readwrite"),i=r.objectStore(_i),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await r.done,a&&(!o||o.fid!==a.fid)&&h1(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jp(t){let e;const n=await fd(t.appConfig,s=>{const r=jO(s),i=zO(t,r);return e=i.registrationPromise,i.installationEntry});return n.fid===Rf?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function jO(t){const e=t||{fid:NO(),registrationStatus:0};return g1(e)}function zO(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(bi.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=HO(t,n);return{installationEntry:n,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:qO(t)}:{installationEntry:e}}async function HO(t,e){try{const n=await OO(t,e);return fu(t.appConfig,n)}catch(n){throw r1(n)&&n.customData.serverCode===409?await p1(t.appConfig):await fu(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function qO(t){let e=await Ay(t.appConfig);for(;e.registrationStatus===1;)await u1(100),e=await Ay(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:s}=await jp(t);return s||n}return e}function Ay(t){return fd(t,e=>{if(!e)throw bi.create("installation-not-found");return g1(e)})}function g1(t){return WO(t)?{fid:t.fid,registrationStatus:0}:t}function WO(t){return t.registrationStatus===1&&t.registrationTime+t1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KO({appConfig:t,heartbeatServiceProvider:e},n){const s=GO(t,n),r=CO(t,n),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&r.append("x-firebase-client",c)}const o={installation:{sdkVersion:n1,appId:t.appId}},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await c1(()=>fetch(s,a));if(l.ok){const c=await l.json();return o1(c)}else throw await a1("Generate Auth Token",l)}function GO(t,{fid:e}){return`${i1(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zp(t,e=!1){let n;const s=await fd(t.appConfig,i=>{if(!m1(i))throw bi.create("not-registered");const o=i.authToken;if(!e&&XO(o))return i;if(o.requestStatus===1)return n=YO(t,e),i;{if(!navigator.onLine)throw bi.create("app-offline");const a=ZO(i);return n=QO(t,a),a}});return n?await n:s.authToken}async function YO(t,e){let n=await Cy(t.appConfig);for(;n.authToken.requestStatus===1;)await u1(100),n=await Cy(t.appConfig);const s=n.authToken;return s.requestStatus===0?zp(t,e):s}function Cy(t){return fd(t,e=>{if(!m1(e))throw bi.create("not-registered");const n=e.authToken;return eD(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function QO(t,e){try{const n=await KO(t,e),s=Object.assign(Object.assign({},e),{authToken:n});return await fu(t.appConfig,s),n}catch(n){if(r1(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await p1(t.appConfig);else{const s=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await fu(t.appConfig,s)}throw n}}function m1(t){return t!==void 0&&t.registrationStatus===2}function XO(t){return t.requestStatus===2&&!JO(t)}function JO(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+TO}function ZO(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function eD(t){return t.requestStatus===1&&t.requestTime+t1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tD(t){const e=t,{installationEntry:n,registrationPromise:s}=await jp(e);return s?s.catch(console.error):zp(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nD(t,e=!1){const n=t;return await sD(n),(await zp(n,e)).token}async function sD(t){const{registrationPromise:e}=await jp(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rD(t){if(!t||!t.options)throw Rh("App Configuration");if(!t.name)throw Rh("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Rh(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Rh(t){return bi.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1="installations",iD="installations-internal",oD=t=>{const e=t.getProvider("app").getImmediate(),n=rD(e),s=Co(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},aD=t=>{const e=t.getProvider("app").getImmediate(),n=Co(e,y1).getImmediate();return{getId:()=>tD(n),getToken:r=>nD(n,r)}};function lD(){gs(new Xn(y1,oD,"PUBLIC")),gs(new Xn(iD,aD,"PRIVATE"))}lD();$n(e1,Up);$n(e1,Up,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD="/firebase-messaging-sw.js",uD="/firebase-cloud-messaging-push-scope",v1="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",dD="https://fcmregistrations.googleapis.com/v1",b1="google.c.a.c_id",hD="google.c.a.c_l",fD="google.c.a.ts",pD="google.c.a.e",Py=1e4;var Ry;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(Ry||(Ry={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Za;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(Za||(Za={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function gD(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),s=atob(n),r=new Uint8Array(s.length);for(let i=0;i<s.length;++i)r[i]=s.charCodeAt(i);return r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oh="fcm_token_details_db",mD=5,Oy="fcm_token_object_Store";async function yD(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(i=>i.name).includes(Oh))return null;let e=null;return(await ud(Oh,mD,{upgrade:async(s,r,i,o)=>{var a;if(r<2||!s.objectStoreNames.contains(Oy))return;const l=o.objectStore(Oy),c=await l.index("fcmSenderId").get(t);if(await l.clear(),!!c){if(r===2){const u=c;if(!u.auth||!u.p256dh||!u.endpoint)return;e={token:u.fcmToken,createTime:(a=u.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:u.auth,p256dh:u.p256dh,endpoint:u.endpoint,swScope:u.swScope,vapidKey:typeof u.vapidKey=="string"?u.vapidKey:Ss(u.vapidKey)}}}else if(r===3){const u=c;e={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:Ss(u.auth),p256dh:Ss(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:Ss(u.vapidKey)}}}else if(r===4){const u=c;e={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:Ss(u.auth),p256dh:Ss(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:Ss(u.vapidKey)}}}}}})).close(),await Sh(Oh),await Sh("fcm_vapid_details_db"),await Sh("undefined"),vD(e)?e:null}function vD(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD="firebase-messaging-database",_D=1,el="firebase-messaging-store";let Dh=null;function _1(){return Dh||(Dh=ud(bD,_D,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(el)}}})),Dh}async function xD(t){const e=x1(t),s=await(await _1()).transaction(el).objectStore(el).get(e);if(s)return s;{const r=await yD(t.appConfig.senderId);if(r)return await Hp(t,r),r}}async function Hp(t,e){const n=x1(t),r=(await _1()).transaction(el,"readwrite");return await r.objectStore(el).put(e,n),await r.done,e}function x1({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},dn=new Ci("messaging","Messaging",wD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ED(t,e){const n=await Wp(t),s=w1(e),r={method:"POST",headers:n,body:JSON.stringify(s)};let i;try{i=await(await fetch(qp(t.appConfig),r)).json()}catch(o){throw dn.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(i.error){const o=i.error.message;throw dn.create("token-subscribe-failed",{errorInfo:o})}if(!i.token)throw dn.create("token-subscribe-no-token");return i.token}async function kD(t,e){const n=await Wp(t),s=w1(e.subscriptionOptions),r={method:"PATCH",headers:n,body:JSON.stringify(s)};let i;try{i=await(await fetch(`${qp(t.appConfig)}/${e.token}`,r)).json()}catch(o){throw dn.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(i.error){const o=i.error.message;throw dn.create("token-update-failed",{errorInfo:o})}if(!i.token)throw dn.create("token-update-no-token");return i.token}async function TD(t,e){const s={method:"DELETE",headers:await Wp(t)};try{const i=await(await fetch(`${qp(t.appConfig)}/${e}`,s)).json();if(i.error){const o=i.error.message;throw dn.create("token-unsubscribe-failed",{errorInfo:o})}}catch(r){throw dn.create("token-unsubscribe-failed",{errorInfo:r==null?void 0:r.toString()})}}function qp({projectId:t}){return`${dD}/projects/${t}/registrations`}async function Wp({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function w1({p256dh:t,auth:e,endpoint:n,vapidKey:s}){const r={web:{endpoint:n,auth:e,p256dh:t}};return s!==v1&&(r.web.applicationPubKey=s),r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID=7*24*60*60*1e3;async function SD(t){const e=await CD(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Ss(e.getKey("auth")),p256dh:Ss(e.getKey("p256dh"))},s=await xD(t.firebaseDependencies);if(s){if(PD(s.subscriptionOptions,n))return Date.now()>=s.createTime+ID?AD(t,{token:s.token,createTime:Date.now(),subscriptionOptions:n}):s.token;try{await TD(t.firebaseDependencies,s.token)}catch(r){console.warn(r)}return Dy(t.firebaseDependencies,n)}else return Dy(t.firebaseDependencies,n)}async function AD(t,e){try{const n=await kD(t.firebaseDependencies,e),s=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await Hp(t.firebaseDependencies,s),n}catch(n){throw n}}async function Dy(t,e){const s={token:await ED(t,e),createTime:Date.now(),subscriptionOptions:e};return await Hp(t,s),s.token}async function CD(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:gD(e)})}function PD(t,e){const n=e.vapidKey===t.vapidKey,s=e.endpoint===t.endpoint,r=e.auth===t.auth,i=e.p256dh===t.p256dh;return n&&s&&r&&i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function My(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return RD(e,t),OD(e,t),DD(e,t),e}function RD(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const s=e.notification.body;s&&(t.notification.body=s);const r=e.notification.image;r&&(t.notification.image=r);const i=e.notification.icon;i&&(t.notification.icon=i)}function OD(t,e){e.data&&(t.data=e.data)}function DD(t,e){var n,s,r,i,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const a=(r=(s=e.fcmOptions)===null||s===void 0?void 0:s.link)!==null&&r!==void 0?r:(i=e.notification)===null||i===void 0?void 0:i.click_action;a&&(t.fcmOptions.link=a);const l=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;l&&(t.fcmOptions.analyticsLabel=l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MD(t){return typeof t=="object"&&!!t&&b1 in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ND(t){if(!t||!t.options)throw Mh("App Configuration Object");if(!t.name)throw Mh("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const s of e)if(!n[s])throw Mh(s);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function Mh(t){return dn.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e,n,s){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=ND(e);this.firebaseDependencies={app:e,appConfig:r,installations:n,analyticsProvider:s}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VD(t){try{t.swRegistration=await navigator.serviceWorker.register(cD,{scope:uD}),t.swRegistration.update().catch(()=>{}),await $D(t.swRegistration)}catch(e){throw dn.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}async function $D(t){return new Promise((e,n)=>{const s=setTimeout(()=>n(new Error(`Service worker not registered after ${Py} ms`)),Py),r=t.installing||t.waiting;t.active?(clearTimeout(s),e()):r?r.onstatechange=i=>{var o;((o=i.target)===null||o===void 0?void 0:o.state)==="activated"&&(r.onstatechange=null,clearTimeout(s),e())}:(clearTimeout(s),n(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FD(t,e){if(!e&&!t.swRegistration&&await VD(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw dn.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UD(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=v1)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E1(t,e){if(!navigator)throw dn.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw dn.create("permission-blocked");return await UD(t,e==null?void 0:e.vapidKey),await FD(t,e==null?void 0:e.serviceWorkerRegistration),SD(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BD(t,e,n){const s=jD(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(s,{message_id:n[b1],message_name:n[hD],message_time:n[fD],message_device_time:Math.floor(Date.now()/1e3)})}function jD(t){switch(t){case Za.NOTIFICATION_CLICKED:return"notification_open";case Za.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zD(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Za.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(My(n)):t.onMessageHandler.next(My(n)));const s=n.data;MD(s)&&s[pD]==="1"&&await BD(t,n.messageType,s)}const Ny="@firebase/messaging",Ly="0.12.21";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD=t=>{const e=new LD(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>zD(e,n)),e},qD=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:s=>E1(e,s)}};function WD(){gs(new Xn("messaging",HD,"PUBLIC")),gs(new Xn("messaging-internal",qD,"PRIVATE")),$n(Ny,Ly),$n(Ny,Ly,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k1(){try{await Yw()}catch{return!1}return typeof window<"u"&&Gw()&&aR()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KD(t,e){if(!navigator)throw dn.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GD(t=Fp()){return k1().then(e=>{if(!e)throw dn.create("unsupported-browser")},e=>{throw dn.create("indexed-db-unsupported")}),Co(Ct(t),"messaging").getImmediate()}async function YD(t,e){return t=Ct(t),E1(t,e)}function QD(t,e){return t=Ct(t),KD(t,e)}WD();function Kp(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n}function T1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const XD=T1,I1=new Ci("auth","Firebase",T1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pu=new Vp("@firebase/auth");function JD(t,...e){pu.logLevel<=We.WARN&&pu.warn(`Auth (${Po}): ${t}`,...e)}function Nc(t,...e){pu.logLevel<=We.ERROR&&pu.error(`Auth (${Po}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(t,...e){throw Yp(t,...e)}function Kn(t,...e){return Yp(t,...e)}function Gp(t,e,n){const s=Object.assign(Object.assign({},XD()),{[e]:n});return new Ci("auth","Firebase",s).create(e,{appName:t.name})}function Fs(t){return Gp(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ZD(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Un(t,"argument-error"),Gp(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Yp(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return I1.create(t,...e)}function Oe(t,e,...n){if(!t)throw Yp(e,...n)}function Ms(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Nc(e),new Error(e)}function qs(t,e){t||Ms(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Of(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function eM(){return Vy()==="http:"||Vy()==="https:"}function Vy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eM()||sR()||"connection"in navigator)?navigator.onLine:!0}function nM(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e,n){this.shortDelay=e,this.longDelay=n,qs(n>e,"Short delay should be less than long delay!"),this.isMobile=eR()||rR()}get(){return tM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(t,e){qs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ms("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ms("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ms("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rM=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],iM=new Al(3e4,6e4);function Lr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Vr(t,e,n,s,r={}){return A1(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const a=Sl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return nR()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&Il(t.emulatorConfig.host)&&(c.credentials="include"),S1.fetch()(await C1(t,t.config.apiHost,n,a),c)})}async function A1(t,e,n){t._canInitEmulator=!1;const s=Object.assign(Object.assign({},sM),e);try{const r=new aM(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw sc(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw sc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw sc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw sc(t,"user-disabled",o);const u=s[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Gp(t,u,c);Un(t,u)}}catch(r){if(r instanceof ys)throw r;Un(t,"network-request-failed",{message:String(r)})}}async function Cl(t,e,n,s,r={}){const i=await Vr(t,e,n,s,r);return"mfaPendingCredential"in i&&Un(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function C1(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?Qp(t.config,r):`${t.config.apiScheme}://${r}`;return rM.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function oM(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class aM{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Kn(this.auth,"network-request-failed")),iM.get())})}}function sc(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=Kn(t,e,s);return r.customData._tokenResponse=n,r}function $y(t){return t!==void 0&&t.enterprise!==void 0}class lM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return oM(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function cM(t,e){return Vr(t,"GET","/v2/recaptchaConfig",Lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uM(t,e){return Vr(t,"POST","/v1/accounts:delete",e)}async function gu(t,e){return Vr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ra(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function dM(t,e=!1){const n=Ct(t),s=await n.getIdToken(e),r=Xp(s);Oe(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:r,token:s,authTime:Ra(Nh(r.auth_time)),issuedAtTime:Ra(Nh(r.iat)),expirationTime:Ra(Nh(r.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Nh(t){return Number(t)*1e3}function Xp(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Nc("JWT malformed, contained fewer than 3 sections"),null;try{const r=jw(n);return r?JSON.parse(r):(Nc("Failed to decode base64 JWT payload"),null)}catch(r){return Nc("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Fy(t){const e=Xp(t);return Oe(e,"internal-error"),Oe(typeof e.exp<"u","internal-error"),Oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tl(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof ys&&hM(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function hM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ra(this.lastLoginAt),this.creationTime=Ra(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mu(t){var e;const n=t.auth,s=await t.getIdToken(),r=await tl(t,gu(n,{idToken:s}));Oe(r==null?void 0:r.users.length,n,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?P1(i.providerUserInfo):[],a=gM(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Df(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function pM(t){const e=Ct(t);await mu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function gM(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function P1(t){return t.map(e=>{var{providerId:n}=e,s=Kp(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mM(t,e){const n=await A1(t,{},async()=>{const s=Sl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await C1(t,r,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",S1.fetch()(o,{method:"POST",headers:a,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function yM(t,e){return Vr(t,"POST","/v2/accounts:revokeToken",Lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Oe(e.idToken,"internal-error"),Oe(typeof e.idToken<"u","internal-error"),Oe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Fy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Oe(e.length!==0,"internal-error");const n=Fy(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await mM(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new no;return s&&(Oe(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(Oe(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(Oe(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new no,this.toJSON())}_performRefresh(){return Ms("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(t,e){Oe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Hn{constructor(e){var{uid:n,auth:s,stsTokenManager:r}=e,i=Kp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Df(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await tl(this,this.stsTokenManager.getToken(this.auth,e));return Oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return dM(this,e)}reload(){return pM(this)}_assign(e){this!==e&&(Oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Hn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await mu(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(In(this.auth.app))return Promise.reject(Fs(this.auth));const e=await this.getIdToken();return await tl(this,uM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,r,i,o,a,l,c,u;const h=(s=n.displayName)!==null&&s!==void 0?s:void 0,f=(r=n.email)!==null&&r!==void 0?r:void 0,g=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,v=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,b=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,I=(c=n.createdAt)!==null&&c!==void 0?c:void 0,T=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:D,emailVerified:L,isAnonymous:M,providerData:$,stsTokenManager:E}=n;Oe(D&&E,e,"internal-error");const _=no.fromJSON(this.name,E);Oe(typeof D=="string",e,"internal-error"),sr(h,e.name),sr(f,e.name),Oe(typeof L=="boolean",e,"internal-error"),Oe(typeof M=="boolean",e,"internal-error"),sr(g,e.name),sr(v,e.name),sr(m,e.name),sr(b,e.name),sr(I,e.name),sr(T,e.name);const w=new Hn({uid:D,auth:e,email:f,emailVerified:L,displayName:h,isAnonymous:M,photoURL:v,phoneNumber:g,tenantId:m,stsTokenManager:_,createdAt:I,lastLoginAt:T});return $&&Array.isArray($)&&(w.providerData=$.map(A=>Object.assign({},A))),b&&(w._redirectEventId=b),w}static async _fromIdTokenResponse(e,n,s=!1){const r=new no;r.updateFromServerResponse(n);const i=new Hn({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await mu(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];Oe(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?P1(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(i!=null&&i.length),a=new no;a.updateFromIdToken(s);const l=new Hn({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Df(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy=new Map;function Ns(t){qs(t instanceof Function,"Expected a class definition");let e=Uy.get(t);return e?(qs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Uy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}R1.type="NONE";const By=R1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lc(t,e,n){return`firebase:${t}:${e}:${n}`}class so{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=Lc(this.userKey,r.apiKey,i),this.fullPersistenceKey=Lc("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await gu(this.auth,{idToken:e}).catch(()=>{});return n?Hn._fromGetAccountInfoResponse(this.auth,n,e):null}return Hn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new so(Ns(By),e,s);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=r[0]||Ns(By);const o=Lc(s,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){let h;if(typeof u=="string"){const f=await gu(e,{idToken:u}).catch(()=>{});if(!f)break;h=await Hn._fromGetAccountInfoResponse(e,f,u)}else h=Hn._fromJSON(e,u);c!==i&&(a=h),i=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new so(i,e,s):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new so(i,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(N1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(O1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(V1(e))return"Blackberry";if($1(e))return"Webos";if(D1(e))return"Safari";if((e.includes("chrome/")||M1(e))&&!e.includes("edge/"))return"Chrome";if(L1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function O1(t=hn()){return/firefox\//i.test(t)}function D1(t=hn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function M1(t=hn()){return/crios\//i.test(t)}function N1(t=hn()){return/iemobile/i.test(t)}function L1(t=hn()){return/android/i.test(t)}function V1(t=hn()){return/blackberry/i.test(t)}function $1(t=hn()){return/webos/i.test(t)}function Jp(t=hn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function vM(t=hn()){var e;return Jp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function bM(){return iR()&&document.documentMode===10}function F1(t=hn()){return Jp(t)||L1(t)||$1(t)||V1(t)||/windows phone/i.test(t)||N1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(t,e=[]){let n;switch(t){case"Browser":n=jy(hn());break;case"Worker":n=`${jy(hn())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Po}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xM(t,e={}){return Vr(t,"GET","/v2/passwordPolicy",Lr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM=6;class EM{constructor(e){var n,s,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:wM,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,r,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(s=l.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zy(this),this.idTokenSubscription=new zy(this),this.beforeStateQueue=new _M(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=I1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ns(n)),this._initializationPromise=this.queue(async()=>{var s,r,i;if(!this._deleted&&(this.persistenceManager=await so.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await gu(this,{idToken:e}),s=await Hn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(In(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let r=s,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await mu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=nM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(In(this.app))return Promise.reject(Fs(this));const n=e?Ct(e):null;return n&&Oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return In(this.app)?Promise.reject(Fs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return In(this.app)?Promise.reject(Fs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ns(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await xM(this),n=new EM(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ci("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await yM(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ns(e)||this._popupRedirectResolver;Oe(n,this,"argument-error"),this.redirectPersistenceManager=await so.create(this,[Ns(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Oe(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,s,r);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=U1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;if(In(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&JD(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function $r(t){return Ct(t)}class zy{constructor(e){this.auth=e,this.observer=null,this.addObserver=hR(n=>this.observer=n)}get next(){return Oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function TM(t){pd=t}function B1(t){return pd.loadJS(t)}function IM(){return pd.recaptchaEnterpriseScript}function SM(){return pd.gapiScript}function AM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class CM{constructor(){this.enterprise=new PM}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class PM{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const RM="recaptcha-enterprise",j1="NO_RECAPTCHA";class OM{constructor(e){this.type=RM,this.auth=$r(e)}async verify(e="verify",n=!1){async function s(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{cM(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new lM(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function r(i,o,a){const l=window.grecaptcha;$y(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(j1)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new CM().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{s(this.auth).then(a=>{if(!n&&$y(window.grecaptcha))r(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=IM();l.length!==0&&(l+=a),B1(l).then(()=>{r(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Hy(t,e,n,s=!1,r=!1){const i=new OM(t);let o;if(r)o=j1;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return s?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function qy(t,e,n,s,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Hy(t,e,n,n==="getOobCode");return s(t,o)}else return s(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await Hy(t,e,n,n==="getOobCode");return s(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DM(t,e){const n=Co(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(vi(i,e??{}))return r;Un(r,"already-initialized")}return n.initialize({options:e})}function MM(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(Ns);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function NM(t,e,n){const s=$r(t);Oe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=z1(e),{host:o,port:a}=LM(e),l=a===null?"":`:${a}`,c={url:`${i}//${o}${l}/`},u=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){Oe(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Oe(vi(c,s.config.emulator)&&vi(u,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=c,s.emulatorConfig=u,s.settings.appVerificationDisabledForTesting=!0,Il(o)?(Ww(`${i}//${o}${l}`),Kw("Auth",!0)):VM()}function z1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function LM(t){const e=z1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:Wy(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:Wy(o)}}}function Wy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function VM(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ms("not implemented")}_getIdTokenResponse(e){return Ms("not implemented")}_linkToIdToken(e,n){return Ms("not implemented")}_getReauthenticationResolver(e){return Ms("not implemented")}}async function $M(t,e){return Vr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FM(t,e){return Cl(t,"POST","/v1/accounts:signInWithPassword",Lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UM(t,e){return Cl(t,"POST","/v1/accounts:signInWithEmailLink",Lr(t,e))}async function BM(t,e){return Cl(t,"POST","/v1/accounts:signInWithEmailLink",Lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl extends Zp{constructor(e,n,s,r=null){super("password",s),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new nl(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new nl(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qy(e,n,"signInWithPassword",FM);case"emailLink":return UM(e,{email:this._email,oobCode:this._password});default:Un(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qy(e,s,"signUpPassword",$M);case"emailLink":return BM(e,{idToken:n,email:this._email,oobCode:this._password});default:Un(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ro(t,e){return Cl(t,"POST","/v1/accounts:signInWithIdp",Lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM="http://localhost";class xi extends Zp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new xi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Un("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r}=n,i=Kp(n,["providerId","signInMethod"]);if(!s||!r)return null;const o=new xi(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ro(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,ro(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ro(e,n)}buildRequest(){const e={requestUri:jM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Sl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zM(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function HM(t){const e=la(ca(t)).link,n=e?la(ca(e)).deep_link_id:null,s=la(ca(t)).deep_link_id;return(s?la(ca(s)).link:null)||s||n||e||t}class eg{constructor(e){var n,s,r,i,o,a;const l=la(ca(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(s=l.oobCode)!==null&&s!==void 0?s:null,h=zM((r=l.mode)!==null&&r!==void 0?r:null);Oe(c&&u&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=u,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=HM(e);try{return new eg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(){this.providerId=Ro.PROVIDER_ID}static credential(e,n){return nl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=eg.parseLink(n);return Oe(s,"argument-error"),nl._fromEmailAndCode(e,s.code,s.tenantId)}}Ro.PROVIDER_ID="password";Ro.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ro.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl extends tg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr extends Pl{constructor(){super("facebook.com")}static credential(e){return xi._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hr.credential(e.oauthAccessToken)}catch{return null}}}hr.FACEBOOK_SIGN_IN_METHOD="facebook.com";hr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds extends Pl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return xi._fromParams({providerId:Ds.PROVIDER_ID,signInMethod:Ds.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ds.credentialFromTaggedObject(e)}static credentialFromError(e){return Ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Ds.credential(n,s)}catch{return null}}}Ds.GOOGLE_SIGN_IN_METHOD="google.com";Ds.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends Pl{constructor(){super("github.com")}static credential(e){return xi._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fr.credential(e.oauthAccessToken)}catch{return null}}}fr.GITHUB_SIGN_IN_METHOD="github.com";fr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends Pl{constructor(){super("twitter.com")}static credential(e,n){return xi._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return pr.credential(n,s)}catch{return null}}}pr.TWITTER_SIGN_IN_METHOD="twitter.com";pr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await Hn._fromIdTokenResponse(e,s,r),o=Ky(s);return new wi({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=Ky(s);return new wi({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function Ky(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu extends ys{constructor(e,n,s,r){var i;super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,yu.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new yu(e,n,s,r)}}function H1(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?yu._fromErrorAndOperation(t,i,e,s):i})}async function qM(t,e,n=!1){const s=await tl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return wi._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WM(t,e,n=!1){const{auth:s}=t;if(In(s.app))return Promise.reject(Fs(s));const r="reauthenticate";try{const i=await tl(t,H1(s,r,e,t),n);Oe(i.idToken,s,"internal-error");const o=Xp(i.idToken);Oe(o,s,"internal-error");const{sub:a}=o;return Oe(t.uid===a,s,"user-mismatch"),wi._forOperation(t,r,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Un(s,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q1(t,e,n=!1){if(In(t.app))return Promise.reject(Fs(t));const s="signIn",r=await H1(t,s,e),i=await wi._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}async function KM(t,e){return q1($r(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GM(t,e){return Cl(t,"POST","/v1/accounts:signInWithCustomToken",Lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lh(t,e){if(In(t.app))return Promise.reject(Fs(t));const n=$r(t),s=await GM(n,{token:e,returnSecureToken:!0}),r=await wi._fromIdTokenResponse(n,"signIn",s);return await n._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YM(t){const e=$r(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function QM(t,e,n){return In(t.app)?Promise.reject(Fs(t)):KM(Ct(t),Ro.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&YM(t),s})}function XM(t,e,n,s){return Ct(t).onIdTokenChanged(e,n,s)}function JM(t,e,n){return Ct(t).beforeAuthStateChanged(e,n)}function ZM(t){return Ct(t).signOut()}const vu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(vu,"1"),this.storage.removeItem(vu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e4=1e3,t4=10;class K1 extends W1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=F1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);bM()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,t4):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},e4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}K1.type="LOCAL";const n4=K1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1 extends W1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}G1.type="SESSION";const Y1=G1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s4(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new gd(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await s4(a);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=ng("",20);r.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(f.data.response);break;default:clearTimeout(u),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(){return window}function i4(t){ds().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(){return typeof ds().WorkerGlobalScope<"u"&&typeof ds().importScripts=="function"}async function o4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function a4(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function l4(){return Q1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1="firebaseLocalStorageDb",c4=1,bu="firebaseLocalStorage",J1="fbase_key";class Rl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function md(t,e){return t.transaction([bu],e?"readwrite":"readonly").objectStore(bu)}function u4(){const t=indexedDB.deleteDatabase(X1);return new Rl(t).toPromise()}function Mf(){const t=indexedDB.open(X1,c4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(bu,{keyPath:J1})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(bu)?e(s):(s.close(),await u4(),e(await Mf()))})})}async function Gy(t,e,n){const s=md(t,!0).put({[J1]:e,value:n});return new Rl(s).toPromise()}async function d4(t,e){const n=md(t,!1).get(e),s=await new Rl(n).toPromise();return s===void 0?null:s.value}function Yy(t,e){const n=md(t,!0).delete(e);return new Rl(n).toPromise()}const h4=800,f4=3;class Z1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Mf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>f4)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Q1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gd._getInstance(l4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await o4(),!this.activeServiceWorker)return;this.sender=new r4(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||a4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Mf();return await Gy(e,vu,"1"),await Yy(e,vu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Gy(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>d4(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Yy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=md(r,!1).getAll();return new Rl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),h4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Z1.type="LOCAL";const p4=Z1;new Al(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(t,e){return e?Ns(e):(Oe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg extends Zp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ro(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ro(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ro(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function g4(t){return q1(t.auth,new sg(t),t.bypassAuthState)}function m4(t){const{auth:e,user:n}=t;return Oe(n,e,"internal-error"),WM(n,new sg(t),t.bypassAuthState)}async function y4(t){const{auth:e,user:n}=t;return Oe(n,e,"internal-error"),qM(n,new sg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return g4;case"linkViaPopup":case"linkViaRedirect":return y4;case"reauthViaPopup":case"reauthViaRedirect":return m4;default:Un(this.auth,"internal-error")}}resolve(e){qs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v4=new Al(2e3,1e4);async function b4(t,e,n){if(In(t.app))return Promise.reject(Kn(t,"operation-not-supported-in-this-environment"));const s=$r(t);ZD(t,e,tg);const r=eE(s,n);return new ri(s,"signInViaPopup",e,r).executeNotNull()}class ri extends tE{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,ri.currentPopupAction&&ri.currentPopupAction.cancel(),ri.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Oe(e,this.auth,"internal-error"),e}async onExecution(){qs(this.filter.length===1,"Popup operations only handle one event");const e=ng();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Kn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Kn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ri.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Kn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,v4.get())};e()}}ri.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4="pendingRedirect",Vc=new Map;class x4 extends tE{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Vc.get(this.auth._key());if(!e){try{const s=await w4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Vc.set(this.auth._key(),e)}return this.bypassAuthState||Vc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function w4(t,e){const n=T4(e),s=k4(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function E4(t,e){Vc.set(t._key(),e)}function k4(t){return Ns(t._redirectPersistence)}function T4(t){return Lc(_4,t.config.apiKey,t.name)}async function I4(t,e,n=!1){if(In(t.app))return Promise.reject(Fs(t));const s=$r(t),r=eE(s,e),o=await new x4(s,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S4=10*60*1e3;class A4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!C4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!nE(e)){const r=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(Kn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=S4&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qy(e))}saveEventToCache(e){this.cachedEventUids.add(Qy(e)),this.lastProcessedEventTime=Date.now()}}function Qy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function nE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function C4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P4(t,e={}){return Vr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,O4=/^https?/;async function D4(t){if(t.config.emulator)return;const{authorizedDomains:e}=await P4(t);for(const n of e)try{if(M4(n))return}catch{}Un(t,"unauthorized-domain")}function M4(t){const e=Of(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!O4.test(n))return!1;if(R4.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4=new Al(3e4,6e4);function Xy(){const t=ds().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function L4(t){return new Promise((e,n)=>{var s,r,i;function o(){Xy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Xy(),n(Kn(t,"network-request-failed"))},timeout:N4.get()})}if(!((r=(s=ds().gapi)===null||s===void 0?void 0:s.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((i=ds().gapi)===null||i===void 0)&&i.load)o();else{const a=AM("iframefcb");return ds()[a]=()=>{gapi.load?o():n(Kn(t,"network-request-failed"))},B1(`${SM()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw $c=null,e})}let $c=null;function V4(t){return $c=$c||L4(t),$c}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4=new Al(5e3,15e3),F4="__/auth/iframe",U4="emulator/auth/iframe",B4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},j4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function z4(t){const e=t.config;Oe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Qp(e,U4):`https://${t.config.authDomain}/${F4}`,s={apiKey:e.apiKey,appName:t.name,v:Po},r=j4.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${Sl(s).slice(1)}`}async function H4(t){const e=await V4(t),n=ds().gapi;return Oe(n,t,"internal-error"),e.open({where:document.body,url:z4(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:B4,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=Kn(t,"network-request-failed"),a=ds().setTimeout(()=>{i(o)},$4.get());function l(){ds().clearTimeout(a),r(s)}s.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},W4=500,K4=600,G4="_blank",Y4="http://localhost";class Jy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Q4(t,e,n,s=W4,r=K4){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const l=Object.assign(Object.assign({},q4),{width:s.toString(),height:r.toString(),top:i,left:o}),c=hn().toLowerCase();n&&(a=M1(c)?G4:n),O1(c)&&(e=e||Y4,l.scrollbars="yes");const u=Object.entries(l).reduce((f,[g,v])=>`${f}${g}=${v},`,"");if(vM(c)&&a!=="_self")return X4(e||"",a),new Jy(null);const h=window.open(e||"",a,u);Oe(h,t,"popup-blocked");try{h.focus()}catch{}return new Jy(h)}function X4(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4="__/auth/handler",Z4="emulator/auth/handler",eN=encodeURIComponent("fac");async function Zy(t,e,n,s,r,i){Oe(t.config.authDomain,t,"auth-domain-config-required"),Oe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:Po,eventId:r};if(e instanceof tg){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",dR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries({}))o[u]=h}if(e instanceof Pl){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${eN}=${encodeURIComponent(l)}`:"";return`${tN(t)}?${Sl(a).slice(1)}${c}`}function tN({config:t}){return t.emulator?Qp(t,Z4):`https://${t.authDomain}/${J4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vh="webStorageSupport";class nN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Y1,this._completeRedirectFn=I4,this._overrideRedirectResult=E4}async _openPopup(e,n,s,r){var i;qs((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Zy(e,n,s,Of(),r);return Q4(e,o,ng())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await Zy(e,n,s,Of(),r);return i4(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(qs(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await H4(e),s=new A4(e);return n.register("authEvent",r=>(Oe(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Vh,{type:Vh},r=>{var i;const o=(i=r==null?void 0:r[0])===null||i===void 0?void 0:i[Vh];o!==void 0&&n(!!o),Un(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=D4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return F1()||D1()||Jp()}}const sN=nN;var ev="@firebase/auth",tv="1.10.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function oN(t){gs(new Xn("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;Oe(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:U1(t)},c=new kM(s,r,i,l);return MM(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),gs(new Xn("auth-internal",e=>{const n=$r(e.getProvider("auth").getImmediate());return(s=>new rN(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),$n(ev,tv,iN(t)),$n(ev,tv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=5*60,lN=qw("authIdTokenMaxAge")||aN;let nv=null;const cN=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>lN)return;const r=n==null?void 0:n.token;nv!==r&&(nv=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function rg(t=Fp()){const e=Co(t,"auth");if(e.isInitialized())return e.getImmediate();const n=DM(t,{popupRedirectResolver:sN,persistence:[p4,n4,Y1]}),s=qw("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=cN(i.toString());JM(n,o,()=>o(n.currentUser)),XM(n,a=>o(a))}}const r=zw("auth");return r&&NM(n,`http://${r}`),n}function uN(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}TM({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=Kn("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",uN().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});oN("Browser");var sv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wr,sE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,_){function w(){}w.prototype=_.prototype,E.D=_.prototype,E.prototype=new w,E.prototype.constructor=E,E.C=function(A,k,S){for(var R=Array(arguments.length-2),me=2;me<arguments.length;me++)R[me-2]=arguments[me];return _.prototype[k].apply(A,R)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(E,_,w){w||(w=0);var A=Array(16);if(typeof _=="string")for(var k=0;16>k;++k)A[k]=_.charCodeAt(w++)|_.charCodeAt(w++)<<8|_.charCodeAt(w++)<<16|_.charCodeAt(w++)<<24;else for(k=0;16>k;++k)A[k]=_[w++]|_[w++]<<8|_[w++]<<16|_[w++]<<24;_=E.g[0],w=E.g[1],k=E.g[2];var S=E.g[3],R=_+(S^w&(k^S))+A[0]+3614090360&4294967295;_=w+(R<<7&4294967295|R>>>25),R=S+(k^_&(w^k))+A[1]+3905402710&4294967295,S=_+(R<<12&4294967295|R>>>20),R=k+(w^S&(_^w))+A[2]+606105819&4294967295,k=S+(R<<17&4294967295|R>>>15),R=w+(_^k&(S^_))+A[3]+3250441966&4294967295,w=k+(R<<22&4294967295|R>>>10),R=_+(S^w&(k^S))+A[4]+4118548399&4294967295,_=w+(R<<7&4294967295|R>>>25),R=S+(k^_&(w^k))+A[5]+1200080426&4294967295,S=_+(R<<12&4294967295|R>>>20),R=k+(w^S&(_^w))+A[6]+2821735955&4294967295,k=S+(R<<17&4294967295|R>>>15),R=w+(_^k&(S^_))+A[7]+4249261313&4294967295,w=k+(R<<22&4294967295|R>>>10),R=_+(S^w&(k^S))+A[8]+1770035416&4294967295,_=w+(R<<7&4294967295|R>>>25),R=S+(k^_&(w^k))+A[9]+2336552879&4294967295,S=_+(R<<12&4294967295|R>>>20),R=k+(w^S&(_^w))+A[10]+4294925233&4294967295,k=S+(R<<17&4294967295|R>>>15),R=w+(_^k&(S^_))+A[11]+2304563134&4294967295,w=k+(R<<22&4294967295|R>>>10),R=_+(S^w&(k^S))+A[12]+1804603682&4294967295,_=w+(R<<7&4294967295|R>>>25),R=S+(k^_&(w^k))+A[13]+4254626195&4294967295,S=_+(R<<12&4294967295|R>>>20),R=k+(w^S&(_^w))+A[14]+2792965006&4294967295,k=S+(R<<17&4294967295|R>>>15),R=w+(_^k&(S^_))+A[15]+1236535329&4294967295,w=k+(R<<22&4294967295|R>>>10),R=_+(k^S&(w^k))+A[1]+4129170786&4294967295,_=w+(R<<5&4294967295|R>>>27),R=S+(w^k&(_^w))+A[6]+3225465664&4294967295,S=_+(R<<9&4294967295|R>>>23),R=k+(_^w&(S^_))+A[11]+643717713&4294967295,k=S+(R<<14&4294967295|R>>>18),R=w+(S^_&(k^S))+A[0]+3921069994&4294967295,w=k+(R<<20&4294967295|R>>>12),R=_+(k^S&(w^k))+A[5]+3593408605&4294967295,_=w+(R<<5&4294967295|R>>>27),R=S+(w^k&(_^w))+A[10]+38016083&4294967295,S=_+(R<<9&4294967295|R>>>23),R=k+(_^w&(S^_))+A[15]+3634488961&4294967295,k=S+(R<<14&4294967295|R>>>18),R=w+(S^_&(k^S))+A[4]+3889429448&4294967295,w=k+(R<<20&4294967295|R>>>12),R=_+(k^S&(w^k))+A[9]+568446438&4294967295,_=w+(R<<5&4294967295|R>>>27),R=S+(w^k&(_^w))+A[14]+3275163606&4294967295,S=_+(R<<9&4294967295|R>>>23),R=k+(_^w&(S^_))+A[3]+4107603335&4294967295,k=S+(R<<14&4294967295|R>>>18),R=w+(S^_&(k^S))+A[8]+1163531501&4294967295,w=k+(R<<20&4294967295|R>>>12),R=_+(k^S&(w^k))+A[13]+2850285829&4294967295,_=w+(R<<5&4294967295|R>>>27),R=S+(w^k&(_^w))+A[2]+4243563512&4294967295,S=_+(R<<9&4294967295|R>>>23),R=k+(_^w&(S^_))+A[7]+1735328473&4294967295,k=S+(R<<14&4294967295|R>>>18),R=w+(S^_&(k^S))+A[12]+2368359562&4294967295,w=k+(R<<20&4294967295|R>>>12),R=_+(w^k^S)+A[5]+4294588738&4294967295,_=w+(R<<4&4294967295|R>>>28),R=S+(_^w^k)+A[8]+2272392833&4294967295,S=_+(R<<11&4294967295|R>>>21),R=k+(S^_^w)+A[11]+1839030562&4294967295,k=S+(R<<16&4294967295|R>>>16),R=w+(k^S^_)+A[14]+4259657740&4294967295,w=k+(R<<23&4294967295|R>>>9),R=_+(w^k^S)+A[1]+2763975236&4294967295,_=w+(R<<4&4294967295|R>>>28),R=S+(_^w^k)+A[4]+1272893353&4294967295,S=_+(R<<11&4294967295|R>>>21),R=k+(S^_^w)+A[7]+4139469664&4294967295,k=S+(R<<16&4294967295|R>>>16),R=w+(k^S^_)+A[10]+3200236656&4294967295,w=k+(R<<23&4294967295|R>>>9),R=_+(w^k^S)+A[13]+681279174&4294967295,_=w+(R<<4&4294967295|R>>>28),R=S+(_^w^k)+A[0]+3936430074&4294967295,S=_+(R<<11&4294967295|R>>>21),R=k+(S^_^w)+A[3]+3572445317&4294967295,k=S+(R<<16&4294967295|R>>>16),R=w+(k^S^_)+A[6]+76029189&4294967295,w=k+(R<<23&4294967295|R>>>9),R=_+(w^k^S)+A[9]+3654602809&4294967295,_=w+(R<<4&4294967295|R>>>28),R=S+(_^w^k)+A[12]+3873151461&4294967295,S=_+(R<<11&4294967295|R>>>21),R=k+(S^_^w)+A[15]+530742520&4294967295,k=S+(R<<16&4294967295|R>>>16),R=w+(k^S^_)+A[2]+3299628645&4294967295,w=k+(R<<23&4294967295|R>>>9),R=_+(k^(w|~S))+A[0]+4096336452&4294967295,_=w+(R<<6&4294967295|R>>>26),R=S+(w^(_|~k))+A[7]+1126891415&4294967295,S=_+(R<<10&4294967295|R>>>22),R=k+(_^(S|~w))+A[14]+2878612391&4294967295,k=S+(R<<15&4294967295|R>>>17),R=w+(S^(k|~_))+A[5]+4237533241&4294967295,w=k+(R<<21&4294967295|R>>>11),R=_+(k^(w|~S))+A[12]+1700485571&4294967295,_=w+(R<<6&4294967295|R>>>26),R=S+(w^(_|~k))+A[3]+2399980690&4294967295,S=_+(R<<10&4294967295|R>>>22),R=k+(_^(S|~w))+A[10]+4293915773&4294967295,k=S+(R<<15&4294967295|R>>>17),R=w+(S^(k|~_))+A[1]+2240044497&4294967295,w=k+(R<<21&4294967295|R>>>11),R=_+(k^(w|~S))+A[8]+1873313359&4294967295,_=w+(R<<6&4294967295|R>>>26),R=S+(w^(_|~k))+A[15]+4264355552&4294967295,S=_+(R<<10&4294967295|R>>>22),R=k+(_^(S|~w))+A[6]+2734768916&4294967295,k=S+(R<<15&4294967295|R>>>17),R=w+(S^(k|~_))+A[13]+1309151649&4294967295,w=k+(R<<21&4294967295|R>>>11),R=_+(k^(w|~S))+A[4]+4149444226&4294967295,_=w+(R<<6&4294967295|R>>>26),R=S+(w^(_|~k))+A[11]+3174756917&4294967295,S=_+(R<<10&4294967295|R>>>22),R=k+(_^(S|~w))+A[2]+718787259&4294967295,k=S+(R<<15&4294967295|R>>>17),R=w+(S^(k|~_))+A[9]+3951481745&4294967295,E.g[0]=E.g[0]+_&4294967295,E.g[1]=E.g[1]+(k+(R<<21&4294967295|R>>>11))&4294967295,E.g[2]=E.g[2]+k&4294967295,E.g[3]=E.g[3]+S&4294967295}s.prototype.u=function(E,_){_===void 0&&(_=E.length);for(var w=_-this.blockSize,A=this.B,k=this.h,S=0;S<_;){if(k==0)for(;S<=w;)r(this,E,S),S+=this.blockSize;if(typeof E=="string"){for(;S<_;)if(A[k++]=E.charCodeAt(S++),k==this.blockSize){r(this,A),k=0;break}}else for(;S<_;)if(A[k++]=E[S++],k==this.blockSize){r(this,A),k=0;break}}this.h=k,this.o+=_},s.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var _=1;_<E.length-8;++_)E[_]=0;var w=8*this.o;for(_=E.length-8;_<E.length;++_)E[_]=w&255,w/=256;for(this.u(E),E=Array(16),_=w=0;4>_;++_)for(var A=0;32>A;A+=8)E[w++]=this.g[_]>>>A&255;return E};function i(E,_){var w=a;return Object.prototype.hasOwnProperty.call(w,E)?w[E]:w[E]=_(E)}function o(E,_){this.h=_;for(var w=[],A=!0,k=E.length-1;0<=k;k--){var S=E[k]|0;A&&S==_||(w[k]=S,A=!1)}this.g=w}var a={};function l(E){return-128<=E&&128>E?i(E,function(_){return new o([_|0],0>_?-1:0)}):new o([E|0],0>E?-1:0)}function c(E){if(isNaN(E)||!isFinite(E))return h;if(0>E)return b(c(-E));for(var _=[],w=1,A=0;E>=w;A++)_[A]=E/w|0,w*=4294967296;return new o(_,0)}function u(E,_){if(E.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(E.charAt(0)=="-")return b(u(E.substring(1),_));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=c(Math.pow(_,8)),A=h,k=0;k<E.length;k+=8){var S=Math.min(8,E.length-k),R=parseInt(E.substring(k,k+S),_);8>S?(S=c(Math.pow(_,S)),A=A.j(S).add(c(R))):(A=A.j(w),A=A.add(c(R)))}return A}var h=l(0),f=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(m(this))return-b(this).m();for(var E=0,_=1,w=0;w<this.g.length;w++){var A=this.i(w);E+=(0<=A?A:4294967296+A)*_,_*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(v(this))return"0";if(m(this))return"-"+b(this).toString(E);for(var _=c(Math.pow(E,6)),w=this,A="";;){var k=L(w,_).g;w=I(w,k.j(_));var S=((0<w.g.length?w.g[0]:w.h)>>>0).toString(E);if(w=k,v(w))return S+A;for(;6>S.length;)S="0"+S;A=S+A}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function v(E){if(E.h!=0)return!1;for(var _=0;_<E.g.length;_++)if(E.g[_]!=0)return!1;return!0}function m(E){return E.h==-1}t.l=function(E){return E=I(this,E),m(E)?-1:v(E)?0:1};function b(E){for(var _=E.g.length,w=[],A=0;A<_;A++)w[A]=~E.g[A];return new o(w,~E.h).add(f)}t.abs=function(){return m(this)?b(this):this},t.add=function(E){for(var _=Math.max(this.g.length,E.g.length),w=[],A=0,k=0;k<=_;k++){var S=A+(this.i(k)&65535)+(E.i(k)&65535),R=(S>>>16)+(this.i(k)>>>16)+(E.i(k)>>>16);A=R>>>16,S&=65535,R&=65535,w[k]=R<<16|S}return new o(w,w[w.length-1]&-2147483648?-1:0)};function I(E,_){return E.add(b(_))}t.j=function(E){if(v(this)||v(E))return h;if(m(this))return m(E)?b(this).j(b(E)):b(b(this).j(E));if(m(E))return b(this.j(b(E)));if(0>this.l(g)&&0>E.l(g))return c(this.m()*E.m());for(var _=this.g.length+E.g.length,w=[],A=0;A<2*_;A++)w[A]=0;for(A=0;A<this.g.length;A++)for(var k=0;k<E.g.length;k++){var S=this.i(A)>>>16,R=this.i(A)&65535,me=E.i(k)>>>16,Te=E.i(k)&65535;w[2*A+2*k]+=R*Te,T(w,2*A+2*k),w[2*A+2*k+1]+=S*Te,T(w,2*A+2*k+1),w[2*A+2*k+1]+=R*me,T(w,2*A+2*k+1),w[2*A+2*k+2]+=S*me,T(w,2*A+2*k+2)}for(A=0;A<_;A++)w[A]=w[2*A+1]<<16|w[2*A];for(A=_;A<2*_;A++)w[A]=0;return new o(w,0)};function T(E,_){for(;(E[_]&65535)!=E[_];)E[_+1]+=E[_]>>>16,E[_]&=65535,_++}function D(E,_){this.g=E,this.h=_}function L(E,_){if(v(_))throw Error("division by zero");if(v(E))return new D(h,h);if(m(E))return _=L(b(E),_),new D(b(_.g),b(_.h));if(m(_))return _=L(E,b(_)),new D(b(_.g),_.h);if(30<E.g.length){if(m(E)||m(_))throw Error("slowDivide_ only works with positive integers.");for(var w=f,A=_;0>=A.l(E);)w=M(w),A=M(A);var k=$(w,1),S=$(A,1);for(A=$(A,2),w=$(w,2);!v(A);){var R=S.add(A);0>=R.l(E)&&(k=k.add(w),S=R),A=$(A,1),w=$(w,1)}return _=I(E,k.j(_)),new D(k,_)}for(k=h;0<=E.l(_);){for(w=Math.max(1,Math.floor(E.m()/_.m())),A=Math.ceil(Math.log(w)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),S=c(w),R=S.j(_);m(R)||0<R.l(E);)w-=A,S=c(w),R=S.j(_);v(S)&&(S=f),k=k.add(S),E=I(E,R)}return new D(k,E)}t.A=function(E){return L(this,E).h},t.and=function(E){for(var _=Math.max(this.g.length,E.g.length),w=[],A=0;A<_;A++)w[A]=this.i(A)&E.i(A);return new o(w,this.h&E.h)},t.or=function(E){for(var _=Math.max(this.g.length,E.g.length),w=[],A=0;A<_;A++)w[A]=this.i(A)|E.i(A);return new o(w,this.h|E.h)},t.xor=function(E){for(var _=Math.max(this.g.length,E.g.length),w=[],A=0;A<_;A++)w[A]=this.i(A)^E.i(A);return new o(w,this.h^E.h)};function M(E){for(var _=E.g.length+1,w=[],A=0;A<_;A++)w[A]=E.i(A)<<1|E.i(A-1)>>>31;return new o(w,E.h)}function $(E,_){var w=_>>5;_%=32;for(var A=E.g.length-w,k=[],S=0;S<A;S++)k[S]=0<_?E.i(S+w)>>>_|E.i(S+w+1)<<32-_:E.i(S+w);return new o(k,E.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,sE=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,wr=o}).apply(typeof sv<"u"?sv:typeof self<"u"?self:typeof window<"u"?window:{});var rc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rE,ua,iE,Fc,Nf,oE,aE,lE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,y,x){return d==Array.prototype||d==Object.prototype||(d[y]=x.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof rc=="object"&&rc];for(var y=0;y<d.length;++y){var x=d[y];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var s=n(this);function r(d,y){if(y)e:{var x=s;d=d.split(".");for(var P=0;P<d.length-1;P++){var j=d[P];if(!(j in x))break e;x=x[j]}d=d[d.length-1],P=x[d],y=y(P),y!=P&&y!=null&&e(x,d,{configurable:!0,writable:!0,value:y})}}function i(d,y){d instanceof String&&(d+="");var x=0,P=!1,j={next:function(){if(!P&&x<d.length){var W=x++;return{value:y(W,d[W]),done:!1}}return P=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}r("Array.prototype.values",function(d){return d||function(){return i(this,function(y,x){return x})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(d){var y=typeof d;return y=y!="object"?y:d?Array.isArray(d)?"array":y:"null",y=="array"||y=="object"&&typeof d.length=="number"}function c(d){var y=typeof d;return y=="object"&&d!=null||y=="function"}function u(d,y,x){return d.call.apply(d.bind,arguments)}function h(d,y,x){if(!d)throw Error();if(2<arguments.length){var P=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,P),d.apply(y,j)}}return function(){return d.apply(y,arguments)}}function f(d,y,x){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:h,f.apply(null,arguments)}function g(d,y){var x=Array.prototype.slice.call(arguments,1);return function(){var P=x.slice();return P.push.apply(P,arguments),d.apply(this,P)}}function v(d,y){function x(){}x.prototype=y.prototype,d.aa=y.prototype,d.prototype=new x,d.prototype.constructor=d,d.Qb=function(P,j,W){for(var he=Array(arguments.length-2),at=2;at<arguments.length;at++)he[at-2]=arguments[at];return y.prototype[j].apply(P,he)}}function m(d){const y=d.length;if(0<y){const x=Array(y);for(let P=0;P<y;P++)x[P]=d[P];return x}return[]}function b(d,y){for(let x=1;x<arguments.length;x++){const P=arguments[x];if(l(P)){const j=d.length||0,W=P.length||0;d.length=j+W;for(let he=0;he<W;he++)d[j+he]=P[he]}else d.push(P)}}class I{constructor(y,x){this.i=y,this.j=x,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function T(d){return/^[\s\xa0]*$/.test(d)}function D(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function L(d){return L[" "](d),d}L[" "]=function(){};var M=D().indexOf("Gecko")!=-1&&!(D().toLowerCase().indexOf("webkit")!=-1&&D().indexOf("Edge")==-1)&&!(D().indexOf("Trident")!=-1||D().indexOf("MSIE")!=-1)&&D().indexOf("Edge")==-1;function $(d,y,x){for(const P in d)y.call(x,d[P],P,d)}function E(d,y){for(const x in d)y.call(void 0,d[x],x,d)}function _(d){const y={};for(const x in d)y[x]=d[x];return y}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(d,y){let x,P;for(let j=1;j<arguments.length;j++){P=arguments[j];for(x in P)d[x]=P[x];for(let W=0;W<w.length;W++)x=w[W],Object.prototype.hasOwnProperty.call(P,x)&&(d[x]=P[x])}}function k(d){var y=1;d=d.split(":");const x=[];for(;0<y&&d.length;)x.push(d.shift()),y--;return d.length&&x.push(d.join(":")),x}function S(d){a.setTimeout(()=>{throw d},0)}function R(){var d=Re;let y=null;return d.g&&(y=d.g,d.g=d.g.next,d.g||(d.h=null),y.next=null),y}class me{constructor(){this.h=this.g=null}add(y,x){const P=Te.get();P.set(y,x),this.h?this.h.next=P:this.g=P,this.h=P}}var Te=new I(()=>new se,d=>d.reset());class se{constructor(){this.next=this.g=this.h=null}set(y,x){this.h=y,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let F,K=!1,Re=new me,mt=()=>{const d=a.Promise.resolve(void 0);F=()=>{d.then(gt)}};var gt=()=>{for(var d;d=R();){try{d.h.call(d.g)}catch(x){S(x)}var y=Te;y.j(d),100>y.h&&(y.h++,d.next=y.g,y.g=d)}K=!1};function Ve(){this.s=this.s,this.C=this.C}Ve.prototype.s=!1,Ve.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ve.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ie(d,y){this.type=d,this.g=this.target=y,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var ue=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,y=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const x=()=>{};a.addEventListener("test",x,y),a.removeEventListener("test",x,y)}catch{}return d}();function _e(d,y){if(ie.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var x=this.type=d.type,P=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=y,y=d.relatedTarget){if(M){e:{try{L(y.nodeName);var j=!0;break e}catch{}j=!1}j||(y=null)}}else x=="mouseover"?y=d.fromElement:x=="mouseout"&&(y=d.toElement);this.relatedTarget=y,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:je[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&_e.aa.h.call(this)}}v(_e,ie);var je={2:"touch",3:"pen",4:"mouse"};_e.prototype.h=function(){_e.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var H="closure_listenable_"+(1e6*Math.random()|0),ee=0;function oe(d,y,x,P,j){this.listener=d,this.proxy=null,this.src=y,this.type=x,this.capture=!!P,this.ha=j,this.key=++ee,this.da=this.fa=!1}function ge(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Ye(d){this.src=d,this.g={},this.h=0}Ye.prototype.add=function(d,y,x,P,j){var W=d.toString();d=this.g[W],d||(d=this.g[W]=[],this.h++);var he=V(d,y,P,j);return-1<he?(y=d[he],x||(y.fa=!1)):(y=new oe(y,this.src,W,!!P,j),y.fa=x,d.push(y)),y};function N(d,y){var x=y.type;if(x in d.g){var P=d.g[x],j=Array.prototype.indexOf.call(P,y,void 0),W;(W=0<=j)&&Array.prototype.splice.call(P,j,1),W&&(ge(y),d.g[x].length==0&&(delete d.g[x],d.h--))}}function V(d,y,x,P){for(var j=0;j<d.length;++j){var W=d[j];if(!W.da&&W.listener==y&&W.capture==!!x&&W.ha==P)return j}return-1}var B="closure_lm_"+(1e6*Math.random()|0),G={};function J(d,y,x,P,j){if(Array.isArray(y)){for(var W=0;W<y.length;W++)J(d,y[W],x,P,j);return null}return x=Me(x),d&&d[H]?d.K(y,x,c(P)?!!P.capture:!1,j):Y(d,y,x,!1,P,j)}function Y(d,y,x,P,j,W){if(!y)throw Error("Invalid event type");var he=c(j)?!!j.capture:!!j,at=fe(d);if(at||(d[B]=at=new Ye(d)),x=at.add(y,x,P,he,W),x.proxy)return x;if(P=pe(),x.proxy=P,P.src=d,P.listener=x,d.addEventListener)ue||(j=he),j===void 0&&(j=!1),d.addEventListener(y.toString(),P,j);else if(d.attachEvent)d.attachEvent(re(y.toString()),P);else if(d.addListener&&d.removeListener)d.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return x}function pe(){function d(x){return y.call(d.src,d.listener,x)}const y=Ae;return d}function de(d,y,x,P,j){if(Array.isArray(y))for(var W=0;W<y.length;W++)de(d,y[W],x,P,j);else P=c(P)?!!P.capture:!!P,x=Me(x),d&&d[H]?(d=d.i,y=String(y).toString(),y in d.g&&(W=d.g[y],x=V(W,x,P,j),-1<x&&(ge(W[x]),Array.prototype.splice.call(W,x,1),W.length==0&&(delete d.g[y],d.h--)))):d&&(d=fe(d))&&(y=d.g[y.toString()],d=-1,y&&(d=V(y,x,P,j)),(x=-1<d?y[d]:null)&&ce(x))}function ce(d){if(typeof d!="number"&&d&&!d.da){var y=d.src;if(y&&y[H])N(y.i,d);else{var x=d.type,P=d.proxy;y.removeEventListener?y.removeEventListener(x,P,d.capture):y.detachEvent?y.detachEvent(re(x),P):y.addListener&&y.removeListener&&y.removeListener(P),(x=fe(y))?(N(x,d),x.h==0&&(x.src=null,y[B]=null)):ge(d)}}}function re(d){return d in G?G[d]:G[d]="on"+d}function Ae(d,y){if(d.da)d=!0;else{y=new _e(y,this);var x=d.listener,P=d.ha||d.src;d.fa&&ce(d),d=x.call(P,y)}return d}function fe(d){return d=d[B],d instanceof Ye?d:null}var ke="__closure_events_fn_"+(1e9*Math.random()>>>0);function Me(d){return typeof d=="function"?d:(d[ke]||(d[ke]=function(y){return d.handleEvent(y)}),d[ke])}function Pe(){Ve.call(this),this.i=new Ye(this),this.M=this,this.F=null}v(Pe,Ve),Pe.prototype[H]=!0,Pe.prototype.removeEventListener=function(d,y,x,P){de(this,d,y,x,P)};function Ue(d,y){var x,P=d.F;if(P)for(x=[];P;P=P.F)x.push(P);if(d=d.M,P=y.type||y,typeof y=="string")y=new ie(y,d);else if(y instanceof ie)y.target=y.target||d;else{var j=y;y=new ie(P,d),A(y,j)}if(j=!0,x)for(var W=x.length-1;0<=W;W--){var he=y.g=x[W];j=Qe(he,P,!0,y)&&j}if(he=y.g=d,j=Qe(he,P,!0,y)&&j,j=Qe(he,P,!1,y)&&j,x)for(W=0;W<x.length;W++)he=y.g=x[W],j=Qe(he,P,!1,y)&&j}Pe.prototype.N=function(){if(Pe.aa.N.call(this),this.i){var d=this.i,y;for(y in d.g){for(var x=d.g[y],P=0;P<x.length;P++)ge(x[P]);delete d.g[y],d.h--}}this.F=null},Pe.prototype.K=function(d,y,x,P){return this.i.add(String(d),y,!1,x,P)},Pe.prototype.L=function(d,y,x,P){return this.i.add(String(d),y,!0,x,P)};function Qe(d,y,x,P){if(y=d.i.g[String(y)],!y)return!0;y=y.concat();for(var j=!0,W=0;W<y.length;++W){var he=y[W];if(he&&!he.da&&he.capture==x){var at=he.listener,zt=he.ha||he.src;he.fa&&N(d.i,he),j=at.call(zt,P)!==!1&&j}}return j&&!P.defaultPrevented}function Qt(d,y,x){if(typeof d=="function")x&&(d=f(d,x));else if(d&&typeof d.handleEvent=="function")d=f(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:a.setTimeout(d,y||0)}function Bt(d){d.g=Qt(()=>{d.g=null,d.i&&(d.i=!1,Bt(d))},d.l);const y=d.h;d.h=null,d.m.apply(null,y)}class Rn extends Ve{constructor(y,x){super(),this.m=y,this.l=x,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Bt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xt(d){Ve.call(this),this.h=d,this.g={}}v(Xt,Ve);var Xs=[];function $o(d){$(d.g,function(y,x){this.g.hasOwnProperty(x)&&ce(y)},d),d.g={}}Xt.prototype.N=function(){Xt.aa.N.call(this),$o(this)},Xt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var jt=a.JSON.stringify,On=a.JSON.parse,Vl=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function Hd(){}Hd.prototype.h=null;function cm(d){return d.h||(d.h=d.i())}function um(){}var Fo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qd(){ie.call(this,"d")}v(qd,ie);function Wd(){ie.call(this,"c")}v(Wd,ie);var Ur={},dm=null;function $l(){return dm=dm||new Pe}Ur.La="serverreachability";function hm(d){ie.call(this,Ur.La,d)}v(hm,ie);function Uo(d){const y=$l();Ue(y,new hm(y))}Ur.STAT_EVENT="statevent";function fm(d,y){ie.call(this,Ur.STAT_EVENT,d),this.stat=y}v(fm,ie);function fn(d){const y=$l();Ue(y,new fm(y,d))}Ur.Ma="timingevent";function pm(d,y){ie.call(this,Ur.Ma,d),this.size=y}v(pm,ie);function Bo(d,y){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},y)}function jo(){this.g=!0}jo.prototype.xa=function(){this.g=!1};function FT(d,y,x,P,j,W){d.info(function(){if(d.g)if(W)for(var he="",at=W.split("&"),zt=0;zt<at.length;zt++){var tt=at[zt].split("=");if(1<tt.length){var Jt=tt[0];tt=tt[1];var Zt=Jt.split("_");he=2<=Zt.length&&Zt[1]=="type"?he+(Jt+"="+tt+"&"):he+(Jt+"=redacted&")}}else he=null;else he=W;return"XMLHTTP REQ ("+P+") [attempt "+j+"]: "+y+`
`+x+`
`+he})}function UT(d,y,x,P,j,W,he){d.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+j+"]: "+y+`
`+x+`
`+W+" "+he})}function Vi(d,y,x,P){d.info(function(){return"XMLHTTP TEXT ("+y+"): "+jT(d,x)+(P?" "+P:"")})}function BT(d,y){d.info(function(){return"TIMEOUT: "+y})}jo.prototype.info=function(){};function jT(d,y){if(!d.g)return y;if(!y)return null;try{var x=JSON.parse(y);if(x){for(d=0;d<x.length;d++)if(Array.isArray(x[d])){var P=x[d];if(!(2>P.length)){var j=P[1];if(Array.isArray(j)&&!(1>j.length)){var W=j[0];if(W!="noop"&&W!="stop"&&W!="close")for(var he=1;he<j.length;he++)j[he]=""}}}}return jt(x)}catch{return y}}var Fl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},gm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Kd;function Ul(){}v(Ul,Hd),Ul.prototype.g=function(){return new XMLHttpRequest},Ul.prototype.i=function(){return{}},Kd=new Ul;function Js(d,y,x,P){this.j=d,this.i=y,this.l=x,this.R=P||1,this.U=new Xt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new mm}function mm(){this.i=null,this.g="",this.h=!1}var ym={},Gd={};function Yd(d,y,x){d.L=1,d.v=Hl(vs(y)),d.m=x,d.P=!0,vm(d,null)}function vm(d,y){d.F=Date.now(),Bl(d),d.A=vs(d.v);var x=d.A,P=d.R;Array.isArray(P)||(P=[String(P)]),Om(x.i,"t",P),d.C=0,x=d.j.J,d.h=new mm,d.g=Qm(d.j,x?y:null,!d.m),0<d.O&&(d.M=new Rn(f(d.Y,d,d.g),d.O)),y=d.U,x=d.g,P=d.ca;var j="readystatechange";Array.isArray(j)||(j&&(Xs[0]=j.toString()),j=Xs);for(var W=0;W<j.length;W++){var he=J(x,j[W],P||y.handleEvent,!1,y.h||y);if(!he)break;y.g[he.key]=he}y=d.H?_(d.H):{},d.m?(d.u||(d.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,y)):(d.u="GET",d.g.ea(d.A,d.u,null,y)),Uo(),FT(d.i,d.u,d.A,d.l,d.R,d.m)}Js.prototype.ca=function(d){d=d.target;const y=this.M;y&&bs(d)==3?y.j():this.Y(d)},Js.prototype.Y=function(d){try{if(d==this.g)e:{const Zt=bs(this.g);var y=this.g.Ba();const Ui=this.g.Z();if(!(3>Zt)&&(Zt!=3||this.g&&(this.h.h||this.g.oa()||Fm(this.g)))){this.J||Zt!=4||y==7||(y==8||0>=Ui?Uo(3):Uo(2)),Qd(this);var x=this.g.Z();this.X=x;t:if(bm(this)){var P=Fm(this.g);d="";var j=P.length,W=bs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Br(this),zo(this);var he="";break t}this.h.i=new a.TextDecoder}for(y=0;y<j;y++)this.h.h=!0,d+=this.h.i.decode(P[y],{stream:!(W&&y==j-1)});P.length=0,this.h.g+=d,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=x==200,UT(this.i,this.u,this.A,this.l,this.R,Zt,x),this.o){if(this.T&&!this.K){t:{if(this.g){var at,zt=this.g;if((at=zt.g?zt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(at)){var tt=at;break t}}tt=null}if(x=tt)Vi(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xd(this,x);else{this.o=!1,this.s=3,fn(12),Br(this),zo(this);break e}}if(this.P){x=!0;let zn;for(;!this.J&&this.C<he.length;)if(zn=zT(this,he),zn==Gd){Zt==4&&(this.s=4,fn(14),x=!1),Vi(this.i,this.l,null,"[Incomplete Response]");break}else if(zn==ym){this.s=4,fn(15),Vi(this.i,this.l,he,"[Invalid Chunk]"),x=!1;break}else Vi(this.i,this.l,zn,null),Xd(this,zn);if(bm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Zt!=4||he.length!=0||this.h.h||(this.s=1,fn(16),x=!1),this.o=this.o&&x,!x)Vi(this.i,this.l,he,"[Invalid Chunked Response]"),Br(this),zo(this);else if(0<he.length&&!this.W){this.W=!0;var Jt=this.j;Jt.g==this&&Jt.ba&&!Jt.M&&(Jt.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),sh(Jt),Jt.M=!0,fn(11))}}else Vi(this.i,this.l,he,null),Xd(this,he);Zt==4&&Br(this),this.o&&!this.J&&(Zt==4?Wm(this.j,this):(this.o=!1,Bl(this)))}else oI(this.g),x==400&&0<he.indexOf("Unknown SID")?(this.s=3,fn(12)):(this.s=0,fn(13)),Br(this),zo(this)}}}catch{}finally{}};function bm(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function zT(d,y){var x=d.C,P=y.indexOf(`
`,x);return P==-1?Gd:(x=Number(y.substring(x,P)),isNaN(x)?ym:(P+=1,P+x>y.length?Gd:(y=y.slice(P,P+x),d.C=P+x,y)))}Js.prototype.cancel=function(){this.J=!0,Br(this)};function Bl(d){d.S=Date.now()+d.I,_m(d,d.I)}function _m(d,y){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Bo(f(d.ba,d),y)}function Qd(d){d.B&&(a.clearTimeout(d.B),d.B=null)}Js.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(BT(this.i,this.A),this.L!=2&&(Uo(),fn(17)),Br(this),this.s=2,zo(this)):_m(this,this.S-d)};function zo(d){d.j.G==0||d.J||Wm(d.j,d)}function Br(d){Qd(d);var y=d.M;y&&typeof y.ma=="function"&&y.ma(),d.M=null,$o(d.U),d.g&&(y=d.g,d.g=null,y.abort(),y.ma())}function Xd(d,y){try{var x=d.j;if(x.G!=0&&(x.g==d||Jd(x.h,d))){if(!d.K&&Jd(x.h,d)&&x.G==3){try{var P=x.Da.g.parse(y)}catch{P=null}if(Array.isArray(P)&&P.length==3){var j=P;if(j[0]==0){e:if(!x.u){if(x.g)if(x.g.F+3e3<d.F)Ql(x),Gl(x);else break e;nh(x),fn(18)}}else x.za=j[1],0<x.za-x.T&&37500>j[2]&&x.F&&x.v==0&&!x.C&&(x.C=Bo(f(x.Za,x),6e3));if(1>=Em(x.h)&&x.ca){try{x.ca()}catch{}x.ca=void 0}}else zr(x,11)}else if((d.K||x.g==d)&&Ql(x),!T(y))for(j=x.Da.g.parse(y),y=0;y<j.length;y++){let tt=j[y];if(x.T=tt[0],tt=tt[1],x.G==2)if(tt[0]=="c"){x.K=tt[1],x.ia=tt[2];const Jt=tt[3];Jt!=null&&(x.la=Jt,x.j.info("VER="+x.la));const Zt=tt[4];Zt!=null&&(x.Aa=Zt,x.j.info("SVER="+x.Aa));const Ui=tt[5];Ui!=null&&typeof Ui=="number"&&0<Ui&&(P=1.5*Ui,x.L=P,x.j.info("backChannelRequestTimeoutMs_="+P)),P=x;const zn=d.g;if(zn){const Jl=zn.g?zn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Jl){var W=P.h;W.g||Jl.indexOf("spdy")==-1&&Jl.indexOf("quic")==-1&&Jl.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(Zd(W,W.h),W.h=null))}if(P.D){const rh=zn.g?zn.g.getResponseHeader("X-HTTP-Session-Id"):null;rh&&(P.ya=rh,ht(P.I,P.D,rh))}}x.G=3,x.l&&x.l.ua(),x.ba&&(x.R=Date.now()-d.F,x.j.info("Handshake RTT: "+x.R+"ms")),P=x;var he=d;if(P.qa=Ym(P,P.J?P.ia:null,P.W),he.K){km(P.h,he);var at=he,zt=P.L;zt&&(at.I=zt),at.B&&(Qd(at),Bl(at)),P.g=he}else Hm(P);0<x.i.length&&Yl(x)}else tt[0]!="stop"&&tt[0]!="close"||zr(x,7);else x.G==3&&(tt[0]=="stop"||tt[0]=="close"?tt[0]=="stop"?zr(x,7):th(x):tt[0]!="noop"&&x.l&&x.l.ta(tt),x.v=0)}}Uo(4)}catch{}}var HT=class{constructor(d,y){this.g=d,this.map=y}};function xm(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function wm(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Em(d){return d.h?1:d.g?d.g.size:0}function Jd(d,y){return d.h?d.h==y:d.g?d.g.has(y):!1}function Zd(d,y){d.g?d.g.add(y):d.h=y}function km(d,y){d.h&&d.h==y?d.h=null:d.g&&d.g.has(y)&&d.g.delete(y)}xm.prototype.cancel=function(){if(this.i=Tm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Tm(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let y=d.i;for(const x of d.g.values())y=y.concat(x.D);return y}return m(d.i)}function qT(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(l(d)){for(var y=[],x=d.length,P=0;P<x;P++)y.push(d[P]);return y}y=[],x=0;for(P in d)y[x++]=d[P];return y}function WT(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(l(d)||typeof d=="string"){var y=[];d=d.length;for(var x=0;x<d;x++)y.push(x);return y}y=[],x=0;for(const P in d)y[x++]=P;return y}}}function Im(d,y){if(d.forEach&&typeof d.forEach=="function")d.forEach(y,void 0);else if(l(d)||typeof d=="string")Array.prototype.forEach.call(d,y,void 0);else for(var x=WT(d),P=qT(d),j=P.length,W=0;W<j;W++)y.call(void 0,P[W],x&&x[W],d)}var Sm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function KT(d,y){if(d){d=d.split("&");for(var x=0;x<d.length;x++){var P=d[x].indexOf("="),j=null;if(0<=P){var W=d[x].substring(0,P);j=d[x].substring(P+1)}else W=d[x];y(W,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function jr(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof jr){this.h=d.h,jl(this,d.j),this.o=d.o,this.g=d.g,zl(this,d.s),this.l=d.l;var y=d.i,x=new Wo;x.i=y.i,y.g&&(x.g=new Map(y.g),x.h=y.h),Am(this,x),this.m=d.m}else d&&(y=String(d).match(Sm))?(this.h=!1,jl(this,y[1]||"",!0),this.o=Ho(y[2]||""),this.g=Ho(y[3]||"",!0),zl(this,y[4]),this.l=Ho(y[5]||"",!0),Am(this,y[6]||"",!0),this.m=Ho(y[7]||"")):(this.h=!1,this.i=new Wo(null,this.h))}jr.prototype.toString=function(){var d=[],y=this.j;y&&d.push(qo(y,Cm,!0),":");var x=this.g;return(x||y=="file")&&(d.push("//"),(y=this.o)&&d.push(qo(y,Cm,!0),"@"),d.push(encodeURIComponent(String(x)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.s,x!=null&&d.push(":",String(x))),(x=this.l)&&(this.g&&x.charAt(0)!="/"&&d.push("/"),d.push(qo(x,x.charAt(0)=="/"?QT:YT,!0))),(x=this.i.toString())&&d.push("?",x),(x=this.m)&&d.push("#",qo(x,JT)),d.join("")};function vs(d){return new jr(d)}function jl(d,y,x){d.j=x?Ho(y,!0):y,d.j&&(d.j=d.j.replace(/:$/,""))}function zl(d,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);d.s=y}else d.s=null}function Am(d,y,x){y instanceof Wo?(d.i=y,ZT(d.i,d.h)):(x||(y=qo(y,XT)),d.i=new Wo(y,d.h))}function ht(d,y,x){d.i.set(y,x)}function Hl(d){return ht(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Ho(d,y){return d?y?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function qo(d,y,x){return typeof d=="string"?(d=encodeURI(d).replace(y,GT),x&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function GT(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Cm=/[#\/\?@]/g,YT=/[#\?:]/g,QT=/[#\?]/g,XT=/[#\?@]/g,JT=/#/g;function Wo(d,y){this.h=this.g=null,this.i=d||null,this.j=!!y}function Zs(d){d.g||(d.g=new Map,d.h=0,d.i&&KT(d.i,function(y,x){d.add(decodeURIComponent(y.replace(/\+/g," ")),x)}))}t=Wo.prototype,t.add=function(d,y){Zs(this),this.i=null,d=$i(this,d);var x=this.g.get(d);return x||this.g.set(d,x=[]),x.push(y),this.h+=1,this};function Pm(d,y){Zs(d),y=$i(d,y),d.g.has(y)&&(d.i=null,d.h-=d.g.get(y).length,d.g.delete(y))}function Rm(d,y){return Zs(d),y=$i(d,y),d.g.has(y)}t.forEach=function(d,y){Zs(this),this.g.forEach(function(x,P){x.forEach(function(j){d.call(y,j,P,this)},this)},this)},t.na=function(){Zs(this);const d=Array.from(this.g.values()),y=Array.from(this.g.keys()),x=[];for(let P=0;P<y.length;P++){const j=d[P];for(let W=0;W<j.length;W++)x.push(y[P])}return x},t.V=function(d){Zs(this);let y=[];if(typeof d=="string")Rm(this,d)&&(y=y.concat(this.g.get($i(this,d))));else{d=Array.from(this.g.values());for(let x=0;x<d.length;x++)y=y.concat(d[x])}return y},t.set=function(d,y){return Zs(this),this.i=null,d=$i(this,d),Rm(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[y]),this.h+=1,this},t.get=function(d,y){return d?(d=this.V(d),0<d.length?String(d[0]):y):y};function Om(d,y,x){Pm(d,y),0<x.length&&(d.i=null,d.g.set($i(d,y),m(x)),d.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],y=Array.from(this.g.keys());for(var x=0;x<y.length;x++){var P=y[x];const W=encodeURIComponent(String(P)),he=this.V(P);for(P=0;P<he.length;P++){var j=W;he[P]!==""&&(j+="="+encodeURIComponent(String(he[P]))),d.push(j)}}return this.i=d.join("&")};function $i(d,y){return y=String(y),d.j&&(y=y.toLowerCase()),y}function ZT(d,y){y&&!d.j&&(Zs(d),d.i=null,d.g.forEach(function(x,P){var j=P.toLowerCase();P!=j&&(Pm(this,P),Om(this,j,x))},d)),d.j=y}function eI(d,y){const x=new jo;if(a.Image){const P=new Image;P.onload=g(er,x,"TestLoadImage: loaded",!0,y,P),P.onerror=g(er,x,"TestLoadImage: error",!1,y,P),P.onabort=g(er,x,"TestLoadImage: abort",!1,y,P),P.ontimeout=g(er,x,"TestLoadImage: timeout",!1,y,P),a.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=d}else y(!1)}function tI(d,y){const x=new jo,P=new AbortController,j=setTimeout(()=>{P.abort(),er(x,"TestPingServer: timeout",!1,y)},1e4);fetch(d,{signal:P.signal}).then(W=>{clearTimeout(j),W.ok?er(x,"TestPingServer: ok",!0,y):er(x,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(j),er(x,"TestPingServer: error",!1,y)})}function er(d,y,x,P,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),P(x)}catch{}}function nI(){this.g=new Vl}function sI(d,y,x){const P=x||"";try{Im(d,function(j,W){let he=j;c(j)&&(he=jt(j)),y.push(P+W+"="+encodeURIComponent(he))})}catch(j){throw y.push(P+"type="+encodeURIComponent("_badmap")),j}}function ql(d){this.l=d.Ub||null,this.j=d.eb||!1}v(ql,Hd),ql.prototype.g=function(){return new Wl(this.l,this.j)},ql.prototype.i=function(d){return function(){return d}}({});function Wl(d,y){Pe.call(this),this.D=d,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(Wl,Pe),t=Wl.prototype,t.open=function(d,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=y,this.readyState=1,Go(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(y.body=d),(this.D||a).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ko(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Go(this)),this.g&&(this.readyState=3,Go(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Dm(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Dm(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var y=d.value?d.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!d.done}))&&(this.response=this.responseText+=y)}d.done?Ko(this):Go(this),this.readyState==3&&Dm(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,Ko(this))},t.Qa=function(d){this.g&&(this.response=d,Ko(this))},t.ga=function(){this.g&&Ko(this)};function Ko(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Go(d)}t.setRequestHeader=function(d,y){this.u.append(d,y)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],y=this.h.entries();for(var x=y.next();!x.done;)x=x.value,d.push(x[0]+": "+x[1]),x=y.next();return d.join(`\r
`)};function Go(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Wl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Mm(d){let y="";return $(d,function(x,P){y+=P,y+=":",y+=x,y+=`\r
`}),y}function eh(d,y,x){e:{for(P in x){var P=!1;break e}P=!0}P||(x=Mm(x),typeof d=="string"?x!=null&&encodeURIComponent(String(x)):ht(d,y,x))}function xt(d){Pe.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(xt,Pe);var rI=/^https?$/i,iI=["POST","PUT"];t=xt.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,y,x,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);y=y?y.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Kd.g(),this.v=this.o?cm(this.o):cm(Kd),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(y,String(d),!0),this.B=!1}catch(W){Nm(this,W);return}if(d=x||"",x=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var j in P)x.set(j,P[j]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const W of P.keys())x.set(W,P.get(W));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(x.keys()).find(W=>W.toLowerCase()=="content-type"),j=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(iI,y,void 0))||P||j||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,he]of x)this.g.setRequestHeader(W,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$m(this),this.u=!0,this.g.send(d),this.u=!1}catch(W){Nm(this,W)}};function Nm(d,y){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=y,d.m=5,Lm(d),Kl(d)}function Lm(d){d.A||(d.A=!0,Ue(d,"complete"),Ue(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Ue(this,"complete"),Ue(this,"abort"),Kl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Kl(this,!0)),xt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Vm(this):this.bb())},t.bb=function(){Vm(this)};function Vm(d){if(d.h&&typeof o<"u"&&(!d.v[1]||bs(d)!=4||d.Z()!=2)){if(d.u&&bs(d)==4)Qt(d.Ea,0,d);else if(Ue(d,"readystatechange"),bs(d)==4){d.h=!1;try{const he=d.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var x;if(!(x=y)){var P;if(P=he===0){var j=String(d.D).match(Sm)[1]||null;!j&&a.self&&a.self.location&&(j=a.self.location.protocol.slice(0,-1)),P=!rI.test(j?j.toLowerCase():"")}x=P}if(x)Ue(d,"complete"),Ue(d,"success");else{d.m=6;try{var W=2<bs(d)?d.g.statusText:""}catch{W=""}d.l=W+" ["+d.Z()+"]",Lm(d)}}finally{Kl(d)}}}}function Kl(d,y){if(d.g){$m(d);const x=d.g,P=d.v[0]?()=>{}:null;d.g=null,d.v=null,y||Ue(d,"ready");try{x.onreadystatechange=P}catch{}}}function $m(d){d.I&&(a.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function bs(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<bs(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var y=this.g.responseText;return d&&y.indexOf(d)==0&&(y=y.substring(d.length)),On(y)}};function Fm(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function oI(d){const y={};d=(d.g&&2<=bs(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<d.length;P++){if(T(d[P]))continue;var x=k(d[P]);const j=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const W=y[j]||[];y[j]=W,W.push(x)}E(y,function(P){return P.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Yo(d,y,x){return x&&x.internalChannelParams&&x.internalChannelParams[d]||y}function Um(d){this.Aa=0,this.i=[],this.j=new jo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Yo("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Yo("baseRetryDelayMs",5e3,d),this.cb=Yo("retryDelaySeedMs",1e4,d),this.Wa=Yo("forwardChannelMaxRetries",2,d),this.wa=Yo("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new xm(d&&d.concurrentRequestLimit),this.Da=new nI,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Um.prototype,t.la=8,t.G=1,t.connect=function(d,y,x,P){fn(0),this.W=d,this.H=y||{},x&&P!==void 0&&(this.H.OSID=x,this.H.OAID=P),this.F=this.X,this.I=Ym(this,null,this.W),Yl(this)};function th(d){if(Bm(d),d.G==3){var y=d.U++,x=vs(d.I);if(ht(x,"SID",d.K),ht(x,"RID",y),ht(x,"TYPE","terminate"),Qo(d,x),y=new Js(d,d.j,y),y.L=2,y.v=Hl(vs(x)),x=!1,a.navigator&&a.navigator.sendBeacon)try{x=a.navigator.sendBeacon(y.v.toString(),"")}catch{}!x&&a.Image&&(new Image().src=y.v,x=!0),x||(y.g=Qm(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Bl(y)}Gm(d)}function Gl(d){d.g&&(sh(d),d.g.cancel(),d.g=null)}function Bm(d){Gl(d),d.u&&(a.clearTimeout(d.u),d.u=null),Ql(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function Yl(d){if(!wm(d.h)&&!d.s){d.s=!0;var y=d.Ga;F||mt(),K||(F(),K=!0),Re.add(y,d),d.B=0}}function aI(d,y){return Em(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=y.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Bo(f(d.Ga,d,y),Km(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const j=new Js(this,this.j,d);let W=this.o;if(this.S&&(W?(W=_(W),A(W,this.S)):W=this.S),this.m!==null||this.O||(j.H=W,W=null),this.P)e:{for(var y=0,x=0;x<this.i.length;x++){t:{var P=this.i[x];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(y+=P,4096<y){y=x;break e}if(y===4096||x===this.i.length-1){y=x+1;break e}}y=1e3}else y=1e3;y=zm(this,j,y),x=vs(this.I),ht(x,"RID",d),ht(x,"CVER",22),this.D&&ht(x,"X-HTTP-Session-Id",this.D),Qo(this,x),W&&(this.O?y="headers="+encodeURIComponent(String(Mm(W)))+"&"+y:this.m&&eh(x,this.m,W)),Zd(this.h,j),this.Ua&&ht(x,"TYPE","init"),this.P?(ht(x,"$req",y),ht(x,"SID","null"),j.T=!0,Yd(j,x,null)):Yd(j,x,y),this.G=2}}else this.G==3&&(d?jm(this,d):this.i.length==0||wm(this.h)||jm(this))};function jm(d,y){var x;y?x=y.l:x=d.U++;const P=vs(d.I);ht(P,"SID",d.K),ht(P,"RID",x),ht(P,"AID",d.T),Qo(d,P),d.m&&d.o&&eh(P,d.m,d.o),x=new Js(d,d.j,x,d.B+1),d.m===null&&(x.H=d.o),y&&(d.i=y.D.concat(d.i)),y=zm(d,x,1e3),x.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Zd(d.h,x),Yd(x,P,y)}function Qo(d,y){d.H&&$(d.H,function(x,P){ht(y,P,x)}),d.l&&Im({},function(x,P){ht(y,P,x)})}function zm(d,y,x){x=Math.min(d.i.length,x);var P=d.l?f(d.l.Na,d.l,d):null;e:{var j=d.i;let W=-1;for(;;){const he=["count="+x];W==-1?0<x?(W=j[0].g,he.push("ofs="+W)):W=0:he.push("ofs="+W);let at=!0;for(let zt=0;zt<x;zt++){let tt=j[zt].g;const Jt=j[zt].map;if(tt-=W,0>tt)W=Math.max(0,j[zt].g-100),at=!1;else try{sI(Jt,he,"req"+tt+"_")}catch{P&&P(Jt)}}if(at){P=he.join("&");break e}}}return d=d.i.splice(0,x),y.D=d,P}function Hm(d){if(!d.g&&!d.u){d.Y=1;var y=d.Fa;F||mt(),K||(F(),K=!0),Re.add(y,d),d.v=0}}function nh(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Bo(f(d.Fa,d),Km(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,qm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Bo(f(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,fn(10),Gl(this),qm(this))};function sh(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function qm(d){d.g=new Js(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var y=vs(d.qa);ht(y,"RID","rpc"),ht(y,"SID",d.K),ht(y,"AID",d.T),ht(y,"CI",d.F?"0":"1"),!d.F&&d.ja&&ht(y,"TO",d.ja),ht(y,"TYPE","xmlhttp"),Qo(d,y),d.m&&d.o&&eh(y,d.m,d.o),d.L&&(d.g.I=d.L);var x=d.g;d=d.ia,x.L=1,x.v=Hl(vs(y)),x.m=null,x.P=!0,vm(x,d)}t.Za=function(){this.C!=null&&(this.C=null,Gl(this),nh(this),fn(19))};function Ql(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function Wm(d,y){var x=null;if(d.g==y){Ql(d),sh(d),d.g=null;var P=2}else if(Jd(d.h,y))x=y.D,km(d.h,y),P=1;else return;if(d.G!=0){if(y.o)if(P==1){x=y.m?y.m.length:0,y=Date.now()-y.F;var j=d.B;P=$l(),Ue(P,new pm(P,x)),Yl(d)}else Hm(d);else if(j=y.s,j==3||j==0&&0<y.X||!(P==1&&aI(d,y)||P==2&&nh(d)))switch(x&&0<x.length&&(y=d.h,y.i=y.i.concat(x)),j){case 1:zr(d,5);break;case 4:zr(d,10);break;case 3:zr(d,6);break;default:zr(d,2)}}}function Km(d,y){let x=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(x*=2),x*y}function zr(d,y){if(d.j.info("Error code "+y),y==2){var x=f(d.fb,d),P=d.Xa;const j=!P;P=new jr(P||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||jl(P,"https"),Hl(P),j?eI(P.toString(),x):tI(P.toString(),x)}else fn(2);d.G=0,d.l&&d.l.sa(y),Gm(d),Bm(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),fn(2)):(this.j.info("Failed to ping google.com"),fn(1))};function Gm(d){if(d.G=0,d.ka=[],d.l){const y=Tm(d.h);(y.length!=0||d.i.length!=0)&&(b(d.ka,y),b(d.ka,d.i),d.h.i.length=0,m(d.i),d.i.length=0),d.l.ra()}}function Ym(d,y,x){var P=x instanceof jr?vs(x):new jr(x);if(P.g!="")y&&(P.g=y+"."+P.g),zl(P,P.s);else{var j=a.location;P=j.protocol,y=y?y+"."+j.hostname:j.hostname,j=+j.port;var W=new jr(null);P&&jl(W,P),y&&(W.g=y),j&&zl(W,j),x&&(W.l=x),P=W}return x=d.D,y=d.ya,x&&y&&ht(P,x,y),ht(P,"VER",d.la),Qo(d,P),P}function Qm(d,y,x){if(y&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=d.Ca&&!d.pa?new xt(new ql({eb:x})):new xt(d.pa),y.Ha(d.J),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xm(){}t=Xm.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Xl(){}Xl.prototype.g=function(d,y){return new wn(d,y)};function wn(d,y){Pe.call(this),this.g=new Um(y),this.l=d,this.h=y&&y.messageUrlParams||null,d=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(d?d["X-WebChannel-Content-Type"]=y.messageContentType:d={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(d?d["X-WebChannel-Client-Profile"]=y.va:d={"X-WebChannel-Client-Profile":y.va}),this.g.S=d,(d=y&&y.Sb)&&!T(d)&&(this.g.m=d),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!T(y)&&(this.g.D=y,d=this.h,d!==null&&y in d&&(d=this.h,y in d&&delete d[y])),this.j=new Fi(this)}v(wn,Pe),wn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},wn.prototype.close=function(){th(this.g)},wn.prototype.o=function(d){var y=this.g;if(typeof d=="string"){var x={};x.__data__=d,d=x}else this.u&&(x={},x.__data__=jt(d),d=x);y.i.push(new HT(y.Ya++,d)),y.G==3&&Yl(y)},wn.prototype.N=function(){this.g.l=null,delete this.j,th(this.g),delete this.g,wn.aa.N.call(this)};function Jm(d){qd.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var y=d.__sm__;if(y){e:{for(const x in y){d=x;break e}d=void 0}(this.i=d)&&(d=this.i,y=y!==null&&d in y?y[d]:void 0),this.data=y}else this.data=d}v(Jm,qd);function Zm(){Wd.call(this),this.status=1}v(Zm,Wd);function Fi(d){this.g=d}v(Fi,Xm),Fi.prototype.ua=function(){Ue(this.g,"a")},Fi.prototype.ta=function(d){Ue(this.g,new Jm(d))},Fi.prototype.sa=function(d){Ue(this.g,new Zm)},Fi.prototype.ra=function(){Ue(this.g,"b")},Xl.prototype.createWebChannel=Xl.prototype.g,wn.prototype.send=wn.prototype.o,wn.prototype.open=wn.prototype.m,wn.prototype.close=wn.prototype.close,lE=function(){return new Xl},aE=function(){return $l()},oE=Ur,Nf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Fl.NO_ERROR=0,Fl.TIMEOUT=8,Fl.HTTP_ERROR=6,Fc=Fl,gm.COMPLETE="complete",iE=gm,um.EventType=Fo,Fo.OPEN="a",Fo.CLOSE="b",Fo.ERROR="c",Fo.MESSAGE="d",Pe.prototype.listen=Pe.prototype.K,ua=um,xt.prototype.listenOnce=xt.prototype.L,xt.prototype.getLastError=xt.prototype.Ka,xt.prototype.getLastErrorCode=xt.prototype.Ba,xt.prototype.getStatus=xt.prototype.Z,xt.prototype.getResponseJson=xt.prototype.Oa,xt.prototype.getResponseText=xt.prototype.oa,xt.prototype.send=xt.prototype.ea,xt.prototype.setWithCredentials=xt.prototype.Ha,rE=xt}).apply(typeof rc<"u"?rc:typeof self<"u"?self:typeof window<"u"?window:{});const rv="@firebase/firestore",iv="4.7.16";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}sn.UNAUTHENTICATED=new sn(null),sn.GOOGLE_CREDENTIALS=new sn("google-credentials-uid"),sn.FIRST_PARTY=new sn("first-party-uid"),sn.MOCK_USER=new sn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oo="11.8.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei=new Vp("@firebase/firestore");function Gi(){return Ei.logLevel}function ve(t,...e){if(Ei.logLevel<=We.DEBUG){const n=e.map(ig);Ei.debug(`Firestore (${Oo}): ${t}`,...n)}}function Ws(t,...e){if(Ei.logLevel<=We.ERROR){const n=e.map(ig);Ei.error(`Firestore (${Oo}): ${t}`,...n)}}function fo(t,...e){if(Ei.logLevel<=We.WARN){const n=e.map(ig);Ei.warn(`Firestore (${Oo}): ${t}`,...n)}}function ig(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,cE(t,s,n)}function cE(t,e,n){let s=`FIRESTORE (${Oo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Ws(s),new Error(s)}function it(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||cE(e,r,s)}function Fe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends ys{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(sn.UNAUTHENTICATED))}shutdown(){}}class hN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class fN{constructor(e){this.t=e,this.currentUser=sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){it(this.o===void 0,42304);let s=this.i;const r=l=>this.i!==s?(s=this.i,n(l)):Promise.resolve();let i=new ui;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ui,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ui)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(it(typeof s.accessToken=="string",31837,{l:s}),new uE(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return it(e===null||typeof e=="string",2055,{h:e}),new sn(e)}}class pN{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=sn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class gN{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new pN(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(sn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ov{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mN{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,In(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){it(this.o===void 0,3512);const s=i=>{i.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,ve("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ov(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(it(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ov(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=yN(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function ze(t,e){return t<e?-1:t>e?1:0}function Lf(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=t.codePointAt(n),r=e.codePointAt(n);if(s!==r){if(s<128&&r<128)return ze(s,r);{const i=dE(),o=vN(i.encode(av(t,n)),i.encode(av(e,n)));return o!==0?o:ze(s,r)}}n+=s>65535?2:1}return ze(t.length,e.length)}function av(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function vN(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ze(t[n],e[n]);return ze(t.length,e.length)}function po(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv=-62135596800,cv=1e6;class Nt{static now(){return Nt.fromMillis(Date.now())}static fromDate(e){return Nt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*cv);return new Nt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new we(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new we(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<lv)throw new we(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new we(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/cv}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-lv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{static fromTimestamp(e){return new Le(e)}static min(){return new Le(new Nt(0,0))}static max(){return new Le(new Nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv="__name__";class as{constructor(e,n,s){n===void 0?n=0:n>e.length&&De(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&De(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return as.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof as?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=as.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return ze(e.length,n.length)}static compareSegments(e,n){const s=as.isNumericId(e),r=as.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?as.extractNumericId(e).compare(as.extractNumericId(n)):Lf(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return wr.fromString(e.substring(4,e.length-2))}}class pt extends as{construct(e,n,s){return new pt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new we(Z.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new pt(n)}static emptyPath(){return new pt([])}}const bN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kt extends as{construct(e,n,s){return new Kt(e,n,s)}static isValidIdentifier(e){return bN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===uv}static keyField(){return new Kt([uv])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new we(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new we(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new we(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(s+=a,r++):(i(),r++)}if(i(),o)throw new we(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kt(n)}static emptyPath(){return new Kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.path=e}static fromPath(e){return new Ce(pt.fromString(e))}static fromName(e){return new Ce(pt.fromString(e).popFirst(5))}static empty(){return new Ce(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return pt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ce(new pt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sl=-1;function _N(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=Le.fromTimestamp(s===1e9?new Nt(n+1,0):new Nt(n,s));return new Sr(r,Ce.empty(),e)}function xN(t){return new Sr(t.readTime,t.key,sl)}class Sr{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Sr(Le.min(),Ce.empty(),sl)}static max(){return new Sr(Le.max(),Ce.empty(),sl)}}function wN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ce.comparator(t.documentKey,e.documentKey),n!==0?n:ze(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Do(t){if(t.code!==Z.FAILED_PRECONDITION||t.message!==EN)throw t;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&De(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Q((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Q?n:Q.resolve(n)}catch(n){return Q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.reject(n)}static resolve(e){return new Q((n,s)=>{n(e)})}static reject(e){return new Q((n,s)=>{s(e)})}static waitFor(e){return new Q((n,s)=>{let r=0,i=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++i,o&&i===r&&n()},l=>s(l))}),o=!0,i===r&&n()})}static or(e){let n=Q.resolve(!1);for(const s of e)n=n.next(r=>r?Q.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new Q((s,r)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===i&&s(o)},u=>r(u))}})}static doWhile(e,n){return new Q((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}function TN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Mo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>n.writeSequenceNumber(s))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}yd.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og=-1;function vd(t){return t==null}function _u(t){return t===0&&1/t==-1/0}function IN(t){return typeof t=="number"&&Number.isInteger(t)&&!_u(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE="";function SN(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=dv(e)),e=AN(t.get(n),e);return dv(e)}function AN(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case fE:n+="";break;default:n+=i}}return n}function dv(t){return t+fE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Fr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function pE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,n){this.comparator=e,this.root=n||qt.EMPTY}insert(e,n){return new bt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,qt.BLACK,null,null))}remove(e){return new bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ic(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ic(this.root,e,this.comparator,!1)}getReverseIterator(){return new ic(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ic(this.root,e,this.comparator,!0)}}class ic{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qt{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??qt.RED,this.left=r??qt.EMPTY,this.right=i??qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new qt(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return qt.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw De(43730,{key:this.key,value:this.value});if(this.right.isRed())throw De(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw De(27949);return e+(this.isRed()?0:1)}}qt.EMPTY=null,qt.RED=!0,qt.BLACK=!1;qt.EMPTY=new class{constructor(){this.size=0}get key(){throw De(57766)}get value(){throw De(16141)}get color(){throw De(16727)}get left(){throw De(29726)}get right(){throw De(36894)}copy(e,n,s,r,i){return this}insert(e,n,s){return new qt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.comparator=e,this.data=new bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new fv(this.data.getIterator())}getIteratorFrom(e){return new fv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Lt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Lt(this.comparator);return n.data=e,n}}class fv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this.fields=e,e.sort(Kt.comparator)}static empty(){return new qn([])}unionWith(e){let n=new Lt(Kt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new qn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return po(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new gE("Invalid base64 string: "+i):i}}(e);return new Gt(n)}static fromUint8Array(e){const n=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new Gt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gt.EMPTY_BYTE_STRING=new Gt("");const CN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ar(t){if(it(!!t,39018),typeof t=="string"){let e=0;const n=CN.exec(t);if(it(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Tt(t.seconds),nanos:Tt(t.nanos)}}function Tt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Cr(t){return typeof t=="string"?Gt.fromBase64String(t):Gt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE="server_timestamp",yE="__type__",vE="__previous_value__",bE="__local_write_time__";function ag(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[yE])===null||n===void 0?void 0:n.stringValue)===mE}function bd(t){const e=t.mapValue.fields[vE];return ag(e)?bd(e):e}function rl(t){const e=Ar(t.mapValue.fields[bE].timestampValue);return new Nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e,n,s,r,i,o,a,l,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=u}}const xu="(default)";class il{constructor(e,n){this.projectId=e,this.database=n||xu}static empty(){return new il("","")}get isDefaultDatabase(){return this.database===xu}isEqual(e){return e instanceof il&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E="__type__",RN="__max__",oc={mapValue:{}},xE="__vector__",wu="value";function Pr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ag(t)?4:DN(t)?9007199254740991:ON(t)?10:11:De(28295,{value:t})}function ms(t,e){if(t===e)return!0;const n=Pr(t);if(n!==Pr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return rl(t).isEqual(rl(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Ar(r.timestampValue),a=Ar(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return Cr(r.bytesValue).isEqual(Cr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return Tt(r.geoPointValue.latitude)===Tt(i.geoPointValue.latitude)&&Tt(r.geoPointValue.longitude)===Tt(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Tt(r.integerValue)===Tt(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=Tt(r.doubleValue),a=Tt(i.doubleValue);return o===a?_u(o)===_u(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return po(t.arrayValue.values||[],e.arrayValue.values||[],ms);case 10:case 11:return function(r,i){const o=r.mapValue.fields||{},a=i.mapValue.fields||{};if(hv(o)!==hv(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ms(o[l],a[l])))return!1;return!0}(t,e);default:return De(52216,{left:t})}}function ol(t,e){return(t.values||[]).find(n=>ms(n,e))!==void 0}function go(t,e){if(t===e)return 0;const n=Pr(t),s=Pr(e);if(n!==s)return ze(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return ze(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Tt(i.integerValue||i.doubleValue),l=Tt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return pv(t.timestampValue,e.timestampValue);case 4:return pv(rl(t),rl(e));case 5:return Lf(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Cr(i),l=Cr(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=ze(a[c],l[c]);if(u!==0)return u}return ze(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=ze(Tt(i.latitude),Tt(o.latitude));return a!==0?a:ze(Tt(i.longitude),Tt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return gv(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,c,u;const h=i.fields||{},f=o.fields||{},g=(a=h[wu])===null||a===void 0?void 0:a.arrayValue,v=(l=f[wu])===null||l===void 0?void 0:l.arrayValue,m=ze(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((u=v==null?void 0:v.values)===null||u===void 0?void 0:u.length)||0);return m!==0?m:gv(g,v)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===oc.mapValue&&o===oc.mapValue)return 0;if(i===oc.mapValue)return 1;if(o===oc.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const f=Lf(l[h],u[h]);if(f!==0)return f;const g=go(a[l[h]],c[u[h]]);if(g!==0)return g}return ze(l.length,u.length)}(t.mapValue,e.mapValue);default:throw De(23264,{Pe:n})}}function pv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ze(t,e);const n=Ar(t),s=Ar(e),r=ze(n.seconds,s.seconds);return r!==0?r:ze(n.nanos,s.nanos)}function gv(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=go(n[r],s[r]);if(i)return i}return ze(n.length,s.length)}function mo(t){return Vf(t)}function Vf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=Ar(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Cr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Ce.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=Vf(i);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${Vf(n.fields[o])}`;return r+"}"}(t.mapValue):De(61005,{value:t})}function Uc(t){switch(Pr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=bd(t);return e?16+Uc(e):16;case 5:return 2*t.stringValue.length;case 6:return Cr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((r,i)=>r+Uc(i),0)}(t.arrayValue);case 10:case 11:return function(s){let r=0;return Fr(s.fields,(i,o)=>{r+=i.length+Uc(o)}),r}(t.mapValue);default:throw De(13486,{value:t})}}function mv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function $f(t){return!!t&&"integerValue"in t}function lg(t){return!!t&&"arrayValue"in t}function yv(t){return!!t&&"nullValue"in t}function vv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Bc(t){return!!t&&"mapValue"in t}function ON(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[_E])===null||n===void 0?void 0:n.stringValue)===xE}function Oa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Fr(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Oa(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Oa(t.arrayValue.values[n]);return e}return Object.assign({},t)}function DN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===RN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.value=e}static empty(){return new Sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Bc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Oa(n)}setAll(e){let n=Kt.emptyPath(),s={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,s,r),s={},r=[],n=a.popLast()}o?s[a.lastSegment()]=Oa(o):r.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());Bc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ms(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];Bc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){Fr(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new Sn(Oa(this.value))}}function wE(t){const e=[];return Fr(t.fields,(n,s)=>{const r=new Kt([n]);if(Bc(s)){const i=wE(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new qn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,n,s,r,i,o,a){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new on(e,0,Le.min(),Le.min(),Le.min(),Sn.empty(),0)}static newFoundDocument(e,n,s,r){return new on(e,1,n,Le.min(),s,r,0)}static newNoDocument(e,n){return new on(e,2,n,Le.min(),Le.min(),Sn.empty(),0)}static newUnknownDocument(e,n){return new on(e,3,n,Le.min(),Le.min(),Sn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof on&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new on(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n){this.position=e,this.inclusive=n}}function bv(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=Ce.comparator(Ce.fromName(o.referenceValue),n.key):s=go(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function _v(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ms(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,n="asc"){this.field=e,this.dir=n}}function MN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{}class Rt extends EE{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new LN(e,n,s):n==="array-contains"?new FN(e,s):n==="in"?new UN(e,s):n==="not-in"?new BN(e,s):n==="array-contains-any"?new jN(e,s):new Rt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new VN(e,s):new $N(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(go(n,this.value)):n!==null&&Pr(this.value)===Pr(n)&&this.matchesComparison(go(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return De(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jn extends EE{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new Jn(e,n)}matches(e){return kE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function kE(t){return t.op==="and"}function TE(t){return NN(t)&&kE(t)}function NN(t){for(const e of t.filters)if(e instanceof Jn)return!1;return!0}function Ff(t){if(t instanceof Rt)return t.field.canonicalString()+t.op.toString()+mo(t.value);if(TE(t))return t.filters.map(e=>Ff(e)).join(",");{const e=t.filters.map(n=>Ff(n)).join(",");return`${t.op}(${e})`}}function IE(t,e){return t instanceof Rt?function(s,r){return r instanceof Rt&&s.op===r.op&&s.field.isEqual(r.field)&&ms(s.value,r.value)}(t,e):t instanceof Jn?function(s,r){return r instanceof Jn&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((i,o,a)=>i&&IE(o,r.filters[a]),!0):!1}(t,e):void De(19439)}function SE(t){return t instanceof Rt?function(n){return`${n.field.canonicalString()} ${n.op} ${mo(n.value)}`}(t):t instanceof Jn?function(n){return n.op.toString()+" {"+n.getFilters().map(SE).join(" ,")+"}"}(t):"Filter"}class LN extends Rt{constructor(e,n,s){super(e,n,s),this.key=Ce.fromName(s.referenceValue)}matches(e){const n=Ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class VN extends Rt{constructor(e,n){super(e,"in",n),this.keys=AE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class $N extends Rt{constructor(e,n){super(e,"not-in",n),this.keys=AE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function AE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>Ce.fromName(s.referenceValue))}class FN extends Rt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return lg(n)&&ol(n.arrayValue,this.value)}}class UN extends Rt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ol(this.value.arrayValue,n)}}class BN extends Rt{constructor(e,n){super(e,"not-in",n)}matches(e){if(ol(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ol(this.value.arrayValue,n)}}class jN extends Rt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!lg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>ol(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e,n=null,s=[],r=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.Ie=null}}function xv(t,e=null,n=[],s=[],r=null,i=null,o=null){return new zN(t,e,n,s,r,i,o)}function cg(t){const e=Fe(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>Ff(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),vd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>mo(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>mo(s)).join(",")),e.Ie=n}return e.Ie}function ug(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!MN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!IE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!_v(t.startAt,e.startAt)&&_v(t.endAt,e.endAt)}function Uf(t){return Ce.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e,n=null,s=[],r=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function HN(t,e,n,s,r,i,o,a){return new No(t,e,n,s,r,i,o,a)}function dg(t){return new No(t)}function wv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function CE(t){return t.collectionGroup!==null}function Da(t){const e=Fe(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ee.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Lt(Kt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ee.push(new al(i,s))}),n.has(Kt.keyField().canonicalString())||e.Ee.push(new al(Kt.keyField(),s))}return e.Ee}function hs(t){const e=Fe(t);return e.de||(e.de=qN(e,Da(t))),e.de}function qN(t,e){if(t.limitType==="F")return xv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new al(r.field,i)});const n=t.endAt?new Eu(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Eu(t.startAt.position,t.startAt.inclusive):null;return xv(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function Bf(t,e){const n=t.filters.concat([e]);return new No(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function jf(t,e,n){return new No(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function _d(t,e){return ug(hs(t),hs(e))&&t.limitType===e.limitType}function PE(t){return`${cg(hs(t))}|lt:${t.limitType}`}function Yi(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(r=>SE(r)).join(", ")}]`),vd(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(r=>mo(r)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(r=>mo(r)).join(",")),`Target(${s})`}(hs(t))}; limitType=${t.limitType})`}function xd(t,e){return e.isFoundDocument()&&function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):Ce.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(t,e)&&function(s,r){for(const i of Da(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(s,r){return!(s.startAt&&!function(o,a,l){const c=bv(o,a,l);return o.inclusive?c<=0:c<0}(s.startAt,Da(s),r)||s.endAt&&!function(o,a,l){const c=bv(o,a,l);return o.inclusive?c>=0:c>0}(s.endAt,Da(s),r))}(t,e)}function WN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function RE(t){return(e,n)=>{let s=!1;for(const r of Da(t)){const i=KN(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function KN(t,e,n){const s=t.field.isKeyField()?Ce.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?go(l,c):De(42886)}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return De(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Fr(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return pE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN=new bt(Ce.comparator);function Ks(){return GN}const OE=new bt(Ce.comparator);function da(...t){let e=OE;for(const n of t)e=e.insert(n.key,n);return e}function DE(t){let e=OE;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function ii(){return Ma()}function ME(){return Ma()}function Ma(){return new Pi(t=>t.toString(),(t,e)=>t.isEqual(e))}const YN=new bt(Ce.comparator),QN=new Lt(Ce.comparator);function Ke(...t){let e=QN;for(const n of t)e=e.add(n);return e}const XN=new Lt(ze);function JN(){return XN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_u(e)?"-0":e}}function NE(t){return{integerValue:""+t}}function ZN(t,e){return IN(e)?NE(e):hg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(){this._=void 0}}function eL(t,e,n){return t instanceof ku?function(r,i){const o={fields:{[yE]:{stringValue:mE},[bE]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&ag(i)&&(i=bd(i)),i&&(o.fields[vE]=i),{mapValue:o}}(n,e):t instanceof ll?VE(t,e):t instanceof cl?$E(t,e):function(r,i){const o=LE(r,i),a=Ev(o)+Ev(r.Re);return $f(o)&&$f(r.Re)?NE(a):hg(r.serializer,a)}(t,e)}function tL(t,e,n){return t instanceof ll?VE(t,e):t instanceof cl?$E(t,e):n}function LE(t,e){return t instanceof Tu?function(s){return $f(s)||function(i){return!!i&&"doubleValue"in i}(s)}(e)?e:{integerValue:0}:null}class ku extends wd{}class ll extends wd{constructor(e){super(),this.elements=e}}function VE(t,e){const n=FE(e);for(const s of t.elements)n.some(r=>ms(r,s))||n.push(s);return{arrayValue:{values:n}}}class cl extends wd{constructor(e){super(),this.elements=e}}function $E(t,e){let n=FE(e);for(const s of t.elements)n=n.filter(r=>!ms(r,s));return{arrayValue:{values:n}}}class Tu extends wd{constructor(e,n){super(),this.serializer=e,this.Re=n}}function Ev(t){return Tt(t.integerValue||t.doubleValue)}function FE(t){return lg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function nL(t,e){return t.field.isEqual(e.field)&&function(s,r){return s instanceof ll&&r instanceof ll||s instanceof cl&&r instanceof cl?po(s.elements,r.elements,ms):s instanceof Tu&&r instanceof Tu?ms(s.Re,r.Re):s instanceof ku&&r instanceof ku}(t.transform,e.transform)}class sL{constructor(e,n){this.version=e,this.transformResults=n}}class Us{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Us}static exists(e){return new Us(void 0,e)}static updateTime(e){return new Us(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ed{}function UE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new jE(t.key,Us.none()):new kd(t.key,t.data,Us.none());{const n=t.data,s=Sn.empty();let r=new Lt(Kt.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new Ri(t.key,s,new qn(r.toArray()),Us.none())}}function rL(t,e,n){t instanceof kd?function(r,i,o){const a=r.value.clone(),l=Tv(r.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ri?function(r,i,o){if(!jc(r.precondition,i))return void i.convertToUnknownDocument(o.version);const a=Tv(r.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(BE(r)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Na(t,e,n,s){return t instanceof kd?function(i,o,a,l){if(!jc(i.precondition,o))return a;const c=i.value.clone(),u=Iv(i.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,s):t instanceof Ri?function(i,o,a,l){if(!jc(i.precondition,o))return a;const c=Iv(i.fieldTransforms,l,o),u=o.data;return u.setAll(BE(i)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(h=>h.field))}(t,e,n,s):function(i,o,a){return jc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function iL(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=LE(s.transform,r||null);i!=null&&(n===null&&(n=Sn.empty()),n.set(s.field,i))}return n||null}function kv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&po(s,r,(i,o)=>nL(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class kd extends Ed{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ri extends Ed{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function BE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function Tv(t,e,n){const s=new Map;it(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,a=e.data.field(i.field);s.set(i.field,tL(o,a,n[r]))}return s}function Iv(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,eL(i,o,e))}return s}class jE extends Ed{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class oL extends Ed{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&rL(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Na(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Na(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=ME();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(r.key)?null:a;const l=UE(o,a);l!==null&&s.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(Le.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ke())}isEqual(e){return this.batchId===e.batchId&&po(this.mutations,e.mutations,(n,s)=>kv(n,s))&&po(this.baseMutations,e.baseMutations,(n,s)=>kv(n,s))}}class fg{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){it(e.mutations.length===s.length,58842,{fe:e.mutations.length,ge:s.length});let r=function(){return YN}();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new fg(e,n,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt,Xe;function uL(t){switch(t){case Z.OK:return De(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return De(15467,{code:t})}}function zE(t){if(t===void 0)return Ws("GRPC error has no .code"),Z.UNKNOWN;switch(t){case Pt.OK:return Z.OK;case Pt.CANCELLED:return Z.CANCELLED;case Pt.UNKNOWN:return Z.UNKNOWN;case Pt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case Pt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case Pt.INTERNAL:return Z.INTERNAL;case Pt.UNAVAILABLE:return Z.UNAVAILABLE;case Pt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case Pt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case Pt.NOT_FOUND:return Z.NOT_FOUND;case Pt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case Pt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case Pt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case Pt.ABORTED:return Z.ABORTED;case Pt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case Pt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case Pt.DATA_LOSS:return Z.DATA_LOSS;default:return De(39323,{code:t})}}(Xe=Pt||(Pt={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL=new wr([4294967295,4294967295],0);function Sv(t){const e=dE().encode(t),n=new sE;return n.update(e),new Uint8Array(n.digest())}function Av(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new wr([n,s],0),new wr([r,i],0)]}class pg{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new ha(`Invalid padding: ${n}`);if(s<0)throw new ha(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new ha(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new ha(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=wr.fromNumber(this.pe)}we(e,n,s){let r=e.add(n.multiply(wr.fromNumber(s)));return r.compare(dL)===1&&(r=new wr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ye).toNumber()}Se(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=Sv(e),[s,r]=Av(n);for(let i=0;i<this.hashCount;i++){const o=this.we(s,r,i);if(!this.Se(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new pg(i,r,n);return s.forEach(a=>o.insert(a)),o}insert(e){if(this.pe===0)return;const n=Sv(e),[s,r]=Av(n);for(let i=0;i<this.hashCount;i++){const o=this.we(s,r,i);this.be(o)}}be(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class ha extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,Ol.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Td(Le.min(),r,new bt(ze),Ks(),Ke())}}class Ol{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Ol(s,n,Ke(),Ke(),Ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,n,s,r){this.De=e,this.removedTargetIds=n,this.key=s,this.ve=r}}class HE{constructor(e,n){this.targetId=e,this.Ce=n}}class qE{constructor(e,n,s=Gt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class Cv{constructor(){this.Fe=0,this.Me=Pv(),this.xe=Gt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Ke(),n=Ke(),s=Ke();return this.Me.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:De(38017,{changeType:i})}}),new Ol(this.xe,this.Oe,e,n,s)}Qe(){this.Ne=!1,this.Me=Pv()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,it(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class hL{constructor(e){this.ze=e,this.je=new Map,this.He=Ks(),this.Je=ac(),this.Ye=ac(),this.Ze=new bt(ze)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const s=this.rt(n);switch(e.state){case 0:this.it(n)&&s.ke(e.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(e.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(n);break;case 3:this.it(n)&&(s.Ge(),s.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),s.ke(e.resumeToken));break;default:De(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((s,r)=>{this.it(r)&&n(r)})}ot(e){const n=e.targetId,s=e.Ce.count,r=this._t(n);if(r){const i=r.target;if(Uf(i))if(s===0){const o=new Ce(i.path);this.tt(n,o,on.newNoDocument(o,Le.min()))}else it(s===1,20013,{expectedCount:s});else{const o=this.ut(n);if(o!==s){const a=this.ct(e),l=a?this.lt(a,e,o):1;if(l!==0){this.st(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,c)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,a;try{o=Cr(s).toUint8Array()}catch(l){if(l instanceof gE)return fo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new pg(o,r,i)}catch(l){return fo(l instanceof ha?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.pe===0?null:a}lt(e,n,s){return n.Ce.count===s-this.Tt(e,n.targetId)?0:2}Tt(e,n){const s=this.ze.getRemoteKeysForTarget(n);let r=0;return s.forEach(i=>{const o=this.ze.Pt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.tt(n,i,null),r++)}),r}It(e){const n=new Map;this.je.forEach((i,o)=>{const a=this._t(o);if(a){if(i.current&&Uf(a.target)){const l=new Ce(a.target.path);this.Et(l).has(o)||this.dt(o,l)||this.tt(o,l,on.newNoDocument(l,e))}i.Le&&(n.set(o,i.qe()),i.Qe())}});let s=Ke();this.Ye.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this._t(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(s=s.add(i))}),this.He.forEach((i,o)=>o.setReadTime(e));const r=new Td(e,n,this.Ze,this.He,s);return this.He=Ks(),this.Je=ac(),this.Ye=ac(),this.Ze=new bt(ze),r}et(e,n){if(!this.it(e))return;const s=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,s),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,s){if(!this.it(e))return;const r=this.rt(e);this.dt(e,n)?r.$e(n,1):r.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),s&&(this.He=this.He.insert(n,s))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new Cv,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Lt(ze),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Lt(ze),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||ve("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Cv),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function ac(){return new bt(Ce.comparator)}function Pv(){return new bt(Ce.comparator)}const fL={asc:"ASCENDING",desc:"DESCENDING"},pL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gL={and:"AND",or:"OR"};class mL{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function zf(t,e){return t.useProto3Json||vd(e)?e:{value:e}}function Iu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function WE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function yL(t,e){return Iu(t,e.toTimestamp())}function fs(t){return it(!!t,49232),Le.fromTimestamp(function(n){const s=Ar(n);return new Nt(s.seconds,s.nanos)}(t))}function gg(t,e){return Hf(t,e).canonicalString()}function Hf(t,e){const n=function(r){return new pt(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function KE(t){const e=pt.fromString(t);return it(JE(e),10190,{key:e.toString()}),e}function qf(t,e){return gg(t.databaseId,e.path)}function $h(t,e){const n=KE(e);if(n.get(1)!==t.databaseId.projectId)throw new we(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new we(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ce(YE(n))}function GE(t,e){return gg(t.databaseId,e)}function vL(t){const e=KE(t);return e.length===4?pt.emptyPath():YE(e)}function Wf(t){return new pt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function YE(t){return it(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Rv(t,e,n){return{name:qf(t,e),fields:n.value.mapValue.fields}}function bL(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:De(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(it(u===void 0||typeof u=="string",58123),Gt.fromBase64String(u||"")):(it(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),Gt.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?Z.UNKNOWN:zE(c.code);return new we(u,c.message||"")}(o);n=new qE(s,r,i,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=$h(t,s.document.name),i=fs(s.document.updateTime),o=s.document.createTime?fs(s.document.createTime):Le.min(),a=new Sn({mapValue:{fields:s.document.fields}}),l=on.newFoundDocument(r,i,o,a),c=s.targetIds||[],u=s.removedTargetIds||[];n=new zc(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=$h(t,s.document),i=s.readTime?fs(s.readTime):Le.min(),o=on.newNoDocument(r,i),a=s.removedTargetIds||[];n=new zc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=$h(t,s.document),i=s.removedTargetIds||[];n=new zc([],i,r,null)}else{if(!("filter"in e))return De(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new cL(r,i),a=s.targetId;n=new HE(a,o)}}return n}function _L(t,e){let n;if(e instanceof kd)n={update:Rv(t,e.key,e.value)};else if(e instanceof jE)n={delete:qf(t,e.key)};else if(e instanceof Ri)n={update:Rv(t,e.key,e.data),updateMask:CL(e.fieldMask)};else{if(!(e instanceof oL))return De(16599,{ft:e.type});n={verify:qf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(i,o){const a=o.transform;if(a instanceof ku)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ll)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof cl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Tu)return{fieldPath:o.field.canonicalString(),increment:a.Re};throw De(20930,{transform:o.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:yL(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:De(27497)}(t,e.precondition)),n}function xL(t,e){return t&&t.length>0?(it(e!==void 0,14353),t.map(n=>function(r,i){let o=r.updateTime?fs(r.updateTime):fs(i);return o.isEqual(Le.min())&&(o=fs(i)),new sL(o,r.transformResults||[])}(n,e))):[]}function wL(t,e){return{documents:[GE(t,e.path)]}}function EL(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=GE(t,r);const i=function(c){if(c.length!==0)return XE(Jn.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(u=>function(f){return{field:Qi(f.field),direction:IL(f.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=zf(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{gt:n,parent:r}}function kL(t){let e=vL(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){it(s===1,65062);const u=n.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let i=[];n.where&&(i=function(h){const f=QE(h);return f instanceof Jn&&TE(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(v){return new al(Xi(v.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,vd(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,g=h.values||[];return new Eu(g,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const f=!h.before,g=h.values||[];return new Eu(g,f)}(n.endAt)),HN(e,r,o,i,a,"F",l,c)}function TL(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function QE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Xi(n.unaryFilter.field);return Rt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=Xi(n.unaryFilter.field);return Rt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Xi(n.unaryFilter.field);return Rt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Xi(n.unaryFilter.field);return Rt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return De(61313);default:return De(60726)}}(t):t.fieldFilter!==void 0?function(n){return Rt.create(Xi(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return De(58110);default:return De(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Jn.create(n.compositeFilter.filters.map(s=>QE(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return De(1026)}}(n.compositeFilter.op))}(t):De(30097,{filter:t})}function IL(t){return fL[t]}function SL(t){return pL[t]}function AL(t){return gL[t]}function Qi(t){return{fieldPath:t.canonicalString()}}function Xi(t){return Kt.fromServerFormat(t.fieldPath)}function XE(t){return t instanceof Rt?function(n){if(n.op==="=="){if(vv(n.value))return{unaryFilter:{field:Qi(n.field),op:"IS_NAN"}};if(yv(n.value))return{unaryFilter:{field:Qi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(vv(n.value))return{unaryFilter:{field:Qi(n.field),op:"IS_NOT_NAN"}};if(yv(n.value))return{unaryFilter:{field:Qi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qi(n.field),op:SL(n.op),value:n.value}}}(t):t instanceof Jn?function(n){const s=n.getFilters().map(r=>XE(r));return s.length===1?s[0]:{compositeFilter:{op:AL(n.op),filters:s}}}(t):De(54877,{filter:t})}function CL(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function JE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,n,s,r,i=Le.min(),o=Le.min(),a=Gt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new gr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new gr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(e){this.wt=e}}function RL(t){const e=kL({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?jf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL{constructor(){this.Cn=new DL}addToCollectionParentIndex(e,n){return this.Cn.add(n),Q.resolve()}getCollectionParents(e,n){return Q.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Q.resolve()}deleteFieldIndex(e,n){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,n){return Q.resolve()}getDocumentsMatchingTarget(e,n){return Q.resolve(null)}getIndexType(e,n){return Q.resolve(0)}getFieldIndexes(e,n){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,n){return Q.resolve(Sr.min())}getMinOffsetFromCollectionGroup(e,n){return Q.resolve(Sr.min())}updateCollectionGroup(e,n,s){return Q.resolve()}updateIndexEntries(e,n){return Q.resolve()}}class DL{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new Lt(pt.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new Lt(pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ZE=41943040;class yn{static withCacheSize(e){return new yn(e,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yn.DEFAULT_COLLECTION_PERCENTILE=10,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yn.DEFAULT=new yn(ZE,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yn.DISABLED=new yn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new yo(0)}static lr(){return new yo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv="LruGarbageCollector",ML=1048576;function Mv([t,e],[n,s]){const r=ze(t,n);return r===0?ze(e,s):r}class NL{constructor(e){this.Er=e,this.buffer=new Lt(Mv),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Mv(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class LL{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){ve(Dv,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Mo(n)?ve(Dv,"Ignoring IndexedDB error during garbage collection: ",n):await Do(n)}await this.mr(3e5)})}}class VL{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return Q.resolve(yd.le);const s=new NL(n);return this.gr.forEachTarget(e,r=>s.Rr(r.sequenceNumber)).next(()=>this.gr.yr(e,r=>s.Rr(r))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.gr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(Ov)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ov):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let s,r,i,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),r=this.params.maximumSequenceNumbersToCollect):r=h,o=Date.now(),this.nthSequenceNumber(e,r))).next(h=>(s=h,a=Date.now(),this.removeTargets(e,s,n))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,s))).next(h=>(c=Date.now(),Gi()<=We.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:h})))}}function $L(t,e){return new VL(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(){this.changes=new Pi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,on.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?Q.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(s!==null&&Na(s.mutation,r,qn.empty(),Nt.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Ke()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Ke()){const r=ii();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let o=da();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=ii();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Ke()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,s,r){let i=Ks();const o=Ma(),a=function(){return Ma()}();return n.forEach((l,c)=>{const u=s.get(c.key);r.has(c.key)&&(u===void 0||u.mutation instanceof Ri)?i=i.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),Na(u.mutation,c,u.mutation.getFieldMask(),Nt.now())):o.set(c.key,qn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var h;return a.set(c,new UL(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const s=Ma();let r=new bt((o,a)=>o-a),i=Ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=s.get(l)||qn.empty();u=a.applyToLocalView(c,u),s.set(l,u);const h=(r.get(a.batchId)||Ke()).add(l);r=r.insert(a.batchId,h)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=ME();u.forEach(f=>{if(!i.has(f)){const g=UE(n.get(f),s.get(f));g!==null&&h.set(f,g),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return Q.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,r){return function(o){return Ce.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):CE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):Q.resolve(ii());let a=sl,l=i;return o.next(c=>Q.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(u)?Q.resolve():this.remoteDocumentCache.getEntry(e,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,Ke())).next(u=>({batchId:a,changes:DE(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ce(n)).next(s=>{let r=da();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=da();return this.indexManager.getCollectionParents(e,i).next(a=>Q.forEach(a,l=>{const c=function(h,f){return new No(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,s,r).next(u=>{u.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r))).next(o=>{i.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,on.newInvalidDocument(u)))});let a=da();return o.forEach((l,c)=>{const u=i.get(l);u!==void 0&&Na(u.mutation,c,qn.empty(),Nt.now()),xd(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return Q.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:fs(r.createTime)}}(n)),Q.resolve()}getNamedQuery(e,n){return Q.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(r){return{name:r.name,query:RL(r.bundledQuery),readTime:fs(r.readTime)}}(n)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(){this.overlays=new bt(Ce.comparator),this.Qr=new Map}getOverlay(e,n){return Q.resolve(this.overlays.get(n))}getOverlays(e,n){const s=ii();return Q.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.bt(e,n,i)}),Q.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.Qr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.Qr.delete(s)),Q.resolve()}getOverlaysForCollection(e,n,s){const r=ii(),i=n.length+1,o=new Ce(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>s&&r.set(l.getKey(),l)}return Q.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new bt((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>s){let u=i.get(c.largestBatchId);u===null&&(u=ii(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=ii(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=r)););return Q.resolve(a)}bt(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.Qr.get(r.largestBatchId).delete(s.key);this.Qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new lL(n,s));let i=this.Qr.get(n);i===void 0&&(i=Ke(),this.Qr.set(n,i)),this.Qr.set(n,i.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{constructor(){this.sessionToken=Gt.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(){this.$r=new Lt(Vt.Ur),this.Kr=new Lt(Vt.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const s=new Vt(e,n);this.$r=this.$r.add(s),this.Kr=this.Kr.add(s)}Gr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.zr(new Vt(e,n))}jr(e,n){e.forEach(s=>this.removeReference(s,n))}Hr(e){const n=new Ce(new pt([])),s=new Vt(n,e),r=new Vt(n,e+1),i=[];return this.Kr.forEachInRange([s,r],o=>{this.zr(o),i.push(o.key)}),i}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new Ce(new pt([])),s=new Vt(n,e),r=new Vt(n,e+1);let i=Ke();return this.Kr.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Vt(e,0),s=this.$r.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Vt{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return Ce.comparator(e.key,n.key)||ze(e.Zr,n.Zr)}static Wr(e,n){return ze(e.Zr,n.Zr)||Ce.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qL{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Lt(Vt.Ur)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new aL(i,n,s,r);this.mutationQueue.push(o);for(const a of r)this.Xr=this.Xr.add(new Vt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Q.resolve(o)}lookupMutationBatch(e,n){return Q.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ti(s),i=r<0?0:r;return Q.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?og:this.nr-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Vt(n,0),r=new Vt(n,Number.POSITIVE_INFINITY),i=[];return this.Xr.forEachInRange([s,r],o=>{const a=this.ei(o.Zr);i.push(a)}),Q.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Lt(ze);return n.forEach(r=>{const i=new Vt(r,0),o=new Vt(r,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([i,o],a=>{s=s.add(a.Zr)})}),Q.resolve(this.ni(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;Ce.isDocumentKey(i)||(i=i.child(""));const o=new Vt(new Ce(i),0);let a=new Lt(ze);return this.Xr.forEachWhile(l=>{const c=l.key.path;return!!s.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.Zr)),!0)},o),Q.resolve(this.ni(a))}ni(e){const n=[];return e.forEach(s=>{const r=this.ei(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){it(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Xr;return Q.forEach(n.mutations,r=>{const i=new Vt(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Xr=s})}sr(e){}containsKey(e,n){const s=new Vt(n,0),r=this.Xr.firstAfterOrEqual(s);return Q.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{constructor(e){this.ii=e,this.docs=function(){return new bt(Ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ii(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return Q.resolve(s?s.document.mutableCopy():on.newInvalidDocument(n))}getEntries(e,n){let s=Ks();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():on.newInvalidDocument(r))}),Q.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=Ks();const o=n.path,a=new Ce(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||wN(xN(u),s)<=0||(r.has(u.key)||xd(n,u))&&(i=i.insert(u.key,u.mutableCopy()))}return Q.resolve(i)}getAllFromCollectionGroup(e,n,s,r){De(9500)}si(e,n){return Q.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new KL(this)}getSize(e){return Q.resolve(this.size)}}class KL extends FL{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Br.addEntry(e,r)):this.Br.removeEntry(s)}),Q.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{constructor(e){this.persistence=e,this.oi=new Pi(n=>cg(n),ug),this.lastRemoteSnapshotVersion=Le.min(),this.highestTargetId=0,this._i=0,this.ai=new mg,this.targetCount=0,this.ui=yo.cr()}forEachTarget(e,n){return this.oi.forEach((s,r)=>n(r)),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this._i&&(this._i=n),Q.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new yo(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,Q.resolve()}updateTargetData(e,n){return this.Tr(n),Q.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.oi.forEach((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.oi.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),Q.waitFor(i).next(()=>r)}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,n){const s=this.oi.get(n)||null;return Q.resolve(s)}addMatchingKeys(e,n,s){return this.ai.Gr(n,s),Q.resolve()}removeMatchingKeys(e,n,s){this.ai.jr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),Q.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),Q.resolve()}getMatchingKeysForTargetId(e,n){const s=this.ai.Yr(n);return Q.resolve(s)}containsKey(e,n){return Q.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e,n){this.ci={},this.overlays={},this.li=new yd(0),this.hi=!1,this.hi=!0,this.Pi=new HL,this.referenceDelegate=e(this),this.Ti=new GL(this),this.indexManager=new OL,this.remoteDocumentCache=function(r){return new WL(r)}(s=>this.referenceDelegate.Ii(s)),this.serializer=new PL(n),this.Ei=new jL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new zL,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ci[e.toKey()];return s||(s=new qL(n,this.referenceDelegate),this.ci[e.toKey()]=s),s}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,s){ve("MemoryPersistence","Starting transaction:",e);const r=new YL(this.li.next());return this.referenceDelegate.di(),s(r).next(i=>this.referenceDelegate.Ai(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ri(e,n){return Q.or(Object.values(this.ci).map(s=>()=>s.containsKey(e,n)))}}class YL extends kN{constructor(e){super(),this.currentSequenceNumber=e}}class yg{constructor(e){this.persistence=e,this.Vi=new mg,this.mi=null}static fi(e){return new yg(e)}get gi(){if(this.mi)return this.mi;throw De(60996)}addReference(e,n,s){return this.Vi.addReference(s,n),this.gi.delete(s.toString()),Q.resolve()}removeReference(e,n,s){return this.Vi.removeReference(s,n),this.gi.add(s.toString()),Q.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),Q.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(r=>this.gi.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.gi.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.gi,s=>{const r=Ce.fromPath(s);return this.pi(e,r).next(i=>{i||n.removeEntry(r,Le.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(s=>{s?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return Q.or([()=>Q.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class Su{constructor(e,n){this.persistence=e,this.yi=new Pi(s=>SN(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=$L(this,n)}static fi(e,n){return new Su(e,n)}di(){}Ai(e){return Q.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.Sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(r=>s+r))}Sr(e){let n=0;return this.yr(e,s=>{n++}).next(()=>n)}yr(e,n){return Q.forEach(this.yi,(s,r)=>this.Dr(e,s,r).next(i=>i?Q.resolve():n(r)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.si(e,o=>this.Dr(e,o,n).next(a=>{a||(s++,i.removeEntry(o,Le.min()))})).next(()=>i.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),Q.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),Q.resolve()}removeReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),Q.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),Q.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Uc(e.data.value)),n}Dr(e,n,s){return Q.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.yi.get(n);return Q.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.ds=s,this.As=r}static Rs(e,n){let s=Ke(),r=Ke();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new vg(e,n.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return oR()?8:TN(hn())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ws(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Ss(e,n,r,s).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new QL;return this.bs(e,n,o).next(a=>{if(i.result=a,this.fs)return this.Ds(e,n,o,a.size)})}).next(()=>i.result)}Ds(e,n,s,r){return s.documentReadCount<this.gs?(Gi()<=We.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",Yi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),Q.resolve()):(Gi()<=We.DEBUG&&ve("QueryEngine","Query:",Yi(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.ps*r?(Gi()<=We.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",Yi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hs(n))):Q.resolve())}ws(e,n){if(wv(n))return Q.resolve(null);let s=hs(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=jf(n,null,"F"),s=hs(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=Ke(...i);return this.ys.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,s).next(l=>{const c=this.vs(n,a);return this.Cs(n,c,o,l.readTime)?this.ws(e,jf(n,null,"F")):this.Fs(e,c,n,l)}))})))}Ss(e,n,s,r){return wv(n)||r.isEqual(Le.min())?Q.resolve(null):this.ys.getDocuments(e,s).next(i=>{const o=this.vs(n,i);return this.Cs(n,o,s,r)?Q.resolve(null):(Gi()<=We.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Yi(n)),this.Fs(e,o,n,_N(r,sl)).next(a=>a))})}vs(e,n){let s=new Lt(RE(e));return n.forEach((r,i)=>{xd(e,i)&&(s=s.add(i))}),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}bs(e,n,s){return Gi()<=We.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",Yi(n)),this.ys.getDocumentsMatchingQuery(e,n,Sr.min(),s)}Fs(e,n,s,r){return this.ys.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg="LocalStore",JL=3e8;class ZL{constructor(e,n,s,r){this.persistence=e,this.Ms=n,this.serializer=r,this.xs=new bt(ze),this.Os=new Pi(i=>cg(i),ug),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(s)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new BL(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function eV(t,e,n,s){return new ZL(t,e,n,s)}async function tk(t,e){const n=Fe(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Ls(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],a=[];let l=Ke();for(const c of r){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(s,l).next(c=>({ks:c,removedBatchIds:o,addedBatchIds:a}))})})}function tV(t,e){const n=Fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Bs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const h=c.batch,f=h.keys();let g=Q.resolve();return f.forEach(v=>{g=g.next(()=>u.getEntry(l,v)).next(m=>{const b=c.docVersions.get(v);it(b!==null,48541),m.version.compareTo(b)<0&&(h.applyToRemoteDocument(m,c),m.isValidDocument()&&(m.setReadTime(c.commitVersion),u.addEntry(m)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(a){let l=Ke();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function nk(t){const e=Fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function nV(t,e){const n=Fe(t),s=e.snapshotVersion;let r=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Bs.newChangeBuffer({trackRemovals:!0});r=n.xs;const a=[];e.targetChanges.forEach((u,h)=>{const f=r.get(h);if(!f)return;a.push(n.Ti.removeMatchingKeys(i,u.removedDocuments,h).next(()=>n.Ti.addMatchingKeys(i,u.addedDocuments,h)));let g=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(Gt.EMPTY_BYTE_STRING,Le.min()).withLastLimboFreeSnapshotVersion(Le.min()):u.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(u.resumeToken,s)),r=r.insert(h,g),function(m,b,I){return m.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=JL?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(f,g,u)&&a.push(n.Ti.updateTargetData(i,g))});let l=Ks(),c=Ke();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,u))}),a.push(sV(i,o,e.documentUpdates).next(u=>{l=u.qs,c=u.Qs})),!s.isEqual(Le.min())){const u=n.Ti.getLastRemoteSnapshotVersion(i).next(h=>n.Ti.setTargetsMetadata(i,i.currentSequenceNumber,s));a.push(u)}return Q.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.xs=r,i))}function sV(t,e,n){let s=Ke(),r=Ke();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=Ks();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(Le.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ve(bg,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{qs:o,Qs:r}})}function rV(t,e){const n=Fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=og),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function iV(t,e){const n=Fe(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Ti.getTargetData(s,e).next(i=>i?(r=i,Q.resolve(r)):n.Ti.allocateTargetId(s).next(o=>(r=new gr(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Ti.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.xs.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.xs=n.xs.insert(s.targetId,s),n.Os.set(e,s.targetId)),s})}async function Kf(t,e,n){const s=Fe(t),r=s.xs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Mo(o))throw o;ve(bg,`Failed to update sequence numbers for target ${e}: ${o}`)}s.xs=s.xs.remove(e),s.Os.delete(r.target)}function Nv(t,e,n){const s=Fe(t);let r=Le.min(),i=Ke();return s.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const h=Fe(l),f=h.Os.get(u);return f!==void 0?Q.resolve(h.xs.get(f)):h.Ti.getTargetData(c,u)}(s,o,hs(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,s.Ti.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>s.Ms.getDocumentsMatchingQuery(o,e,n?r:Le.min(),n?i:Ke())).next(a=>(oV(s,WN(e),a),{documents:a,$s:i})))}function oV(t,e,n){let s=t.Ns.get(e)||Le.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Ns.set(e,s)}class Lv{constructor(){this.activeTargetIds=JN()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aV{constructor(){this.xo=new Lv,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,s){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Lv,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv="ConnectivityMonitor";class $v{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){ve(Vv,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){ve(Vv,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lc=null;function Gf(){return lc===null?lc=function(){return 268435456+Math.round(2147483648*Math.random())}():lc++,"0x"+lc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh="RestConnection",cV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class uV{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${s}/databases/${r}`,this.Go=this.databaseId.database===xu?`project_id=${s}`:`project_id=${s}&database_id=${r}`}zo(e,n,s,r,i){const o=Gf(),a=this.jo(e,n.toUriEncodedString());ve(Fh,`Sending RPC '${e}' ${o}:`,a,s);const l={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(l,r,i);const{host:c}=new URL(a),u=Il(c);return this.Jo(e,a,l,s,u).then(h=>(ve(Fh,`Received RPC '${e}' ${o}: `,h),h),h=>{throw fo(Fh,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",s),h})}Yo(e,n,s,r,i,o){return this.zo(e,n,s,r,i)}Ho(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Oo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}jo(e,n){const s=cV[e];return`${this.Ko}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="WebChannelConnection";class hV extends uV{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=Gf();return new Promise((a,l)=>{const c=new rE;c.setWithCredentials(!0),c.listenOnce(iE.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Fc.NO_ERROR:const h=c.getResponseJson();ve(en,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case Fc.TIMEOUT:ve(en,`RPC '${e}' ${o} timed out`),l(new we(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Fc.HTTP_ERROR:const f=c.getStatus();if(ve(en,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const v=g==null?void 0:g.error;if(v&&v.status&&v.message){const m=function(I){const T=I.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(T)>=0?T:Z.UNKNOWN}(v.status);l(new we(m,v.message))}else l(new we(Z.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new we(Z.UNAVAILABLE,"Connection failed."));break;default:De(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{ve(en,`RPC '${e}' ${o} completed.`)}});const u=JSON.stringify(r);ve(en,`RPC '${e}' ${o} sending request:`,r),c.send(n,"POST",u,s,15)})}T_(e,n,s){const r=Gf(),i=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=lE(),a=aE(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Ho(l.initMessageHeaders,n,s),l.encodeInitMessageHeaders=!0;const u=i.join("");ve(en,`Creating RPC '${e}' stream ${r}: ${u}`,l);const h=o.createWebChannel(u,l);let f=!1,g=!1;const v=new dV({Zo:b=>{g?ve(en,`Not sending because RPC '${e}' stream ${r} is closed:`,b):(f||(ve(en,`Opening RPC '${e}' stream ${r} transport.`),h.open(),f=!0),ve(en,`RPC '${e}' stream ${r} sending:`,b),h.send(b))},Xo:()=>h.close()}),m=(b,I,T)=>{b.listen(I,D=>{try{T(D)}catch(L){setTimeout(()=>{throw L},0)}})};return m(h,ua.EventType.OPEN,()=>{g||(ve(en,`RPC '${e}' stream ${r} transport opened.`),v.__())}),m(h,ua.EventType.CLOSE,()=>{g||(g=!0,ve(en,`RPC '${e}' stream ${r} transport closed`),v.u_())}),m(h,ua.EventType.ERROR,b=>{g||(g=!0,fo(en,`RPC '${e}' stream ${r} transport errored. Name:`,b.name,"Message:",b.message),v.u_(new we(Z.UNAVAILABLE,"The operation could not be completed")))}),m(h,ua.EventType.MESSAGE,b=>{var I;if(!g){const T=b.data[0];it(!!T,16349);const D=T,L=(D==null?void 0:D.error)||((I=D[0])===null||I===void 0?void 0:I.error);if(L){ve(en,`RPC '${e}' stream ${r} received error:`,L);const M=L.status;let $=function(w){const A=Pt[w];if(A!==void 0)return zE(A)}(M),E=L.message;$===void 0&&($=Z.INTERNAL,E="Unknown error status: "+M+" with message "+L.message),g=!0,v.u_(new we($,E)),h.close()}else ve(en,`RPC '${e}' stream ${r} received:`,T),v.c_(T)}}),m(a,oE.STAT_EVENT,b=>{b.stat===Nf.PROXY?ve(en,`RPC '${e}' stream ${r} detected buffering proxy`):b.stat===Nf.NOPROXY&&ve(en,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{v.a_()},0),v}}function Uh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Id(t){return new mL(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e,n,s=1e3,r=1.5,i=6e4){this.xi=e,this.timerId=n,this.I_=s,this.E_=r,this.d_=i,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(e){this.cancel();const n=Math.floor(this.A_+this.g_()),s=Math.max(0,Date.now()-this.V_),r=Math.max(0,n-s);r>0&&ve("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.A_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.R_=this.xi.enqueueAfterDelay(this.timerId,r,()=>(this.V_=Date.now(),e())),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){this.R_!==null&&(this.R_.skipDelay(),this.R_=null)}cancel(){this.R_!==null&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="PersistentStream";class rk{constructor(e,n,s,r,i,o,a,l){this.xi=e,this.y_=s,this.w_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.S_=0,this.b_=null,this.D_=null,this.stream=null,this.v_=0,this.C_=new sk(e,n)}F_(){return this.state===1||this.state===5||this.M_()}M_(){return this.state===2||this.state===3}start(){this.v_=0,this.state!==4?this.auth():this.x_()}async stop(){this.F_()&&await this.close(0)}O_(){this.state=0,this.C_.reset()}N_(){this.M_()&&this.b_===null&&(this.b_=this.xi.enqueueAfterDelay(this.y_,6e4,()=>this.B_()))}L_(e){this.k_(),this.stream.send(e)}async B_(){if(this.M_())return this.close(0)}k_(){this.b_&&(this.b_.cancel(),this.b_=null)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}async close(e,n){this.k_(),this.q_(),this.C_.cancel(),this.S_++,e!==4?this.C_.reset():n&&n.code===Z.RESOURCE_EXHAUSTED?(Ws(n.toString()),Ws("Using maximum backoff delay to prevent overloading the backend."),this.C_.m_()):n&&n.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Q_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}Q_(){}auth(){this.state=1;const e=this.U_(this.S_),n=this.S_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.S_===n&&this.K_(s,r)},s=>{e(()=>{const r=new we(Z.UNKNOWN,"Fetching auth token failed: "+s.message);return this.W_(r)})})}K_(e,n){const s=this.U_(this.S_);this.stream=this.G_(e,n),this.stream.e_(()=>{s(()=>this.listener.e_())}),this.stream.n_(()=>{s(()=>(this.state=2,this.D_=this.xi.enqueueAfterDelay(this.w_,1e4,()=>(this.M_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(r=>{s(()=>this.W_(r))}),this.stream.onMessage(r=>{s(()=>++this.v_==1?this.z_(r):this.onNext(r))})}x_(){this.state=5,this.C_.f_(async()=>{this.state=0,this.start()})}W_(e){return ve(Fv,`close with error: ${e}`),this.stream=null,this.close(4,e)}U_(e){return n=>{this.xi.enqueueAndForget(()=>this.S_===e?n():(ve(Fv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class fV extends rk{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}G_(e,n){return this.connection.T_("Listen",e,n)}z_(e){return this.onNext(e)}onNext(e){this.C_.reset();const n=bL(this.serializer,e),s=function(i){if(!("targetChange"in i))return Le.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Le.min():o.readTime?fs(o.readTime):Le.min()}(e);return this.listener.j_(n,s)}H_(e){const n={};n.database=Wf(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Uf(l)?{documents:wL(i,l)}:{query:EL(i,l).gt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=WE(i,o.resumeToken);const c=zf(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Le.min())>0){a.readTime=Iu(i,o.snapshotVersion.toTimestamp());const c=zf(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const s=TL(this.serializer,e);s&&(n.labels=s),this.L_(n)}J_(e){const n={};n.database=Wf(this.serializer),n.removeTarget=e,this.L_(n)}}class pV extends rk{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get Y_(){return this.v_>0}start(){this.lastStreamToken=void 0,super.start()}Q_(){this.Y_&&this.Z_([])}G_(e,n){return this.connection.T_("Write",e,n)}z_(e){return it(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,it(!e.writeResults||e.writeResults.length===0,55816),this.listener.X_()}onNext(e){it(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.C_.reset();const n=xL(e.writeResults,e.commitTime),s=fs(e.commitTime);return this.listener.ea(s,n)}ta(){const e={};e.database=Wf(this.serializer),this.L_(e)}Z_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>_L(this.serializer,s))};this.L_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{}class mV extends gV{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.na=!1}ra(){if(this.na)throw new we(Z.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,s,r){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.zo(e,Hf(n,s),r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new we(Z.UNKNOWN,i.toString())})}Yo(e,n,s,r,i){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Yo(e,Hf(n,s),r,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new we(Z.UNKNOWN,o.toString())})}terminate(){this.na=!0,this.connection.terminate()}}class yV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){this.ia===0&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve())))}ca(e){this.state==="Online"?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.aa("Offline")))}set(e){this.la(),this.ia=0,e==="Online"&&(this.oa=!1),this.aa(e)}aa(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ua(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.oa?(Ws(n),this.oa=!1):ve("OnlineStateTracker",n)}la(){this.sa!==null&&(this.sa.cancel(),this.sa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki="RemoteStore";class vV{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=i,this.Ea.No(o=>{s.enqueueAndForget(async()=>{Oi(this)&&(ve(ki,"Restarting streams for network reachability change."),await async function(l){const c=Fe(l);c.Ta.add(4),await Dl(c),c.da.set("Unknown"),c.Ta.delete(4),await Sd(c)}(this))})}),this.da=new yV(s,r)}}async function Sd(t){if(Oi(t))for(const e of t.Ia)await e(!0)}async function Dl(t){for(const e of t.Ia)await e(!1)}function ik(t,e){const n=Fe(t);n.Pa.has(e.targetId)||(n.Pa.set(e.targetId,e),Eg(n)?wg(n):Lo(n).M_()&&xg(n,e))}function _g(t,e){const n=Fe(t),s=Lo(n);n.Pa.delete(e),s.M_()&&ok(n,e),n.Pa.size===0&&(s.M_()?s.N_():Oi(n)&&n.da.set("Unknown"))}function xg(t,e){if(t.Aa.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Lo(t).H_(e)}function ok(t,e){t.Aa.Ke(e),Lo(t).J_(e)}function wg(t){t.Aa=new hL({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Pa.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),Lo(t).start(),t.da._a()}function Eg(t){return Oi(t)&&!Lo(t).F_()&&t.Pa.size>0}function Oi(t){return Fe(t).Ta.size===0}function ak(t){t.Aa=void 0}async function bV(t){t.da.set("Online")}async function _V(t){t.Pa.forEach((e,n)=>{xg(t,e)})}async function xV(t,e){ak(t),Eg(t)?(t.da.ca(e),wg(t)):t.da.set("Unknown")}async function wV(t,e,n){if(t.da.set("Online"),e instanceof qE&&e.state===2&&e.cause)try{await async function(r,i){const o=i.cause;for(const a of i.targetIds)r.Pa.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.Pa.delete(a),r.Aa.removeTarget(a))}(t,e)}catch(s){ve(ki,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Au(t,s)}else if(e instanceof zc?t.Aa.Xe(e):e instanceof HE?t.Aa.ot(e):t.Aa.nt(e),!n.isEqual(Le.min()))try{const s=await nk(t.localStore);n.compareTo(s)>=0&&await function(i,o){const a=i.Aa.It(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i.Pa.get(c);u&&i.Pa.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=i.Pa.get(l);if(!u)return;i.Pa.set(l,u.withResumeToken(Gt.EMPTY_BYTE_STRING,u.snapshotVersion)),ok(i,l);const h=new gr(u.target,l,c,u.sequenceNumber);xg(i,h)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(s){ve(ki,"Failed to raise snapshot:",s),await Au(t,s)}}async function Au(t,e,n){if(!Mo(e))throw e;t.Ta.add(1),await Dl(t),t.da.set("Offline"),n||(n=()=>nk(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ve(ki,"Retrying IndexedDB access"),await n(),t.Ta.delete(1),await Sd(t)})}function lk(t,e){return e().catch(n=>Au(t,n,e))}async function Ad(t){const e=Fe(t),n=Rr(e);let s=e.ha.length>0?e.ha[e.ha.length-1].batchId:og;for(;EV(e);)try{const r=await rV(e.localStore,s);if(r===null){e.ha.length===0&&n.N_();break}s=r.batchId,kV(e,r)}catch(r){await Au(e,r)}ck(e)&&uk(e)}function EV(t){return Oi(t)&&t.ha.length<10}function kV(t,e){t.ha.push(e);const n=Rr(t);n.M_()&&n.Y_&&n.Z_(e.mutations)}function ck(t){return Oi(t)&&!Rr(t).F_()&&t.ha.length>0}function uk(t){Rr(t).start()}async function TV(t){Rr(t).ta()}async function IV(t){const e=Rr(t);for(const n of t.ha)e.Z_(n.mutations)}async function SV(t,e,n){const s=t.ha.shift(),r=fg.from(s,e,n);await lk(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Ad(t)}async function AV(t,e){e&&Rr(t).Y_&&await async function(s,r){if(function(o){return uL(o)&&o!==Z.ABORTED}(r.code)){const i=s.ha.shift();Rr(s).O_(),await lk(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r)),await Ad(s)}}(t,e),ck(t)&&uk(t)}async function Uv(t,e){const n=Fe(t);n.asyncQueue.verifyOperationInProgress(),ve(ki,"RemoteStore received new credentials");const s=Oi(n);n.Ta.add(3),await Dl(n),s&&n.da.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ta.delete(3),await Sd(n)}async function CV(t,e){const n=Fe(t);e?(n.Ta.delete(2),await Sd(n)):e||(n.Ta.add(2),await Dl(n),n.da.set("Unknown"))}function Lo(t){return t.Ra||(t.Ra=function(n,s,r){const i=Fe(n);return i.ra(),new fV(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{e_:bV.bind(null,t),n_:_V.bind(null,t),i_:xV.bind(null,t),j_:wV.bind(null,t)}),t.Ia.push(async e=>{e?(t.Ra.O_(),Eg(t)?wg(t):t.da.set("Unknown")):(await t.Ra.stop(),ak(t))})),t.Ra}function Rr(t){return t.Va||(t.Va=function(n,s,r){const i=Fe(n);return i.ra(),new pV(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:TV.bind(null,t),i_:AV.bind(null,t),X_:IV.bind(null,t),ea:SV.bind(null,t)}),t.Ia.push(async e=>{e?(t.Va.O_(),await Ad(t)):(await t.Va.stop(),t.ha.length>0&&(ve(ki,`Stopping write stream with ${t.ha.length} pending writes`),t.ha=[]))})),t.Va}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new ui,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,a=new kg(e,n,o,r,i);return a.start(s),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new we(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tg(t,e){if(Ws("AsyncQueue",`${e}: ${t}`),Mo(t))return new we(Z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{static emptySet(e){return new io(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Ce.comparator(n.key,s.key):(n,s)=>Ce.comparator(n.key,s.key),this.keyedMap=da(),this.sortedSet=new bt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof io)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new io;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(){this.ma=new bt(Ce.comparator)}track(e){const n=e.doc.key,s=this.ma.get(n);s?e.type!==0&&s.type===3?this.ma=this.ma.insert(n,e):e.type===3&&s.type!==1?this.ma=this.ma.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ma=this.ma.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ma=this.ma.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ma=this.ma.remove(n):e.type===1&&s.type===2?this.ma=this.ma.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ma=this.ma.insert(n,{type:2,doc:e.doc}):De(63341,{Vt:e,fa:s}):this.ma=this.ma.insert(n,e)}ga(){const e=[];return this.ma.inorderTraversal((n,s)=>{e.push(s)}),e}}class vo{constructor(e,n,s,r,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new vo(e,n,io.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_d(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(){this.pa=void 0,this.ya=[]}wa(){return this.ya.some(e=>e.Sa())}}class RV{constructor(){this.queries=jv(),this.onlineState="Unknown",this.ba=new Set}terminate(){(function(n,s){const r=Fe(n),i=r.queries;r.queries=jv(),i.forEach((o,a)=>{for(const l of a.ya)l.onError(s)})})(this,new we(Z.ABORTED,"Firestore shutting down"))}}function jv(){return new Pi(t=>PE(t),_d)}async function OV(t,e){const n=Fe(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.wa()&&e.Sa()&&(s=2):(i=new PV,s=e.Sa()?0:1);try{switch(s){case 0:i.pa=await n.onListen(r,!0);break;case 1:i.pa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=Tg(o,`Initialization of query '${Yi(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.ya.push(e),e.Da(n.onlineState),i.pa&&e.va(i.pa)&&Ig(n)}async function DV(t,e){const n=Fe(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.ya.indexOf(e);o>=0&&(i.ya.splice(o,1),i.ya.length===0?r=e.Sa()?0:1:!i.wa()&&e.Sa()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function MV(t,e){const n=Fe(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const a of o.ya)a.va(r)&&(s=!0);o.pa=r}}s&&Ig(n)}function NV(t,e,n){const s=Fe(t),r=s.queries.get(e);if(r)for(const i of r.ya)i.onError(n);s.queries.delete(e)}function Ig(t){t.ba.forEach(e=>{e.next()})}var Yf,zv;(zv=Yf||(Yf={})).Ca="default",zv.Cache="cache";class LV{constructor(e,n,s){this.query=e,this.Fa=n,this.Ma=!1,this.xa=null,this.onlineState="Unknown",this.options=s||{}}va(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new vo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Ma?this.Oa(e)&&(this.Fa.next(e),n=!0):this.Na(e,this.onlineState)&&(this.Ba(e),n=!0),this.xa=e,n}onError(e){this.Fa.error(e)}Da(e){this.onlineState=e;let n=!1;return this.xa&&!this.Ma&&this.Na(this.xa,e)&&(this.Ba(this.xa),n=!0),n}Na(e,n){if(!e.fromCache||!this.Sa())return!0;const s=n!=="Offline";return(!this.options.La||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Oa(e){if(e.docChanges.length>0)return!0;const n=this.xa&&this.xa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Ba(e){e=vo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Ma=!0,this.Fa.next(e)}Sa(){return this.options.source!==Yf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e){this.key=e}}class hk{constructor(e){this.key=e}}class VV{constructor(e,n){this.query=e,this.Ga=n,this.za=null,this.hasCachedResults=!1,this.current=!1,this.ja=Ke(),this.mutatedKeys=Ke(),this.Ha=RE(e),this.Ja=new io(this.Ha)}get Ya(){return this.Ga}Za(e,n){const s=n?n.Xa:new Bv,r=n?n.Ja:this.Ja;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,h)=>{const f=r.get(u),g=xd(this.query,h)?h:null,v=!!f&&this.mutatedKeys.has(f.key),m=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let b=!1;f&&g?f.data.isEqual(g.data)?v!==m&&(s.track({type:3,doc:g}),b=!0):this.eu(f,g)||(s.track({type:2,doc:g}),b=!0,(l&&this.Ha(g,l)>0||c&&this.Ha(g,c)<0)&&(a=!0)):!f&&g?(s.track({type:0,doc:g}),b=!0):f&&!g&&(s.track({type:1,doc:f}),b=!0,(l||c)&&(a=!0)),b&&(g?(o=o.add(g),i=m?i.add(u):i.delete(u)):(o=o.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),i=i.delete(u.key),s.track({type:1,doc:u})}return{Ja:o,Xa:s,Cs:a,mutatedKeys:i}}eu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.Ja;this.Ja=e.Ja,this.mutatedKeys=e.mutatedKeys;const o=e.Xa.ga();o.sort((u,h)=>function(g,v){const m=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De(20277,{Vt:b})}};return m(g)-m(v)}(u.type,h.type)||this.Ha(u.doc,h.doc)),this.tu(s),r=r!=null&&r;const a=n&&!r?this.nu():[],l=this.ja.size===0&&this.current&&!r?1:0,c=l!==this.za;return this.za=l,o.length!==0||c?{snapshot:new vo(this.query,e.Ja,i,o,e.mutatedKeys,l===0,c,!1,!!s&&s.resumeToken.approximateByteSize()>0),ru:a}:{ru:a}}Da(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ja:this.Ja,Xa:new Bv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ru:[]}}iu(e){return!this.Ga.has(e)&&!!this.Ja.has(e)&&!this.Ja.get(e).hasLocalMutations}tu(e){e&&(e.addedDocuments.forEach(n=>this.Ga=this.Ga.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ga=this.Ga.delete(n)),this.current=e.current)}nu(){if(!this.current)return[];const e=this.ja;this.ja=Ke(),this.Ja.forEach(s=>{this.iu(s.key)&&(this.ja=this.ja.add(s.key))});const n=[];return e.forEach(s=>{this.ja.has(s)||n.push(new hk(s))}),this.ja.forEach(s=>{e.has(s)||n.push(new dk(s))}),n}su(e){this.Ga=e.$s,this.ja=Ke();const n=this.Za(e.documents);return this.applyChanges(n,!0)}ou(){return vo.fromInitialDocuments(this.query,this.Ja,this.mutatedKeys,this.za===0,this.hasCachedResults)}}const Sg="SyncEngine";class $V{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class FV{constructor(e){this.key=e,this._u=!1}}class UV{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.au={},this.uu=new Pi(a=>PE(a),_d),this.cu=new Map,this.lu=new Set,this.hu=new bt(Ce.comparator),this.Pu=new Map,this.Tu=new mg,this.Iu={},this.Eu=new Map,this.du=yo.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return this.Au===!0}}async function BV(t,e,n=!0){const s=vk(t);let r;const i=s.uu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.ou()):r=await fk(s,e,n,!0),r}async function jV(t,e){const n=vk(t);await fk(n,e,!0,!1)}async function fk(t,e,n,s){const r=await iV(t.localStore,hs(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return s&&(a=await zV(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&ik(t.remoteStore,r),a}async function zV(t,e,n,s,r){t.Ru=(h,f,g)=>async function(m,b,I,T){let D=b.view.Za(I);D.Cs&&(D=await Nv(m.localStore,b.query,!1).then(({documents:E})=>b.view.Za(E,D)));const L=T&&T.targetChanges.get(b.targetId),M=T&&T.targetMismatches.get(b.targetId)!=null,$=b.view.applyChanges(D,m.isPrimaryClient,L,M);return qv(m,b.targetId,$.ru),$.snapshot}(t,h,f,g);const i=await Nv(t.localStore,e,!0),o=new VV(e,i.$s),a=o.Za(i.documents),l=Ol.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),c=o.applyChanges(a,t.isPrimaryClient,l);qv(t,n,c.ru);const u=new $V(e,n,o);return t.uu.set(e,u),t.cu.has(n)?t.cu.get(n).push(e):t.cu.set(n,[e]),c.snapshot}async function HV(t,e,n){const s=Fe(t),r=s.uu.get(e),i=s.cu.get(r.targetId);if(i.length>1)return s.cu.set(r.targetId,i.filter(o=>!_d(o,e))),void s.uu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await Kf(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),n&&_g(s.remoteStore,r.targetId),Qf(s,r.targetId)}).catch(Do)):(Qf(s,r.targetId),await Kf(s.localStore,r.targetId,!0))}async function qV(t,e){const n=Fe(t),s=n.uu.get(e),r=n.cu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),_g(n.remoteStore,s.targetId))}async function WV(t,e,n){const s=ZV(t);try{const r=await function(o,a){const l=Fe(o),c=Nt.now(),u=a.reduce((g,v)=>g.add(v.key),Ke());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let v=Ks(),m=Ke();return l.Bs.getEntries(g,u).next(b=>{v=b,v.forEach((I,T)=>{T.isValidDocument()||(m=m.add(I))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,v)).next(b=>{h=b;const I=[];for(const T of a){const D=iL(T,h.get(T.key).overlayedDocument);D!=null&&I.push(new Ri(T.key,D,wE(D.value.mapValue),Us.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,I,a)}).next(b=>{f=b;const I=b.applyToLocalDocumentSet(h,m);return l.documentOverlayCache.saveOverlays(g,b.batchId,I)})}).then(()=>({batchId:f.batchId,changes:DE(h)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let c=o.Iu[o.currentUser.toKey()];c||(c=new bt(ze)),c=c.insert(a,l),o.Iu[o.currentUser.toKey()]=c}(s,r.batchId,n),await Ml(s,r.changes),await Ad(s.remoteStore)}catch(r){const i=Tg(r,"Failed to persist write");n.reject(i)}}async function pk(t,e){const n=Fe(t);try{const s=await nV(n.localStore,e);e.targetChanges.forEach((r,i)=>{const o=n.Pu.get(i);o&&(it(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o._u=!0:r.modifiedDocuments.size>0?it(o._u,14607):r.removedDocuments.size>0&&(it(o._u,42227),o._u=!1))}),await Ml(n,s,e)}catch(s){await Do(s)}}function Hv(t,e,n){const s=Fe(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.uu.forEach((i,o)=>{const a=o.view.Da(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=Fe(o);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(const f of h.ya)f.Da(a)&&(c=!0)}),c&&Ig(l)}(s.eventManager,e),r.length&&s.au.j_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function KV(t,e,n){const s=Fe(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Pu.get(e),i=r&&r.key;if(i){let o=new bt(Ce.comparator);o=o.insert(i,on.newNoDocument(i,Le.min()));const a=Ke().add(i),l=new Td(Le.min(),new Map,new bt(ze),o,a);await pk(s,l),s.hu=s.hu.remove(i),s.Pu.delete(e),Ag(s)}else await Kf(s.localStore,e,!1).then(()=>Qf(s,e,n)).catch(Do)}async function GV(t,e){const n=Fe(t),s=e.batch.batchId;try{const r=await tV(n.localStore,e);mk(n,s,null),gk(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Ml(n,r)}catch(r){await Do(r)}}async function YV(t,e,n){const s=Fe(t);try{const r=await function(o,a){const l=Fe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(it(h!==null,37113),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(s.localStore,e);mk(s,e,n),gk(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Ml(s,r)}catch(r){await Do(r)}}function gk(t,e){(t.Eu.get(e)||[]).forEach(n=>{n.resolve()}),t.Eu.delete(e)}function mk(t,e,n){const s=Fe(t);let r=s.Iu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Iu[s.currentUser.toKey()]=r}}function Qf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.cu.get(e))t.uu.delete(s),n&&t.au.Vu(s,n);t.cu.delete(e),t.isPrimaryClient&&t.Tu.Hr(e).forEach(s=>{t.Tu.containsKey(s)||yk(t,s)})}function yk(t,e){t.lu.delete(e.path.canonicalString());const n=t.hu.get(e);n!==null&&(_g(t.remoteStore,n),t.hu=t.hu.remove(e),t.Pu.delete(n),Ag(t))}function qv(t,e,n){for(const s of n)s instanceof dk?(t.Tu.addReference(s.key,e),QV(t,s)):s instanceof hk?(ve(Sg,"Document no longer in limbo: "+s.key),t.Tu.removeReference(s.key,e),t.Tu.containsKey(s.key)||yk(t,s.key)):De(19791,{mu:s})}function QV(t,e){const n=e.key,s=n.path.canonicalString();t.hu.get(n)||t.lu.has(s)||(ve(Sg,"New document in limbo: "+n),t.lu.add(s),Ag(t))}function Ag(t){for(;t.lu.size>0&&t.hu.size<t.maxConcurrentLimboResolutions;){const e=t.lu.values().next().value;t.lu.delete(e);const n=new Ce(pt.fromString(e)),s=t.du.next();t.Pu.set(s,new FV(n)),t.hu=t.hu.insert(n,s),ik(t.remoteStore,new gr(hs(dg(n.path)),s,"TargetPurposeLimboResolution",yd.le))}}async function Ml(t,e,n){const s=Fe(t),r=[],i=[],o=[];s.uu.isEmpty()||(s.uu.forEach((a,l)=>{o.push(s.Ru(l,e,n).then(c=>{var u;if((c||n)&&s.isPrimaryClient){const h=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;s.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){r.push(c);const h=vg.Rs(l.targetId,c);i.push(h)}}))}),await Promise.all(o),s.au.j_(r),await async function(l,c){const u=Fe(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>Q.forEach(c,f=>Q.forEach(f.ds,g=>u.persistence.referenceDelegate.addReference(h,f.targetId,g)).next(()=>Q.forEach(f.As,g=>u.persistence.referenceDelegate.removeReference(h,f.targetId,g)))))}catch(h){if(!Mo(h))throw h;ve(bg,"Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const g=u.xs.get(f),v=g.snapshotVersion,m=g.withLastLimboFreeSnapshotVersion(v);u.xs=u.xs.insert(f,m)}}}(s.localStore,i))}async function XV(t,e){const n=Fe(t);if(!n.currentUser.isEqual(e)){ve(Sg,"User change. New user:",e.toKey());const s=await tk(n.localStore,e);n.currentUser=e,function(i,o){i.Eu.forEach(a=>{a.forEach(l=>{l.reject(new we(Z.CANCELLED,o))})}),i.Eu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Ml(n,s.ks)}}function JV(t,e){const n=Fe(t),s=n.Pu.get(e);if(s&&s._u)return Ke().add(s.key);{let r=Ke();const i=n.cu.get(e);if(!i)return r;for(const o of i){const a=n.uu.get(o);r=r.unionWith(a.view.Ya)}return r}}function vk(t){const e=Fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=pk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=JV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=KV.bind(null,e),e.au.j_=MV.bind(null,e.eventManager),e.au.Vu=NV.bind(null,e.eventManager),e}function ZV(t){const e=Fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=GV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=YV.bind(null,e),e}class Cu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Id(e.databaseInfo.databaseId),this.sharedClientState=this.pu(e),this.persistence=this.yu(e),await this.persistence.start(),this.localStore=this.wu(e),this.gcScheduler=this.Su(e,this.localStore),this.indexBackfillerScheduler=this.bu(e,this.localStore)}Su(e,n){return null}bu(e,n){return null}wu(e){return eV(this.persistence,new XL,e.initialUser,this.serializer)}yu(e){return new ek(yg.fi,this.serializer)}pu(e){return new aV}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Cu.provider={build:()=>new Cu};class e$ extends Cu{constructor(e){super(),this.cacheSizeBytes=e}Su(e,n){it(this.persistence.referenceDelegate instanceof Su,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new LL(s,e.asyncQueue,n)}yu(e){const n=this.cacheSizeBytes!==void 0?yn.withCacheSize(this.cacheSizeBytes):yn.DEFAULT;return new ek(s=>Su.fi(s,n),this.serializer)}}class Xf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Hv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=XV.bind(null,this.syncEngine),await CV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new RV}()}createDatastore(e){const n=Id(e.databaseInfo.databaseId),s=function(i){return new hV(i)}(e.databaseInfo);return function(i,o,a,l){return new mV(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,r,i,o,a){return new vV(s,r,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Hv(this.syncEngine,n,0),function(){return $v.C()?new $v:new lV}())}createSyncEngine(e,n){return function(r,i,o,a,l,c,u){const h=new UV(r,i,o,a,l,c);return u&&(h.Au=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const i=Fe(r);ve(ki,"RemoteStore shutting down."),i.Ta.add(5),await Dl(i),i.Ea.shutdown(),i.da.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Xf.provider={build:()=>new Xf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t${constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.vu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.vu(this.observer.error,e):Ws("Uncaught Error in snapshot listener:",e.toString()))}Cu(){this.muted=!0}vu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or="FirestoreClient";class n${constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=sn.UNAUTHENTICATED,this.clientId=hE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async o=>{ve(Or,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(s,o=>(ve(Or,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ui;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Tg(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Bh(t,e){t.asyncQueue.verifyOperationInProgress(),ve(Or,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await tk(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Wv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await s$(t);ve(Or,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(s=>Uv(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,r)=>Uv(e.remoteStore,r)),t._onlineComponents=e}async function s$(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ve(Or,"Using user provided OfflineComponentProvider");try{await Bh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===Z.FAILED_PRECONDITION||r.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;fo("Error using user provided cache. Falling back to memory cache: "+n),await Bh(t,new Cu)}}else ve(Or,"Using default OfflineComponentProvider"),await Bh(t,new e$(void 0));return t._offlineComponents}async function bk(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ve(Or,"Using user provided OnlineComponentProvider"),await Wv(t,t._uninitializedComponentsProvider._online)):(ve(Or,"Using default OnlineComponentProvider"),await Wv(t,new Xf))),t._onlineComponents}function r$(t){return bk(t).then(e=>e.syncEngine)}async function Kv(t){const e=await bk(t),n=e.eventManager;return n.onListen=BV.bind(null,e.syncEngine),n.onUnlisten=HV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=jV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=qV.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _k(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xk(t,e,n){if(!n)throw new we(Z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function i$(t,e,n,s){if(e===!0&&s===!0)throw new we(Z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Yv(t){if(!Ce.isDocumentKey(t))throw new we(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Qv(t){if(Ce.isDocumentKey(t))throw new we(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Cd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":De(12329,{type:typeof t})}function oo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new we(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Cd(t);throw new we(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk="firestore.googleapis.com",Xv=!0;class Jv{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new we(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=wk,this.ssl=Xv}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Xv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ZE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ML)throw new we(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}i$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_k((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new we(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new we(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new we(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pd{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new we(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new we(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new dN;switch(s.type){case"firstParty":return new gN(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new we(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=Gv.get(n);s&&(ve("ComponentProvider","Removing Datastore"),Gv.delete(n),s.terminate())}(this),Promise.resolve()}}function o$(t,e,n,s={}){var r;t=oo(t,Pd);const i=Il(e),o=t._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:t._getEmulatorOptions()}),l=`${e}:${n}`;i&&(Ww(`https://${l}`),Kw("Firestore",!0)),o.host!==wk&&o.host!==l&&fo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},o),{host:l,ssl:i,emulatorOptions:s});if(!vi(c,a)&&(t._setSettings(c),s.mockUserToken)){let u,h;if(typeof s.mockUserToken=="string")u=s.mockUserToken,h=sn.MOCK_USER;else{u=XP(s.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const f=s.mockUserToken.sub||s.mockUserToken.user_id;if(!f)throw new we(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new sn(f)}t._authCredentials=new hN(new uE(u,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Di(this.firestore,e,this._query)}}class xn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Er(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xn(this.firestore,e,this._key)}}class Er extends Di{constructor(e,n,s){super(e,n,dg(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xn(this.firestore,null,new Ce(e))}withConverter(e){return new Er(this.firestore,e,this._path)}}function a$(t,e,...n){if(t=Ct(t),xk("collection","path",e),t instanceof Pd){const s=pt.fromString(e,...n);return Qv(s),new Er(t,null,s)}{if(!(t instanceof xn||t instanceof Er))throw new we(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(pt.fromString(e,...n));return Qv(s),new Er(t.firestore,null,s)}}function l$(t,e,...n){if(t=Ct(t),arguments.length===1&&(e=hE.newId()),xk("doc","path",e),t instanceof Pd){const s=pt.fromString(e,...n);return Yv(s),new xn(t,null,new Ce(s))}{if(!(t instanceof xn||t instanceof Er))throw new we(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(pt.fromString(e,...n));return Yv(s),new xn(t.firestore,t instanceof Er?t.converter:null,new Ce(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv="AsyncQueue";class eb{constructor(e=Promise.resolve()){this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new sk(this,"async_queue_retry"),this.ec=()=>{const s=Uh();s&&ve(Zv,"Visibility state changed to "+s.visibilityState),this.C_.p_()},this.tc=e;const n=Uh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nc(),this.rc(e)}enterRestrictedMode(e){if(!this.ju){this.ju=!0,this.Zu=e||!1;const n=Uh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ec)}}enqueue(e){if(this.nc(),this.ju)return new Promise(()=>{});const n=new ui;return this.rc(()=>this.ju&&this.Zu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.zu.push(e),this.sc()))}async sc(){if(this.zu.length!==0){try{await this.zu[0](),this.zu.shift(),this.C_.reset()}catch(e){if(!Mo(e))throw e;ve(Zv,"Operation failed with retryable error: "+e)}this.zu.length>0&&this.C_.f_(()=>this.sc())}}rc(e){const n=this.tc.then(()=>(this.Yu=!0,e().catch(s=>{throw this.Ju=s,this.Yu=!1,Ws("INTERNAL UNHANDLED ERROR: ",tb(s)),s}).then(s=>(this.Yu=!1,s))));return this.tc=n,n}enqueueAfterDelay(e,n,s){this.nc(),this.Xu.indexOf(e)>-1&&(n=0);const r=kg.createAndSchedule(this,e,n,s,i=>this.oc(i));return this.Hu.push(r),r}nc(){this.Ju&&De(47125,{_c:tb(this.Ju)})}verifyOperationInProgress(){}async ac(){let e;do e=this.tc,await e;while(e!==this.tc)}uc(e){for(const n of this.Hu)if(n.timerId===e)return!0;return!1}cc(e){return this.ac().then(()=>{this.Hu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Hu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ac()})}lc(e){this.Xu.push(e)}oc(e){const n=this.Hu.indexOf(e);this.Hu.splice(n,1)}}function tb(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(t){return function(n,s){if(typeof n!="object"||n===null)return!1;const r=n;for(const i of s)if(i in r&&typeof r[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Pu extends Pd{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new eb,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new eb(e),this._firestoreClient=void 0,await e}}}function Ek(t,e){const n=typeof t=="object"?t:Fp(),s=typeof t=="string"?t:xu,r=Co(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=YP("firestore");i&&o$(r,...i)}return r}function kk(t){if(t._terminated)throw new we(Z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||c$(t),t._firestoreClient}function c$(t){var e,n,s;const r=t._freezeSettings(),i=function(a,l,c,u){return new PN(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,_k(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=r.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new n$(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bo(Gt.fromBase64String(e))}catch(n){throw new we(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new bo(Gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new we(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new we(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new we(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u$=/^__.*__$/;class Tk{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Ri(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Ik(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De(40011,{hc:t})}}class Og{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Pc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get hc(){return this.settings.hc}Tc(e){return new Og(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ic(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Tc({path:s,Ec:!1});return r.dc(e),r}Ac(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Tc({path:s,Ec:!1});return r.Pc(),r}Rc(e){return this.Tc({path:void 0,Ec:!0})}Vc(e){return Ru(e,this.settings.methodName,this.settings.mc||!1,this.path,this.settings.fc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Pc(){if(this.path)for(let e=0;e<this.path.length;e++)this.dc(this.path.get(e))}dc(e){if(e.length===0)throw this.Vc("Document fields must not be empty");if(Ik(this.hc)&&u$.test(e))throw this.Vc('Document fields cannot begin and end with "__"')}}class d${constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||Id(e)}gc(e,n,s,r=!1){return new Og({hc:e,methodName:n,fc:s,path:Kt.emptyPath(),Ec:!1,mc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Sk(t){const e=t._freezeSettings(),n=Id(t._databaseId);return new d$(t._databaseId,!!e.ignoreUndefinedProperties,n)}class Od extends Cg{_toFieldTransform(e){if(e.hc!==2)throw e.hc===1?e.Vc(`${this._methodName}() can only appear at the top level of your update data`):e.Vc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Od}}function h$(t,e,n,s){const r=t.gc(1,e,n);Ck("Data must be an object, but it was:",r,s);const i=[],o=Sn.empty();Fr(s,(l,c)=>{const u=Dg(e,l,n);c=Ct(c);const h=r.Ac(u);if(c instanceof Od)i.push(u);else{const f=Nl(c,h);f!=null&&(i.push(u),o.set(u,f))}});const a=new qn(i);return new Tk(o,a,r.fieldTransforms)}function f$(t,e,n,s,r,i){const o=t.gc(1,e,n),a=[sb(e,s,n)],l=[r];if(i.length%2!=0)throw new we(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)a.push(sb(e,i[f])),l.push(i[f+1]);const c=[],u=Sn.empty();for(let f=a.length-1;f>=0;--f)if(!y$(c,a[f])){const g=a[f];let v=l[f];v=Ct(v);const m=o.Ac(g);if(v instanceof Od)c.push(g);else{const b=Nl(v,m);b!=null&&(c.push(g),u.set(g,b))}}const h=new qn(c);return new Tk(u,h,o.fieldTransforms)}function p$(t,e,n,s=!1){return Nl(n,t.gc(s?4:3,e))}function Nl(t,e){if(Ak(t=Ct(t)))return Ck("Unsupported field value:",e,t),g$(t,e);if(t instanceof Cg)return function(s,r){if(!Ik(r.hc))throw r.Vc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Vc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Ec&&e.hc!==4)throw e.Vc("Nested arrays are not supported");return function(s,r){const i=[];let o=0;for(const a of s){let l=Nl(a,r.Rc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(s,r){if((s=Ct(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return ZN(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=Nt.fromDate(s);return{timestampValue:Iu(r.serializer,i)}}if(s instanceof Nt){const i=new Nt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Iu(r.serializer,i)}}if(s instanceof Pg)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof bo)return{bytesValue:WE(r.serializer,s._byteString)};if(s instanceof xn){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.Vc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:gg(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof Rg)return function(o,a){return{mapValue:{fields:{[_E]:{stringValue:xE},[wu]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Vc("VectorValues must only contain numeric values.");return hg(a.serializer,c)})}}}}}}(s,r);throw r.Vc(`Unsupported field value: ${Cd(s)}`)}(t,e)}function g$(t,e){const n={};return pE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fr(t,(s,r)=>{const i=Nl(r,e.Ic(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function Ak(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Nt||t instanceof Pg||t instanceof bo||t instanceof xn||t instanceof Cg||t instanceof Rg)}function Ck(t,e,n){if(!Ak(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const s=Cd(n);throw s==="an object"?e.Vc(t+" a custom object"):e.Vc(t+" "+s)}}function sb(t,e,n){if((e=Ct(e))instanceof Rd)return e._internalPath;if(typeof e=="string")return Dg(t,e);throw Ru("Field path arguments must be of type string or ",t,!1,void 0,n)}const m$=new RegExp("[~\\*/\\[\\]]");function Dg(t,e,n){if(e.search(m$)>=0)throw Ru(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Rd(...e.split("."))._internalPath}catch{throw Ru(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ru(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${s}`),o&&(l+=` in document ${r}`),l+=")"),new we(Z.INVALID_ARGUMENT,a+t+l)}function y$(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new xn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new v$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Mg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class v$ extends Pk{data(){return super.data()}}function Mg(t,e){return typeof e=="string"?Dg(t,e):e instanceof Rd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b$(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new we(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ng{}class Rk extends Ng{}function _$(t,e,...n){let s=[];e instanceof Ng&&s.push(e),s=s.concat(n),function(i){const o=i.filter(l=>l instanceof Vg).length,a=i.filter(l=>l instanceof Lg).length;if(o>1||o>0&&a>0)throw new we(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const r of s)t=r._apply(t);return t}class Lg extends Rk{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Lg(e,n,s)}_apply(e){const n=this._parse(e);return Ok(e._query,n),new Di(e.firestore,e.converter,Bf(e._query,n))}_parse(e){const n=Sk(e.firestore);return function(i,o,a,l,c,u,h){let f;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new we(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){ib(h,u);const v=[];for(const m of h)v.push(rb(l,i,m));f={arrayValue:{values:v}}}else f=rb(l,i,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||ib(h,u),f=p$(a,o,h,u==="in"||u==="not-in");return Rt.create(c,u,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Vg extends Ng{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Vg(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:Jn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,i){let o=r;const a=i.getFlattenedFilters();for(const l of a)Ok(o,l),o=Bf(o,l)}(e._query,n),new Di(e.firestore,e.converter,Bf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class $g extends Rk{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new $g(e,n)}_apply(e){const n=function(r,i,o){if(r.startAt!==null)throw new we(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new we(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new al(i,o)}(e._query,this._field,this._direction);return new Di(e.firestore,e.converter,function(r,i){const o=r.explicitOrderBy.concat([i]);return new No(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function x$(t,e="asc"){const n=e,s=Mg("orderBy",t);return $g._create(s,n)}function rb(t,e,n){if(typeof(n=Ct(n))=="string"){if(n==="")throw new we(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!CE(e)&&n.indexOf("/")!==-1)throw new we(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(pt.fromString(n));if(!Ce.isDocumentKey(s))throw new we(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return mv(t,new Ce(s))}if(n instanceof xn)return mv(t,n._key);throw new we(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cd(n)}.`)}function ib(t,e){if(!Array.isArray(t)||t.length===0)throw new we(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ok(t,e){const n=function(r,i){for(const o of r)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new we(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new we(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class w${convertValue(e,n="none"){switch(Pr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Cr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw De(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Fr(e,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertVectorValue(e){var n,s,r;const i=(r=(s=(n=e.fields)===null||n===void 0?void 0:n[wu].arrayValue)===null||s===void 0?void 0:s.values)===null||r===void 0?void 0:r.map(o=>Tt(o.doubleValue));return new Rg(i)}convertGeoPoint(e){return new Pg(Tt(e.latitude),Tt(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=bd(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(rl(e));default:return null}}convertTimestamp(e){const n=Ar(e);return new Nt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=pt.fromString(e);it(JE(s),9688,{name:e});const r=new il(s.get(1),s.get(3)),i=new Ce(s.popFirst(5));return r.isEqual(n)||Ws(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Dk extends Pk{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Hc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Mg("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class Hc extends Dk{data(e={}){return super.data(e)}}class E${constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new fa(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Hc(this._firestore,this._userDataWriter,s.key,s,new fa(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new we(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const l=new Hc(r._firestore,r._userDataWriter,a.doc.key,a.doc,new fa(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new Hc(r._firestore,r._userDataWriter,a.doc.key,a.doc,new fa(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:k$(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function k$(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De(61501,{type:t})}}class Mk extends w${constructor(e){super(),this.firestore=e}convertBytes(e){return new bo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new xn(this.firestore,null,n)}}function T$(t,e,n,...s){t=oo(t,xn);const r=oo(t.firestore,Pu),i=Sk(r);let o;return o=typeof(e=Ct(e))=="string"||e instanceof Rd?f$(i,"updateDoc",t._key,e,n,s):h$(i,"updateDoc",t._key,e),S$(r,[o.toMutation(t._key,Us.exists(!0))])}function I$(t,...e){var n,s,r;t=Ct(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||nb(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(nb(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(s=h.error)===null||s===void 0?void 0:s.bind(h),e[o+2]=(r=h.complete)===null||r===void 0?void 0:r.bind(h)}let l,c,u;if(t instanceof xn)c=oo(t.firestore,Pu),u=dg(t._key.path),l={next:h=>{e[o]&&e[o](A$(c,t,h))},error:e[o+1],complete:e[o+2]};else{const h=oo(t,Di);c=oo(h.firestore,Pu),u=h._query;const f=new Mk(c);l={next:g=>{e[o]&&e[o](new E$(c,f,h,g))},error:e[o+1],complete:e[o+2]},b$(t._query)}return function(f,g,v,m){const b=new t$(m),I=new LV(g,b,v);return f.asyncQueue.enqueueAndForget(async()=>OV(await Kv(f),I)),()=>{b.Cu(),f.asyncQueue.enqueueAndForget(async()=>DV(await Kv(f),I))}}(kk(c),u,a,l)}function S$(t,e){return function(s,r){const i=new ui;return s.asyncQueue.enqueueAndForget(async()=>WV(await r$(s),r,i)),i.promise}(kk(t),e)}function A$(t,e,n){const s=n.docs.get(e._key),r=new Mk(t);return new Dk(t,r,e._key,s,new fa(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){Oo=r})(Po),gs(new Xn("firestore",(s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),a=new Pu(new fN(s.getProvider("auth-internal")),new mN(o,s.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new we(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new il(c.options.projectId,u)}(o,r),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),$n(rv,iv,e),$n(rv,iv,"esm2017")})();const C$={apiKey:"AIzaSyCqcgvxcgWwG4LmYkSL66x4GYi1KLxuHts",authDomain:"chat-bot-pizzaria.firebaseapp.com",projectId:"chat-bot-pizzaria",storageBucket:"chat-bot-pizzaria.firebasestorage.app",messagingSenderId:"1090893949199",appId:"1:1090893949199:web:cc9724c44f5ef76ea9f67a",measurementId:"G-TQ6E8YLYHD"},Dd=dd(C$),kn=rg(Dd);Ek(Dd);const P$=new Ds;console.log("Firebase inicializado com sucesso");let jh=null;async function Md(){return await k1()?(jh||(jh=GD(Dd),console.log("Firebase Messaging suportado e inicializado.")),jh):(console.warn("Firebase Messaging NÃO suportado neste navegador."),null)}async function Ou(t){const e=await Md();if(!e)return console.warn("Não foi possível obter a instância de Messaging. Abortando solicitação de token."),null;try{if(await Notification.requestPermission()==="granted"){console.log("Permissão de notificação concedida.");const s=await YD(e,{vapidKey:"BIs0n17mt2gj5vBTzyM5znHMDOgI6lcOiGanKQW2SiPlFcgmSvLpBu-d0txnoNKLivhbsUD0iwHHSBQk_LNgQ0A"});return s?(console.log("FCM Registration Token:",s),await Ge.post("/fcm/save-token",{userId:t,fcmToken:s}),console.log("Token enviado para o backend com sucesso."),s):(console.warn("Nenhum token de registro de FCM disponível."),null)}else return console.warn("Permissão de notificação negada."),null}catch(n){return console.error("Erro ao obter token de notificação:",n),null}}async function Nk(){const t=await Md();t?QD(t,e=>{var n;if(console.log("Mensagem recebida em primeiro plano:",e),"Notification"in window&&Notification.permission==="granted"){const s=new Notification(e.notification.title,{body:e.notification.body,icon:e.notification.icon||"/favicon.ico",badge:"/favicon.ico",tag:((n=e.data)==null?void 0:n.orderId)||"general",requireInteraction:!0,actions:[{action:"view",title:"Ver Pedido"},{action:"close",title:"Fechar"}]});s.onclick=function(){var r;window.focus(),(r=e.data)!=null&&r.orderId&&console.log("Abrindo pedido:",e.data.orderId),s.close()}}else alert(`Notificação: ${e.notification.title} - ${e.notification.body}`)}):console.warn("Não foi possível configurar notificações em primeiro plano: Messaging não suportado.")}const Ge=At.create({baseURL:"https://lemming-crucial-smoothly.ngrok-free.app/api",timeout:1e4,headers:{"ngrok-skip-browser-warning":"true"}});Ge.interceptors.request.use(async t=>{const e=t.url.includes("/admin/"),n=t.url.includes("/delivery-men/"),s=t.url.includes("/auth/");if((e||n)&&kn.currentUser)try{const r=await kn.currentUser.getIdToken(!0);t.headers.Authorization=`Bearer ${r}`,console.log("httpClient: ID Token anexado à requisição admin/delivery-men.")}catch(r){console.error("httpClient: Erro ao obter ID Token para requisição admin/delivery-men:",r),delete t.headers.Authorization}else!e&&!n&&!s&&delete t.headers.Authorization;return t},t=>Promise.reject(t));Ge.interceptors.response.use(t=>t,async t=>{var n,s;const e=(n=t.response)==null?void 0:n.status;return e===401||e===403?(console.warn("Sessão expirada ou acesso negado. Redirecionando para login admin."),localStorage.removeItem("adminAuthToken"),localStorage.removeItem("adminUser"),kn.currentUser&&await kn.signOut(),fi.currentRoute.value.path!=="/admin/login"&&fi.push("/admin/login")):console.error("Erro na requisição:",((s=t.response)==null?void 0:s.data)||t.message),Promise.reject(t)});const ob="cached_categories",ab="categories_last_updated",R$=60*60*1e3;function O$(t,e,n=z([])){const s=z(!1),r=()=>s.value=!s.value,i=z([]),o=z([]),a=z({}),l=(f,g)=>{const v=new Set;g.forEach(D=>{var L;(L=D.categoryIds)==null||L.forEach(M=>v.add(M))});const m=f.filter(D=>v.has(D.id)),b=new Set(m.map(D=>D.id)),I=[],T={};f.filter(D=>!D.parent_id).forEach(D=>{let L=!1;b.has(D.id)&&(L=!0);const $=f.filter(E=>E.parent_id===D.id).filter(E=>b.has(E.id));$.length>0&&(L=!0),L&&(I.push(D),T[D.id]=$)}),o.value=I,a.value=T},c=async()=>{try{const{data:f}=await Ge.get("/categories");localStorage.setItem(ob,JSON.stringify(f)),localStorage.setItem(ab,Date.now().toString()),i.value=f,l(f,n.value)}catch(f){console.error("Erro ao carregar categorias:",f)}},u=(f,g=!1)=>{setTimeout(()=>s.value=!1,100),f&&g&&[...(a.value[f]||[]).map(m=>m.id)]},h=f=>!e||!e.value?!1:f.some(g=>e.value.includes(g));return _t(()=>{const f=localStorage.getItem(ob),g=localStorage.getItem(ab);if(f&&g&&Date.now()-parseInt(g,10)<R$)try{const m=JSON.parse(f);i.value=m,l(m,n.value)}catch(m){console.warn("Cache de categorias corrompido. Recarregando...",m),c()}else c()}),vt(n,f=>{i.value.length>0&&f&&f.length>0?l(i.value,f):i.value.length>0&&(!f||f.length===0)&&(o.value=[],a.value={})},{deep:!0}),{open:s,toggleMenu:r,parentCategories:o,childCategories:a,selectCategory:u,isSelected:h}}const Lk=Symbol("selectedCategoryIds"),Vk=Symbol("filterProductsByCategory"),$k=Symbol("allProducts"),D$={class:"bg-red-400 fixed top-0 w-full z-50"},M$={class:"relative px-4 hidden md:block"},N$={class:"container mx-auto flex justify-between items-center"},L$={class:"space-x-6 text-white flex"},V$=["onClick"],$$={key:0,class:"fa-solid fa-chevron-down fa-2xs pt-3 ml-1 group-hover:rotate-180 group-hover:text-yellow-300 transition duration-200 ease-in-out"},F$={key:1,class:"absolute bg-white p-3 w-52 top-12 transform scale-0 group-hover:scale-100 transition duration-150 ease-in-out origin-top shadow-lg rounded-md"},U$=["onClick"],B$={class:"flex space-x-2"},j$={class:"py-2 px-4 bg-gray-50 dark:bg-gray-800 flex justify-between items-center md:hidden w-screen"},z$={key:1},H$={type:"button",name:"mobile-menu",class:"p-2 text-gray-600 dark:text-gray-300 text-sm relative"},q$={class:"flex flex-col w-48 items-start"},W$=["onClick"],K$={key:0,class:"ml-3"},G$=["onClick"],Y$={key:3,class:"dark:text-white ml-4 truncate flex justify-center items-center title-font p-2"},Q$={key:4,src:fw,alt:"Pizzaria da Nonna",class:"object-contain h-10 w-full"},X$={class:"flex-none"},J$={__name:"NewHader",props:{title:{type:String,required:!1,default:"Pizzaria da Nonna"},showBackButton:{type:Boolean,default:!1}},setup(t){const e=z(!1),n=()=>{e.value=!e.value,console.log("Menu mobile is:",e.value)},s=Io(),r=be(()=>s.items.length),i=Ft(Lk,z(null)),o=Ft(Vk,()=>{console.warn("filterByCategory function not provided to NewHeader.")}),a=Ft($k,z([])),{parentCategories:l,childCategories:c,isSelected:u}=O$(null,i,a),h=(v,m=!1)=>{let b=null;if(v)if(m){const I=c.value[v]||[];b=[v,...I.map(T=>T.id)]}else b=[v];o(b)},f=(v,m=!1)=>{h(v,m),n()};function g(){window.history.back()}return(v,m)=>(C(),O("header",D$,[p("nav",M$,[p("div",N$,[m[4]||(m[4]=p("div",{class:"text-white text-2xl font-bold"},"Pizzaria da Nonna",-1)),p("ul",L$,[p("li",{onClick:m[0]||(m[0]=b=>h(null)),class:"py-4"},[p("span",{class:le(["cursor-pointer whitespace-nowrap",te(i)===null||te(i)&&te(i).length===0?"text-yellow-300":""])},m[2]||(m[2]=[p("i",{class:"fa fa-list"},null,-1),ne(" Todas")]),2)]),(C(!0),O(xe,null,Ne(te(l),b=>{var I,T,D;return C(),O("li",{class:"group flex relative py-4",key:b.id},[p("span",{onClick:L=>h(b.id,!0),class:le(["cursor-pointer whitespace-nowrap ",te(u)([b.id,...((I=te(c)[b.id])==null?void 0:I.map(L=>L.id))||[]])?"text-yellow-300":"group-hover:text-yellow-300"])},[p("i",{class:le(b.icon)},null,2),ne(" "+U(b.name),1)],10,V$),((T=te(c)[b.id])==null?void 0:T.length)>0?(C(),O("i",$$)):X("",!0),((D=te(c)[b.id])==null?void 0:D.length)>0?(C(),O("ul",F$,[(C(!0),O(xe,null,Ne(te(c)[b.id],L=>{var M;return C(),O("li",{key:L.id,onClick:$=>h(L.id),class:le(["cursor-pointer p-1 whitespace-nowrap rounded-md text-gray-600 hover:text-red-400 hover:bg-gray-300",(M=te(i))!=null&&M.includes(L.id)?"text-red-400 font-bold bg-gray-200":"text-gray-600 hover:text-red-400 hover:bg-gray-300"])},[p("span",null,[p("i",{class:le(L.icon)},null,2),ne(" "+U(L.name),1)])],10,U$)}),128))])):X("",!0)])}),128)),m[3]||(m[3]=p("li",{class:"py-4"},[p("a",{href:"#contact",class:"hover:text-yellow-300"},"Contato")],-1))]),p("div",B$,[ae(sy,{"cart-count":r.value},null,8,["cart-count"])])])]),p("div",j$,[t.showBackButton?(C(),O("button",{key:0,type:"button",name:"goback",onClick:Tn(g,["prevent"]),class:"flex-none"},m[5]||(m[5]=[p("i",{class:"fa fa-arrow-left text-gray-400 dark:text-gray-200 text-md"},null,-1)]))):(C(),O("div",z$,[p("button",H$,[p("i",{onClick:n,class:le(["h-4 fas text-sm",[e.value?"fa-xmark":"fa-bars"]])},null,2),p("div",{class:le(["absolute group-hover:translate-x-2 transition-all duration-200 ease-in-out z-50 p-2 dark:bg-gray-700 rounded-md -top-2 -left-5 h-screen flex flex-col space-y-2",[e.value?"translate-x-0 bg-white":"-translate-x-full"]])},[p("div",{class:"flex-row-reverse flex h-4 w-full"},[p("i",{onClick:n,class:"fas text-xl fa-xmark"})]),p("ul",q$,[p("li",{onClick:m[1]||(m[1]=b=>f(null)),class:le(["flex space-x-2 items-center w-full p-2 text-sm hover:bg-gray-400/30 hover:rounded-md cursor-pointer whitespace-nowrap",[te(i)===null||te(i)&&te(i).length===0?"text-red-400 bg-gray-400/30 rounded-md":""]])},m[6]||(m[6]=[p("i",{class:"fa fa-list"},null,-1),ne(),p("span",null,"Ver tudo",-1)]),2),(C(!0),O(xe,null,Ne(te(l),b=>{var I,T;return C(),O("li",{key:b.id,class:le(["flex flex-col w-full mt-1 whitespace-nowrap group",["cursor-pointer whitespace-nowrap ",te(u)([b.id,...((I=te(c)[b.id])==null?void 0:I.map(D=>D.id))||[]])?"text-red-400 group-hover:bg-pink-400":"group-hover:text-red-400"]])},[p("span",{class:"flex space-x-1 items-center w-full p-2 text-sm hover:bg-gray-400/30 hover:rounded-md cursor-pointer whitespace-nowrap",onClick:D=>f(b.id,!0)},[p("i",{class:le(["text-xs text-gray-400",b.icon])},null,2),p("span",null,U(b.name),1)],8,W$),((T=te(c)[b.id])==null?void 0:T.length)>0?(C(),O("ul",K$,[(C(!0),O(xe,null,Ne(te(c)[b.id],D=>{var L;return C(),O("li",{class:le(["cursor-pointer p-2 whitespace-nowrap rounded-md flex justify-start mb-1 w-full",(L=te(i))!=null&&L.includes(D.id)?"text-red-400  bg-gray-400/30":"text-gray-600 dark:text-gray-100 hover:text-red-400 hover:bg-gray-400/30 "]),key:D.id,onClick:M=>f(D.id)},[p("span",null,[p("i",{class:le(["text-xs text-gray-400",D.icon])},null,2),ne(" "+U(D.name),1)])],10,G$)}),128))])):X("",!0)],2)}),128))])],2)])])),e.value?(C(),O("div",{key:2,onClick:n,class:"bg-black/50 backdrop-blur-sm w-screen h-screen z-20 top-0 left-0 absolute"})):X("",!0),t.showBackButton?(C(),O("span",Y$,U(t.title),1)):(C(),O("img",Q$)),p("div",X$,[ae(sy,{"cart-count":r.value},null,8,["cart-count"])])])]))}},Z$=Yt(J$,[["__scopeId","data-v-d090641f"]]),e3={class:"py-4 h-auto pb-16 md:pb-0 pt-20 m-auto"},Mi={__name:"AppLayout",props:{isHeaderVisible:{type:Boolean,default:!0},title:{type:String,default:"Pizzaria da Nonna"},topNavVisible:{type:Boolean,default:!1},topNavTitle:{type:String,default:"Pizzaria da Nonna"},showBackButton:{type:Boolean,default:!0},mobileMenuVisible:{type:Boolean,default:!0}},setup(t){const e=t;return(n,s)=>(C(),O("div",null,[ae(Z$,{title:t.topNavTitle,showBackButton:t.showBackButton},null,8,["title","showBackButton"]),p("main",e3,[Ip(n.$slots,"default")]),e.mobileMenuVisible?(C(),Je(r2,{key:0})):X("",!0)]))}},Fk=Zu("favorite",()=>{const t=z(JSON.parse(localStorage.getItem("favorites")||"[]"));function e(i){const o=t.value.findIndex(a=>a.id===i.id);o!==-1?t.value.splice(o,1):t.value.push(i)}function n(i){return t.value.some(o=>o.id===i)}function s(){t.value=[]}vt(t,i=>{localStorage.setItem("favorites",JSON.stringify(i))},{deep:!0});const r=be(()=>t.value.length);return{favorites:t,toggleFavorite:e,isFavorite:n,clearFavorites:s,count:r}}),t3={__name:"IconFavorite",props:{product:{type:Object}},setup(t){const e=Fk(),n=t,s=()=>{n.product?e.toggleFavorite(n.product):console.warn("Tentativa de adicionar/remover favorito sem um produto.")},r=()=>n.product&&e.isFavorite(n.product.id);return(i,o)=>(C(),O("button",{onClick:s,class:"rounded-full h-6 w-6 border border-gray-400/50"},[p("i",{class:le([r()?"fas fa-heart text-red-500 animate__animated animate__heartBeat":"fas fa-heart text-gray-400","hover:text-red-500 hover:animate-pulse"])},null,2)]))}},n3={class:"flex items-baseline gap-[2px] text-amber-300 text-[11px]"},s3=["onMouseover","onClick"],r3={key:2,class:"dark:text-gray-200 text-gray-500"},i3={key:3,class:"ml-2 text-sm text-gray-500"},o3={key:4,class:"ml-2 text-sm text-red-500"},zh="voted_products",a3={__name:"Rating",props:{productId:{type:String,required:!0},rating:{type:Number,required:!0,default:0},showTextRating:{type:Boolean,required:!1,default:!1},ratingText:{type:Number,required:!1,default:0}},setup(t){const e=t,n=z(e.rating),s=z(0),r=z(!1),i=z(!1),o=z(null);be(()=>Math.floor(n.value)),be(()=>n.value%1>=.5);const a=()=>{const u=JSON.parse(localStorage.getItem(zh)||"[]");r.value=u.includes(e.productId)},l=()=>{let u=JSON.parse(localStorage.getItem(zh)||"[]");u.includes(e.productId)||(u.push(e.productId),localStorage.setItem(zh,JSON.stringify(u))),r.value=!0},c=async u=>{var h,f;if(!(r.value||i.value)){i.value=!0,o.value=null;try{const g=await Ge.put(`/products/${e.productId}/rate`,{stars:u});n.value=g.data.rating,l(),console.log("Voto registrado com sucesso:",g.data)}catch(g){console.error("Erro ao votar:",g),o.value=((f=(h=g.response)==null?void 0:h.data)==null?void 0:f.error)||"Erro ao registrar voto."}finally{i.value=!1}}};return _t(()=>{a(),e.ratingText===0&&e.rating>0?n.value=e.rating:e.ratingText>0&&(n.value=e.ratingText)}),(u,h)=>(C(),O("div",n3,[!r.value&&!i.value?(C(),O(xe,{key:0},Ne(5,f=>p("i",{key:f,class:le(["fas fa-star cursor-pointer transition-colors duration-200",f<=s.value?"text-amber-500":"text-amber-300"]),onMouseover:g=>s.value=f,onMouseleave:h[0]||(h[0]=g=>s.value=0),onClick:g=>c(f)},null,42,s3)),64)):(C(),O(xe,{key:1},Ne(5,f=>p("i",{key:f,class:le({"fas fa-star":f<=n.value,"fas fa-star-half-alt":f===Math.floor(n.value)+1&&n.value%1>=.5,"far fa-star text-gray-400 dark:text-gray-500":f>n.value})},null,2)),64)),t.showTextRating?(C(),O("span",r3," ("+U(Number(n.value).toFixed(1))+")",1)):X("",!0),i.value?(C(),O("span",i3,"Votando...")):X("",!0),o.value?(C(),O("span",o3,U(o.value),1)):X("",!0)]))}},Uk=Yt(a3,[["__scopeId","data-v-941aface"]]),l3={class:"rounded-[8px] p-2 shadow flex flex-col justify-between bg-white dark:bg-gray-800 gap-4 border border-gray-200 dark:border-gray-700"},c3={class:"font-semibold dark:text-gray-200 truncate"},u3={class:"flex justify-between items-center"},d3={class:"flex flex-row justify-between items-baseline"},h3={class:"text-sm font-medium text-gray-800 dark:text-white"},Bk={__name:"ProductCard",props:{product:{type:Object,required:!0,default:()=>({name:"Sem nome",price:[0],image:null})}},setup(t){return(e,n)=>{const s=ko("router-link");return C(),O("div",l3,[ae(s,{to:"/produto/"+t.product.slug},{default:ye(()=>[p("div",{class:le(["h-32 rounded-md bg-cover bg-center shadow-md hover:shadow-lg object-contain",{"bg-emerald-500 dark:bg-amber-400":!t.product.img}]),style:Eo({backgroundImage:t.product.img?`url(${t.product.img})`:"none"})},null,6)]),_:1},8,["to"]),p("span",c3,U(t.product.name||"Produto sem nome"),1),p("div",u3,[ae(Uk,{"product-id":t.product.id,rating:t.product.rating,"show-text-rating":!0,"rating-text":t.product.rating},null,8,["product-id","rating","rating-text"]),ae(t3,{product:t.product},null,8,["product"])]),n[1]||(n[1]=p("div",{class:"hidden"},null,-1)),p("div",d3,[p("span",h3,U(e.$formatPrice(t.product.price[0])),1),ae(s,{to:"/produto/"+t.product.slug,class:"bg-gray-900 px-3 py-1 rounded-md shadow-md dark:shadow-gray-800 shadow-gray-400 cursor-pointer hover:bg-gray-950"},{default:ye(()=>n[0]||(n[0]=[p("i",{class:"fa fa-cart-plus text-white"},null,-1)])),_:1,__:[0]},8,["to"])])])}}},f3={},p3={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"};function g3(t,e){return C(),O("div",p3,[(C(),O(xe,null,Ne(6,n=>p("div",{key:n,class:"animate-pulse bg-white dark:bg-gray-800 p-4 rounded-xl shadow-md"},e[0]||(e[0]=[p("div",{class:"w-full h-40 bg-gray-300 dark:bg-gray-700 rounded mb-4"},null,-1),p("div",{class:"h-5 bg-gray-300 dark:bg-gray-700 rounded w-3/4 mb-2"},null,-1),p("div",{class:"h-4 bg-gray-300 dark:bg-gray-700 rounded w-1/2"},null,-1)]))),64))])}const m3=Yt(f3,[["render",g3]]),lb="cached_products",cb="products_last_updated",y3=60*60*1e3;function v3(){const t=z([]),e=z(!0),n=z(null),s=z(""),r=z("name_asc"),i=be(()=>{let l=[...t.value];if(n.value&&(l=l.filter(c=>{var u;return(u=c.categoryIds)==null?void 0:u.some(h=>n.value.includes(h))})),s.value.trim()!==""){const c=s.value.toLowerCase();l=l.filter(u=>{var h;return(h=u.name)==null?void 0:h.toLowerCase().includes(c)})}switch(r.value){case"name_asc":l.sort((c,u)=>c.name.localeCompare(u.name));break;case"name_desc":l.sort((c,u)=>u.name.localeCompare(c.name));break;case"price_asc":l.sort((c,u)=>(c.price??0)-(u.price??0));break;case"price_desc":l.sort((c,u)=>(u.price??0)-(c.price??0));break}return l}),o=l=>{n.value=l},a=async()=>{try{const{data:l}=await Ge.get("/products");localStorage.setItem(lb,JSON.stringify(l)),localStorage.setItem(cb,Date.now().toString()),t.value=l}catch(l){console.error("Erro ao buscar produtos:",l)}finally{e.value=!1}};return _t(async()=>{const l=localStorage.getItem(lb),c=localStorage.getItem(cb);if(l&&c&&Date.now()-parseInt(c,10)<y3)try{t.value=JSON.parse(l),e.value=!1}catch{await a()}else await a()}),{products:t,filteredProducts:i,loading:e,selectedCategoryIds:n,searchTerm:s,sortOption:r,filterByCategory:o}}var ub;let b3=Symbol("headlessui.useid"),_3=0;const Fg=(ub=iS)!=null?ub:function(){return Ft(b3,()=>`${++_3}`)()};function It(t){var e;if(t==null||t.value==null)return null;let n=(e=t.value.$el)!=null?e:t.value;return n instanceof Node?n:null}function Nd(t,e,...n){if(t in e){let r=e[t];return typeof r=="function"?r(...n):r}let s=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(r=>`"${r}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,Nd),s}var x3=Object.defineProperty,w3=(t,e,n)=>e in t?x3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,db=(t,e,n)=>(w3(t,typeof e!="symbol"?e+"":e,n),n);let E3=class{constructor(){db(this,"current",this.detect()),db(this,"currentId",0)}set(e){this.current!==e&&(this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}},Ug=new E3;function Bg(t){if(Ug.isServer)return null;if(t instanceof Node)return t.ownerDocument;if(t!=null&&t.hasOwnProperty("value")){let e=It(t);if(e)return e.ownerDocument}return document}let Jf=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var Zf=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t))(Zf||{}),k3=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(k3||{}),T3=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(T3||{});function jk(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(Jf)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var jg=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(jg||{});function zg(t,e=0){var n;return t===((n=Bg(t))==null?void 0:n.body)?!1:Nd(e,{0(){return t.matches(Jf)},1(){let s=t;for(;s!==null;){if(s.matches(Jf))return!0;s=s.parentElement}return!1}})}function zk(t){let e=Bg(t);Pn(()=>{e&&!zg(e.activeElement,0)&&S3(t)})}var I3=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(I3||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function S3(t){t==null||t.focus({preventScroll:!0})}let A3=["textarea","input"].join(",");function C3(t){var e,n;return(n=(e=t==null?void 0:t.matches)==null?void 0:e.call(t,A3))!=null?n:!1}function Hk(t,e=n=>n){return t.slice().sort((n,s)=>{let r=e(n),i=e(s);if(r===null||i===null)return 0;let o=r.compareDocumentPosition(i);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function P3(t,e){return R3(jk(),e,{relativeTo:t})}function R3(t,e,{sorted:n=!0,relativeTo:s=null,skipElements:r=[]}={}){var i;let o=(i=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t==null?void 0:t.ownerDocument)!=null?i:document,a=Array.isArray(t)?n?Hk(t):t:jk(t);r.length>0&&a.length>1&&(a=a.filter(v=>!r.includes(v))),s=s??o.activeElement;let l=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,a.indexOf(s))-1;if(e&4)return Math.max(0,a.indexOf(s))+1;if(e&8)return a.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=e&32?{preventScroll:!0}:{},h=0,f=a.length,g;do{if(h>=f||h+f<=0)return 0;let v=c+h;if(e&16)v=(v+f)%f;else{if(v<0)return 3;if(v>=f)return 1}g=a[v],g==null||g.focus(u),h+=l}while(g!==o.activeElement);return e&6&&C3(g)&&g.select(),2}function O3(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function D3(){return/Android/gi.test(window.navigator.userAgent)}function M3(){return O3()||D3()}function cc(t,e,n){Ug.isServer||wl(s=>{document.addEventListener(t,e,n),s(()=>document.removeEventListener(t,e,n))})}function N3(t,e,n){Ug.isServer||wl(s=>{window.addEventListener(t,e,n),s(()=>window.removeEventListener(t,e,n))})}function L3(t,e,n=be(()=>!0)){function s(i,o){if(!n.value||i.defaultPrevented)return;let a=o(i);if(a===null||!a.getRootNode().contains(a))return;let l=function c(u){return typeof u=="function"?c(u()):Array.isArray(u)||u instanceof Set?u:[u]}(t);for(let c of l){if(c===null)continue;let u=c instanceof HTMLElement?c:It(c);if(u!=null&&u.contains(a)||i.composed&&i.composedPath().includes(u))return}return!zg(a,jg.Loose)&&a.tabIndex!==-1&&i.preventDefault(),e(i,a)}let r=z(null);cc("pointerdown",i=>{var o,a;n.value&&(r.value=((a=(o=i.composedPath)==null?void 0:o.call(i))==null?void 0:a[0])||i.target)},!0),cc("mousedown",i=>{var o,a;n.value&&(r.value=((a=(o=i.composedPath)==null?void 0:o.call(i))==null?void 0:a[0])||i.target)},!0),cc("click",i=>{M3()||r.value&&(s(i,()=>r.value),r.value=null)},!0),cc("touchend",i=>s(i,()=>i.target instanceof HTMLElement?i.target:null),!0),N3("blur",i=>s(i,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function hb(t,e){if(t)return t;let n=e??"button";if(typeof n=="string"&&n.toLowerCase()==="button")return"button"}function V3(t,e){let n=z(hb(t.value.type,t.value.as));return _t(()=>{n.value=hb(t.value.type,t.value.as)}),wl(()=>{var s;n.value||It(e)&&It(e)instanceof HTMLButtonElement&&!((s=It(e))!=null&&s.hasAttribute("type"))&&(n.value="button")}),n}function fb(t){return[t.screenX,t.screenY]}function $3(){let t=z([-1,-1]);return{wasMoved(e){let n=fb(e);return t.value[0]===n[0]&&t.value[1]===n[1]?!1:(t.value=n,!0)},update(e){t.value=fb(e)}}}function F3({container:t,accept:e,walk:n,enabled:s}){wl(()=>{let r=t.value;if(!r||s!==void 0&&!s.value)return;let i=Bg(t);if(!i)return;let o=Object.assign(l=>e(l),{acceptNode:e}),a=i.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,o,!1);for(;a.nextNode();)n(a.currentNode)})}var ep=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(ep||{}),U3=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(U3||{});function Ld({visible:t=!0,features:e=0,ourProps:n,theirProps:s,...r}){var i;let o=Wk(s,n),a=Object.assign(r,{props:o});if(t||e&2&&o.static)return Hh(a);if(e&1){let l=(i=o.unmount)==null||i?0:1;return Nd(l,{0(){return null},1(){return Hh({...r,props:{...o,hidden:!0,style:{display:"none"}}})}})}return Hh(a)}function Hh({props:t,attrs:e,slots:n,slot:s,name:r}){var i,o;let{as:a,...l}=B3(t,["unmount","static"]),c=(i=n.default)==null?void 0:i.call(n,s),u={};if(s){let h=!1,f=[];for(let[g,v]of Object.entries(s))typeof v=="boolean"&&(h=!0),v===!0&&f.push(g);h&&(u["data-headlessui-state"]=f.join(" "))}if(a==="template"){if(c=qk(c??[]),Object.keys(l).length>0||Object.keys(e).length>0){let[h,...f]=c??[];if(!j3(h)||f.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${r} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(l).concat(Object.keys(e)).map(m=>m.trim()).filter((m,b,I)=>I.indexOf(m)===b).sort((m,b)=>m.localeCompare(b)).map(m=>`  - ${m}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(m=>`  - ${m}`).join(`
`)].join(`
`));let g=Wk((o=h.props)!=null?o:{},l,u),v=zs(h,g,!0);for(let m in g)m.startsWith("on")&&(v.props||(v.props={}),v.props[m]=g[m]);return v}return Array.isArray(c)&&c.length===1?c[0]:c}return mi(a,Object.assign({},l,u),{default:()=>c})}function qk(t){return t.flatMap(e=>e.type===xe?qk(e.children):[e])}function Wk(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let s of t)for(let r in s)r.startsWith("on")&&typeof s[r]=="function"?(n[r]!=null||(n[r]=[]),n[r].push(s[r])):e[r]=s[r];if(e.disabled||e["aria-disabled"])return Object.assign(e,Object.fromEntries(Object.keys(n).map(s=>[s,void 0])));for(let s in n)Object.assign(e,{[s](r,...i){let o=n[s];for(let a of o){if(r instanceof Event&&r.defaultPrevented)return;a(r,...i)}}});return e}function B3(t,e=[]){let n=Object.assign({},t);for(let s of e)s in n&&delete n[s];return n}function j3(t){return t==null?!1:typeof t.type=="string"||typeof t.type=="object"||typeof t.type=="function"}let Kk=Symbol("Context");var ul=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(ul||{});function z3(){return Ft(Kk,null)}function H3(t){Vs(Kk,t)}var Ht=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(Ht||{});function q3(t){throw new Error("Unexpected object: "+t)}var Cn=(t=>(t[t.First=0]="First",t[t.Previous=1]="Previous",t[t.Next=2]="Next",t[t.Last=3]="Last",t[t.Specific=4]="Specific",t[t.Nothing=5]="Nothing",t))(Cn||{});function W3(t,e){let n=e.resolveItems();if(n.length<=0)return null;let s=e.resolveActiveIndex(),r=s??-1;switch(t.focus){case 0:{for(let i=0;i<n.length;++i)if(!e.resolveDisabled(n[i],i,n))return i;return s}case 1:{r===-1&&(r=n.length);for(let i=r-1;i>=0;--i)if(!e.resolveDisabled(n[i],i,n))return i;return s}case 2:{for(let i=r+1;i<n.length;++i)if(!e.resolveDisabled(n[i],i,n))return i;return s}case 3:{for(let i=n.length-1;i>=0;--i)if(!e.resolveDisabled(n[i],i,n))return i;return s}case 4:{for(let i=0;i<n.length;++i)if(e.resolveId(n[i],i,n)===t.id)return i;return s}case 5:return null;default:q3(t)}}let pb=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function gb(t){var e,n;let s=(e=t.innerText)!=null?e:"",r=t.cloneNode(!0);if(!(r instanceof HTMLElement))return s;let i=!1;for(let a of r.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))a.remove(),i=!0;let o=i?(n=r.innerText)!=null?n:"":s;return pb.test(o)&&(o=o.replace(pb,"")),o}function K3(t){let e=t.getAttribute("aria-label");if(typeof e=="string")return e.trim();let n=t.getAttribute("aria-labelledby");if(n){let s=n.split(" ").map(r=>{let i=document.getElementById(r);if(i){let o=i.getAttribute("aria-label");return typeof o=="string"?o.trim():gb(i).trim()}return null}).filter(Boolean);if(s.length>0)return s.join(", ")}return gb(t).trim()}function G3(t){let e=z(""),n=z("");return()=>{let s=It(t);if(!s)return"";let r=s.innerText;if(e.value===r)return n.value;let i=K3(s).trim().toLowerCase();return e.value=r,n.value=i,i}}var Y3=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(Y3||{}),Q3=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(Q3||{});function X3(t){requestAnimationFrame(()=>requestAnimationFrame(t))}let Gk=Symbol("MenuContext");function Vd(t){let e=Ft(Gk,null);if(e===null){let n=new Error(`<${t} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Vd),n}return e}let J3=Nr({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(t,{slots:e,attrs:n}){let s=z(1),r=z(null),i=z(null),o=z([]),a=z(""),l=z(null),c=z(1);function u(f=g=>g){let g=l.value!==null?o.value[l.value]:null,v=Hk(f(o.value.slice()),b=>It(b.dataRef.domRef)),m=g?v.indexOf(g):null;return m===-1&&(m=null),{items:v,activeItemIndex:m}}let h={menuState:s,buttonRef:r,itemsRef:i,items:o,searchQuery:a,activeItemIndex:l,activationTrigger:c,closeMenu:()=>{s.value=1,l.value=null},openMenu:()=>s.value=0,goToItem(f,g,v){let m=u(),b=W3(f===Cn.Specific?{focus:Cn.Specific,id:g}:{focus:f},{resolveItems:()=>m.items,resolveActiveIndex:()=>m.activeItemIndex,resolveId:I=>I.id,resolveDisabled:I=>I.dataRef.disabled});a.value="",l.value=b,c.value=v??1,o.value=m.items},search(f){let g=a.value!==""?0:1;a.value+=f.toLowerCase();let v=(l.value!==null?o.value.slice(l.value+g).concat(o.value.slice(0,l.value+g)):o.value).find(b=>b.dataRef.textValue.startsWith(a.value)&&!b.dataRef.disabled),m=v?o.value.indexOf(v):-1;m===-1||m===l.value||(l.value=m,c.value=1)},clearSearch(){a.value=""},registerItem(f,g){let v=u(m=>[...m,{id:f,dataRef:g}]);o.value=v.items,l.value=v.activeItemIndex,c.value=1},unregisterItem(f){let g=u(v=>{let m=v.findIndex(b=>b.id===f);return m!==-1&&v.splice(m,1),v});o.value=g.items,l.value=g.activeItemIndex,c.value=1}};return L3([r,i],(f,g)=>{var v;h.closeMenu(),zg(g,jg.Loose)||(f.preventDefault(),(v=It(r))==null||v.focus())},be(()=>s.value===0)),Vs(Gk,h),H3(be(()=>Nd(s.value,{0:ul.Open,1:ul.Closed}))),()=>{let f={open:s.value===0,close:h.closeMenu};return Ld({ourProps:{},theirProps:t,slot:f,slots:e,attrs:n,name:"Menu"})}}}),Z3=Nr({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(t,{attrs:e,slots:n,expose:s}){var r;let i=(r=t.id)!=null?r:`headlessui-menu-button-${Fg()}`,o=Vd("MenuButton");s({el:o.buttonRef,$el:o.buttonRef});function a(h){switch(h.key){case Ht.Space:case Ht.Enter:case Ht.ArrowDown:h.preventDefault(),h.stopPropagation(),o.openMenu(),Pn(()=>{var f;(f=It(o.itemsRef))==null||f.focus({preventScroll:!0}),o.goToItem(Cn.First)});break;case Ht.ArrowUp:h.preventDefault(),h.stopPropagation(),o.openMenu(),Pn(()=>{var f;(f=It(o.itemsRef))==null||f.focus({preventScroll:!0}),o.goToItem(Cn.Last)});break}}function l(h){switch(h.key){case Ht.Space:h.preventDefault();break}}function c(h){t.disabled||(o.menuState.value===0?(o.closeMenu(),Pn(()=>{var f;return(f=It(o.buttonRef))==null?void 0:f.focus({preventScroll:!0})})):(h.preventDefault(),o.openMenu(),X3(()=>{var f;return(f=It(o.itemsRef))==null?void 0:f.focus({preventScroll:!0})})))}let u=V3(be(()=>({as:t.as,type:e.type})),o.buttonRef);return()=>{var h;let f={open:o.menuState.value===0},{...g}=t,v={ref:o.buttonRef,id:i,type:u.value,"aria-haspopup":"menu","aria-controls":(h=It(o.itemsRef))==null?void 0:h.id,"aria-expanded":o.menuState.value===0,onKeydown:a,onKeyup:l,onClick:c};return Ld({ourProps:v,theirProps:g,slot:f,attrs:e,slots:n,name:"MenuButton"})}}}),e5=Nr({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(t,{attrs:e,slots:n,expose:s}){var r;let i=(r=t.id)!=null?r:`headlessui-menu-items-${Fg()}`,o=Vd("MenuItems"),a=z(null);s({el:o.itemsRef,$el:o.itemsRef}),F3({container:be(()=>It(o.itemsRef)),enabled:be(()=>o.menuState.value===0),accept(f){return f.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:f.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(f){f.setAttribute("role","none")}});function l(f){var g;switch(a.value&&clearTimeout(a.value),f.key){case Ht.Space:if(o.searchQuery.value!=="")return f.preventDefault(),f.stopPropagation(),o.search(f.key);case Ht.Enter:if(f.preventDefault(),f.stopPropagation(),o.activeItemIndex.value!==null){let v=o.items.value[o.activeItemIndex.value];(g=It(v.dataRef.domRef))==null||g.click()}o.closeMenu(),zk(It(o.buttonRef));break;case Ht.ArrowDown:return f.preventDefault(),f.stopPropagation(),o.goToItem(Cn.Next);case Ht.ArrowUp:return f.preventDefault(),f.stopPropagation(),o.goToItem(Cn.Previous);case Ht.Home:case Ht.PageUp:return f.preventDefault(),f.stopPropagation(),o.goToItem(Cn.First);case Ht.End:case Ht.PageDown:return f.preventDefault(),f.stopPropagation(),o.goToItem(Cn.Last);case Ht.Escape:f.preventDefault(),f.stopPropagation(),o.closeMenu(),Pn(()=>{var v;return(v=It(o.buttonRef))==null?void 0:v.focus({preventScroll:!0})});break;case Ht.Tab:f.preventDefault(),f.stopPropagation(),o.closeMenu(),Pn(()=>P3(It(o.buttonRef),f.shiftKey?Zf.Previous:Zf.Next));break;default:f.key.length===1&&(o.search(f.key),a.value=setTimeout(()=>o.clearSearch(),350));break}}function c(f){switch(f.key){case Ht.Space:f.preventDefault();break}}let u=z3(),h=be(()=>u!==null?(u.value&ul.Open)===ul.Open:o.menuState.value===0);return()=>{var f,g;let v={open:o.menuState.value===0},{...m}=t,b={"aria-activedescendant":o.activeItemIndex.value===null||(f=o.items.value[o.activeItemIndex.value])==null?void 0:f.id,"aria-labelledby":(g=It(o.buttonRef))==null?void 0:g.id,id:i,onKeydown:l,onKeyup:c,role:"menu",tabIndex:0,ref:o.itemsRef};return Ld({ourProps:b,theirProps:m,slot:v,attrs:e,slots:n,features:ep.RenderStrategy|ep.Static,visible:h.value,name:"MenuItems"})}}}),uc=Nr({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(t,{slots:e,attrs:n,expose:s}){var r;let i=(r=t.id)!=null?r:`headlessui-menu-item-${Fg()}`,o=Vd("MenuItem"),a=z(null);s({el:a,$el:a});let l=be(()=>o.activeItemIndex.value!==null?o.items.value[o.activeItemIndex.value].id===i:!1),c=G3(a),u=be(()=>({disabled:t.disabled,get textValue(){return c()},domRef:a}));_t(()=>o.registerItem(i,u)),Ai(()=>o.unregisterItem(i)),wl(()=>{o.menuState.value===0&&l.value&&o.activationTrigger.value!==0&&Pn(()=>{var I,T;return(T=(I=It(a))==null?void 0:I.scrollIntoView)==null?void 0:T.call(I,{block:"nearest"})})});function h(I){if(t.disabled)return I.preventDefault();o.closeMenu(),zk(It(o.buttonRef))}function f(){if(t.disabled)return o.goToItem(Cn.Nothing);o.goToItem(Cn.Specific,i)}let g=$3();function v(I){g.update(I)}function m(I){g.wasMoved(I)&&(t.disabled||l.value||o.goToItem(Cn.Specific,i,0))}function b(I){g.wasMoved(I)&&(t.disabled||l.value&&o.goToItem(Cn.Nothing))}return()=>{let{disabled:I,...T}=t,D={active:l.value,disabled:I,close:o.closeMenu};return Ld({ourProps:{id:i,ref:a,role:"menuitem",tabIndex:I===!0?void 0:-1,"aria-disabled":I===!0?!0:void 0,onClick:h,onFocus:f,onPointerenter:v,onMouseenter:v,onPointermove:m,onMousemove:m,onPointerleave:b,onMouseleave:b},theirProps:{...n,...T},slot:D,attrs:n,slots:e,name:"MenuItem"})}}});const t5={class:"mx-auto max-w-7xl px-0 lg:px-8 relative"},n5={class:"flex items-center justify-end space-x-4 bg-white dark:bg-gray-900 pb-2 mt-2 pt-2 sticky top-14 px-2"},s5={class:"w-10 text-right"},r5={class:"px-1 py-1"},i5={for:"az"},o5=["active"],a5={for:"za"},l5=["active"],c5={class:"px-1 py-1"},u5={for:"minor_price"},d5=["active"],h5={for:"hight_price"},f5=["active"],p5={key:1,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2 mt-5"},g5={key:0,class:"col-span-6 flex items-center justify-center"},m5={__name:"ProdutListPage",setup(t){const{products:e,filteredProducts:n,loading:s,selectedCategoryIds:r,filterByCategory:i,sortOption:o,searchTerm:a}=v3();return Vs(Lk,r),Vs(Vk,i),Vs($k,e),(l,c)=>(C(),Je(Mi,{"show-back-button":!1},{default:ye(()=>[p("div",t5,[p("div",n5,[c[10]||(c[10]=p("div",{class:"absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none"},[p("i",{class:"fa fa-search h-4 w-4 text-gray-400","aria-hidden":"true"})],-1)),Ie(p("input",{type:"text","onUpdate:modelValue":c[0]||(c[0]=u=>dt(a)?a.value=u:null),placeholder:"Buscar produtos...",name:"search",id:"search",class:"block w-full p-2 ps-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},null,512),[[Ze,te(a)]]),p("div",s5,[ae(te(J3),{as:"div",class:"relative inline-block text-left group"},{default:ye(()=>[p("div",null,[ae(te(Z3),{class:"inline-flex space-x-1 w-full items-center bg-white dark:bg-gray-800 justify-center rounded-md shadow-md p-2 text-sm font-medium dark:text-white group-hover:bg-black/10 focus:outline-none focus-visible:ring-2 focus-visible:ring-white/75"},{default:ye(()=>c[5]||(c[5]=[p("i",{class:"fa-solid fa-arrow-up-wide-short"},null,-1)])),_:1,__:[5]})]),ae(To,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:ye(()=>[ae(te(e5),{class:"absolute right-0 mt-2 w-56 origin-top-right divide-y divide-gray-100 dark:divide-gray-900 rounded-md bg-white dark:bg-gray-800 shadow-lg ring-1 ring-black/5 focus:outline-none"},{default:ye(()=>[p("div",r5,[ae(te(uc),null,{default:ye(({active:u,selected:h})=>[p("label",i5,[p("span",{class:le([u?"bg-violet-500 text-white":"text-gray-900 dark:text-white","group flex w-full items-center rounded-md px-2 py-2 text-sm"])},[Ie(p("input",{type:"radio",name:"nama_az",id:"az",value:"name_asc",class:"hidden","onUpdate:modelValue":c[1]||(c[1]=f=>dt(o)?o.value=f:null)},null,512),[[Os,te(o)]]),p("i",{active:u,class:"mr-2 h-5 w-5 text-violet-400 fa fa-arrow-down-a-z","aria-hidden":"true"},null,8,o5),c[6]||(c[6]=ne(" Nome (A-Z) "))],2)])]),_:1}),ae(te(uc),null,{default:ye(({active:u})=>[p("label",a5,[p("span",{class:le([u?"bg-violet-500 text-white":"text-gray-900 dark:text-white","group flex w-full items-center rounded-md px-2 py-2 text-sm"])},[Ie(p("input",{type:"radio",name:"nama_za",id:"za",value:"name_desc",class:"hidden","onUpdate:modelValue":c[2]||(c[2]=h=>dt(o)?o.value=h:null)},null,512),[[Os,te(o)]]),p("i",{active:u,class:"mr-2 h-5 w-5 text-violet-400 fa fa-arrow-up-z-a","aria-hidden":"true"},null,8,l5),c[7]||(c[7]=ne(" Nome (Z-A) "))],2)])]),_:1})]),p("div",c5,[ae(te(uc),null,{default:ye(({active:u})=>[p("label",u5,[Ie(p("input",{type:"radio",name:"minor_price",id:"minor_price",value:"price_asc",class:"hidden","onUpdate:modelValue":c[3]||(c[3]=h=>dt(o)?o.value=h:null)},null,512),[[Os,te(o)]]),p("span",{class:le([u?"bg-violet-500 text-white":"text-gray-900 dark:text-white","group flex w-full items-center rounded-md px-2 py-2 text-sm"])},[p("i",{active:u,class:"mr-2 h-5 w-5 text-violet-400 fa fa-arrow-down-1-9","aria-hidden":"true"},null,8,d5),c[8]||(c[8]=ne(" Menor preço "))],2)])]),_:1}),ae(te(uc),null,{default:ye(({active:u})=>[p("label",h5,[Ie(p("input",{type:"radio",name:"hight_price",id:"hight_price",value:"price_desc",class:"hidden","onUpdate:modelValue":c[4]||(c[4]=h=>dt(o)?o.value=h:null)},null,512),[[Os,te(o)]]),p("span",{class:le([u?"bg-violet-500 text-white":"text-gray-900 dark:text-white","group flex w-full items-center rounded-md px-2 py-2 text-sm"])},[p("i",{active:u,class:"mr-2 h-5 w-5 text-violet-400 fa fa-arrow-up-9-1","aria-hidden":"true"},null,8,f5),c[9]||(c[9]=ne(" Maior preço "))],2)])]),_:1})])]),_:1})]),_:1})]),_:1})])]),te(s)?(C(),Je(m3,{key:0})):(C(),O("div",p5,[(C(!0),O(xe,null,Ne(te(n),u=>(C(),Je(Bk,{key:u.id,product:u},null,8,["product"]))),128)),te(n).length==0?(C(),O("div",g5," Não há produtos para esta categoria ")):X("",!0)]))])]),_:1}))}},y5={class:"container mx-auto p-4"},v5={key:0,class:"text-gray-500 dark:text-gray-400"},b5={key:1,class:"grid grid-cols-1 gap-4"},_5={class:"flex-grow"},x5={key:0,class:"text-gray-500 dark:text-gray-400 text-sm"},w5={key:1,class:"text-gray-500 dark:text-gray-400 text-sm"},E5={class:"text-gray-500 dark:text-gray-400 text-xs"},k5={class:"flex items-center mt-2"},T5={class:"flex items-center border rounded-full shadow-lg dark:border-gray-700 border-gray-300"},I5=["onClick"],S5={class:"w-8 text-center text-gray-700 dark:text-gray-300"},A5=["onClick"],C5=["onClick"],P5={key:2,class:"mt-8 border-t pt-4 dark:border-gray-700 border-gray-300"},R5={class:"flex justify-between items-center dark:text-gray-200"},O5={class:"text-xl font-semibold"},D5={__name:"Cart",setup(t){const e=Io(),n=Dp(),s=be(()=>e.items),r=be(()=>e.items.length),i=be(()=>e.total),o=g=>{e.removeItem(g)},a=(g,v)=>{if(v>=1){const m=e.items.findIndex(b=>b.id===g.id&&b.size===g.size&&f(b.extras,g.extras));if(m!==-1){const b=[...e.items];b[m].quantity=v,e.items=b}else console.warn("Item não encontrado no carrinho para atualização:",g)}},l=g=>{g.quantity>1&&a(g,g.quantity-1)},c=g=>{a(g,g.quantity+1)},u=()=>{console.log("Finalizar Pedido!"),n.push("/checkout")},h=g=>{let v=g.id;return g.size&&(v+=`-${g.size}`),g.extras&&g.extras.length>0&&(v+=`-${g.extras.map(m=>m.name).join("-")}`),v},f=(g,v)=>{if(g.length!==v.length)return!1;const m=[...g].sort((I,T)=>I.name.localeCompare(T.name)),b=[...v].sort((I,T)=>I.name.localeCompare(T.name));return m.every((I,T)=>I.name===b[T].name&&I.price===b[T].price)};return(g,v)=>{const m=ko("router-link");return C(),Je(Mi,{"is-header-visible":!1,"top-nav-visible":!0,"top-nav-title":"Carrinho"},{default:ye(()=>[p("div",y5,[r.value===0?(C(),O("div",v5," Seu carrinho está vazio. Adicione deliciosos itens ao seu pedido! ")):(C(),O("div",b5,[(C(!0),O(xe,null,Ne(s.value,b=>(C(),O("div",{key:h(b),class:"flex items-top border rounded-md p-4 dark:bg-gray-800 dark:border-gray-700 border-gray-300"},[ae(m,{to:"/produto/"+b.slug,class:"w-24 h-24 mr-2"},{default:ye(()=>[p("div",{class:le(["w-16 h-16 rounded-md bg-cover bg-center shadow-md",{"bg-emerald-500 dark:bg-amber-400":!b.img}]),style:Eo({backgroundImage:b.img?`url(${b.img})`:"none"})},null,6)]),_:2},1032,["to"]),p("div",_5,[ae(m,{to:"/produto/"+b.slug,class:"font-semibold dark:text-gray-200 hover:underline"},{default:ye(()=>[ne(U(b.name||"Item sem nome"),1)]),_:2},1032,["to"]),b.size?(C(),O("div",x5," Tam: "+U(b.size),1)):X("",!0),b.extras&&b.extras.length>0?(C(),O("div",w5,[p("small",null," Extras: "+U(b.extras.map(I=>I.name).join(", ")),1)])):X("",!0),p("p",E5," Preço Unitário: "+U(g.$formatPrice(b.price+b.extras.reduce((I,T)=>I+T.price,0))),1),p("div",k5,[v[2]||(v[2]=p("label",{for:"quantity",class:"mr-2 text-sm text-gray-700 dark:text-gray-300 sr-only"}," Quantidade: ",-1)),p("div",T5,[p("button",{onClick:I=>l(b),class:"px-2 py-1 text-gray-700 dark:text-gray-300 hover:bg-gray-300 rounded-l-full dark:hover:bg-gray-700 focus:outline-none"},v[0]||(v[0]=[p("i",{class:"fa fa-minus"},null,-1)]),8,I5),p("span",S5,U(b.quantity),1),p("button",{onClick:I=>c(b),class:"px-2 py-1 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-700 focus:outline-none rounded-r-full"},v[1]||(v[1]=[p("i",{class:"fa fa-plus"},null,-1)]),8,A5)])])]),p("button",{onClick:I=>o(b),class:"h-10 w-10 inline-flex items-center justify-center bg-transparent transition-all duration-300 cursor-pointer rounded-full hover:bg-red-500/20 text-red-500 relative group"},v[3]||(v[3]=[p("i",{class:"fa fa-trash"},null,-1),p("span",{class:"text-xs text-red-500 absolute -bottom-4 hidden group-hover:flex transition-all duration-300"},[p("small",null,"Excluir")],-1)]),8,C5)]))),128))])),r.value>0?(C(),O("div",P5,[p("div",R5,[v[4]||(v[4]=p("span",{class:"font-bold"},"Total do Pedido:",-1)),p("span",O5,U(g.$formatPrice(i.value)),1)]),p("button",{class:"bg-emerald-500 container hover:bg-emerald-600 text-white font-semibold py-2 px-4 rounded-md shadow-md mt-4",onClick:u}," Finalizar Pedido ")])):X("",!0)])]),_:1})}}},M5=Yt(D5,[["__scopeId","data-v-d7ffcfb0"]]),N5={},L5={class:"animate-pulse space-y-4 max-w-2xl mx-auto p-4"};function V5(t,e){return C(),O("div",L5,e[0]||(e[0]=[iu('<div class="w-full h-56 bg-gray-300 dark:bg-gray-700 rounded-2xl"></div><div class="h-6 bg-gray-300 dark:bg-gray-700 rounded w-3/4"></div><div class="h-4 bg-gray-300 dark:bg-gray-700 rounded w-full"></div><div class="h-4 bg-gray-300 dark:bg-gray-700 rounded w-5/6"></div><div class="h-10 bg-gray-300 dark:bg-gray-700 rounded w-36"></div><div class="space-y-2"><div class="h-4 bg-gray-300 dark:bg-gray-700 rounded w-1/2"></div><div class="flex gap-2"><div class="h-10 bg-gray-300 dark:bg-gray-700 rounded w-full"></div><div class="h-10 bg-gray-300 dark:bg-gray-700 rounded w-full"></div></div></div><div class="h-10 bg-gray-300 dark:bg-gray-700 rounded w-full"></div>',7)]))}const $5=Yt(N5,[["render",V5]]),F5={class:"p-4 max-w-2xl mx-auto"},U5={key:1},B5={class:"relative"},j5=["src"],z5={class:"flex items-center justify-between mb-4"},H5={class:"text-xl font-semibold"},q5={class:"text-green-600 font-bold text-lg"},W5={class:"text-gray-600 dark:text-gray-300 mb-6 leading-relaxed"},K5={class:"mb-6"},G5={class:"flex items-center gap-4 w-36"},Y5={class:"text-xl font-medium w-8 text-center"},Q5={key:0,class:"mb-6"},X5={class:"font-medium mb-2"},J5={class:"flex gap-2 flex-wrap"},Z5=["onClick"],eF={class:"font-semibold"},tF={class:"text-sm"},nF={key:1,class:"mb-6"},sF={class:"flex flex-wrap gap-2"},rF=["for"],iF=["id","value"],oF={class:"font-medium"},aF={class:"text-xs text-red-500"},lF={key:0,class:"m-4 fixed flex justify-center items-center space-x-2 top-4 transform bg-green-600 text-white px-4 py-2 rounded shadow-lg z-50 border-l-4 border-l-green-800"},cF="cached_products",uF={__name:"ProductDetail",setup(t){const e=hw(),n=Dp(),s=Io();be(()=>s.items.length);const r=z(null),i=z([]),o=z(0),a=z([]),l=z(1),c=z(!0),u=z(!1);function h(){l.value<10&&l.value++}function f(){l.value>1&&l.value--}async function g(m){try{const{data:b}=await Ge.get(`/products/${m}`);r.value=b,i.value=b.extras||[]}catch(b){console.error("Erro ao carregar produto da API:",b),n.push("/")}finally{c.value=!1}}_t(async()=>{const m=localStorage.getItem(cF),b=m?JSON.parse(m):[],I=e.params.slug,T=b.find(D=>D.slug===I);T?(r.value=T,i.value=T.extras||[],c.value=!1,g(I)):await g(I)});function v(){var T,D;if(!r.value)return;const m=((T=r.value.price)==null?void 0:T[o.value])||0,b=a.value.reduce((L,M)=>L+M.price,0),I=(m+b)*l.value;s.addItem({id:r.value.id,name:r.value.name,quantity:l.value,size:(D=r.value.sizes)==null?void 0:D[o.value],price:m,extras:a.value,subtotal:I,img:r.value.img,slug:r.value.slug}),u.value=!0,setTimeout(()=>u.value=!1,3e3)}return(m,b)=>{var I;return C(),O("div",null,[ae(Mi,{"show-back-button":!0,"top-nav-title":(I=r.value)==null?void 0:I.name,"mobile-menu-visible":!1},{default:ye(()=>{var T,D,L,M,$,E,_;return[p("div",F5,[c.value?(C(),Je($5,{key:0})):(C(),O("div",U5,[p("div",B5,[r.value?(C(),Je(Uk,{key:0,"product-id":r.value.id,rating:r.value.rating||0,"show-text-rating":!0,"rating-text":r.value.rating||0,class:"mb-6 absolute bottom-0 right-5"},null,8,["product-id","rating","rating-text"])):X("",!0),p("img",{src:(T=r.value)==null?void 0:T.img,alt:"Imagem do produto",class:"w-full lg:h-60 object-cover mb-6 rounded-md shadow-lg"},null,8,j5)]),p("div",z5,[p("h1",H5,U((D=r.value)==null?void 0:D.name),1),p("span",q5,U(m.$formatPrice((M=(L=r.value)==null?void 0:L.price)==null?void 0:M[o.value])),1)]),p("p",W5,U(($=r.value)==null?void 0:$.description),1),p("div",K5,[b[1]||(b[1]=p("h4",{class:"font-medium mb-2"},"Quantidade",-1)),p("div",G5,[p("button",{onClick:f,class:"w-10 h-10 bg-gray-200 dark:bg-gray-800 rounded-md text-xl font-bold hover:bg-gray-300"}," - "),p("span",Y5,U(l.value),1),p("button",{onClick:h,class:"w-10 h-10 bg-gray-200 dark:bg-gray-800 rounded-md text-xl font-bold hover:bg-gray-300"}," + ")])]),(_=(E=r.value)==null?void 0:E.sizes)!=null&&_.length?(C(),O("div",Q5,[p("h4",X5," Tamanho"+U(r.value.sizes.length>1?"s":""),1),p("div",J5,[(C(!0),O(xe,null,Ne(r.value.sizes,(w,A)=>{var k;return C(),O("div",{key:A,onClick:S=>o.value=A,class:le(["cursor-pointer border rounded-md px-4 py-2 shadow-sm transition",o.value===A?"bg-red-600 text-white border-red-700":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600"])},[p("div",eF,U(w),1),p("div",tF,U(m.$formatPrice((k=r.value.price)==null?void 0:k[A])),1)],10,Z5)}),128))])])):X("",!0),i.value.length?(C(),O("div",nF,[b[2]||(b[2]=p("h4",{class:"font-medium mb-2"},"Adicionais",-1)),p("div",sF,[(C(!0),O(xe,null,Ne(i.value,(w,A)=>(C(),O("label",{key:A,for:"extra-"+A,class:le(["cursor-pointer border rounded-md px-4 py-2 flex flex-col items-center transition text-sm bg-white dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700",{"border-blue-600 dark:border-blue-400 text-blue-600 dark:text-blue-400":a.value.includes(w)}])},[Ie(p("input",{class:"hidden",type:"checkbox",id:"extra-"+A,value:w,"onUpdate:modelValue":b[0]||(b[0]=k=>a.value=k)},null,8,iF),[[lu,a.value]]),p("span",oF,U(w.name),1),p("span",aF,U(m.$formatPrice(w.price)),1)],10,rF))),128))])])):X("",!0),p("button",{onClick:v,class:"w-full bg-red-600 text-white font-semibold py-3 rounded-lg hover:bg-red-700 transition-all duration-200"}," Adicionar ao Carrinho "),ae(To,{name:"fade"},{default:ye(()=>[u.value?(C(),O("div",lF,b[3]||(b[3]=[p("i",{class:"fa-regular fa-circle-check text-green-800","aria-hidden":"true"},null,-1),p("span",null,"Produto adicionado ao carrinho!",-1)]))):X("",!0)]),_:1})]))])]}),_:1},8,["top-nav-title"])])}}},dF={class:"container mx-auto p-4"},hF={class:"text-2xl font-semibold mb-4 dark:text-gray-200"},fF={key:0,class:"text-gray-500 dark:text-gray-400"},pF={key:1,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},gF={__name:"Favorites",setup(t){const e=Fk(),n=be(()=>e.favorites),s=be(()=>n.value.length);return(r,i)=>(C(),Je(Mi,{"top-nav-visible":!0,"is-header-visible":!1,"top-nav-title":"Favoritos"},{default:ye(()=>[p("div",dF,[p("h2",hF," Meus Favoritos ("+U(s.value)+") ",1),s.value===0?(C(),O("div",fF," Sua lista de favoritos está vazia. Adicione produtos clicando no ícone de coração! ")):(C(),O("div",pF,[(C(!0),O(xe,null,Ne(n.value,o=>(C(),Je(Bk,{key:o.id,product:o},null,8,["product"]))),128))]))])]),_:1}))}},mF=Yt(gF,[["__scopeId","data-v-702433d7"]]),yF={class:"container mx-auto p-4 max-w-md bg-white shadow-lg rounded-lg mt-8"},vF={class:"mb-6"},bF={key:0,class:"w-5 h-5 text-green-700",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},_F={key:1,class:"w-5 h-5 text-red-700",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},xF={key:2,class:"w-5 h-5 text-blue-700 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},wF={class:"mb-6"},EF=["value"],kF={key:0,class:"text-green-600 text-xs mt-1"},TF=["disabled"],IF={key:0},SF={key:1},AF={key:2},CF={__name:"Profile",setup(t){const n=dd({apiKey:"AIzaSyCqcgvxcgWwG4LmYkSL66x4GYi1KLxuHts",authDomain:"chat-bot-pizzaria.firebaseapp.com",projectId:"chat-bot-pizzaria",storageBucket:"chat-bot-pizzaria.firebasestorage.app",messagingSenderId:"1090893949199",appId:"1:1090893949199:web:cc9724c44f5ef76ea9f67a",measurementId:"G-TQ6E8YLYHD"}),s=rg(n),r=z("Carregando status..."),i=z(null),o=z(!1),a=z(!1),l=z(!0),c=z("loading_user_id");s.onAuthStateChanged(g=>{if(g)c.value=g.uid,console.log("User ID from Firebase Auth:",c.value);else{let v=localStorage.getItem("guestUserId");v||(v=`guest_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,localStorage.setItem("guestUserId",v)),c.value=v,console.log("Guest User ID:",c.value)}});const u=be(()=>r.value.includes("Concedida")?"bg-green-100 text-green-800":r.value.includes("Negada")?"bg-red-100 text-red-800":r.value.includes("Erro")||r.value.includes("não suportadas")?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"),h=async()=>{o.value=!0;try{const g=await Ou(c.value);g?(i.value=g,r.value="Permissão de notificação Concedida!"):r.value="Permissão de notificação Negada ou token não obtido."}catch(g){console.error("Erro geral ao lidar com a solicitação de notificação:",g),r.value=`Erro: ${g.message}`}finally{o.value=!1}},f=()=>{i.value&&navigator.clipboard.writeText(i.value).then(()=>{a.value=!0,setTimeout(()=>{a.value=!1},2e3)}).catch(g=>{console.error("Falha ao copiar o token:",g)})};return _t(async()=>{if(!await Md()){l.value=!1,r.value="Notificações não suportadas neste navegador.";return}if("serviceWorker"in navigator)try{const m=await navigator.serviceWorker.register("/firebase-messaging-sw.js");console.log("Service Worker registrado com sucesso:",m)}catch(m){console.error("Falha ao registrar o Service Worker:",m),r.value=`Erro ao registrar Service Worker: ${m.message}`,l.value=!1;return}else{r.value="Navegador não suporta Service Workers.",l.value=!1;return}Nk();const v=Notification.permission;if(v==="granted"){r.value="Permissão de notificação Concedida.";try{const m=await Ou(c.value);m&&(i.value=m)}catch(m){console.error("Erro ao obter token na montagem:",m),r.value=`Erro ao obter token: ${m.message}`}}else v==="denied"?r.value="Permissão de notificação Negada.":r.value="Aguardando permissão..."}),(g,v)=>(C(),Je(Mi,{"top-nav-title":"Perfil - Configurações de Notificação"},{default:ye(()=>[p("div",yF,[v[5]||(v[5]=p("h2",{class:"text-2xl font-bold text-gray-800 mb-6 text-center"},"Configurações de Notificação",-1)),p("div",vF,[v[3]||(v[3]=p("p",{class:"text-gray-700 mb-2"},"Status das Notificações:",-1)),p("div",{class:le([u.value,"p-3 rounded-md text-sm font-medium flex items-center justify-between"])},[p("span",null,U(r.value),1),r.value.includes("Concedida")?(C(),O("svg",bF,v[0]||(v[0]=[p("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):r.value.includes("Negada")?(C(),O("svg",_F,v[1]||(v[1]=[p("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1)]))):(C(),O("svg",xF,v[2]||(v[2]=[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004 12c0 2.21.894 4.204 2.342 5.658M18 18v-5h-.582m-15.356-2A8.001 8.001 0 0020 12c0-2.21-.894-4.204-2.342-5.658"},null,-1)])))],2)]),p("div",wF,[v[4]||(v[4]=p("p",{class:"text-gray-700 mb-2"},"Seu Token FCM:",-1)),p("input",{type:"text",value:i.value||"Gerando...",readonly:"",class:"w-full p-2 border border-gray-300 rounded-md bg-gray-100 text-gray-600 text-sm font-mono",onClick:f},null,8,EF),a.value?(C(),O("p",kF,"Copiado!")):X("",!0)]),p("button",{onClick:h,disabled:o.value||!l.value,class:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md transition duration-300 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed"},[l.value?o.value?(C(),O("span",SF,"Permissão Solicitada")):(C(),O("span",AF,"Solicitar Permissão de Notificação")):(C(),O("span",IF,"Notificações não suportadas"))],8,TF),v[6]||(v[6]=p("p",{class:"text-gray-500 text-xs mt-4 text-center"}," Ative as notificações para receber atualizações sobre seus pedidos e promoções. ",-1))])]),_:1}))}},PF={},RF={class:"border-b border-b-gray-300 dark:border-b-gray-800 mb-4"};function OF(t,e){return C(),O("div",RF)}const pa=Yt(PF,[["render",OF]]);function yt(t){return typeof t!="number"?"R$ 0,00":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2,maximumFractionDigits:2}).format(t)}function Ti(t){if(!t)return"";let e=String(t).replace(/_/g," ");return e.charAt(0).toUpperCase()+e.slice(1)}function Hg(t){if(!t)return"";if(t&&typeof t.toDate=="function")return t.toDate().toLocaleString("pt-BR");if(t instanceof Date)return t.toLocaleString("pt-BR");try{return new Date(t).toLocaleString("pt-BR")}catch{return""}}function La(t){switch(t){case"bank_transfer":return"Pix";case"credit_card":return"Cartão";case"debit_card":return"Cartão de Débito";case"cash":return"Dinheiro";default:return Ti(t)}}function Yk(t){switch(t){case"paid":case"approved":return"Aprovado";case"pending":return"Pendente";case"failed":return"Falhou";case"refunded":return"Reembolsado";case"cancelled":return"Cancelado";default:return Ti(t)}}function dr(t){switch(t){case"em processamento":return"px-2 py-0.5 text-xs font-medium rounded-full bg-orange-50 text-orange-600 dark:bg-orange-500/15 dark:text-orange-500";case"recebido":return"px-2 py-0.5 text-xs font-medium rounded-full bg-yellow-50 text-yellow-600 dark:bg-yellow-500/15 dark:text-yellow-500";case"em_preparo":return"px-2 py-0.5 text-xs font-medium rounded-full bg-blue-50 text-blue-600 dark:bg-blue-500/15 dark:text-blue-500";case"finalizado":case"entregue":return"px-2 py-0.5 text-xs font-medium rounded-full bg-green-50 text-green-600 dark:bg-green-500/15 dark:text-green-500";case"a_caminho":case"assigned":return"px-2 py-0.5 text-xs font-medium rounded-full bg-purple-50 text-purple-600 dark:bg-purple-500/15 dark:text-purple-500";case"cancelled":case"cancelado":return"px-2 py-0.5 text-xs font-medium bg-red-50 text-red-600 dark:bg-red-500/15 dark:text-red-500";case"pending":return"px-2 py-0.5 text-xs font-medium rounded-full bg-gray-50 text-gray-600 dark:bg-gray-500/15 dark:text-gray-500";default:return"px-2 py-0.5 text-xs font-medium rounded-full bg-gray-50 text-gray-600 dark:bg-gray-500/15 dark:text-gray-500"}}function ns(t){return t?t&&typeof t.toDate=="function"?t.toDate().getTime():t&&typeof t._seconds<"u"?t._seconds*1e3:t instanceof Date?t.getTime():typeof t=="string"?new Date(t).getTime():typeof t=="number"?t>1e12?t:t*1e3:0:0}const DF={class:"container mx-auto p-4 lg:pt-0 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 lg:gap-8 gap-4"},MF={class:"lg:col-span-2"},NF={key:0,class:"p-4 border border-gray-300 rounded-md mb-4 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-200"},LF={class:"p-2 border border-gray-300 dark:border-gray-700/40 rounded mb-2 cursor-default select-none shadow"},VF={class:"text-gray-500 dark:text-gray-400"},$F={class:"p-2 border border-gray-300 dark:border-gray-700/40 rounded mb-2 cursor-default select-none shadow"},FF={class:"text-gray-500 dark:text-gray-400"},UF={class:"p-2 border border-gray-300 dark:border-gray-700/40 rounded mb-2 cursor-default select-none shadow"},BF={class:"text-gray-500 dark:text-gray-400"},jF={class:"p-2 border border-gray-300 dark:border-gray-700/40 rounded mb-2 cursor-default select-none shadow"},zF={class:"text-gray-500 dark:text-gray-400"},HF={class:"p-2 border border-gray-300 dark:border-gray-700/40 rounded mb-2 cursor-default select-none shadow"},qF={class:"text-gray-500 dark:text-gray-400"},WF={class:"p-2 border border-gray-300 dark:border-gray-700/40 rounded mb-2 cursor-default select-none shadow"},KF={class:"text-gray-500 dark:text-gray-400"},GF={key:1,class:"p-4 border border-gray-300 rounded-md mb-4 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-200"},YF={class:"mb-4"},QF={key:0,class:"text-red-500 text-xs italic mt-1"},XF={class:"mb-4"},JF={key:0,class:"text-red-500 text-xs italic mt-1"},ZF={class:"mb-4"},e6={key:0,class:"text-red-500 text-xs italic mt-1"},t6={key:1,class:"text-gray-500 text-xs italic mt-1"},n6={class:"mb-4"},s6=["required"],r6={key:0,class:"text-red-500 text-xs italic mt-1"},i6={class:"mb-4"},o6={class:"mb-4"},a6=["required"],l6={key:0,class:"text-red-500 text-xs italic mt-1"},c6={class:"flex justify-end gap-2"},u6={class:"p-4 border border-gray-300 rounded-md mb-4 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-200"},d6={class:"mb-6"},h6=["src","alt"],f6={class:"flex-3"},p6={class:"flex-1"},g6={class:"space-y-2"},m6={class:"relative"},y6=["disabled"],v6=["disabled"],b6={key:0,class:"text-red-500 text-xs italic mt-1"},_6={key:1,class:"mt-2 p-2 bg-green-100 text-green-800 rounded-md text-sm flex items-center justify-between dark:bg-green-900/20 dark:text-green-400"},x6={class:"font-semibold"},w6={class:"mb-4"},E6={class:"space-x-4 flex items-center"},k6={class:"flex gap-2 mb-4"},T6=["value"],I6={class:"text-sm font-medium"},S6={key:0,class:"mb-4"},A6={class:"ml-4"},C6={key:0,class:"mt-4"},P6={key:0,class:"text-red-500 text-xs italic mt-1"},R6={class:"mb-4"},O6={class:"flex justify-between items-center dark:text-gray-200"},D6={key:0,class:"flex justify-between items-center dark:text-gray-200"},M6={key:1,class:"flex justify-between items-center dark:text-gray-200 font-bold text-lg"},N6={class:"font-semibold text-green-500"},L6={class:"text-green-500"},V6={class:"flex justify-between items-center dark:text-gray-200 font-bold text-xl"},$6={class:"font-bold"},F6=["disabled"],U6={key:0,class:"m-4 fixed flex justify-center items-center space-x-2 top-4 transform bg-green-600 text-white px-4 py-2 rounded shadow-lg z-50 border-l-4 border-l-green-800"},qh="customer_data",dc="applied_coupon",B6=5,j6="https://viacep.com.br/ws/",z6={__name:"Checkout",setup(t){const e=Dp(),n=Io(),s=be(()=>n.total),r=be(()=>n.items),i=gi({name:"",phone:"",deliveryType:"Entrega",cep:"",address:"",reference:"",neighborhood:"",obs:""}),o=be(()=>i.name.trim()!==""&&i.phone.trim()!==""&&(i.deliveryType==="Retirada"||i.address.trim()!==""&&i.neighborhood.trim()!=="")),a=z(!1),l=z("pix"),c=z("no"),u=z(0),h=z(""),f=z(!1),g=z(!1),v=z(""),m=z(null),b=z(null),I=z(!1),T=gi({name:null,phone:null,cep:null,address:null,neighborhood:null,changeAmount:null}),D=[{value:"pix",label:"Pix",icon:"fa-brands fa-pix"},{value:"credit-card",label:"Cartão",icon:"fa fa-credit-card"},{value:"cash",label:"Dinheiro",icon:"fa fa-money-bill-1-wave"}];function L(){const se=Date.now().toString().slice(-5),F=Math.floor(Math.random()*1e5).toString().padStart(5,"0");return`${se}${F}`}const M=be(()=>i.deliveryType==="Retirada"?0:B6),$=be(()=>{if(!m.value)return 0;const se=s.value+M.value;return m.value.type==="percentage"?se*m.value.discount_amount/100:m.value.type==="value"?m.value.discount_amount:0}),E=be(()=>{let se=s.value+M.value;return se-=$.value,Math.max(0,se)});vt(()=>i.deliveryType,se=>{se==="Retirada"&&(T.cep=null,T.address=null,T.neighborhood=null),w()}),vt(m,se=>{se?localStorage.setItem(dc,JSON.stringify(se)):localStorage.removeItem(dc)},{deep:!0});function _(se){switch(T[se]=null,se){case"name":i.name.trim()||(T.name="O nome é obrigatório.");break;case"phone":i.phone.trim()||(T.phone="O telefone é obrigatório.");break;case"cep":i.deliveryType==="Entrega"&&(i.cep.trim()?/^\d{5}-?\d{3}$/.test(i.cep.trim())||(T.cep="Formato de CEP inválido (ex: 12345-678)."):T.cep="O CEP é obrigatório para entrega.");break;case"address":i.deliveryType==="Entrega"&&!i.address.trim()&&(T.address="O endereço é obrigatório para entrega.");break;case"neighborhood":i.deliveryType==="Entrega"&&!i.neighborhood.trim()&&(T.neighborhood="O bairro é obrigatório para entrega.");break;case"changeAmount":l.value==="cash"&&c.value==="yes"&&(u.value<=0?T.changeAmount="Informe um valor válido para o troco.":u.value<E.value&&(T.changeAmount=`O valor para troco deve ser igual ou maior que o total do pedido (${yt(E.value)}).`));break}w()}function w(){let se=!0;for(let F in T)T[F]=null;return i.name.trim()||(T.name="O nome é obrigatório.",se=!1),i.phone.trim()||(T.phone="O telefone é obrigatório.",se=!1),i.deliveryType==="Entrega"&&(i.cep.trim()?i.cep.trim()&&!/^\d{5}-?\d{3}$/.test(i.cep.trim())&&(T.cep="Formato de CEP inválido (ex: 12345-678).",se=!1):(T.cep="O CEP é obrigatório para entrega.",se=!1),i.address.trim()||(T.address="O endereço é obrigatório para entrega.",se=!1),i.neighborhood.trim()||(T.neighborhood="O bairro é obrigatório para entrega.",se=!1)),l.value==="cash"&&c.value==="yes"&&(u.value<=0?(T.changeAmount="Informe um valor válido para o troco.",se=!1):u.value<E.value&&(T.changeAmount=`O valor para troco deve ser igual ou maior que o total do pedido (${yt(E.value)}).`,se=!1)),se}async function A(){const se=i.cep.replace(/\D/g,"");if(se.length!==8){T.cep="CEP deve ter 8 dígitos.";return}g.value=!0,T.cep=null;try{const K=await(await fetch(`${j6}${se}/json/`)).json();K.erro?(T.cep="CEP não encontrado.",i.address="",i.neighborhood=""):(i.address=K.logradouro,i.neighborhood=K.bairro,T.address=null,T.neighborhood=null)}catch(F){console.error("Erro ao buscar CEP:",F),T.cep="Erro ao buscar CEP. Tente novamente."}finally{g.value=!1,_("address"),_("neighborhood")}}function k(){w()&&(me(),a.value=!1)}async function S(){var se,F;if(!(!v.value||I.value)){I.value=!0,b.value=null,m.value=null;try{const K=await Ge.post("/coupons/apply",{couponCode:v.value.toUpperCase()});m.value=K.data.coupon,v.value=m.value.name}catch(K){console.error("Erro ao aplicar cupom:",K),b.value=((F=(se=K.response)==null?void 0:se.data)==null?void 0:F.error)||"Erro ao aplicar cupom. Verifique o código."}finally{I.value=!1}}}function R(){m.value=null,v.value="",b.value=null}_t(()=>{const se=localStorage.getItem(qh);if(se)try{const K=JSON.parse(se);Object.assign(i,K)}catch(K){console.error("Erro ao parsear dados do cliente do localStorage:",K),localStorage.removeItem(qh)}const F=localStorage.getItem(dc);if(F)try{m.value=JSON.parse(F),v.value=m.value.name}catch(K){console.error("Erro ao parsear cupom do localStorage:",K),localStorage.removeItem(dc),m.value=null,v.value=""}o.value||(a.value=!0)});function me(){localStorage.setItem(qh,JSON.stringify(i))}async function Te(){if(n.items.length===0){alert("Seu carrinho está vazio. Adicione itens para finalizar o pedido.");return}if(a.value&&(k(),a.value)){alert("Por favor, preencha corretamente seus dados de entrega antes de finalizar o pedido.");return}if(!w()){alert("Por favor, corrija os erros no formulário antes de finalizar o pedido.");return}f.value=!0;try{const se=s.value,F=M.value,K=E.value,Re={orderNumber:L(),customer:{...i},items:n.items,subtotal:se,tax:F,total:K,paymentMethod:l.value,deliveryType:i.deliveryType,needChange:c.value==="yes",changeAmount:l.value==="cash"&&c.value==="yes"&&u.value>K?u.value:null,obs:i.obs||null,coupon:m.value?{name:m.value.name,type:m.value.type,discount_amount:m.value.discount_amount,calculated_discount:$.value}:null,created_at:new Date().toISOString(),status:"pending"},mt=n.items.map(_e=>{let je=`${_e.quantity}x ${_e.name}${_e.size?` (${_e.size})`:""} - R$ ${_e.subtotal.toFixed(2).replace(".",",")}`;if(_e.extras&&_e.extras.length>0){const H=_e.extras.map(ee=>`${ee.name} - R$ ${ee.price.toFixed(2).replace(".",",")}`).join(" | ");je+=`
_Adicionais:_ ${H}`}return je}).join(`
`);let gt=[`*Tipo:* ${Re.deliveryType}`];Re.deliveryType==="Entrega"?gt.push("*Tempo de entrega:* 40 a 50min"):gt.push("*Pronto para retirada em:* 20-30min");let Ve=`NOVO PEDIDO: #${Re.orderNumber}

DADOS DO PEDIDO:
${mt}

DADOS DA ENTREGA:
${gt.join(`
`)}
*Cliente:* ${i.name}
*Telefone:* ${i.phone}
`;Re.deliveryType==="Entrega"&&(Ve+=`*CEP:* ${i.cep||"N/A"}
`,Ve+=`*Endereço:* ${i.address}
`,Ve+=`*Ponto de referência:* ${i.reference||"nenhum"}
`,Ve+=`*Bairro:* ${i.neighborhood}
`),Ve+=`
DADOS DO PAGAMENTO:
*Método de pagamento:* ${Re.paymentMethod?Re.paymentMethod.toUpperCase():"N/A"}
*Subtotal:* R$ ${se.toFixed(2).replace(".",",")}
`,Re.deliveryType==="Entrega"&&(Ve+=`*Taxa de entrega:* R$ ${F.toFixed(2).replace(".",",")}
`),m.value&&(Ve+=`*Desconto de Cupom (${m.value.name.toUpperCase()}):* - ${yt($.value)}
`),Ve+=`*Total:* R$ ${K.toFixed(2).replace(".",",")}`,Re.paymentMethod==="cash"&&Re.needChange&&Re.changeAmount&&(Ve+=`
*Troco para:* R$ ${Re.changeAmount.toFixed(2).replace(".",",")}`),i.obs&&(Ve+=`

*Observações:* ${i.obs}`);const ie="5571992477638",ue=encodeURIComponent(Ve);if(window.open(`https://wa.me/${ie}?text=${ue}`),await new Promise(_e=>setTimeout(_e,1e3)),m.value)try{await Ge.post("/coupons/use",{couponCode:m.value.name.toUpperCase(),orderId:Re.orderNumber}),console.log(`Cupom ${m.value.name} marcado como usado.`)}catch(_e){console.error("Erro ao marcar cupom como usado:",_e)}h.value=Re.orderNumber,me(),n.clearCart(),R(),a.value=!1,setTimeout(()=>{h.value="",e.push("/")},3e3)}catch(se){console.error("Erro ao finalizar pedido:",se),alert("Ocorreu um erro ao finalizar o pedido. Por favor, tente novamente.")}finally{f.value=!1}}return(se,F)=>(C(),Je(Mi,{"top-nav-visible":!0,"top-nav-title":"Finalizar pedido","is-header-visible":!1},{default:ye(()=>[p("form",{onSubmit:Tn(Te,["prevent"])},[p("div",DF,[F[53]||(F[53]=p("ol",{"aria-label":"Breadcrumb",class:"lg:col-span-8 md:col-span-2 px-1 flex text-xs space-x-2 items-center text-gray-400 min-w-0 gap-2 whitespace-nowrap"},[p("li",{class:"text-xs/loose"},[p("a",{href:"/",class:"flex items-center gap-2 align-middle leading-none transition-all"},[p("i",{class:"fa fa-home"}),ne(" Início ")])]),p("i",{class:"fa fa-chevron-right text-gray-400"}),p("span",{class:"text-green-600"},"Finalizar pedido")],-1)),p("div",MF,[o.value&&!a.value?(C(),O("div",NF,[F[29]||(F[29]=p("h3",{class:"font-semibold mb-4 dark:text-gray-100"},"Dados para a entrega",-1)),p("div",LF,[F[23]||(F[23]=p("span",{class:"font-semibold mr-2"},"Nome:",-1)),p("span",VF,U(i.name),1)]),p("div",$F,[F[24]||(F[24]=p("span",{class:"font-semibold mr-2"},"Telefone:",-1)),p("span",FF,U(i.phone),1)]),p("div",UF,[F[25]||(F[25]=p("span",{class:"font-semibold mr-2"},"CEP:",-1)),p("span",BF,U(i.cep||"N/A"),1)]),p("div",jF,[F[26]||(F[26]=p("span",{class:"font-semibold mr-2"},"Endereço:",-1)),p("span",zF,U(i.address),1)]),p("div",HF,[F[27]||(F[27]=p("span",{class:"font-semibold mr-2"},"Ponto de referência:",-1)),p("span",qF,U(i.reference||"N/A"),1)]),p("div",WF,[F[28]||(F[28]=p("span",{class:"font-semibold mr-2"},"Bairro:",-1)),p("span",KF,U(i.neighborhood),1)]),p("button",{type:"button",onClick:F[0]||(F[0]=Tn(K=>a.value=!0,["stop"])),class:"mt-4 px-4 py-2 bg-blue-500 hover:bg-blue-700 text-white rounded-md shadow focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-green-500"}," Alterar meus dados ")])):X("",!0),!o.value||a.value?(C(),O("div",GF,[F[36]||(F[36]=p("h3",{class:"font-semibold mb-4 dark:text-gray-100"},[ne("Dados para a entrega"),p("br"),p("span",{class:"text-xs font-normal"},"Só precisa preencher seus dados apenas uma vez.")],-1)),p("div",YF,[F[30]||(F[30]=p("label",{for:"name",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"},"Nome:",-1)),Ie(p("input",{type:"text",id:"name","onUpdate:modelValue":F[1]||(F[1]=K=>i.name=K),class:le(["input",{"border-red-500":T.name}]),onBlur:F[2]||(F[2]=K=>_("name"))},null,34),[[Ze,i.name]]),T.name?(C(),O("p",QF,U(T.name),1)):X("",!0)]),p("div",XF,[F[31]||(F[31]=p("label",{for:"phone",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"},"Telefone:",-1)),Ie(p("input",{type:"tel",id:"phone","onUpdate:modelValue":F[3]||(F[3]=K=>i.phone=K),class:le(["input",{"border-red-500":T.phone}]),onBlur:F[4]||(F[4]=K=>_("phone"))},null,34),[[Ze,i.phone]]),T.phone?(C(),O("p",JF,U(T.phone),1)):X("",!0)]),p("div",ZF,[F[32]||(F[32]=p("label",{for:"cep",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"},"CEP:",-1)),Ie(p("input",{type:"text",id:"cep","onUpdate:modelValue":F[5]||(F[5]=K=>i.cep=K),onBlur:A,class:le(["input",{"border-red-500":T.cep}])},null,34),[[Ze,i.cep]]),T.cep?(C(),O("p",e6,U(T.cep),1)):X("",!0),g.value?(C(),O("p",t6,"Buscando endereço...")):X("",!0)]),p("div",n6,[F[33]||(F[33]=p("label",{for:"address",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"},"Endereço:",-1)),Ie(p("input",{type:"text",id:"address","onUpdate:modelValue":F[6]||(F[6]=K=>i.address=K),class:le(["input",{"border-red-500":T.address&&i.deliveryType==="Entrega"}]),required:i.deliveryType==="Entrega",onBlur:F[7]||(F[7]=K=>_("address"))},null,42,s6),[[Ze,i.address]]),T.address&&i.deliveryType==="Entrega"?(C(),O("p",r6,U(T.address),1)):X("",!0)]),p("div",i6,[F[34]||(F[34]=p("label",{for:"reference",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"},"Ponto de Referência (Opcional):",-1)),Ie(p("input",{id:"reference","onUpdate:modelValue":F[8]||(F[8]=K=>i.reference=K),class:"input"},null,512),[[Ze,i.reference]])]),p("div",o6,[F[35]||(F[35]=p("label",{for:"neighborhood",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"},"Bairro:",-1)),Ie(p("input",{id:"neighborhood","onUpdate:modelValue":F[9]||(F[9]=K=>i.neighborhood=K),class:le(["input",{"border-red-500":T.neighborhood&&i.deliveryType==="Entrega"}]),required:i.deliveryType==="Entrega",onBlur:F[10]||(F[10]=K=>_("neighborhood"))},null,42,a6),[[Ze,i.neighborhood]]),T.neighborhood&&i.deliveryType==="Entrega"?(C(),O("p",l6,U(T.neighborhood),1)):X("",!0)]),p("div",c6,[o.value?(C(),O("button",{key:0,type:"button",onClick:F[11]||(F[11]=K=>a.value=!1),class:"bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded-md shadow-md"}," Cancelar ")):X("",!0),p("button",{type:"button",onClick:k,class:"bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-md shadow-md"}," Salvar ")])])):X("",!0)]),p("div",u6,[F[50]||(F[50]=p("h3",{class:"font-semibold mb-4 dark:text-gray-100 text-gray-700 border-b dark:border-b-gray-900 border-b-gray-300"}," Resumo do pedido ",-1)),p("div",d6,[(C(!0),O(xe,null,Ne(r.value,K=>(C(),O("div",{key:K.id,class:"flex items-center gap-4 text-gray-700 dark:text-gray-300 text-xs mb-2"},[p("img",{src:K.img,alt:K.name,class:"h-10 w-10 rounded-md object-cover shadow-md"},null,8,h6),p("span",f6,U(K.name),1),p("span",p6,"x"+U(K.quantity),1),p("span",null,U(te(yt)(K.subtotal)),1)]))),128))]),p("div",g6,[F[40]||(F[40]=p("label",{for:"coupon",class:"text-xs text-gray-700"},"Código do cupom",-1)),p("div",m6,[Ie(p("input",{type:"text",name:"coupon",id:"coupon","onUpdate:modelValue":F[12]||(F[12]=K=>v.value=K),disabled:m.value!==null||I.value,class:"block w-full rounded-md py-3 ps-4 pe-12 text-gray-800 text-sm focus:ring-transparent border-gray-200 dark:bg-gray-50",placeholder:"Digite o código",autocomplete:"off"},null,8,y6),[[Ze,v.value]]),p("button",{type:"button",onClick:S,disabled:!v.value||m.value!==null||I.value,class:"absolute top-1/2 -translate-y-1/2 end-1 py-2 px-4 inline-block font-light tracking-wide border align-middle duration-500 text-xs text-center bg-orange-200 hover:bg-orange-300 border-gray-200 hover:border-gray-300 text-gray-900 rounded-md disabled:opacity-50 disabled:cursor-not-allowed"},[F[37]||(F[37]=p("i",{class:"fa-solid fa-badge-percent text-orange-500 mr-1"},null,-1)),ne(" "+U(I.value?"Aplicando...":"Aplicar"),1)],8,v6)]),b.value?(C(),O("p",b6,U(b.value),1)):X("",!0),m.value?(C(),O("div",_6,[p("span",null,[F[38]||(F[38]=ne("Cupom aplicado: ")),p("span",x6,U(m.value.name.toUpperCase()),1),ne(" ("+U(m.value.type==="percentage"?m.value.discount_amount+"%":te(yt)(m.value.discount_amount))+")",1)]),p("button",{type:"button",onClick:R,class:"text-red-500 hover:text-red-700 ml-2"},F[39]||(F[39]=[p("i",{class:"fa-solid fa-times"},null,-1)]))])):X("",!0)]),ae(pa),p("div",w6,[F[41]||(F[41]=p("span",{class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-4"}," Tipo de entrega: ",-1)),p("div",E6,[p("div",null,[Ie(p("input",{type:"radio",id:"deliveryTypeDelivery",name:"deliveryTypeOptions",value:"Entrega","onUpdate:modelValue":F[13]||(F[13]=K=>i.deliveryType=K),class:"form-radio hidden",onChange:F[14]||(F[14]=K=>w())},null,544),[[Os,i.deliveryType]]),p("label",{for:"deliveryTypeDelivery",class:le(["cursor-pointer px-4 py-2 rounded border text-sm font-medium transition",i.deliveryType==="Entrega"?"bg-indigo-600 text-white border-indigo-600":"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 border-gray-300 dark:border-gray-900"])}," 🚚 Entrega ",2)]),p("div",null,[Ie(p("input",{type:"radio",id:"deliveryTypeRetirada",name:"deliveryTypeOptions",value:"Retirada","onUpdate:modelValue":F[15]||(F[15]=K=>i.deliveryType=K),class:"form-radio hidden",onChange:F[16]||(F[16]=K=>w())},null,544),[[Os,i.deliveryType]]),p("label",{for:"deliveryTypeRetirada",class:le(["cursor-pointer px-4 py-2 rounded border text-sm font-medium transition",i.deliveryType==="Retirada"?"bg-indigo-600 text-white border-indigo-600":"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 border-gray-300 dark:border-gray-900"])}," 🏠 Retirada ",2)])])]),ae(pa),F[51]||(F[51]=p("h3",{class:"font-semibold mb-4 dark:text-gray-100 text-gray-700"},"Pagamento",-1)),p("div",k6,[(C(),O(xe,null,Ne(D,K=>p("label",{key:K.value,class:"relative cursor-pointer"},[Ie(p("input",{type:"radio",name:"paymentMethod",value:K.value,"onUpdate:modelValue":F[17]||(F[17]=Re=>l.value=Re),class:"hidden"},null,8,T6),[[Os,l.value]]),p("div",{class:le(["flex px-4 py-2 space-x-2 items-center justify-center border rounded-md shadow-md transition",l.value===K.value?"bg-green-600 text-white border-green-600":"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 border-gray-300 dark:border-gray-600"])},[p("i",{class:le(K.icon)},null,2),p("div",I6,U(K.label),1)],2)])),64))]),l.value==="cash"?(C(),O("div",S6,[F[45]||(F[45]=p("label",{class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"},"Precisa de Troco?",-1)),p("label",null,[Ie(p("input",{type:"radio",value:"yes","onUpdate:modelValue":F[18]||(F[18]=K=>c.value=K),class:"mr-2"},null,512),[[Os,c.value]]),F[42]||(F[42]=ne(" Sim "))]),p("label",A6,[Ie(p("input",{type:"radio",value:"no","onUpdate:modelValue":F[19]||(F[19]=K=>c.value=K),class:"mr-2"},null,512),[[Os,c.value]]),F[43]||(F[43]=ne(" Não "))]),c.value==="yes"?(C(),O("div",C6,[F[44]||(F[44]=p("label",{for:"changeAmount",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"},"Valor para Troco:",-1)),Ie(p("input",{type:"number",id:"changeAmount","onUpdate:modelValue":F[20]||(F[20]=K=>u.value=K),min:"0",class:le(["input",{"border-red-500":T.changeAmount}]),onBlur:F[21]||(F[21]=K=>_("changeAmount"))},null,34),[[Ze,u.value,void 0,{number:!0}]]),T.changeAmount?(C(),O("p",P6,U(T.changeAmount),1)):X("",!0)])):X("",!0)])):X("",!0),ae(pa),p("div",R6,[F[46]||(F[46]=p("label",{for:"obs",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"},"Observações (Opcional)",-1)),Ie(p("textarea",{type:"text",name:"obs",id:"obs","onUpdate:modelValue":F[22]||(F[22]=K=>i.obs=K),class:"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Alguma observação para a entrega desse pedido? Digite aqui..."},null,512),[[Ze,i.obs]])]),p("div",null,[p("div",O6,[F[47]||(F[47]=p("span",{class:"font-semibold"},"Subtotal:",-1)),p("span",null,U(te(yt)(s.value)),1)]),i.deliveryType==="Entrega"?(C(),O("div",D6,[F[48]||(F[48]=p("span",{class:"font-semibold"},"Taxa de Entrega:",-1)),p("span",null,U(te(yt)(M.value)),1)])):X("",!0),m.value?(C(),O("div",M6,[p("span",N6,"Desconto ("+U(m.value.type==="percentage"?m.value.discount_amount+"%":te(yt)(m.value.discount_amount))+"):",1),p("span",L6,"- "+U(te(yt)($.value)),1)])):X("",!0),ae(pa),p("div",V6,[F[49]||(F[49]=p("span",{class:"font-semibold"},"Total do Pedido:",-1)),p("span",$6,U(te(yt)(E.value)),1)]),p("button",{type:"submit",disabled:f.value,class:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg shadow-md mt-4 focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed"},U(f.value?"Finalizando...":"Finalizar Pedido"),9,F6)])]),ae(To,{name:"fade"},{default:ye(()=>[h.value?(C(),O("div",U6,[F[52]||(F[52]=p("i",{class:"fa-regular fa-circle-check text-green-800","aria-hidden":"true"},null,-1)),p("span",null,"Pedido realizado com sucesso! Número do Pedido: "+U(h.value),1)])):X("",!0)]),_:1})])],32)]),_:1}))}},H6={class:"container mx-auto p-4"},q6={class:"mb-4"},W6=["value"],K6={key:0,class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},G6={class:"mb-4"},Y6={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2"},Q6=["value","disabled"],X6={key:0,class:"text-red-500 text-sm mt-1"},J6={key:1,class:"mt-2"},Z6={class:"mr-2"},eU=["onUpdate:modelValue"],tU={key:0,value:"metade"},nU={class:"mb-4"},sU={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2"},rU=["value"],iU={class:"mb-4"},oU=["value"],aU={class:"mt-8 border-t pt-4 dark:border-gray-700"},lU={key:0},cU={key:1},uU={key:0},dU={key:1},hU={key:2},fU={key:0},pU={key:3},gU={class:"flex justify-between items-center mt-4 dark:text-gray-200"},mU={class:"text-xl font-bold"},yU=["disabled"],vU={key:4,class:"text-red-500 text-sm mt-1"},bU={__name:"BuildPizza",setup(t){const e=Io(),n=z([{name:"Média",maxSabor:2,price:25},{name:"Grande",maxSabor:4,price:35}]),s=z([{name:"Calabresa",price:10},{name:"Pepperoni",price:12},{name:"Margherita",price:9},{name:"Frango com Catupiry",price:11},{name:"Portuguesa",price:10},{name:"Quatro Queijos",price:13}]),r=z([{name:"Queijo Extra",price:5},{name:"Azeitonas",price:3},{name:"Bacon",price:6},{name:"Cebola Caramelizada",price:4}]),i=z([{name:"Catupiry",price:7},{name:"Cheddar",price:8},{name:"Chocolate",price:9}]),o=z(n.value[0]),a=z([]),l=z([]),c=z(null),u=z([]),h=be(()=>o.value?o.value.maxSabor:0),f=m=>a.value.some(b=>b.name===m.name),g=be(()=>{let m=o.value?o.value.price:0;return a.value.forEach((b,I)=>{m+=b.price/(u.value[I]==="metade"?2:1)}),l.value.forEach(b=>{m+=b.price}),c.value&&(m+=c.value.price),m}),v=()=>{if(a.value.length>=2&&a.value.length<=h.value){const m={id:"pizza-customizada-"+Date.now(),name:"Pizza Montada",size:o.value.name,sabores:a.value.map((b,I)=>({name:b.name,metade:u.value[I]})),adicionais:l.value.map(b=>b.name),borda:c.value?c.value.name:"Sem Borda",price:g.value,quantity:1};e.addItem(m),alert("Pizza personalizada adicionada ao carrinho!")}else alert(`Selecione de 2 a ${h.value} sabores para adicionar ao carrinho.`)};return(m,b)=>(C(),Je(Mi,{"top-nav-title":"Monte Sua Pizza"},{default:ye(()=>{var I;return[p("div",H6,[b[15]||(b[15]=p("h2",{class:"text-2xl font-semibold mb-6 dark:text-gray-200"},"Monte Sua Pizza",-1)),p("div",q6,[b[4]||(b[4]=p("label",{for:"pizza-size",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"}," Tamanho da Pizza: ",-1)),Ie(p("select",{id:"pizza-size","onUpdate:modelValue":b[0]||(b[0]=T=>o.value=T),class:"input"},[(C(!0),O(xe,null,Ne(n.value,T=>(C(),O("option",{key:T.name,value:T},U(T.name)+" (Máx. "+U(T.maxSabor)+" sabores) - "+U(m.$formatPrice(T.price)),9,W6))),128))],512),[[us,o.value]]),o.value?(C(),O("p",K6," Você pode escolher até "+U(o.value.maxSabor)+" sabores. ",1)):X("",!0)]),p("div",G6,[b[7]||(b[7]=p("h3",{class:"text-xl font-semibold mb-2 dark:text-gray-100"},"Sabores",-1)),p("div",Y6,[(C(!0),O(xe,null,Ne(s.value,T=>(C(),O("label",{key:T.name,class:"flex items-center"},[Ie(p("input",{type:"checkbox",value:T,"onUpdate:modelValue":b[1]||(b[1]=D=>a.value=D),disabled:a.value.length>=h.value&&!f(T),class:"mr-2"},null,8,Q6),[[lu,a.value]]),p("span",null,U(T.name)+" - "+U(m.$formatPrice(T.price)),1)]))),128))]),a.value.length>h.value?(C(),O("p",X6," Você selecionou mais sabores do que o permitido para este tamanho. ")):X("",!0),a.value.length>1&&((I=o.value)==null?void 0:I.maxSabor)>1?(C(),O("div",J6,[b[6]||(b[6]=p("h4",{class:"font-semibold mb-1 dark:text-gray-100"},"Metades:",-1)),(C(!0),O(xe,null,Ne(a.value,(T,D)=>(C(),O("div",{key:"metade-"+D,class:"flex items-center mb-1"},[p("span",Z6,U(T.name)+":",1),Ie(p("select",{"onUpdate:modelValue":L=>u.value[D]=L,class:"input-sm"},[b[5]||(b[5]=p("option",{value:"inteira"},"Inteira",-1)),a.value.length===2?(C(),O("option",tU,"Metade")):X("",!0)],8,eU),[[us,u.value[D]]])]))),128))])):X("",!0)]),p("div",nU,[b[8]||(b[8]=p("h3",{class:"text-xl font-semibold mb-2 dark:text-gray-100"},"Adicionais",-1)),p("div",sU,[(C(!0),O(xe,null,Ne(r.value,T=>(C(),O("label",{key:T.name,class:"flex items-center"},[Ie(p("input",{type:"checkbox",value:T,"onUpdate:modelValue":b[2]||(b[2]=D=>l.value=D),class:"mr-2"},null,8,rU),[[lu,l.value]]),p("span",null,U(T.name)+" - "+U(m.$formatPrice(T.price)),1)]))),128))])]),p("div",iU,[b[10]||(b[10]=p("label",{for:"pizza-borda",class:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2"}," Borda: ",-1)),Ie(p("select",{id:"pizza-borda","onUpdate:modelValue":b[3]||(b[3]=T=>c.value=T),class:"input"},[b[9]||(b[9]=p("option",{value:null},"Sem Borda",-1)),(C(!0),O(xe,null,Ne(i.value,T=>(C(),O("option",{key:T.name,value:T},U(T.name)+" - "+U(m.$formatPrice(T.price)),9,oU))),128))],512),[[us,c.value]])]),p("div",aU,[b[14]||(b[14]=p("h3",{class:"text-xl font-semibold mb-2 dark:text-gray-100"},"Resumo:",-1)),o.value?(C(),O("p",lU," Tamanho: "+U(o.value.name)+" - "+U(m.$formatPrice(o.value.price)),1)):X("",!0),a.value.length>0?(C(),O("p",cU,[b[11]||(b[11]=ne(" Sabores: ")),(C(!0),O(xe,null,Ne(a.value,(T,D)=>(C(),O("span",{key:T.name},[ne(U(T.name),1),u.value[D]==="metade"?(C(),O("span",uU," (Metade)")):X("",!0),D<a.value.length-1?(C(),O("span",dU," | ")):X("",!0),ne(" "+U(m.$formatPrice(T.price/(u.value[D]==="metade"?2:1))),1)]))),128))])):X("",!0),l.value.length>0?(C(),O("p",hU,[b[12]||(b[12]=ne(" Adicionais: ")),(C(!0),O(xe,null,Ne(l.value,(T,D)=>(C(),O("span",{key:T.name},[ne(U(T.name)+" "+U(m.$formatPrice(T.price)),1),D<l.value.length-1?(C(),O("span",fU,", ")):X("",!0)]))),128))])):X("",!0),c.value?(C(),O("p",pU," Borda: "+U(c.value.name)+" - "+U(m.$formatPrice(c.value.price)),1)):X("",!0),p("div",gU,[b[13]||(b[13]=p("span",{class:"font-semibold"},"Preço Total:",-1)),p("span",mU,U(m.$formatPrice(g.value)),1)]),p("button",{onClick:v,disabled:a.value.length<2||a.value.length>h.value,class:"w-full bg-red-600 hover:bg-red-700 text-white font-semibold py-3 rounded-lg shadow-md mt-4 focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-green-500"}," Adicionar ao Carrinho ",8,yU),a.value.length<2||a.value.length>h.value?(C(),O("p",vU," Selecione de 2 a "+U(h.value)+" sabores para adicionar ao carrinho. ",1)):X("",!0)])])]}),_:1}))}},_U=Yt(bU,[["__scopeId","data-v-6c04b263"]]),xU={class:"container mx-auto p-4 max-w-md bg-white shadow-lg rounded-lg mt-8"},wU={class:"mb-6"},EU={key:0,class:"w-5 h-5 text-green-700",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},kU={key:1,class:"w-5 h-5 text-red-700",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},TU={key:2,class:"w-5 h-5 text-blue-700 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},IU={class:"mb-6"},SU=["value"],AU={key:0,class:"text-green-600 text-xs mt-1"},CU=["disabled"],PU={key:0},RU={key:1},OU={key:2},DU={__name:"NotificationOptIn",setup(t){const n=dd({apiKey:"AIzaSyCqcgvxcgWwG4LmYkSL66x4GYi1KLxuHts",authDomain:"chat-bot-pizzaria.firebaseapp.com",projectId:"chat-bot-pizzaria",storageBucket:"chat-bot-pizzaria.firebasestorage.app",messagingSenderId:"1090893949199",appId:"1:1090893949199:web:cc9724c44f5ef76ea9f67a",measurementId:"G-TQ6E8YLYHD"}),s=rg(n),r=z("Carregando status..."),i=z(null),o=z(!1),a=z(!1),l=z(!0),c=z("loading_user_id");s.onAuthStateChanged(g=>{if(g)c.value=g.uid,console.log("User ID from Firebase Auth:",c.value);else{let v=localStorage.getItem("guestUserId");v||(v=`guest_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,localStorage.setItem("guestUserId",v)),c.value=v,console.log("Guest User ID:",c.value)}});const u=be(()=>r.value.includes("Concedida")?"bg-green-100 text-green-800":r.value.includes("Negada")?"bg-red-100 text-red-800":r.value.includes("Erro")||r.value.includes("não suportadas")?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"),h=async()=>{o.value=!0;try{const g=await Ou(c.value);g?(i.value=g,r.value="Permissão de notificação Concedida!"):r.value="Permissão de notificação Negada ou token não obtido."}catch(g){console.error("Erro geral ao lidar com a solicitação de notificação:",g),r.value=`Erro: ${g.message}`}finally{o.value=!1}},f=()=>{i.value&&navigator.clipboard.writeText(i.value).then(()=>{a.value=!0,setTimeout(()=>{a.value=!1},2e3)}).catch(g=>{console.error("Falha ao copiar o token:",g)})};return _t(async()=>{if(!await Md()){l.value=!1,r.value="Notificações não suportadas neste navegador.";return}if("serviceWorker"in navigator)try{const m=await navigator.serviceWorker.register("/firebase-messaging-sw.js");console.log("Service Worker registrado com sucesso:",m)}catch(m){console.error("Falha ao registrar o Service Worker:",m),r.value=`Erro ao registrar Service Worker: ${m.message}`,l.value=!1;return}else{r.value="Navegador não suporta Service Workers.",l.value=!1;return}Nk();const v=Notification.permission;if(v==="granted"){r.value="Permissão de notificação Concedida.";try{const m=await Ou(c.value);m&&(i.value=m)}catch(m){console.error("Erro ao obter token na montagem:",m),r.value=`Erro ao obter token: ${m.message}`}}else v==="denied"?r.value="Permissão de notificação Negada.":r.value="Aguardando permissão..."}),(g,v)=>(C(),O("div",xU,[v[5]||(v[5]=p("h2",{class:"text-2xl font-bold text-gray-800 mb-6 text-center"},"Configurações de Notificação",-1)),p("div",wU,[v[3]||(v[3]=p("p",{class:"text-gray-700 mb-2"},"Status das Notificações:",-1)),p("div",{class:le([u.value,"p-3 rounded-md text-sm font-medium flex items-center justify-between"])},[p("span",null,U(r.value),1),r.value.includes("Concedida")?(C(),O("svg",EU,v[0]||(v[0]=[p("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):r.value.includes("Negada")?(C(),O("svg",kU,v[1]||(v[1]=[p("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1)]))):(C(),O("svg",TU,v[2]||(v[2]=[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004 12c0 2.21.894 4.204 2.342 5.658M18 18v-5h-.582m-15.356-2A8.001 8.001 0 0020 12c0-2.21-.894-4.204-2.342-5.658"},null,-1)])))],2)]),p("div",IU,[v[4]||(v[4]=p("p",{class:"text-gray-700 mb-2"},"Seu Token FCM:",-1)),p("input",{type:"text",value:i.value||"Gerando...",readonly:"",class:"w-full p-2 border border-gray-300 rounded-md bg-gray-100 text-gray-600 text-sm font-mono",onClick:f},null,8,SU),a.value?(C(),O("p",AU,"Copiado!")):X("",!0)]),p("button",{onClick:h,disabled:o.value||!l.value,class:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md transition duration-300 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed"},[l.value?o.value?(C(),O("span",RU,"Permissão Solicitada")):(C(),O("span",OU,"Solicitar Permissão de Notificação")):(C(),O("span",PU,"Notificações não suportadas"))],8,CU),v[6]||(v[6]=p("p",{class:"text-gray-500 text-xs mt-4 text-center"}," Ative as notificações para receber atualizações sobre seus pedidos e promoções. ",-1))]))}},MU=Yt(DU,[["__scopeId","data-v-422d1d2a"]]),$d=Zu("auth",{state:()=>({user:JSON.parse(localStorage.getItem("adminUser"))||null,authToken:localStorage.getItem("adminAuthToken")||null,loading:!1,error:null}),getters:{isAuthenticated:t=>!!t.authToken&&!!t.user,isAdmin:t=>{var e;return((e=t.user)==null?void 0:e.isAdmin)||!1}},actions:{async _updateUserInfoFromFirebase(t){if(!t){this.user=null;return}const e=await t.getIdTokenResult(!0);this.user={uid:t.uid,email:t.email,displayName:t.displayName,isAdmin:e.claims.admin||!1},localStorage.setItem("adminUser",JSON.stringify(this.user)),console.log("Auth Store: User info updated from Firebase ID Token claims:",this.user)},async loginWithEmail(t,e){const n=Ca();this.loading=!0,this.error=null;try{const i=await(await QM(kn,t,e)).user.getIdToken(),o=await Ge.post("/auth/login",{idToken:i});this.authToken=o.data.customToken,localStorage.setItem("adminAuthToken",this.authToken),await Lh(kn,this.authToken),await this._updateUserInfoFromFirebase(kn.currentUser),n.showToast("Sucesso!","Login realizado com sucesso.","success"),fi.push("/admin")}catch(s){console.error("Erro ao fazer login com e-mail:",s);let r="Erro ao fazer login. Tente novamente.";s.code==="auth/user-not-found"||s.code==="auth/wrong-password"||s.code==="auth/invalid-credential"||s.code==="auth/invalid-email"?r="Email ou senha inválidos.":s.response&&s.response.data&&s.response.data.error&&(r=s.response.data.error),this.error=r,n.showToast("Erro de Login",r,"error"),this.authToken=null,this.user=null,localStorage.removeItem("adminAuthToken"),localStorage.removeItem("adminUser")}finally{this.loading=!1}},async loginWithGoogle(){const t=Ca();this.loading=!0,this.error=null;try{const s=await(await b4(kn,P$)).user.getIdToken(),r=await Ge.post("/auth/google",{idToken:s});this.authToken=r.data.customToken,localStorage.setItem("adminAuthToken",this.authToken),await Lh(kn,this.authToken),await this._updateUserInfoFromFirebase(kn.currentUser),t.showToast("Sucesso!","Login com Google realizado com sucesso.","success"),fi.push("/admin")}catch(e){console.error("Erro ao fazer login com Google:",e);let n="Erro ao fazer login com Google. Tente novamente.";e.response&&e.response.data&&e.response.data.error&&(n=e.response.data.error),this.error=n,t.showToast("Erro de Login",n,"error"),this.authToken=null,this.user=null,localStorage.removeItem("adminAuthToken"),localStorage.removeItem("adminUser")}finally{this.loading=!1}},async logout(){const t=Ca();this.loading=!0,this.error=null;try{await ZM(kn),this.authToken=null,this.user=null,localStorage.removeItem("adminAuthToken"),localStorage.removeItem("adminUser"),t.showToast("Logout","Você foi desconectado.","info"),fi.push("/admin/login")}catch(e){console.error("Erro ao fazer logout:",e),this.error="Erro ao fazer logout.",t.showToast("Erro de Logout","Não foi possível desconectar.","error")}finally{this.loading=!1}},async initializeAuth(){const t=localStorage.getItem("adminAuthToken");if(t){this.authToken=t;try{await Lh(kn,t),await this._updateUserInfoFromFirebase(kn.currentUser),console.log("Auth Store: Inicializado com token e user do localStorage. isAdmin:",this.user.isAdmin)}catch(e){console.error("Erro ao re-autenticar com custom token:",e),this.authToken=null,this.user=null,localStorage.removeItem("adminAuthToken"),localStorage.removeItem("adminUser")}}else this.authToken=null,this.user=null,localStorage.removeItem("adminAuthToken"),localStorage.removeItem("adminUser"),console.log("Auth Store: Nenhum token/user no localStorage ou inconsistente. Limpando.")}}}),NU={class:"space-y-3 h-full flex flex-col justify-between"},LU={class:"flex-1 space-y-2"},VU={key:0,class:"tooltip"},$U={key:0,class:"tooltip"},FU={key:0,class:"tooltip"},UU={key:0,class:"tooltip"},BU={key:0,class:"tooltip"},jU={key:0,class:"tooltip"},zU={key:0,class:"tooltip"},HU={key:0,class:"tooltip"},qU={key:0,class:"absolute top-1 left-full ml-3 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-xl opacity-0 group-hover:opacity-100 transition-all duration-300 pointer-events-none whitespace-nowrap z-[9999] transform translate-x-2 group-hover:-translate-x-2"},WU={key:0,class:"fixed inset-0 bg-gray-800 p-6 z-50 md:hidden flex flex-col w-64 shadow-lg translate-x-0 transition-transform duration-300 ease-in-out"},KU={class:"space-y-3 flex-grow"},GU={__name:"Sidebar",props:{mobileMenuOpen:{type:Boolean,default:!1},shortMenu:{type:Boolean,default:!1}},emits:["toggle-mobile-menu","toggle-short-menu"],setup(t,{emit:e}){const n=e,s=()=>{n("toggle-mobile-menu")},r=()=>{n("toggle-short-menu")};return(i,o)=>{const a=ko("RouterLink");return C(),O(xe,null,[p("nav",{class:le([t.shortMenu?"w-18":"w-44","hidden md:block bg-sky-950 dark:bg-gray-800 shadow-lg fixed left-0 top-0 h-[calc(100vh)] transition-all duration-200 z-50"])},[p("div",NU,[o[17]||(o[17]=p("div",{class:"flex items-center justify-center bg-sky-900 text-gray-200 p-2 rounded-t-md"},"PN",-1)),p("div",LU,[ae(a,{to:"/admin",class:"item__menu group"},{default:ye(()=>[o[1]||(o[1]=p("i",{class:"fa-duotone fa-chart-line fa-fw"},null,-1)),p("span",{class:le(["grow text-sm text-ellipsis line-clamp-1 pr-1",t.shortMenu?"hidden":""])},"Dashboard",2),t.shortMenu?(C(),O("div",VU,o[0]||(o[0]=[p("i",{class:"arrow__tooltip"},null,-1),ne("Dashboard ")]))):X("",!0)]),_:1,__:[1]}),ae(a,{to:"/admin/orders",class:"item__menu group"},{default:ye(()=>[o[3]||(o[3]=p("i",{class:"fa-duotone fa-book fa-fw","aria-hidden":"true"},null,-1)),p("span",{class:le(["grow text-sm text-ellipsis line-clamp-1 pr-1",t.shortMenu?"hidden":""])},"Pedidos",2),t.shortMenu?(C(),O("div",$U,o[2]||(o[2]=[p("i",{class:"arrow__tooltip"},null,-1),ne("Pedidos ")]))):X("",!0)]),_:1,__:[3]}),ae(a,{to:"/admin/products",class:"item__menu group"},{default:ye(()=>[o[5]||(o[5]=p("i",{class:"fa-duotone fa-box-open fa-fw","aria-hidden":"true"},null,-1)),p("span",{class:le(["grow text-sm text-ellipsis line-clamp-1 pr-1",t.shortMenu?"hidden":""])},"Produtos",2),t.shortMenu?(C(),O("div",FU,o[4]||(o[4]=[p("i",{class:"arrow__tooltip"},null,-1),ne("Produtos ")]))):X("",!0)]),_:1,__:[5]}),ae(a,{to:"/admin/categories",class:"item__menu group"},{default:ye(()=>[o[7]||(o[7]=p("i",{class:"fa-duotone fa-tags fa-fw","aria-hidden":"true"},null,-1)),p("span",{class:le(["grow text-sm text-ellipsis line-clamp-1 pr-1",t.shortMenu?"hidden":""])},"Categorias",2),t.shortMenu?(C(),O("div",UU,o[6]||(o[6]=[p("i",{class:"arrow__tooltip"},null,-1),ne("Categorias ")]))):X("",!0)]),_:1,__:[7]}),ae(a,{to:"/admin/whatsapp-qr",class:"item__menu group"},{default:ye(()=>[o[9]||(o[9]=p("i",{class:"fab fa-whatsapp fa-fw","aria-hidden":"true"},null,-1)),p("span",{class:le(["grow text-sm text-ellipsis line-clamp-1 pr-1",t.shortMenu?"hidden":""])},"Whatsapp",2),t.shortMenu?(C(),O("div",BU,o[8]||(o[8]=[p("i",{class:"arrow__tooltip"},null,-1),ne("WhatsApp ")]))):X("",!0)]),_:1,__:[9]}),ae(a,{to:"/admin/settings",class:"item__menu group"},{default:ye(()=>[o[11]||(o[11]=p("i",{class:"fa-duotone fa-tools fa-fw","aria-hidden":"true"},null,-1)),p("span",{class:le(["grow text-sm text-ellipsis line-clamp-1 pr-1",t.shortMenu?"hidden":""])},"Configurações",2),t.shortMenu?(C(),O("div",jU,o[10]||(o[10]=[p("i",{class:"arrow__tooltip"},null,-1),ne("Configurações ")]))):X("",!0)]),_:1,__:[11]}),ae(a,{to:"/admin/manage-users",class:"item__menu group"},{default:ye(()=>[o[13]||(o[13]=p("i",{class:"fa-duotone fa-users-gear fa-fw","aria-hidden":"true"},null,-1)),p("span",{class:le(["grow text-sm text-ellipsis line-clamp-1 pr-1",t.shortMenu?"hidden":""])},"Usuários",2),t.shortMenu?(C(),O("div",zU,o[12]||(o[12]=[p("i",{class:"arrow__tooltip"},null,-1),ne("Usuários ")]))):X("",!0)]),_:1,__:[13]}),ae(a,{to:"/admin/reports",class:"item__menu group"},{default:ye(()=>[o[15]||(o[15]=p("i",{class:"fa-duotone fa-chart-pie fa-fw","aria-hidden":"true"},null,-1)),p("span",{class:le(["grow text-sm text-ellipsis line-clamp-1 pr-1",t.shortMenu?"hidden":""])},"Relatórios",2),t.shortMenu?(C(),O("div",HU,o[14]||(o[14]=[p("i",{class:"arrow__tooltip"},null,-1),ne("Relatórios ")]))):X("",!0)]),_:1,__:[15]})]),p("div",{class:"p-2 flex text-gray-300 relative cursor-pointer hover:text-white transition-colors group bg-sky-600 hover:bg-sky-700 h-10 space-x-2 justify-center items-center",onClick:r},[p("i",{class:le([t.shortMenu?"fa-circle-arrow-right":"fa-circle-arrow-left","fa-light fa-fw"]),"aria-hidden":"true"},null,2),p("span",{class:le(["grow text-sm text-ellipsis line-clamp-1 pr-1",t.shortMenu?"hidden":""])},"Recolher menu",2),t.shortMenu?(C(),O("div",qU,[ne(U(t.shortMenu?"Expandir menu":"Contrair menu")+" ",1),o[16]||(o[16]=p("div",{class:"absolute top-1/2 left-[2px] transform -translate-x-2 -translate-y-1/2 w-0 h-0 border-t-[6px] border-b-[6px] border-r-[6px] border-transparent border-r-gray-900"},null,-1))])):X("",!0)])])],2),ae(To,{name:"slide"},{default:ye(()=>[t.mobileMenuOpen?(C(),O("aside",WU,[p("div",{class:"flex justify-end mb-6"},[p("button",{onClick:s,class:"text-gray-500 dark:text-white text-3xl"}," × ")]),p("nav",KU,[ae(a,{onClick:s,to:"/admin","active-class":"bg-gray-700 text-white",class:"flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-300 hover:bg-blue-50 dark:hover:bg-gray-700 transition-colors duration-200"},{default:ye(()=>o[18]||(o[18]=[p("i",{class:"fa-duotone fa-chart-line mr-3 text-lg"},null,-1),ne(" Dashboard ")])),_:1,__:[18]}),ae(a,{onClick:s,to:"/admin/orders","active-class":"bg-gray-700 text-white",class:"flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-300 hover:bg-blue-50 dark:hover:bg-gray-700 transition-colors duration-200"},{default:ye(()=>o[19]||(o[19]=[p("i",{class:"fa-duotone fa-receipt mr-3 text-lg"},null,-1),ne(" Pedidos ")])),_:1,__:[19]}),ae(a,{onClick:s,to:"/admin/products","active-class":"bg-gray-700 text-white",class:"flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-300 hover:bg-blue-50 dark:hover:bg-gray-700 transition-colors duration-200"},{default:ye(()=>o[20]||(o[20]=[p("i",{class:"fa-duotone fa-box-open mr-3 text-lg"},null,-1),ne(" Produtos ")])),_:1,__:[20]}),ae(a,{onClick:s,to:"/admin/categories","active-class":"bg-gray-700 text-white",class:"flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-300 hover:bg-blue-50 dark:hover:bg-gray-700 transition-colors duration-200"},{default:ye(()=>o[21]||(o[21]=[p("i",{class:"fa-duotone fa-tags mr-3 text-lg"},null,-1),ne(" Categorias ")])),_:1,__:[21]}),ae(a,{onClick:s,to:"/admin/whatsapp-qr","active-class":"bg-gray-700 text-white",class:"flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-300 hover:bg-blue-50 dark:hover:bg-gray-700 transition-colors duration-200"},{default:ye(()=>o[22]||(o[22]=[p("i",{class:"fab fa-whatsapp mr-3 text-lg"},null,-1),ne(" WhatsApp QR ")])),_:1,__:[22]}),ae(a,{onClick:s,to:"/admin/settings","active-class":"bg-gray-700 text-white",class:"flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-300 hover:bg-blue-50 dark:hover:bg-gray-700 transition-colors duration-200"},{default:ye(()=>o[23]||(o[23]=[p("i",{class:"fa-duotone fa-tools mr-3 text-lg"},null,-1),ne(" Configurações ")])),_:1,__:[23]}),ae(pa,{class:"border-b-gray-900/30"}),ae(a,{onClick:s,to:"/admin/manage-users","active-class":"bg-gray-700 text-white",class:"flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-300 hover:bg-blue-50 dark:hover:bg-gray-700 transition-colors duration-200"},{default:ye(()=>o[24]||(o[24]=[p("i",{class:"fa-duotone fa-users-gear mr-3 text-lg"},null,-1),ne(" Gerenciar Usuários ")])),_:1,__:[24]}),ae(a,{onClick:s,to:"/admin/reports","active-class":"bg-gray-700 text-white",class:"flex w-full text-left px-3 py-2 rounded-md items-center text-base font-medium text-gray-300 hover:bg-blue-50 dark:hover:bg-gray-700 transition-colors duration-200"},{default:ye(()=>o[25]||(o[25]=[p("i",{class:"fa-duotone fa-chart-pie mr-3 text-lg"},null,-1),ne(" Relatórios ")])),_:1,__:[25]})])])):X("",!0)]),_:1})],64)}}},YU=Yt(GU,[["__scopeId","data-v-42608a79"]]),QU={class:"grid min-h-screen bg-gray-200 dark:bg-gray-900 relative"},XU={class:"flex space-x-6"},JU={class:"flex items-center space-x-4 py-4 group relative"},ZU={key:0,class:"text-gray-700 dark:text-gray-300 sm:block"},e9={class:"text-xs"},t9={__name:"AdminLayout",setup(t){const e=$d(),n=z(!1),s=z(!1),r=z(!1),i=()=>{const h=localStorage.getItem("adminSidebarShortMenu");h!==null&&(r.value=JSON.parse(h))},o=h=>{localStorage.setItem("adminSidebarShortMenu",JSON.stringify(h))},a=()=>{s.value=!s.value},l=()=>{n.value=!n.value},c=()=>{r.value=!r.value,o(r.value)},u=()=>{n.value=!1};return vt(r,h=>{o(h)}),_t(()=>{e.initializeAuth(),i()}),(h,f)=>{var g;return C(),O("div",null,[p("div",QU,[p("header",{class:le(["fixed top-0 lg:top-0.5 left-0 right-0 lg:right-2 z-50 bg-gray-100/30 backdrop-blur-xs dark:bg-gray-800/50 shadow pr-6 pl-4 md:pl-0 flex items-center justify-between h-14 rounded-2xl transform-all duration-300",r.value?"lg:left-25":"lg:left-56"])},[p("div",{class:"flex items-center"},[p("button",{onClick:l,class:"md:hidden text-gray-700 dark:text-white text-2xl mr-4"},f[2]||(f[2]=[p("i",{class:"fa-duotone fa-solid fa-bars-sort"},null,-1)])),f[3]||(f[3]=p("h1",{class:"text-md font-bold p-4 hidden md:flex transition-all duration-300 dark:text-gray-200"},[p("span",null,"Painel Admin")],-1))]),p("div",XU,[f[7]||(f[7]=iu('<div class="flex items-center space-x-8" data-v-cff4ece8><button class="text-gray-700 dark:text-white text-2xl cursor-pointer relative group" data-v-cff4ece8><span class="absolute top-0 -right-2 bg-orange-600 text-white text-xs rounded-full px-1 z-10" data-v-cff4ece8>3</span><i class="fa-duotone fa-bell" data-v-cff4ece8></i><div class="rounded-md text-xs z-20 px-2 py-1 bg-white dark:bg-gray-700 absolute -bottom-5 -left-1/2 shadow-md group-hover:flex hidden group-hover:translate-y-2 animate__animated animate__fadeIn" data-v-cff4ece8> Notificações </div></button><button class="text-gray-700 dark:text-white text-2xl cursor-pointer relative group" data-v-cff4ece8><span class="absolute top-0 -right-2 bg-yellow-600 text-white text-xs rounded-full px-1 z-10" data-v-cff4ece8>3</span><i class="fa-duotone fa-envelope" data-v-cff4ece8></i><div class="rounded-md text-xs z-20 px-2 py-1 bg-white dark:bg-gray-700 absolute -bottom-5 -left-1/2 shadow-md group-hover:flex hidden group-hover:translate-y-2 animate__animated animate__fadeIn" data-v-cff4ece8> Mensagens </div></button><button class="text-gray-700 dark:text-white text-2xl cursor-pointer relative group" data-v-cff4ece8><i class="fa-duotone fa-cogs" data-v-cff4ece8></i><div class="rounded-md text-xs z-20 px-2 py-1 bg-white dark:bg-gray-700 absolute -bottom-5 -left-1/2 shadow-md group-hover:flex hidden group-hover:translate-y-2 animate__animated animate__fadeIn" data-v-cff4ece8> Configurações </div></button></div>',1)),p("div",JU,[(g=te(e).user)!=null&&g.email?(C(),O("div",ZU,[p("div",{onClick:a,class:"flex items-center cursor-pointer"},[f[4]||(f[4]=p("i",{class:"fa-duotone fa-user-circle mr-2 text-2xl dark:text-white"},null,-1)),p("span",e9,U(te(e).user.displayName),1)]),p("ul",{class:le(["w-auto flex-col space-y-4 text-sm dark:text-gray-200 bg-gray-100 dark:bg-gray-800 absolute p-2 rounded-md shadow-lg top-8 -z-50 -right-1 opacity-0 -translate-y-full group-hover:flex group-hover:translate-y-5 group-hover:opacity-100 transition-all duration-200 border border-gray-200 dark:border-gray-800",[{"opacity-100 translate-y-5":s.value}]])},[f[6]||(f[6]=iu('<li class="flex items-center space-x-2 p-2 whitespace-nowrap cursor-pointer hover:bg-gray-200/90 dark:hover:bg-gray-400" data-v-cff4ece8><i class="fa-duotone fa-user" data-v-cff4ece8></i><span class="text-gray-600" data-v-cff4ece8>Perfil</span></li><li class="flex items-center space-x-2 p-2 whitespace-nowrap cursor-pointer hover:bg-gray-200/90 dark:hover:bg-gray-400" data-v-cff4ece8><i class="fa-duotone fa-cog" data-v-cff4ece8></i><span class="text-gray-600" data-v-cff4ece8>Configurações</span></li><li class="flex items-center space-x-2 p-2 whitespace-nowrap cursor-pointer hover:bg-gray-200/90 dark:hover:bg-gray-400" data-v-cff4ece8><i class="fa-duotone fa-lock" data-v-cff4ece8></i><span class="text-gray-600" data-v-cff4ece8>Segurança</span></li>',3)),p("li",{onClick:f[0]||(f[0]=v=>te(e).logout()),class:"flex items-center space-x-2 p-2 whitespace-nowrap cursor-pointer text-red-600 hover:bg-gray-200/90 dark:hover:bg-gray-400"},f[5]||(f[5]=[p("i",{class:"fa-duotone fa-solid fa-right-from-bracket"},null,-1),p("span",null,"Sair",-1)]))],2)])):X("",!0)])])],2),ae(YU,{"mobile-menu-open":n.value,"short-menu":r.value,onToggleMobileMenu:l,onToggleShortMenu:c},null,8,["mobile-menu-open","short-menu"]),p("main",{class:le(["flex-1 mt-14 p-4 transition-all duration-300",r.value?"md:ml-22":"md:ml-52"]),onClick:f[1]||(f[1]=v=>s.value=!1)},[p("div",{class:le(["transition-transform duration-300 ease-in-out",{"translate-x-0":!n.value,"translate-x-52 original-transform":n.value}]),onClick:Tn(u,["stop"])},[Ip(h.$slots,"default",{},void 0,!0)],2)],2)])])}}},Ni=Yt(t9,[["__scopeId","data-v-cff4ece8"]]),n9={class:"grid min-h-screen grid-cols-1 gap-0 md:grid-cols-3 lg:grid-cols-6 relative"},s9={class:"grid grid-col"},r9={__name:"AdminDashboard",setup(t){const e=z(!1),n=z(!0);function s(){e.value=!0}function r(){e.value=!1}const i=z({totalOrders:0,completedOrders:0,pendingOrders:0,totalRevenue:0,totalProducts:0,totalCategories:0,topSellingProducts:[],totalClients:0,totalOrders:0,newClientsLast30Days:0,mostActiveClients:[],deliveryOrders:0,pickupOrders:0,averageDeliveryFee:0,pixPayments:0,cardPayments:0,cashPayments:0});async function o(){var a;n.value=!0;try{const l=i.value;return i.value={completedOrders:l.data.completedOrders||980,pendingOrders:l.data.pendingOrders||150,totalRevenue:l.data.totalRevenue||75000.5,totalProducts:l.data.totalProducts||55,totalCategories:l.data.totalCategories||12,topSellingProducts:l.data.topSellingProducts||[{name:"Pizza de Calabresa",sales:120},{name:"Coca-Cola 2L",sales:90},{name:"Pizza de Chocolate",sales:75}],totalClients:l.data.totalClients||800,totalOrders:l.data.totalOrders||1234,newClientsLast30Days:l.data.newClientsLast30Days||45,mostActiveClients:l.data.mostActiveClients||[{name:"Ana Souza",orders:15},{name:"Carlos Lima",orders:12}],deliveryOrders:l.data.deliveryOrders||850,pickupOrders:l.data.pickupOrders||384,averageDeliveryFee:l.data.averageDeliveryFee||7.5,pixPayments:l.data.pixPayments||3e4,cardPayments:l.data.cardPayments||4e4,cashPayments:l.data.cashPayments||5000.5},console.log("Dados do dashboard carregados:",i.value),i.value}catch(l){console.error("Erro ao carregar dados do dashboard:",((a=l.response)==null?void 0:a.data)||l.message)}finally{n.value=!1}}return _t(()=>{o()}),(a,l)=>{const c=ko("RouterLink");return C(),O("div",n9,[ae(c,{to:"/admin/orders",class:"col-span-1 flex items-center justify-center bg-sky-400 text-white md:col-span-2 lg:col-span-5 cursor-pointer",onClick:r},{default:ye(()=>l[0]||(l[0]=[p("h3",null,"Gerenciar pedidos",-1)])),_:1,__:[0]}),p("div",s9,[ae(c,{to:"/admin/categories",class:"flex flex-col items-center justify-center bg-orange-400 text-orange-800 cursor-pointer relative overflow-hiddn group before:absolute before:content-[''] before:-bottom-[20px] before:right-0 before:w-0 before:h-0 before:border-t-[60px] before:border-t-gray-400 before:border-b-[60px] before:border-b-transparent before:border-r-[100vw] before:border-r-transparent"},{default:ye(()=>l[1]||(l[1]=[p("span",null,"Gerenciar entregadores",-1),p("div",{class:"absolute -bottom-2 -right-2 z-50 text-green-800/60 -rotate-12 group-hover:bottom-0 group-hover:rotate-0 transition-all duration-200 ease-in"},[p("i",{class:"fa-duotone fa-truck fa-4x"})],-1)])),_:1,__:[1]}),ae(c,{to:"/admin/products",class:"flex items-center justify-center bg-green-500 text-green-800 cursor-pointer relative overflow-hidden"},{default:ye(()=>l[2]||(l[2]=[ne(" Gerenciar produtos "),p("div",{class:"absolute -bottom-2 -right-2 z-50 text-green-800/60 -rotate-12"},[p("i",{class:"fa-duotone fa-box fa-4x"})],-1)])),_:1,__:[2]}),ae(c,{to:"/admin/categories",class:"flex flex-col items-center justify-center bg-yellow-500 text-yellow-800 cursor-pointer overflow-hidden relative"},{default:ye(()=>l[3]||(l[3]=[ne(" Gerenciar categorias "),p("div",{class:"absolute -bottom-2 -right-2 z-50 text-green-800/60 -rotate-12"},[p("i",{class:"fa-duotone fa-list fa-4x"})],-1)])),_:1,__:[3]}),ae(c,{to:"/admin/settings",class:"flex flex-col items-center justify-center bg-purple-400 text-white relative overflow-hidden"},{default:ye(()=>l[4]||(l[4]=[ne(" Configurações "),p("div",{class:"absolute -bottom-2 -right-2 z-50 text-green-800/60 -rotate-12"},[p("i",{class:"fa-duotone fa-cogs fa-4x"})],-1)])),_:1,__:[4]})]),p("div",{onClick:s,class:"absolute top-2 left-2 flex h-10 w-10 cursor-pointer items-center justify-center bg-gray-100/60"},l[5]||(l[5]=[p("i",{class:"fa-duotone fa-solid fa-bars-sort"},null,-1)])),p("div",{class:le([e.value?"translate-x-0":"-translate-x-full","absolute top-0 left-0 min-h-svh w-64 transform rounded-r-md bg-gray-200 p-4 shadow-lg duration-200 ease-in"])}," MENU ",2)])}}},i9={class:"flex-shrink-0 space-y-1 text-xs"},o9={class:"font-semibold"},a9={class:"font-light"},l9={class:"font-light"},c9={class:"flex items-center justify-between space-x-4"},u9={class:"font-light"},d9={class:"font-semibold hidden"},h9={class:"font-semibold"},f9={class:"font-light"},p9={key:0,class:"font-semibold"},g9={class:"font-light"},m9={key:1,class:"font-semibold text-orange-500"},y9={class:"flex items-center justify-center space-x-2 flex-col"},v9=["disabled"],b9=["disabled"],hc={__name:"OrderCard",props:{order:{type:Object,required:!0},newOrderIds:{type:Set,default:()=>new Set}},emits:["view-order","assign-order","complete-delivery"],setup(t,{emit:e}){const n=t,s=be(()=>{if(n.newOrderIds.has(n.order.id))return"bg-green-50 dark:bg-green-900/20 border border-green-200/40 dark:border-green-700/40";switch(n.order.delivery_status||n.order.status){case"em_preparo":return"bg-blue-50 dark:bg-blue-900/20 border border-blue-200/40 dark:border-blue-700/40";case"a_caminho":return"bg-purple-50 dark:bg-purple-900/20 border border-purple-200/40 dark:border-purple-700/40";case"assigned":return"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200/40 dark:border-yellow-700/40";default:return"bg-gray-100 dark:bg-gray-800 border border-gray-200/40 dark:border-gray-700/40"}});return(r,i)=>(C(),O("div",{class:le(["p-2 rounded-md border text-gray-800 dark:text-white text-sm flex items-end justify-between shadow-md cursor-pointer hover:shadow-lg transition-all duration-300",s.value]),onClick:i[2]||(i[2]=o=>r.$emit("view-order",t.order))},[p("div",i9,[p("p",o9,[i[3]||(i[3]=ne("Pedido: ")),p("span",a9,U(t.order.id),1)]),p("p",null,[i[4]||(i[4]=p("i",{class:"fa-solid fa-user"},null,-1)),i[5]||(i[5]=ne()),p("span",l9,U(t.order.client),1)]),p("div",c9,[p("div",null,[i[6]||(i[6]=p("i",{class:"fa-solid fa-money-bill-wave mr-2"},null,-1)),p("span",u9,U(te(yt)(t.order.total)),1)]),p("div",null,"Pagamento: "+U(te(Yk)(t.order.payment_status)),1)]),p("p",d9,[i[7]||(i[7]=ne("Status: ")),p("span",{class:le(["font-light",te(dr)(t.order.status)])},U(te(Ti)(t.order.status)),3)]),p("p",h9,[i[8]||(i[8]=p("i",{class:"fa-solid fa-calendar-days"},null,-1)),i[9]||(i[9]=ne()),p("span",f9,U(te(Hg)(t.order.created_at)),1)]),t.order.assigned_delivery_man_name?(C(),O("p",p9,[i[10]||(i[10]=ne("Entregador: ")),p("span",g9,U(t.order.assigned_delivery_man_name),1)])):(C(),O("p",m9,i[11]||(i[11]=[p("span",{class:"font-light"},"Sem entregador",-1)])))]),p("div",y9,[["pending","recebido","em processamento"].includes(t.order.delivery_status||t.order.status)?(C(),O("button",{key:0,onClick:i[0]||(i[0]=Tn(o=>r.$emit("assign-order",t.order),["stop"])),disabled:t.order.assigned_delivery_man_id!==null,class:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-full text-xs transition duration-300 ease-in-out focus:outline-none focus:shadow-outline disabled:opacity-50 disabled:cursor-not-allowed mb-1"}," Atribuir ",8,v9)):X("",!0),t.order.assigned_delivery_man_id&&t.order.delivery_status!=="delivered"?(C(),O("button",{key:1,onClick:i[1]||(i[1]=Tn(o=>r.$emit("complete-delivery",t.order),["stop"])),disabled:t.order.delivery_status==="delivered",class:"bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-full text-xs transition duration-300 ease-in-out focus:outline-none focus:shadow-outline disabled:opacity-50 disabled:cursor-not-allowed"}," Entregue ",8,b9)):X("",!0)])],2))}},_9={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg w-auto max-h-[95vh] overflow-y-auto p-6 relative custom-scrollbar",role:"dialog","aria-modal":"true"},x9={__name:"BaseModal",props:{open:{type:Boolean,default:!1}},emits:["update:open"],setup(t,{emit:e}){const n=e;function s(){n("update:open",!1)}return(r,i)=>t.open?(C(),O("div",{key:0,class:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50 p-4 dark:bg-gray-900/40 m-auto text-gray-900 dark:text-white",onClick:Tn(s,["self"])},[ae(To,{name:"custom-classes",appear:"","enter-active-class":"animate__animated animate__zoomIn animate__faster","leave-active-class":"animate__animated animate__bounceOutRight animate__faster"},{default:ye(()=>[Ie(p("div",_9,[Ip(r.$slots,"default",{},void 0,!0)],512),[[gA,t.open]])]),_:3})])):X("",!0)}},Gs=Yt(x9,[["__scopeId","data-v-ec6dc83f"]]),w9={class:"text-gray-900 dark:text-white relative p-4"},E9={class:"md:text-2xl font-bold mb-4 border-b border-gray-300 dark:border-gray-900 pb-2"},k9={class:"text-orange-500 italic font-normal"},T9={class:"grid grid-cols-1 md:grid-cols-2 gap-2 md:gap-4 text-gray-700 dark:text-gray-300 text-md"},I9={class:"col-span-full mt-4"},S9={key:0},A9={key:0},C9={key:1},P9={class:"col-span-full mt-4"},R9=["value"],O9={key:0},D9={class:"text-sm space-y-1"},M9={class:"font-semibold"},N9={key:0,class:"text-xs text-gray-600 dark:text-gray-400"},L9={class:"mt-6 flex justify-end space-x-4 border-t border-gray-300 dark:border-gray-900 pt-4"},V9=["disabled"],$9={__name:"OrderDetailsModal",props:{open:{type:Boolean,required:!0},order:{type:Object,default:null},statusOptions:{type:Array,default:()=>[]},isUpdatingStatus:{type:Boolean,default:!1}},emits:["update:open","update-status","close"],setup(t,{emit:e}){const n=t,s=z("");return vt(()=>{var r;return(r=n.order)==null?void 0:r.status},r=>{r&&(s.value=r)},{immediate:!0}),(r,i)=>(C(),Je(Gs,{open:t.open,"onUpdate:open":i[4]||(i[4]=o=>r.$emit("update:open",o))},{default:ye(()=>{var o,a,l,c,u,h,f,g,v,m,b,I,T,D,L,M,$,E,_,w,A,k;return[p("div",w9,[p("button",{onClick:i[0]||(i[0]=S=>r.$emit("close")),class:"absolute -top-3 -right-3 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white text-xl"}," × "),p("h3",E9,[i[5]||(i[5]=ne(" Detalhes do Pedido ")),p("span",k9,"#"+U((o=t.order)==null?void 0:o.id),1)]),p("div",T9,[p("div",null,[i[6]||(i[6]=p("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Cliente:",-1)),ne(" "+U((a=t.order)==null?void 0:a.client),1)]),p("div",null,[i[7]||(i[7]=p("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Telefone:",-1)),ne(" "+U(((l=t.order)==null?void 0:l.telefone)||((c=t.order)==null?void 0:c.phone)),1)]),p("div",null,[i[8]||(i[8]=p("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Total:",-1)),ne(" "+U(te(yt)((u=t.order)==null?void 0:u.total)),1)]),p("div",null,[i[9]||(i[9]=p("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Subtotal:",-1)),ne(" "+U(te(yt)((h=t.order)==null?void 0:h.subtotal)),1)]),p("div",null,[i[10]||(i[10]=p("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Taxa de Entrega:",-1)),ne(" "+U(te(yt)(((f=t.order)==null?void 0:f.taxaEntrega)||((g=t.order)==null?void 0:g.fee))),1)]),p("div",null,[i[11]||(i[11]=p("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Tipo de Entrega:",-1)),ne(" "+U(((v=t.order)==null?void 0:v.tipoEntrega)||((m=t.order)==null?void 0:m.delivery_type)),1)]),p("div",null,[i[12]||(i[12]=p("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Método de Pagamento:",-1)),ne(" "+U(te(La)(((b=t.order)==null?void 0:b.metodoPagamento)||((I=t.order)==null?void 0:I.payment_method))),1)]),p("div",null,[i[13]||(i[13]=p("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Status do Pagamento:",-1)),ne(" "+U(te(Yk)((T=t.order)==null?void 0:T.payment_status)),1)]),p("div",null,[i[14]||(i[14]=p("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Data do Pedido:",-1)),ne(" "+U(te(Hg)((D=t.order)==null?void 0:D.created_at)),1)]),p("div",null,[i[15]||(i[15]=p("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Entregador:",-1)),ne(" "+U(((L=t.order)==null?void 0:L.assigned_delivery_man_name)||((M=t.order)!=null&&M.assigned_delivery_man_id?(($=t.order)==null?void 0:$.assigned_delivery_man_id.substring(0,8))+"...":"Não atribuído")),1)]),p("div",null,[i[16]||(i[16]=p("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Status Entrega:",-1)),p("span",{class:le(te(dr)((E=t.order)==null?void 0:E.delivery_status))},U(te(Ti)(((_=t.order)==null?void 0:_.delivery_status)||"pendente")),3)])]),p("div",I9,[i[17]||(i[17]=p("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Endereço:",-1)),(w=t.order)!=null&&w.address&&t.order.address.length>0?(C(),O("div",S9,[(C(!0),O(xe,null,Ne(t.order.address,(S,R)=>(C(),O("p",{key:R},[ne(U(S.street)+", "+U(S.neighborhood)+" ",1),S.reference?(C(),O("span",A9," (Ref: "+U(S.reference)+")",1)):X("",!0)]))),128))])):(C(),O("div",C9,"Nenhum endereço fornecido."))]),p("div",P9,[i[18]||(i[18]=p("span",{class:"font-semibold text-gray-600 dark:text-gray-400"},"Status do Pedido:",-1)),Ie(p("select",{"onUpdate:modelValue":i[1]||(i[1]=S=>s.value=S),class:"p-2 bg-gray-200 dark:bg-gray-700 border border-gray-400 dark:border-gray-600 rounded-md text-gray-800 dark:text-white focus:ring-blue-500 focus:border-blue-500 ml-2 mt-2"},[(C(!0),O(xe,null,Ne(t.statusOptions,S=>(C(),O("option",{key:S,value:S},U(te(Ti)(S)),9,R9))),128))],512),[[us,s.value]])]),(A=t.order)!=null&&A.itens&&t.order.itens.length?(C(),O("div",O9,[i[20]||(i[20]=p("h4",{class:"font-semibold mt-6 mb-2 text-gray-700 dark:text-gray-300 border-t border-gray-300 dark:border-gray-900 pt-4"}," Itens do Pedido: ",-1)),p("ul",D9,[(C(!0),O(xe,null,Ne(t.order.itens,(S,R)=>{var me,Te;return C(),O("li",{key:R,class:"text-gray-700 dark:text-gray-300"},[p("p",M9,U((me=S.item)==null?void 0:me.replaceAll("r$","R$")),1),S.adicionais?(C(),O("p",N9,[i[19]||(i[19]=p("span",{class:"italic"},"Adicionais:",-1)),ne(" "+U((Te=S.adicionais)==null?void 0:Te.replaceAll("r$","R$")),1)])):X("",!0)])}),128))])])):X("",!0),p("div",L9,[p("button",{onClick:i[2]||(i[2]=S=>{var R;return r.$emit("update-status",(R=t.order)==null?void 0:R.id,s.value)}),disabled:t.isUpdatingStatus||!((k=t.order)!=null&&k.id)||!s.value,class:"px-5 py-1 bg-green-600 hover:bg-green-700 disabled:bg-green-400 disabled:cursor-not-allowed text-white text-md rounded-md transition-colors duration-200"},U(t.isUpdatingStatus?"Salvando...":"Salvar"),9,V9),p("button",{onClick:i[3]||(i[3]=S=>r.$emit("close")),class:"px-5 py-1 bg-red-600 hover:bg-red-800 text-white text-md rounded-md transition-colors duration-200"}," Cancelar ")])])]}),_:1},8,["open"]))}},F9={class:"bg-white rounded-lg shadow-xl w-full max-w-md p-6"},U9={class:"text-2xl font-bold text-gray-800 mb-4"},B9={key:0},j9=["value"],z9={key:1,class:"text-red-600 text-center py-4"},H9={class:"flex justify-end mt-6 space-x-3"},q9=["disabled"],W9={key:2,class:"text-red-500 text-sm mt-4"},K9={__name:"AssignDeliveryModal",props:{open:{type:Boolean,required:!0},order:{type:Object,default:null},availableDeliveryMen:{type:Array,default:()=>[]},assignLoading:{type:Boolean,default:!1},assignError:{type:String,default:null}},emits:["update:open","assign-confirmed","close"],setup(t,{emit:e}){const n=t,s=z("");return vt(()=>n.open,r=>{r&&(s.value="")}),(r,i)=>(C(),Je(Gs,{open:t.open,"onUpdate:open":i[3]||(i[3]=o=>r.$emit("update:open",o))},{default:ye(()=>{var o;return[p("div",F9,[p("h2",U9,"Atribuir Entregador ao Pedido "+U((o=t.order)==null?void 0:o.id),1),t.availableDeliveryMen.length?(C(),O("div",B9,[i[5]||(i[5]=p("label",{for:"deliveryManSelect",class:"block text-gray-700 text-sm font-bold mb-2"}," Selecione um Entregador Disponível: ",-1)),Ie(p("select",{id:"deliveryManSelect","onUpdate:modelValue":i[0]||(i[0]=a=>s.value=a),class:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"},[i[4]||(i[4]=p("option",{value:""},"-- Selecione --",-1)),(C(!0),O(xe,null,Ne(t.availableDeliveryMen,a=>(C(),O("option",{key:a.id,value:a.id},U(a.name)+" ("+U(a.vehicle_type?te(Ti)(a.vehicle_type):"N/A")+") ",9,j9))),128))],512),[[us,s.value]])])):(C(),O("div",z9," Nenhum entregador disponível no momento. ")),p("div",H9,[p("button",{onClick:i[1]||(i[1]=a=>r.$emit("close")),class:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-full transition duration-300 ease-in-out"}," Cancelar "),p("button",{onClick:i[2]||(i[2]=a=>r.$emit("assign-confirmed",t.order.id,s.value)),disabled:!s.value||t.assignLoading,class:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full transition duration-300 ease-in-out focus:outline-none focus:shadow-outline disabled:opacity-50 disabled:cursor-not-allowed"},U(t.assignLoading?"Atribuindo...":"Atribuir Pedido"),9,q9)]),t.assignError?(C(),O("div",W9,U(t.assignError),1)):X("",!0)])]}),_:1},8,["open"]))}},G9={class:"bg-white rounded-lg shadow-xl w-full max-w-sm p-6 text-center"},Y9={class:"text-gray-700 mb-6"},Q9={class:"font-semibold"},X9={class:"flex justify-center space-x-3"},J9=["disabled"],Z9={key:0,class:"text-red-500 text-sm mt-4"},eB={__name:"CompleteDeliveryModal",props:{open:{type:Boolean,required:!0},order:{type:Object,default:null},completeLoading:{type:Boolean,default:!1},completeError:{type:String,default:null}},emits:["update:open","complete-confirmed","close"],setup(t,{emit:e}){return(n,s)=>(C(),Je(Gs,{open:t.open,"onUpdate:open":s[2]||(s[2]=r=>n.$emit("update:open",r))},{default:ye(()=>{var r;return[p("div",G9,[s[5]||(s[5]=p("h2",{class:"text-2xl font-bold text-gray-800 mb-4"},"Confirmar Entrega",-1)),p("p",Y9,[s[3]||(s[3]=ne("Tem certeza que deseja marcar o pedido ")),p("span",Q9,U((r=t.order)==null?void 0:r.id),1),s[4]||(s[4]=ne(" como entregue?"))]),p("div",X9,[p("button",{onClick:s[0]||(s[0]=i=>n.$emit("close")),class:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-full transition duration-300 ease-in-out"}," Cancelar "),p("button",{onClick:s[1]||(s[1]=i=>{var o,a;return n.$emit("complete-confirmed",(o=t.order)==null?void 0:o.assigned_delivery_man_id,(a=t.order)==null?void 0:a.id)}),disabled:t.completeLoading,class:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-full transition duration-300 ease-in-out focus:outline-none focus:shadow-outline disabled:opacity-50 disabled:cursor-not-allowed"},U(t.completeLoading?"Finalizando...":"Confirmar Entrega"),9,J9)]),t.completeError?(C(),O("div",Z9,U(t.completeError),1)):X("",!0)])]}),_:1},8,["open"]))}},tB={class:"space-y-4 p-4 bg-white dark:bg-gray-800 rounded-lg shadow-xl"},nB={class:"flex items-center justify-between"},sB={class:"text-2xl font-bold text-gray-700 dark:text-white"},rB={class:"inline-flex items-center ml-2"},iB={class:"text-right"},oB={class:"text-sm text-gray-600 dark:text-gray-400"},aB={class:"font-semibold"},lB={class:"text-xs text-gray-500 dark:text-gray-500"},cB={key:0,class:"text-center py-8"},uB={key:1,class:"text-center py-8"},dB={key:2,class:"flex flex-col lg:flex-row gap-4"},hB={class:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-4 gap-x-4 flex-grow"},fB={class:"bg-green-700/10 rounded-lg"},pB={class:"p-2 text-white mb-4 border-b border-green-900/30 rounded-t-md bg-green-700 bg-linear from-green-800 via-green-700 to-green-500"},gB={class:"ml-2 px-2 py-1 text-xs rounded-full bg-green-200 text-green-800 dark:bg-green-800 dark:text-green-200"},mB={class:"space-y-4 max-h-[calc(100vh-250px)] overflow-y-auto pr-2"},yB={key:0,class:"text-center text-gray-500 dark:text-gray-400 py-4"},vB={class:"bg-sky-700/10 rounded-lg"},bB={class:"text-white rounded-t-md mb-4 border-b p-2 border-gray-300 dark:border-gray-700 bg-sky-700 bg-linear from-sky-800 via-sky-700 to-sky-500"},_B={class:"ml-2 px-2 py-1 text-xs rounded-full bg-blue-200 text-blue-800 dark:bg-blue-800 dark:text-blue-200"},xB={class:"space-y-4 max-h-[calc(100vh-250px)] overflow-y-auto pr-2"},wB={key:0,class:"text-center text-gray-500 dark:text-gray-400 py-4"},EB={class:"bg-purple-700/10 rounded-lg"},kB={class:"bg-purple-700 bg-linear from-purple-800 via-purple-700 to-purple-500 p-2 mb-4 rounded-t-md text-white"},TB={class:"ml-2 px-2 py-1 text-xs font-semibold rounded-full bg-purple-200 text-purple-800 dark:bg-purple-800 dark:text-purple-200"},IB={class:"space-y-4 max-h-[calc(100vh-250px)] overflow-y-auto pr-2"},SB={key:0,class:"text-center text-gray-500 dark:text-gray-400 py-4"},AB={class:"lg:w-52 bg-gray-200 dark:bg-gray-900 p-4 rounded-lg flex-shrink-0"},CB={class:"space-y-2"},PB={key:3,class:"mt-8"},RB={class:"text-xl font-bold text-gray-900 dark:text-white mb-4 border-b pb-2 border-gray-300 dark:border-gray-700"},OB={class:"ml-2 px-2 py-1 text-xs font-semibold rounded-full bg-gray-200 text-gray-800 dark:bg-gray-900 inset-shadow-red-500 shaodw-md dark:text-gray-200"},DB={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},MB={key:4,class:"mt-8 text-center text-gray-500 dark:text-gray-400 py-4"},NB={key:5,class:"bg-red-100 dark:bg-red-900/20 border border-red-300 dark:border-red-700 text-red-700 dark:text-red-400 px-4 py-3 rounded relative"},LB={class:"block sm:inline"},VB={__name:"Orders",setup(t){const e=z([]),n=z(null),s=z(!1),r=z(!0),i=z(!1),o=z(""),a=z(""),l=z(!1),c=z(new Set),u=z([]),h=z(new Map),f=z(!1),g=z(!1),v=z(!1),m=z(null),b=z(!1),I=z(null),T=z(null),D=Ek(Dd);let L=null;const M=["recebido","em_preparo","a_caminho","entregue","cancelado","em processamento"],$=be(()=>e.value.filter(ie=>["recebido","em processamento"].includes(ie.status)&&ie.payment_status!=="cancelled"&&ie.payment_status!=="pending").sort((ie,ue)=>ns(ue.created_at)-ns(ie.created_at))),E=be(()=>e.value.filter(ie=>ie.status==="em_preparo").sort((ie,ue)=>ns(ue.created_at)-ns(ie.created_at))),_=be(()=>e.value.filter(ie=>ie.status==="a_caminho").sort((ie,ue)=>ns(ue.created_at)-ns(ie.created_at))),w=be(()=>e.value.filter(ie=>["entregue","cancelado"].includes(ie.status)).sort((ie,ue)=>ns(ue.created_at)-ns(ie.created_at))),A=ie=>{if(!ie||!ie.id){console.warn("Tentativa de visualizar pedido nulo ou sem ID."),o.value="Erro: Pedido sem ID válido para visualização.";return}n.value=JSON.parse(JSON.stringify(ie)),s.value=!0,c.value.has(ie.id)&&c.value.delete(ie.id)},k=ie=>{n.value=ie,f.value=!0},S=ie=>{n.value=ie,g.value=!0},R=()=>{n.value=null,s.value=!1,f.value=!1,g.value=!1,m.value=null,I.value=null,l.value=!1,o.value.includes("Erro ao atualizar pedido")&&(o.value="")},me=async(ie,ue)=>{if(!ie||!ue){console.warn("Dados incompletos para atualizar status."),o.value="Erro: ID do pedido ou novo status ausente.";return}l.value=!0,o.value="";try{const _e=l$(D,"orders",ie);await T$(_e,{status:ue,updated_at:new Date});try{await Ge.put(`/orders/${ie}`,{status:ue})}catch(je){console.warn("Erro ao atualizar via API (Firestore foi atualizado):",je)}F(`Status do pedido ${ie} atualizado para: ${Ti(ue)}`),R()}catch(_e){console.error("Erro ao atualizar status do pedido:",_e),o.value=`Erro ao atualizar pedido: ${_e.message}`}finally{l.value=!1}},Te=async(ie,ue)=>{var _e,je;if(!ie||!ue){m.value="Por favor, selecione um pedido e um entregador.";return}v.value=!0,m.value=null;try{await Ge.post(`/delivery-men/${ue}/assign-order`,{orderId:ie}),F("Pedido atribuído com sucesso!"),R()}catch(H){m.value="Falha ao atribuir pedido. "+(((je=(_e=H.response)==null?void 0:_e.data)==null?void 0:je.error)||H.message),console.error("Erro ao atribuir pedido:",H)}finally{v.value=!1}},se=async(ie,ue)=>{var _e,je;if(!ue||!ie){I.value="Nenhum pedido ou entregador selecionado para finalizar.";return}b.value=!0,I.value=null;try{await Ge.post(`/delivery-men/${ie}/complete-delivery`,{orderId:ue}),F("Entrega finalizada com sucesso!"),R()}catch(H){I.value="Falha ao finalizar entrega. "+(((je=(_e=H.response)==null?void 0:_e.data)==null?void 0:je.error)||H.message),console.error("Erro ao finalizar entrega:",H)}finally{b.value=!1}},F=ie=>{T.value=ie,setTimeout(()=>{T.value=null},3e3)},K=async()=>{try{const ie=await Ge.get("/delivery-men");h.value.clear(),ie.data.forEach(ue=>{h.value.set(ue.id,ue.name)})}catch(ie){console.error("Erro ao buscar todos os entregadores para o mapa:",ie)}},Re=async()=>{try{const ie=await Ge.get("/delivery-men?available=true");u.value=ie.data}catch(ie){console.error("Erro ao buscar entregadores disponíveis:",ie)}};function mt(){try{const ie=_$(a$(D,"orders"),x$("created_at","desc"));L=I$(ie,async ue=>{const _e=new Set(e.value.map(H=>H.id)),je=[];for(const H of ue.docChanges()){let ee={id:H.doc.id,...H.doc.data()};if(ee.assigned_delivery_man_id&&!ee.assigned_delivery_man_name&&(ee.assigned_delivery_man_name=h.value.get(ee.assigned_delivery_man_id)||"Carregando...",ee.assigned_delivery_man_name==="Carregando..."))try{const oe=await Ge.get(`/delivery-men/${ee.assigned_delivery_man_id}`);h.value.set(ee.assigned_delivery_man_id,oe.data.name),ee.assigned_delivery_man_name=oe.data.name}catch(oe){console.error(`Falha ao buscar nome do entregador ${ee.assigned_delivery_man_id}:`,oe),ee.assigned_delivery_man_name="Entregador desconhecido"}if(H.type==="added"){const oe=["recebido","em processamento"].includes(ee.status)&&ee.payment_status!=="cancelled"&&ee.payment_status!=="pending";if(!_e.has(ee.id))oe&&(c.value.add(ee.id),"Notification"in window&&Notification.permission==="granted"&&new Notification("Novo Pedido!",{body:`Pedido #${ee.id} de ${ee.client}`,icon:"/assets/image/old_nonna.png"})),je.unshift(ee);else{const ge=e.value.findIndex(Ye=>Ye.id===ee.id);ge!==-1&&(e.value[ge]=ee)}}else if(H.type==="modified"){const oe=e.value.findIndex(ge=>ge.id===ee.id);oe!==-1&&(e.value[oe]=ee,["recebido","em processamento"].includes(ee.status)&&ee.payment_status!=="cancelled"&&ee.payment_status!=="pending"?c.value.add(ee.id):c.value.delete(ee.id))}else if(H.type==="removed"){const oe=e.value.findIndex(ge=>ge.id===ee.id);oe!==-1&&e.value.splice(oe,1),c.value.delete(ee.id)}}je.length>0&&(e.value=[...je,...e.value.filter(H=>!je.some(ee=>ee.id===H.id))],e.value.sort((H,ee)=>ns(ee.created_at)-ns(H.created_at))),i.value=!0,o.value="",a.value=new Date().toLocaleTimeString(),r.value=!1,await Re()},ue=>{console.error("Erro no listener Firestore:",ue),o.value=`Erro de conexão: ${ue.message}`,i.value=!1,r.value=!1,setTimeout(()=>{i.value||gt()},5e3)})}catch(ie){console.error("Erro ao configurar listener:",ie),o.value=`Erro ao conectar: ${ie.message}`,r.value=!1}}function gt(){console.log("Tentando reconectar..."),o.value="",r.value=!0,L&&L(),mt()}async function Ve(){try{const ie=await Ge.get("/orders");e.value=Array.isArray(ie.data)?ie.data:[],console.log("Pedidos carregados via API como fallback"),e.value=await Promise.all(e.value.map(async ue=>{if(ue.assigned_delivery_man_id){let _e=h.value.get(ue.assigned_delivery_man_id);if(!_e)try{_e=(await Ge.get(`/delivery-men/${ue.assigned_delivery_man_id}`)).data.name,h.value.set(ue.assigned_delivery_man_id,_e)}catch(je){console.error(`Erro ao buscar nome do entregador ${ue.assigned_delivery_man_id} no fallback API:`,je),_e="Entregador desconhecido"}ue.assigned_delivery_man_name=_e}return ue}))}catch(ie){console.error("Erro ao carregar pedidos via API:",ie)}}return _t(async()=>{console.log("Iniciando conexão em tempo real com Firestore..."),"Notification"in window&&Notification.permission==="default"&&await Notification.requestPermission(),await K(),await Re(),mt(),setTimeout(()=>{!i.value&&e.value.length===0&&(console.warn("Firestore não conectou, usando API como fallback"),Ve(),r.value=!1)},1e4)}),Ai(()=>{L&&(L(),console.log("Listener Firestore removido"))}),(ie,ue)=>(C(),O("div",null,[ae(Ni,null,{default:ye(()=>[p("div",tB,[p("div",nB,[p("div",null,[p("h2",sB,[ue[3]||(ue[3]=ne(" Pedidos ")),p("span",rB,[p("div",{class:le([i.value?"w-2 h-2 bg-green-500 rounded-full animate-pulse":"w-2 h-2 bg-red-500 rounded-full"])},null,2),p("span",{class:le([i.value?"text-xs text-green-600 dark:text-green-400 ml-1":"text-xs text-red-600 dark:text-red-400 ml-1"])},U(i.value?"Tempo real":"Desconectado"),3)])]),ue[4]||(ue[4]=p("p",{class:"text-gray-600 dark:text-gray-400 text-xs font-normal italic"}," Gerencie todos os pedidos recebidos em tempo real. ",-1))]),p("div",iB,[p("p",oB,[ue[5]||(ue[5]=ne(" Total de pedidos: ")),p("span",aB,U(e.value.length),1)]),p("p",lB," Última atualização: "+U(a.value),1)])]),r.value?(C(),O("div",cB,ue[6]||(ue[6]=[p("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-400 dark:border-gray-600 mx-auto"},null,-1),p("p",{class:"text-gray-600 dark:text-gray-400 mt-4"},"Carregando pedidos...",-1)]))):e.value.length===0?(C(),O("div",uB,ue[7]||(ue[7]=[p("p",{class:"text-gray-600 dark:text-gray-400 text-lg"},"Nenhum pedido encontrado.",-1)]))):(C(),O("div",dB,[p("div",hB,[p("div",fB,[p("h3",pB,[ue[8]||(ue[8]=p("span",null,"Novos pedidos",-1)),p("span",gB,U($.value.length),1)]),p("div",mB,[(C(!0),O(xe,null,Ne($.value,_e=>(C(),Je(hc,{key:_e.id,order:_e,newOrderIds:c.value,onViewOrder:A,onAssignOrder:k,onCompleteDelivery:S},null,8,["order","newOrderIds"]))),128)),$.value.length===0?(C(),O("p",yB,"Nenhum pedido novo.")):X("",!0)])]),p("div",vB,[p("h3",bB,[ue[9]||(ue[9]=ne(" Em preparo ")),p("span",_B,U(E.value.length),1)]),p("div",xB,[(C(!0),O(xe,null,Ne(E.value,_e=>(C(),Je(hc,{key:_e.id,order:_e,newOrderIds:c.value,onViewOrder:A,onAssignOrder:k,onCompleteDelivery:S},null,8,["order","newOrderIds"]))),128)),E.value.length===0?(C(),O("p",wB,"Nenhum pedido em preparo.")):X("",!0)])]),p("div",EB,[p("h3",kB,[ue[10]||(ue[10]=ne(" A caminho ")),p("span",TB,U(_.value.length),1)]),p("div",IB,[(C(!0),O(xe,null,Ne(_.value,_e=>(C(),Je(hc,{key:_e.id,order:_e,newOrderIds:c.value,onViewOrder:A,onAssignOrder:k,onCompleteDelivery:S},null,8,["order","newOrderIds"]))),128)),_.value.length===0?(C(),O("p",SB,"Nenhum pedido a caminho.")):X("",!0)])])]),p("div",AB,[ue[11]||(ue[11]=p("h3",{class:"text-lg font-bold text-gray-900 dark:text-white mb-4 border-b pb-2 border-gray-300 dark:border-gray-700"}," Legenda",-1)),p("ul",CB,[p("li",null,[p("span",{class:le(te(dr)("recebido"))},"Recebido",2)]),p("li",null,[p("span",{class:le(te(dr)("em processamento"))},"Em Processamento",2)]),p("li",null,[p("span",{class:le(te(dr)("em_preparo"))},"Em Preparo",2)]),p("li",null,[p("span",{class:le(te(dr)("a_caminho"))},"A Caminho",2)]),p("li",null,[p("span",{class:le(te(dr)("entregue"))},"Entregue",2)]),p("li",null,[p("span",{class:le(te(dr)("cancelado"))},"Cancelado",2)])])])])),w.value.length>0?(C(),O("div",PB,[p("h3",RB,[ue[12]||(ue[12]=ne(" Pedidos finalizados ")),p("span",OB,U(w.value.length),1)]),p("div",DB,[(C(!0),O(xe,null,Ne(w.value,_e=>(C(),Je(hc,{key:_e.id,order:_e,newOrderIds:c.value,onViewOrder:A,onAssignOrder:k,onCompleteDelivery:S},null,8,["order","newOrderIds"]))),128))])])):!r.value&&e.value.length>0?(C(),O("div",MB," Nenhum pedido finalizado. ")):X("",!0),o.value?(C(),O("div",NB,[ue[13]||(ue[13]=p("strong",{class:"font-bold"},"Erro de conexão!",-1)),p("span",LB,U(o.value),1),p("button",{onClick:gt,class:"ml-2 underline hover:no-underline"}," Tentar reconectar ")])):X("",!0)])]),_:1}),ae($9,{open:s.value,order:n.value,statusOptions:M,isUpdatingStatus:l.value,"onUpdate:open":ue[0]||(ue[0]=_e=>s.value=_e),onUpdateStatus:me,onClose:R},null,8,["open","order","isUpdatingStatus"]),ae(K9,{open:f.value,order:n.value,availableDeliveryMen:u.value,assignLoading:v.value,assignError:m.value,"onUpdate:open":ue[1]||(ue[1]=_e=>f.value=_e),onAssignConfirmed:Te,onClose:R},null,8,["open","order","availableDeliveryMen","assignLoading","assignError"]),ae(eB,{open:g.value,order:n.value,completeLoading:b.value,completeError:I.value,"onUpdate:open":ue[2]||(ue[2]=_e=>g.value=_e),onCompleteConfirmed:se,onClose:R},null,8,["open","order","completeLoading","completeError"]),T.value?(C(),O("div",{key:0,class:le(["fixed bottom-4 right-4 bg-green-500 text-white px-6 py-3 rounded-full shadow-lg transition-all duration-300 ease-in-out transform",{"translate-x-0 opacity-100":T.value,"translate-x-full opacity-0":!T.value}])},U(T.value),3)):X("",!0)]))}},$B=["onClick"],FB=["onKeydown"],UB={key:0,class:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md shadow-lg max-h-60 overflow-y-auto custom-scrollbar"},BB={class:"py-1"},jB=["onClick","onMouseenter"],zB={key:0,class:"px-4 py-2 text-gray-500 dark:text-gray-400 italic"},HB={__name:"MultiSelectCategoryInput",props:{modelValue:{type:Array,default:()=>[]},categories:{type:Array,required:!0}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,s=e,r=z(""),i=z(!1),o=z(-1),a=z(null),l=be(()=>n.categories.filter(M=>n.modelValue.includes(M.id)));be(()=>l.value.map(M=>M.name).join(" x "));const c=be(()=>{const M=r.value.toLowerCase();return n.categories.filter($=>$.name.toLowerCase().includes(M)&&!u($.id))});function u(M){return n.modelValue.includes(M)}function h(){i.value=!i.value,i.value&&(r.value="",o.value=-1)}function f(){i.value=!0,o.value=-1}function g(){i.value=!1,r.value=""}function v(){o.value=-1,i.value=!0}function m(M){if(!u(M)){const $=[...n.modelValue,M];s("update:modelValue",$)}r.value=""}function b(M){const $=n.modelValue.filter(E=>E!==M);s("update:modelValue",$),f()}function I(){if(c.value.length===0){o.value=-1;return}o.value=(o.value+1)%c.value.length}function T(){if(c.value.length===0){o.value=-1;return}o.value=(o.value-1+c.value.length)%c.value.length}function D(){o.value!==-1&&c.value[o.value]&&m(c.value[o.value].id)}function L(M){a.value&&!a.value.contains(M.target)&&g()}return _t(()=>{document.addEventListener("click",L)}),Ai(()=>{document.removeEventListener("click",L)}),(M,$)=>(C(),O("div",{class:"relative",ref_key:"multiSelectContainer",ref:a},[p("div",{class:"w-full p-3 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md flex items-center flex-wrap gap-2 cursor-pointer min-h-[48px]",onClick:Tn(h,["stop"])},[$[1]||($[1]=p("span",{class:"text-gray-500 dark:text-gray-400"}," Selecione categorias... ",-1)),(C(!0),O(xe,null,Ne(l.value,E=>(C(),O("div",{key:E.id,class:"flex items-center bg-blue-500 text-white text-xs px-2 py-1 rounded-full"},[ne(U(E.name)+" ",1),p("button",{onClick:Tn(_=>b(E.id),["stop"]),class:"ml-1 text-white hover:text-blue-100 focus:outline-none"}," × ",8,$B)]))),128)),Ie(p("input",{type:"text","onUpdate:modelValue":$[0]||($[0]=E=>r.value=E),onInput:v,onFocus:f,onKeydown:[mh(Tn(I,["prevent"]),["down"]),mh(Tn(T,["prevent"]),["up"]),mh(Tn(D,["prevent"]),["enter"])],placeholder:"Buscar categorias...",class:"flex-grow p-0 bg-transparent border-none focus:outline-none text-gray-900 dark:text-white",style:Eo({width:r.value.length?r.value.length*8+20+"px":"150px"})},null,44,FB),[[Ze,r.value]])]),i.value?(C(),O("div",UB,[p("ul",BB,[(C(!0),O(xe,null,Ne(c.value,(E,_)=>(C(),O("li",{key:E.id,onClick:w=>m(E.id),onMouseenter:w=>o.value=_,class:le({"px-4 py-2 cursor-pointer hover:bg-blue-500 hover:text-white":!0,"bg-blue-500 text-white":o.value===_,"text-gray-900 dark:text-white":o.value!==_,"opacity-50 cursor-not-allowed":u(E.id)})},U(E.name),43,jB))),128)),c.value.length===0?(C(),O("li",zB," Nenhuma categoria encontrada. ")):X("",!0)])])):X("",!0)],512))}},qB=Yt(HB,[["__scopeId","data-v-a5c6d68f"]]),WB={class:"space-y-6 p-4 md:p-8 bg-white dark:bg-gray-900 rounded-lg shadow-xl"},KB={key:0,class:"text-center py-8"},GB={key:1,class:"text-center py-8"},YB={key:2,class:"overflow-x-auto mt-4 rounded-lg"},QB={class:"min-w-full table-auto bg-gray-100 dark:bg-gray-800"},XB={class:"text-gray-800 dark:text-gray-200 text-sm font-light"},JB={class:"py-2 px-2 text-left whitespace-nowrap hidden md:table-cell"},ZB=["src","alt"],e8={class:"py-3 text-left whitespace-nowrap"},t8={key:0,class:"text-xs text-gray-600 dark:text-gray-400 mt-1"},n8={class:"py-3 text-left whitespace-pre-line"},s8={key:0},r8={key:0},i8={key:1},o8={key:1,class:"text-red-600 dark:text-red-400"},a8={class:"py-3 text-left"},l8={class:"py-3 text-right"},c8=["onClick"],u8=["onClick"],d8={class:"flex flex-col md:flex-row justify-between items-center mt-6 text-gray-900 dark:text-white p-4 bg-gray-100 dark:bg-gray-800 rounded-lg"},h8={class:"mb-4 md:mb-0"},f8={class:"flex items-center gap-2"},p8={class:"relative"},g8=["disabled"],m8={class:"px-2"},y8=["disabled"],v8={class:""},b8={class:"text-2xl font-bold mb-4 border-b border-gray-300 dark:border-gray-700 pb-2"},_8={key:0,class:"text-center py-4"},x8={key:1,class:"space-y-4"},w8={class:"border border-gray-300 dark:border-gray-700 p-3 rounded-md"},E8=["onUpdate:modelValue"],k8=["onUpdate:modelValue"],T8=["onClick"],I8=["onUpdate:modelValue"],S8=["onUpdate:modelValue"],A8=["onClick"],C8={class:"flex justify-end mt-6 gap-3 border-t border-gray-300 dark:border-gray-700 pt-4"},P8=["disabled"],R8=["disabled"],O8={class:"text-lg mb-4"},D8={class:"text-red-600 dark:text-red-400"},M8={class:"mt-6 flex justify-end gap-3"},N8=["disabled"],L8=["disabled"],V8={__name:"Products",setup(t){const e=z([]),n=z([]),s=z(!1),r=z(!1),i=z(null),o=z(1),a=z(10),l=z(0),c=z(!0),u=z(!1),h=be(()=>{const A=(o.value-1)*a.value;return Array.isArray(e.value)?e.value.slice(A,A+a.value):[]}),f=be(()=>Math.ceil(l.value/a.value)),g=z({id:null,name:"",slug:"",description:"",img:"",sizes:[],price:[],extras:[],categoryIds:[]});function v(){g.value={id:null,name:"",slug:"",description:"",img:"",sizes:[],price:[],extras:[],categoryIds:[]}}vt(()=>g.value.name,A=>{g.value.slug=A.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")});function m(A=null){if(v(),A){const k=JSON.parse(JSON.stringify(A));for(g.value.id=k.id,g.value.name=k.name,g.value.slug=k.slug,g.value.description=k.description,g.value.img=k.img,g.value.extras=k.extras||[],g.value.categoryIds=k.categoryIds||[],g.value.price=Array.isArray(k.price)?k.price:[],g.value.sizes=Array.isArray(k.sizes)?k.sizes:[];g.value.sizes.length<g.value.price.length;)g.value.sizes.push("")}s.value=!0}function b(){g.value.sizes.push(""),g.value.price.push(0)}function I(A){g.value.sizes.splice(A,1),g.value.price.splice(A,1)}function T(){g.value.extras.push({name:"",price:0})}function D(A){g.value.extras.splice(A,1)}async function L(){var A;u.value=!0;try{const k={...g.value};k.price=k.price.map(S=>Number(S)).filter(S=>!isNaN(S)),k.extras=k.extras.map(S=>({...S,price:Number(S.price)})).filter(S=>S.name&&!isNaN(S.price)),k.sizes.length!==k.price.length?(k.sizes=[],console.warn("Número de tamanhos não corresponde ao número de preços. Enviando tamanhos vazios.")):k.sizes=k.sizes.filter((S,R)=>k.price[R]!==void 0),k.price.length===0&&(k.sizes=[]),k.id?(await Ge.put(`/products/${k.id}`,k),console.log(`Produto ${k.name} (ID: ${k.id}) atualizado com sucesso.`)):(await Ge.post("/products",k),console.log(`Novo produto '${k.name}' criado com sucesso.`)),s.value=!1,await _()}catch(k){console.error("Erro ao salvar produto:",((A=k.response)==null?void 0:A.data)||k.message)}finally{u.value=!1}}function M(A){i.value=A,r.value=!0}async function $(){var A;u.value=!0;try{i.value&&i.value.id&&(await Ge.delete(`/products/${i.value.id}`),console.log(`Produto '${i.value.name}' (ID: ${i.value.id}) excluído com sucesso.`),r.value=!1,i.value=null,await _())}catch(k){console.error("Erro ao excluir produto:",((A=k.response)==null?void 0:A.data)||k.message)}finally{u.value=!1}}function E(A){return!A||!Array.isArray(A)||n.value.length===0?"":A.map(k=>{var S;return(S=n.value.find(R=>R.id===k))==null?void 0:S.name}).filter(Boolean).join(", ")}async function _(){var A;c.value=!0;try{console.log("Tentando carregar produtos...");const k=await Ge.get("/products");console.log("Produtos recebidos da API:",k.data),e.value=Array.isArray(k.data)?k.data:[],l.value=e.value.length,f.value>0&&o.value>f.value?o.value=f.value:f.value===0&&(o.value=1),console.log(`Produtos carregados. Total: ${l.value}, Página: ${o.value}/${f.value}`)}catch(k){console.error("Erro ao carregar produtos:",((A=k.response)==null?void 0:A.data)||k.message)}finally{c.value=!1}}async function w(){var A;try{console.log("Tentando carregar categorias...");const k=await Ge.get("/categories");n.value=Array.isArray(k.data)?k.data:[],console.log("Categorias recebidas da API:",n.value.length)}catch(k){console.error("Erro ao carregar categorias:",((A=k.response)==null?void 0:A.data)||k.message)}}return vt(a,()=>{o.value=1}),_t(()=>{_(),w()}),(A,k)=>(C(),O("div",null,[ae(Ni,null,{default:ye(()=>[p("div",WB,[k[26]||(k[26]=p("h2",{class:"text-3xl font-bold text-gray-900 dark:text-white"},"Produtos",-1)),k[27]||(k[27]=p("p",{class:"text-gray-600 dark:text-gray-400"},"Adicione, edite ou remova produtos do cardápio.",-1)),p("button",{onClick:k[0]||(k[0]=S=>m()),class:"px-5 py-2 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-md transition-colors duration-200"}," Novo Produto "),c.value?(C(),O("div",KB,k[17]||(k[17]=[p("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-400 dark:border-gray-600 mx-auto"},null,-1),p("p",{class:"text-gray-600 dark:text-gray-400 mt-4"},"Carregando produtos...",-1)]))):e.value.length===0&&!c.value?(C(),O("div",GB,k[18]||(k[18]=[p("p",{class:"text-gray-600 dark:text-gray-400 text-lg"},"Nenhum produto encontrado.",-1)]))):(C(),O("div",YB,[p("table",QB,[k[22]||(k[22]=p("thead",null,[p("tr",{class:"bg-gray-400 dark:bg-gray-700"},[p("th",{class:"py-3 px-2 text-left text-gray-700 dark:text-gray-300 uppercase text-sm leading-normal hidden md:block"}," img "),p("th",{class:"py-3 text-left text-gray-700 dark:text-gray-300 uppercase text-sm leading-normal"},"Nome "),p("th",{class:"py-3 text-left text-gray-700 dark:text-gray-300 uppercase text-sm leading-normal"},"Preços "),p("th",{class:"py-3 text-left text-gray-700 dark:text-gray-300 uppercase text-sm leading-normal"}," Categorias"),p("th",{class:"py-3 text-center text-gray-700 dark:text-gray-300 uppercase text-sm leading-normal"},"Ações ")])],-1)),p("tbody",XB,[(C(!0),O(xe,null,Ne(h.value,S=>(C(),O("tr",{key:S.id,class:"border-b border-gray-300 dark:border-gray-700 hover:bg-gray-300 dark:hover:bg-gray-700 cursor-default transition-colors duration-300"},[p("td",JB,[p("img",{src:S.img,alt:S.name,class:"w-12 h-12 object-cover rounded-md shadow-sm border border-gray-300 dark:border-gray-700"},null,8,ZB)]),p("td",e8,[ne(U(S.name)+" ",1),S.extras&&S.extras.length>0?(C(),O("div",t8,[k[19]||(k[19]=p("p",{class:"font-semibold"},"Adicionais:",-1)),(C(!0),O(xe,null,Ne(S.extras,(R,me)=>(C(),O("div",{key:me},U(R.name)+" - "+U(A.$formatPrice(R.price)),1))),128))])):X("",!0)]),p("td",n8,[S.price&&Array.isArray(S.price)&&S.price.length>0?(C(),O("div",s8,[S.sizes&&Array.isArray(S.sizes)&&S.price.length===S.sizes.length?(C(),O("div",r8,[(C(!0),O(xe,null,Ne(S.price,(R,me)=>(C(),O("div",{key:me},U(S.sizes[me])+" - "+U(A.$formatPrice(R)),1))),128))])):(C(),O("div",i8,[(C(!0),O(xe,null,Ne(S.price,(R,me)=>(C(),O("div",{key:me},U(A.$formatPrice(R)),1))),128))]))])):(C(),O("div",o8,"Dados de preço ausentes ou inválidos."))]),p("td",a8,U(E(S.categoryIds)),1),p("td",l8,[p("button",{onClick:R=>m(S),title:"Editar Produto",class:"px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-l-md transition-colors duration-200"},k[20]||(k[20]=[p("i",{class:"fa-duotone fa-edit"},null,-1)]),8,c8),p("button",{onClick:R=>M(S),title:"Excluir Produto",class:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-r-md transition-colors duration-200"},k[21]||(k[21]=[p("i",{class:"fa-duotone fa-trash"},null,-1)]),8,u8)])]))),128))])]),p("div",d8,[p("span",h8,"Total de itens: "+U(l.value),1),p("div",f8,[k[25]||(k[25]=p("label",{for:"pageSize",class:"text-sm text-gray-700 dark:text-gray-300"},"Itens por página:",-1)),p("div",p8,[Ie(p("select",{id:"pageSize","onUpdate:modelValue":k[1]||(k[1]=S=>a.value=S),class:"appearance-none bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white border border-gray-400 dark:border-gray-600 rounded px-3 py-1 pr-8 focus:outline-none focus:ring-2 focus:ring-blue-500"},k[23]||(k[23]=[p("option",{value:3},"3",-1),p("option",{value:5},"5",-1),p("option",{value:10},"10",-1),p("option",{value:25},"25",-1)]),512),[[us,a.value,void 0,{number:!0}]]),k[24]||(k[24]=p("div",{class:"pointer-events-none absolute inset-y-0 right-2 flex items-center text-gray-800 dark:text-white"}," ▼ ",-1))]),p("button",{onClick:k[2]||(k[2]=S=>o.value--),disabled:o.value===1,class:"px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"}," < Anterior ",8,g8),p("span",m8,"Página "+U(o.value)+" de "+U(f.value),1),p("button",{onClick:k[3]||(k[3]=S=>o.value++),disabled:o.value>=f.value,class:"px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"}," Próximo > ",8,y8)])])]))])]),_:1}),s.value?(C(),Je(Gs,{key:0,open:s.value,"onUpdate:open":k[13]||(k[13]=S=>s.value=S)},{default:ye(()=>[p("div",v8,[p("button",{onClick:k[4]||(k[4]=S=>s.value=!1),class:"absolute top-3 right-3 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white text-xl"}," × "),p("h3",b8,U(g.value.id?"Editar":"Novo")+" Produto ",1),u.value?(C(),O("div",_8,k[28]||(k[28]=[p("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-400 dark:border-gray-600 mx-auto"},null,-1),p("p",{class:"text-gray-600 dark:text-gray-400 mt-2"},"Salvando...",-1)]))):(C(),O("div",x8,[Ie(p("input",{"onUpdate:modelValue":k[5]||(k[5]=S=>g.value.name=S),placeholder:"Nome do Produto",class:"w-full p-3 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[Ze,g.value.name]]),Ie(p("textarea",{"onUpdate:modelValue":k[6]||(k[6]=S=>g.value.description=S),placeholder:"Descrição do Produto",rows:"3",class:"w-full p-3 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[Ze,g.value.description]]),Ie(p("input",{"onUpdate:modelValue":k[7]||(k[7]=S=>g.value.img=S),placeholder:"URL da imagem (ex: https://exemplo.com/imagem.jpg)",class:"w-full p-3 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[Ze,g.value.img]]),p("div",null,[ae(qB,{modelValue:g.value.categoryIds,"onUpdate:modelValue":k[8]||(k[8]=S=>g.value.categoryIds=S),categories:n.value,class:"w-full"},null,8,["modelValue","categories"]),k[29]||(k[29]=p("p",{class:"text-xs text-gray-600 dark:text-gray-400 mt-1"},"Segure Ctrl/Cmd para selecionar múltiplas.",-1))]),p("div",w8,[k[30]||(k[30]=p("p",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Preços e Tamanhos:",-1)),(C(!0),O(xe,null,Ne(g.value.price,(S,R)=>(C(),O("div",{key:R,class:"flex items-center mb-2 gap-2"},[Ie(p("input",{"onUpdate:modelValue":me=>g.value.sizes[R]=me,placeholder:"Tamanho (Opcional)",class:"w-full p-2 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,8,E8),[[Ze,g.value.sizes[R]]]),Ie(p("input",{"onUpdate:modelValue":me=>g.value.price[R]=me,type:"number",step:"0.01",placeholder:"Preço",class:"w-24 p-2 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,8,k8),[[Ze,g.value.price[R],void 0,{number:!0}]]),p("button",{onClick:me=>I(R),class:"text-red-500 hover:text-red-400 text-xl transition-colors duration-200"}," × ",8,T8)]))),128)),p("button",{onClick:k[9]||(k[9]=S=>b()),class:"text-sm text-blue-600 dark:text-blue-400 hover:underline mt-2"}," + Adicionar Preço/Tamanho ")]),p("div",null,[k[31]||(k[31]=p("p",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Adicionais:",-1)),(C(!0),O(xe,null,Ne(g.value.extras,(S,R)=>(C(),O("div",{key:R,class:"flex items-center gap-2 mb-2"},[Ie(p("input",{"onUpdate:modelValue":me=>S.name=me,placeholder:"Nome do Adicional",class:"flex-1 p-2 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,8,I8),[[Ze,S.name]]),Ie(p("input",{"onUpdate:modelValue":me=>S.price=me,type:"number",step:"0.01",placeholder:"Preço",class:"w-24 p-2 bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,8,S8),[[Ze,S.price,void 0,{number:!0}]]),p("button",{onClick:me=>D(R),class:"text-red-500 hover:text-red-400 text-xl transition-colors duration-200"}," × ",8,A8)]))),128)),p("button",{onClick:k[10]||(k[10]=S=>T()),class:"text-sm text-blue-600 dark:text-blue-400 hover:underline mt-2"}," + Adicionar adicional ")]),p("div",C8,[p("button",{onClick:k[11]||(k[11]=S=>L()),disabled:u.value,class:"px-5 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Salvar ",8,P8),p("button",{onClick:k[12]||(k[12]=S=>s.value=!1),disabled:u.value,class:"px-5 py-2 bg-gray-600 hover:bg-gray-700 text-white font-semibold rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Cancelar ",8,R8)])]))])]),_:1},8,["open"])):X("",!0),r.value?(C(),Je(Gs,{key:1,open:r.value,"onUpdate:open":k[16]||(k[16]=S=>r.value=S)},{default:ye(()=>{var S;return[p("button",{onClick:k[14]||(k[14]=R=>r.value=!1),class:"absolute top-3 right-3 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white text-xl"}," × "),p("p",O8,[k[32]||(k[32]=ne(" Tem certeza que deseja excluir o produto ")),p("strong",D8,U((S=i.value)==null?void 0:S.name),1),k[33]||(k[33]=ne("? Esta ação é irreversível. "))]),p("div",M8,[p("button",{onClick:$,disabled:u.value,class:"px-5 py-2 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Excluir ",8,N8),p("button",{onClick:k[15]||(k[15]=R=>r.value=!1),disabled:u.value,class:"px-5 py-2 bg-gray-600 hover:bg-gray-700 text-white font-semibold rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Cancelar ",8,L8)])]}),_:1},8,["open"])):X("",!0)]))}},$8=Yt(V8,[["__scopeId","data-v-743b3591"]]),F8={class:"mb-4"},U8={class:"grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 lg:grid-cols-7 gap-4 max-h-[calc(95vh-160px)] overflow-y-auto pr-2"},B8=["onClick","title"],j8={key:0,class:"col-span-full text-center text-gray-400 py-8"},z8={__name:"IconPickerModal",props:{open:{type:Boolean,default:!1}},emits:["update:open","icon-selected"],setup(t,{emit:e}){const n=t,s=e,r=z(n.open);vt(()=>n.open,u=>{r.value=u});const i=z(["fa-duotone fa-solid fa-pizza-slice","fa-duotone fa-solid fa-hamburger","fa-duotone fa-solid fa-ice-cream","fa-duotone fa-solid fa-mug-hot","fa-duotone fa-solid fa-coffee","fa-duotone fa-solid fa-beer","fa-duotone fa-solid fa-apple-alt","fa-duotone fa-solid fa-carrot","fa-duotone fa-solid fa-cheese","fa-duotone fa-solid fa-bread-slice","fa-duotone fa-solid fa-cookie-bite","fa-duotone fa-solid fa-egg","fa-duotone fa-solid fa-fish","fa-duotone fa-solid fa-hotdog","fa-duotone fa-solid fa-bacon","fa-duotone fa-solid fa-drumstick-bite","fa-duotone fa-solid fa-utensils","fa-duotone fa-solid fa-shopping-basket","fa-duotone fa-solid fa-star","fa-duotone fa-solid fa-heart","fa-duotone fa-solid fa-user","fa-duotone fa-solid fa-cog","fa-duotone fa-solid fa-home","fa-duotone fa-solid fa-info-circle","fa-duotone fa-solid fa-question-circle","fa-duotone fa-solid fa-exclamation-triangle","fa-duotone fa-solid fa-check-circle","fa-duotone fa-solid fa-times-circle","fa-duotone fa-solid fa-bell","fa-duotone fa-solid fa-envelope","fa-duotone fa-solid fa-map-marker-alt","fa-duotone fa-solid fa-phone","fa-duotone fa-solid fa-mobile-alt","fa-duotone fa-solid fa-credit-card","fa-duotone fa-solid fa-money-bill-alt","fa-duotone fa-solid fa-truck","fa-duotone fa-solid fa-motorcycle","fa-duotone fa-solid fa-car","fa-duotone fa-solid fa-store","fa-duotone fa-solid fa-calendar-alt","fa-duotone fa-solid fa-clock","fa-duotone fa-solid fa-fire","fa-duotone fa-solid fa-leaf","fa-duotone fa-solid fa-cloud","fa-duotone fa-solid fa-sun","fa-duotone fa-solid fa-moon","fa-duotone fa-solid fa-umbrella","fa-duotone fa-solid fa-gift","fa-duotone fa-solid fa-percent","fa-duotone fa-solid fa-tag","fa-duotone fa-solid fa-qrcode","fa-duotone fa-solid fa-wifi","fa-duotone fa-solid fa-lock","fa-duotone fa-solid fa-unlock","fa-duotone fa-solid fa-plus","fa-duotone fa-solid fa-minus","fa-duotone fa-solid fa-edit","fa-duotone fa-solid fa-trash","fa-duotone fa-solid fa-search","fa-duotone fa-solid fa-filter","fa-duotone fa-solid fa-sort","fa-duotone fa-solid fa-chart-line","fa-duotone fa-solid fa-receipt","fa-duotone fa-solid fa-box-open","fa-duotone fa-solid fa-tags","fa-duotone fa-solid fa-tools","fab fa-whatsapp","fa-duotone fa-solid fa-chart-bar","fa-duotone fa-solid fa-candy"]),o=z(""),a=be(()=>{if(!o.value)return i.value;const u=o.value.toLowerCase();return i.value.filter(h=>h.toLowerCase().includes(u))});function l(u){s("icon-selected",u),c()}function c(){s("update:open",!1)}return(u,h)=>(C(),Je(Gs,{open:r.value,"onUpdate:open":h[1]||(h[1]=f=>r.value=f)},{default:ye(()=>[p("button",{onClick:c,class:"absolute top-3 right-3 text-gray-400 hover:text-white text-xl"}," × "),h[2]||(h[2]=p("h3",{class:"text-2xl font-bold mb-4 border-b border-gray-700 pb-2"},"Escolher Ícone",-1)),p("div",F8,[Ie(p("input",{type:"text","onUpdate:modelValue":h[0]||(h[0]=f=>o.value=f),placeholder:"Buscar ícone (ex: pizza, star, user)",class:"w-full p-3 dark:bg-gray-800 border dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[Ze,o.value]])]),p("div",U8,[(C(!0),O(xe,null,Ne(a.value,f=>(C(),O("div",{key:f,onClick:g=>l(f),class:"flex flex-col items-center justify-center p-3 rounded-lg cursor-pointer hover:bg-gray-700 transition-colors duration-200 border border-gray-700",title:f.replace("fas fa-","").replace("fab fa-","")},[p("i",{class:le([f,"text-3xl mb-2 text-blue-400"])},null,2)],8,B8))),128)),a.value.length===0?(C(),O("div",j8," Nenhum ícone encontrado. ")):X("",!0)]),p("div",{class:"mt-6 flex justify-end border-t border-gray-700 pt-4"},[p("button",{onClick:c,class:"px-5 py-2 bg-gray-600 hover:bg-gray-700 text-white font-semibold rounded-md transition-colors duration-200"}," Fechar ")])]),_:1,__:[2]},8,["open"]))}},H8=Yt(z8,[["__scopeId","data-v-e7109440"]]),q8={class:"space-y-6 p-4 bg-white dark:bg-gray-900 rounded-lg shadow-xl"},W8={key:0,class:"text-center py-8"},K8={key:1,class:"text-center py-8"},G8={key:2,class:"overflow-x-auto mt-4 rounded-lg"},Y8={class:"min-w-full table-auto bg-gray-100 dark:bg-gray-800"},Q8={class:"text-gray-800 dark:text-gray-200 text-sm font-light"},X8={class:"py-3 px-6 text-left whitespace-nowrap flex flex-col"},J8={class:"italic text-gray-600 dark:text-gray-400"},Z8={class:"py-3 px-6 text-left"},ej={class:"py-3 px-6 text-left"},tj=["title"],nj={class:"py-3 px-6 text-right"},sj=["onClick"],rj=["onClick"],ij={class:"flex flex-col md:flex-row justify-between items-center mt-6 text-gray-900 dark:text-white p-4 bg-gray-100 dark:bg-gray-800 rounded-lg"},oj={class:"mb-4 md:mb-0"},aj={class:"flex items-center gap-2"},lj={class:"relative"},cj=["disabled"],uj={class:"px-2"},dj=["disabled"],hj={class:"max-w-md text-gray-900 dark:text-white relative"},fj={class:"text-2xl font-bold mb-4 border-b border-gray-300 dark:border-gray-700 pb-2"},pj={key:0,class:"text-center py-4"},gj={key:1,class:"space-y-4"},mj=["value"],yj={class:"flex items-center gap-2 relative"},vj={class:"flex justify-end mt-6 gap-3 border-t border-gray-300 dark:border-gray-700 pt-4"},bj=["disabled"],_j=["disabled"],xj={class:"mb-4 flex flex-col items-center space-y-4"},wj={class:"text-red-600 dark:text-red-400"},Ej={class:"mt-6 flex justify-end gap-3"},kj=["disabled"],Tj=["disabled"],Ij={__name:"Categories",setup(t){const e=z([]),n=z(!1),s=z(!1),r=z(!1),i=z(null),o=z(1),a=z(5),l=z(0),c=z(!0),u=z(!1),h=be(()=>{const E=(o.value-1)*a.value;return e.value.slice(E,E+a.value)}),f=be(()=>Math.ceil(l.value/a.value)),g=z({id:null,name:"",slug:"",parent_id:"",icon:""}),v=be(()=>g.value.id?e.value.filter(E=>E.id!==g.value.id):e.value);function m(){g.value={id:null,name:"",slug:"",parent_id:"",icon:""}}vt(()=>g.value.name,E=>{g.value.slug=E.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")});function b(E=null){m(),E&&(g.value=JSON.parse(JSON.stringify(E))),n.value=!0}function I(E){g.value.icon=E,r.value=!1}async function T(){var E;u.value=!0;try{const _={...g.value};_.parent_id===""&&(_.parent_id=null),_.id?(await Ge.put(`/categories/${_.id}`,_),console.log(`Categoria ${_.id} atualizada com sucesso.`)):(await Ge.post("/categories",_),console.log("Nova categoria criada com sucesso.")),n.value=!1,await $()}catch(_){console.error("Erro ao salvar categoria:",((E=_.response)==null?void 0:E.data)||_.message)}finally{u.value=!1}}function D(E){i.value=E,s.value=!0}async function L(){var E;u.value=!0;try{i.value&&i.value.id&&(await Ge.delete(`/categories/${i.value.id}`),console.log(`Categoria ${i.value.id} excluída com sucesso.`),s.value=!1,await $())}catch(_){console.error("Erro ao excluir categoria:",((E=_.response)==null?void 0:E.data)||_.message)}finally{u.value=!1}}function M(E){if(!E)return"Nenhuma";const _=e.value.find(w=>w.id===E);return _?_.name:"Desconhecida"}async function $(){var E;c.value=!0;try{const _=await Ge.get("/categories");e.value=Array.isArray(_.data)?_.data:[],l.value=e.value.length,o.value>f.value&&f.value>0?o.value=f.value:f.value===0&&(o.value=1)}catch(_){console.error("Erro ao carregar categorias:",((E=_.response)==null?void 0:E.data)||_.message)}finally{c.value=!1}}return vt(a,()=>{o.value=1}),_t(()=>{$()}),(E,_)=>(C(),O("div",null,[ae(Ni,null,{default:ye(()=>[p("div",q8,[_[25]||(_[25]=p("h2",{class:"text-3xl font-bold text-gray-900 dark:text-white"},[ne(" Categorias "),p("p",{class:"text-gray-600 dark:text-gray-400 text-sm font-normal"},"Adicione, edite ou remova categorias de produtos.")],-1)),p("button",{onClick:_[0]||(_[0]=w=>b()),class:"px-5 py-2 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-md transition-colors duration-200"}," Nova Categoria "),c.value?(C(),O("div",W8,_[17]||(_[17]=[p("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-400 dark:border-gray-600 mx-auto"},null,-1),p("p",{class:"text-gray-600 dark:text-gray-400 mt-4"},"Carregando categorias...",-1)]))):e.value.length===0?(C(),O("div",K8,_[18]||(_[18]=[p("p",{class:"text-gray-600 dark:text-gray-400 text-lg"},"Nenhuma categoria encontrada.",-1)]))):(C(),O("div",G8,[p("table",Y8,[_[21]||(_[21]=p("thead",null,[p("tr",{class:"bg-gray-200 dark:bg-gray-700"},[p("th",{class:"py-3 px-6 text-left text-gray-700 dark:text-gray-300 uppercase text-sm leading-normal"},"Nome "),p("th",{class:"py-3 px-6 text-left text-gray-700 dark:text-gray-300 uppercase text-sm leading-normal"}," Categoria Pai"),p("th",{class:"py-3 px-6 text-left text-gray-700 dark:text-gray-300 uppercase text-sm leading-normal"},"Ícone "),p("th",{class:"py-3 px-6 text-right text-gray-700 dark:text-gray-300 uppercase text-sm leading-normal"},"Ações ")])],-1)),p("tbody",Q8,[(C(!0),O(xe,null,Ne(h.value,w=>(C(),O("tr",{key:w.id,class:"border-b border-gray-300 dark:border-gray-700 hover:bg-gray-200 dark:hover:bg-gray-700"},[p("td",X8,[p("span",null,U(w.name),1),p("small",J8,"/"+U(w.slug),1)]),p("td",Z8,U(M(w.parent_id)),1),p("td",ej,[p("i",{class:le([w.icon,"mr-2 text-blue-600 dark:text-blue-400"]),title:w.icon},null,10,tj)]),p("td",nj,[p("button",{onClick:A=>b(w),class:"px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-l-md transition-colors duration-200"},_[19]||(_[19]=[p("i",{class:"fa-duotone fa-edit","aria-label":"hidden"},null,-1)]),8,sj),p("button",{onClick:A=>D(w),class:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-r-md transition-colors duration-200"},_[20]||(_[20]=[p("i",{class:"fa-duotone fa-trash","aria-label":"hidden"},null,-1)]),8,rj)])]))),128))])]),p("div",ij,[p("span",oj,"Total de itens: "+U(l.value),1),p("div",aj,[_[24]||(_[24]=p("label",{for:"pageSize",class:"text-sm text-gray-700 dark:text-gray-300"},"Itens por página:",-1)),p("div",lj,[Ie(p("select",{id:"pageSize","onUpdate:modelValue":_[1]||(_[1]=w=>a.value=w),class:"appearance-none bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white border border-gray-400 dark:border-gray-600 rounded px-3 py-1 pr-8 focus:outline-none focus:ring-2 focus:ring-blue-500"},_[22]||(_[22]=[p("option",{value:3},"3",-1),p("option",{value:5},"5",-1),p("option",{value:10},"10",-1),p("option",{value:25},"25",-1)]),512),[[us,a.value,void 0,{number:!0}]]),_[23]||(_[23]=p("div",{class:"pointer-events-none absolute inset-y-0 right-2 flex items-center text-gray-800 dark:text-white"}," ▼ ",-1))]),p("button",{onClick:_[2]||(_[2]=w=>o.value--),disabled:o.value===1,class:"px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"}," < Anterior ",8,cj),p("span",uj,"Página "+U(o.value)+" de "+U(f.value),1),p("button",{onClick:_[3]||(_[3]=w=>o.value++),disabled:o.value>=f.value,class:"px-4 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"}," Próximo > ",8,dj)])])]))])]),_:1}),n.value?(C(),Je(Gs,{key:0,open:n.value,"onUpdate:open":_[12]||(_[12]=w=>n.value=w)},{default:ye(()=>[p("div",hj,[p("button",{onClick:_[4]||(_[4]=w=>n.value=!1),class:"absolute top-3 right-3 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white text-xl"}," × "),p("h3",fj,U(g.value.id?"Editar":"Nova")+" Categoria ",1),u.value?(C(),O("div",pj,_[26]||(_[26]=[p("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-400 dark:border-gray-600 mx-auto"},null,-1),p("p",{class:"text-gray-600 dark:text-gray-400 mt-2"},"Salvando...",-1)]))):(C(),O("div",gj,[Ie(p("input",{"onUpdate:modelValue":_[5]||(_[5]=w=>g.value.name=w),placeholder:"Nome da Categoria",class:"w-full p-3 bg-gray-200 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[Ze,g.value.name]]),Ie(p("input",{"onUpdate:modelValue":_[6]||(_[6]=w=>g.value.slug=w),placeholder:"Slug (gerado automaticamente)",readonly:"",class:"w-full p-3 bg-gray-200 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md hidden focus:outline-none focus:ring-2 focus:ring-blue-500 cursor-not-allowed"},null,512),[[Ze,g.value.slug]]),p("div",null,[_[28]||(_[28]=p("label",{for:"parent-category-select",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Categoria Pai (Opcional):",-1)),Ie(p("select",{id:"parent-category-select","onUpdate:modelValue":_[7]||(_[7]=w=>g.value.parent_id=w),class:"w-full p-3 bg-gray-200 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"},[_[27]||(_[27]=p("option",{value:""},"Nenhuma (Categoria Principal)",-1)),(C(!0),O(xe,null,Ne(v.value,w=>(C(),O("option",{key:w.id,value:w.id},U(w.name),9,mj))),128))],512),[[us,g.value.parent_id]])]),p("div",null,[_[30]||(_[30]=p("label",{for:"icon-input",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Ícone:",-1)),p("div",yj,[Ie(p("input",{type:"text",id:"icon-input","onUpdate:modelValue":_[8]||(_[8]=w=>g.value.icon=w),placeholder:"Ex: fas fa-pizza-slice",class:"w-full p-3 bg-gray-200 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[Ze,g.value.icon]]),p("button",{onClick:_[9]||(_[9]=w=>r.value=!0),class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-md transition-colors duration-200 absolute right-0 top-0 h-full flex items-center"},[p("i",{class:le(g.value.icon||"fas fa-search")},null,2),_[29]||(_[29]=p("span",{class:"ml-2 hidden sm:inline"},"Escolher",-1))])]),_[31]||(_[31]=p("p",{class:"text-xs text-gray-600 dark:text-gray-400 mt-1"},[ne('Use classes de ícones como "fas fa-pizza-slice" '),p("a",{class:"text-blue-600 dark:text-blue-400 hover:underline",href:"https://fontawesome.com/icons",target:"_blank"},"(Font Awesome)"),ne(". ")],-1))]),p("div",vj,[p("button",{onClick:_[10]||(_[10]=w=>T()),disabled:u.value,class:"px-5 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Salvar ",8,bj),p("button",{onClick:_[11]||(_[11]=w=>n.value=!1),disabled:u.value,class:"px-5 py-2 bg-gray-600 hover:bg-gray-700 text-white font-semibold rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Cancelar ",8,_j)])]))])]),_:1},8,["open"])):X("",!0),s.value?(C(),Je(Gs,{key:1,open:s.value,"onUpdate:open":_[15]||(_[15]=w=>s.value=w)},{default:ye(()=>{var w;return[p("button",{onClick:_[13]||(_[13]=A=>s.value=!1),class:"absolute top-3 right-3 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white text-xl mb-5"}," × "),p("div",xj,[_[34]||(_[34]=p("i",{class:"fa-duotone fa-solid fa-circle-exclamation text-6xl text-red-400"},null,-1)),p("span",null,[_[32]||(_[32]=ne(" Tem certeza que deseja excluir a categoria ")),p("strong",wj,U((w=i.value)==null?void 0:w.name),1),_[33]||(_[33]=ne("? "))]),_[35]||(_[35]=ne(" Esta ação é irreversível. "))]),p("div",Ej,[p("button",{onClick:L,disabled:u.value,class:"px-5 py-2 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Excluir ",8,kj),p("button",{onClick:_[14]||(_[14]=A=>s.value=!1),disabled:u.value,class:"px-5 py-2 bg-gray-600 hover:bg-gray-700 text-white font-semibold rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Cancelar ",8,Tj)])]}),_:1},8,["open"])):X("",!0),r.value?(C(),Je(H8,{key:2,open:r.value,"onUpdate:open":_[16]||(_[16]=w=>r.value=w),onIconSelected:I},null,8,["open"])):X("",!0)]))}},Sj={class:"whatsapp-qr-container p-4 bg-white dark:bg-gray-800 rounded-lg shadow-md text-center"},Aj={key:0,class:"text-gray-600 dark:text-gray-400"},Cj={key:1},Pj={class:"capitalize"},Rj={key:0},Oj=["src"],Dj={key:1,class:"text-red-500"},Mj={key:1,class:"text-green-600 dark:text-green-400"},Nj={key:2,class:"text-green-600 dark:text-green-400"},Lj={key:3},Vj={key:4,class:"text-red-600 dark:text-red-400"},$j={key:5,class:"text-gray-500 dark:text-gray-400"},Fj=["disabled"],Uj={key:0,class:"fas fa-spinner fa-spin mr-2"},Bj=["disabled"],jj={key:0,class:"fas fa-spinner fa-spin mr-2"},zj={__name:"WhatsappQrCodeDisplay",setup(t){const e=z(null),n=z("loading"),s=z(!0),r=z(null),i=be(()=>{switch(n.value){case"inchat":case"connected":return"text-green-600 dark:text-green-400";case"qr-code":return"text-orange-500";case"disconnected":case"closed":case"failed":return"text-red-600 dark:text-red-400";default:return"text-gray-500 dark:text-gray-400"}}),o=async()=>{s.value=!0;try{const l=await Ge.get("/whatsapp/status");n.value=l.data.status,e.value=l.data.qrCode}catch(l){console.error("Erro ao buscar status do QR Code:",l),n.value="failed",e.value=null}finally{s.value=!1}},a=async()=>{s.value=!0;try{const l=await Ge.post("/admin/start-bot");console.log(l),n.value=l.data.status,e.value=l.data.qrCode,setInterval(o,15e3)}catch(l){console.error("Erro ao iniciar o bot:",l),n.value="failed",e.value=null}finally{s.value=!1}};return _t(()=>{o()}),Ai(()=>{r.value&&clearInterval(r.value)}),(l,c)=>(C(),Je(Ni,null,{default:ye(()=>[p("div",Sj,[c[10]||(c[10]=p("h2",{class:"text-xl font-semibold mb-4 dark:text-white"},"Status da Conexão do WhatsApp",-1)),s.value?(C(),O("div",Aj,c[0]||(c[0]=[p("i",{class:"fas fa-spinner fa-spin mr-2"},null,-1),ne(" Carregando status... ")]))):(C(),O("div",Cj,[p("p",{class:le(["text-lg font-medium mb-2",i.value])},[c[1]||(c[1]=ne(" Status: ")),p("span",Pj,U(n.value),1)],2),n.value==="qr-code"?(C(),O("div",Rj,[c[2]||(c[2]=p("p",{class:"text-gray-700 dark:text-gray-300 mb-4"},"Escaneie o QR Code abaixo com seu celular para conectar o bot: ",-1)),e.value?(C(),O("img",{key:0,src:e.value,alt:"QR Code WhatsApp",class:"mx-auto w-64 h-64 border p-2 bg-white"},null,8,Oj)):(C(),O("p",Dj,"QR Code não disponível. Tente recarregar a página."))])):n.value==="connected"?(C(),O("div",Mj,c[3]||(c[3]=[p("i",{class:"fas fa-check-circle mr-2"},null,-1),ne(" Bot conectado com sucesso! "),p("p",{class:"text-gray-700 dark:text-gray-300 mt-2"},"Você pode fechar esta página.",-1)]))):n.value==="inchat"?(C(),O("div",Nj,c[4]||(c[4]=[p("i",{class:"fas fa-check-circle mr-2"},null,-1),ne(" Bot conectado com sucesso! "),p("p",{class:"text-gray-700 dark:text-gray-300 mt-2"},"Você pode fechar esta página.",-1)]))):n.value==="disconnected"||n.value==="closed"?(C(),O("div",Lj,[c[5]||(c[5]=p("p",{class:"text-red-600 dark:text-red-400"},"Bot desconectado. Aguardando novo QR Code ou tentando reconectar. ",-1)),p("button",{onClick:o,class:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600"}," Tentar novamente ")])):n.value==="failed"?(C(),O("div",Vj,[c[6]||(c[6]=p("p",null,"Falha ao iniciar o bot. Verifique os logs do backend.",-1)),p("button",{onClick:o,class:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600"}," Tentar novamente ")])):(C(),O("div",$j,[p("p",null,"Status: "+U(n.value),1)])),p("button",{onClick:o,disabled:s.value,class:"mt-6 px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition duration-200"},[s.value?(C(),O("i",Uj)):X("",!0),c[7]||(c[7]=ne(" Atualizar Status "))],8,Fj),n.value!=="inchat"||n.value!=="connected"?(C(),O("button",{key:6,onClick:a,disabled:s.value,class:"mt-4 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition duration-200"},[s.value?(C(),O("i",jj)):X("",!0),c[8]||(c[8]=p("i",{class:"fab fa-whatsapp"},null,-1)),c[9]||(c[9]=ne(" Iniciar Bot WhatsApp "))],8,Bj)):X("",!0)]))])]),_:1}))}},Hj=Yt(zj,[["__scopeId","data-v-46b578ee"]]),qj={class:"space-y-6"},Wj={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},Kj={class:"bg-gray-100 dark:bg-gray-800 p-6 rounded-lg shadow-md border border-gray-300 dark:border-gray-700"},Gj={class:"space-y-4"},Yj={class:"bg-gray-100 dark:bg-gray-800 p-6 rounded-lg shadow-md border border-gray-300 dark:border-gray-700"},Qj={class:"space-y-4"},Xj={class:"flex items-center"},Jj={class:"bg-gray-100 dark:bg-gray-800 p-6 rounded-lg shadow-md border border-gray-300 dark:border-gray-700"},Zj={class:"space-y-4"},e7={class:"text-xs text-gray-500 dark:text-gray-500 mt-1 flex items-center justify-between"},t7={class:"flex justify-end mt-6"},n7=["disabled"],s7={key:0},r7={key:1},i7={__name:"AdminSettings",setup(t){const e=z({appName:"",contactEmail:"",whatsappNumber:"",notificationTopic:"geral_promocoes",enableOrderNotifications:!0}),n=z(!1),s=z(!0);async function r(){s.value=!0;try{const o=await Ge.get("/admin/settings");o.data&&(e.value={...e.value,...o.data})}catch(o){console.error("Erro ao carregar configurações:",o)}finally{s.value=!1}}async function i(){n.value=!0;try{await Ge.post("/admin/settings",e.value),console.log("Configurações salvas com sucesso!")}catch(o){console.error("Erro ao salvar configurações:",o)}finally{n.value=!1}}return _t(()=>{r()}),(o,a)=>(C(),Je(Ni,null,{default:ye(()=>[p("div",qj,[a[17]||(a[17]=p("h2",{class:"text-md md:text-2xl font-bold text-gray-900 dark:text-white"},[ne("Configurações do Administrador "),p("p",{class:"text-gray-600 dark:text-gray-400 italic text-xs font-normal"},"Ajuste as configurações gerais da sua plataforma.")],-1)),p("div",Wj,[p("div",Kj,[a[8]||(a[8]=p("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4 border-b border-gray-300 dark:border-gray-700 pb-2"}," Configurações Gerais",-1)),p("div",Gj,[p("div",null,[a[5]||(a[5]=p("label",{for:"appName",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Nome do Aplicativo:",-1)),Ie(p("input",{type:"text",id:"appName","onUpdate:modelValue":a[0]||(a[0]=l=>e.value.appName=l),class:"w-full p-3 bg-gray-200 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nome da Pizzaria"},null,512),[[Ze,e.value.appName]])]),p("div",null,[a[6]||(a[6]=p("label",{for:"contactEmail",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Email de Contato:",-1)),Ie(p("input",{type:"email",id:"contactEmail","onUpdate:modelValue":a[1]||(a[1]=l=>e.value.contactEmail=l),class:"w-full p-3 bg-gray-200 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"contato@pizzaria.com"},null,512),[[Ze,e.value.contactEmail]])]),p("div",null,[a[7]||(a[7]=p("label",{for:"whatsappNumber",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Número de WhatsApp (para pedidos):",-1)),Ie(p("input",{type:"text",id:"whatsappNumber","onUpdate:modelValue":a[2]||(a[2]=l=>e.value.whatsappNumber=l),class:"w-full p-3 bg-gray-200 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"+55 11 91234-5678"},null,512),[[Ze,e.value.whatsappNumber]])])])]),p("div",Yj,[a[12]||(a[12]=p("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4 border-b border-gray-300 dark:border-gray-700 pb-2"}," Notificações FCM",-1)),a[13]||(a[13]=p("p",{class:"text-gray-600 dark:text-gray-400 mb-4"},"Gerencie as configurações de notificação push do Firebase Cloud Messaging.",-1)),p("div",Qj,[p("div",null,[a[9]||(a[9]=p("label",{for:"notificationTopic",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Tópico Padrão para Notificações:",-1)),Ie(p("input",{type:"text",id:"notificationTopic","onUpdate:modelValue":a[3]||(a[3]=l=>e.value.notificationTopic=l),class:"w-full p-3 bg-gray-200 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"geral_promocoes"},null,512),[[Ze,e.value.notificationTopic]]),a[10]||(a[10]=p("p",{class:"text-xs text-gray-500 dark:text-gray-500 mt-1"},"Este tópico será usado para enviar notificações em massa.",-1))]),p("div",Xj,[Ie(p("input",{type:"checkbox",id:"enableOrderNotifications","onUpdate:modelValue":a[4]||(a[4]=l=>e.value.enableOrderNotifications=l),class:"h-5 w-5 text-blue-600 bg-gray-200 dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500"},null,512),[[lu,e.value.enableOrderNotifications]]),a[11]||(a[11]=p("label",{for:"enableOrderNotifications",class:"ml-2 block text-sm text-gray-700 dark:text-gray-300"}," Habilitar notificações de atualização de pedido ",-1))])])]),p("div",Jj,[a[16]||(a[16]=p("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4 border-b border-gray-300 dark:border-gray-700 pb-2"}," Outros",-1)),p("div",Zj,[p("p",e7,[a[14]||(a[14]=ne(" Tema Light/Dark ")),ae(pw)]),a[15]||(a[15]=p("p",{class:"text-xs text-gray-500 dark:text-gray-500 mt-1 flex items-center justify-between"},[p("label",{for:"xota",class:"animate-xota"},"Ativar notificações de pedidos"),p("input",{id:"xota",type:"checkbox",value:"anal69",class:"w-4 h-4 appearance-none dark:bg-gray-900 checked:bg-green-200 checked:rounded-full checked:outline-2 outline-2 rounded-full not-checked:outline-orange-800 checked:animate-rubberBand checked:outline-orange-500"})],-1))])])]),p("div",t7,[p("button",{onClick:i,disabled:n.value,class:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"},[n.value?(C(),O("span",s7,"Salvando...")):(C(),O("span",r7,"Salvar Configurações"))],8,n7)])])]),_:1}))}},o7={class:"min-h-screen flex items-center justify-center transition-colors duration-200 body"},a7={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert"},l7={class:"block sm:inline"},c7=["disabled"],u7={key:0,class:"flex items-center"},d7={key:1},h7=["disabled"],f7={key:0,class:"flex items-center"},p7={key:1},g7={__name:"Login",setup(t){const e=$d(),n=z(""),s=z(""),r=async()=>{await e.loginWithEmail(n.value,s.value)},i=async()=>{await e.loginWithGoogle()};return(o,a)=>(C(),O("div",o7,[p("div",{class:le(["p-8 rounded-lg w-full max-w-md h-screen md:h-auto morph",[te(e).error?"shadow-red-500/30":""]])},[ae(pw),a[7]||(a[7]=p("img",{src:fw,alt:"Logo",class:"mx-auto mb-6 w-auto h-24"},null,-1)),te(e).error?(C(),O("div",a7,[p("span",l7,U(te(e).error),1)])):X("",!0),p("form",{onSubmit:Tn(r,["prevent"]),class:"space-y-4"},[p("div",null,[a[2]||(a[2]=p("label",{for:"email",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Email",-1)),Ie(p("input",{type:"email",id:"email","onUpdate:modelValue":a[0]||(a[0]=l=>n.value=l),required:"",class:le(["mt-1 block w-full px-3 py-2 border  rounded-md shadow-sm focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white",te(e).error?"border-red-500":"border-gray-300 dark:border-gray-600"]),placeholder:"seu@email.com"},null,2),[[Ze,n.value]])]),p("div",null,[a[3]||(a[3]=p("label",{for:"password",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Senha",-1)),Ie(p("input",{type:"password",id:"password","onUpdate:modelValue":a[1]||(a[1]=l=>s.value=l),required:"",class:le(["mt-1 block w-full px-3 py-2 border  rounded-md shadow-sm focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white",te(e).error?"border-red-500":"border-gray-300 dark:border-gray-600"]),placeholder:"********"},null,2),[[Ze,s.value]])]),p("button",{type:"submit",disabled:te(e).loading,class:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-amber-600 hover:bg-amber-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500 dark:bg-amber-700 dark:hover:bg-amber-800 disabled:opacity-50 disabled:cursor-not-allowed"},[te(e).loading?(C(),O("span",u7,a[4]||(a[4]=[p("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[p("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),p("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),ne(" Entrando... ")]))):(C(),O("span",d7,"Entrar com Email"))],8,c7)],32),a[8]||(a[8]=iu('<div class="relative my-6"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-gray-300 dark:border-gray-600"></div></div><div class="relative flex justify-center text-sm"><span class="px-2 bg-[#e0e0e0] dark:bg-gray-800 text-gray-500 dark:text-gray-400">Ou</span></div></div>',1)),p("div",null,[p("button",{onClick:i,disabled:te(e).loading,class:"w-full flex justify-center items-center py-2 px-4 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[a[6]||(a[6]=p("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google logo",class:"w-5 h-5 mr-2"},null,-1)),te(e).loading?(C(),O("span",f7,a[5]||(a[5]=[p("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-gray-700 dark:text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[p("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),p("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),ne(" Entrando com Google... ")]))):(C(),O("span",p7,"Entrar com Google"))],8,h7)])],2)]))}},m7={class:"space-y-6 p-4 md:p-4 bg-white dark:bg-gray-900 rounded-lg shadow-xl"},y7={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert"},v7={key:1,class:"text-center py-8"},b7={key:2,class:"text-center py-8"},_7={key:3,class:"mt-4 dark:border-gray-700 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},x7={class:"font-semibold text-gray-800 dark:text-white"},w7={class:"text-sm text-gray-600 dark:text-gray-400 mb-2"},E7={class:"text-left mb-4"},k7={class:"flex justify-end space-x-2"},T7=["onClick"],I7=["onClick"],S7={class:"flex flex-col md:flex-row justify-between items-center mt-6 text-gray-900 dark:text-white p-4 bg-gray-100 dark:bg-gray-800 rounded-lg"},A7={class:"mb-4 md:mb-0 text-sm md:text-base"},C7={class:"flex flex-col md:flex-row items-center gap-4 w-full md:w-auto"},P7={class:"flex items-center gap-2 mb-4 md:mb-0 w-full md:w-auto justify-center"},R7={class:"relative"},O7={"aria-label":"Page navigation",class:"w-full flex justify-center"},D7={class:"inline-flex -space-x-px text-sm rounded-md shadow-sm overflow-hidden"},M7={key:0,class:"flex items-center justify-center px-3 h-8 leading-tight text-gray-500 bg-white border border-gray-300 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400"},N7=["onClick"],L7={class:"bg-white dark:bg-gray-800 text-gray-900 dark:text-white p-6 rounded-lg shadow-xl relative"},V7={class:"text-lg mb-4"},$7={class:"mt-6 flex justify-end gap-3"},F7=["disabled"],U7={key:0},B7={key:1},j7=["disabled"],z7={__name:"ManagerUsers",setup(t){const e=z([]),n=z(!0),s=z(!1),r=z(null),i=z(""),o=z(!1),a=z(1),l=z(2),c=z(0),u=Ca(),h=$d(),f=be(()=>{const M=(a.value-1)*l.value;return e.value.slice(M,M+l.value)}),g=be(()=>Math.ceil(c.value/l.value)),v=be(()=>{const M=[],E=Math.floor(2.5);if(g.value<=5)for(let _=1;_<=g.value;_++)M.push(_);else{M.push(1);let _=Math.max(2,a.value-E),w=Math.min(g.value-1,a.value+E);a.value-1<E&&(w=4),g.value-a.value<E&&(_=g.value-5+2),_>2&&M.push("...");for(let A=_;A<=w;A++)M.push(A);w<g.value-1&&M.push("..."),g.value>1&&!M.includes(g.value)&&M.push(g.value)}return[...new Set(M)]}),m=M=>{M==="..."||M<1||M>g.value||M===a.value||(a.value=M)},b=M=>M?"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-semibold dark:bg-green-700 dark:text-green-100":"bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs font-semibold dark:bg-red-700 dark:text-red-100";function I(M,$){r.value=M,i.value=$,s.value=!0}function T(){r.value=null,i.value="",s.value=!1}async function D(){var M,$,E;if(!(!r.value||!i.value)){o.value=!0;try{const _=i.value==="promote"?"/admin/manage-users/promote":"/admin/manage-users/demote",w=i.value==="promote"?"promovido":"rebaixado";await Ge.post(_,{email:r.value.email}),u.showToast("Sucesso!",`Usuário ${r.value.email} foi ${w} com sucesso. Ele precisará fazer login novamente.`,"success",5e3),T(),await L()}catch(_){console.error(`Erro ao ${i.value} usuário:`,((M=_.response)==null?void 0:M.data)||_.message),u.showToast("Erro",`Não foi possível ${i.value} o usuário: ${((E=($=_.response)==null?void 0:$.data)==null?void 0:E.error)||_.message}`,"error",5e3)}finally{o.value=!1}}}async function L(){var M,$,E;if(!h.isAuthenticated||!h.isAdmin){n.value=!1,console.warn("Não autenticado ou não é admin. Não carregando usuários.");return}n.value=!0;try{console.log("Tentando carregar usuários da API...");const _=await Ge.get("/admin/manage-users/users");console.log("Usuários recebidos:",_.data),e.value=_.data,c.value=e.value.length,a.value>g.value&&g.value>0?a.value=g.value:g.value===0&&(a.value=1)}catch(_){console.error("Erro ao carregar usuários:",((M=_.response)==null?void 0:M.data)||_.message),(($=_.response)==null?void 0:$.status)!==401&&((E=_.response)==null?void 0:E.status)!==403&&u.showToast("Erro","Não foi possível carregar os usuários.","error")}finally{n.value=!1}}return vt(l,()=>{a.value=1}),_t(async()=>{!h.isAuthenticated&&!h.loading&&(console.log("ManageUsers: onMounted - authStore não inicializado, chamando initializeAuth..."),await h.initializeAuth()),console.log("ManageUsers: onMounted - Chamando loadUsers..."),L()}),(M,$)=>(C(),O("div",null,[ae(Ni,null,{default:ye(()=>[p("div",m7,[$[10]||($[10]=p("h2",{class:"md:text-2xl font-semibold text-gray-700 dark:text-white"},[p("i",{class:"fa-duotone fa-users"}),ne(" Gerenciamento de usuários "),p("p",{class:"text-xs font-normal text-gray-600 dark:text-gray-400 text-nowrap"}," Visualize e gerencie as permissões de administrador dos usuários. ")],-1)),!te(h).isAuthenticated||!te(h).isAdmin?(C(),O("div",y7,$[4]||($[4]=[p("span",{class:"block sm:inline"},[ne("Você não tem permissão para acessar esta área ou sua sessão expirou."),p("br"),ne("Por favor, faça login como administrador.")],-1)]))):n.value?(C(),O("div",v7,$[5]||($[5]=[p("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-400 dark:border-gray-600 mx-auto"},null,-1),p("p",{class:"text-gray-600 dark:text-gray-400 mt-4"},"Carregando usuários...",-1)]))):e.value.length===0?(C(),O("div",b7,$[6]||($[6]=[p("p",{class:"text-gray-600 dark:text-gray-400 text-xs md:text-lg"},"Nenhum usuário encontrado.",-1)]))):(C(),O("div",_7,[(C(!0),O(xe,null,Ne(f.value,E=>(C(),O("div",{class:"rounded-lg shadow-md bg-white dark:bg-gray-800 p-4 border border-gray-300 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",key:E.uid},[p("p",x7,U(E.displayName||"Nome não informado"),1),p("p",w7,U(E.email),1),p("p",E7,[p("span",{class:le(b(E.isAdmin))},U(E.isAdmin?"Administrador":"Usuário Comum"),3)]),p("div",k7,[E.isAdmin?(C(),O("button",{key:1,onClick:_=>I(E,"demote"),class:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white rounded-md text-sm transition-colors duration-200"}," Rebaixar ",8,I7)):(C(),O("button",{key:0,onClick:_=>I(E,"promote"),class:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded-md text-sm transition-colors duration-200"}," Promover ",8,T7))])]))),128))])),p("div",S7,[p("span",A7,"Total de usuários: "+U(c.value),1),p("div",C7,[p("div",P7,[$[9]||($[9]=p("label",{for:"pageSize",class:"text-xs text-gray-700 dark:text-gray-300"},"Usuários por página:",-1)),p("div",R7,[Ie(p("select",{id:"pageSize","onUpdate:modelValue":$[0]||($[0]=E=>l.value=E),class:"appearance-none bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white border border-gray-400 dark:border-gray-600 rounded px-3 py-1 pr-8 focus:outline-none focus:ring-2 focus:ring-blue-500"},$[7]||($[7]=[p("option",{value:5},"5",-1),p("option",{value:10},"10",-1),p("option",{value:25},"25",-1)]),512),[[us,l.value,void 0,{number:!0}]]),$[8]||($[8]=p("div",{class:"pointer-events-none absolute inset-y-0 right-2 flex items-center text-gray-800 dark:text-white"}," ▼ ",-1))])]),p("nav",O7,[p("ul",D7,[p("li",null,[p("a",{onClick:$[1]||($[1]=E=>m(a.value-1)),class:le([{"opacity-50 cursor-not-allowed":a.value===1},"flex items-center justify-center px-3 h-8 ms-0 leading-tight text-gray-500 bg-white border border-e-0 border-gray-300 rounded-s-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white transition-colors duration-200"])}," Anterior ",2)]),(C(!0),O(xe,null,Ne(v.value,(E,_)=>(C(),O("li",{key:_},[E==="..."?(C(),O("span",M7," ... ")):(C(),O("a",{key:1,onClick:w=>m(E),class:le([{"text-blue-600 border-blue-300 bg-blue-50 hover:bg-blue-100 dark:border-gray-700 dark:bg-gray-700 dark:text-white":E===a.value,"text-gray-500 bg-white border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white":E!==a.value},"flex items-center justify-center px-3 h-8 leading-tight border transition-colors duration-200"])},U(E),11,N7))]))),128)),p("li",null,[p("a",{onClick:$[2]||($[2]=E=>m(a.value+1)),class:le([{"opacity-50 cursor-not-allowed":a.value===g.value},"flex items-center justify-center px-3 h-8 leading-tight text-gray-500 bg-white border border-gray-300 rounded-e-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white transition-colors duration-200"])}," Próximo ",2)])])])])])])]),_:1}),ae(Gs,{open:s.value,"onUpdate:open":$[3]||($[3]=E=>s.value=E)},{default:ye(()=>{var E;return[p("div",L7,[p("button",{onClick:T,class:"absolute top-3 right-3 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white text-xl"}," × "),p("p",V7,[ne(" Tem certeza que deseja "+U(i.value==="promote"?"promover":"rebaixar")+" o usuário ",1),p("strong",{class:le(i.value==="promote"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400")},U((E=r.value)==null?void 0:E.email),3),$[11]||($[11]=ne("? "))]),$[12]||($[12]=p("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Esta ação exigirá que o usuário faça login novamente para que as alterações de permissão entrem em vigor. ",-1)),p("div",$7,[p("button",{onClick:D,disabled:o.value,class:le([i.value==="promote"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700","px-5 py-2 text-white font-semibold rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"])},[o.value?(C(),O("span",U7,"Processando...")):(C(),O("span",B7,U(i.value==="promote"?"Confirmar Promoção":"Confirmar Rebaixamento"),1))],10,F7),p("button",{onClick:T,disabled:o.value,class:"px-5 py-2 bg-gray-600 hover:bg-gray-700 text-white font-semibold rounded-md transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed"}," Cancelar ",8,j7)])])]}),_:1},8,["open"])]))}};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Ll(t){return t+.5|0}const mr=(t,e,n)=>Math.max(Math.min(t,n),e);function ga(t){return mr(Ll(t*2.55),0,255)}function kr(t){return mr(Ll(t*255),0,255)}function As(t){return mr(Ll(t/2.55)/100,0,1)}function mb(t){return mr(Ll(t*100),0,100)}const Mn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},tp=[..."0123456789ABCDEF"],H7=t=>tp[t&15],q7=t=>tp[(t&240)>>4]+tp[t&15],fc=t=>(t&240)>>4===(t&15),W7=t=>fc(t.r)&&fc(t.g)&&fc(t.b)&&fc(t.a);function K7(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Mn[t[1]]*17,g:255&Mn[t[2]]*17,b:255&Mn[t[3]]*17,a:e===5?Mn[t[4]]*17:255}:(e===7||e===9)&&(n={r:Mn[t[1]]<<4|Mn[t[2]],g:Mn[t[3]]<<4|Mn[t[4]],b:Mn[t[5]]<<4|Mn[t[6]],a:e===9?Mn[t[7]]<<4|Mn[t[8]]:255})),n}const G7=(t,e)=>t<255?e(t):"";function Y7(t){var e=W7(t)?H7:q7;return t?"#"+e(t.r)+e(t.g)+e(t.b)+G7(t.a,e):void 0}const Q7=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Qk(t,e,n){const s=e*Math.min(n,1-n),r=(i,o=(i+t/30)%12)=>n-s*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function X7(t,e,n){const s=(r,i=(r+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[s(5),s(3),s(1)]}function J7(t,e,n){const s=Qk(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)s[r]*=1-e-n,s[r]+=e;return s}function Z7(t,e,n,s,r){return t===r?(e-n)/s+(e<n?6:0):e===r?(n-t)/s+2:(t-e)/s+4}function qg(t){const n=t.r/255,s=t.g/255,r=t.b/255,i=Math.max(n,s,r),o=Math.min(n,s,r),a=(i+o)/2;let l,c,u;return i!==o&&(u=i-o,c=a>.5?u/(2-i-o):u/(i+o),l=Z7(n,s,r,u,i),l=l*60+.5),[l|0,c||0,a]}function Wg(t,e,n,s){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,s)).map(kr)}function Kg(t,e,n){return Wg(Qk,t,e,n)}function ez(t,e,n){return Wg(J7,t,e,n)}function tz(t,e,n){return Wg(X7,t,e,n)}function Xk(t){return(t%360+360)%360}function nz(t){const e=Q7.exec(t);let n=255,s;if(!e)return;e[5]!==s&&(n=e[6]?ga(+e[5]):kr(+e[5]));const r=Xk(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?s=ez(r,i,o):e[1]==="hsv"?s=tz(r,i,o):s=Kg(r,i,o),{r:s[0],g:s[1],b:s[2],a:n}}function sz(t,e){var n=qg(t);n[0]=Xk(n[0]+e),n=Kg(n),t.r=n[0],t.g=n[1],t.b=n[2]}function rz(t){if(!t)return;const e=qg(t),n=e[0],s=mb(e[1]),r=mb(e[2]);return t.a<255?`hsla(${n}, ${s}%, ${r}%, ${As(t.a)})`:`hsl(${n}, ${s}%, ${r}%)`}const yb={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},vb={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function iz(){const t={},e=Object.keys(vb),n=Object.keys(yb);let s,r,i,o,a;for(s=0;s<e.length;s++){for(o=a=e[s],r=0;r<n.length;r++)i=n[r],a=a.replace(i,yb[i]);i=parseInt(vb[o],16),t[a]=[i>>16&255,i>>8&255,i&255]}return t}let pc;function oz(t){pc||(pc=iz(),pc.transparent=[0,0,0,0]);const e=pc[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const az=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function lz(t){const e=az.exec(t);let n=255,s,r,i;if(e){if(e[7]!==s){const o=+e[7];n=e[8]?ga(o):mr(o*255,0,255)}return s=+e[1],r=+e[3],i=+e[5],s=255&(e[2]?ga(s):mr(s,0,255)),r=255&(e[4]?ga(r):mr(r,0,255)),i=255&(e[6]?ga(i):mr(i,0,255)),{r:s,g:r,b:i,a:n}}}function cz(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${As(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Wh=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,zi=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function uz(t,e,n){const s=zi(As(t.r)),r=zi(As(t.g)),i=zi(As(t.b));return{r:kr(Wh(s+n*(zi(As(e.r))-s))),g:kr(Wh(r+n*(zi(As(e.g))-r))),b:kr(Wh(i+n*(zi(As(e.b))-i))),a:t.a+n*(e.a-t.a)}}function gc(t,e,n){if(t){let s=qg(t);s[e]=Math.max(0,Math.min(s[e]+s[e]*n,e===0?360:1)),s=Kg(s),t.r=s[0],t.g=s[1],t.b=s[2]}}function Jk(t,e){return t&&Object.assign(e||{},t)}function bb(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=kr(t[3]))):(e=Jk(t,{r:0,g:0,b:0,a:1}),e.a=kr(e.a)),e}function dz(t){return t.charAt(0)==="r"?lz(t):nz(t)}class dl{constructor(e){if(e instanceof dl)return e;const n=typeof e;let s;n==="object"?s=bb(e):n==="string"&&(s=K7(e)||oz(e)||dz(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=Jk(this._rgb);return e&&(e.a=As(e.a)),e}set rgb(e){this._rgb=bb(e)}rgbString(){return this._valid?cz(this._rgb):void 0}hexString(){return this._valid?Y7(this._rgb):void 0}hslString(){return this._valid?rz(this._rgb):void 0}mix(e,n){if(e){const s=this.rgb,r=e.rgb;let i;const o=n===i?.5:n,a=2*o-1,l=s.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;i=1-c,s.r=255&c*s.r+i*r.r+.5,s.g=255&c*s.g+i*r.g+.5,s.b=255&c*s.b+i*r.b+.5,s.a=o*s.a+(1-o)*r.a,this.rgb=s}return this}interpolate(e,n){return e&&(this._rgb=uz(this._rgb,e._rgb,n)),this}clone(){return new dl(this.rgb)}alpha(e){return this._rgb.a=kr(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Ll(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return gc(this._rgb,2,e),this}darken(e){return gc(this._rgb,2,-e),this}saturate(e){return gc(this._rgb,1,e),this}desaturate(e){return gc(this._rgb,1,-e),this}rotate(e){return sz(this._rgb,e),this}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Es(){}const hz=(()=>{let t=0;return()=>t++})();function rt(t){return t==null}function Ot(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function et(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Bn(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function ss(t,e){return Bn(t)?t:e}function He(t,e){return typeof t>"u"?e:t}const fz=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,Zk=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function ft(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function ot(t,e,n,s){let r,i,o;if(Ot(t))for(i=t.length,r=0;r<i;r++)e.call(n,t[r],r);else if(et(t))for(o=Object.keys(t),i=o.length,r=0;r<i;r++)e.call(n,t[o[r]],o[r])}function Du(t,e){let n,s,r,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,s=t.length;n<s;++n)if(r=t[n],i=e[n],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function Mu(t){if(Ot(t))return t.map(Mu);if(et(t)){const e=Object.create(null),n=Object.keys(t),s=n.length;let r=0;for(;r<s;++r)e[n[r]]=Mu(t[n[r]]);return e}return t}function eT(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function pz(t,e,n,s){if(!eT(t))return;const r=e[t],i=n[t];et(r)&&et(i)?hl(r,i,s):e[t]=Mu(i)}function hl(t,e,n){const s=Ot(e)?e:[e],r=s.length;if(!et(t))return t;n=n||{};const i=n.merger||pz;let o;for(let a=0;a<r;++a){if(o=s[a],!et(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)i(l[c],t,o,n)}return t}function Va(t,e){return hl(t,e,{merger:gz})}function gz(t,e,n){if(!eT(t))return;const s=e[t],r=n[t];et(s)&&et(r)?Va(s,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Mu(r))}const _b={"":t=>t,x:t=>t.x,y:t=>t.y};function mz(t){const e=t.split("."),n=[];let s="";for(const r of e)s+=r,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function yz(t){const e=mz(t);return n=>{for(const s of e){if(s==="")break;n=n&&n[s]}return n}}function Ii(t,e){return(_b[e]||(_b[e]=yz(e)))(t)}function Gg(t){return t.charAt(0).toUpperCase()+t.slice(1)}const fl=t=>typeof t<"u",Dr=t=>typeof t=="function",xb=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function vz(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Et=Math.PI,wt=2*Et,bz=wt+Et,Nu=Number.POSITIVE_INFINITY,_z=Et/180,Mt=Et/2,Gr=Et/4,wb=Et*2/3,tT=Math.log10,ps=Math.sign;function $a(t,e,n){return Math.abs(t-e)<n}function Eb(t){const e=Math.round(t);t=$a(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(tT(t))),s=t/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function xz(t){const e=[],n=Math.sqrt(t);let s;for(s=1;s<n;s++)t%s===0&&(e.push(s),e.push(t/s));return n===(n|0)&&e.push(n),e.sort((r,i)=>r-i).pop(),e}function wz(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function pl(t){return!wz(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function Ez(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function kz(t,e,n){let s,r,i;for(s=0,r=t.length;s<r;s++)i=t[s][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function Ls(t){return t*(Et/180)}function Tz(t){return t*(180/Et)}function kb(t){if(!Bn(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function nT(t,e){const n=e.x-t.x,s=e.y-t.y,r=Math.sqrt(n*n+s*s);let i=Math.atan2(s,n);return i<-.5*Et&&(i+=wt),{angle:i,distance:r}}function np(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Iz(t,e){return(t-e+bz)%wt-Et}function or(t){return(t%wt+wt)%wt}function gl(t,e,n,s){const r=or(t),i=or(e),o=or(n),a=or(i-r),l=or(o-r),c=or(r-i),u=or(r-o);return r===i||r===o||s&&i===o||a>l&&c<u}function cn(t,e,n){return Math.max(e,Math.min(n,t))}function Sz(t){return cn(t,-32768,32767)}function yr(t,e,n,s=1e-6){return t>=Math.min(e,n)-s&&t<=Math.max(e,n)+s}function Yg(t,e,n){n=n||(o=>t[o]<e);let s=t.length-1,r=0,i;for(;s-r>1;)i=r+s>>1,n(i)?r=i:s=i;return{lo:r,hi:s}}const oi=(t,e,n,s)=>Yg(t,n,s?r=>{const i=t[r][e];return i<n||i===n&&t[r+1][e]===n}:r=>t[r][e]<n),Az=(t,e,n)=>Yg(t,n,s=>t[s][e]>=n);function Cz(t,e,n){let s=0,r=t.length;for(;s<r&&t[s]<e;)s++;for(;r>s&&t[r-1]>n;)r--;return s>0||r<t.length?t.slice(s,r):t}const sT=["push","pop","shift","splice","unshift"];function Pz(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),sT.forEach(n=>{const s="_onData"+Gg(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const o=r.apply(this,i);return t._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...i)}),o}})})}function Tb(t,e){const n=t._chartjs;if(!n)return;const s=n.listeners,r=s.indexOf(e);r!==-1&&s.splice(r,1),!(s.length>0)&&(sT.forEach(i=>{delete t[i]}),delete t._chartjs)}function rT(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const iT=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function oT(t,e){let n=[],s=!1;return function(...r){n=r,s||(s=!0,iT.call(window,()=>{s=!1,t.apply(e,n)}))}}function Rz(t,e){let n;return function(...s){return e?(clearTimeout(n),n=setTimeout(t,e,s)):t.apply(this,s),e}}const Qg=t=>t==="start"?"left":t==="end"?"right":"center",tn=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,Oz=(t,e,n,s)=>t===(s?"left":"right")?n:t==="center"?(e+n)/2:e;function Dz(t,e,n){const s=e.length;let r=0,i=s;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:h,max:f,minDefined:g,maxDefined:v}=o.getUserBounds();if(g){if(r=Math.min(oi(l,u,h).lo,n?s:oi(e,u,o.getPixelForValue(h)).lo),c){const m=l.slice(0,r+1).reverse().findIndex(b=>!rt(b[a.axis]));r-=Math.max(0,m)}r=cn(r,0,s-1)}if(v){let m=Math.max(oi(l,o.axis,f,!0).hi+1,n?0:oi(e,u,o.getPixelForValue(f),!0).hi+1);if(c){const b=l.slice(m-1).findIndex(I=>!rt(I[a.axis]));m+=Math.max(0,b)}i=cn(m,r,s)-r}else i=s-r}return{start:r,count:i}}function Mz(t){const{xScale:e,yScale:n,_scaleRanges:s}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!s)return t._scaleRanges=r,!0;const i=s.xmin!==e.min||s.xmax!==e.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,r),i}const mc=t=>t===0||t===1,Ib=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*wt/n)),Sb=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*wt/n)+1,Fa={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Mt)+1,easeOutSine:t=>Math.sin(t*Mt),easeInOutSine:t=>-.5*(Math.cos(Et*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>mc(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>mc(t)?t:Ib(t,.075,.3),easeOutElastic:t=>mc(t)?t:Sb(t,.075,.3),easeInOutElastic(t){return mc(t)?t:t<.5?.5*Ib(t*2,.1125,.45):.5+.5*Sb(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Fa.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Fa.easeInBounce(t*2)*.5:Fa.easeOutBounce(t*2-1)*.5+.5};function Xg(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Ab(t){return Xg(t)?t:new dl(t)}function Kh(t){return Xg(t)?t:new dl(t).saturate(.5).darken(.1).hexString()}const Nz=["x","y","borderWidth","radius","tension"],Lz=["color","borderColor","backgroundColor"];function Vz(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:Lz},numbers:{type:"number",properties:Nz}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function $z(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Cb=new Map;function Fz(t,e){e=e||{};const n=t+JSON.stringify(e);let s=Cb.get(n);return s||(s=new Intl.NumberFormat(t,e),Cb.set(n,s)),s}function Jg(t,e,n){return Fz(e,n).format(t)}const Uz={values(t){return Ot(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const s=this.chart.options.locale;let r,i=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),i=Bz(t,n)}const o=tT(Math.abs(i)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Jg(t,s,l)}};function Bz(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var aT={formatters:Uz};function jz(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:aT.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Si=Object.create(null),sp=Object.create(null);function Ua(t,e){if(!e)return t;const n=e.split(".");for(let s=0,r=n.length;s<r;++s){const i=n[s];t=t[i]||(t[i]=Object.create(null))}return t}function Gh(t,e,n){return typeof e=="string"?hl(Ua(t,e),n):hl(Ua(t,""),e)}class zz{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,r)=>Kh(r.backgroundColor),this.hoverBorderColor=(s,r)=>Kh(r.borderColor),this.hoverColor=(s,r)=>Kh(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Gh(this,e,n)}get(e){return Ua(this,e)}describe(e,n){return Gh(sp,e,n)}override(e,n){return Gh(Si,e,n)}route(e,n,s,r){const i=Ua(this,e),o=Ua(this,s),a="_"+n;Object.defineProperties(i,{[a]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[r];return et(l)?Object.assign({},c,l):He(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var St=new zz({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Vz,$z,jz]);function Hz(t){return!t||rt(t.size)||rt(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Pb(t,e,n,s,r){let i=e[r];return i||(i=e[r]=t.measureText(r).width,n.push(r)),i>s&&(s=i),s}function Yr(t,e,n){const s=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*s)/s+r}function Rb(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function rp(t,e,n,s){lT(t,e,n,s,null)}function lT(t,e,n,s,r){let i,o,a,l,c,u,h,f;const g=e.pointStyle,v=e.rotation,m=e.radius;let b=(v||0)*_z;if(g&&typeof g=="object"&&(i=g.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,s),t.rotate(b),t.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),t.restore();return}if(!(isNaN(m)||m<=0)){switch(t.beginPath(),g){default:r?t.ellipse(n,s,r/2,m,0,0,wt):t.arc(n,s,m,0,wt),t.closePath();break;case"triangle":u=r?r/2:m,t.moveTo(n+Math.sin(b)*u,s-Math.cos(b)*m),b+=wb,t.lineTo(n+Math.sin(b)*u,s-Math.cos(b)*m),b+=wb,t.lineTo(n+Math.sin(b)*u,s-Math.cos(b)*m),t.closePath();break;case"rectRounded":c=m*.516,l=m-c,o=Math.cos(b+Gr)*l,h=Math.cos(b+Gr)*(r?r/2-c:l),a=Math.sin(b+Gr)*l,f=Math.sin(b+Gr)*(r?r/2-c:l),t.arc(n-h,s-a,c,b-Et,b-Mt),t.arc(n+f,s-o,c,b-Mt,b),t.arc(n+h,s+a,c,b,b+Mt),t.arc(n-f,s+o,c,b+Mt,b+Et),t.closePath();break;case"rect":if(!v){l=Math.SQRT1_2*m,u=r?r/2:l,t.rect(n-u,s-l,2*u,2*l);break}b+=Gr;case"rectRot":h=Math.cos(b)*(r?r/2:m),o=Math.cos(b)*m,a=Math.sin(b)*m,f=Math.sin(b)*(r?r/2:m),t.moveTo(n-h,s-a),t.lineTo(n+f,s-o),t.lineTo(n+h,s+a),t.lineTo(n-f,s+o),t.closePath();break;case"crossRot":b+=Gr;case"cross":h=Math.cos(b)*(r?r/2:m),o=Math.cos(b)*m,a=Math.sin(b)*m,f=Math.sin(b)*(r?r/2:m),t.moveTo(n-h,s-a),t.lineTo(n+h,s+a),t.moveTo(n+f,s-o),t.lineTo(n-f,s+o);break;case"star":h=Math.cos(b)*(r?r/2:m),o=Math.cos(b)*m,a=Math.sin(b)*m,f=Math.sin(b)*(r?r/2:m),t.moveTo(n-h,s-a),t.lineTo(n+h,s+a),t.moveTo(n+f,s-o),t.lineTo(n-f,s+o),b+=Gr,h=Math.cos(b)*(r?r/2:m),o=Math.cos(b)*m,a=Math.sin(b)*m,f=Math.sin(b)*(r?r/2:m),t.moveTo(n-h,s-a),t.lineTo(n+h,s+a),t.moveTo(n+f,s-o),t.lineTo(n-f,s+o);break;case"line":o=r?r/2:Math.cos(b)*m,a=Math.sin(b)*m,t.moveTo(n-o,s-a),t.lineTo(n+o,s+a);break;case"dash":t.moveTo(n,s),t.lineTo(n+Math.cos(b)*(r?r/2:m),s+Math.sin(b)*m);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function ml(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Zg(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function em(t){t.restore()}function qz(t,e,n,s,r){if(!e)return t.lineTo(n.x,n.y);if(r==="middle"){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else r==="after"!=!!s?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function Wz(t,e,n,s){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function Kz(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),rt(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function Gz(t,e,n,s,r){if(r.strikethrough||r.underline){const i=t.measureText(s),o=e-i.actualBoundingBoxLeft,a=e+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function Yz(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function yl(t,e,n,s,r,i={}){const o=Ot(e)?e:[e],a=i.strokeWidth>0&&i.strokeColor!=="";let l,c;for(t.save(),t.font=r.string,Kz(t,i),l=0;l<o.length;++l)c=o[l],i.backdrop&&Yz(t,i.backdrop),a&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),rt(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(c,n,s,i.maxWidth)),t.fillText(c,n,s,i.maxWidth),Gz(t,n,s,c,i),s+=Number(r.lineHeight);t.restore()}function Lu(t,e){const{x:n,y:s,w:r,h:i,radius:o}=e;t.arc(n+o.topLeft,s+o.topLeft,o.topLeft,1.5*Et,Et,!0),t.lineTo(n,s+i-o.bottomLeft),t.arc(n+o.bottomLeft,s+i-o.bottomLeft,o.bottomLeft,Et,Mt,!0),t.lineTo(n+r-o.bottomRight,s+i),t.arc(n+r-o.bottomRight,s+i-o.bottomRight,o.bottomRight,Mt,0,!0),t.lineTo(n+r,s+o.topRight),t.arc(n+r-o.topRight,s+o.topRight,o.topRight,0,-Mt,!0),t.lineTo(n+o.topLeft,s)}const Qz=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Xz=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Jz(t,e){const n=(""+t).match(Qz);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const Zz=t=>+t||0;function tm(t,e){const n={},s=et(e),r=s?Object.keys(e):e,i=et(t)?s?o=>He(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)n[o]=Zz(i(o));return n}function cT(t){return tm(t,{top:"y",right:"x",bottom:"y",left:"x"})}function ao(t){return tm(t,["topLeft","topRight","bottomLeft","bottomRight"])}function jn(t){const e=cT(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function un(t,e){t=t||{},e=e||St.font;let n=He(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let s=He(t.style,e.style);s&&!(""+s).match(Xz)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const r={family:He(t.family,e.family),lineHeight:Jz(He(t.lineHeight,e.lineHeight),n),size:n,style:s,weight:He(t.weight,e.weight),string:""};return r.string=Hz(r),r}function yc(t,e,n,s){let r,i,o;for(r=0,i=t.length;r<i;++r)if(o=t[r],o!==void 0&&o!==void 0)return o}function eH(t,e,n){const{min:s,max:r}=t,i=Zk(e,(r-s)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(s,-Math.abs(i)),max:o(r,i)}}function Li(t,e){return Object.assign(Object.create(t),e)}function nm(t,e=[""],n,s,r=()=>t[0]){const i=n||t;typeof s>"u"&&(s=fT("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:s,_getTarget:r,override:a=>nm([a,...t],e,i,s)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return dT(a,l,()=>lH(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return Db(a).includes(l)},ownKeys(a){return Db(a)},set(a,l,c){const u=a._storage||(a._storage=r());return a[l]=u[l]=c,delete a._keys,!0}})}function _o(t,e,n,s){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:uT(t,s),setContext:i=>_o(t,i,n,s),override:i=>_o(t.override(i),e,n,s)};return new Proxy(r,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,a){return dT(i,o,()=>nH(i,o,a))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,a){return t[o]=a,delete i[o],!0}})}function uT(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:s=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:s,isScriptable:Dr(n)?n:()=>n,isIndexable:Dr(s)?s:()=>s}}const tH=(t,e)=>t?t+Gg(e):e,sm=(t,e)=>et(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function dT(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const s=n();return t[e]=s,s}function nH(t,e,n){const{_proxy:s,_context:r,_subProxy:i,_descriptors:o}=t;let a=s[e];return Dr(a)&&o.isScriptable(e)&&(a=sH(e,a,t,n)),Ot(a)&&a.length&&(a=rH(e,a,t,o.isIndexable)),sm(e,a)&&(a=_o(a,r,i&&i[e],o)),a}function sH(t,e,n,s){const{_proxy:r,_context:i,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(i,o||s);return a.delete(t),sm(t,l)&&(l=rm(r._scopes,r,t,l)),l}function rH(t,e,n,s){const{_proxy:r,_context:i,_subProxy:o,_descriptors:a}=n;if(typeof i.index<"u"&&s(t))return e[i.index%e.length];if(et(e[0])){const l=e,c=r._scopes.filter(u=>u!==l);e=[];for(const u of l){const h=rm(c,r,t,u);e.push(_o(h,i,o&&o[t],a))}}return e}function hT(t,e,n){return Dr(t)?t(e,n):t}const iH=(t,e)=>t===!0?e:typeof t=="string"?Ii(e,t):void 0;function oH(t,e,n,s,r){for(const i of e){const o=iH(n,i);if(o){t.add(o);const a=hT(o._fallback,n,r);if(typeof a<"u"&&a!==n&&a!==s)return a}else if(o===!1&&typeof s<"u"&&n!==s)return null}return!1}function rm(t,e,n,s){const r=e._rootScopes,i=hT(e._fallback,n,s),o=[...t,...r],a=new Set;a.add(s);let l=Ob(a,o,n,i||n,s);return l===null||typeof i<"u"&&i!==n&&(l=Ob(a,o,i,l,s),l===null)?!1:nm(Array.from(a),[""],r,i,()=>aH(e,n,s))}function Ob(t,e,n,s,r){for(;n;)n=oH(t,e,n,s,r);return n}function aH(t,e,n){const s=t._getTarget();e in s||(s[e]={});const r=s[e];return Ot(r)&&et(n)?n:r||{}}function lH(t,e,n,s){let r;for(const i of e)if(r=fT(tH(i,t),n),typeof r<"u")return sm(t,r)?rm(n,s,t,r):r}function fT(t,e){for(const n of e){if(!n)continue;const s=n[t];if(typeof s<"u")return s}}function Db(t){let e=t._keys;return e||(e=t._keys=cH(t._scopes)),e}function cH(t){const e=new Set;for(const n of t)for(const s of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(s);return Array.from(e)}const uH=Number.EPSILON||1e-14,xo=(t,e)=>e<t.length&&!t[e].skip&&t[e],pT=t=>t==="x"?"y":"x";function dH(t,e,n,s){const r=t.skip?e:t,i=e,o=n.skip?e:n,a=np(i,r),l=np(o,i);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=s*c,f=s*u;return{previous:{x:i.x-h*(o.x-r.x),y:i.y-h*(o.y-r.y)},next:{x:i.x+f*(o.x-r.x),y:i.y+f*(o.y-r.y)}}}function hH(t,e,n){const s=t.length;let r,i,o,a,l,c=xo(t,0);for(let u=0;u<s-1;++u)if(l=c,c=xo(t,u+1),!(!l||!c)){if($a(e[u],0,uH)){n[u]=n[u+1]=0;continue}r=n[u]/e[u],i=n[u+1]/e[u],a=Math.pow(r,2)+Math.pow(i,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=r*o*e[u],n[u+1]=i*o*e[u])}}function fH(t,e,n="x"){const s=pT(n),r=t.length;let i,o,a,l=xo(t,0);for(let c=0;c<r;++c){if(o=a,a=l,l=xo(t,c+1),!a)continue;const u=a[n],h=a[s];o&&(i=(u-o[n])/3,a[`cp1${n}`]=u-i,a[`cp1${s}`]=h-i*e[c]),l&&(i=(l[n]-u)/3,a[`cp2${n}`]=u+i,a[`cp2${s}`]=h+i*e[c])}}function pH(t,e="x"){const n=pT(e),s=t.length,r=Array(s).fill(0),i=Array(s);let o,a,l,c=xo(t,0);for(o=0;o<s;++o)if(a=l,l=c,c=xo(t,o+1),!!l){if(c){const u=c[e]-l[e];r[o]=u!==0?(c[n]-l[n])/u:0}i[o]=a?c?ps(r[o-1])!==ps(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}hH(t,r,i),fH(t,i,e)}function vc(t,e,n){return Math.max(Math.min(t,n),e)}function gH(t,e){let n,s,r,i,o,a=ml(t[0],e);for(n=0,s=t.length;n<s;++n)o=i,i=a,a=n<s-1&&ml(t[n+1],e),i&&(r=t[n],o&&(r.cp1x=vc(r.cp1x,e.left,e.right),r.cp1y=vc(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=vc(r.cp2x,e.left,e.right),r.cp2y=vc(r.cp2y,e.top,e.bottom)))}function mH(t,e,n,s,r){let i,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")pH(t,r);else{let c=s?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)a=t[i],l=dH(c,a,t[Math.min(i+1,o-(s?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&gH(t,n)}function im(){return typeof window<"u"&&typeof document<"u"}function om(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Vu(t,e,n){let s;return typeof t=="string"?(s=parseInt(t,10),t.indexOf("%")!==-1&&(s=s/100*e.parentNode[n])):s=t,s}const Fd=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function yH(t,e){return Fd(t).getPropertyValue(e)}const vH=["top","right","bottom","left"];function di(t,e,n){const s={};n=n?"-"+n:"";for(let r=0;r<4;r++){const i=vH[r];s[i]=parseFloat(t[e+"-"+i+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const bH=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function _H(t,e){const n=t.touches,s=n&&n.length?n[0]:t,{offsetX:r,offsetY:i}=s;let o=!1,a,l;if(bH(r,i,t.target))a=r,l=i;else{const c=e.getBoundingClientRect();a=s.clientX-c.left,l=s.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Zr(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:s}=e,r=Fd(n),i=r.boxSizing==="border-box",o=di(r,"padding"),a=di(r,"border","width"),{x:l,y:c,box:u}=_H(t,n),h=o.left+(u&&a.left),f=o.top+(u&&a.top);let{width:g,height:v}=e;return i&&(g-=o.width+a.width,v-=o.height+a.height),{x:Math.round((l-h)/g*n.width/s),y:Math.round((c-f)/v*n.height/s)}}function xH(t,e,n){let s,r;if(e===void 0||n===void 0){const i=t&&om(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const o=i.getBoundingClientRect(),a=Fd(i),l=di(a,"border","width"),c=di(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,s=Vu(a.maxWidth,i,"clientWidth"),r=Vu(a.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:s||Nu,maxHeight:r||Nu}}const bc=t=>Math.round(t*10)/10;function wH(t,e,n,s){const r=Fd(t),i=di(r,"margin"),o=Vu(r.maxWidth,t,"clientWidth")||Nu,a=Vu(r.maxHeight,t,"clientHeight")||Nu,l=xH(t,e,n);let{width:c,height:u}=l;if(r.boxSizing==="content-box"){const f=di(r,"border","width"),g=di(r,"padding");c-=g.width+f.width,u-=g.height+f.height}return c=Math.max(0,c-i.width),u=Math.max(0,s?c/s:u-i.height),c=bc(Math.min(c,o,l.maxWidth)),u=bc(Math.min(u,a,l.maxHeight)),c&&!u&&(u=bc(c/2)),(e!==void 0||n!==void 0)&&s&&l.height&&u>l.height&&(u=l.height,c=bc(Math.floor(u*s))),{width:c,height:u}}function Mb(t,e,n){const s=e||1,r=Math.floor(t.height*s),i=Math.floor(t.width*s);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==s||o.height!==r||o.width!==i?(t.currentDevicePixelRatio=s,o.height=r,o.width=i,t.ctx.setTransform(s,0,0,s,0,0),!0):!1}const EH=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};im()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function Nb(t,e){const n=yH(t,e),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function ei(t,e,n,s){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function kH(t,e,n,s){return{x:t.x+n*(e.x-t.x),y:s==="middle"?n<.5?t.y:e.y:s==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function TH(t,e,n,s){const r={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=ei(t,r,n),a=ei(r,i,n),l=ei(i,e,n),c=ei(o,a,n),u=ei(a,l,n);return ei(c,u,n)}const IH=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},SH=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function lo(t,e,n){return t?IH(e,n):SH()}function gT(t,e){let n,s;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=s)}function mT(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function yT(t){return t==="angle"?{between:gl,compare:Iz,normalize:or}:{between:yr,compare:(e,n)=>e-n,normalize:e=>e}}function Lb({start:t,end:e,count:n,loop:s,style:r}){return{start:t%n,end:e%n,loop:s&&(e-t+1)%n===0,style:r}}function AH(t,e,n){const{property:s,start:r,end:i}=n,{between:o,normalize:a}=yT(s),l=e.length;let{start:c,end:u,loop:h}=t,f,g;if(h){for(c+=l,u+=l,f=0,g=l;f<g&&o(a(e[c%l][s]),r,i);++f)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:h,style:t.style}}function CH(t,e,n){if(!n)return[t];const{property:s,start:r,end:i}=n,o=e.length,{compare:a,between:l,normalize:c}=yT(s),{start:u,end:h,loop:f,style:g}=AH(t,e,n),v=[];let m=!1,b=null,I,T,D;const L=()=>l(r,D,I)&&a(r,D)!==0,M=()=>a(i,I)===0||l(i,D,I),$=()=>m||L(),E=()=>!m||M();for(let _=u,w=u;_<=h;++_)T=e[_%o],!T.skip&&(I=c(T[s]),I!==D&&(m=l(I,r,i),b===null&&$()&&(b=a(I,r)===0?_:w),b!==null&&E()&&(v.push(Lb({start:b,end:_,loop:f,count:o,style:g})),b=null),w=_,D=I));return b!==null&&v.push(Lb({start:b,end:h,loop:f,count:o,style:g})),v}function PH(t,e){const n=[],s=t.segments;for(let r=0;r<s.length;r++){const i=CH(s[r],t.points,e);i.length&&n.push(...i)}return n}function RH(t,e,n,s){let r=0,i=e-1;if(n&&!s)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(i+=r);i>r&&t[i%e].skip;)i--;return i%=e,{start:r,end:i}}function OH(t,e,n,s){const r=t.length,i=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%r];c.skip||c.stop?a.skip||(s=!1,i.push({start:e%r,end:(l-1)%r,loop:s}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&i.push({start:e%r,end:o%r,loop:s}),i}function DH(t,e){const n=t.points,s=t.options.spanGaps,r=n.length;if(!r)return[];const i=!!t._loop,{start:o,end:a}=RH(n,r,i,s);if(s===!0)return Vb(t,[{start:o,end:a,loop:i}],n,e);const l=a<o?a+r:a,c=!!t._fullLoop&&o===0&&a===r-1;return Vb(t,OH(n,o,l,c),n,e)}function Vb(t,e,n,s){return!s||!s.setContext||!n?e:MH(t,e,n,s)}function MH(t,e,n,s){const r=t._chart.getContext(),i=$b(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=i,h=e[0].start,f=h;function g(v,m,b,I){const T=a?-1:1;if(v!==m){for(v+=l;n[v%l].skip;)v-=T;for(;n[m%l].skip;)m+=T;v%l!==m%l&&(c.push({start:v%l,end:m%l,loop:b,style:I}),u=I,h=m%l)}}for(const v of e){h=a?h:v.start;let m=n[h%l],b;for(f=h+1;f<=v.end;f++){const I=n[f%l];b=$b(s.setContext(Li(r,{type:"segment",p0:m,p1:I,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),NH(b,u)&&g(h,f-1,v.loop,u),m=I,u=b}h<f-1&&g(h,f-1,v.loop,u)}return c}function $b(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function NH(t,e){if(!e)return!1;const n=[],s=function(r,i){return Xg(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(t,s)!==JSON.stringify(e,s)}function _c(t,e,n){return t.options.clip?t[n]:e[n]}function LH(t,e){const{xScale:n,yScale:s}=t;return n&&s?{left:_c(n,e,"left"),right:_c(n,e,"right"),top:_c(s,e,"top"),bottom:_c(s,e,"bottom")}:e}function VH(t,e){const n=e._clip;if(n.disabled)return!1;const s=LH(e,t.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:s.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class $H{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,s,r){const i=n.listeners[r],o=n.duration;i.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(s-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=iT.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((s,r)=>{if(!s.running||!s.items.length)return;const i=s.items;let o=i.length-1,a=!1,l;for(;o>=0;--o)l=i[o],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(r.draw(),this._notify(r,s,e,"progress")),i.length||(s.running=!1,this._notify(r,s,e,"complete"),s.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let s=n.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,s)),s}listen(e,n,s){this._getAnims(e).listeners[n].push(s)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,r)=>Math.max(s,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const s=n.items;let r=s.length-1;for(;r>=0;--r)s[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var ks=new $H;const Fb="transparent",FH={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const s=Ab(t||Fb),r=s.valid&&Ab(e||Fb);return r&&r.valid?r.mix(s,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class UH{constructor(e,n,s,r){const i=n[s];r=yc([e.to,r,i,e.from]);const o=yc([e.from,i,r]);this._active=!0,this._fn=e.fn||FH[e.type||typeof o],this._easing=Fa[e.easing]||Fa.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=s,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,s){if(this._active){this._notify(!1);const r=this._target[this._prop],i=s-this._start,o=this._duration-i;this._start=s,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=yc([e.to,n,r,e.from]),this._from=yc([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,s=this._duration,r=this._prop,i=this._from,o=this._loop,a=this._to;let l;if(this._active=i!==a&&(o||n<s),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=i;return}l=n/s%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(i,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,s)=>{e.push({res:n,rej:s})})}_notify(e){const n=e?"res":"rej",s=this._promises||[];for(let r=0;r<s.length;r++)s[r][n]()}}class vT{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!et(e))return;const n=Object.keys(St.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const i=e[r];if(!et(i))return;const o={};for(const a of n)o[a]=i[a];(Ot(i.properties)&&i.properties||[r]).forEach(a=>{(a===r||!s.has(a))&&s.set(a,o)})})}_animateOptions(e,n){const s=n.options,r=jH(e,s);if(!r)return[];const i=this._createAnimations(r,s);return s.$shared&&BH(e.options.$animations,s).then(()=>{e.options=s},()=>{}),i}_createAnimations(e,n){const s=this._properties,r=[],i=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(e,n));continue}const u=n[c];let h=i[c];const f=s.get(c);if(h)if(f&&h.active()){h.update(f,u,a);continue}else h.cancel();if(!f||!f.duration){e[c]=u;continue}i[c]=h=new UH(f,e,c,u),r.push(h)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const s=this._createAnimations(e,n);if(s.length)return ks.add(this._chart,s),!0}}function BH(t,e){const n=[],s=Object.keys(e);for(let r=0;r<s.length;r++){const i=t[s[r]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function jH(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Ub(t,e){const n=t&&t.options||{},s=n.reverse,r=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:s?i:r,end:s?r:i}}function zH(t,e,n){if(n===!1)return!1;const s=Ub(t,n),r=Ub(e,n);return{top:r.end,right:s.end,bottom:r.start,left:s.start}}function HH(t){let e,n,s,r;return et(t)?(e=t.top,n=t.right,s=t.bottom,r=t.left):e=n=s=r=t,{top:e,right:n,bottom:s,left:r,disabled:t===!1}}function bT(t,e){const n=[],s=t._getSortedDatasetMetas(e);let r,i;for(r=0,i=s.length;r<i;++r)n.push(s[r].index);return n}function Bb(t,e,n,s={}){const r=t.keys,i=s.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(u=!0,s.all)continue;break}c=t.values[l],Bn(c)&&(i||e===0||ps(e)===ps(c))&&(e+=c)}return!u&&!s.all?0:e}function qH(t,e){const{iScale:n,vScale:s}=e,r=n.axis==="x"?"x":"y",i=s.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[r]:u,[i]:t[u]};return a}function Yh(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function WH(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function KH(t){const{min:e,max:n,minDefined:s,maxDefined:r}=t.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function GH(t,e,n){const s=t[e]||(t[e]={});return s[n]||(s[n]={})}function jb(t,e,n,s){for(const r of e.getMatchingVisibleMetas(s).reverse()){const i=t[r.index];if(n&&i>0||!n&&i<0)return r.index}return null}function zb(t,e){const{chart:n,_cachedMeta:s}=t,r=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:a}=s,l=i.axis,c=o.axis,u=WH(i,o,s),h=e.length;let f;for(let g=0;g<h;++g){const v=e[g],{[l]:m,[c]:b}=v,I=v._stacks||(v._stacks={});f=I[c]=GH(r,u,m),f[a]=b,f._top=jb(f,o,!0,s.type),f._bottom=jb(f,o,!1,s.type);const T=f._visualValues||(f._visualValues={});T[a]=b}}function Qh(t,e){const n=t.scales;return Object.keys(n).filter(s=>n[s].axis===e).shift()}function YH(t,e){return Li(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function QH(t,e,n){return Li(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function na(t,e){const n=t.controller.index,s=t.vScale&&t.vScale.axis;if(s){e=e||t._parsed;for(const r of e){const i=r._stacks;if(!i||i[s]===void 0||i[s][n]===void 0)return;delete i[s][n],i[s]._visualValues!==void 0&&i[s]._visualValues[n]!==void 0&&delete i[s]._visualValues[n]}}}const Xh=t=>t==="reset"||t==="none",Hb=(t,e)=>e?t:Object.assign({},t),XH=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:bT(n,!0),values:null};class hi{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Yh(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&na(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,s=this.getDataset(),r=(h,f,g,v)=>h==="x"?f:h==="r"?v:g,i=n.xAxisID=He(s.xAxisID,Qh(e,"x")),o=n.yAxisID=He(s.yAxisID,Qh(e,"y")),a=n.rAxisID=He(s.rAxisID,Qh(e,"r")),l=n.indexAxis,c=n.iAxisID=r(l,i,o,a),u=n.vAxisID=r(l,o,i,a);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Tb(this._data,this),e._stacked&&na(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),s=this._data;if(et(n)){const r=this._cachedMeta;this._data=qH(n,r)}else if(s!==n){if(s){Tb(s,this);const r=this._cachedMeta;na(r),r._parsed=[]}n&&Object.isExtensible(n)&&Pz(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,s=this.getDataset();let r=!1;this._dataCheck();const i=n._stacked;n._stacked=Yh(n.vScale,n),n.stack!==s.stack&&(r=!0,na(n),n.stack=s.stack),this._resyncElements(e),(r||i!==n._stacked)&&(zb(this,n._parsed),n._stacked=Yh(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:s,_data:r}=this,{iScale:i,_stacked:o}=s,a=i.axis;let l=e===0&&n===r.length?!0:s._sorted,c=e>0&&s._parsed[e-1],u,h,f;if(this._parsing===!1)s._parsed=r,s._sorted=!0,f=r;else{Ot(r[e])?f=this.parseArrayData(s,r,e,n):et(r[e])?f=this.parseObjectData(s,r,e,n):f=this.parsePrimitiveData(s,r,e,n);const g=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<n;++u)s._parsed[u+e]=h=f[u],l&&(g()&&(l=!1),c=h);s._sorted=l}o&&zb(this,f)}parsePrimitiveData(e,n,s,r){const{iScale:i,vScale:o}=e,a=i.axis,l=o.axis,c=i.getLabels(),u=i===o,h=new Array(r);let f,g,v;for(f=0,g=r;f<g;++f)v=f+s,h[f]={[a]:u||i.parse(c[v],v),[l]:o.parse(n[v],v)};return h}parseArrayData(e,n,s,r){const{xScale:i,yScale:o}=e,a=new Array(r);let l,c,u,h;for(l=0,c=r;l<c;++l)u=l+s,h=n[u],a[l]={x:i.parse(h[0],u),y:o.parse(h[1],u)};return a}parseObjectData(e,n,s,r){const{xScale:i,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(r);let u,h,f,g;for(u=0,h=r;u<h;++u)f=u+s,g=n[f],c[u]={x:i.parse(Ii(g,a),f),y:o.parse(Ii(g,l),f)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,s){const r=this.chart,i=this._cachedMeta,o=n[e.axis],a={keys:bT(r,!0),values:n._stacks[e.axis]._visualValues};return Bb(a,o,i.index,{mode:s})}updateRangeFromParsed(e,n,s,r){const i=s[n.axis];let o=i===null?NaN:i;const a=r&&s._stacks[n.axis];r&&a&&(r.values=a,o=Bb(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const s=this._cachedMeta,r=s._parsed,i=s._sorted&&e===s.iScale,o=r.length,a=this._getOtherScale(e),l=XH(n,s,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=KH(a);let f,g;function v(){g=r[f];const m=g[a.axis];return!Bn(g[e.axis])||u>m||h<m}for(f=0;f<o&&!(!v()&&(this.updateRangeFromParsed(c,e,g,l),i));++f);if(i){for(f=o-1;f>=0;--f)if(!v()){this.updateRangeFromParsed(c,e,g,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,s=[];let r,i,o;for(r=0,i=n.length;r<i;++r)o=n[r][e.axis],Bn(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,s=n.iScale,r=n.vScale,i=this.getParsed(e);return{label:s?""+s.getLabelForValue(i[s.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=HH(He(this.options.clip,zH(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,s=this._cachedMeta,r=s.data||[],i=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,c=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(e,i,a,l),u=a;u<a+l;++u){const h=r[u];h.hidden||(h.active&&c?o.push(h):h.draw(e,i))}for(u=0;u<o.length;++u)o[u].draw(e,i)}getStyle(e,n){const s=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,n,s){const r=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=QH(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=YH(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=s,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",s){const r=n==="active",i=this._cachedDataOpts,o=e+"-"+n,a=i[o],l=this.enableOptionSharing&&fl(s);if(a)return Hb(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),h=r?[`${e}Hover`,"hover",e,""]:[e,""],f=c.getOptionScopes(this.getDataset(),u),g=Object.keys(St.elements[e]),v=()=>this.getContext(s,r,n),m=c.resolveNamedOptions(f,g,v,h);return m.$shared&&(m.$shared=l,i[o]=Object.freeze(Hb(m,l))),m}_resolveAnimations(e,n,s){const r=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,a=i[o];if(a)return a;let l;if(r.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,n),f=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(f,this.getContext(e,s,n))}const c=new vT(r,l&&l.animations);return l&&l._cacheable&&(i[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Xh(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const s=this.resolveDataElementOptions(e,n),r=this._sharedOptions,i=this.getSharedOptions(s),o=this.includeOptions(n,i)||i!==r;return this.updateSharedOptions(i,n,s),{sharedOptions:i,includeOptions:o}}updateElement(e,n,s,r){Xh(r)?Object.assign(e,s):this._resolveAnimations(n,r).update(e,s)}updateSharedOptions(e,n,s){e&&!Xh(n)&&this._resolveAnimations(void 0,n).update(e,s)}_setStyle(e,n,s,r){e.active=r;const i=this.getStyle(n,r);this._resolveAnimations(n,s,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,n,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,s=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const r=s.length,i=n.length,o=Math.min(i,r);o&&this.parse(0,o),i>r?this._insertElements(r,i-r,e):i<r&&this._removeElements(i,r-i)}_insertElements(e,n,s=!0){const r=this._cachedMeta,i=r.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(i),a=e;a<o;++a)i[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,n),s&&this.updateElements(i,e,n,"reset")}updateElements(e,n,s,r){}_removeElements(e,n){const s=this._cachedMeta;if(this._parsing){const r=s._parsed.splice(e,n);s._stacked&&na(s,r)}s.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,s,r]=e;this[n](s,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Ee(hi,"defaults",{}),Ee(hi,"datasetElementType",null),Ee(hi,"dataElementType",null);function JH(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let s=[];for(let r=0,i=n.length;r<i;r++)s=s.concat(n[r].controller.getAllParsedValues(t));t._cache.$bar=rT(s.sort((r,i)=>r-i))}return t._cache.$bar}function ZH(t){const e=t.iScale,n=JH(e,t.type);let s=e._length,r,i,o,a;const l=()=>{o===32767||o===-32768||(fl(a)&&(s=Math.min(s,Math.abs(o-a)||s)),a=o)};for(r=0,i=n.length;r<i;++r)o=e.getPixelForValue(n[r]),l();for(a=void 0,r=0,i=e.ticks.length;r<i;++r)o=e.getPixelForTick(r),l();return s}function eq(t,e,n,s){const r=n.barThickness;let i,o;return rt(r)?(i=e.min*n.categoryPercentage,o=n.barPercentage):(i=r*s,o=1),{chunk:i/s,ratio:o,start:e.pixels[t]-i/2}}function tq(t,e,n,s){const r=e.pixels,i=r[t];let o=t>0?r[t-1]:null,a=t<r.length-1?r[t+1]:null;const l=n.categoryPercentage;o===null&&(o=i-(a===null?e.end-e.start:a-i)),a===null&&(a=i+i-o);const c=i-(i-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/s,ratio:n.barPercentage,start:c}}function nq(t,e,n,s){const r=n.parse(t[0],s),i=n.parse(t[1],s),o=Math.min(r,i),a=Math.max(r,i);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:r,end:i,min:o,max:a}}function _T(t,e,n,s){return Ot(t)?nq(t,e,n,s):e[n.axis]=n.parse(t,s),e}function qb(t,e,n,s){const r=t.iScale,i=t.vScale,o=r.getLabels(),a=r===i,l=[];let c,u,h,f;for(c=n,u=n+s;c<u;++c)f=e[c],h={},h[r.axis]=a||r.parse(o[c],c),l.push(_T(f,h,i,c));return l}function Jh(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function sq(t,e,n){return t!==0?ps(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function rq(t){let e,n,s,r,i;return t.horizontal?(e=t.base>t.x,n="left",s="right"):(e=t.base<t.y,n="bottom",s="top"),e?(r="end",i="start"):(r="start",i="end"),{start:n,end:s,reverse:e,top:r,bottom:i}}function iq(t,e,n,s){let r=e.borderSkipped;const i={};if(!r){t.borderSkipped=i;return}if(r===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=rq(t);r==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===s?r=c:(n._bottom||0)===s?r=u:(i[Wb(u,o,a,l)]=!0,r=c)),i[Wb(r,o,a,l)]=!0,t.borderSkipped=i}function Wb(t,e,n,s){return s?(t=oq(t,e,n),t=Kb(t,n,e)):t=Kb(t,e,n),t}function oq(t,e,n){return t===e?n:t===n?e:t}function Kb(t,e,n){return t==="start"?e:t==="end"?n:t}function aq(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class qc extends hi{parsePrimitiveData(e,n,s,r){return qb(e,n,s,r)}parseArrayData(e,n,s,r){return qb(e,n,s,r)}parseObjectData(e,n,s,r){const{iScale:i,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=i.axis==="x"?a:l,u=o.axis==="x"?a:l,h=[];let f,g,v,m;for(f=s,g=s+r;f<g;++f)m=n[f],v={},v[i.axis]=i.parse(Ii(m,c),f),h.push(_T(Ii(m,u),v,o,f));return h}updateRangeFromParsed(e,n,s,r){super.updateRangeFromParsed(e,n,s,r);const i=s._custom;i&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:s,vScale:r}=n,i=this.getParsed(e),o=i._custom,a=Jh(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+s.getLabelForValue(i[s.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,s,r){const i=r==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(n,r);for(let g=n;g<n+s;g++){const v=this.getParsed(g),m=i||rt(v[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(g),b=this._calculateBarIndexPixels(g,u),I=(v._stacks||{})[a.axis],T={horizontal:c,base:m.base,enableBorderRadius:!I||Jh(v._custom)||o===I._top||o===I._bottom,x:c?m.head:b.center,y:c?b.center:m.head,height:c?b.size:Math.abs(m.size),width:c?Math.abs(m.size):b.size};f&&(T.options=h||this.resolveDataElementOptions(g,e[g].active?"active":r));const D=T.options||e[g].options;iq(T,D,I,o),aq(T,D,u.ratio),this.updateElement(e[g],g,T,r)}}_getStacks(e,n){const{iScale:s}=this._cachedMeta,r=s.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),i=s.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[s.axis],c=u=>{const h=u._parsed.find(g=>g[s.axis]===l),f=h&&h[u.vScale.axis];if(rt(f)||isNaN(f))return!0};for(const u of r)if(!(n!==void 0&&c(u))&&((i===!1||o.indexOf(u.stack)===-1||i===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,s){const r=this._getStacks(e,s),i=n!==void 0?r.indexOf(n):-1;return i===-1?r.length-1:i}_getRuler(){const e=this.options,n=this._cachedMeta,s=n.iScale,r=[];let i,o;for(i=0,o=n.data.length;i<o;++i)r.push(s.getPixelForValue(this.getParsed(i)[s.axis],i));const a=e.barThickness;return{min:a||ZH(n),pixels:r,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:s,index:r},options:{base:i,minBarLength:o}}=this,a=i||0,l=this.getParsed(e),c=l._custom,u=Jh(c);let h=l[n.axis],f=0,g=s?this.applyStack(n,l,s):h,v,m;g!==h&&(f=g-h,g=h),u&&(h=c.barStart,g=c.barEnd-c.barStart,h!==0&&ps(h)!==ps(c.barEnd)&&(f=0),f+=h);const b=!rt(i)&&!u?i:f;let I=n.getPixelForValue(b);if(this.chart.getDataVisibility(e)?v=n.getPixelForValue(f+g):v=I,m=v-I,Math.abs(m)<o){m=sq(m,n,a)*o,h===a&&(I-=m/2);const T=n.getPixelForDecimal(0),D=n.getPixelForDecimal(1),L=Math.min(T,D),M=Math.max(T,D);I=Math.max(Math.min(I,M),L),v=I+m,s&&!u&&(l._stacks[n.axis]._visualValues[r]=n.getValueForPixel(v)-n.getValueForPixel(I))}if(I===n.getPixelForValue(a)){const T=ps(m)*n.getLineWidthForValue(a)/2;I+=T,m-=T}return{size:m,base:I,head:v,center:v+m/2}}_calculateBarIndexPixels(e,n){const s=n.scale,r=this.options,i=r.skipNull,o=He(r.maxBarThickness,1/0);let a,l;if(n.grouped){const c=i?this._getStackCount(e):n.stackCount,u=r.barThickness==="flex"?tq(e,n,r,c):eq(e,n,r,c),h=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0);a=u.start+u.chunk*h+u.chunk/2,l=Math.min(o,u.chunk*u.ratio)}else a=s.getPixelForValue(this.getParsed(e)[s.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,s=e.data,r=s.length;let i=0;for(;i<r;++i)this.getParsed(i)[n.axis]!==null&&!s[i].hidden&&s[i].draw(this._ctx)}}Ee(qc,"id","bar"),Ee(qc,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Ee(qc,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function lq(t,e,n){let s=1,r=1,i=0,o=0;if(e<wt){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),h=Math.cos(l),f=Math.sin(l),g=(D,L,M)=>gl(D,a,l,!0)?1:Math.max(L,L*n,M,M*n),v=(D,L,M)=>gl(D,a,l,!0)?-1:Math.min(L,L*n,M,M*n),m=g(0,c,h),b=g(Mt,u,f),I=v(Et,c,h),T=v(Et+Mt,u,f);s=(m-I)/2,r=(b-T)/2,i=-(m+I)/2,o=-(b+T)/2}return{ratioX:s,ratioY:r,offsetX:i,offsetY:o}}class ma extends hi{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const s=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=s;else{let i=l=>+s[l];if(et(s[e])){const{key:l="value"}=this._parsing;i=c=>+Ii(s[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)r._parsed[o]=i(o)}}_getRotation(){return Ls(this.options.rotation-90)}_getCircumference(){return Ls(this.options.circumference)}_getRotationExtents(){let e=wt,n=-wt;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const r=this.chart.getDatasetMeta(s).controller,i=r._getRotation(),o=r._getCircumference();e=Math.min(e,i),n=Math.max(n,i+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:s}=n,r=this._cachedMeta,i=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,a=Math.max((Math.min(s.width,s.height)-o)/2,0),l=Math.min(fz(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:g,offsetX:v,offsetY:m}=lq(h,u,l),b=(s.width-o)/f,I=(s.height-o)/g,T=Math.max(Math.min(b,I)/2,0),D=Zk(this.options.radius,T),L=Math.max(D*l,0),M=(D-L)/this._getVisibleDatasetWeightTotal();this.offsetX=v*D,this.offsetY=m*D,r.total=this.calculateTotal(),this.outerRadius=D-M*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-M*c,0),this.updateElements(i,0,i.length,e)}_circumference(e,n){const s=this.options,r=this._cachedMeta,i=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*i/wt)}updateElements(e,n,s,r){const i=r==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,h=(a.top+a.bottom)/2,f=i&&c.animateScale,g=f?0:this.innerRadius,v=f?0:this.outerRadius,{sharedOptions:m,includeOptions:b}=this._getSharedOptions(n,r);let I=this._getRotation(),T;for(T=0;T<n;++T)I+=this._circumference(T,i);for(T=n;T<n+s;++T){const D=this._circumference(T,i),L=e[T],M={x:u+this.offsetX,y:h+this.offsetY,startAngle:I,endAngle:I+D,circumference:D,outerRadius:v,innerRadius:g};b&&(M.options=m||this.resolveDataElementOptions(T,L.active?"active":r)),I+=D,this.updateElement(L,T,M,r)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let s=0,r;for(r=0;r<n.length;r++){const i=e._parsed[r];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(r)&&!n[r].hidden&&(s+=Math.abs(i))}return s}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?wt*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,s=this.chart,r=s.data.labels||[],i=Jg(n._parsed[e],s.options.locale);return{label:r[e]||"",value:i}}getMaxBorderWidth(e){let n=0;const s=this.chart;let r,i,o,a,l;if(!e){for(r=0,i=s.data.datasets.length;r<i;++r)if(s.isDatasetVisible(r)){o=s.getDatasetMeta(r),e=o.data,a=o.controller;break}}if(!e)return 0;for(r=0,i=e.length;r<i;++r)l=a.resolveDataElementOptions(r),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let s=0,r=e.length;s<r;++s){const i=this.resolveDataElementOptions(s);n=Math.max(n,i.offset||0,i.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(e){return Math.max(He(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Ee(ma,"id","doughnut"),Ee(ma,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Ee(ma,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),Ee(ma,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:s,color:r}}=e.legend.options;return n.labels.map((i,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:i,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:r,lineWidth:l.borderWidth,pointStyle:s,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}});class Wc extends hi{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:s,data:r=[],_dataset:i}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=Dz(n,r,o);this._drawStart=a,this._drawCount=l,Mz(n)&&(a=0,l=r.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!i._decimated,s.points=r;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(s,void 0,{animated:!o,options:c},e),this.updateElements(r,a,l,e)}updateElements(e,n,s,r){const i=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(n,r),f=o.axis,g=a.axis,{spanGaps:v,segment:m}=this.options,b=pl(v)?v:Number.POSITIVE_INFINITY,I=this.chart._animationsDisabled||i||r==="none",T=n+s,D=e.length;let L=n>0&&this.getParsed(n-1);for(let M=0;M<D;++M){const $=e[M],E=I?$:{};if(M<n||M>=T){E.skip=!0;continue}const _=this.getParsed(M),w=rt(_[g]),A=E[f]=o.getPixelForValue(_[f],M),k=E[g]=i||w?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,_,l):_[g],M);E.skip=isNaN(A)||isNaN(k)||w,E.stop=M>0&&Math.abs(_[f]-L[f])>b,m&&(E.parsed=_,E.raw=c.data[M]),h&&(E.options=u||this.resolveDataElementOptions(M,$.active?"active":r)),I||this.updateElement($,M,E,r),L=_}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,s=n.options&&n.options.borderWidth||0,r=e.data||[];if(!r.length)return s;const i=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Ee(Wc,"id","line"),Ee(Wc,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Ee(Wc,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class ip extends ma{}Ee(ip,"id","pie"),Ee(ip,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});function Qr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class am{constructor(e){Ee(this,"options");this.options=e||{}}static override(e){Object.assign(am.prototype,e)}init(){}formats(){return Qr()}parse(){return Qr()}format(){return Qr()}add(){return Qr()}diff(){return Qr()}startOf(){return Qr()}endOf(){return Qr()}}var cq={_date:am};function uq(t,e,n,s){const{controller:r,data:i,_sorted:o}=t,a=r._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&i.length){const c=a._reversePixels?Az:oi;if(s){if(r._sharedOptions){const u=i[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const f=c(i,e,n-h),g=c(i,e,n+h);return{lo:f.lo,hi:g.hi}}}}else{const u=c(i,e,n);if(l){const{vScale:h}=r._cachedMeta,{_parsed:f}=t,g=f.slice(0,u.lo+1).reverse().findIndex(m=>!rt(m[h.axis]));u.lo-=Math.max(0,g);const v=f.slice(u.hi).findIndex(m=>!rt(m[h.axis]));u.hi+=Math.max(0,v)}return u}}return{lo:0,hi:i.length-1}}function Ud(t,e,n,s,r){const i=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=i.length;a<l;++a){const{index:c,data:u}=i[a],{lo:h,hi:f}=uq(i[a],e,o,r);for(let g=h;g<=f;++g){const v=u[g];v.skip||s(v,c,g)}}}function dq(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(s,r){const i=e?Math.abs(s.x-r.x):0,o=n?Math.abs(s.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function Zh(t,e,n,s,r){const i=[];return!r&&!t.isPointInArea(e)||Ud(t,n,e,function(a,l,c){!r&&!ml(a,t.chartArea,0)||a.inRange(e.x,e.y,s)&&i.push({element:a,datasetIndex:l,index:c})},!0),i}function hq(t,e,n,s){let r=[];function i(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],s),{angle:h}=nT(o,{x:e.x,y:e.y});gl(h,c,u)&&r.push({element:o,datasetIndex:a,index:l})}return Ud(t,n,e,i),r}function fq(t,e,n,s,r,i){let o=[];const a=dq(n);let l=Number.POSITIVE_INFINITY;function c(u,h,f){const g=u.inRange(e.x,e.y,r);if(s&&!g)return;const v=u.getCenterPoint(r);if(!(!!i||t.isPointInArea(v))&&!g)return;const b=a(e,v);b<l?(o=[{element:u,datasetIndex:h,index:f}],l=b):b===l&&o.push({element:u,datasetIndex:h,index:f})}return Ud(t,n,e,c),o}function ef(t,e,n,s,r,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!s?hq(t,e,n,r):fq(t,e,n,s,r,i)}function Gb(t,e,n,s,r){const i=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Ud(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],r)&&(i.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,r))}),s&&!a?[]:i}var pq={modes:{index(t,e,n,s){const r=Zr(e,t),i=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Zh(t,r,i,s,o):ef(t,r,i,!1,s,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,s){const r=Zr(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Zh(t,r,i,s,o):ef(t,r,i,!1,s,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,s){const r=Zr(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return Zh(t,r,i,s,o)},nearest(t,e,n,s){const r=Zr(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return ef(t,r,i,n.intersect,s,o)},x(t,e,n,s){const r=Zr(e,t);return Gb(t,r,"x",n.intersect,s)},y(t,e,n,s){const r=Zr(e,t);return Gb(t,r,"y",n.intersect,s)}}};const xT=["left","top","right","bottom"];function sa(t,e){return t.filter(n=>n.pos===e)}function Yb(t,e){return t.filter(n=>xT.indexOf(n.pos)===-1&&n.box.axis===e)}function ra(t,e){return t.sort((n,s)=>{const r=e?s:n,i=e?n:s;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function gq(t){const e=[];let n,s,r,i,o,a;for(n=0,s=(t||[]).length;n<s;++n)r=t[n],{position:i,options:{stack:o,stackWeight:a=1}}=r,e.push({index:n,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&i+o,stackWeight:a});return e}function mq(t){const e={};for(const n of t){const{stack:s,pos:r,stackWeight:i}=n;if(!s||!xT.includes(r))continue;const o=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function yq(t,e){const n=mq(t),{vBoxMaxWidth:s,hBoxMaxHeight:r}=e;let i,o,a;for(i=0,o=t.length;i<o;++i){a=t[i];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*s:l&&e.availableWidth,a.height=r):(a.width=s,a.height=u?u*r:l&&e.availableHeight)}return n}function vq(t){const e=gq(t),n=ra(e.filter(c=>c.box.fullSize),!0),s=ra(sa(e,"left"),!0),r=ra(sa(e,"right")),i=ra(sa(e,"top"),!0),o=ra(sa(e,"bottom")),a=Yb(e,"x"),l=Yb(e,"y");return{fullSize:n,leftAndTop:s.concat(i),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:sa(e,"chartArea"),vertical:s.concat(r).concat(l),horizontal:i.concat(o).concat(a)}}function Qb(t,e,n,s){return Math.max(t[n],e[n])+Math.max(t[s],e[s])}function wT(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function bq(t,e,n,s){const{pos:r,box:i}=n,o=t.maxPadding;if(!et(r)){n.size&&(t[r]-=n.size);const h=s[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?i.height:i.width),n.size=h.size/h.count,t[r]+=n.size}i.getPadding&&wT(o,i.getPadding());const a=Math.max(0,e.outerWidth-Qb(o,t,"left","right")),l=Math.max(0,e.outerHeight-Qb(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function _q(t){const e=t.maxPadding;function n(s){const r=Math.max(e[s]-t[s],0);return t[s]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function xq(t,e){const n=e.maxPadding;function s(r){const i={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{i[o]=Math.max(e[o],n[o])}),i}return s(t?["left","right"]:["top","bottom"])}function ya(t,e,n,s){const r=[];let i,o,a,l,c,u;for(i=0,o=t.length,c=0;i<o;++i){a=t[i],l=a.box,l.update(a.width||e.w,a.height||e.h,xq(a.horizontal,e));const{same:h,other:f}=bq(e,n,a,s);c|=h&&r.length,u=u||f,l.fullSize||r.push(a)}return c&&ya(r,e,n,s)||u}function xc(t,e,n,s,r){t.top=n,t.left=e,t.right=e+s,t.bottom=n+r,t.width=s,t.height=r}function Xb(t,e,n,s){const r=n.padding;let{x:i,y:o}=e;for(const a of t){const l=a.box,c=s[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=e.w*u,f=c.size||l.height;fl(c.start)&&(o=c.start),l.fullSize?xc(l,r.left,o,n.outerWidth-r.right-r.left,f):xc(l,e.left+c.placed,o,h,f),c.start=o,c.placed+=h,o=l.bottom}else{const h=e.h*u,f=c.size||l.width;fl(c.start)&&(i=c.start),l.fullSize?xc(l,i,r.top,f,n.outerHeight-r.bottom-r.top):xc(l,i,e.top+c.placed,f,h),c.start=i,c.placed+=h,i=l.right}}e.x=i,e.y=o}var Nn={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,s){if(!t)return;const r=jn(t.options.layout.padding),i=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=vq(t.boxes),l=a.vertical,c=a.horizontal;ot(t.boxes,m=>{typeof m.beforeLayout=="function"&&m.beforeLayout()});const u=l.reduce((m,b)=>b.box.options&&b.box.options.display===!1?m:m+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/u,hBoxMaxHeight:o/2}),f=Object.assign({},r);wT(f,jn(s));const g=Object.assign({maxPadding:f,w:i,h:o,x:r.left,y:r.top},r),v=yq(l.concat(c),h);ya(a.fullSize,g,h,v),ya(l,g,h,v),ya(c,g,h,v)&&ya(l,g,h,v),_q(g),Xb(a.leftAndTop,g,h,v),g.x+=g.w,g.y+=g.h,Xb(a.rightAndBottom,g,h,v),t.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},ot(a.chartArea,m=>{const b=m.box;Object.assign(b,t.chartArea),b.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class ET{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,s){}removeEventListener(e,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,s,r){return n=Math.max(0,n||e.width),s=s||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):s)}}isAttached(e){return!0}updateConfig(e){}}class wq extends ET{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Kc="$chartjs",Eq={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Jb=t=>t===null||t==="";function kq(t,e){const n=t.style,s=t.getAttribute("height"),r=t.getAttribute("width");if(t[Kc]={initial:{height:s,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Jb(r)){const i=Nb(t,"width");i!==void 0&&(t.width=i)}if(Jb(s))if(t.style.height==="")t.height=t.width/(e||2);else{const i=Nb(t,"height");i!==void 0&&(t.height=i)}return t}const kT=EH?{passive:!0}:!1;function Tq(t,e,n){t&&t.addEventListener(e,n,kT)}function Iq(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,kT)}function Sq(t,e){const n=Eq[t.type]||t.type,{x:s,y:r}=Zr(t,e);return{type:n,chart:e,native:t,x:s!==void 0?s:null,y:r!==void 0?r:null}}function $u(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function Aq(t,e,n){const s=t.canvas,r=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||$u(a.addedNodes,s),o=o&&!$u(a.removedNodes,s);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function Cq(t,e,n){const s=t.canvas,r=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||$u(a.removedNodes,s),o=o&&!$u(a.addedNodes,s);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const vl=new Map;let Zb=0;function TT(){const t=window.devicePixelRatio;t!==Zb&&(Zb=t,vl.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function Pq(t,e){vl.size||window.addEventListener("resize",TT),vl.set(t,e)}function Rq(t){vl.delete(t),vl.size||window.removeEventListener("resize",TT)}function Oq(t,e,n){const s=t.canvas,r=s&&om(s);if(!r)return;const i=oT((a,l)=>{const c=r.clientWidth;n(a,l),c<r.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||i(c,u)});return o.observe(r),Pq(t,i),o}function tf(t,e,n){n&&n.disconnect(),e==="resize"&&Rq(t)}function Dq(t,e,n){const s=t.canvas,r=oT(i=>{t.ctx!==null&&n(Sq(i,t))},t);return Tq(s,e,r),r}class Mq extends ET{acquireContext(e,n){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(kq(e,n),s):null}releaseContext(e){const n=e.canvas;if(!n[Kc])return!1;const s=n[Kc].initial;["height","width"].forEach(i=>{const o=s[i];rt(o)?n.removeAttribute(i):n.setAttribute(i,o)});const r=s.style||{};return Object.keys(r).forEach(i=>{n.style[i]=r[i]}),n.width=n.width,delete n[Kc],!0}addEventListener(e,n,s){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),o={attach:Aq,detach:Cq,resize:Oq}[n]||Dq;r[n]=o(e,n,s)}removeEventListener(e,n){const s=e.$proxies||(e.$proxies={}),r=s[n];if(!r)return;({attach:tf,detach:tf,resize:tf}[n]||Iq)(e,n,r),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,s,r){return wH(e,n,s,r)}isAttached(e){const n=e&&om(e);return!!(n&&n.isConnected)}}function Nq(t){return!im()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?wq:Mq}var Sc;let Qs=(Sc=class{constructor(){Ee(this,"x");Ee(this,"y");Ee(this,"active",!1);Ee(this,"options");Ee(this,"$animations")}tooltipPosition(e){const{x:n,y:s}=this.getProps(["x","y"],e);return{x:n,y:s}}hasValue(){return pl(this.x)&&pl(this.y)}getProps(e,n){const s=this.$animations;if(!n||!s)return this;const r={};return e.forEach(i=>{r[i]=s[i]&&s[i].active()?s[i]._to:this[i]}),r}},Ee(Sc,"defaults",{}),Ee(Sc,"defaultRoutes"),Sc);function Lq(t,e){const n=t.options.ticks,s=Vq(t),r=Math.min(n.maxTicksLimit||s,s),i=n.major.enabled?Fq(e):[],o=i.length,a=i[0],l=i[o-1],c=[];if(o>r)return Uq(e,c,i,o/r),c;const u=$q(i,e,r);if(o>0){let h,f;const g=o>1?Math.round((l-a)/(o-1)):null;for(wc(e,c,u,rt(g)?0:a-g,a),h=0,f=o-1;h<f;h++)wc(e,c,u,i[h],i[h+1]);return wc(e,c,u,l,rt(g)?e.length:l+g),c}return wc(e,c,u),c}function Vq(t){const e=t.options.offset,n=t._tickSize(),s=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(s,r))}function $q(t,e,n){const s=Bq(t),r=e.length/n;if(!s)return Math.max(r,1);const i=xz(s);for(let o=0,a=i.length-1;o<a;o++){const l=i[o];if(l>r)return l}return Math.max(r,1)}function Fq(t){const e=[];let n,s;for(n=0,s=t.length;n<s;n++)t[n].major&&e.push(n);return e}function Uq(t,e,n,s){let r=0,i=n[0],o;for(s=Math.ceil(s),o=0;o<t.length;o++)o===i&&(e.push(t[o]),r++,i=n[r*s])}function wc(t,e,n,s,r){const i=He(s,0),o=Math.min(He(r,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),r&&(l=r-s,n=l/Math.floor(l/n)),u=i;u<0;)a++,u=Math.round(i+a*n);for(c=Math.max(i,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(i+a*n))}function Bq(t){const e=t.length;let n,s;if(e<2)return!1;for(s=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==s)return!1;return s}const jq=t=>t==="left"?"right":t==="right"?"left":t,e_=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,t_=(t,e)=>Math.min(e||t,t);function n_(t,e){const n=[],s=t.length/e,r=t.length;let i=0;for(;i<r;i+=s)n.push(t[Math.floor(i)]);return n}function zq(t,e,n){const s=t.ticks.length,r=Math.min(e,s-1),i=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(r),c;if(!(n&&(s===1?c=Math.max(l-i,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(r-1))/2,l+=r<e?c:-c,l<i-a||l>o+a)))return l}function Hq(t,e){ot(t,n=>{const s=n.gc,r=s.length/2;let i;if(r>e){for(i=0;i<r;++i)delete n.data[s[i]];s.splice(0,r)}})}function ia(t){return t.drawTicks?t.tickLength:0}function s_(t,e){if(!t.display)return 0;const n=un(t.font,e),s=jn(t.padding);return(Ot(t.text)?t.text.length:1)*n.lineHeight+s.height}function qq(t,e){return Li(t,{scale:e,type:"scale"})}function Wq(t,e,n){return Li(t,{tick:n,index:e,type:"tick"})}function Kq(t,e,n){let s=Qg(t);return(n&&e!=="right"||!n&&e==="right")&&(s=jq(s)),s}function Gq(t,e,n,s){const{top:r,left:i,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let h=0,f,g,v;const m=o-r,b=a-i;if(t.isHorizontal()){if(g=tn(s,i,a),et(n)){const I=Object.keys(n)[0],T=n[I];v=u[I].getPixelForValue(T)+m-e}else n==="center"?v=(c.bottom+c.top)/2+m-e:v=e_(t,n,e);f=a-i}else{if(et(n)){const I=Object.keys(n)[0],T=n[I];g=u[I].getPixelForValue(T)-b+e}else n==="center"?g=(c.left+c.right)/2-b+e:g=e_(t,n,e);v=tn(s,o,r),h=n==="left"?-Mt:Mt}return{titleX:g,titleY:v,maxWidth:f,rotation:h}}class Vo extends Qs{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:s,_suggestedMax:r}=this;return e=ss(e,Number.POSITIVE_INFINITY),n=ss(n,Number.NEGATIVE_INFINITY),s=ss(s,Number.POSITIVE_INFINITY),r=ss(r,Number.NEGATIVE_INFINITY),{min:ss(e,s),max:ss(n,r),minDefined:Bn(e),maxDefined:Bn(n)}}getMinMax(e){let{min:n,max:s,minDefined:r,maxDefined:i}=this.getUserBounds(),o;if(r&&i)return{min:n,max:s};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),r||(n=Math.min(n,o.min)),i||(s=Math.max(s,o.max));return n=i&&n>s?s:n,s=r&&n>s?n:s,{min:ss(n,ss(s,n)),max:ss(s,ss(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ft(this.options.beforeUpdate,[this])}update(e,n,s){const{beginAtZero:r,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=eH(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?n_(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Lq(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,e=!e),this._startPixel=n,this._endPixel=s,this._reversePixels=e,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ft(this.options.afterUpdate,[this])}beforeSetDimensions(){ft(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ft(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ft(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ft(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let s,r,i;for(s=0,r=e.length;s<r;s++)i=e[s],i.label=ft(n.callback,[i.value,s,e],this)}afterTickToLabelConversion(){ft(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ft(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,s=t_(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,i=n.maxRotation;let o=r,a,l,c;if(!this._isVisible()||!n.display||r>=i||s<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),h=u.widest.width,f=u.highest.height,g=cn(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/s:g/(s-1),h+6>a&&(a=g/(s-(e.offset?.5:1)),l=this.maxHeight-ia(e.grid)-n.padding-s_(e.title,this.chart.options.font),c=Math.sqrt(h*h+f*f),o=Tz(Math.min(Math.asin(cn((u.highest.height+6)/a,-1,1)),Math.asin(cn(l/c,-1,1))-Math.asin(cn(f/c,-1,1)))),o=Math.max(r,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){ft(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ft(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:s,title:r,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=s_(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=ia(i)+l):(e.height=this.maxHeight,e.width=ia(i)+l),s.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:f}=this._getLabelSizes(),g=s.padding*2,v=Ls(this.labelRotation),m=Math.cos(v),b=Math.sin(v);if(a){const I=s.mirror?0:b*h.width+m*f.height;e.height=Math.min(this.maxHeight,e.height+I+g)}else{const I=s.mirror?0:m*h.width+b*f.height;e.width=Math.min(this.maxWidth,e.width+I+g)}this._calculatePadding(c,u,b,m)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,s,r){const{ticks:{align:i,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,g=0;l?c?(f=r*e.width,g=s*n.height):(f=s*e.height,g=r*n.width):i==="start"?g=n.width:i==="end"?f=e.width:i!=="inner"&&(f=e.width/2,g=n.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((g-h+o)*this.width/(this.width-h),0)}else{let u=n.height/2,h=e.height/2;i==="start"?(u=0,h=e.height):i==="end"&&(u=n.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ft(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,s;for(n=0,s=e.length;n<s;n++)rt(e[n].label)&&(e.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=n_(s,n)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,s){const{ctx:r,_longestTextCache:i}=this,o=[],a=[],l=Math.floor(n/t_(n,s));let c=0,u=0,h,f,g,v,m,b,I,T,D,L,M;for(h=0;h<n;h+=l){if(v=e[h].label,m=this._resolveTickFontOptions(h),r.font=b=m.string,I=i[b]=i[b]||{data:{},gc:[]},T=m.lineHeight,D=L=0,!rt(v)&&!Ot(v))D=Pb(r,I.data,I.gc,D,v),L=T;else if(Ot(v))for(f=0,g=v.length;f<g;++f)M=v[f],!rt(M)&&!Ot(M)&&(D=Pb(r,I.data,I.gc,D,M),L+=T);o.push(D),a.push(L),c=Math.max(D,c),u=Math.max(L,u)}Hq(i,n);const $=o.indexOf(c),E=a.indexOf(u),_=w=>({width:o[w]||0,height:a[w]||0});return{first:_(0),last:_(n-1),widest:_($),highest:_(E),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return Sz(this._alignToPixels?Yr(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const s=n[e];return s.$context||(s.$context=Wq(this.getContext(),e,s))}return this.$context||(this.$context=qq(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Ls(this.labelRotation),s=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,a=i?i.widest.width+o:0,l=i?i.highest.height+o:0;return this.isHorizontal()?l*s>a*r?a/s:l/r:l*r<a*s?l/s:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,s=this.chart,r=this.options,{grid:i,position:o,border:a}=r,l=i.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),f=ia(i),g=[],v=a.setContext(this.getContext()),m=v.display?v.width:0,b=m/2,I=function(se){return Yr(s,se,m)};let T,D,L,M,$,E,_,w,A,k,S,R;if(o==="top")T=I(this.bottom),E=this.bottom-f,w=T-b,k=I(e.top)+b,R=e.bottom;else if(o==="bottom")T=I(this.top),k=e.top,R=I(e.bottom)-b,E=T+b,w=this.top+f;else if(o==="left")T=I(this.right),$=this.right-f,_=T-b,A=I(e.left)+b,S=e.right;else if(o==="right")T=I(this.left),A=e.left,S=I(e.right)-b,$=T+b,_=this.left+f;else if(n==="x"){if(o==="center")T=I((e.top+e.bottom)/2+.5);else if(et(o)){const se=Object.keys(o)[0],F=o[se];T=I(this.chart.scales[se].getPixelForValue(F))}k=e.top,R=e.bottom,E=T+b,w=E+f}else if(n==="y"){if(o==="center")T=I((e.left+e.right)/2);else if(et(o)){const se=Object.keys(o)[0],F=o[se];T=I(this.chart.scales[se].getPixelForValue(F))}$=T-b,_=$-f,A=e.left,S=e.right}const me=He(r.ticks.maxTicksLimit,h),Te=Math.max(1,Math.ceil(h/me));for(D=0;D<h;D+=Te){const se=this.getContext(D),F=i.setContext(se),K=a.setContext(se),Re=F.lineWidth,mt=F.color,gt=K.dash||[],Ve=K.dashOffset,ie=F.tickWidth,ue=F.tickColor,_e=F.tickBorderDash||[],je=F.tickBorderDashOffset;L=zq(this,D,l),L!==void 0&&(M=Yr(s,L,Re),c?$=_=A=S=M:E=w=k=R=M,g.push({tx1:$,ty1:E,tx2:_,ty2:w,x1:A,y1:k,x2:S,y2:R,width:Re,color:mt,borderDash:gt,borderDashOffset:Ve,tickWidth:ie,tickColor:ue,tickBorderDash:_e,tickBorderDashOffset:je}))}return this._ticksLength=h,this._borderValue=T,g}_computeLabelItems(e){const n=this.axis,s=this.options,{position:r,ticks:i}=s,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=i,f=ia(s.grid),g=f+u,v=h?-u:g,m=-Ls(this.labelRotation),b=[];let I,T,D,L,M,$,E,_,w,A,k,S,R="middle";if(r==="top")$=this.bottom-v,E=this._getXAxisLabelAlignment();else if(r==="bottom")$=this.top+v,E=this._getXAxisLabelAlignment();else if(r==="left"){const Te=this._getYAxisLabelAlignment(f);E=Te.textAlign,M=Te.x}else if(r==="right"){const Te=this._getYAxisLabelAlignment(f);E=Te.textAlign,M=Te.x}else if(n==="x"){if(r==="center")$=(e.top+e.bottom)/2+g;else if(et(r)){const Te=Object.keys(r)[0],se=r[Te];$=this.chart.scales[Te].getPixelForValue(se)+g}E=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")M=(e.left+e.right)/2-g;else if(et(r)){const Te=Object.keys(r)[0],se=r[Te];M=this.chart.scales[Te].getPixelForValue(se)}E=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?R="top":l==="end"&&(R="bottom"));const me=this._getLabelSizes();for(I=0,T=a.length;I<T;++I){D=a[I],L=D.label;const Te=i.setContext(this.getContext(I));_=this.getPixelForTick(I)+i.labelOffset,w=this._resolveTickFontOptions(I),A=w.lineHeight,k=Ot(L)?L.length:1;const se=k/2,F=Te.color,K=Te.textStrokeColor,Re=Te.textStrokeWidth;let mt=E;o?(M=_,E==="inner"&&(I===T-1?mt=this.options.reverse?"left":"right":I===0?mt=this.options.reverse?"right":"left":mt="center"),r==="top"?c==="near"||m!==0?S=-k*A+A/2:c==="center"?S=-me.highest.height/2-se*A+A:S=-me.highest.height+A/2:c==="near"||m!==0?S=A/2:c==="center"?S=me.highest.height/2-se*A:S=me.highest.height-k*A,h&&(S*=-1),m!==0&&!Te.showLabelBackdrop&&(M+=A/2*Math.sin(m))):($=_,S=(1-k)*A/2);let gt;if(Te.showLabelBackdrop){const Ve=jn(Te.backdropPadding),ie=me.heights[I],ue=me.widths[I];let _e=S-Ve.top,je=0-Ve.left;switch(R){case"middle":_e-=ie/2;break;case"bottom":_e-=ie;break}switch(E){case"center":je-=ue/2;break;case"right":je-=ue;break;case"inner":I===T-1?je-=ue:I>0&&(je-=ue/2);break}gt={left:je,top:_e,width:ue+Ve.width,height:ie+Ve.height,color:Te.backdropColor}}b.push({label:L,font:w,textOffset:S,options:{rotation:m,color:F,strokeColor:K,strokeWidth:Re,textAlign:mt,textBaseline:R,translation:[M,$],backdrop:gt}})}return b}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Ls(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:s,mirror:r,padding:i}}=this.options,o=this._getLabelSizes(),a=e+i,l=o.widest.width;let c,u;return n==="left"?r?(u=this.right+i,s==="near"?c="left":s==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,s==="near"?c="right":s==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?r?(u=this.left+i,s==="near"?c="right":s==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,s==="near"?c="left":s==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:s,top:r,width:i,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(s,r,i,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(i=>i.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,s=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const a=(l,c,u)=>{!u.width||!u.color||(s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(c.x,c.y),s.stroke(),s.restore())};if(n.display)for(i=0,o=r.length;i<o;++i){const l=r[i];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:s,grid:r}}=this,i=s.setContext(this.getContext()),o=s.display?i.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,f;this.isHorizontal()?(c=Yr(e,this.left,o)-o/2,u=Yr(e,this.right,a)+a/2,h=f=l):(h=Yr(e,this.top,o)-o/2,f=Yr(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(c,h),n.lineTo(u,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,r=this._computeLabelArea();r&&Zg(s,r);const i=this.getLabelItems(e);for(const o of i){const a=o.options,l=o.font,c=o.label,u=o.textOffset;yl(s,c,0,u,l,a)}r&&em(s)}drawTitle(){const{ctx:e,options:{position:n,title:s,reverse:r}}=this;if(!s.display)return;const i=un(s.font),o=jn(s.padding),a=s.align;let l=i.lineHeight/2;n==="bottom"||n==="center"||et(n)?(l+=o.bottom,Ot(s.text)&&(l+=i.lineHeight*(s.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:h,rotation:f}=Gq(this,l,n,a);yl(e,s.text,0,0,i,{color:s.color,maxWidth:h,rotation:f,textAlign:Kq(a,n,r),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,s=He(e.grid&&e.grid.z,-1),r=He(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Vo.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:s,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",r=[];let i,o;for(i=0,o=n.length;i<o;++i){const a=n[i];a[s]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return un(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Ec{constructor(e,n,s){this.type=e,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let s;Xq(n)&&(s=this.register(n));const r=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,Yq(e,o,s),this.override&&St.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,s=e.id,r=this.scope;s in n&&delete n[s],r&&s in St[r]&&(delete St[r][s],this.override&&delete Si[s])}}function Yq(t,e,n){const s=hl(Object.create(null),[n?St.get(n):{},St.get(e),t.defaults]);St.set(e,s),t.defaultRoutes&&Qq(e,t.defaultRoutes),t.descriptors&&St.describe(e,t.descriptors)}function Qq(t,e){Object.keys(e).forEach(n=>{const s=n.split("."),r=s.pop(),i=[t].concat(s).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");St.route(i,r,l,a)})}function Xq(t){return"id"in t&&"defaults"in t}class Jq{constructor(){this.controllers=new Ec(hi,"datasets",!0),this.elements=new Ec(Qs,"elements"),this.plugins=new Ec(Object,"plugins"),this.scales=new Ec(Vo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,s){[...n].forEach(r=>{const i=s||this._getRegistryForType(r);s||i.isForType(r)||i===this.plugins&&r.id?this._exec(e,i,r):ot(r,o=>{const a=s||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,s){const r=Gg(e);ft(s["before"+r],[],s),n[e](s),ft(s["after"+r],[],s)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(e))return s}return this.plugins}_get(e,n,s){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return r}}var os=new Jq;class Zq{constructor(){this._init=[]}notify(e,n,s,r){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(i,e,n,s);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,s,r){r=r||{};for(const i of e){const o=i.plugin,a=o[s],l=[n,r,i.options];if(ft(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){rt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const s=e&&e.config,r=He(s.options&&s.options.plugins,{}),i=eW(s);return r===!1&&!n?[]:nW(e,i,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],s=this._cache,r=(i,o)=>i.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,s),e,"stop"),this._notify(r(s,n),e,"start")}}function eW(t){const e={},n=[],s=Object.keys(os.plugins.items);for(let i=0;i<s.length;i++)n.push(os.getPlugin(s[i]));const r=t.plugins||[];for(let i=0;i<r.length;i++){const o=r[i];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function tW(t,e){return!e&&t===!1?null:t===!0?{}:t}function nW(t,{plugins:e,localIds:n},s,r){const i=[],o=t.getContext();for(const a of e){const l=a.id,c=tW(s[l],r);c!==null&&i.push({plugin:a,options:sW(t.config,{plugin:a,local:n[l]},c,o)})}return i}function sW(t,{plugin:e,local:n},s,r){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(s,i);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function op(t,e){const n=St.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function rW(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function iW(t,e){return t===e?"_index_":"_value_"}function r_(t){if(t==="x"||t==="y"||t==="r")return t}function oW(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function ap(t,...e){if(r_(t))return t;for(const n of e){const s=n.axis||oW(n.position)||t.length>1&&r_(t[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function i_(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function aW(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(s=>s.xAxisID===t||s.yAxisID===t);if(n.length)return i_(t,"x",n[0])||i_(t,"y",n[0])}return{}}function lW(t,e){const n=Si[t.type]||{scales:{}},s=e.scales||{},r=op(t.type,e),i=Object.create(null);return Object.keys(s).forEach(o=>{const a=s[o];if(!et(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=ap(o,a,aW(o,t),St.scales[a.type]),c=iW(l,r),u=n.scales||{};i[o]=Va(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||op(a,e),u=(Si[a]||{}).scales||{};Object.keys(u).forEach(h=>{const f=rW(h,l),g=o[f+"AxisID"]||f;i[g]=i[g]||Object.create(null),Va(i[g],[{axis:f},s[g],u[h]])})}),Object.keys(i).forEach(o=>{const a=i[o];Va(a,[St.scales[a.type],St.scale])}),i}function IT(t){const e=t.options||(t.options={});e.plugins=He(e.plugins,{}),e.scales=lW(t,e)}function ST(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function cW(t){return t=t||{},t.data=ST(t.data),IT(t),t}const o_=new Map,AT=new Set;function kc(t,e){let n=o_.get(t);return n||(n=e(),o_.set(t,n),AT.add(n)),n}const oa=(t,e,n)=>{const s=Ii(e,n);s!==void 0&&t.add(s)};class uW{constructor(e){this._config=cW(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=ST(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),IT(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return kc(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return kc(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return kc(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,s=this.type;return kc(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const s=this._scopeCache;let r=s.get(e);return(!r||n)&&(r=new Map,s.set(e,r)),r}getOptionScopes(e,n,s){const{options:r,type:i}=this,o=this._cachedScopes(e,s),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(h=>oa(l,e,h))),u.forEach(h=>oa(l,r,h)),u.forEach(h=>oa(l,Si[i]||{},h)),u.forEach(h=>oa(l,St,h)),u.forEach(h=>oa(l,sp,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),AT.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Si[n]||{},St.datasets[n]||{},{type:n},St,sp]}resolveNamedOptions(e,n,s,r=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=a_(this._resolverCache,e,r);let l=o;if(hW(o,n)){i.$shared=!1,s=Dr(s)?s():s;const c=this.createResolver(e,s,a);l=_o(o,s,c)}for(const c of n)i[c]=l[c];return i}createResolver(e,n,s=[""],r){const{resolver:i}=a_(this._resolverCache,e,s);return et(n)?_o(i,n,void 0,r):i}}function a_(t,e,n){let s=t.get(e);s||(s=new Map,t.set(e,s));const r=n.join();let i=s.get(r);return i||(i={resolver:nm(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},s.set(r,i)),i}const dW=t=>et(t)&&Object.getOwnPropertyNames(t).some(e=>Dr(t[e]));function hW(t,e){const{isScriptable:n,isIndexable:s}=uT(t);for(const r of e){const i=n(r),o=s(r),a=(o||i)&&t[r];if(i&&(Dr(a)||dW(a))||o&&Ot(a))return!0}return!1}var fW="4.4.9";const pW=["top","bottom","left","right","chartArea"];function l_(t,e){return t==="top"||t==="bottom"||pW.indexOf(t)===-1&&e==="x"}function c_(t,e){return function(n,s){return n[t]===s[t]?n[e]-s[e]:n[t]-s[t]}}function u_(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),ft(n&&n.onComplete,[t],e)}function gW(t){const e=t.chart,n=e.options.animation;ft(n&&n.onProgress,[t],e)}function CT(t){return im()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Gc={},d_=t=>{const e=CT(t);return Object.values(Gc).filter(n=>n.canvas===e).pop()};function mW(t,e,n){const s=Object.keys(t);for(const r of s){const i=+r;if(i>=e){const o=t[r];delete t[r],(n>0||i>e)&&(t[i+n]=o)}}}function yW(t,e,n,s){return!n||t.type==="mouseout"?null:s?e:t}var rr;let Bd=(rr=class{static register(...e){os.add(...e),h_()}static unregister(...e){os.remove(...e),h_()}constructor(e,n){const s=this.config=new uW(n),r=CT(e),i=d_(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||Nq(r)),this.platform.updateConfig(s);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=hz(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Zq,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Rz(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],Gc[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}ks.listen(this,"complete",u_),ks.listen(this,"progress",gW),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:s,height:r,_aspectRatio:i}=this;return rt(e)?n&&i?i:r?s/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return os}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Mb(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Rb(this.canvas,this.ctx),this}stop(){return ks.stop(this),this}resize(e,n){ks.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const s=this.options,r=this.canvas,i=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,n,i),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Mb(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),ft(s.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};ot(n,(s,r)=>{s.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,s=this.scales,r=Object.keys(s).reduce((o,a)=>(o[a]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const a=n[o],l=ap(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),ot(i,o=>{const a=o.options,l=a.id,c=ap(l,a),u=He(a.type,o.dtype);(a.position===void 0||l_(a.position,c)!==l_(o.dposition))&&(a.position=o.dposition),r[l]=!0;let h=null;if(l in s&&s[l].type===u)h=s[l];else{const f=os.getScale(u);h=new f({id:l,type:u,ctx:this.ctx,chart:this}),s[h.id]=h}h.init(a,e)}),ot(r,(o,a)=>{o||delete s[a]}),ot(s,o=>{Nn.configure(this,o,o.options),Nn.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,s=e.length;if(e.sort((r,i)=>r.index-i.index),s>n){for(let r=n;r<s;++r)this._destroyDatasetMeta(r);e.splice(n,s-n)}this._sortedMetasets=e.slice(0).sort(c_("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((s,r)=>{n.filter(i=>i===s._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let s,r;for(this._removeUnreferencedMetasets(),s=0,r=n.length;s<r;s++){const i=n[s];let o=this.getDatasetMeta(s);const a=i.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=a,o.indexAxis=i.indexAxis||op(a,this.options),o.order=i.order||0,o.index=s,o.label=""+i.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const l=os.getController(a),{datasetElementType:c,dataElementType:u}=St.datasets[a];Object.assign(l,{dataElementType:os.getElement(u),datasetElementType:c&&os.getElement(c)}),o.controller=new l(this,s),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){ot(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),f=!r&&i.indexOf(h)===-1;h.buildOrUpdateElements(f),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),r||ot(i,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(c_("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){ot(this.scales,e=>{Nn.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!xb(n,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:r,count:i}of n){const o=s==="_removeElements"?-i:i;mW(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=i=>new Set(e.filter(o=>o[0]===i).map((o,a)=>a+","+o.splice(1).join(","))),r=s(0);for(let i=1;i<n;i++)if(!xb(r,s(i)))return;return Array.from(r).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Nn.update(this,this.width,this.height,e);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],ot(this.boxes,r=>{s&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,i)=>{r._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,Dr(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const s=this.getDatasetMeta(e),r={meta:s,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(s.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ks.has(this)?this.attached&&!ks.running(this)&&ks.start(this):(this.draw(),u_({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,s=[];let r,i;for(r=0,i=n.length;r<i;++r){const o=n[r];(!e||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,s={meta:e,index:e.index,cancelable:!0},r=VH(this,e);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(r&&Zg(n,r),e.controller.draw(),r&&em(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return ml(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,s,r){const i=pq.modes[n];return typeof i=="function"?i(this,e,s,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],s=this._metasets;let r=s.filter(i=>i&&i._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},s.push(r)),r}getContext(){return this.$context||(this.$context=Li(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(e,n){const s=this.getDatasetMeta(e);s.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,s){const r=s?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,r);fl(n)?(i.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),o.update(i,{visible:s}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),ks.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Rb(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Gc[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,s=(i,o)=>{n.addEventListener(this,i,o),e[i]=o},r=(i,o,a)=>{i.offsetX=o,i.offsetY=a,this._eventHandler(i)};ot(this.options.events,i=>s(i,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,s=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},r=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},i=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),s("resize",i),s("detach",o)};o=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),s("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){ot(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},ot(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,s){const r=s?"set":"remove";let i,o,a,l;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],s=e.map(({datasetIndex:i,index:o})=>{const a=this.getDatasetMeta(i);if(!a)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:a.data[o],index:o}});!Du(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(e,n,s){return this._plugins.notify(this,e,n,s)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,s){const r=this.options.hover,i=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=i(n,e),a=s?e:i(e,n);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const s={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,r)===!1)return;const i=this._handleEvent(e,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,r),(i||s.changed)&&this.render(),this}_handleEvent(e,n,s){const{_active:r=[],options:i}=this,o=n,a=this._getActiveElements(e,r,s,o),l=vz(e),c=yW(e,this._lastEvent,s,l);s&&(this._lastEvent=null,ft(i.onHover,[e,a,this],this),l&&ft(i.onClick,[e,a,this],this));const u=!Du(a,r);return(u||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=c,u}_getActiveElements(e,n,s,r){if(e.type==="mouseout")return[];if(!s)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}},Ee(rr,"defaults",St),Ee(rr,"instances",Gc),Ee(rr,"overrides",Si),Ee(rr,"registry",os),Ee(rr,"version",fW),Ee(rr,"getChart",d_),rr);function h_(){return ot(Bd.instances,t=>t._plugins.invalidate())}function vW(t,e,n){const{startAngle:s,pixelMargin:r,x:i,y:o,outerRadius:a,innerRadius:l}=e;let c=r/a;t.beginPath(),t.arc(i,o,a,s-c,n+c),l>r?(c=r/l,t.arc(i,o,l,n+c,s-c,!0)):t.arc(i,o,r,n+Mt,s-Mt),t.closePath(),t.clip()}function bW(t){return tm(t,["outerStart","outerEnd","innerStart","innerEnd"])}function _W(t,e,n,s){const r=bW(t.options.borderRadius),i=(n-e)/2,o=Math.min(i,s*e/2),a=l=>{const c=(n-Math.min(i,l))*s/2;return cn(l,0,Math.min(i,c))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:cn(r.innerStart,0,o),innerEnd:cn(r.innerEnd,0,o)}}function Hi(t,e,n,s){return{x:n+t*Math.cos(e),y:s+t*Math.sin(e)}}function Fu(t,e,n,s,r,i){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,h=Math.max(e.outerRadius+s+n-c,0),f=u>0?u+s+n+c:0;let g=0;const v=r-l;if(s){const Te=u>0?u-s:0,se=h>0?h-s:0,F=(Te+se)/2,K=F!==0?v*F/(F+s):v;g=(v-K)/2}const m=Math.max(.001,v*h-n/Et)/h,b=(v-m)/2,I=l+b+g,T=r-b-g,{outerStart:D,outerEnd:L,innerStart:M,innerEnd:$}=_W(e,f,h,T-I),E=h-D,_=h-L,w=I+D/E,A=T-L/_,k=f+M,S=f+$,R=I+M/k,me=T-$/S;if(t.beginPath(),i){const Te=(w+A)/2;if(t.arc(o,a,h,w,Te),t.arc(o,a,h,Te,A),L>0){const Re=Hi(_,A,o,a);t.arc(Re.x,Re.y,L,A,T+Mt)}const se=Hi(S,T,o,a);if(t.lineTo(se.x,se.y),$>0){const Re=Hi(S,me,o,a);t.arc(Re.x,Re.y,$,T+Mt,me+Math.PI)}const F=(T-$/f+(I+M/f))/2;if(t.arc(o,a,f,T-$/f,F,!0),t.arc(o,a,f,F,I+M/f,!0),M>0){const Re=Hi(k,R,o,a);t.arc(Re.x,Re.y,M,R+Math.PI,I-Mt)}const K=Hi(E,I,o,a);if(t.lineTo(K.x,K.y),D>0){const Re=Hi(E,w,o,a);t.arc(Re.x,Re.y,D,I-Mt,w)}}else{t.moveTo(o,a);const Te=Math.cos(w)*h+o,se=Math.sin(w)*h+a;t.lineTo(Te,se);const F=Math.cos(A)*h+o,K=Math.sin(A)*h+a;t.lineTo(F,K)}t.closePath()}function xW(t,e,n,s,r){const{fullCircles:i,startAngle:o,circumference:a}=e;let l=e.endAngle;if(i){Fu(t,e,n,s,l,r);for(let c=0;c<i;++c)t.fill();isNaN(a)||(l=o+(a%wt||wt))}return Fu(t,e,n,s,l,r),t.fill(),l}function wW(t,e,n,s,r){const{fullCircles:i,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:f}=l,g=l.borderAlign==="inner";if(!c)return;t.setLineDash(h||[]),t.lineDashOffset=f,g?(t.lineWidth=c*2,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let v=e.endAngle;if(i){Fu(t,e,n,s,v,r);for(let m=0;m<i;++m)t.stroke();isNaN(a)||(v=o+(a%wt||wt))}g&&vW(t,e,v),i||(Fu(t,e,n,s,v,r),t.stroke())}class va extends Qs{constructor(n){super();Ee(this,"circumference");Ee(this,"endAngle");Ee(this,"fullCircles");Ee(this,"innerRadius");Ee(this,"outerRadius");Ee(this,"pixelMargin");Ee(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,s,r){const i=this.getProps(["x","y"],r),{angle:o,distance:a}=nT(i,{x:n,y:s}),{startAngle:l,endAngle:c,innerRadius:u,outerRadius:h,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),g=(this.options.spacing+this.options.borderWidth)/2,v=He(f,c-l),m=gl(o,l,c)&&l!==c,b=v>=wt||m,I=yr(a,u+g,h+g);return b&&I}getCenterPoint(n){const{x:s,y:r,startAngle:i,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:u}=this.options,h=(i+o)/2,f=(a+l+u+c)/2;return{x:s+Math.cos(h)*f,y:r+Math.sin(h)*f}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:s,circumference:r}=this,i=(s.offset||0)/4,o=(s.spacing||0)/2,a=s.circular;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=r>wt?Math.floor(r/wt):0,r===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*i,Math.sin(l)*i);const c=1-Math.sin(Math.min(Et,r||0)),u=i*c;n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,xW(n,this,u,o,a),wW(n,this,u,o,a),n.restore()}}Ee(va,"id","arc"),Ee(va,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),Ee(va,"defaultRoutes",{backgroundColor:"backgroundColor"}),Ee(va,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function PT(t,e,n=e){t.lineCap=He(n.borderCapStyle,e.borderCapStyle),t.setLineDash(He(n.borderDash,e.borderDash)),t.lineDashOffset=He(n.borderDashOffset,e.borderDashOffset),t.lineJoin=He(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=He(n.borderWidth,e.borderWidth),t.strokeStyle=He(n.borderColor,e.borderColor)}function EW(t,e,n){t.lineTo(n.x,n.y)}function kW(t){return t.stepped?qz:t.tension||t.cubicInterpolationMode==="monotone"?Wz:EW}function RT(t,e,n={}){const s=t.length,{start:r=0,end:i=s-1}=n,{start:o,end:a}=e,l=Math.max(r,o),c=Math.min(i,a),u=r<o&&i<o||r>a&&i>a;return{count:s,start:l,loop:e.loop,ilen:c<l&&!u?s+c-l:c-l}}function TW(t,e,n,s){const{points:r,options:i}=e,{count:o,start:a,loop:l,ilen:c}=RT(r,n,s),u=kW(i);let{move:h=!0,reverse:f}=s||{},g,v,m;for(g=0;g<=c;++g)v=r[(a+(f?c-g:g))%o],!v.skip&&(h?(t.moveTo(v.x,v.y),h=!1):u(t,m,v,f,i.stepped),m=v);return l&&(v=r[(a+(f?c:0))%o],u(t,m,v,f,i.stepped)),!!l}function IW(t,e,n,s){const r=e.points,{count:i,start:o,ilen:a}=RT(r,n,s),{move:l=!0,reverse:c}=s||{};let u=0,h=0,f,g,v,m,b,I;const T=L=>(o+(c?a-L:L))%i,D=()=>{m!==b&&(t.lineTo(u,b),t.lineTo(u,m),t.lineTo(u,I))};for(l&&(g=r[T(0)],t.moveTo(g.x,g.y)),f=0;f<=a;++f){if(g=r[T(f)],g.skip)continue;const L=g.x,M=g.y,$=L|0;$===v?(M<m?m=M:M>b&&(b=M),u=(h*u+L)/++h):(D(),t.lineTo(L,M),v=$,h=0,m=b=M),I=M}D()}function lp(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?IW:TW}function SW(t){return t.stepped?kH:t.tension||t.cubicInterpolationMode==="monotone"?TH:ei}function AW(t,e,n,s){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,s)&&r.closePath()),PT(t,e.options),t.stroke(r)}function CW(t,e,n,s){const{segments:r,options:i}=e,o=lp(e);for(const a of r)PT(t,i,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+s-1})&&t.closePath(),t.stroke()}const PW=typeof Path2D=="function";function RW(t,e,n,s){PW&&!e.options.segment?AW(t,e,n,s):CW(t,e,n,s)}class ba extends Qs{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const r=s.spanGaps?this._loop:this._fullLoop;mH(this._points,s,e,r,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=DH(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,s=e.length;return s&&n[e[s-1].end]}interpolate(e,n){const s=this.options,r=e[n],i=this.points,o=PH(this,{property:n,start:r,end:r});if(!o.length)return;const a=[],l=SW(s);let c,u;for(c=0,u=o.length;c<u;++c){const{start:h,end:f}=o[c],g=i[h],v=i[f];if(g===v){a.push(g);continue}const m=Math.abs((r-g[n])/(v[n]-g[n])),b=l(g,v,m,s.stepped);b[n]=e[n],a.push(b)}return a.length===1?a[0]:a}pathSegment(e,n,s){return lp(this)(e,this,n,s)}path(e,n,s){const r=this.segments,i=lp(this);let o=this._loop;n=n||0,s=s||this.points.length-n;for(const a of r)o&=i(e,this,a,{start:n,end:n+s-1});return!!o}draw(e,n,s,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),RW(e,this,s,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Ee(ba,"id","line"),Ee(ba,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Ee(ba,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Ee(ba,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function f_(t,e,n,s){const r=t.options,{[n]:i}=t.getProps([n],s);return Math.abs(e-i)<r.radius+r.hitRadius}class Yc extends Qs{constructor(n){super();Ee(this,"parsed");Ee(this,"skip");Ee(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,s,r){const i=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(n-o,2)+Math.pow(s-a,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(n,s){return f_(this,n,"x",s)}inYRange(n,s){return f_(this,n,"y",s)}getCenterPoint(n){const{x:s,y:r}=this.getProps(["x","y"],n);return{x:s,y:r}}size(n){n=n||this.options||{};let s=n.radius||0;s=Math.max(s,s&&n.hoverRadius||0);const r=s&&n.borderWidth||0;return(s+r)*2}draw(n,s){const r=this.options;this.skip||r.radius<.1||!ml(this,s,this.size(r)/2)||(n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.fillStyle=r.backgroundColor,rp(n,r,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Ee(Yc,"id","point"),Ee(Yc,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Ee(Yc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function OT(t,e){const{x:n,y:s,base:r,width:i,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,h;return t.horizontal?(h=o/2,a=Math.min(n,r),l=Math.max(n,r),c=s-h,u=s+h):(h=i/2,a=n-h,l=n+h,c=Math.min(s,r),u=Math.max(s,r)),{left:a,top:c,right:l,bottom:u}}function vr(t,e,n,s){return t?0:cn(e,n,s)}function OW(t,e,n){const s=t.options.borderWidth,r=t.borderSkipped,i=cT(s);return{t:vr(r.top,i.top,0,n),r:vr(r.right,i.right,0,e),b:vr(r.bottom,i.bottom,0,n),l:vr(r.left,i.left,0,e)}}function DW(t,e,n){const{enableBorderRadius:s}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,i=ao(r),o=Math.min(e,n),a=t.borderSkipped,l=s||et(r);return{topLeft:vr(!l||a.top||a.left,i.topLeft,0,o),topRight:vr(!l||a.top||a.right,i.topRight,0,o),bottomLeft:vr(!l||a.bottom||a.left,i.bottomLeft,0,o),bottomRight:vr(!l||a.bottom||a.right,i.bottomRight,0,o)}}function MW(t){const e=OT(t),n=e.right-e.left,s=e.bottom-e.top,r=OW(t,n/2,s/2),i=DW(t,n/2,s/2);return{outer:{x:e.left,y:e.top,w:n,h:s,radius:i},inner:{x:e.left+r.l,y:e.top+r.t,w:n-r.l-r.r,h:s-r.t-r.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,i.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(r.b,r.r))}}}}function nf(t,e,n,s){const r=e===null,i=n===null,a=t&&!(r&&i)&&OT(t,s);return a&&(r||yr(e,a.left,a.right))&&(i||yr(n,a.top,a.bottom))}function NW(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function LW(t,e){t.rect(e.x,e.y,e.w,e.h)}function sf(t,e,n={}){const s=t.x!==n.x?-e:0,r=t.y!==n.y?-e:0,i=(t.x+t.w!==n.x+n.w?e:0)-s,o=(t.y+t.h!==n.y+n.h?e:0)-r;return{x:t.x+s,y:t.y+r,w:t.w+i,h:t.h+o,radius:t.radius}}class Qc extends Qs{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:s,backgroundColor:r}}=this,{inner:i,outer:o}=MW(this),a=NW(o.radius)?Lu:LW;e.save(),(o.w!==i.w||o.h!==i.h)&&(e.beginPath(),a(e,sf(o,n,i)),e.clip(),a(e,sf(i,-n,o)),e.fillStyle=s,e.fill("evenodd")),e.beginPath(),a(e,sf(i,n)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,n,s){return nf(this,e,n,s)}inXRange(e,n){return nf(this,e,null,n)}inYRange(e,n){return nf(this,null,e,n)}getCenterPoint(e){const{x:n,y:s,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(n+r)/2:n,y:i?s:(s+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}Ee(Qc,"id","bar"),Ee(Qc,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Ee(Qc,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const p_=(t,e)=>{let{boxHeight:n=e,boxWidth:s=e}=t;return t.usePointStyle&&(n=Math.min(n,e),s=t.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(e,n)}},VW=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class g_ extends Qs{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,s){this.maxWidth=e,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=ft(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(s=>e.filter(s,this.chart.data))),e.sort&&(n=n.sort((s,r)=>e.sort(s,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,r=un(s.font),i=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=p_(s,i);let c,u;n.font=r.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,i,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,s,r){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=r+a;let h=e;i.textAlign="left",i.textBaseline="middle";let f=-1,g=-u;return this.legendItems.forEach((v,m)=>{const b=s+n/2+i.measureText(v.text).width;(m===0||c[c.length-1]+b+2*a>o)&&(h+=u,c[c.length-(m>0?0:1)]=0,g+=u,f++),l[m]={left:0,top:g,row:f,width:b,height:r},c[c.length-1]+=b+a}),h}_fitCols(e,n,s,r){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let h=a,f=0,g=0,v=0,m=0;return this.legendItems.forEach((b,I)=>{const{itemWidth:T,itemHeight:D}=$W(s,n,i,b,r);I>0&&g+D+2*a>u&&(h+=f+a,c.push({width:f,height:g}),v+=f+a,m++,f=g=0),l[I]={left:v,top:g,col:m,width:T,height:D},f=Math.max(f,T),g+=D+a}),h+=f,c.push({width:f,height:g}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:r},rtl:i}}=this,o=lo(i,this.left,this.width);if(this.isHorizontal()){let a=0,l=tn(s,this.left+r,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=tn(s,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+e+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=tn(s,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=tn(s,this.top+e+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Zg(e,this),this._draw(),em(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:s,ctx:r}=this,{align:i,labels:o}=e,a=St.color,l=lo(e.rtl,this.left,this.width),c=un(o.font),{padding:u}=o,h=c.size,f=h/2;let g;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:v,boxHeight:m,itemHeight:b}=p_(o,h),I=function($,E,_){if(isNaN(v)||v<=0||isNaN(m)||m<0)return;r.save();const w=He(_.lineWidth,1);if(r.fillStyle=He(_.fillStyle,a),r.lineCap=He(_.lineCap,"butt"),r.lineDashOffset=He(_.lineDashOffset,0),r.lineJoin=He(_.lineJoin,"miter"),r.lineWidth=w,r.strokeStyle=He(_.strokeStyle,a),r.setLineDash(He(_.lineDash,[])),o.usePointStyle){const A={radius:m*Math.SQRT2/2,pointStyle:_.pointStyle,rotation:_.rotation,borderWidth:w},k=l.xPlus($,v/2),S=E+f;lT(r,A,k,S,o.pointStyleWidth&&v)}else{const A=E+Math.max((h-m)/2,0),k=l.leftForLtr($,v),S=ao(_.borderRadius);r.beginPath(),Object.values(S).some(R=>R!==0)?Lu(r,{x:k,y:A,w:v,h:m,radius:S}):r.rect(k,A,v,m),r.fill(),w!==0&&r.stroke()}r.restore()},T=function($,E,_){yl(r,_.text,$,E+b/2,c,{strikethrough:_.hidden,textAlign:l.textAlign(_.textAlign)})},D=this.isHorizontal(),L=this._computeTitleHeight();D?g={x:tn(i,this.left+u,this.right-s[0]),y:this.top+u+L,line:0}:g={x:this.left+u,y:tn(i,this.top+L+u,this.bottom-n[0].height),line:0},gT(this.ctx,e.textDirection);const M=b+u;this.legendItems.forEach(($,E)=>{r.strokeStyle=$.fontColor,r.fillStyle=$.fontColor;const _=r.measureText($.text).width,w=l.textAlign($.textAlign||($.textAlign=o.textAlign)),A=v+f+_;let k=g.x,S=g.y;l.setWidth(this.width),D?E>0&&k+A+u>this.right&&(S=g.y+=M,g.line++,k=g.x=tn(i,this.left+u,this.right-s[g.line])):E>0&&S+M>this.bottom&&(k=g.x=k+n[g.line].width+u,g.line++,S=g.y=tn(i,this.top+L+u,this.bottom-n[g.line].height));const R=l.x(k);if(I(R,S,$),k=Oz(w,k+v+f,D?k+A:this.right,e.rtl),T(l.x(k),S,$),D)g.x+=A+u;else if(typeof $.text!="string"){const me=c.lineHeight;g.y+=DT($,me)+u}else g.y+=M}),mT(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,s=un(n.font),r=jn(n.padding);if(!n.display)return;const i=lo(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=s.size/2,c=r.top+l;let u,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+c,h=tn(e.align,h,this.right-f);else{const v=this.columnSizes.reduce((m,b)=>Math.max(m,b.height),0);u=c+tn(e.align,this.top,this.bottom-v-e.labels.padding-this._computeTitleHeight())}const g=tn(a,h,h+f);o.textAlign=i.textAlign(Qg(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=s.string,yl(o,n.text,g,u,s)}_computeTitleHeight(){const e=this.options.title,n=un(e.font),s=jn(e.padding);return e.display?n.lineHeight+s.height:0}_getLegendItemAt(e,n){let s,r,i;if(yr(e,this.left,this.right)&&yr(n,this.top,this.bottom)){for(i=this.legendHitBoxes,s=0;s<i.length;++s)if(r=i[s],yr(e,r.left,r.left+r.width)&&yr(n,r.top,r.top+r.height))return this.legendItems[s]}return null}handleEvent(e){const n=this.options;if(!BW(e.type,n))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,i=VW(r,s);r&&!i&&ft(n.onLeave,[e,r,this],this),this._hoveredItem=s,s&&!i&&ft(n.onHover,[e,s,this],this)}else s&&ft(n.onClick,[e,s,this],this)}}function $W(t,e,n,s,r){const i=FW(s,t,e,n),o=UW(r,s,e.lineHeight);return{itemWidth:i,itemHeight:o}}function FW(t,e,n,s){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((i,o)=>i.length>o.length?i:o)),e+n.size/2+s.measureText(r).width}function UW(t,e,n){let s=t;return typeof e.text!="string"&&(s=DT(e,n)),s}function DT(t,e){const n=t.text?t.text.length:0;return e*n}function BW(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var jW={id:"legend",_element:g_,start(t,e,n){const s=t.legend=new g_({ctx:t.ctx,options:n,chart:t});Nn.configure(t,s,n),Nn.addBox(t,s)},stop(t){Nn.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const s=t.legend;Nn.configure(t,s,n),s.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const s=e.datasetIndex,r=n.chart;r.isDatasetVisible(s)?(r.hide(s),e.hidden=!0):(r.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:r,color:i,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=jn(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:s||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class MT extends Qs{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const r=Ot(s.text)?s.text.length:1;this._padding=jn(s.padding);const i=r*un(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:s,bottom:r,right:i,options:o}=this,a=o.align;let l=0,c,u,h;return this.isHorizontal()?(u=tn(a,s,i),h=n+e,c=i-s):(o.position==="left"?(u=s+e,h=tn(a,r,n),l=Et*-.5):(u=i-e,h=tn(a,n,r),l=Et*.5),c=r-n),{titleX:u,titleY:h,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const s=un(n.font),i=s.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(i);yl(e,n.text,0,0,s,{color:n.color,maxWidth:l,rotation:c,textAlign:Qg(n.align),textBaseline:"middle",translation:[o,a]})}}function zW(t,e){const n=new MT({ctx:t.ctx,options:e,chart:t});Nn.configure(t,n,e),Nn.addBox(t,n),t.titleBlock=n}var HW={id:"title",_element:MT,start(t,e,n){zW(t,n)},stop(t){const e=t.titleBlock;Nn.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const s=t.titleBlock;Nn.configure(t,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const _a={average(t){if(!t.length)return!1;let e,n,s=new Set,r=0,i=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();s.add(l.x),r+=l.y,++i}}return i===0||s.size===0?!1:{x:[...s].reduce((a,l)=>a+l)/s.size,y:r/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,s=e.y,r=Number.POSITIVE_INFINITY,i,o,a;for(i=0,o=t.length;i<o;++i){const l=t[i].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=np(e,c);u<r&&(r=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,s=l.y}return{x:n,y:s}}};function rs(t,e){return e&&(Ot(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Ts(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function qW(t,e){const{element:n,datasetIndex:s,index:r}=e,i=t.getDatasetMeta(s).controller,{label:o,value:a}=i.getLabelAndValue(r);return{chart:t,label:o,parsed:i.getParsed(r),raw:t.data.datasets[s].data[r],formattedValue:a,dataset:i.getDataset(),dataIndex:r,datasetIndex:s,element:n}}function m_(t,e){const n=t.chart.ctx,{body:s,footer:r,title:i}=t,{boxWidth:o,boxHeight:a}=e,l=un(e.bodyFont),c=un(e.titleFont),u=un(e.footerFont),h=i.length,f=r.length,g=s.length,v=jn(e.padding);let m=v.height,b=0,I=s.reduce((L,M)=>L+M.before.length+M.lines.length+M.after.length,0);if(I+=t.beforeBody.length+t.afterBody.length,h&&(m+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),I){const L=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;m+=g*L+(I-g)*l.lineHeight+(I-1)*e.bodySpacing}f&&(m+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let T=0;const D=function(L){b=Math.max(b,n.measureText(L).width+T)};return n.save(),n.font=c.string,ot(t.title,D),n.font=l.string,ot(t.beforeBody.concat(t.afterBody),D),T=e.displayColors?o+2+e.boxPadding:0,ot(s,L=>{ot(L.before,D),ot(L.lines,D),ot(L.after,D)}),T=0,n.font=u.string,ot(t.footer,D),n.restore(),b+=v.width,{width:b,height:m}}function WW(t,e){const{y:n,height:s}=e;return n<s/2?"top":n>t.height-s/2?"bottom":"center"}function KW(t,e,n,s){const{x:r,width:i}=s,o=n.caretSize+n.caretPadding;if(t==="left"&&r+i+o>e.width||t==="right"&&r-i-o<0)return!0}function GW(t,e,n,s){const{x:r,width:i}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return s==="center"?c=r<=(a+l)/2?"left":"right":r<=i/2?c="left":r>=o-i/2&&(c="right"),KW(c,t,e,n)&&(c="center"),c}function y_(t,e,n){const s=n.yAlign||e.yAlign||WW(t,n);return{xAlign:n.xAlign||e.xAlign||GW(t,e,n,s),yAlign:s}}function YW(t,e){let{x:n,width:s}=t;return e==="right"?n-=s:e==="center"&&(n-=s/2),n}function QW(t,e,n){let{y:s,height:r}=t;return e==="top"?s+=n:e==="bottom"?s-=r+n:s-=r/2,s}function v_(t,e,n,s){const{caretSize:r,caretPadding:i,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=r+i,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:g}=ao(o);let v=YW(e,a);const m=QW(e,l,c);return l==="center"?a==="left"?v+=c:a==="right"&&(v-=c):a==="left"?v-=Math.max(u,f)+r:a==="right"&&(v+=Math.max(h,g)+r),{x:cn(v,0,s.width-e.width),y:cn(m,0,s.height-e.height)}}function Tc(t,e,n){const s=jn(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-s.right:t.x+s.left}function b_(t){return rs([],Ts(t))}function XW(t,e,n){return Li(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function __(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const NT={beforeTitle:Es,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return n[e.dataIndex]}return""},afterTitle:Es,beforeBody:Es,beforeLabel:Es,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return rt(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Es,afterBody:Es,beforeFooter:Es,footer:Es,afterFooter:Es};function mn(t,e,n,s){const r=t[e].call(n,s);return typeof r>"u"?NT[e].call(n,s):r}class cp extends Qs{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,s=this.options.setContext(this.getContext()),r=s.enabled&&n.options.animation&&s.animations,i=new vT(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=XW(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:s}=n,r=mn(s,"beforeTitle",this,e),i=mn(s,"title",this,e),o=mn(s,"afterTitle",this,e);let a=[];return a=rs(a,Ts(r)),a=rs(a,Ts(i)),a=rs(a,Ts(o)),a}getBeforeBody(e,n){return b_(mn(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:s}=n,r=[];return ot(e,i=>{const o={before:[],lines:[],after:[]},a=__(s,i);rs(o.before,Ts(mn(a,"beforeLabel",this,i))),rs(o.lines,mn(a,"label",this,i)),rs(o.after,Ts(mn(a,"afterLabel",this,i))),r.push(o)}),r}getAfterBody(e,n){return b_(mn(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:s}=n,r=mn(s,"beforeFooter",this,e),i=mn(s,"footer",this,e),o=mn(s,"afterFooter",this,e);let a=[];return a=rs(a,Ts(r)),a=rs(a,Ts(i)),a=rs(a,Ts(o)),a}_createItems(e){const n=this._active,s=this.chart.data,r=[],i=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(qW(this.chart,n[l]));return e.filter&&(a=a.filter((u,h,f)=>e.filter(u,h,f,s))),e.itemSort&&(a=a.sort((u,h)=>e.itemSort(u,h,s))),ot(a,u=>{const h=__(e.callbacks,u);r.push(mn(h,"labelColor",this,u)),i.push(mn(h,"labelPointStyle",this,u)),o.push(mn(h,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const s=this.options.setContext(this.getContext()),r=this._active;let i,o=[];if(!r.length)this.opacity!==0&&(i={opacity:0});else{const a=_a[s.position].call(this,r,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const l=this._size=m_(this,s),c=Object.assign({},a,l),u=y_(this.chart,s,c),h=v_(s,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,s,r){const i=this.getCaretPosition(e,s,r);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,s){const{xAlign:r,yAlign:i}=this,{caretSize:o,cornerRadius:a}=s,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=ao(a),{x:f,y:g}=e,{width:v,height:m}=n;let b,I,T,D,L,M;return i==="center"?(L=g+m/2,r==="left"?(b=f,I=b-o,D=L+o,M=L-o):(b=f+v,I=b+o,D=L-o,M=L+o),T=b):(r==="left"?I=f+Math.max(l,u)+o:r==="right"?I=f+v-Math.max(c,h)-o:I=this.caretX,i==="top"?(D=g,L=D-o,b=I-o,T=I+o):(D=g+m,L=D+o,b=I+o,T=I-o),M=D),{x1:b,x2:I,x3:T,y1:D,y2:L,y3:M}}drawTitle(e,n,s){const r=this.title,i=r.length;let o,a,l;if(i){const c=lo(s.rtl,this.x,this.width);for(e.x=Tc(this,s.titleAlign,s),n.textAlign=c.textAlign(s.titleAlign),n.textBaseline="middle",o=un(s.titleFont),a=s.titleSpacing,n.fillStyle=s.titleColor,n.font=o.string,l=0;l<i;++l)n.fillText(r[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===i&&(e.y+=s.titleMarginBottom-a)}}_drawColorBox(e,n,s,r,i){const o=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:l,boxWidth:c}=i,u=un(i.bodyFont),h=Tc(this,"left",i),f=r.x(h),g=l<u.lineHeight?(u.lineHeight-l)/2:0,v=n.y+g;if(i.usePointStyle){const m={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},b=r.leftForLtr(f,c)+c/2,I=v+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,rp(e,m,b,I),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,rp(e,m,b,I)}else{e.lineWidth=et(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const m=r.leftForLtr(f,c),b=r.leftForLtr(r.xPlus(f,1),c-2),I=ao(o.borderRadius);Object.values(I).some(T=>T!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,Lu(e,{x:m,y:v,w:c,h:l,radius:I}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Lu(e,{x:b,y:v+1,w:c-2,h:l-2,radius:I}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(m,v,c,l),e.strokeRect(m,v,c,l),e.fillStyle=o.backgroundColor,e.fillRect(b,v+1,c-2,l-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,n,s){const{body:r}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=s,h=un(s.bodyFont);let f=h.lineHeight,g=0;const v=lo(s.rtl,this.x,this.width),m=function(_){n.fillText(_,v.x(e.x+g),e.y+f/2),e.y+=f+i},b=v.textAlign(o);let I,T,D,L,M,$,E;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,e.x=Tc(this,b,s),n.fillStyle=s.bodyColor,ot(this.beforeBody,m),g=a&&b!=="right"?o==="center"?c/2+u:c+2+u:0,L=0,$=r.length;L<$;++L){for(I=r[L],T=this.labelTextColors[L],n.fillStyle=T,ot(I.before,m),D=I.lines,a&&D.length&&(this._drawColorBox(n,e,L,v,s),f=Math.max(h.lineHeight,l)),M=0,E=D.length;M<E;++M)m(D[M]),f=h.lineHeight;ot(I.after,m)}g=0,f=h.lineHeight,ot(this.afterBody,m),e.y-=i}drawFooter(e,n,s){const r=this.footer,i=r.length;let o,a;if(i){const l=lo(s.rtl,this.x,this.width);for(e.x=Tc(this,s.footerAlign,s),e.y+=s.footerMarginTop,n.textAlign=l.textAlign(s.footerAlign),n.textBaseline="middle",o=un(s.footerFont),n.fillStyle=s.footerColor,n.font=o.string,a=0;a<i;++a)n.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+s.footerSpacing}}drawBackground(e,n,s,r){const{xAlign:i,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=s,{topLeft:h,topRight:f,bottomLeft:g,bottomRight:v}=ao(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+h,l),o==="top"&&this.drawCaret(e,n,s,r),n.lineTo(a+c-f,l),n.quadraticCurveTo(a+c,l,a+c,l+f),o==="center"&&i==="right"&&this.drawCaret(e,n,s,r),n.lineTo(a+c,l+u-v),n.quadraticCurveTo(a+c,l+u,a+c-v,l+u),o==="bottom"&&this.drawCaret(e,n,s,r),n.lineTo(a+g,l+u),n.quadraticCurveTo(a,l+u,a,l+u-g),o==="center"&&i==="left"&&this.drawCaret(e,n,s,r),n.lineTo(a,l+h),n.quadraticCurveTo(a,l,a+h,l),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,s=this.$animations,r=s&&s.x,i=s&&s.y;if(r||i){const o=_a[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=m_(this,e),l=Object.assign({},o,this._size),c=y_(n,e,l),u=v_(e,l,c,n);(r._to!==u.x||i._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=jn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=s,this.drawBackground(i,e,r,n),gT(e,n.textDirection),i.y+=o.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),mT(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const s=this._active,r=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),i=!Du(s,r),o=this._positionChanged(r,n);(i||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],o=this._getActiveElements(e,i,n,s),a=this._positionChanged(o,e),l=n||!Du(o,i)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,s,r){const i=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,s);return i.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:s,caretY:r,options:i}=this,o=_a[i.position].call(this,e,n);return o!==!1&&(s!==o.x||r!==o.y)}}Ee(cp,"positioners",_a);var JW={id:"tooltip",_element:cp,positioners:_a,afterInit(t,e,n){n&&(t.tooltip=new cp({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:NT},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const ZW=(t,e,n,s)=>(typeof e=="string"?(n=t.push(e)-1,s.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function eK(t,e,n,s){const r=t.indexOf(e);if(r===-1)return ZW(t,e,n,s);const i=t.lastIndexOf(e);return r!==i?n:r}const tK=(t,e)=>t===null?null:cn(Math.round(t),0,e);function x_(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class up extends Vo{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:r,label:i}of n)s[r]===i&&s.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(rt(e))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===e?n:eK(s,e,He(n,e),this._addedLabels),tK(n,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:s,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),n||(r=this.getLabels().length-1)),this.min=s,this.max=r}buildTicks(){const e=this.min,n=this.max,s=this.options.offset,r=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=e;o<=n;o++)r.push({value:o});return r}getLabelForValue(e){return x_.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Ee(up,"id","category"),Ee(up,"defaults",{ticks:{callback:x_}});function nK(t,e){const n=[],{bounds:r,step:i,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:f}=t,g=i||1,v=u-1,{min:m,max:b}=e,I=!rt(o),T=!rt(a),D=!rt(c),L=(b-m)/(h+1);let M=Eb((b-m)/v/g)*g,$,E,_,w;if(M<1e-14&&!I&&!T)return[{value:m},{value:b}];w=Math.ceil(b/M)-Math.floor(m/M),w>v&&(M=Eb(w*M/v/g)*g),rt(l)||($=Math.pow(10,l),M=Math.ceil(M*$)/$),r==="ticks"?(E=Math.floor(m/M)*M,_=Math.ceil(b/M)*M):(E=m,_=b),I&&T&&i&&Ez((a-o)/i,M/1e3)?(w=Math.round(Math.min((a-o)/M,u)),M=(a-o)/w,E=o,_=a):D?(E=I?o:E,_=T?a:_,w=c-1,M=(_-E)/w):(w=(_-E)/M,$a(w,Math.round(w),M/1e3)?w=Math.round(w):w=Math.ceil(w));const A=Math.max(kb(M),kb(E));$=Math.pow(10,rt(l)?A:l),E=Math.round(E*$)/$,_=Math.round(_*$)/$;let k=0;for(I&&(f&&E!==o?(n.push({value:o}),E<o&&k++,$a(Math.round((E+k*M)*$)/$,o,w_(o,L,t))&&k++):E<o&&k++);k<w;++k){const S=Math.round((E+k*M)*$)/$;if(T&&S>a)break;n.push({value:S})}return T&&f&&_!==a?n.length&&$a(n[n.length-1].value,a,w_(a,L,t))?n[n.length-1].value=a:n.push({value:a}):(!T||_===a)&&n.push({value:_}),n}function w_(t,e,{horizontal:n,minRotation:s}){const r=Ls(s),i=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class sK extends Vo{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return rt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:r,max:i}=this;const o=l=>r=n?r:l,a=l=>i=s?i:l;if(e){const l=ps(r),c=ps(i);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===i){let l=i===0?1:Math.abs(i*.05);a(i+l),e||o(r-l)}this.min=r,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=e,r;return s?(r=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const r={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=nK(r,i);return e.bounds==="ticks"&&kz(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const r=(s-n)/Math.max(e.length-1,1)/2;n-=r,s+=r}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(e){return Jg(e,this.chart.options.locale,this.options.ticks.format)}}class dp extends sK{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Bn(e)?e:0,this.max=Bn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,s=Ls(this.options.ticks.minRotation),r=(e?Math.sin(s):Math.cos(s))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Ee(dp,"id","linear"),Ee(dp,"defaults",{ticks:{callback:aT.formatters.numeric}});const jd={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},vn=Object.keys(jd);function E_(t,e){return t-e}function k_(t,e){if(rt(e))return null;const n=t._adapter,{parser:s,round:r,isoWeekday:i}=t._parseOpts;let o=e;return typeof s=="function"&&(o=s(o)),Bn(o)||(o=typeof s=="string"?n.parse(o,s):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(pl(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,r)),+o)}function T_(t,e,n,s){const r=vn.length;for(let i=vn.indexOf(t);i<r-1;++i){const o=jd[vn[i]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=s)return vn[i]}return vn[r-1]}function rK(t,e,n,s,r){for(let i=vn.length-1;i>=vn.indexOf(n);i--){const o=vn[i];if(jd[o].common&&t._adapter.diff(r,s,o)>=e-1)return o}return vn[n?vn.indexOf(n):0]}function iK(t){for(let e=vn.indexOf(t)+1,n=vn.length;e<n;++e)if(jd[vn[e]].common)return vn[e]}function I_(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:s,hi:r}=Yg(n,e),i=n[s]>=e?n[s]:n[r];t[i]=!0}}function oK(t,e,n,s){const r=t._adapter,i=+r.startOf(e[0].value,s),o=e[e.length-1].value;let a,l;for(a=i;a<=o;a=+r.add(a,1,s))l=n[a],l>=0&&(e[l].major=!0);return e}function S_(t,e,n){const s=[],r={},i=e.length;let o,a;for(o=0;o<i;++o)a=e[o],r[a]=o,s.push({value:a,major:!1});return i===0||!n?s:oK(t,s,r,n)}class Uu extends Vo{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const s=e.time||(e.time={}),r=this._adapter=new cq._date(e.adapters.date);r.init(n),Va(s.displayFormats,r.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:k_(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,s=e.time.unit||"day";let{min:r,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(r=Math.min(r,c.min)),!a&&!isNaN(c.max)&&(i=Math.max(i,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=Bn(r)&&!isNaN(r)?r:+n.startOf(Date.now(),s),i=Bn(i)&&!isNaN(i)?i:+n.endOf(Date.now(),s)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],s=e[e.length-1]),{min:n,max:s}}buildTicks(){const e=this.options,n=e.time,s=e.ticks,r=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,o=this.max,a=Cz(r,i,o);return this._unit=n.unit||(s.autoSkip?T_(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):rK(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:iK(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),S_(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,s=0,r,i;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?s=i:s=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=cn(n,0,o),s=cn(s,0,o),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const e=this._adapter,n=this.min,s=this.max,r=this.options,i=r.time,o=i.unit||T_(i.minUnit,n,s,this._getLabelCapacity(n)),a=He(r.ticks.stepSize,1),l=o==="week"?i.isoWeekday:!1,c=pl(l)||l===!0,u={};let h=n,f,g;if(c&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,c?"day":o),e.diff(s,n,o)>1e5*a)throw new Error(n+" and "+s+" are too far apart with stepSize of "+a+" "+o);const v=r.ticks.source==="data"&&this.getDataTimestamps();for(f=h,g=0;f<s;f=+e.add(f,a,o),g++)I_(u,f,v);return(f===s||r.bounds==="ticks"||g===1)&&I_(u,f,v),Object.keys(u).sort(E_).map(m=>+m)}getLabelForValue(e){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(e,s.tooltipFormat):n.format(e,s.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,i=this._unit,o=n||r[i];return this._adapter.format(e,o)}_tickFormatFunction(e,n,s,r){const i=this.options,o=i.ticks.callback;if(o)return ft(o,[e,n,s],this);const a=i.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],f=s[n],g=c&&h&&f&&f.major;return this._adapter.format(e,r||(g?h:u))}generateTickLabels(e){let n,s,r;for(n=0,s=e.length;n<s;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,s=this.ctx.measureText(e).width,r=Ls(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:s*i+a*o,h:s*o+a*i}}_getLabelCapacity(e){const n=this.options.time,s=n.displayFormats,r=s[n.unit]||s.millisecond,i=this._tickFormatFunction(e,0,S_(this,[e],this._majorUnit),r),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,s;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,s=r.length;n<s;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,s;if(e.length)return e;const r=this.getLabels();for(n=0,s=r.length;n<s;++n)e.push(k_(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return rT(e.sort(E_))}}Ee(Uu,"id","time"),Ee(Uu,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Ic(t,e,n){let s=0,r=t.length-1,i,o,a,l;n?(e>=t[s].pos&&e<=t[r].pos&&({lo:s,hi:r}=oi(t,"pos",e)),{pos:i,time:a}=t[s],{pos:o,time:l}=t[r]):(e>=t[s].time&&e<=t[r].time&&({lo:s,hi:r}=oi(t,"time",e)),{time:i,pos:a}=t[s],{time:o,pos:l}=t[r]);const c=o-i;return c?a+(l-a)*(e-i)/c:a}class A_ extends Uu{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Ic(n,this.min),this._tableRange=Ic(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:s}=this,r=[],i=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=s&&r.push(c);if(r.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(o=0,a=r.length;o<a;++o)u=r[o+1],l=r[o-1],c=r[o],Math.round((u+l)/2)!==c&&i.push({time:c,pos:o/(a-1)});return i}_generate(){const e=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((r,i)=>r-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?e=this.normalize(n.concat(s)):e=n.length?n:s,e=this._cache.all=e,e}getDecimalForValue(e){return(Ic(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return Ic(this._table,s*this._tableRange+this._minPos,!0)}}Ee(A_,"id","timeseries"),Ee(A_,"defaults",Uu.defaults);const LT={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},aK={ariaLabel:{type:String},ariaDescribedby:{type:String}},lK={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...LT,...aK},cK=Hx[0]==="2"?(t,e)=>Object.assign(t,{attrs:e}):(t,e)=>Object.assign(t,e);function qi(t){return _l(t)?qe(t):t}function uK(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t;return _l(e)?new Proxy(t,{}):t}function dK(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function VT(t,e){t.labels=e}function $T(t,e,n){const s=[];t.datasets=e.map(r=>{const i=t.datasets.find(o=>o[n]===r[n]);return!i||!r.data||s.includes(i)?{...r}:(s.push(i),Object.assign(i,r),i)})}function hK(t,e){const n={labels:[],datasets:[]};return VT(n,t.labels),$T(n,t.datasets,e),n}const fK=Nr({props:lK,setup(t,e){let{expose:n,slots:s}=e;const r=z(null),i=kp(null);n({chart:i});const o=()=>{if(!r.value)return;const{type:c,data:u,options:h,plugins:f,datasetIdKey:g}=t,v=hK(u,g),m=uK(v,u);i.value=new Bd(r.value,{type:c,data:m,options:{...h},plugins:f})},a=()=>{const c=qe(i.value);c&&(t.destroyDelay>0?setTimeout(()=>{c.destroy(),i.value=null},t.destroyDelay):(c.destroy(),i.value=null))},l=c=>{c.update(t.updateMode)};return _t(o),Ai(a),vt([()=>t.options,()=>t.data],(c,u)=>{let[h,f]=c,[g,v]=u;const m=qe(i.value);if(!m)return;let b=!1;if(h){const I=qi(h),T=qi(g);I&&I!==T&&(dK(m,I),b=!0)}if(f){const I=qi(f.labels),T=qi(v.labels),D=qi(f.datasets),L=qi(v.datasets);I!==T&&(VT(m.config.data,I),b=!0),D&&D!==L&&($T(m.config.data,D,t.datasetIdKey),b=!0)}b&&Pn(()=>{l(m)})},{deep:!0}),()=>mi("canvas",{role:"img",ariaLabel:t.ariaLabel,ariaDescribedby:t.ariaDescribedby,ref:r},[mi("p",{},[s.default?s.default():""])])}});function lm(t,e){return Bd.register(e),Nr({props:LT,setup(n,s){let{expose:r}=s;const i=kp(null),o=a=>{i.value=a==null?void 0:a.chart};return r({chart:i}),()=>mi(fK,cK({ref:o},{type:t,...n}))}})}const C_=lm("bar",qc),P_=lm("line",Wc),pK=lm("pie",ip),gK={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"},mK={key:0,class:"bg-gray-100 dark:bg-gray-700 p-4 rounded-lg shadow-sm"},yK={class:"h-64"},vK={key:1,class:"bg-gray-100 dark:bg-gray-700 p-4 rounded-lg shadow-sm"},bK={class:"h-64"},_K={key:2,class:"mt-6 bg-gray-100 dark:bg-gray-700 p-4 rounded-lg shadow-sm"},xK={class:"h-64"},wK={key:3,class:"mt-6 bg-gray-100 dark:bg-gray-700 p-4 rounded-lg shadow-sm"},EK={class:"h-64"},kK={key:4,class:"mt-6 bg-gray-100 dark:bg-gray-700 p-4 rounded-lg shadow-sm"},TK={class:"h-64"},IK={__name:"SalesReportCharts",props:{reportData:{type:Object,default:null},selectedReportType:{type:String,required:!0},yearlyYear:{type:Number,default:new Date().getFullYear()}},setup(t){Bd.register(HW,JW,jW,Qc,up,dp,va,ba,Yc);const e=t,n={responsive:!0,maintainAspectRatio:!1,plugins:{tooltip:{callbacks:{label:function(l){let c=l.dataset.label||"";return c&&(c+=": "),l.parsed.y!==null&&(c+=yt(l.parsed.y)),c}}}},scales:{x:{ticks:{color:"#d1d5db"},grid:{color:"rgba(209, 213, 219, 0.1)"}},y:{ticks:{color:"#d1d5db",callback:function(l){return yt(l)}},grid:{color:"rgba(209, 213, 219, 0.1)"}}}},s=be(()=>{var f;if(!e.reportData||!((f=e.reportData.details)!=null&&f.byPaymentType))return{labels:[],datasets:[{data:[]}]};const c=Object.keys(e.reportData.details.byPaymentType).map(g=>La(g)),u=Object.values(e.reportData.details.byPaymentType);return{labels:c,datasets:[{label:"Vendas",backgroundColor:["#F97316","#22C55E","#3B82F6","#EF4444","#8B5CF6","#EC4899"].slice(0,c.length),data:u}]}}),r=be(()=>{var h;if(!e.reportData||!((h=e.reportData.details)!=null&&h.byDeliveryType))return{labels:[],datasets:[{data:[]}]};const l=Object.keys(e.reportData.details.byDeliveryType),c=Object.values(e.reportData.details.byDeliveryType);return{labels:l,datasets:[{label:"Vendas",backgroundColor:["#A855F7","#F43F5E","#10B981","#EAB308","#6366F1"].slice(0,l.length),data:c}]}}),i=be(()=>{var h;if(!e.reportData||!((h=e.reportData.details)!=null&&h.byDay))return{labels:[],datasets:[{data:[]}]};const c=["Domingo","Segunda-feira","Terça-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sábado"].filter(f=>e.reportData.details.byDay[f]!==void 0),u=c.map(f=>e.reportData.details.byDay[f]);return{labels:c,datasets:[{label:"Vendas por dia",backgroundColor:"#F97316",borderColor:"#F97316",data:u}]}}),o=be(()=>{var u;if(!e.reportData||!((u=e.reportData.details)!=null&&u.byDayOfMonth))return{labels:[],datasets:[{data:[]}]};const l=Object.keys(e.reportData.details.byDayOfMonth).sort((h,f)=>parseInt(h)-parseInt(f)),c=l.map(h=>e.reportData.details.byDayOfMonth[h]);return{labels:l.map(h=>`Dia ${h}`),datasets:[{label:"Vendas por dia do mês",backgroundColor:"rgba(59, 130, 246, 0.5)",borderColor:"#3B82F6",data:c,fill:!1,tension:.1}]}}),a=be(()=>{var h;if(!e.reportData||!((h=e.reportData.details)!=null&&h.byMonth))return{labels:[],datasets:[{data:[]}]};const c=["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"].filter(f=>{const g=`${f.charAt(0).toUpperCase()+f.slice(1)} ${e.yearlyYear}`;return e.reportData.details.byMonth[g]!==void 0}).map(f=>f.charAt(0).toUpperCase()+f.slice(1)),u=c.map(f=>{const g=f.toLowerCase(),v=`${g.charAt(0).toUpperCase()+g.slice(1)} ${e.yearlyYear}`;return e.reportData.details.byMonth[v]});return{labels:c,datasets:[{label:"Vendas por mês",backgroundColor:"rgba(139, 92, 246, 0.5)",borderColor:"#8B5CF6",data:u,fill:!1,tension:.1}]}});return(l,c)=>(C(),O("div",gK,[s.value.labels.length>0?(C(),O("div",mK,[c[0]||(c[0]=p("h4",{class:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Vendas por tipo de pagamento",-1)),p("div",yK,[ae(te(C_),{data:s.value,options:n},null,8,["data"])])])):X("",!0),r.value.labels.length>0?(C(),O("div",vK,[c[1]||(c[1]=p("h4",{class:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Vendas por tipo de entrega",-1)),p("div",bK,[ae(te(pK),{data:r.value,options:n},null,8,["data"])])])):X("",!0),t.selectedReportType==="weekly"&&i.value.labels.length>0?(C(),O("div",_K,[c[2]||(c[2]=p("h4",{class:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Vendas por dia da semana:",-1)),p("div",xK,[ae(te(C_),{data:i.value,options:n},null,8,["data"])])])):X("",!0),t.selectedReportType==="monthly"&&o.value.labels.length>0?(C(),O("div",wK,[c[3]||(c[3]=p("h4",{class:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Vendas por dia do mês:",-1)),p("div",EK,[ae(te(P_),{data:o.value,options:n},null,8,["data"])])])):X("",!0),t.selectedReportType==="yearly"&&a.value.labels.length>0?(C(),O("div",kK,[c[4]||(c[4]=p("h4",{class:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Vendas por mês:",-1)),p("div",TK,[ae(te(P_),{data:a.value,options:n},null,8,["data"])])])):X("",!0)]))}},SK={class:"p-6 bg-white dark:bg-gray-800 rounded-lg shadow-md"},AK={class:"mb-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},CK={key:0},PK={key:1},RK={key:2},OK={key:3},DK={key:4},MK={class:"col-span-full md:col-span-1 flex items-end"},NK=["disabled"],LK={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert"},VK={class:"block sm:inline"},$K={key:1,class:"bg-blue-100 border border-blue-400 text-blue-700 px-4 py-3 rounded relative mb-4",role:"alert"},FK={key:2,class:"mt-8"},UK={class:"text-xl font-semibold text-gray-700 dark:text-gray-300 mb-4"},BK={class:"font-normal"},jK={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8"},zK={class:"bg-gray-100 dark:bg-gray-700 p-4 rounded-lg shadow-sm"},HK={class:"text-2xl font-bold text-orange-600 dark:text-orange-400"},qK={key:0,class:"bg-gray-100 dark:bg-gray-700 p-4 rounded-lg shadow-sm"},WK={class:"text-2xl font-bold text-blue-600 dark:text-blue-400"},KK={key:1},GK={class:"overflow-x-auto"},YK={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},QK={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},XK={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200"},JK={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200"},ZK={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200"},eG={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200 capitalize"},tG={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200 capitalize"},nG={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200"},sG={key:2,class:"mt-6"},rG={class:"list-disc pl-5 text-gray-900 dark:text-gray-200"},iG={class:"font-medium"},oG={key:3,class:"mt-6"},aG={class:"list-disc pl-5 text-gray-900 dark:text-gray-200"},lG={class:"font-medium"},cG={key:4,class:"mt-6"},uG={class:"list-disc pl-5 text-gray-900 dark:text-gray-200"},dG={class:"font-medium"},hG={key:5,class:"mt-6"},fG={class:"list-disc pl-5 text-gray-900 dark:text-gray-200"},pG={class:"font-medium"},gG={key:6,class:"mt-6"},mG={class:"list-disc pl-5 text-gray-900 dark:text-gray-200"},yG={class:"font-medium"},vG={__name:"SalesReports",setup(t){const e=z("daily"),n=z(""),s=z(""),r=z(new Date().getFullYear()),i=z(new Date().getMonth()+1),o=z(new Date().getFullYear()),a=z(null),l=z(!1),c=z(null),u=z(!1),h=v=>{const m=new Date(v),b=m.getFullYear(),I=String(m.getMonth()+1).padStart(2,"0"),T=String(m.getDate()).padStart(2,"0");return`${b}-${I}-${T}`};_t(()=>{n.value=h(new Date);const v=new Date,m=new Date(v);m.setDate(v.getDate()-v.getDay()),s.value=h(m),g()}),vt(e,()=>{f()}),vt(a,v=>{v&&Object.keys(v).length>0?(u.value=!1,Pn(()=>{u.value=!0})):u.value=!1},{immediate:!0,deep:!0});const f=()=>{c.value=null,a.value=null,u.value=!1},g=async()=>{l.value=!0,c.value=null,a.value=null,u.value=!1;let v="",m={};try{switch(e.value){case"daily":if(!n.value)throw new Error("Por favor, selecione uma data para o relatório diário.");v="/admin/reports/sales/daily",m={date:n.value};break;case"weekly":v="/admin/reports/sales/weekly",s.value&&(m={startDate:s.value});break;case"monthly":if(!r.value||!i.value)throw new Error("Por favor, insira o ano e o mês para o relatório mensal.");v="/admin/reports/sales/monthly",m={year:r.value,month:i.value};break;case"yearly":if(!o.value)throw new Error("Por favor, insira o ano para o relatório anual.");v="/admin/reports/sales/yearly",m={year:o.value};break;default:throw new Error("Tipo de relatório inválido selecionado.")}const b=await Ge.get(v,{params:m});a.value=b.data}catch(b){b.response&&b.response.data&&b.response.data.message?c.value=b.response.data.message:c.value=b.message||"Ocorreu um erro ao buscar o relatório.",console.error("Erro ao buscar relatório:",b)}finally{l.value=!1}};return(v,m)=>(C(),Je(Ni,null,{default:ye(()=>{var b,I,T,D,L,M,$;return[p("div",SK,[m[25]||(m[25]=p("h2",{class:"text-2xl font-bold text-gray-800 dark:text-gray-200 mb-6"},"Relatórios de vendas",-1)),p("div",AK,[p("div",null,[m[7]||(m[7]=p("label",{for:"reportType",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Tipo de relatório: ",-1)),Ie(p("select",{id:"reportType","onUpdate:modelValue":m[0]||(m[0]=E=>e.value=E),onChange:f,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm rounded-md dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600"},m[6]||(m[6]=[p("option",{value:"daily"},"Diário",-1),p("option",{value:"weekly"},"Semanal",-1),p("option",{value:"monthly"},"Mensal",-1),p("option",{value:"yearly"},"Anual",-1)]),544),[[us,e.value]])]),e.value==="daily"?(C(),O("div",CK,[m[8]||(m[8]=p("label",{for:"dailyDate",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Selecione o dia: ",-1)),Ie(p("input",{type:"date",id:"dailyDate","onUpdate:modelValue":m[1]||(m[1]=E=>n.value=E),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm rounded-md dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600"},null,512),[[Ze,n.value]])])):X("",!0),e.value==="weekly"?(C(),O("div",PK,[m[9]||(m[9]=p("label",{for:"weeklyStartDate",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Data de início da semana: ",-1)),Ie(p("input",{type:"date",id:"weeklyStartDate","onUpdate:modelValue":m[2]||(m[2]=E=>s.value=E),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm rounded-md dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600"},null,512),[[Ze,s.value]])])):X("",!0),e.value==="monthly"?(C(),O("div",RK,[m[10]||(m[10]=p("label",{for:"monthlyYear",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Ano:",-1)),Ie(p("input",{type:"number",id:"monthlyYear","onUpdate:modelValue":m[3]||(m[3]=E=>r.value=E),placeholder:"Ex: 2024",class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm rounded-md dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600"},null,512),[[Ze,r.value]])])):X("",!0),e.value==="monthly"?(C(),O("div",OK,[m[11]||(m[11]=p("label",{for:"monthlyMonth",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Mês:",-1)),Ie(p("input",{type:"number",id:"monthlyMonth","onUpdate:modelValue":m[4]||(m[4]=E=>i.value=E),placeholder:"Ex: 6 (Junho)",min:"1",max:"12",class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm rounded-md dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600"},null,512),[[Ze,i.value]])])):X("",!0),e.value==="yearly"?(C(),O("div",DK,[m[12]||(m[12]=p("label",{for:"yearlyYear",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Ano:",-1)),Ie(p("input",{type:"number",id:"yearlyYear","onUpdate:modelValue":m[5]||(m[5]=E=>o.value=E),placeholder:"Ex: 2024",class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm rounded-md dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600"},null,512),[[Ze,o.value]])])):X("",!0),p("div",MK,[p("button",{onClick:g,disabled:l.value,class:"w-full bg-orange-600 hover:bg-orange-700 text-white font-bold py-2 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 disabled:opacity-50"},U(l.value?"Carregando...":"Gerar relatório"),9,NK)])]),c.value?(C(),O("div",LK,[m[13]||(m[13]=p("strong",{class:"font-bold"},"Erro!",-1)),p("span",VK,U(c.value),1)])):X("",!0),!l.value&&a.value&&Object.keys(a.value).length===0?(C(),O("div",$K,m[14]||(m[14]=[p("strong",{class:"font-bold"},"Aviso!",-1),p("span",{class:"block sm:inline"}," Nenhum dado encontrado para o período selecionado.",-1)]))):X("",!0),a.value&&Object.keys(a.value).length>0&&!l.value?(C(),O("div",FK,[p("h3",UK,[m[15]||(m[15]=ne("Resumo do relatório: ")),p("span",BK,U(a.value.period),1)]),p("div",jK,[p("div",zK,[m[16]||(m[16]=p("p",{class:"text-gray-600 dark:text-gray-400 text-sm"},"Vendas totais",-1)),p("p",HK,U(te(yt)(a.value.totalSales)),1)]),a.value.salesCount!==void 0?(C(),O("div",qK,[m[17]||(m[17]=p("p",{class:"text-gray-600 dark:text-gray-400 text-sm"},"Quantidade de pedidos",-1)),p("p",WK,U(a.value.salesCount),1)])):X("",!0)]),u.value?(C(),Je(IK,{key:0,reportData:a.value,selectedReportType:e.value,yearlyYear:o.value},null,8,["reportData","selectedReportType","yearlyYear"])):X("",!0),e.value==="daily"&&((I=(b=a.value.details)==null?void 0:b.orders)!=null&&I.length)?(C(),O("div",KK,[m[19]||(m[19]=p("h4",{class:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Pedidos detalhados:",-1)),p("div",GK,[p("table",YK,[m[18]||(m[18]=p("thead",{class:"bg-gray-50 dark:bg-gray-700"},[p("tr",null,[p("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," ID do pedido "),p("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Cliente "),p("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Valor Total "),p("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Pagamento "),p("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Entrega "),p("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Data/Hora ")])],-1)),p("tbody",QK,[(C(!0),O(xe,null,Ne(a.value.details.orders,E=>(C(),O("tr",{key:E.orderId},[p("td",XK,U(E.orderId),1),p("td",JK,U(E.customerName),1),p("td",ZK,U(te(yt)(E.totalValue)),1),p("td",eG,U(te(La)(E.paymentMethod)),1),p("td",tG,U(E.deliveryType),1),p("td",nG,U(te(Hg)(E.created_at)),1)]))),128))])])])])):X("",!0),(T=a.value.details)!=null&&T.byPaymentType&&Object.keys(a.value.details.byPaymentType).length>0?(C(),O("div",sG,[m[20]||(m[20]=p("h4",{class:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Vendas por tipo de pagamento:",-1)),p("ul",rG,[(C(!0),O(xe,null,Ne(a.value.details.byPaymentType,(E,_)=>(C(),O("li",{key:_},[ne(U(te(La)(_))+": ",1),p("span",iG,U(te(yt)(E)),1)]))),128))])])):X("",!0),(D=a.value.details)!=null&&D.byDeliveryType&&Object.keys(a.value.details.byDeliveryType).length>0?(C(),O("div",oG,[m[21]||(m[21]=p("h4",{class:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Vendas por tipo de entrega:",-1)),p("ul",aG,[(C(!0),O(xe,null,Ne(a.value.details.byDeliveryType,(E,_)=>(C(),O("li",{key:_},[ne(U(te(La)(_))+": ",1),p("span",lG,U(te(yt)(E)),1)]))),128))])])):X("",!0),e.value==="weekly"&&((L=a.value.details)!=null&&L.byDay)&&Object.keys(a.value.details.byDay).length>0?(C(),O("div",cG,[m[22]||(m[22]=p("h4",{class:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Vendas por Dia da Semana:",-1)),p("ul",uG,[(C(!0),O(xe,null,Ne(a.value.details.byDay,(E,_)=>(C(),O("li",{key:_},[ne(U(_)+": ",1),p("span",dG,U(te(yt)(E)),1)]))),128))])])):X("",!0),e.value==="monthly"&&((M=a.value.details)!=null&&M.byDayOfMonth)&&Object.keys(a.value.details.byDayOfMonth).length>0?(C(),O("div",hG,[m[23]||(m[23]=p("h4",{class:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Vendas por dia do mês:",-1)),p("ul",fG,[(C(!0),O(xe,null,Ne(a.value.details.byDayOfMonth,(E,_)=>(C(),O("li",{key:_},[ne(" Dia "+U(_)+": ",1),p("span",pG,U(te(yt)(E)),1)]))),128))])])):X("",!0),e.value==="yearly"&&(($=a.value.details)!=null&&$.byMonth)&&Object.keys(a.value.details.byMonth).length>0?(C(),O("div",gG,[m[24]||(m[24]=p("h4",{class:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-3"},"Vendas por mês:",-1)),p("ul",mG,[(C(!0),O(xe,null,Ne(a.value.details.byMonth,(E,_)=>(C(),O("li",{key:_},[ne(U(_)+": ",1),p("span",yG,U(te(yt)(E)),1)]))),128))])])):X("",!0)])):X("",!0)])]}),_:1}))}},fi=HC({history:_C("/"),routes:[{path:"/",name:"home",component:m5,meta:{enterActiveClass:"animate__animated animate__fadeIn animate__faster",leaveActiveClass:"animate__animated animate__fadeOut animate__faster"}},{path:"/carrinho",name:"cart",component:M5,meta:{enterActiveClass:"animate__animated animate__fadeIn animate__faster",leaveActiveClass:"animate__animated animate__fadeOut animate__faster"}},{path:"/produto/:slug",name:"productDetail",component:uF,meta:{enterActiveClass:"animate__animated animate__fadeIn animate__faster",leaveActiveClass:"animate__animated animate__fadeOut animate__faster"}},{path:"/favoritos",name:"favritos",component:mF,meta:{enterActiveClass:"animate__animated animate__fadeIn animate__faster",leaveActiveClass:"animate__animated animate__fadeOut animate__faster"}},{path:"/perfil",name:"perfil",component:CF,meta:{enterActiveClass:"animate__animated animate__fadeIn animate__faster",leaveActiveClass:"animate__animated animate__fadeOut animate__faster"}},{path:"/checkout",name:"checkout",component:z6,meta:{enterActiveClass:"animate__animated animate__fadeIn animate__faster",leaveActiveClass:"animate__animated animate__fadeOut animate__faster"}},{path:"/monte-sua-pizza",name:"buildPiza",component:_U,meta:{enterActiveClass:"animate__animated animate__fadeIn animate__faster",leaveActiveClass:"animate__animated animate__fadeOut animate__faster"}},{path:"/configuracoes",name:"settings",component:MU,meta:{enterActiveClass:"animate__animated animate__fadeIn animate__faster",leaveActiveClass:"animate__animated animate__fadeOut animate__faster"}},{path:"/admin/login",name:"admin-login",component:g7,meta:{requiresAuth:!1,publicRoute:!0}},{path:"/admin",name:"admin-dashboard",component:r9,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/orders",name:"admin-orders",component:VB,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/products",name:"admin-products",component:$8,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/categories",name:"admin-categories",component:Ij,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/whatsapp-qr",name:"whatsapp-qr",component:Hj,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/settings",name:"admin-settings",component:i7,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/manage-users",name:"admin-manager-users",component:z7,meta:{requiresAuth:!0,requiresAdmin:!0}},{path:"/admin/reports",name:"AdminSalesReports",component:vG,meta:{requiresAuth:!0,requiresAdmin:!0}}]});fi.beforeEach(async(t,e,n)=>{const s=$d();!s.isAuthenticated&&!s.loading&&await s.initializeAuth();const r=t.matched.some(c=>c.meta.requiresAuth),i=t.matched.some(c=>c.meta.requiresAdmin),o=t.matched.some(c=>c.meta.publicRoute),a=s.isAuthenticated,l=s.isAdmin;r&&!a?(console.log("Acesso negado: Rota requer autenticação, mas usuário não está autenticado."),n({name:"admin-login"})):i&&!l?(console.log("Acesso negado: Rota requer privilégios de admin, mas usuário não é admin. Redirecionando para home."),n({name:"home"})):o&&a?(console.log("Redirecionando: Usuário autenticado tentando acessar página de login."),n({name:"admin-dashboard"})):(console.log("Acesso permitido."),n())});function bG(t){return typeof t!="number"?"R$ 0,00":new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2,maximumFractionDigits:2}).format(t)}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("firebase-messaging-sw.js").then(t=>{console.log("Service Worker registrado com sucesso:",t)}).catch(t=>{console.error("Falha no registro do Service Worker:",t)})});const zd=NA(t2);zd.config.globalProperties.$formatPrice=bG;zd.use($A());zd.use(fi);zd.mount("#app");
